<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JS i18n Mastery ‚Äî Interactive Learning App</title>
<style>
:root {
  --bg: #0f1117;
  --surface: #1a1d27;
  --surface2: #242836;
  --surface3: #2e3348;
  --primary: #6c5ce7;
  --primary-light: #a29bfe;
  --accent: #00cec9;
  --accent2: #fd79a8;
  --success: #00b894;
  --warning: #fdcb6e;
  --danger: #e17055;
  --text: #dfe6e9;
  --text-dim: #8a91a8;
  --border: #353a50;
  --code-bg: #12141c;
  --radius: 12px;
  --shadow: 0 8px 32px rgba(0,0,0,0.3);
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.7;
  min-height: 100vh;
}

/* Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--surface3); border-radius: 3px; }

/* Header */
.app-header {
  background: linear-gradient(135deg, var(--surface) 0%, var(--surface2) 100%);
  border-bottom: 1px solid var(--border);
  padding: 20px 0;
  position: sticky;
  top: 0;
  z-index: 100;
  backdrop-filter: blur(20px);
}

.header-inner {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 16px;
}

.logo {
  display: flex;
  align-items: center;
  gap: 12px;
}

.logo-icon {
  width: 44px;
  height: 44px;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  font-weight: 800;
}

.logo h1 {
  font-size: 1.3rem;
  font-weight: 700;
  background: linear-gradient(135deg, var(--primary-light), var(--accent));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.logo small {
  display: block;
  font-size: 0.7rem;
  color: var(--text-dim);
  -webkit-text-fill-color: var(--text-dim);
}

.progress-bar {
  flex: 1;
  max-width: 300px;
  min-width: 150px;
}

.progress-track {
  height: 8px;
  background: var(--surface3);
  border-radius: 4px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--primary), var(--accent));
  border-radius: 4px;
  transition: width 0.5s ease;
  width: 0%;
}

.progress-label {
  font-size: 0.75rem;
  color: var(--text-dim);
  margin-bottom: 4px;
}

/* Navigation */
.nav-tabs {
  display: flex;
  gap: 4px;
  max-width: 1200px;
  margin: 0 auto;
  padding: 16px 24px 0;
  overflow-x: auto;
  scrollbar-width: none;
}

.nav-tabs::-webkit-scrollbar { display: none; }

.nav-tab {
  padding: 10px 20px;
  background: transparent;
  border: 1px solid transparent;
  color: var(--text-dim);
  border-radius: var(--radius) var(--radius) 0 0;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  white-space: nowrap;
  transition: all 0.3s;
  font-family: inherit;
}

.nav-tab:hover {
  color: var(--text);
  background: var(--surface);
}

.nav-tab.active {
  background: var(--surface);
  color: var(--primary-light);
  border: 1px solid var(--border);
  border-bottom-color: var(--surface);
}

.nav-tab .tab-emoji {
  margin-right: 6px;
}

/* Main Content */
.main-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px 60px;
}

.tab-panel {
  display: none;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 0 var(--radius) var(--radius) var(--radius);
  padding: 32px;
  animation: fadeIn 0.4s ease;
}

.tab-panel.active { display: block; }

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Typography */
h2 {
  font-size: 1.8rem;
  margin-bottom: 8px;
  background: linear-gradient(135deg, var(--text), var(--primary-light));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

h3 {
  font-size: 1.3rem;
  margin: 28px 0 12px;
  color: var(--accent);
}

h4 {
  font-size: 1.05rem;
  margin: 20px 0 8px;
  color: var(--primary-light);
}

p { margin-bottom: 12px; color: var(--text); }

.subtitle {
  color: var(--text-dim);
  font-size: 1rem;
  margin-bottom: 24px;
}

/* Lesson sections */
.lesson-section {
  margin-bottom: 40px;
  padding-bottom: 40px;
  border-bottom: 1px solid var(--border);
}

.lesson-section:last-child { border-bottom: none; }

.concept-card {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  margin: 16px 0;
}

.concept-card.highlight {
  border-left: 4px solid var(--primary);
}

.concept-card.tip {
  border-left: 4px solid var(--success);
}

.concept-card.warning {
  border-left: 4px solid var(--warning);
}

.concept-card.danger {
  border-left: 4px solid var(--danger);
}

.concept-card .card-title {
  font-weight: 700;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Code blocks */
pre {
  background: var(--code-bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 16px 20px;
  overflow-x: auto;
  margin: 12px 0;
  font-size: 0.88rem;
  line-height: 1.6;
}

code {
  font-family: 'Cascadia Code', 'Fira Code', 'JetBrains Mono', monospace;
  font-size: 0.88rem;
}

:not(pre) > code {
  background: var(--surface3);
  padding: 2px 8px;
  border-radius: 4px;
  color: var(--accent);
}

.kw { color: #c792ea; }
.str { color: #c3e88d; }
.num { color: #f78c6c; }
.cm { color: #546e7a; }
.fn { color: #82aaff; }
.obj { color: #ffcb6b; }
.op { color: #89ddff; }
.prop { color: #f07178; }

/* Interactive playground */
.playground {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  margin: 16px 0;
  overflow: hidden;
}

.playground-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: var(--surface3);
  border-bottom: 1px solid var(--border);
}

.playground-title {
  font-weight: 600;
  font-size: 0.9rem;
  color: var(--primary-light);
}

.playground-body { padding: 16px; }

.playground textarea {
  width: 100%;
  min-height: 120px;
  background: var(--code-bg);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 12px;
  font-family: 'Cascadia Code', 'Fira Code', monospace;
  font-size: 0.85rem;
  resize: vertical;
  line-height: 1.6;
}

.playground textarea:focus {
  outline: none;
  border-color: var(--primary);
}

.output-box {
  background: var(--code-bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 12px;
  margin-top: 8px;
  min-height: 40px;
  font-family: 'Cascadia Code', 'Fira Code', monospace;
  font-size: 0.85rem;
  color: var(--success);
  white-space: pre-wrap;
  word-break: break-all;
}

.output-box.error { color: var(--danger); }

/* Buttons */
.btn {
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s;
  font-family: inherit;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.btn-primary {
  background: var(--primary);
  color: white;
}

.btn-primary:hover {
  background: var(--primary-light);
  transform: translateY(-1px);
}

.btn-success {
  background: var(--success);
  color: white;
}

.btn-success:hover { filter: brightness(1.1); }

.btn-accent {
  background: var(--accent);
  color: var(--bg);
}

.btn-accent:hover { filter: brightness(1.1); }

.btn-outline {
  background: transparent;
  color: var(--text);
  border: 1px solid var(--border);
}

.btn-outline:hover {
  background: var(--surface3);
}

.btn-sm {
  padding: 6px 14px;
  font-size: 0.8rem;
}

.btn-group {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin: 12px 0;
}

/* Quiz */
.quiz-container {
  margin: 16px 0;
}

.quiz-question {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  margin-bottom: 20px;
}

.quiz-question h4 {
  margin-top: 0;
  color: var(--text);
  display: flex;
  align-items: flex-start;
  gap: 10px;
}

.q-number {
  background: var(--primary);
  color: white;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  flex-shrink: 0;
}

.quiz-options { margin: 16px 0; }

.quiz-option {
  display: block;
  width: 100%;
  text-align: left;
  padding: 12px 16px;
  margin: 6px 0;
  background: var(--surface3);
  border: 2px solid transparent;
  border-radius: 8px;
  color: var(--text);
  cursor: pointer;
  font-family: inherit;
  font-size: 0.9rem;
  transition: all 0.2s;
}

.quiz-option:hover {
  border-color: var(--primary);
  background: var(--surface);
}

.quiz-option.correct {
  border-color: var(--success);
  background: rgba(0, 184, 148, 0.1);
}

.quiz-option.incorrect {
  border-color: var(--danger);
  background: rgba(225, 112, 85, 0.1);
}

.quiz-option.disabled {
  pointer-events: none;
}

.quiz-feedback {
  padding: 12px 16px;
  border-radius: 8px;
  margin-top: 12px;
  font-size: 0.9rem;
  display: none;
}

.quiz-feedback.show { display: block; }

.quiz-feedback.correct-fb {
  background: rgba(0, 184, 148, 0.15);
  border: 1px solid var(--success);
  color: var(--success);
}

.quiz-feedback.incorrect-fb {
  background: rgba(225, 112, 85, 0.15);
  border: 1px solid var(--danger);
  color: var(--danger);
}

/* Exercise */
.exercise {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  margin: 16px 0;
}

.exercise-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.difficulty {
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
}

.diff-easy { background: rgba(0,184,148,0.2); color: var(--success); }
.diff-medium { background: rgba(253,203,110,0.2); color: var(--warning); }
.diff-hard { background: rgba(225,112,85,0.2); color: var(--danger); }

.exercise-result {
  padding: 12px 16px;
  border-radius: 8px;
  margin-top: 12px;
  display: none;
}

.exercise-result.show { display: block; }

.exercise-result.pass {
  background: rgba(0,184,148,0.15);
  border: 1px solid var(--success);
  color: var(--success);
}

.exercise-result.fail {
  background: rgba(225,112,85,0.15);
  border: 1px solid var(--danger);
  color: var(--danger);
}

/* Cheat sheet */
.cheat-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
  gap: 16px;
  margin: 16px 0;
}

.cheat-card {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
}

.cheat-card h4 {
  margin-top: 0;
  color: var(--accent);
  border-bottom: 1px solid var(--border);
  padding-bottom: 8px;
}

.cheat-card pre {
  font-size: 0.8rem;
  margin: 8px 0;
}

/* Pitfall cards */
.pitfall {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-left: 4px solid var(--danger);
  border-radius: var(--radius);
  padding: 24px;
  margin: 16px 0;
}

.pitfall h4 {
  color: var(--danger);
  margin-top: 0;
}

.pitfall .fix {
  margin-top: 12px;
  padding: 12px;
  background: rgba(0,184,148,0.08);
  border: 1px solid rgba(0,184,148,0.2);
  border-radius: 8px;
}

.pitfall .fix h5 {
  color: var(--success);
  margin-bottom: 6px;
}

/* Comparison table */
.compare-table {
  width: 100%;
  border-collapse: collapse;
  margin: 16px 0;
  font-size: 0.9rem;
}

.compare-table th,
.compare-table td {
  padding: 12px 16px;
  text-align: left;
  border: 1px solid var(--border);
}

.compare-table th {
  background: var(--surface3);
  color: var(--primary-light);
  font-weight: 600;
}

.compare-table td {
  background: var(--surface2);
}

.compare-table tr:hover td {
  background: var(--surface3);
}

/* Locale selector demo */
.locale-demo {
  display: flex;
  gap: 12px;
  align-items: center;
  flex-wrap: wrap;
  margin: 12px 0;
}

.locale-select {
  padding: 8px 16px;
  background: var(--surface3);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--text);
  font-size: 0.9rem;
  cursor: pointer;
  font-family: inherit;
}

.locale-select:focus {
  outline: none;
  border-color: var(--primary);
}

.demo-result {
  background: var(--code-bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 16px;
  margin: 12px 0;
  font-family: 'Cascadia Code', 'Fira Code', monospace;
  font-size: 0.9rem;
}

.demo-result .label {
  color: var(--text-dim);
  font-size: 0.8rem;
  display: block;
  margin-bottom: 2px;
}

.demo-result .value {
  color: var(--accent);
  font-size: 1rem;
}

.demo-row {
  padding: 8px 0;
  border-bottom: 1px solid var(--border);
}

.demo-row:last-child { border-bottom: none; }

/* RTL demo */
.rtl-demo-box {
  border: 2px dashed var(--border);
  border-radius: var(--radius);
  padding: 20px;
  margin: 12px 0;
}

.rtl-demo-box[dir="rtl"] {
  text-align: right;
  direction: rtl;
}

/* Score display */
.score-display {
  text-align: center;
  padding: 30px;
  background: var(--surface2);
  border-radius: var(--radius);
  margin: 20px 0;
}

.score-number {
  font-size: 3rem;
  font-weight: 800;
  background: linear-gradient(135deg, var(--primary-light), var(--accent));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* Accordion */
.accordion-item {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  margin: 8px 0;
  overflow: hidden;
}

.accordion-header {
  padding: 16px 20px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: 600;
  transition: background 0.2s;
}

.accordion-header:hover { background: var(--surface3); }

.accordion-arrow {
  transition: transform 0.3s;
}

.accordion-item.open .accordion-arrow {
  transform: rotate(180deg);
}

.accordion-body {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.accordion-body-inner {
  padding: 0 20px 20px;
}

/* Responsive */
@media (max-width: 768px) {
  .header-inner { flex-direction: column; align-items: stretch; }
  .progress-bar { max-width: 100%; }
  .tab-panel { padding: 20px 16px; }
  .cheat-grid { grid-template-columns: 1fr; }
  h2 { font-size: 1.4rem; }
  .nav-tab { padding: 8px 14px; font-size: 0.8rem; }
}

/* Animations */
.bounce-in {
  animation: bounceIn 0.5s ease;
}

@keyframes bounceIn {
  0% { transform: scale(0.8); opacity: 0; }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); opacity: 1; }
}

/* Tooltip style info boxes */
.info-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 12px;
  margin: 16px 0;
}

.info-box {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px;
  text-align: center;
}

.info-box .emoji { font-size: 2rem; margin-bottom: 8px; }
.info-box .info-title { font-weight: 700; color: var(--primary-light); }
.info-box .info-desc { font-size: 0.85rem; color: var(--text-dim); margin-top: 4px; }

/* Toggle */
.toggle-group {
  display: flex;
  gap: 4px;
  background: var(--surface3);
  border-radius: 8px;
  padding: 4px;
  margin: 12px 0;
  width: fit-content;
}

.toggle-btn {
  padding: 6px 16px;
  border: none;
  background: transparent;
  color: var(--text-dim);
  border-radius: 6px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.85rem;
  font-weight: 600;
  transition: all 0.2s;
}

.toggle-btn.active {
  background: var(--primary);
  color: white;
}

/* Live example box */
.live-example {
  border: 1px solid var(--primary);
  border-radius: var(--radius);
  overflow: hidden;
  margin: 16px 0;
}

.live-example-header {
  background: rgba(108, 92, 231, 0.15);
  padding: 8px 16px;
  font-weight: 600;
  color: var(--primary-light);
  font-size: 0.85rem;
}

.live-example-body {
  padding: 16px;
  background: var(--surface2);
}

/* Numbered steps */
.steps { counter-reset: step; }
.step {
  counter-increment: step;
  padding: 16px 16px 16px 60px;
  position: relative;
  margin: 8px 0;
  background: var(--surface2);
  border-radius: var(--radius);
  border: 1px solid var(--border);
}

.step::before {
  content: counter(step);
  position: absolute;
  left: 16px;
  top: 16px;
  width: 30px;
  height: 30px;
  background: var(--primary);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
}

/* Library comparison cards */
.lib-card {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  margin: 12px 0;
}

.lib-card h4 {
  margin-top: 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.lib-card .stars { color: var(--warning); }
.lib-card .lib-meta {
  display: flex;
  gap: 16px;
  margin: 8px 0;
  font-size: 0.8rem;
  color: var(--text-dim);
}

.tag {
  display: inline-block;
  padding: 2px 10px;
  background: var(--surface3);
  border-radius: 12px;
  font-size: 0.75rem;
  color: var(--text-dim);
  margin: 2px;
}

/* Spacer */
.spacer { height: 20px; }

/* Badge */
.badge {
  display: inline-block;
  padding: 3px 10px;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 700;
}
.badge-new { background: rgba(0,206,201,0.2); color: var(--accent); }
.badge-important { background: rgba(253,121,168,0.2); color: var(--accent2); }

/* Section nav */
.section-nav {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 24px;
}

.section-link {
  padding: 6px 14px;
  background: var(--surface3);
  border: 1px solid var(--border);
  border-radius: 20px;
  color: var(--text-dim);
  font-size: 0.8rem;
  cursor: pointer;
  transition: all 0.2s;
  text-decoration: none;
}

.section-link:hover,
.section-link.active {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
}

.hidden { display: none !important; }
</style>
</head>
<body>

<header class="app-header">
  <div class="header-inner">
    <div class="logo">
      <div class="logo-icon">üåê</div>
      <div>
        <h1>JS i18n Mastery</h1>
        <small>Internationalization ‚Äî From Zero to Interview-Ready</small>
      </div>
    </div>
    <div class="progress-bar">
      <div class="progress-label">Overall Progress: <span id="progressText">0%</span></div>
      <div class="progress-track">
        <div class="progress-fill" id="progressFill"></div>
      </div>
    </div>
  </div>
</header>

<nav class="nav-tabs" id="navTabs">
  <button class="nav-tab active" data-tab="learn"><span class="tab-emoji">üìö</span>Learn</button>
  <button class="nav-tab" data-tab="examples"><span class="tab-emoji">üî¨</span>Live Examples</button>
  <button class="nav-tab" data-tab="exercises"><span class="tab-emoji">üí™</span>Exercises</button>
  <button class="nav-tab" data-tab="quiz"><span class="tab-emoji">üß†</span>Quiz</button>
  <button class="nav-tab" data-tab="pitfalls"><span class="tab-emoji">‚ö†Ô∏è</span>Pitfalls</button>
  <button class="nav-tab" data-tab="cheatsheet"><span class="tab-emoji">üìã</span>Cheat Sheet</button>
</nav>

<main class="main-content">

<!-- ==================== LEARN TAB ==================== -->
<div class="tab-panel active" id="tab-learn">
  <h2>üìö JavaScript Internationalization (i18n)</h2>
  <p class="subtitle">Everything you need to know to build world-ready JavaScript applications.</p>

  <div class="section-nav">
    <a class="section-link active" onclick="scrollToLesson('l1')">What is i18n?</a>
    <a class="section-link" onclick="scrollToLesson('l2')">Intl API</a>
    <a class="section-link" onclick="scrollToLesson('l3')">Number Formatting</a>
    <a class="section-link" onclick="scrollToLesson('l4')">Date/Time</a>
    <a class="section-link" onclick="scrollToLesson('l5')">Collation</a>
    <a class="section-link" onclick="scrollToLesson('l6')">Locale</a>
    <a class="section-link" onclick="scrollToLesson('l7')">Libraries</a>
    <a class="section-link" onclick="scrollToLesson('l8')">RTL</a>
    <a class="section-link" onclick="scrollToLesson('l9')">Best Practices</a>
  </div>

  <!-- Lesson 1: What is i18n? -->
  <section class="lesson-section" id="l1">
    <h3>üåç 1. What is Internationalization (i18n)?</h3>
    
    <div class="concept-card highlight">
      <div class="card-title">üí° The Simple Explanation</div>
      <p><strong>Internationalization (i18n)</strong> = designing your app so it <em>can</em> support multiple languages/regions.</p>
      <p><strong>Localization (L10n)</strong> = actually <em>translating and adapting</em> it for a specific language/region.</p>
      <p><strong>Why "i18n"?</strong> Because there are <strong>18 letters</strong> between the "i" and the "n" in "internationalization"!</p>
    </div>

    <div class="info-grid">
      <div class="info-box">
        <div class="emoji">üåê</div>
        <div class="info-title">i18n</div>
        <div class="info-desc">Internationalization ‚Äî the architecture. Building the framework.</div>
      </div>
      <div class="info-box">
        <div class="emoji">üéØ</div>
        <div class="info-title">L10n</div>
        <div class="info-desc">Localization ‚Äî the content. Translating strings, adapting formats.</div>
      </div>
      <div class="info-box">
        <div class="emoji">üåè</div>
        <div class="info-title">g11n</div>
        <div class="info-desc">Globalization ‚Äî the strategy. Business decision to go global.</div>
      </div>
    </div>

    <h4>What Does i18n Cover?</h4>
    <div class="concept-card">
      <ul style="padding-left: 20px;">
        <li><strong>Text translation</strong> ‚Äî UI labels, messages, errors</li>
        <li><strong>Date/time formats</strong> ‚Äî 12/25/2024 vs 25.12.2024</li>
        <li><strong>Number formats</strong> ‚Äî 1,000.50 vs 1.000,50</li>
        <li><strong>Currency</strong> ‚Äî $100 vs ‚Ç¨100 vs ¬•100</li>
        <li><strong>Pluralization</strong> ‚Äî "1 item" vs "2 items" vs "0 items"</li>
        <li><strong>Text direction</strong> ‚Äî LTR (English) vs RTL (Arabic, Hebrew)</li>
        <li><strong>Sorting/Collation</strong> ‚Äî alphabetical order varies by language</li>
        <li><strong>Units of measure</strong> ‚Äî miles vs kilometers</li>
      </ul>
    </div>

    <h4>Locale Identifiers</h4>
    <p>A <strong>locale</strong> is a combination of language + region (+ optional script/variant):</p>
    <pre><code><span class="cm">// BCP 47 Language Tags</span>
<span class="str">"en"</span>       <span class="cm">// English (general)</span>
<span class="str">"en-US"</span>    <span class="cm">// English (United States)</span>
<span class="str">"en-GB"</span>    <span class="cm">// English (United Kingdom)</span>
<span class="str">"fr-FR"</span>    <span class="cm">// French (France)</span>
<span class="str">"fr-CA"</span>    <span class="cm">// French (Canada)</span>
<span class="str">"zh-Hans"</span>  <span class="cm">// Chinese (Simplified)</span>
<span class="str">"zh-Hant"</span>  <span class="cm">// Chinese (Traditional)</span>
<span class="str">"ar-SA"</span>    <span class="cm">// Arabic (Saudi Arabia)</span>
<span class="str">"ja-JP"</span>    <span class="cm">// Japanese (Japan)</span></code></pre>
  </section>

  <!-- Lesson 2: Intl API -->
  <section class="lesson-section" id="l2">
    <h3>üîß 2. The Built-in Intl API</h3>
    
    <div class="concept-card tip">
      <div class="card-title">‚úÖ Key Insight</div>
      <p>JavaScript has a <strong>built-in</strong> <code>Intl</code> object (no libraries needed!) that provides language-sensitive string comparison, number formatting, and date/time formatting.</p>
    </div>

    <h4>Intl API Components</h4>
    <table class="compare-table">
      <thead>
        <tr><th>Constructor</th><th>Purpose</th><th>Example</th></tr>
      </thead>
      <tbody>
        <tr>
          <td><code>Intl.NumberFormat</code></td>
          <td>Format numbers, currencies, percentages</td>
          <td>1,234.56 ‚Üí 1.234,56</td>
        </tr>
        <tr>
          <td><code>Intl.DateTimeFormat</code></td>
          <td>Format dates and times</td>
          <td>Jan 5 ‚Üí 5. Jan</td>
        </tr>
        <tr>
          <td><code>Intl.Collator</code></td>
          <td>Language-sensitive string comparison</td>
          <td>Sort: √§ after a (German)</td>
        </tr>
        <tr>
          <td><code>Intl.PluralRules</code></td>
          <td>Pluralization rules</td>
          <td>1‚Üí"one", 2‚Üí"other"</td>
        </tr>
        <tr>
          <td><code>Intl.RelativeTimeFormat</code></td>
          <td>Relative time strings</td>
          <td>"3 days ago"</td>
        </tr>
        <tr>
          <td><code>Intl.ListFormat</code></td>
          <td>Join list items</td>
          <td>"A, B, and C"</td>
        </tr>
        <tr>
          <td><code>Intl.DisplayNames</code></td>
          <td>Display names for languages, regions</td>
          <td>"fr" ‚Üí "French"</td>
        </tr>
        <tr>
          <td><code>Intl.Segmenter</code></td>
          <td>Text segmentation</td>
          <td>Split by word/sentence</td>
        </tr>
      </tbody>
    </table>

    <h4>General Pattern</h4>
    <pre><code><span class="cm">// All Intl constructors follow this pattern:</span>
<span class="kw">const</span> formatter = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">SomeFormat</span>(locale, options);
<span class="kw">const</span> result = formatter.<span class="fn">format</span>(value);

<span class="cm">// locale = string like "en-US" or array ["en-US", "en"]</span>
<span class="cm">// options = object with formatting preferences</span>
<span class="cm">// If locale is undefined ‚Üí uses browser's default locale</span></code></pre>
  </section>

  <!-- Lesson 3: Number Formatting -->
  <section class="lesson-section" id="l3">
    <h3>üî¢ 3. Number Formatting ‚Äî Intl.NumberFormat</h3>

    <h4>Basic Number Formatting</h4>
    <pre><code><span class="cm">// Default (uses browser locale)</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>().<span class="fn">format</span>(<span class="num">1234567.89</span>);

<span class="cm">// Specific locales</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'en-US'</span>).<span class="fn">format</span>(<span class="num">1234567.89</span>);  <span class="cm">// "1,234,567.89"</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'de-DE'</span>).<span class="fn">format</span>(<span class="num">1234567.89</span>);  <span class="cm">// "1.234.567,89"</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'fr-FR'</span>).<span class="fn">format</span>(<span class="num">1234567.89</span>);  <span class="cm">// "1 234 567,89"</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'ja-JP'</span>).<span class="fn">format</span>(<span class="num">1234567.89</span>);  <span class="cm">// "1,234,567.89"</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'ar-SA'</span>).<span class="fn">format</span>(<span class="num">1234567.89</span>);  <span class="cm">// "Ÿ°Ÿ¨Ÿ¢Ÿ£Ÿ§Ÿ¨Ÿ•Ÿ¶ŸßŸ´Ÿ®Ÿ©"</span></code></pre>

    <h4>Currency Formatting</h4>
    <pre><code><span class="kw">const</span> usd = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'en-US'</span>, {
  <span class="prop">style</span>: <span class="str">'currency'</span>,
  <span class="prop">currency</span>: <span class="str">'USD'</span>
});
usd.<span class="fn">format</span>(<span class="num">42.5</span>);  <span class="cm">// "$42.50"</span>

<span class="kw">const</span> eur = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'de-DE'</span>, {
  <span class="prop">style</span>: <span class="str">'currency'</span>,
  <span class="prop">currency</span>: <span class="str">'EUR'</span>
});
eur.<span class="fn">format</span>(<span class="num">42.5</span>);  <span class="cm">// "42,50 ‚Ç¨"</span>

<span class="kw">const</span> yen = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'ja-JP'</span>, {
  <span class="prop">style</span>: <span class="str">'currency'</span>,
  <span class="prop">currency</span>: <span class="str">'JPY'</span>
});
yen.<span class="fn">format</span>(<span class="num">42.5</span>);  <span class="cm">// "Ôø•43" (JPY has no decimals!)</span></code></pre>

    <h4>Percentage & Units</h4>
    <pre><code><span class="cm">// Percentage</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'en'</span>, { <span class="prop">style</span>: <span class="str">'percent'</span> }).<span class="fn">format</span>(<span class="num">0.75</span>);
<span class="cm">// "75%"</span>

<span class="cm">// Units (speed, temperature, etc.)</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'en'</span>, {
  <span class="prop">style</span>: <span class="str">'unit'</span>,
  <span class="prop">unit</span>: <span class="str">'kilometer-per-hour'</span>
}).<span class="fn">format</span>(<span class="num">120</span>);  <span class="cm">// "120 km/h"</span>

<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'en'</span>, {
  <span class="prop">style</span>: <span class="str">'unit'</span>,
  <span class="prop">unit</span>: <span class="str">'celsius'</span>,
  <span class="prop">unitDisplay</span>: <span class="str">'long'</span>
}).<span class="fn">format</span>(<span class="num">22</span>);  <span class="cm">// "22 degrees Celsius"</span>

<span class="cm">// Compact notation</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'en'</span>, {
  <span class="prop">notation</span>: <span class="str">'compact'</span>,
  <span class="prop">compactDisplay</span>: <span class="str">'short'</span>
}).<span class="fn">format</span>(<span class="num">1500000</span>);  <span class="cm">// "1.5M"</span></code></pre>

    <h4>formatToParts() ‚Äî For Custom Rendering</h4>
    <pre><code><span class="kw">const</span> f = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'en-US'</span>, {
  <span class="prop">style</span>: <span class="str">'currency'</span>,
  <span class="prop">currency</span>: <span class="str">'USD'</span>
});

f.<span class="fn">formatToParts</span>(<span class="num">1234.56</span>);
<span class="cm">// [</span>
<span class="cm">//   { type: "currency", value: "$" },</span>
<span class="cm">//   { type: "integer",  value: "1" },</span>
<span class="cm">//   { type: "group",    value: "," },</span>
<span class="cm">//   { type: "integer",  value: "234" },</span>
<span class="cm">//   { type: "decimal",  value: "." },</span>
<span class="cm">//   { type: "fraction", value: "56" }</span>
<span class="cm">// ]</span>

<span class="cm">// Useful for applying different styles to each part!</span></code></pre>
  </section>

  <!-- Lesson 4: Date/Time -->
  <section class="lesson-section" id="l4">
    <h3>üìÖ 4. Date/Time Formatting ‚Äî Intl.DateTimeFormat</h3>

    <pre><code><span class="kw">const</span> date = <span class="kw">new</span> <span class="obj">Date</span>(<span class="num">2024</span>, <span class="num">11</span>, <span class="num">25</span>, <span class="num">14</span>, <span class="num">30</span>); <span class="cm">// Dec 25, 2024 2:30 PM</span>

<span class="cm">// Basic formatting by locale</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">DateTimeFormat</span>(<span class="str">'en-US'</span>).<span class="fn">format</span>(date);  <span class="cm">// "12/25/2024"</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">DateTimeFormat</span>(<span class="str">'en-GB'</span>).<span class="fn">format</span>(date);  <span class="cm">// "25/12/2024"</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">DateTimeFormat</span>(<span class="str">'de-DE'</span>).<span class="fn">format</span>(date);  <span class="cm">// "25.12.2024"</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">DateTimeFormat</span>(<span class="str">'ja-JP'</span>).<span class="fn">format</span>(date);  <span class="cm">// "2024/12/25"</span>

<span class="cm">// With options</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">DateTimeFormat</span>(<span class="str">'en-US'</span>, {
  <span class="prop">weekday</span>: <span class="str">'long'</span>,
  <span class="prop">year</span>: <span class="str">'numeric'</span>,
  <span class="prop">month</span>: <span class="str">'long'</span>,
  <span class="prop">day</span>: <span class="str">'numeric'</span>
}).<span class="fn">format</span>(date);
<span class="cm">// "Wednesday, December 25, 2024"</span>

<span class="cm">// Time formatting</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">DateTimeFormat</span>(<span class="str">'en-US'</span>, {
  <span class="prop">hour</span>: <span class="str">'numeric'</span>,
  <span class="prop">minute</span>: <span class="str">'2-digit'</span>,
  <span class="prop">hour12</span>: <span class="kw">true</span>
}).<span class="fn">format</span>(date);
<span class="cm">// "2:30 PM"</span>

<span class="cm">// With timezone</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">DateTimeFormat</span>(<span class="str">'en-US'</span>, {
  <span class="prop">timeZone</span>: <span class="str">'Asia/Tokyo'</span>,
  <span class="prop">timeZoneName</span>: <span class="str">'short'</span>,
  <span class="prop">dateStyle</span>: <span class="str">'full'</span>,
  <span class="prop">timeStyle</span>: <span class="str">'long'</span>
}).<span class="fn">format</span>(date);</code></pre>

    <h4>Intl.RelativeTimeFormat</h4>
    <pre><code><span class="kw">const</span> rtf = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">RelativeTimeFormat</span>(<span class="str">'en'</span>, {
  <span class="prop">numeric</span>: <span class="str">'auto'</span>
});

rtf.<span class="fn">format</span>(<span class="num">-1</span>, <span class="str">'day'</span>);     <span class="cm">// "yesterday"</span>
rtf.<span class="fn">format</span>(<span class="num">-3</span>, <span class="str">'day'</span>);     <span class="cm">// "3 days ago"</span>
rtf.<span class="fn">format</span>(<span class="num">1</span>, <span class="str">'hour'</span>);     <span class="cm">// "in 1 hour"</span>
rtf.<span class="fn">format</span>(<span class="num">2</span>, <span class="str">'month'</span>);    <span class="cm">// "in 2 months"</span>

<span class="cm">// Other locales</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">RelativeTimeFormat</span>(<span class="str">'fr'</span>).<span class="fn">format</span>(<span class="num">-1</span>, <span class="str">'day'</span>);
<span class="cm">// "il y a 1 jour"</span>

<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">RelativeTimeFormat</span>(<span class="str">'ja'</span>).<span class="fn">format</span>(<span class="num">-1</span>, <span class="str">'day'</span>);
<span class="cm">// "1 Êó•Ââç"</span></code></pre>
  </section>

  <!-- Lesson 5: Collation -->
  <section class="lesson-section" id="l5">
    <h3>üî§ 5. Collation & Text ‚Äî Intl.Collator, ListFormat, PluralRules</h3>

    <h4>Intl.Collator ‚Äî Sorting Strings Properly</h4>
    <pre><code><span class="cm">// Problem: default JS sort is Unicode-based, not language-aware</span>
[<span class="str">'√§'</span>, <span class="str">'z'</span>, <span class="str">'a'</span>].<span class="fn">sort</span>();
<span class="cm">// ["a", "z", "√§"] ‚Üê wrong for German!</span>

<span class="cm">// Solution: use Intl.Collator</span>
<span class="kw">const</span> collator = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">Collator</span>(<span class="str">'de'</span>);
[<span class="str">'√§'</span>, <span class="str">'z'</span>, <span class="str">'a'</span>].<span class="fn">sort</span>(collator.compare);
<span class="cm">// ["a", "√§", "z"] ‚Üê correct for German!</span>

<span class="cm">// Case-insensitive comparison</span>
<span class="kw">const</span> ci = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">Collator</span>(<span class="str">'en'</span>, { <span class="prop">sensitivity</span>: <span class="str">'base'</span> });
ci.<span class="fn">compare</span>(<span class="str">'a'</span>, <span class="str">'A'</span>);  <span class="cm">// 0 (equal)</span>
ci.<span class="fn">compare</span>(<span class="str">'a'</span>, <span class="str">'√°'</span>);  <span class="cm">// 0 (equal ‚Äî ignores accents)</span></code></pre>

    <h4>Intl.ListFormat ‚Äî Natural-sounding Lists</h4>
    <pre><code><span class="kw">const</span> items = [<span class="str">'Apple'</span>, <span class="str">'Banana'</span>, <span class="str">'Cherry'</span>];

<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">ListFormat</span>(<span class="str">'en'</span>, { <span class="prop">type</span>: <span class="str">'conjunction'</span> }).<span class="fn">format</span>(items);
<span class="cm">// "Apple, Banana, and Cherry"</span>

<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">ListFormat</span>(<span class="str">'en'</span>, { <span class="prop">type</span>: <span class="str">'disjunction'</span> }).<span class="fn">format</span>(items);
<span class="cm">// "Apple, Banana, or Cherry"</span>

<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">ListFormat</span>(<span class="str">'fr'</span>, { <span class="prop">type</span>: <span class="str">'conjunction'</span> }).<span class="fn">format</span>(items);
<span class="cm">// "Apple, Banana et Cherry"</span>

<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">ListFormat</span>(<span class="str">'ja'</span>, { <span class="prop">type</span>: <span class="str">'conjunction'</span> }).<span class="fn">format</span>(items);
<span class="cm">// "Apple„ÄÅBanana„ÄÅCherry"</span></code></pre>

    <h4>Intl.PluralRules ‚Äî Smart Pluralization</h4>
    <pre><code><span class="kw">const</span> pr = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">PluralRules</span>(<span class="str">'en'</span>);
pr.<span class="fn">select</span>(<span class="num">0</span>);  <span class="cm">// "other"</span>
pr.<span class="fn">select</span>(<span class="num">1</span>);  <span class="cm">// "one"</span>
pr.<span class="fn">select</span>(<span class="num">2</span>);  <span class="cm">// "other"</span>

<span class="cm">// Russian has more complex plural rules!</span>
<span class="kw">const</span> ruPr = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">PluralRules</span>(<span class="str">'ru'</span>);
ruPr.<span class="fn">select</span>(<span class="num">1</span>);   <span class="cm">// "one"     ‚Üí –∫–Ω–∏–≥–∞</span>
ruPr.<span class="fn">select</span>(<span class="num">2</span>);   <span class="cm">// "few"     ‚Üí –∫–Ω–∏–≥–∏</span>
ruPr.<span class="fn">select</span>(<span class="num">5</span>);   <span class="cm">// "many"    ‚Üí –∫–Ω–∏–≥</span>
ruPr.<span class="fn">select</span>(<span class="num">21</span>);  <span class="cm">// "one"     ‚Üí –∫–Ω–∏–≥–∞</span>

<span class="cm">// Practical usage pattern:</span>
<span class="kw">function</span> <span class="fn">pluralize</span>(count, locale, forms) {
  <span class="kw">const</span> rule = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">PluralRules</span>(locale).<span class="fn">select</span>(count);
  <span class="kw">return</span> <span class="str">`${count} ${forms[rule] || forms.other}`</span>;
}

<span class="fn">pluralize</span>(<span class="num">1</span>, <span class="str">'en'</span>, { <span class="prop">one</span>: <span class="str">'item'</span>, <span class="prop">other</span>: <span class="str">'items'</span> }); <span class="cm">// "1 item"</span>
<span class="fn">pluralize</span>(<span class="num">5</span>, <span class="str">'en'</span>, { <span class="prop">one</span>: <span class="str">'item'</span>, <span class="prop">other</span>: <span class="str">'items'</span> }); <span class="cm">// "5 items"</span></code></pre>
  </section>

  <!-- Lesson 6: Locale Management -->
  <section class="lesson-section" id="l6">
    <h3>üó∫Ô∏è 6. Locale Management</h3>

    <h4>Detecting User's Locale</h4>
    <pre><code><span class="cm">// Browser API</span>
navigator.<span class="prop">language</span>;      <span class="cm">// "en-US" (primary)</span>
navigator.<span class="prop">languages</span>;     <span class="cm">// ["en-US", "en", "fr"] (all preferences)</span>

<span class="cm">// Using Intl to resolve best locale</span>
<span class="kw">const</span> supported = [<span class="str">'en'</span>, <span class="str">'fr'</span>, <span class="str">'de'</span>, <span class="str">'ja'</span>];
<span class="kw">const</span> userPrefs = navigator.<span class="prop">languages</span>;

<span class="cm">// Find best match</span>
<span class="kw">const</span> bestLocale = <span class="obj">Intl</span>.<span class="fn">DateTimeFormat</span>
  .<span class="fn">supportedLocalesOf</span>(userPrefs, { <span class="prop">localeMatcher</span>: <span class="str">'best fit'</span> })[<span class="num">0</span>]
  || <span class="str">'en'</span>; <span class="cm">// fallback</span></code></pre>

    <h4>Intl.Locale ‚Äî Parse & Manipulate Locale Tags</h4>
    <pre><code><span class="kw">const</span> locale = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">Locale</span>(<span class="str">'en-US'</span>);
locale.<span class="prop">language</span>;     <span class="cm">// "en"</span>
locale.<span class="prop">region</span>;       <span class="cm">// "US"</span>
locale.<span class="prop">baseName</span>;     <span class="cm">// "en-US"</span>

<span class="cm">// Maximize ‚Äî fill in likely subtags</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">Locale</span>(<span class="str">'en'</span>).<span class="fn">maximize</span>().<span class="prop">baseName</span>;
<span class="cm">// "en-Latn-US"</span>

<span class="cm">// Get text info (direction)</span>
<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">Locale</span>(<span class="str">'ar'</span>).<span class="prop">textInfo</span>;
<span class="cm">// { direction: "rtl" }</span>

<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">Locale</span>(<span class="str">'en'</span>).<span class="prop">textInfo</span>;
<span class="cm">// { direction: "ltr" }</span></code></pre>

    <h4>Multi-Language Translation Architecture</h4>
    <pre><code><span class="cm">// Simple translation system</span>
<span class="kw">const</span> translations = {
  en: {
    <span class="prop">greeting</span>: <span class="str">'Hello, {name}!'</span>,
    <span class="prop">items_one</span>: <span class="str">'{count} item'</span>,
    <span class="prop">items_other</span>: <span class="str">'{count} items'</span>,
    <span class="prop">welcome</span>: <span class="str">'Welcome to our store'</span>
  },
  fr: {
    <span class="prop">greeting</span>: <span class="str">'Bonjour, {name} !'</span>,
    <span class="prop">items_one</span>: <span class="str">'{count} article'</span>,
    <span class="prop">items_other</span>: <span class="str">'{count} articles'</span>,
    <span class="prop">welcome</span>: <span class="str">'Bienvenue dans notre magasin'</span>
  }
};

<span class="kw">class</span> <span class="fn">I18n</span> {
  <span class="fn">constructor</span>(locale, messages) {
    <span class="kw">this</span>.locale = locale;
    <span class="kw">this</span>.messages = messages[locale] || messages.en;
    <span class="kw">this</span>.pluralRules = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">PluralRules</span>(locale);
  }

  <span class="fn">t</span>(key, params = {}) {
    <span class="cm">// Handle pluralization</span>
    <span class="kw">if</span> (params.count !== <span class="kw">undefined</span>) {
      <span class="kw">const</span> rule = <span class="kw">this</span>.pluralRules.<span class="fn">select</span>(params.count);
      key = <span class="str">`${key}_${rule}`</span>;
    }
    <span class="kw">let</span> msg = <span class="kw">this</span>.messages[key] || key;
    <span class="cm">// Replace placeholders</span>
    <span class="obj">Object</span>.<span class="fn">entries</span>(params).<span class="fn">forEach</span>(([k, v]) => {
      msg = msg.<span class="fn">replace</span>(<span class="str">`{${k}}`</span>, v);
    });
    <span class="kw">return</span> msg;
  }
}

<span class="kw">const</span> i18n = <span class="kw">new</span> <span class="fn">I18n</span>(<span class="str">'fr'</span>, translations);
i18n.<span class="fn">t</span>(<span class="str">'greeting'</span>, { <span class="prop">name</span>: <span class="str">'Marie'</span> });  <span class="cm">// "Bonjour, Marie !"</span>
i18n.<span class="fn">t</span>(<span class="str">'items'</span>, { <span class="prop">count</span>: <span class="num">1</span> });             <span class="cm">// "1 article"</span>
i18n.<span class="fn">t</span>(<span class="str">'items'</span>, { <span class="prop">count</span>: <span class="num">5</span> });             <span class="cm">// "5 articles"</span></code></pre>
  </section>

  <!-- Lesson 7: Libraries -->
  <section class="lesson-section" id="l7">
    <h3>üì¶ 7. i18n Libraries</h3>

    <div class="lib-card">
      <h4>üèÜ i18next <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span></h4>
      <div class="lib-meta">
        <span>üì¶ ~40KB</span>
        <span>‚¨áÔ∏è 3M+/week</span>
        <span>Framework agnostic</span>
      </div>
      <p>The most popular i18n framework. Works with React, Vue, Angular, Node.js, and vanilla JS.</p>
      <span class="tag">react-i18next</span>
      <span class="tag">vue-i18next</span>
      <span class="tag">plugins</span>
      <span class="tag">namespaces</span>
      <pre><code><span class="cm">// i18next basic setup</span>
<span class="kw">import</span> i18next <span class="kw">from</span> <span class="str">'i18next'</span>;

i18next.<span class="fn">init</span>({
  <span class="prop">lng</span>: <span class="str">'en'</span>,
  <span class="prop">resources</span>: {
    en: { <span class="prop">translation</span>: { <span class="prop">hello</span>: <span class="str">'Hello {{name}}'</span> } },
    fr: { <span class="prop">translation</span>: { <span class="prop">hello</span>: <span class="str">'Bonjour {{name}}'</span> } }
  }
});

i18next.<span class="fn">t</span>(<span class="str">'hello'</span>, { <span class="prop">name</span>: <span class="str">'World'</span> }); <span class="cm">// "Hello World"</span>
i18next.<span class="fn">changeLanguage</span>(<span class="str">'fr'</span>);
i18next.<span class="fn">t</span>(<span class="str">'hello'</span>, { <span class="prop">name</span>: <span class="str">'Monde'</span> }); <span class="cm">// "Bonjour Monde"</span></code></pre>
    </div>

    <div class="lib-card">
      <h4>‚ö° FormatJS / react-intl <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span></h4>
      <div class="lib-meta">
        <span>By Yahoo/Meta</span>
        <span>ICU MessageFormat</span>
        <span>React-focused</span>
      </div>
      <p>Industry-standard ICU message syntax. Excellent pluralization and gender handling.</p>
      <span class="tag">ICU syntax</span>
      <span class="tag">CLDR data</span>
      <span class="tag">React</span>
      <pre><code><span class="cm">// ICU MessageFormat syntax</span>
<span class="kw">const</span> msg = <span class="str">`{count, plural,
  =0 {No items}
  one {# item}
  other {# items}
} in your cart`</span>;

<span class="cm">// FormatJS in React</span>
&lt;<span class="fn">FormattedMessage</span>
  <span class="prop">id</span>=<span class="str">"cart.items"</span>
  <span class="prop">values</span>={{ <span class="prop">count</span>: <span class="num">5</span> }}
/&gt;</code></pre>
    </div>

    <div class="lib-card">
      <h4>üü¢ vue-i18n <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span></h4>
      <div class="lib-meta">
        <span>Vue.js official</span>
        <span>Composition API</span>
        <span>SFC support</span>
      </div>
      <pre><code><span class="cm">// Vue i18n</span>
<span class="kw">const</span> i18n = <span class="fn">createI18n</span>({
  <span class="prop">locale</span>: <span class="str">'en'</span>,
  <span class="prop">messages</span>: {
    en: { <span class="prop">hello</span>: <span class="str">'Hello!'</span> },
    ja: { <span class="prop">hello</span>: <span class="str">'„Åì„Çì„Å´„Å°„ÅØÔºÅ'</span> }
  }
});

<span class="cm">// In template: {{ $t('hello') }}</span></code></pre>
    </div>

    <div class="lib-card">
      <h4>üìê Globalize.js <span class="stars">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</span></h4>
      <div class="lib-meta">
        <span>jQuery Foundation</span>
        <span>CLDR-based</span>
        <span>Comprehensive</span>
      </div>
      <p>Leverages Unicode CLDR data for maximum accuracy. Good for complex formatting needs.</p>
    </div>

    <h4>Library Comparison</h4>
    <table class="compare-table">
      <thead>
        <tr><th>Feature</th><th>Native Intl</th><th>i18next</th><th>FormatJS</th></tr>
      </thead>
      <tbody>
        <tr><td>Bundle size</td><td>0 KB</td><td>~40 KB</td><td>~25 KB</td></tr>
        <tr><td>String translation</td><td>‚ùå</td><td>‚úÖ</td><td>‚úÖ</td></tr>
        <tr><td>Number/Date format</td><td>‚úÖ</td><td>Via Intl</td><td>‚úÖ</td></tr>
        <tr><td>Pluralization</td><td>Basic</td><td>‚úÖ</td><td>‚úÖ (ICU)</td></tr>
        <tr><td>Namespace support</td><td>‚ùå</td><td>‚úÖ</td><td>‚ùå</td></tr>
        <tr><td>Lazy loading</td><td>N/A</td><td>‚úÖ</td><td>‚úÖ</td></tr>
        <tr><td>Framework support</td><td>All</td><td>All</td><td>React</td></tr>
      </tbody>
    </table>
  </section>

  <!-- Lesson 8: RTL -->
  <section class="lesson-section" id="l8">
    <h3>‚ÜîÔ∏è 8. RTL (Right-to-Left) Support</h3>

    <div class="concept-card warning">
      <div class="card-title">‚ö†Ô∏è RTL Languages</div>
      <p>Arabic, Hebrew, Persian (Farsi), and Urdu are the most common RTL languages. Your app must handle text direction, layout mirroring, and bidirectional text.</p>
    </div>

    <h4>CSS for RTL</h4>
    <pre><code><span class="cm">/* Set direction on HTML or body */</span>
<span class="kw">html</span>[<span class="prop">dir</span>=<span class="str">"rtl"</span>] {
  <span class="prop">direction</span>: <span class="str">rtl</span>;
}

<span class="cm">/* Use logical properties instead of physical ones! */</span>

<span class="cm">/* ‚ùå BAD ‚Äî breaks in RTL */</span>
.<span class="fn">card</span> {
  <span class="prop">margin-left</span>: <span class="num">20px</span>;
  <span class="prop">padding-right</span>: <span class="num">10px</span>;
  <span class="prop">text-align</span>: <span class="str">left</span>;
  <span class="prop">border-left</span>: <span class="num">3px</span> <span class="str">solid</span> <span class="str">blue</span>;
}

<span class="cm">/* ‚úÖ GOOD ‚Äî works in both LTR and RTL */</span>
.<span class="fn">card</span> {
  <span class="prop">margin-inline-start</span>: <span class="num">20px</span>;
  <span class="prop">padding-inline-end</span>: <span class="num">10px</span>;
  <span class="prop">text-align</span>: <span class="str">start</span>;
  <span class="prop">border-inline-start</span>: <span class="num">3px</span> <span class="str">solid</span> <span class="str">blue</span>;
}</code></pre>

    <h4>CSS Logical Properties Quick Reference</h4>
    <table class="compare-table">
      <thead><tr><th>Physical (Old)</th><th>Logical (Use This!)</th></tr></thead>
      <tbody>
        <tr><td><code>margin-left</code></td><td><code>margin-inline-start</code></td></tr>
        <tr><td><code>margin-right</code></td><td><code>margin-inline-end</code></td></tr>
        <tr><td><code>padding-left</code></td><td><code>padding-inline-start</code></td></tr>
        <tr><td><code>padding-right</code></td><td><code>padding-inline-end</code></td></tr>
        <tr><td><code>text-align: left</code></td><td><code>text-align: start</code></td></tr>
        <tr><td><code>text-align: right</code></td><td><code>text-align: end</code></td></tr>
        <tr><td><code>left: 0</code></td><td><code>inset-inline-start: 0</code></td></tr>
        <tr><td><code>float: left</code></td><td><code>float: inline-start</code></td></tr>
        <tr><td><code>border-left</code></td><td><code>border-inline-start</code></td></tr>
        <tr><td><code>width</code></td><td><code>inline-size</code></td></tr>
        <tr><td><code>height</code></td><td><code>block-size</code></td></tr>
      </tbody>
    </table>

    <h4>JavaScript RTL Detection</h4>
    <pre><code><span class="cm">// Method 1: Check document direction</span>
<span class="kw">const</span> isRTL = document.<span class="prop">documentElement</span>.<span class="prop">dir</span> === <span class="str">'rtl'</span>;

<span class="cm">// Method 2: Check computed style</span>
<span class="kw">const</span> dir = <span class="fn">getComputedStyle</span>(document.<span class="prop">body</span>).<span class="prop">direction</span>;

<span class="cm">// Method 3: Use Intl.Locale (modern)</span>
<span class="kw">const</span> locale = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">Locale</span>(<span class="str">'ar'</span>);
locale.<span class="prop">textInfo</span>.<span class="prop">direction</span>; <span class="cm">// "rtl"</span>

<span class="cm">// Method 4: Simple lookup</span>
<span class="kw">const</span> rtlLanguages = [<span class="str">'ar'</span>, <span class="str">'he'</span>, <span class="str">'fa'</span>, <span class="str">'ur'</span>];
<span class="kw">function</span> <span class="fn">isRtlLocale</span>(locale) {
  <span class="kw">const</span> lang = locale.<span class="fn">split</span>(<span class="str">'-'</span>)[<span class="num">0</span>];
  <span class="kw">return</span> rtlLanguages.<span class="fn">includes</span>(lang);
}

<span class="cm">// Setting direction dynamically</span>
<span class="kw">function</span> <span class="fn">setLocale</span>(locale) {
  <span class="kw">const</span> dir = <span class="fn">isRtlLocale</span>(locale) ? <span class="str">'rtl'</span> : <span class="str">'ltr'</span>;
  document.<span class="prop">documentElement</span>.<span class="fn">setAttribute</span>(<span class="str">'dir'</span>, dir);
  document.<span class="prop">documentElement</span>.<span class="fn">setAttribute</span>(<span class="str">'lang'</span>, locale);
}</code></pre>
  </section>

  <!-- Lesson 9: Best Practices -->
  <section class="lesson-section" id="l9">
    <h3>‚ú® 9. Best Practices for Production</h3>

    <div class="steps">
      <div class="step">
        <strong>Never hardcode strings</strong> ‚Äî Extract all user-facing text to translation files. Use keys like <code>t('auth.login_button')</code> not inline text.
      </div>
      <div class="step">
        <strong>Never concatenate translated strings</strong> ‚Äî Word order differs between languages. Use placeholders: <code>"Hello {name}"</code> not <code>"Hello " + name</code>.
      </div>
      <div class="step">
        <strong>Always use Intl for formatting</strong> ‚Äî Never manually format dates, numbers, or currencies. Let <code>Intl.NumberFormat</code> and <code>Intl.DateTimeFormat</code> handle it.
      </div>
      <div class="step">
        <strong>Design for text expansion</strong> ‚Äî Translated text can be 30-200% longer. German and French text tends to be longer than English. Build flexible layouts.
      </div>
      <div class="step">
        <strong>Use CSS logical properties</strong> ‚Äî Replace all physical directional properties for proper RTL support.
      </div>
      <div class="step">
        <strong>Lazy-load translations</strong> ‚Äî Don't bundle all languages; load them on demand.
      </div>
      <div class="step">
        <strong>Test with pseudo-localization</strong> ‚Äî Use tools that make strings longer and add accents to catch hardcoded or truncated strings.
      </div>
      <div class="step">
        <strong>Store dates in UTC/ISO 8601</strong> ‚Äî Always store <code>2024-12-25T14:30:00Z</code> and format at display time.
      </div>
    </div>
  </section>
</div>

<!-- ==================== LIVE EXAMPLES TAB ==================== -->
<div class="tab-panel" id="tab-examples">
  <h2>üî¨ Live Interactive Examples</h2>
  <p class="subtitle">Play with real i18n APIs. Change values and see results instantly.</p>

  <!-- Example 1: Number Formatter -->
  <div class="live-example">
    <div class="live-example-header">üî¢ Interactive Number Formatter</div>
    <div class="live-example-body">
      <div class="locale-demo">
        <label>Number: <input type="number" id="numInput" value="1234567.89" style="padding:8px;background:var(--code-bg);border:1px solid var(--border);border-radius:6px;color:var(--text);width:150px;font-family:inherit;"></label>
        <label>Locale: <select class="locale-select" id="numLocale">
          <option value="en-US">en-US</option>
          <option value="de-DE">de-DE</option>
          <option value="fr-FR">fr-FR</option>
          <option value="ja-JP">ja-JP</option>
          <option value="ar-SA">ar-SA</option>
          <option value="hi-IN">hi-IN</option>
          <option value="zh-CN">zh-CN</option>
          <option value="pt-BR">pt-BR</option>
        </select></label>
        <label>Style: <select class="locale-select" id="numStyle">
          <option value="decimal">Decimal</option>
          <option value="currency">Currency</option>
          <option value="percent">Percent</option>
          <option value="unit">Unit</option>
        </select></label>
        <button class="btn btn-primary btn-sm" onclick="formatNumber()">Format</button>
      </div>
      <div class="demo-result" id="numResult">Click "Format" to see result</div>
    </div>
  </div>

  <!-- Example 2: Date Formatter -->
  <div class="live-example">
    <div class="live-example-header">üìÖ Interactive Date/Time Formatter</div>
    <div class="live-example-body">
      <div class="locale-demo">
        <label>Locale: <select class="locale-select" id="dateLocale">
          <option value="en-US">en-US</option>
          <option value="en-GB">en-GB</option>
          <option value="de-DE">de-DE</option>
          <option value="fr-FR">fr-FR</option>
          <option value="ja-JP">ja-JP</option>
          <option value="ar-SA">ar-SA</option>
          <option value="ko-KR">ko-KR</option>
          <option value="zh-CN">zh-CN</option>
          <option value="ru-RU">ru-RU</option>
        </select></label>
        <label>DateStyle: <select class="locale-select" id="dateStyle">
          <option value="full">Full</option>
          <option value="long">Long</option>
          <option value="medium" selected>Medium</option>
          <option value="short">Short</option>
        </select></label>
        <button class="btn btn-primary btn-sm" onclick="formatDate()">Format Now</button>
      </div>
      <div class="demo-result" id="dateResult">Click "Format Now" to see result</div>
    </div>
  </div>

  <!-- Example 3: Relative Time -->
  <div class="live-example">
    <div class="live-example-header">‚è∞ Relative Time Formatter</div>
    <div class="live-example-body">
      <div class="locale-demo">
        <label>Value: <input type="number" id="rtfValue" value="-3" style="padding:8px;background:var(--code-bg);border:1px solid var(--border);border-radius:6px;color:var(--text);width:80px;font-family:inherit;"></label>
        <label>Unit: <select class="locale-select" id="rtfUnit">
          <option value="second">Second</option>
          <option value="minute">Minute</option>
          <option value="hour">Hour</option>
          <option value="day" selected>Day</option>
          <option value="week">Week</option>
          <option value="month">Month</option>
          <option value="year">Year</option>
        </select></label>
        <label>Locale: <select class="locale-select" id="rtfLocale">
          <option value="en">English</option>
          <option value="fr">French</option>
          <option value="de">German</option>
          <option value="ja">Japanese</option>
          <option value="ar">Arabic</option>
          <option value="ko">Korean</option>
          <option value="es">Spanish</option>
          <option value="ru">Russian</option>
        </select></label>
        <button class="btn btn-primary btn-sm" onclick="formatRelativeTime()">Format</button>
      </div>
      <div class="demo-result" id="rtfResult">Click "Format" to see result</div>
    </div>
  </div>

  <!-- Example 4: List Formatter -->
  <div class="live-example">
    <div class="live-example-header">üìù List Formatter</div>
    <div class="live-example-body">
      <div class="locale-demo">
        <label>Items (comma-separated): <input type="text" id="listItems" value="Apple, Banana, Cherry" style="padding:8px;background:var(--code-bg);border:1px solid var(--border);border-radius:6px;color:var(--text);width:250px;font-family:inherit;"></label>
        <label>Locale: <select class="locale-select" id="listLocale">
          <option value="en">English</option>
          <option value="fr">French</option>
          <option value="de">German</option>
          <option value="ja">Japanese</option>
          <option value="zh">Chinese</option>
          <option value="ar">Arabic</option>
        </select></label>
        <label>Type: <select class="locale-select" id="listType">
          <option value="conjunction">And (conjunction)</option>
          <option value="disjunction">Or (disjunction)</option>
          <option value="unit">Unit</option>
        </select></label>
        <button class="btn btn-primary btn-sm" onclick="formatList()">Format</button>
      </div>
      <div class="demo-result" id="listResult">Click "Format" to see result</div>
    </div>
  </div>

  <!-- Example 5: Plural Rules -->
  <div class="live-example">
    <div class="live-example-header">üî¢ Plural Rules Explorer</div>
    <div class="live-example-body">
      <div class="locale-demo">
        <label>Locale: <select class="locale-select" id="pluralLocale">
          <option value="en">English (2 forms)</option>
          <option value="fr">French (2 forms)</option>
          <option value="ar">Arabic (6 forms!)</option>
          <option value="ru">Russian (4 forms)</option>
          <option value="pl">Polish (4 forms)</option>
          <option value="ja">Japanese (1 form)</option>
          <option value="cy">Welsh (6 forms)</option>
        </select></label>
        <button class="btn btn-primary btn-sm" onclick="explorePlurals()">Explore</button>
      </div>
      <div class="demo-result" id="pluralResult">Click "Explore" to see plural rules</div>
    </div>
  </div>

  <!-- Example 6: RTL Demo -->
  <div class="live-example">
    <div class="live-example-header">‚ÜîÔ∏è RTL Text Direction Demo</div>
    <div class="live-example-body">
      <div class="btn-group">
        <button class="btn btn-sm btn-outline" onclick="setRtlDemo('ltr')">LTR (English)</button>
        <button class="btn btn-sm btn-outline" onclick="setRtlDemo('rtl')">RTL (Arabic)</button>
      </div>
      <div class="rtl-demo-box" id="rtlDemoBox" dir="ltr">
        <h4 id="rtlTitle" style="margin-top:0;">Welcome to our store</h4>
        <p id="rtlText">This is a sample paragraph showing how text and layout changes with direction.</p>
        <div style="display:flex;gap:12px;margin-top:12px;" id="rtlButtons">
          <button class="btn btn-primary btn-sm" id="rtlBtn1">‚Üê Previous</button>
          <button class="btn btn-accent btn-sm" id="rtlBtn2">Next ‚Üí</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Example 7: Code Playground -->
  <div class="playground">
    <div class="playground-header">
      <span class="playground-title">üéÆ Free Code Playground ‚Äî Try Any Intl API</span>
      <button class="btn btn-success btn-sm" onclick="runPlayground()">‚ñ∂ Run</button>
    </div>
    <div class="playground-body">
      <textarea id="playgroundCode">// Try any Intl API here!
const now = new Date();

// Format current date in multiple locales
const locales = ['en-US', 'ja-JP', 'de-DE', 'ar-SA', 'ko-KR'];

locales.forEach(locale => {
  const formatted = new Intl.DateTimeFormat(locale, {
    dateStyle: 'full',
    timeStyle: 'short'
  }).format(now);
  
  console.log(`${locale}: ${formatted}`);
});

// Currency comparison
console.log('\n--- Currency ---');
const amount = 9999.99;
['en-US/USD', 'ja-JP/JPY', 'de-DE/EUR', 'en-IN/INR'].forEach(combo => {
  const [loc, cur] = combo.split('/');
  const fmt = new Intl.NumberFormat(loc, { 
    style: 'currency', currency: cur 
  }).format(amount);
  console.log(`${combo}: ${fmt}`);
});</textarea>
      <div class="output-box" id="playgroundOutput">Output will appear here...</div>
    </div>
  </div>
</div>

<!-- ==================== EXERCISES TAB ==================== -->
<div class="tab-panel" id="tab-exercises">
  <h2>üí™ Practice Exercises</h2>
  <p class="subtitle">Write code to solve each challenge. Your code is evaluated automatically.</p>

  <!-- Exercise 1 -->
  <div class="exercise" id="ex1">
    <div class="exercise-header">
      <h4 style="margin:0;">Exercise 1: Format a Price</h4>
      <span class="difficulty diff-easy">Easy</span>
    </div>
    <p>Write a function that formats a number as <strong>US Dollar currency</strong> using <code>Intl.NumberFormat</code>.</p>
    <p>Example: <code>formatUSD(1234.5)</code> should return <code>"$1,234.50"</code></p>
    <textarea id="ex1Code" class="playground" style="width:100%;min-height:80px;background:var(--code-bg);color:var(--text);border:1px solid var(--border);border-radius:8px;padding:12px;font-family:'Cascadia Code','Fira Code',monospace;font-size:0.85rem;resize:vertical;">function formatUSD(amount) {
  // Your code here
  
}</textarea>
    <div class="btn-group">
      <button class="btn btn-success btn-sm" onclick="checkExercise(1)">‚úì Check Answer</button>
      <button class="btn btn-outline btn-sm" onclick="showHint(1)">üí° Hint</button>
      <button class="btn btn-outline btn-sm" onclick="showSolution(1)">üëÅ Solution</button>
    </div>
    <div class="exercise-result" id="ex1Result"></div>
    <div class="exercise-result" id="ex1Hint" style="background:rgba(108,92,231,0.1);border:1px solid var(--primary);color:var(--primary-light);">Use <code>new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' })</code></div>
    <div class="exercise-result" id="ex1Solution" style="background:var(--code-bg);border:1px solid var(--border);color:var(--accent);"><pre style="margin:0;border:0;padding:0;"><code>function formatUSD(amount) {
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD'
  }).format(amount);
}</code></pre></div>
  </div>

  <!-- Exercise 2 -->
  <div class="exercise" id="ex2">
    <div class="exercise-header">
      <h4 style="margin:0;">Exercise 2: Format a Date for Germany</h4>
      <span class="difficulty diff-easy">Easy</span>
    </div>
    <p>Write a function that takes a Date object and returns a long German date string.</p>
    <p>Example: <code>formatGermanDate(new Date(2024, 11, 25))</code> should include "Dezember" and "2024".</p>
    <textarea id="ex2Code" style="width:100%;min-height:80px;background:var(--code-bg);color:var(--text);border:1px solid var(--border);border-radius:8px;padding:12px;font-family:'Cascadia Code','Fira Code',monospace;font-size:0.85rem;resize:vertical;">function formatGermanDate(date) {
  // Your code here
  
}</textarea>
    <div class="btn-group">
      <button class="btn btn-success btn-sm" onclick="checkExercise(2)">‚úì Check Answer</button>
      <button class="btn btn-outline btn-sm" onclick="showHint(2)">üí° Hint</button>
      <button class="btn btn-outline btn-sm" onclick="showSolution(2)">üëÅ Solution</button>
    </div>
    <div class="exercise-result" id="ex2Result"></div>
    <div class="exercise-result" id="ex2Hint" style="background:rgba(108,92,231,0.1);border:1px solid var(--primary);color:var(--primary-light);">Use <code>Intl.DateTimeFormat</code> with locale <code>'de-DE'</code> and <code>dateStyle: 'long'</code></div>
    <div class="exercise-result" id="ex2Solution" style="background:var(--code-bg);border:1px solid var(--border);color:var(--accent);"><pre style="margin:0;border:0;padding:0;"><code>function formatGermanDate(date) {
  return new Intl.DateTimeFormat('de-DE', {
    dateStyle: 'long'
  }).format(date);
}</code></pre></div>
  </div>

  <!-- Exercise 3 -->
  <div class="exercise" id="ex3">
    <div class="exercise-header">
      <h4 style="margin:0;">Exercise 3: Time Ago Function</h4>
      <span class="difficulty diff-medium">Medium</span>
    </div>
    <p>Write a function <code>timeAgo(value, unit, locale)</code> that returns a relative time string using <code>Intl.RelativeTimeFormat</code> with <code>numeric: 'auto'</code>.</p>
    <p>Example: <code>timeAgo(-1, 'day', 'en')</code> ‚Üí <code>"yesterday"</code></p>
    <textarea id="ex3Code" style="width:100%;min-height:80px;background:var(--code-bg);color:var(--text);border:1px solid var(--border);border-radius:8px;padding:12px;font-family:'Cascadia Code','Fira Code',monospace;font-size:0.85rem;resize:vertical;">function timeAgo(value, unit, locale) {
  // Your code here
  
}</textarea>
    <div class="btn-group">
      <button class="btn btn-success btn-sm" onclick="checkExercise(3)">‚úì Check Answer</button>
      <button class="btn btn-outline btn-sm" onclick="showHint(3)">üí° Hint</button>
      <button class="btn btn-outline btn-sm" onclick="showSolution(3)">üëÅ Solution</button>
    </div>
    <div class="exercise-result" id="ex3Result"></div>
    <div class="exercise-result" id="ex3Hint" style="background:rgba(108,92,231,0.1);border:1px solid var(--primary);color:var(--primary-light);">Create a <code>new Intl.RelativeTimeFormat(locale, { numeric: 'auto' })</code> and call <code>.format(value, unit)</code></div>
    <div class="exercise-result" id="ex3Solution" style="background:var(--code-bg);border:1px solid var(--border);color:var(--accent);"><pre style="margin:0;border:0;padding:0;"><code>function timeAgo(value, unit, locale) {
  const rtf = new Intl.RelativeTimeFormat(locale, {
    numeric: 'auto'
  });
  return rtf.format(value, unit);
}</code></pre></div>
  </div>

  <!-- Exercise 4 -->
  <div class="exercise" id="ex4">
    <div class="exercise-header">
      <h4 style="margin:0;">Exercise 4: Smart Pluralizer</h4>
      <span class="difficulty diff-medium">Medium</span>
    </div>
    <p>Write a function <code>pluralize(count, locale, forms)</code> where <code>forms</code> is an object like <code>{ one: 'cat', other: 'cats' }</code>. Use <code>Intl.PluralRules</code>.</p>
    <p>Example: <code>pluralize(1, 'en', { one: 'cat', other: 'cats' })</code> ‚Üí <code>"1 cat"</code></p>
    <textarea id="ex4Code" style="width:100%;min-height:80px;background:var(--code-bg);color:var(--text);border:1px solid var(--border);border-radius:8px;padding:12px;font-family:'Cascadia Code','Fira Code',monospace;font-size:0.85rem;resize:vertical;">function pluralize(count, locale, forms) {
  // Your code here
  
}</textarea>
    <div class="btn-group">
      <button class="btn btn-success btn-sm" onclick="checkExercise(4)">‚úì Check Answer</button>
      <button class="btn btn-outline btn-sm" onclick="showHint(4)">üí° Hint</button>
      <button class="btn btn-outline btn-sm" onclick="showSolution(4)">üëÅ Solution</button>
    </div>
    <div class="exercise-result" id="ex4Result"></div>
    <div class="exercise-result" id="ex4Hint" style="background:rgba(108,92,231,0.1);border:1px solid var(--primary);color:var(--primary-light);">Use <code>new Intl.PluralRules(locale).select(count)</code> to get the rule, then look up <code>forms[rule]</code>.</div>
    <div class="exercise-result" id="ex4Solution" style="background:var(--code-bg);border:1px solid var(--border);color:var(--accent);"><pre style="margin:0;border:0;padding:0;"><code>function pluralize(count, locale, forms) {
  const rule = new Intl.PluralRules(locale).select(count);
  const word = forms[rule] || forms.other;
  return `${count} ${word}`;
}</code></pre></div>
  </div>

  <!-- Exercise 5 -->
  <div class="exercise" id="ex5">
    <div class="exercise-header">
      <h4 style="margin:0;">Exercise 5: Multi-Currency Formatter</h4>
      <span class="difficulty diff-medium">Medium</span>
    </div>
    <p>Write a function <code>formatPrice(amount, locale, currency)</code> that formats a price. If the currency is 'JPY', ensure no decimal places.</p>
    <p>Examples: <code>formatPrice(42.5, 'en-US', 'USD')</code> ‚Üí <code>"$42.50"</code>, <code>formatPrice(4250, 'ja-JP', 'JPY')</code> ‚Üí <code>"Ôø•4,250"</code></p>
    <textarea id="ex5Code" style="width:100%;min-height:100px;background:var(--code-bg);color:var(--text);border:1px solid var(--border);border-radius:8px;padding:12px;font-family:'Cascadia Code','Fira Code',monospace;font-size:0.85rem;resize:vertical;">function formatPrice(amount, locale, currency) {
  // Your code here
  
}</textarea>
    <div class="btn-group">
      <button class="btn btn-success btn-sm" onclick="checkExercise(5)">‚úì Check Answer</button>
      <button class="btn btn-outline btn-sm" onclick="showHint(5)">üí° Hint</button>
      <button class="btn btn-outline btn-sm" onclick="showSolution(5)">üëÅ Solution</button>
    </div>
    <div class="exercise-result" id="ex5Result"></div>
    <div class="exercise-result" id="ex5Hint" style="background:rgba(108,92,231,0.1);border:1px solid var(--primary);color:var(--primary-light);">Intl.NumberFormat handles JPY decimals automatically! Just pass <code>style: 'currency'</code> and the currency code.</div>
    <div class="exercise-result" id="ex5Solution" style="background:var(--code-bg);border:1px solid var(--border);color:var(--accent);"><pre style="margin:0;border:0;padding:0;"><code>function formatPrice(amount, locale, currency) {
  return new Intl.NumberFormat(locale, {
    style: 'currency',
    currency: currency
  }).format(amount);
}</code></pre></div>
  </div>

  <!-- Exercise 6 -->
  <div class="exercise" id="ex6">
    <div class="exercise-header">
      <h4 style="margin:0;">Exercise 6: Sort Names by Locale</h4>
      <span class="difficulty diff-medium">Medium</span>
    </div>
    <p>Write a function <code>sortByLocale(arr, locale)</code> that sorts an array of strings using <code>Intl.Collator</code>.</p>
    <p>Example: <code>sortByLocale(['√∂', 'a', 'z', '√§'], 'de')</code> should sort √§/√∂ correctly for German.</p>
    <textarea id="ex6Code" style="width:100%;min-height:80px;background:var(--code-bg);color:var(--text);border:1px solid var(--border);border-radius:8px;padding:12px;font-family:'Cascadia Code','Fira Code',monospace;font-size:0.85rem;resize:vertical;">function sortByLocale(arr, locale) {
  // Your code here
  
}</textarea>
    <div class="btn-group">
      <button class="btn btn-success btn-sm" onclick="checkExercise(6)">‚úì Check Answer</button>
      <button class="btn btn-outline btn-sm" onclick="showHint(6)">üí° Hint</button>
      <button class="btn btn-outline btn-sm" onclick="showSolution(6)">üëÅ Solution</button>
    </div>
    <div class="exercise-result" id="ex6Result"></div>
    <div class="exercise-result" id="ex6Hint" style="background:rgba(108,92,231,0.1);border:1px solid var(--primary);color:var(--primary-light);">Create <code>new Intl.Collator(locale)</code> and pass its <code>.compare</code> method to <code>Array.sort()</code>.</div>
    <div class="exercise-result" id="ex6Solution" style="background:var(--code-bg);border:1px solid var(--border);color:var(--accent);"><pre style="margin:0;border:0;padding:0;"><code>function sortByLocale(arr, locale) {
  const collator = new Intl.Collator(locale);
  return [...arr].sort(collator.compare);
}</code></pre></div>
  </div>

  <!-- Exercise 7 -->
  <div class="exercise" id="ex7">
    <div class="exercise-header">
      <h4 style="margin:0;">Exercise 7: Build a Mini Translation System</h4>
      <span class="difficulty diff-hard">Hard</span>
    </div>
    <p>Create a <code>createTranslator(locale, messages)</code> function that returns a <code>t(key, params)</code> function. Support nested keys with dots and parameter interpolation.</p>
    <p>Example:</p>
    <pre><code>const messages = {
  en: { greeting: 'Hello, {name}!', nav: { home: 'Home' } },
  fr: { greeting: 'Bonjour, {name} !', nav: { home: 'Accueil' } }
};
const t = createTranslator('fr', messages);
t('greeting', { name: 'Marie' }); // "Bonjour, Marie !"
t('nav.home'); // "Accueil"</code></pre>
    <textarea id="ex7Code" style="width:100%;min-height:140px;background:var(--code-bg);color:var(--text);border:1px solid var(--border);border-radius:8px;padding:12px;font-family:'Cascadia Code','Fira Code',monospace;font-size:0.85rem;resize:vertical;">function createTranslator(locale, messages) {
  // Your code here ‚Äî return the t function
  
}</textarea>
    <div class="btn-group">
      <button class="btn btn-success btn-sm" onclick="checkExercise(7)">‚úì Check Answer</button>
      <button class="btn btn-outline btn-sm" onclick="showHint(7)">üí° Hint</button>
      <button class="btn btn-outline btn-sm" onclick="showSolution(7)">üëÅ Solution</button>
    </div>
    <div class="exercise-result" id="ex7Result"></div>
    <div class="exercise-result" id="ex7Hint" style="background:rgba(108,92,231,0.1);border:1px solid var(--primary);color:var(--primary-light);">Split the key by '.' and reduce through the messages object. Then replace <code>{param}</code> patterns using <code>String.replace</code> with a regex.</div>
    <div class="exercise-result" id="ex7Solution" style="background:var(--code-bg);border:1px solid var(--border);color:var(--accent);"><pre style="margin:0;border:0;padding:0;"><code>function createTranslator(locale, messages) {
  const dict = messages[locale] || messages.en || {};
  return function t(key, params = {}) {
    let value = key.split('.').reduce((obj, k) => obj?.[k], dict);
    if (typeof value !== 'string') return key;
    return value.replace(/\{(\w+)\}/g, (_, k) => 
      params[k] !== undefined ? params[k] : `{${k}}`
    );
  };
}</code></pre></div>
  </div>

  <!-- Exercise 8 -->
  <div class="exercise" id="ex8">
    <div class="exercise-header">
      <h4 style="margin:0;">Exercise 8: Compact Number Formatter</h4>
      <span class="difficulty diff-easy">Easy</span>
    </div>
    <p>Write <code>formatCompact(num, locale)</code> that formats large numbers in compact form (e.g., 1.5M, 2K).</p>
    <p>Example: <code>formatCompact(1500000, 'en')</code> ‚Üí <code>"1.5M"</code></p>
    <textarea id="ex8Code" style="width:100%;min-height:80px;background:var(--code-bg);color:var(--text);border:1px solid var(--border);border-radius:8px;padding:12px;font-family:'Cascadia Code','Fira Code',monospace;font-size:0.85rem;resize:vertical;">function formatCompact(num, locale) {
  // Your code here
  
}</textarea>
    <div class="btn-group">
      <button class="btn btn-success btn-sm" onclick="checkExercise(8)">‚úì Check Answer</button>
      <button class="btn btn-outline btn-sm" onclick="showHint(8)">üí° Hint</button>
      <button class="btn btn-outline btn-sm" onclick="showSolution(8)">üëÅ Solution</button>
    </div>
    <div class="exercise-result" id="ex8Result"></div>
    <div class="exercise-result" id="ex8Hint" style="background:rgba(108,92,231,0.1);border:1px solid var(--primary);color:var(--primary-light);">Use <code>notation: 'compact'</code> in the NumberFormat options.</div>
    <div class="exercise-result" id="ex8Solution" style="background:var(--code-bg);border:1px solid var(--border);color:var(--accent);"><pre style="margin:0;border:0;padding:0;"><code>function formatCompact(num, locale) {
  return new Intl.NumberFormat(locale, {
    notation: 'compact',
    compactDisplay: 'short'
  }).format(num);
}</code></pre></div>
  </div>
</div>

<!-- ==================== QUIZ TAB ==================== -->
<div class="tab-panel" id="tab-quiz">
  <h2>üß† Knowledge Quiz</h2>
  <p class="subtitle">Test your i18n understanding. <span id="quizScore">Score: 0/20</span></p>

  <div class="quiz-container" id="quizContainer"></div>

  <div class="score-display hidden" id="finalScore">
    <div class="score-number" id="finalScoreNum">0/20</div>
    <p style="margin-top:12px;">Quiz completed!</p>
    <button class="btn btn-primary" onclick="resetQuiz()" style="margin-top:12px;">üîÑ Retry Quiz</button>
  </div>
</div>

<!-- ==================== PITFALLS TAB ==================== -->
<div class="tab-panel" id="tab-pitfalls">
  <h2>‚ö†Ô∏è Common Mistakes & Pitfalls</h2>
  <p class="subtitle">Avoid these traps that catch even experienced developers in interviews.</p>

  <div class="pitfall">
    <h4>‚ùå Pitfall #1: String Concatenation for Messages</h4>
    <pre><code><span class="cm">// ‚ùå WRONG ‚Äî Word order differs between languages!</span>
<span class="kw">const</span> msg = <span class="str">'Welcome, '</span> + userName + <span class="str">'! You have '</span> + count + <span class="str">' new messages.'</span>;

<span class="cm">// In Japanese: "Â±±Áî∞„Åï„Çì„ÄÅÊñ∞„Åó„ÅÑ„É°„ÉÉ„Çª„Éº„Ç∏„Åå5‰ª∂„ÅÇ„Çä„Åæ„Åô„ÄÇ"</span>
<span class="cm">// The name position is totally different!</span></code></pre>
    <div class="fix">
      <h5>‚úÖ Fix: Use Parameterized Messages</h5>
      <pre><code><span class="cm">// ‚úÖ CORRECT ‚Äî Use placeholders</span>
<span class="kw">const</span> msg = t(<span class="str">'welcome_msg'</span>, { <span class="prop">name</span>: userName, <span class="prop">count</span>: count });

<span class="cm">// en: "Welcome, {name}! You have {count} new messages."</span>
<span class="cm">// ja: "{name}„Åï„Çì„ÄÅÊñ∞„Åó„ÅÑ„É°„ÉÉ„Çª„Éº„Ç∏„Åå{count}‰ª∂„ÅÇ„Çä„Åæ„Åô„ÄÇ"</span></code></pre>
    </div>
  </div>

  <div class="pitfall">
    <h4>‚ùå Pitfall #2: Manual Date Formatting</h4>
    <pre><code><span class="cm">// ‚ùå WRONG ‚Äî Different countries use different formats!</span>
<span class="kw">const</span> dateStr = <span class="str">`${date.getMonth()+1}/${date.getDate()}/${date.getFullYear()}`</span>;
<span class="cm">// "12/25/2024" ‚Äî This is US format, confusing for most of the world</span>
<span class="cm">// Is 03/04/2024 March 4th or April 3rd? ü§∑</span></code></pre>
    <div class="fix">
      <h5>‚úÖ Fix: Use Intl.DateTimeFormat</h5>
      <pre><code><span class="kw">const</span> dateStr = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">DateTimeFormat</span>(userLocale, {
  <span class="prop">dateStyle</span>: <span class="str">'medium'</span>
}).<span class="fn">format</span>(date);
<span class="cm">// "Dec 25, 2024" (en-US) / "25 d√©c. 2024" (fr-FR)</span></code></pre>
    </div>
  </div>

  <div class="pitfall">
    <h4>‚ùå Pitfall #3: Assuming English Plural Rules Work Everywhere</h4>
    <pre><code><span class="cm">// ‚ùå WRONG ‚Äî English only has "one" and "other"</span>
<span class="kw">const</span> label = count === <span class="num">1</span> ? <span class="str">'item'</span> : <span class="str">'items'</span>;

<span class="cm">// Russian has 4 plural forms!</span>
<span class="cm">// 1 –∫–Ω–∏–≥–∞, 2 –∫–Ω–∏–≥–∏, 5 –∫–Ω–∏–≥, 21 –∫–Ω–∏–≥–∞</span>
<span class="cm">// Arabic has 6 plural forms!</span></code></pre>
    <div class="fix">
      <h5>‚úÖ Fix: Use Intl.PluralRules</h5>
      <pre><code><span class="kw">const</span> pr = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">PluralRules</span>(locale);
<span class="kw">const</span> rule = pr.<span class="fn">select</span>(count); <span class="cm">// "one", "few", "many", "other", etc.</span>
<span class="kw">const</span> label = pluralForms[rule];</code></pre>
    </div>
  </div>

  <div class="pitfall">
    <h4>‚ùå Pitfall #4: Hardcoded Currency Symbols</h4>
    <pre><code><span class="cm">// ‚ùå WRONG</span>
<span class="kw">const</span> price = <span class="str">'$'</span> + amount.<span class="fn">toFixed</span>(<span class="num">2</span>);
<span class="cm">// Ignores: ‚Ç¨ symbol position, ¬• has no decimals, ‚Çπ formatting</span>

<span class="cm">// ‚ùå ALSO WRONG ‚Äî toFixed doesn't handle thousand separators</span>
<span class="kw">const</span> price2 = <span class="str">'$'</span> + (<span class="num">1234.5</span>).<span class="fn">toFixed</span>(<span class="num">2</span>); <span class="cm">// "$1234.50" (no comma!)</span></code></pre>
    <div class="fix">
      <h5>‚úÖ Fix: Always Use Intl.NumberFormat for Currency</h5>
      <pre><code><span class="kw">const</span> price = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(locale, {
  <span class="prop">style</span>: <span class="str">'currency'</span>,
  <span class="prop">currency</span>: currencyCode
}).<span class="fn">format</span>(amount);</code></pre>
    </div>
  </div>

  <div class="pitfall">
    <h4>‚ùå Pitfall #5: Using CSS Physical Properties</h4>
    <pre><code><span class="cm">/* ‚ùå WRONG ‚Äî Breaks in RTL layouts */</span>
.<span class="fn">sidebar</span> { <span class="prop">margin-left</span>: <span class="num">20px</span>; <span class="prop">float</span>: <span class="str">left</span>; }
.<span class="fn">icon</span> { <span class="prop">padding-right</span>: <span class="num">8px</span>; }
.<span class="fn">arrow</span> { <span class="prop">transform</span>: <span class="fn">rotate</span>(<span class="num">0deg</span>); } <span class="cm">/* Arrows don't flip! */</span></code></pre>
    <div class="fix">
      <h5>‚úÖ Fix: Use Logical Properties</h5>
      <pre><code><span class="cm">/* ‚úÖ CORRECT */</span>
.<span class="fn">sidebar</span> { <span class="prop">margin-inline-start</span>: <span class="num">20px</span>; <span class="prop">float</span>: <span class="str">inline-start</span>; }
.<span class="fn">icon</span> { <span class="prop">padding-inline-end</span>: <span class="num">8px</span>; }
.<span class="cm">/* For icons/arrows in RTL: */</span>
[<span class="prop">dir</span>=<span class="str">"rtl"</span>] .<span class="fn">arrow</span> { <span class="prop">transform</span>: <span class="fn">scaleX</span>(<span class="num">-1</span>); }</code></pre>
    </div>
  </div>

  <div class="pitfall">
    <h4>‚ùå Pitfall #6: Sorting with Default .sort()</h4>
    <pre><code><span class="cm">// ‚ùå WRONG ‚Äî Unicode sort, not language-aware</span>
[<span class="str">'r√©sum√©'</span>, <span class="str">'resume'</span>, <span class="str">'R√©sum√©'</span>].<span class="fn">sort</span>();
<span class="cm">// ["R√©sum√©", "resume", "r√©sum√©"] ‚Äî Uppercase first, accents last!</span>

[<span class="str">'√§'</span>, <span class="str">'a'</span>, <span class="str">'z'</span>].<span class="fn">sort</span>();
<span class="cm">// ["a", "z", "√§"] ‚Äî √§ sorted after z!</span></code></pre>
    <div class="fix">
      <h5>‚úÖ Fix: Use Intl.Collator</h5>
      <pre><code>[<span class="str">'√§'</span>, <span class="str">'a'</span>, <span class="str">'z'</span>].<span class="fn">sort</span>(<span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">Collator</span>(<span class="str">'de'</span>).compare);
<span class="cm">// ["a", "√§", "z"] ‚Äî Correct!</span>

<span class="cm">// Case-insensitive + accent-insensitive</span>
<span class="kw">const</span> c = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">Collator</span>(<span class="str">'en'</span>, { <span class="prop">sensitivity</span>: <span class="str">'base'</span> });
[<span class="str">'r√©sum√©'</span>, <span class="str">'resume'</span>, <span class="str">'R√©sum√©'</span>].<span class="fn">sort</span>(c.compare);</code></pre>
    </div>
  </div>

  <div class="pitfall">
    <h4>‚ùå Pitfall #7: Storing Formatted Dates in Database</h4>
    <pre><code><span class="cm">// ‚ùå WRONG ‚Äî Storing locale-specific format</span>
db.<span class="fn">save</span>({ <span class="prop">createdAt</span>: <span class="str">'12/25/2024'</span> }); <span class="cm">// Which format is this?!</span>
db.<span class="fn">save</span>({ <span class="prop">createdAt</span>: <span class="str">'25.12.2024'</span> }); <span class="cm">// German format?</span></code></pre>
    <div class="fix">
      <h5>‚úÖ Fix: Store ISO 8601, Format at Display Time</h5>
      <pre><code><span class="cm">// Store as ISO 8601 / UTC</span>
db.<span class="fn">save</span>({ <span class="prop">createdAt</span>: <span class="str">'2024-12-25T14:30:00Z'</span> });

<span class="cm">// Format only when displaying to user</span>
<span class="kw">const</span> displayDate = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">DateTimeFormat</span>(userLocale)
  .<span class="fn">format</span>(<span class="kw">new</span> <span class="obj">Date</span>(record.<span class="prop">createdAt</span>));</code></pre>
    </div>
  </div>

  <div class="pitfall">
    <h4>‚ùå Pitfall #8: Assuming Text Length Won't Change</h4>
    <pre><code><span class="cm">// English: "Save"     (4 chars)</span>
<span class="cm">// German:  "Speichern" (9 chars, 125% longer!)</span>
<span class="cm">// French:  "Sauvegarder" (11 chars)</span>
<span class="cm">// Finnish: "Tallenna"  (8 chars)</span>
<span class="cm">// Chinese: "‰øùÂ≠ò"      (2 chars, shorter!)</span>

<span class="cm">// ‚ùå Fixed-width buttons will break!</span>
<span class="cm">// ‚ùå Truncated text won't make sense!</span></code></pre>
    <div class="fix">
      <h5>‚úÖ Fix: Use Flexible Layouts</h5>
      <p>Use <code>min-width</code> instead of <code>width</code>, <code>flex-wrap</code>, and test with pseudo-localization that makes all strings 40% longer.</p>
    </div>
  </div>

  <div class="pitfall">
    <h4>‚ùå Pitfall #9: Not Handling Number Input Parsing</h4>
    <pre><code><span class="cm">// User types "1.234,56" (German format for 1234.56)</span>
<span class="fn">parseFloat</span>(<span class="str">"1.234,56"</span>); <span class="cm">// 1.234 ‚Üê WRONG!</span>
<span class="fn">Number</span>(<span class="str">"1.234,56"</span>);     <span class="cm">// NaN ‚Üê WRONG!</span></code></pre>
    <div class="fix">
      <h5>‚úÖ Fix: Locale-Aware Parsing</h5>
      <pre><code><span class="kw">function</span> <span class="fn">parseLocaleNumber</span>(str, locale) {
  <span class="kw">const</span> parts = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(locale).<span class="fn">formatToParts</span>(<span class="num">12345.6</span>);
  <span class="kw">const</span> group = parts.<span class="fn">find</span>(p => p.type === <span class="str">'group'</span>)?.<span class="prop">value</span>;
  <span class="kw">const</span> decimal = parts.<span class="fn">find</span>(p => p.type === <span class="str">'decimal'</span>)?.<span class="prop">value</span>;
  
  <span class="kw">let</span> normalized = str;
  <span class="kw">if</span> (group) normalized = normalized.<span class="fn">replaceAll</span>(group, <span class="str">''</span>);
  <span class="kw">if</span> (decimal) normalized = normalized.<span class="fn">replace</span>(decimal, <span class="str">'.'</span>);
  <span class="kw">return</span> <span class="fn">parseFloat</span>(normalized);
}

<span class="fn">parseLocaleNumber</span>(<span class="str">"1.234,56"</span>, <span class="str">"de-DE"</span>); <span class="cm">// 1234.56 ‚úÖ</span></code></pre>
    </div>
  </div>

  <div class="pitfall">
    <h4>‚ùå Pitfall #10: Creating New Intl Objects in Loops</h4>
    <pre><code><span class="cm">// ‚ùå WRONG ‚Äî Creates a new formatter for every item!</span>
data.<span class="fn">map</span>(item => {
  <span class="kw">return</span> <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'en-US'</span>, {
    <span class="prop">style</span>: <span class="str">'currency'</span>, <span class="prop">currency</span>: <span class="str">'USD'</span>
  }).<span class="fn">format</span>(item.<span class="prop">price</span>);
});</code></pre>
    <div class="fix">
      <h5>‚úÖ Fix: Create Once, Reuse</h5>
      <pre><code><span class="cm">// ‚úÖ CORRECT ‚Äî Create formatter once</span>
<span class="kw">const</span> fmt = <span class="kw">new</span> <span class="obj">Intl</span>.<span class="fn">NumberFormat</span>(<span class="str">'en-US'</span>, {
  <span class="prop">style</span>: <span class="str">'currency'</span>, <span class="prop">currency</span>: <span class="str">'USD'</span>
});
data.<span class="fn">map</span>(item => fmt.<span class="fn">format</span>(item.<span class="prop">price</span>));</code></pre>
    </div>
  </div>
</div>

<!-- ==================== CHEAT SHEET TAB ==================== -->
<div class="tab-panel" id="tab-cheatsheet">
  <h2>üìã i18n Cheat Sheet</h2>
  <p class="subtitle">Quick reference for interviews and daily development. Bookmark this!</p>

  <div class="cheat-grid">
    <div class="cheat-card">
      <h4>üî¢ Intl.NumberFormat</h4>
      <pre><code><span class="cm">// Basic</span>
<span class="kw">new</span> Intl.NumberFormat(locale).format(n)

<span class="cm">// Currency</span>
<span class="kw">new</span> Intl.NumberFormat(locale, {
  style: <span class="str">'currency'</span>,
  currency: <span class="str">'USD'</span>  <span class="cm">// ISO 4217</span>
}).format(n)

<span class="cm">// Percent</span>
{ style: <span class="str">'percent'</span> }

<span class="cm">// Unit</span>
{ style: <span class="str">'unit'</span>, unit: <span class="str">'kilometer'</span> }

<span class="cm">// Compact</span>
{ notation: <span class="str">'compact'</span> }

<span class="cm">// Custom decimals</span>
{
  minimumFractionDigits: <span class="num">2</span>,
  maximumFractionDigits: <span class="num">2</span>
}

<span class="cm">// Parts</span>
formatter.formatToParts(n)</code></pre>
    </div>

    <div class="cheat-card">
      <h4>üìÖ Intl.DateTimeFormat</h4>
      <pre><code><span class="cm">// Quick styles</span>
{ dateStyle: <span class="str">'full'</span>|<span class="str">'long'</span>|<span class="str">'medium'</span>|<span class="str">'short'</span> }
{ timeStyle: <span class="str">'full'</span>|<span class="str">'long'</span>|<span class="str">'medium'</span>|<span class="str">'short'</span> }

<span class="cm">// Granular options</span>
{
  weekday: <span class="str">'long'</span>|<span class="str">'short'</span>|<span class="str">'narrow'</span>,
  year: <span class="str">'numeric'</span>|<span class="str">'2-digit'</span>,
  month: <span class="str">'long'</span>|<span class="str">'short'</span>|<span class="str">'narrow'</span>|
         <span class="str">'numeric'</span>|<span class="str">'2-digit'</span>,
  day: <span class="str">'numeric'</span>|<span class="str">'2-digit'</span>,
  hour: <span class="str">'numeric'</span>|<span class="str">'2-digit'</span>,
  minute: <span class="str">'numeric'</span>|<span class="str">'2-digit'</span>,
  second: <span class="str">'numeric'</span>|<span class="str">'2-digit'</span>,
  timeZone: <span class="str">'UTC'</span>|<span class="str">'Asia/Tokyo'</span>,
  hour12: <span class="kw">true</span>|<span class="kw">false</span>
}</code></pre>
    </div>

    <div class="cheat-card">
      <h4>‚è∞ Intl.RelativeTimeFormat</h4>
      <pre><code><span class="kw">const</span> rtf = <span class="kw">new</span> Intl
  .RelativeTimeFormat(locale, {
    numeric: <span class="str">'auto'</span>|<span class="str">'always'</span>,
    style: <span class="str">'long'</span>|<span class="str">'short'</span>|<span class="str">'narrow'</span>
  });

rtf.format(<span class="num">-1</span>, <span class="str">'day'</span>)   <span class="cm">// "yesterday"</span>
rtf.format(<span class="num">3</span>, <span class="str">'hour'</span>)   <span class="cm">// "in 3 hours"</span>

<span class="cm">// Units:</span>
<span class="cm">// second, minute, hour,</span>
<span class="cm">// day, week, month, year,</span>
<span class="cm">// quarter</span></code></pre>
    </div>

    <div class="cheat-card">
      <h4>üî§ Intl.Collator</h4>
      <pre><code><span class="kw">const</span> c = <span class="kw">new</span> Intl.Collator(locale, {
  sensitivity:
    <span class="str">'base'</span>    <span class="cm">// a=A=√°=√Å</span>
    <span class="str">'accent'</span>  <span class="cm">// a=A, √°=√Å, a‚â†√°</span>
    <span class="str">'case'</span>    <span class="cm">// a‚â†A, a=√°</span>
    <span class="str">'variant'</span> <span class="cm">// all different</span>,
  numeric: <span class="kw">true</span>  <span class="cm">// "2" < "10"</span>
});

arr.sort(c.compare);
c.compare(<span class="str">'a'</span>, <span class="str">'b'</span>); <span class="cm">// -1,0,1</span></code></pre>
    </div>

    <div class="cheat-card">
      <h4>üìù Intl.ListFormat</h4>
      <pre><code><span class="kw">new</span> Intl.ListFormat(locale, {
  style: <span class="str">'long'</span>|<span class="str">'short'</span>|<span class="str">'narrow'</span>,
  type:
    <span class="str">'conjunction'</span> <span class="cm">// "A, B, and C"</span>
    <span class="str">'disjunction'</span> <span class="cm">// "A, B, or C"</span>
    <span class="str">'unit'</span>        <span class="cm">// "A, B, C"</span>
}).format([<span class="str">'A'</span>, <span class="str">'B'</span>, <span class="str">'C'</span>]);</code></pre>
    </div>

    <div class="cheat-card">
      <h4>üî¢ Intl.PluralRules</h4>
      <pre><code><span class="kw">const</span> pr = <span class="kw">new</span> Intl.PluralRules(locale);

pr.select(<span class="num">0</span>)  <span class="cm">// "other"</span>
pr.select(<span class="num">1</span>)  <span class="cm">// "one"</span>
pr.select(<span class="num">2</span>)  <span class="cm">// "other" (en)</span>

<span class="cm">// Categories:</span>
<span class="cm">// zero, one, two, few, many, other</span>

<span class="cm">// Ordinal rules:</span>
<span class="kw">new</span> Intl.PluralRules(<span class="str">'en'</span>, {
  type: <span class="str">'ordinal'</span>
}).select(<span class="num">1</span>)  <span class="cm">// "one" ‚Üí 1st</span>
  .select(<span class="num">2</span>)  <span class="cm">// "two" ‚Üí 2nd</span>
  .select(<span class="num">3</span>)  <span class="cm">// "few" ‚Üí 3rd</span></code></pre>
    </div>

    <div class="cheat-card">
      <h4>üåç Intl.DisplayNames</h4>
      <pre><code><span class="cm">// Language names</span>
<span class="kw">new</span> Intl.DisplayNames(<span class="str">'en'</span>, {
  type: <span class="str">'language'</span>
}).of(<span class="str">'fr'</span>)  <span class="cm">// "French"</span>

<span class="cm">// Region names</span>
<span class="kw">new</span> Intl.DisplayNames(<span class="str">'en'</span>, {
  type: <span class="str">'region'</span>
}).of(<span class="str">'JP'</span>)  <span class="cm">// "Japan"</span>

<span class="cm">// Currency names</span>
<span class="kw">new</span> Intl.DisplayNames(<span class="str">'en'</span>, {
  type: <span class="str">'currency'</span>
}).of(<span class="str">'EUR'</span>) <span class="cm">// "Euro"</span>

<span class="cm">// Script names</span>
{ type: <span class="str">'script'</span> }</code></pre>
    </div>

    <div class="cheat-card">
      <h4>üó∫Ô∏è Locale Detection</h4>
      <pre><code><span class="cm">// Browser locale</span>
navigator.language    <span class="cm">// "en-US"</span>
navigator.languages   <span class="cm">// ["en-US","en"]</span>

<span class="cm">// Parse locale tag</span>
<span class="kw">const</span> loc = <span class="kw">new</span> Intl.Locale(<span class="str">'en-US'</span>);
loc.language  <span class="cm">// "en"</span>
loc.region    <span class="cm">// "US"</span>
loc.textInfo  <span class="cm">// { direction: "ltr" }</span>

<span class="cm">// Check supported locales</span>
Intl.NumberFormat
  .supportedLocalesOf([<span class="str">'en'</span>,<span class="str">'xx'</span>])

<span class="cm">// Set HTML direction</span>
document.documentElement
  .setAttribute(<span class="str">'dir'</span>, <span class="str">'rtl'</span>);</code></pre>
    </div>

    <div class="cheat-card">
      <h4>‚ÜîÔ∏è CSS Logical Properties</h4>
      <pre><code><span class="cm">/* Physical ‚Üí Logical */</span>
margin-left    ‚Üí margin-inline-start
margin-right   ‚Üí margin-inline-end
padding-left   ‚Üí padding-inline-start
padding-right  ‚Üí padding-inline-end
text-align:left‚Üí text-align: start
text-align:right‚Üítext-align: end
border-left    ‚Üí border-inline-start
left: 0        ‚Üí inset-inline-start: 0
width          ‚Üí inline-size
height         ‚Üí block-size
margin-top     ‚Üí margin-block-start
margin-bottom  ‚Üí margin-block-end</code></pre>
    </div>

    <div class="cheat-card">
      <h4>‚ö° Common Currency Codes</h4>
      <pre><code>USD  US Dollar          $
EUR  Euro                ‚Ç¨
GBP  British Pound       ¬£
JPY  Japanese Yen        ¬•
CNY  Chinese Yuan        ¬•
KRW  South Korean Won    ‚Ç©
INR  Indian Rupee        ‚Çπ
BRL  Brazilian Real      R$
RUB  Russian Ruble       ‚ÇΩ
AUD  Australian Dollar   A$
CAD  Canadian Dollar     CA$
CHF  Swiss Franc         CHF
SEK  Swedish Krona       kr
TRY  Turkish Lira        ‚Ç∫</code></pre>
    </div>

    <div class="cheat-card">
      <h4>üìê i18next Quick Reference</h4>
      <pre><code><span class="cm">// Init</span>
i18next.init({
  lng: <span class="str">'en'</span>,
  fallbackLng: <span class="str">'en'</span>,
  resources: { en: { translation: {} }}
});

<span class="cm">// Usage</span>
i18next.t(<span class="str">'key'</span>)
i18next.t(<span class="str">'key'</span>, { name: <span class="str">'val'</span> })
i18next.t(<span class="str">'key'</span>, { count: <span class="num">5</span> })
i18next.changeLanguage(<span class="str">'fr'</span>)
i18next.language <span class="cm">// current</span>

<span class="cm">// Plural keys</span>
<span class="cm">// key_one, key_other</span>
<span class="cm">// key_zero, key_few, key_many</span></code></pre>
    </div>

    <div class="cheat-card">
      <h4>üß™ Interview Quick Answers</h4>
      <pre><code><span class="cm">Q: Difference i18n vs L10n?</span>
A: i18n = architecture (code design)
   L10n = content (translations)

<span class="cm">Q: How detect user locale?</span>
A: navigator.language /
   navigator.languages

<span class="cm">Q: How handle RTL?</span>
A: CSS logical properties +
   dir attribute + Intl.Locale

<span class="cm">Q: Why not string concat?</span>
A: Word order varies by language

<span class="cm">Q: How store dates?</span>
A: ISO 8601 / UTC, format on display

<span class="cm">Q: Plural forms count?</span>
A: English=2, Russian=4, Arabic=6</code></pre>
    </div>
  </div>
</div>

</main>

<script>
// ===========================
// TAB NAVIGATION
// ===========================
const tabs = document.querySelectorAll('.nav-tab');
const panels = document.querySelectorAll('.tab-panel');

tabs.forEach(tab => {
  tab.addEventListener('click', () => {
    tabs.forEach(t => t.classList.remove('active'));
    panels.forEach(p => p.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById('tab-' + tab.dataset.tab).classList.add('active');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });
});

function scrollToLesson(id) {
  document.getElementById(id).scrollIntoView({ behavior: 'smooth', block: 'start' });
}

// ===========================
// PROGRESS TRACKING
// ===========================
let progress = {
  exercises: new Set(),
  quiz: new Set(),
  totalExercises: 8,
  totalQuiz: 20
};

function updateProgress() {
  const exPct = (progress.exercises.size / progress.totalExercises) * 50;
  const qzPct = (progress.quiz.size / progress.totalQuiz) * 50;
  const total = Math.round(exPct + qzPct);
  document.getElementById('progressFill').style.width = total + '%';
  document.getElementById('progressText').textContent = total + '%';
}

// ===========================
// LIVE EXAMPLES
// ===========================
function formatNumber() {
  const num = parseFloat(document.getElementById('numInput').value);
  const locale = document.getElementById('numLocale').value;
  const style = document.getElementById('numStyle').value;
  
  const opts = { style };
  if (style === 'currency') {
    const currencyMap = {
      'en-US': 'USD', 'de-DE': 'EUR', 'fr-FR': 'EUR',
      'ja-JP': 'JPY', 'ar-SA': 'SAR', 'hi-IN': 'INR',
      'zh-CN': 'CNY', 'pt-BR': 'BRL'
    };
    opts.currency = currencyMap[locale] || 'USD';
  }
  if (style === 'unit') {
    opts.unit = 'kilometer-per-hour';
    opts.unitDisplay = 'short';
  }
  
  try {
    const formatter = new Intl.NumberFormat(locale, opts);
    const result = formatter.format(num);
    const parts = formatter.formatToParts(num);
    
    let html = `<div class="demo-row"><span class="label">Formatted:</span><span class="value" style="font-size:1.3rem;">${result}</span></div>`;
    html += `<div class="demo-row"><span class="label">Parts:</span><span class="value">${parts.map(p => `[${p.type}: "${p.value}"]`).join(' ')}</span></div>`;
    html += `<div class="demo-row"><span class="label">Code:</span><span class="value">new Intl.NumberFormat('${locale}', ${JSON.stringify(opts)}).format(${num})</span></div>`;
    
    document.getElementById('numResult').innerHTML = html;
  } catch(e) {
    document.getElementById('numResult').innerHTML = `<span style="color:var(--danger)">Error: ${e.message}</span>`;
  }
}

function formatDate() {
  const locale = document.getElementById('dateLocale').value;
  const dateStyle = document.getElementById('dateStyle').value;
  const now = new Date();
  
  try {
    const styles = ['full', 'long', 'medium', 'short'];
    let html = `<div class="demo-row"><span class="label">Current time:</span><span class="value">${now.toISOString()}</span></div>`;
    
    styles.forEach(s => {
      const formatted = new Intl.DateTimeFormat(locale, { dateStyle: s, timeStyle: s }).format(now);
      const marker = s === dateStyle ? ' ‚Üê selected' : '';
      html += `<div class="demo-row"><span class="label">${s}:</span><span class="value">${formatted}${marker}</span></div>`;
    });
    
    document.getElementById('dateResult').innerHTML = html;
  } catch(e) {
    document.getElementById('dateResult').innerHTML = `<span style="color:var(--danger)">Error: ${e.message}</span>`;
  }
}

function formatRelativeTime() {
  const value = parseInt(document.getElementById('rtfValue').value);
  const unit = document.getElementById('rtfUnit').value;
  const locale = document.getElementById('rtfLocale').value;
  
  try {
    const auto = new Intl.RelativeTimeFormat(locale, { numeric: 'auto' }).format(value, unit);
    const always = new Intl.RelativeTimeFormat(locale, { numeric: 'always' }).format(value, unit);
    const narrow = new Intl.RelativeTimeFormat(locale, { numeric: 'auto', style: 'narrow' }).format(value, unit);
    
    let html = `<div class="demo-row"><span class="label">numeric: 'auto':</span><span class="value" style="font-size:1.2rem;">${auto}</span></div>`;
    html += `<div class="demo-row"><span class="label">numeric: 'always':</span><span class="value">${always}</span></div>`;
    html += `<div class="demo-row"><span class="label">style: 'narrow':</span><span class="value">${narrow}</span></div>`;
    
    document.getElementById('rtfResult').innerHTML = html;
  } catch(e) {
    document.getElementById('rtfResult').innerHTML = `<span style="color:var(--danger)">Error: ${e.message}</span>`;
  }
}

function formatList() {
  const items = document.getElementById('listItems').value.split(',').map(s => s.trim()).filter(Boolean);
  const locale = document.getElementById('listLocale').value;
  const type = document.getElementById('listType').value;
  
  try {
    const result = new Intl.ListFormat(locale, { style: 'long', type }).format(items);
    let html = `<div class="demo-row"><span class="label">Result:</span><span class="value" style="font-size:1.2rem;">${result}</span></div>`;
    html += `<div class="demo-row"><span class="label">Code:</span><span class="value">new Intl.ListFormat('${locale}', { type: '${type}' }).format(${JSON.stringify(items)})</span></div>`;
    
    document.getElementById('listResult').innerHTML = html;
  } catch(e) {
    document.getElementById('listResult').innerHTML = `<span style="color:var(--danger)">Error: ${e.message}</span>`;
  }
}

function explorePlurals() {
  const locale = document.getElementById('pluralLocale').value;
  const pr = new Intl.PluralRules(locale);
  
  const testNums = [0, 1, 2, 3, 4, 5, 6, 7, 10, 11, 12, 20, 21, 22, 25, 100, 101, 102];
  const categories = {};
  
  testNums.forEach(n => {
    const rule = pr.select(n);
    if (!categories[rule]) categories[rule] = [];
    categories[rule].push(n);
  });
  
  let html = `<div class="demo-row"><span class="label">Locale: ${locale} ‚Äî ${Object.keys(categories).length} plural form(s)</span></div>`;
  
  Object.entries(categories).forEach(([rule, nums]) => {
    html += `<div class="demo-row"><span class="label" style="color:var(--primary-light);">${rule}:</span><span class="value">${nums.join(', ')}</span></div>`;
  });
  
  document.getElementById('pluralResult').innerHTML = html;
}

function setRtlDemo(dir) {
  const box = document.getElementById('rtlDemoBox');
  box.setAttribute('dir', dir);
  
  if (dir === 'rtl') {
    document.getElementById('rtlTitle').textContent = 'ŸÖÿ±ÿ≠ÿ®ÿß ÿ®ŸÉŸÖ ŸÅŸä ŸÖÿ™ÿ¨ÿ±ŸÜÿß';
    document.getElementById('rtlText').textContent = 'Ÿáÿ∞Ÿá ŸÅŸÇÿ±ÿ© ŸÜŸÖŸàÿ∞ÿ¨Ÿäÿ© ÿ™Ÿàÿ∂ÿ≠ ŸÉŸäŸÅ Ÿäÿ™ÿ∫Ÿäÿ± ÿßŸÑŸÜÿµ ŸàÿßŸÑÿ™ÿÆÿ∑Ÿäÿ∑ ŸÖÿπ ÿßŸÑÿßÿ™ÿ¨ÿßŸá.';
    document.getElementById('rtlBtn1').textContent = 'ÿßŸÑÿ≥ÿßÿ®ŸÇ ‚Üí';
    document.getElementById('rtlBtn2').textContent = '‚Üê ÿßŸÑÿ™ÿßŸÑŸä';
  } else {
    document.getElementById('rtlTitle').textContent = 'Welcome to our store';
    document.getElementById('rtlText').textContent = 'This is a sample paragraph showing how text and layout changes with direction.';
    document.getElementById('rtlBtn1').textContent = '‚Üê Previous';
    document.getElementById('rtlBtn2').textContent = 'Next ‚Üí';
  }
}

// ===========================
// CODE PLAYGROUND
// ===========================
function runPlayground() {
  const code = document.getElementById('playgroundCode').value;
  const output = document.getElementById('playgroundOutput');
  
  const logs = [];
  const originalLog = console.log;
  console.log = (...args) => {
    logs.push(args.map(a => typeof a === 'object' ? JSON.stringify(a, null, 2) : String(a)).join(' '));
  };
  
  try {
    eval(code);
    output.textContent = logs.join('\n') || '(no output)';
    output.className = 'output-box';
  } catch(e) {
    output.textContent = 'Error: ' + e.message;
    output.className = 'output-box error';
  }
  
  console.log = originalLog;
}

// ===========================
// EXERCISES
// ===========================
function showHint(n) {
  const el = document.getElementById(`ex${n}Hint`);
  el.classList.toggle('show');
}

function showSolution(n) {
  const el = document.getElementById(`ex${n}Solution`);
  el.classList.toggle('show');
}

function checkExercise(n) {
  const code = document.getElementById(`ex${n}Code`).value;
  const resultEl = document.getElementById(`ex${n}Result`);
  
  try {
    const fn = new Function(code + '\n return { formatUSD, formatGermanDate, timeAgo, pluralize, formatPrice, sortByLocale, createTranslator, formatCompact }[arguments[0]]');
    
    let passed = true;
    let message = '';
    
    switch(n) {
      case 1: {
        const formatUSD = new Function(code + '\nreturn formatUSD;')();
        const r = formatUSD(1234.5);
        if (r === '$1,234.50') {
          message = '‚úÖ Correct! formatUSD(1234.5) = "$1,234.50"';
        } else {
          passed = false;
          message = `‚ùå Expected "$1,234.50" but got "${r}"`;
        }
        break;
      }
      case 2: {
        const formatGermanDate = new Function(code + '\nreturn formatGermanDate;')();
        const r = formatGermanDate(new Date(2024, 11, 25));
        if (r && r.includes('2024') && (r.includes('Dezember') || r.includes('Dez'))) {
          message = `‚úÖ Correct! Got: "${r}"`;
        } else {
          passed = false;
          message = `‚ùå Expected German date with "Dezember" and "2024", got "${r}"`;
        }
        break;
      }
      case 3: {
        const timeAgo = new Function(code + '\nreturn timeAgo;')();
        const r = timeAgo(-1, 'day', 'en');
        if (r && (r.toLowerCase().includes('yesterday') || r.includes('1 day ago'))) {
          message = `‚úÖ Correct! timeAgo(-1, 'day', 'en') = "${r}"`;
        } else {
          passed = false;
          message = `‚ùå Expected "yesterday" or "1 day ago", got "${r}"`;
        }
        break;
      }
      case 4: {
        const pluralize = new Function(code + '\nreturn pluralize;')();
        const r1 = pluralize(1, 'en', { one: 'cat', other: 'cats' });
        const r2 = pluralize(5, 'en', { one: 'cat', other: 'cats' });
        if (r1 === '1 cat' && r2 === '5 cats') {
          message = '‚úÖ Correct! "1 cat" and "5 cats"';
        } else {
          passed = false;
          message = `‚ùå Expected "1 cat" and "5 cats", got "${r1}" and "${r2}"`;
        }
        break;
      }
      case 5: {
        const formatPrice = new Function(code + '\nreturn formatPrice;')();
        const r1 = formatPrice(42.5, 'en-US', 'USD');
        const r2 = formatPrice(4250, 'ja-JP', 'JPY');
        if (r1 && r1.includes('42.50') && r2 && r2.includes('4,250') && !r2.includes('.')) {
          message = `‚úÖ Correct! "${r1}" and "${r2}"`;
        } else {
          passed = false;
          message = `‚ùå Got "${r1}" and "${r2}". Check currency formatting.`;
        }
        break;
      }
      case 6: {
        const sortByLocale = new Function(code + '\nreturn sortByLocale;')();
        const r = sortByLocale(['z', 'a', '√§'], 'de');
        if (r && r[0] === 'a' && r[1] === '√§' && r[2] === 'z') {
          message = `‚úÖ Correct! [${r.join(', ')}]`;
        } else {
          passed = false;
          message = `‚ùå Expected ["a", "√§", "z"], got [${r ? r.join(', ') : 'undefined'}]`;
        }
        break;
      }
      case 7: {
        const createTranslator = new Function(code + '\nreturn createTranslator;')();
        const msgs = {
          en: { greeting: 'Hello, {name}!', nav: { home: 'Home' } },
          fr: { greeting: 'Bonjour, {name} !', nav: { home: 'Accueil' } }
        };
        const t = createTranslator('fr', msgs);
        const r1 = t('greeting', { name: 'Marie' });
        const r2 = t('nav.home');
        if (r1 === 'Bonjour, Marie !' && r2 === 'Accueil') {
          message = `‚úÖ Correct! "${r1}" and "${r2}"`;
        } else {
          passed = false;
          message = `‚ùå Expected "Bonjour, Marie !" and "Accueil", got "${r1}" and "${r2}"`;
        }
        break;
      }
      case 8: {
        const formatCompact = new Function(code + '\nreturn formatCompact;')();
        const r = formatCompact(1500000, 'en');
        if (r && (r.includes('1.5M') || r.includes('2M') || r.includes('1M') || r.toLowerCase().includes('m'))) {
          message = `‚úÖ Correct! formatCompact(1500000, 'en') = "${r}"`;
        } else {
          passed = false;
          message = `‚ùå Expected compact format like "1.5M", got "${r}"`;
        }
        break;
      }
    }
    
    resultEl.className = `exercise-result show ${passed ? 'pass' : 'fail'}`;
    resultEl.textContent = message;
    
    if (passed) {
      progress.exercises.add(n);
      updateProgress();
    }
  } catch(e) {
    resultEl.className = 'exercise-result show fail';
    resultEl.textContent = `‚ùå Error: ${e.message}`;
  }
}

// ===========================
// QUIZ
// ===========================
const quizData = [
  {
    q: "What does 'i18n' stand for?",
    options: [
      "Internet 18 Networks",
      "Internationalization (18 letters between i and n)",
      "International 18 Nodes",
      "Integrated 18 Namespaces"
    ],
    correct: 1,
    explanation: "i18n = i + 18 letters + n = internationalization. The 18 represents the number of letters between 'i' and 'n'."
  },
  {
    q: "What is the difference between i18n and L10n?",
    options: [
      "They are the same thing",
      "i18n is for dates, L10n is for numbers",
      "i18n is designing for multi-language support, L10n is actually translating for a specific locale",
      "i18n is a library, L10n is a standard"
    ],
    correct: 2,
    explanation: "i18n (internationalization) is the architecture/design. L10n (localization) is the actual adaptation (translation, formatting) for a specific language/region."
  },
  {
    q: "Which is a valid BCP 47 locale tag?",
    options: [
      "english-usa",
      "en_US",
      "en-US",
      "EN/US"
    ],
    correct: 2,
    explanation: "BCP 47 uses hyphens: 'en-US' (language-region). Note: 'en_US' with underscore is a common mistake ‚Äî that's the POSIX format."
  },
  {
    q: "What does `new Intl.NumberFormat('de-DE').format(1234.56)` return?",
    options: [
      '"1,234.56"',
      '"1.234,56"',
      '"1 234,56"',
      '"1234.56"'
    ],
    correct: 1,
    explanation: "German uses periods for thousands and commas for decimals: 1.234,56"
  },
  {
    q: "How do you format currency with Intl.NumberFormat?",
    options: [
      "{ type: 'money', currency: 'USD' }",
      "{ style: 'currency', currency: 'USD' }",
      "{ format: 'currency', code: 'USD' }",
      "{ mode: 'currency', symbol: '$' }"
    ],
    correct: 1,
    explanation: "Use style: 'currency' and currency: 'XXX' (ISO 4217 currency code)."
  },
  {
    q: "What happens when you format JPY (Japanese Yen) amounts?",
    options: [
      "It always shows 2 decimal places",
      "It shows no decimal places (JPY doesn't use subunits)",
      "It shows 3 decimal places",
      "It throws an error"
    ],
    correct: 1,
    explanation: "Intl.NumberFormat automatically knows that JPY has no subunits (no cents), so it displays no decimal places."
  },
  {
    q: "What does `formatToParts()` return?",
    options: [
      "A formatted string",
      "An array of objects with type and value properties",
      "A number",
      "A locale object"
    ],
    correct: 1,
    explanation: "formatToParts() returns an array like [{type: 'currency', value: '$'}, {type: 'integer', value: '42'}], useful for custom styling of individual parts."
  },
  {
    q: "Which Intl API would you use for 'yesterday' or '3 days ago'?",
    options: [
      "Intl.DateTimeFormat",
      "Intl.RelativeTimeFormat",
      "Intl.TimeAgo",
      "Intl.DurationFormat"
    ],
    correct: 1,
    explanation: "Intl.RelativeTimeFormat is designed for relative time strings like 'yesterday', '3 days ago', 'in 2 hours'."
  },
  {
    q: "Why should you NOT use `Array.sort()` alone for multilingual text?",
    options: [
      "It's too slow",
      "It sorts by Unicode code points, not by language rules",
      "It can't handle strings",
      "It only works with numbers"
    ],
    correct: 1,
    explanation: "Default sort uses Unicode code points, so '√§' sorts after 'z'. Use Intl.Collator for language-aware sorting."
  },
  {
    q: "How many plural forms does Arabic have?",
    options: [
      "2 (like English)",
      "3",
      "4 (like Russian)",
      "6 (zero, one, two, few, many, other)"
    ],
    correct: 3,
    explanation: "Arabic has 6 plural categories: zero, one, two, few, many, and other. This is why you can't just use `count === 1 ? singular : plural`."
  },
  {
    q: "What is the correct way to detect the user's preferred language?",
    options: [
      "window.language",
      "navigator.language",
      "document.language",
      "Intl.language"
    ],
    correct: 1,
    explanation: "navigator.language returns the user's primary language. navigator.languages returns all preferred languages in order."
  },
  {
    q: "Which CSS property should replace `margin-left` for RTL support?",
    options: [
      "margin-start",
      "margin-inline-start",
      "margin-logical-left",
      "margin-dir-start"
    ],
    correct: 1,
    explanation: "CSS logical property margin-inline-start is 'margin-left' in LTR and 'margin-right' in RTL."
  },
  {
    q: "What format should dates be stored in a database?",
    options: [
      "MM/DD/YYYY (US format)",
      "DD.MM.YYYY (European format)",
      "ISO 8601 (2024-12-25T14:30:00Z)",
      "Unix timestamp only"
    ],
    correct: 2,
    explanation: "Always store dates in ISO 8601 / UTC format. Format for display only when showing to the user, using their locale."
  },
  {
    q: "What does `Intl.ListFormat` do?",
    options: [
      "Formats numbered lists",
      "Joins array items with language-appropriate separators (e.g., 'A, B, and C')",
      "Sorts a list alphabetically",
      "Formats bullet points"
    ],
    correct: 1,
    explanation: "Intl.ListFormat creates natural-sounding lists: 'A, B, and C' (English) vs 'A, B et C' (French)."
  },
  {
    q: "What is the `numeric: 'auto'` option in RelativeTimeFormat?",
    options: [
      "Always shows numbers",
      "Uses words like 'yesterday' instead of '1 day ago' when possible",
      "Formats numbers automatically",
      "Rounds to nearest integer"
    ],
    correct: 1,
    explanation: "numeric: 'auto' produces 'yesterday' instead of '1 day ago', and 'tomorrow' instead of 'in 1 day'. More natural language."
  },
  {
    q: "Which is a common i18n library for React?",
    options: [
      "react-translate",
      "react-i18next (or FormatJS/react-intl)",
      "react-locale",
      "react-language"
    ],
    correct: 1,
    explanation: "react-i18next (wrapper for i18next) and FormatJS/react-intl are the two most popular i18n solutions for React."
  },
  {
    q: "What's wrong with `'$' + price.toFixed(2)` for currency?",
    options: [
      "Nothing, it's fine",
      "It doesn't handle thousand separators, non-USD currencies, or different symbol positions",
      "toFixed is not a function",
      "It's too slow"
    ],
    correct: 1,
    explanation: "This misses thousand separators (1234.50 vs 1,234.50), different symbol positions (‚Ç¨ after in German: '42,50 ‚Ç¨'), and currencies without decimals (JPY)."
  },
  {
    q: "What does Intl.Collator's `sensitivity: 'base'` do?",
    options: [
      "Treats all characters as different",
      "Ignores case AND accents (a = A = √° = √Å)",
      "Only ignores case",
      "Only ignores accents"
    ],
    correct: 1,
    explanation: "sensitivity: 'base' treats a, A, √°, and √Å as equal. 'accent' ignores case only. 'case' ignores accents only. 'variant' treats all as different."
  },
  {
    q: "Why should you create Intl formatters outside of loops?",
    options: [
      "They don't work inside loops",
      "Creating Intl objects is expensive ‚Äî create once, reuse many times",
      "It's a syntax error",
      "Loops change the locale"
    ],
    correct: 1,
    explanation: "Creating Intl objects has overhead (resolving locale data). Create the formatter once, then call .format() in the loop. Significant performance difference with large datasets."
  },
  {
    q: "How can you detect if a locale is RTL using modern JavaScript?",
    options: [
      "locale.isRTL()",
      "Intl.isRTL(locale)",
      "new Intl.Locale(locale).textInfo.direction === 'rtl'",
      "navigator.rtl"
    ],
    correct: 2,
    explanation: "new Intl.Locale('ar').textInfo returns { direction: 'rtl' }. This is the modern, standards-based way to detect text direction."
  }
];

let quizScore = 0;
let answeredQuestions = new Set();

function buildQuiz() {
  const container = document.getElementById('quizContainer');
  container.innerHTML = '';
  
  quizData.forEach((q, i) => {
    const div = document.createElement('div');
    div.className = 'quiz-question';
    div.id = `quiz-q${i}`;
    
    let optionsHtml = q.options.map((opt, j) => 
      `<button class="quiz-option" data-q="${i}" data-opt="${j}" onclick="answerQuiz(${i}, ${j})">${String.fromCharCode(65+j)}) ${opt}</button>`
    ).join('');
    
    div.innerHTML = `
      <h4><span class="q-number">${i+1}</span> ${q.q}</h4>
      <div class="quiz-options">${optionsHtml}</div>
      <div class="quiz-feedback" id="quiz-fb-${i}"></div>
    `;
    
    container.appendChild(div);
  });
}

function answerQuiz(qIdx, optIdx) {
  if (answeredQuestions.has(qIdx)) return;
  answeredQuestions.add(qIdx);
  
  const q = quizData[qIdx];
  const options = document.querySelectorAll(`[data-q="${qIdx}"]`);
  const feedback = document.getElementById(`quiz-fb-${qIdx}`);
  
  options.forEach((opt, i) => {
    opt.classList.add('disabled');
    if (i === q.correct) opt.classList.add('correct');
    if (i === optIdx && i !== q.correct) opt.classList.add('incorrect');
  });
  
  if (optIdx === q.correct) {
    quizScore++;
    feedback.className = 'quiz-feedback show correct-fb';
    feedback.textContent = '‚úÖ Correct! ' + q.explanation;
    progress.quiz.add(qIdx);
  } else {
    feedback.className = 'quiz-feedback show incorrect-fb';
    feedback.textContent = '‚ùå Wrong. ' + q.explanation;
  }
  
  document.getElementById('quizScore').textContent = `Score: ${quizScore}/${quizData.length}`;
  updateProgress();
  
  if (answeredQuestions.size === quizData.length) {
    const finalEl = document.getElementById('finalScore');
    finalEl.classList.remove('hidden');
    document.getElementById('finalScoreNum').textContent = `${quizScore}/${quizData.length}`;
  }
}

function resetQuiz() {
  quizScore = 0;
  answeredQuestions.clear();
  progress.quiz.clear();
  document.getElementById('quizScore').textContent = `Score: 0/${quizData.length}`;
  document.getElementById('finalScore').classList.add('hidden');
  buildQuiz();
  updateProgress();
}

// Init
buildQuiz();
formatNumber();
formatDate();
formatRelativeTime();
formatList();
explorePlurals();
</script>
</body>
</html>