<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Docker & Containerization Mastery</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
--bg:#0a0e17;--surface:#121a2b;--surface2:#1a2540;--surface3:#223058;
--accent:#2196F3;--accent2:#00BCD4;--accent3:#4CAF50;--accent4:#FF9800;
--accent5:#E91E63;--text:#e8eaf6;--text2:#90a4ae;--text3:#546e7a;
--danger:#f44336;--success:#4CAF50;--warning:#FF9800;
--docker-blue:#2496ED;--docker-dark:#003f8e;
--gradient:linear-gradient(135deg,#2196F3,#00BCD4);
--gradient2:linear-gradient(135deg,#4CAF50,#00BCD4);
--gradient3:linear-gradient(135deg,#FF9800,#E91E63);
}
body{font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text);line-height:1.7;overflow-x:hidden}
/* Scrollbar */
::-webkit-scrollbar{width:8px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--surface3);border-radius:4px}
::-webkit-scrollbar-thumb:hover{background:var(--accent)}

/* Header */
.hero{background:linear-gradient(135deg,#0d1525 0%,#1a2a4a 50%,#0d2040 100%);padding:30px 20px;text-align:center;border-bottom:2px solid var(--surface3);position:relative;overflow:hidden}
.hero::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle at 30% 50%,rgba(33,150,243,0.08) 0%,transparent 50%);animation:heroGlow 8s ease-in-out infinite alternate}
@keyframes heroGlow{0%{transform:translate(0,0)}100%{transform:translate(5%,3%)}}
.hero h1{font-size:2.4em;background:var(--gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:8px;position:relative}
.hero .subtitle{color:var(--text2);font-size:1.1em;position:relative}
.docker-whale{font-size:3em;position:relative;display:inline-block;margin-bottom:10px}

/* Progress Bar */
.progress-container{background:var(--surface);padding:15px 30px;border-bottom:1px solid var(--surface3);position:sticky;top:0;z-index:100}
.progress-bar-bg{background:var(--surface2);border-radius:10px;height:12px;overflow:hidden;margin-top:5px}
.progress-bar-fill{height:100%;background:var(--gradient);border-radius:10px;transition:width 0.5s ease;width:0%}
.progress-text{font-size:0.85em;color:var(--text2);display:flex;justify-content:space-between}

/* Navigation */
.nav{background:var(--surface);border-bottom:1px solid var(--surface3);padding:0 20px;display:flex;overflow-x:auto;position:sticky;top:52px;z-index:99}
.nav-btn{padding:14px 20px;background:none;border:none;color:var(--text2);cursor:pointer;font-size:0.9em;white-space:nowrap;border-bottom:3px solid transparent;transition:all 0.3s}
.nav-btn:hover{color:var(--text);background:var(--surface2)}
.nav-btn.active{color:var(--accent);border-bottom-color:var(--accent);background:rgba(33,150,243,0.05)}

/* Main Content */
.main{max-width:1100px;margin:0 auto;padding:30px 20px}
.section{display:none}
.section.active{display:block}
.section-title{font-size:1.8em;margin-bottom:25px;padding-bottom:15px;border-bottom:2px solid var(--surface3);display:flex;align-items:center;gap:12px}
.section-title .icon{font-size:1.2em}

/* Cards */
.card{background:var(--surface);border:1px solid var(--surface3);border-radius:12px;padding:25px;margin-bottom:20px;transition:all 0.3s}
.card:hover{border-color:var(--accent);box-shadow:0 4px 20px rgba(33,150,243,0.1)}
.card h3{color:var(--accent);margin-bottom:12px;font-size:1.2em}
.card h4{color:var(--accent2);margin:15px 0 8px}
.card p{color:var(--text2);margin-bottom:10px}
.card ul,.card ol{padding-left:20px;color:var(--text2);margin-bottom:10px}
.card li{margin-bottom:5px}

/* Concept Cards */
.concept-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin:20px 0}
.concept-card{background:var(--surface);border:1px solid var(--surface3);border-radius:12px;padding:20px;text-align:center;transition:all 0.3s;cursor:default}
.concept-card:hover{transform:translateY(-3px);border-color:var(--accent);box-shadow:0 8px 30px rgba(0,0,0,0.3)}
.concept-card .emoji{font-size:2.5em;margin-bottom:10px;display:block}
.concept-card h4{color:var(--accent);margin-bottom:8px}
.concept-card p{color:var(--text2);font-size:0.9em}

/* Code Blocks */
.code-block{background:#0d1117;border:1px solid #30363d;border-radius:8px;padding:18px;margin:12px 0;font-family:'Fira Code','Cascadia Code','Consolas',monospace;font-size:0.88em;overflow-x:auto;position:relative;line-height:1.6}
.code-block .lang-label{position:absolute;top:8px;right:12px;font-size:0.7em;color:var(--text3);background:#1a2332;padding:2px 8px;border-radius:4px;font-family:'Segoe UI',sans-serif}
.code-block .copy-btn{position:absolute;top:8px;right:90px;font-size:0.7em;color:var(--text3);background:#1a2332;border:1px solid #30363d;padding:2px 8px;border-radius:4px;cursor:pointer;font-family:'Segoe UI',sans-serif;transition:all 0.2s}
.code-block .copy-btn:hover{color:var(--accent);border-color:var(--accent)}
.code-comment{color:#6a737d}.code-keyword{color:#ff7b72}.code-string{color:#a5d6ff}.code-function{color:#d2a8ff}
.code-flag{color:#79c0ff}.code-number{color:#79c0ff}.code-instruction{color:#ff7b72;font-weight:bold}
.code-value{color:#a5d6ff}.code-service{color:#d2a8ff}.code-key{color:#7ee787}

/* Analogy Box */
.analogy{background:linear-gradient(135deg,rgba(33,150,243,0.08),rgba(0,188,212,0.08));border:1px solid rgba(33,150,243,0.3);border-left:4px solid var(--accent);border-radius:8px;padding:18px;margin:15px 0}
.analogy .label{font-weight:bold;color:var(--accent);margin-bottom:5px;font-size:0.85em;text-transform:uppercase;letter-spacing:1px}

/* Warning/Tip/Pitfall */
.tip,.warning,.pitfall,.info-box{border-radius:8px;padding:16px;margin:12px 0;border-left:4px solid}
.tip{background:rgba(76,175,80,0.08);border-color:var(--success)}
.tip .label{color:var(--success)}
.warning{background:rgba(255,152,0,0.08);border-color:var(--warning)}
.warning .label{color:var(--warning)}
.pitfall{background:rgba(244,67,54,0.08);border-color:var(--danger)}
.pitfall .label{color:var(--danger)}
.info-box{background:rgba(33,150,243,0.08);border-color:var(--accent)}
.info-box .label{color:var(--accent)}
.label{font-weight:bold;font-size:0.85em;text-transform:uppercase;letter-spacing:1px;margin-bottom:5px}

/* Interactive Terminal */
.terminal{background:#0d1117;border:1px solid #30363d;border-radius:8px;overflow:hidden;margin:15px 0}
.terminal-header{background:#161b22;padding:8px 15px;display:flex;align-items:center;gap:8px;border-bottom:1px solid #30363d}
.terminal-dot{width:12px;height:12px;border-radius:50%}
.terminal-dot.red{background:#ff5f56}.terminal-dot.yellow{background:#ffbd2e}.terminal-dot.green{background:#27c93f}
.terminal-title{color:var(--text3);font-size:0.8em;margin-left:8px}
.terminal-body{padding:15px;font-family:'Fira Code','Consolas',monospace;font-size:0.85em}
.terminal-line{margin-bottom:4px}
.terminal-prompt{color:var(--accent)}
.terminal-cmd{color:var(--text)}
.terminal-output{color:var(--text2)}
.terminal-input{background:transparent;border:none;color:var(--text);font-family:inherit;font-size:inherit;outline:none;width:70%}

/* Quiz */
.quiz-container{margin:20px 0}
.quiz-question{background:var(--surface);border:1px solid var(--surface3);border-radius:12px;padding:25px;margin-bottom:20px}
.quiz-question h4{margin-bottom:15px;font-size:1.05em}
.quiz-question .q-number{color:var(--accent);font-size:0.8em;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}
.quiz-options{display:flex;flex-direction:column;gap:8px}
.quiz-option{padding:12px 18px;background:var(--surface2);border:2px solid var(--surface3);border-radius:8px;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;gap:10px}
.quiz-option:hover{border-color:var(--accent);background:rgba(33,150,243,0.05)}
.quiz-option.selected{border-color:var(--accent);background:rgba(33,150,243,0.1)}
.quiz-option.correct{border-color:var(--success);background:rgba(76,175,80,0.1);color:var(--success)}
.quiz-option.wrong{border-color:var(--danger);background:rgba(244,67,54,0.1);color:var(--danger)}
.quiz-option .letter{width:28px;height:28px;border-radius:50%;background:var(--surface3);display:flex;align-items:center;justify-content:center;font-size:0.8em;font-weight:bold;flex-shrink:0}
.quiz-option.correct .letter{background:var(--success);color:white}
.quiz-option.wrong .letter{background:var(--danger);color:white}
.quiz-explanation{margin-top:12px;padding:12px;background:rgba(76,175,80,0.08);border-radius:8px;display:none;font-size:0.9em;color:var(--text2);border-left:3px solid var(--success)}

/* Exercise */
.exercise{background:var(--surface);border:1px solid var(--surface3);border-radius:12px;padding:25px;margin-bottom:20px;position:relative}
.exercise h4{color:var(--accent4);margin-bottom:8px}
.exercise .difficulty{display:inline-block;padding:3px 10px;border-radius:12px;font-size:0.7em;text-transform:uppercase;letter-spacing:1px;margin-bottom:12px}
.difficulty.easy{background:rgba(76,175,80,0.15);color:var(--success)}
.difficulty.medium{background:rgba(255,152,0,0.15);color:var(--warning)}
.difficulty.hard{background:rgba(244,67,54,0.15);color:var(--danger)}
.exercise textarea{width:100%;background:#0d1117;border:1px solid #30363d;border-radius:8px;padding:15px;color:var(--text);font-family:'Fira Code','Consolas',monospace;font-size:0.85em;resize:vertical;min-height:120px;margin:10px 0}
.exercise textarea:focus{outline:none;border-color:var(--accent)}

/* Buttons */
.btn{padding:10px 24px;border:none;border-radius:8px;cursor:pointer;font-size:0.9em;font-weight:600;transition:all 0.2s;display:inline-flex;align-items:center;gap:6px}
.btn-primary{background:var(--gradient);color:white}
.btn-primary:hover{transform:translateY(-1px);box-shadow:0 4px 15px rgba(33,150,243,0.3)}
.btn-success{background:var(--gradient2);color:white}
.btn-success:hover{transform:translateY(-1px);box-shadow:0 4px 15px rgba(76,175,80,0.3)}
.btn-warning{background:var(--gradient3);color:white}
.btn-outline{background:transparent;border:2px solid var(--accent);color:var(--accent)}
.btn-outline:hover{background:var(--accent);color:white}
.btn-small{padding:6px 14px;font-size:0.8em}
.btn-group{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}

/* Cheatsheet */
.cheatsheet-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:15px;margin:20px 0}
.cheat-card{background:var(--surface);border:1px solid var(--surface3);border-radius:10px;padding:18px;border-top:3px solid var(--accent)}
.cheat-card h4{color:var(--accent);margin-bottom:10px;font-size:0.95em}
.cheat-card.green{border-top-color:var(--success)}
.cheat-card.green h4{color:var(--success)}
.cheat-card.orange{border-top-color:var(--warning)}
.cheat-card.orange h4{color:var(--warning)}
.cheat-card.pink{border-top-color:var(--accent5)}
.cheat-card.pink h4{color:var(--accent5)}
.cheat-item{display:flex;gap:10px;margin-bottom:8px;font-size:0.85em;align-items:flex-start}
.cheat-cmd{background:#0d1117;padding:2px 8px;border-radius:4px;font-family:'Fira Code',monospace;color:var(--accent2);white-space:nowrap;flex-shrink:0;font-size:0.9em}
.cheat-desc{color:var(--text2)}

/* Tabs */
.tab-container{margin:15px 0}
.tab-buttons{display:flex;gap:5px;flex-wrap:wrap;margin-bottom:15px}
.tab-btn{padding:8px 18px;background:var(--surface2);border:1px solid var(--surface3);border-radius:8px 8px 0 0;color:var(--text2);cursor:pointer;font-size:0.85em;transition:all 0.2s}
.tab-btn:hover{color:var(--text);background:var(--surface3)}
.tab-btn.active{background:var(--surface);color:var(--accent);border-bottom-color:var(--surface)}
.tab-content{display:none;animation:fadeIn 0.3s ease}
.tab-content.active{display:block}

/* Comparison Table */
.comparison-table{width:100%;border-collapse:collapse;margin:15px 0;font-size:0.9em}
.comparison-table th{background:var(--surface2);padding:12px 15px;text-align:left;color:var(--accent);border:1px solid var(--surface3)}
.comparison-table td{padding:10px 15px;border:1px solid var(--surface3);color:var(--text2)}
.comparison-table tr:nth-child(even){background:rgba(255,255,255,0.02)}

/* Diagram */
.diagram{background:#0d1117;border:1px solid #30363d;border-radius:8px;padding:20px;margin:15px 0;text-align:center;font-family:'Fira Code',monospace;font-size:0.85em;overflow-x:auto}
.diagram-box{display:inline-block;border:2px solid var(--accent);border-radius:8px;padding:10px 20px;margin:5px;color:var(--accent)}
.diagram-box.green{border-color:var(--success);color:var(--success)}
.diagram-box.orange{border-color:var(--warning);color:var(--warning)}
.diagram-box.pink{border-color:var(--accent5);color:var(--accent5)}
.diagram-arrow{color:var(--text3);margin:0 5px}

/* Score & Stats */
.stats-bar{display:flex;gap:15px;flex-wrap:wrap;margin:20px 0}
.stat-box{background:var(--surface);border:1px solid var(--surface3);border-radius:10px;padding:15px 20px;flex:1;min-width:120px;text-align:center}
.stat-box .number{font-size:2em;font-weight:bold;background:var(--gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.stat-box .label{color:var(--text2);font-size:0.8em;margin-top:3px}

/* Interactive Builder */
.builder{background:var(--surface);border:1px solid var(--surface3);border-radius:12px;overflow:hidden;margin:15px 0}
.builder-header{background:var(--surface2);padding:12px 20px;border-bottom:1px solid var(--surface3);font-weight:600;display:flex;justify-content:space-between;align-items:center}
.builder-body{display:grid;grid-template-columns:1fr 1fr;min-height:300px}
.builder-left{padding:20px;border-right:1px solid var(--surface3)}
.builder-right{padding:20px;background:#0d1117}
.builder-option{padding:8px 14px;background:var(--surface2);border:1px solid var(--surface3);border-radius:6px;margin-bottom:6px;cursor:pointer;font-size:0.85em;transition:all 0.2s;display:flex;align-items:center;gap:8px}
.builder-option:hover{border-color:var(--accent);background:rgba(33,150,243,0.05)}
.builder-option.added{border-color:var(--success);background:rgba(76,175,80,0.08)}
.builder-output{font-family:'Fira Code',monospace;font-size:0.85em;white-space:pre;line-height:1.6}

/* Flashcard */
.flashcard-container{perspective:1000px;margin:20px 0}
.flashcard{width:100%;min-height:200px;position:relative;cursor:pointer;transition:transform 0.6s;transform-style:preserve-3d}
.flashcard.flipped{transform:rotateY(180deg)}
.flashcard-face{position:absolute;width:100%;min-height:200px;backface-visibility:hidden;border-radius:12px;padding:30px;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}
.flashcard-front{background:var(--surface);border:2px solid var(--accent)}
.flashcard-back{background:var(--surface);border:2px solid var(--success);transform:rotateY(180deg)}
.flashcard-front h3{color:var(--accent);margin-bottom:10px}
.flashcard-back h3{color:var(--success);margin-bottom:10px}

/* Animations */
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
@keyframes slideIn{from{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}
.fade-in{animation:fadeIn 0.4s ease}

/* Responsive */
@media(max-width:768px){
.hero h1{font-size:1.6em}
.builder-body{grid-template-columns:1fr}
.nav-btn{padding:10px 14px;font-size:0.8em}
.concept-grid{grid-template-columns:1fr}
.cheatsheet-grid{grid-template-columns:1fr}
.main{padding:20px 12px}
}

/* Score Badge */
.score-badge{display:inline-flex;align-items:center;gap:5px;padding:4px 12px;border-radius:20px;font-size:0.8em;font-weight:bold}
.score-badge.gold{background:rgba(255,215,0,0.15);color:#FFD700}
.score-badge.silver{background:rgba(192,192,192,0.15);color:#C0C0C0}

/* Flow diagram with CSS */
.flow{display:flex;align-items:center;flex-wrap:wrap;gap:5px;margin:15px 0;justify-content:center}
.flow-box{background:var(--surface2);border:1px solid var(--surface3);padding:8px 16px;border-radius:8px;font-size:0.85em;text-align:center}
.flow-box.highlight{border-color:var(--accent);color:var(--accent)}
.flow-arrow{color:var(--text3);font-size:1.2em}

/* Accordion */
.accordion{margin:10px 0}
.accordion-item{border:1px solid var(--surface3);border-radius:8px;margin-bottom:8px;overflow:hidden}
.accordion-header{padding:14px 18px;background:var(--surface);cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background 0.2s}
.accordion-header:hover{background:var(--surface2)}
.accordion-body{padding:0 18px;max-height:0;overflow:hidden;transition:all 0.3s ease;background:var(--surface)}
.accordion-body.open{padding:15px 18px;max-height:2000px}
.accordion-icon{transition:transform 0.3s}
.accordion-item.open .accordion-icon{transform:rotate(180deg)}

/* Match exercise */
.match-container{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin:15px 0}
.match-left .match-item,.match-right .match-item{padding:10px 15px;background:var(--surface2);border:2px solid var(--surface3);border-radius:8px;margin-bottom:8px;cursor:pointer;font-size:0.85em;transition:all 0.2s}
.match-item:hover{border-color:var(--accent)}
.match-item.selected{border-color:var(--accent);background:rgba(33,150,243,0.1)}
.match-item.matched{border-color:var(--success);background:rgba(76,175,80,0.1);opacity:0.7;pointer-events:none}
.match-item.wrong{border-color:var(--danger);animation:shake 0.3s}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-5px)}75%{transform:translateX(5px)}}

/* Sandbox */
.sandbox{background:var(--surface);border:1px solid var(--surface3);border-radius:12px;overflow:hidden;margin:15px 0}
.sandbox-header{background:var(--surface2);padding:10px 18px;font-weight:600;font-size:0.9em;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--surface3)}
.sandbox-editor{min-height:200px}
.sandbox textarea{width:100%;min-height:200px;background:#0d1117;border:none;padding:15px;color:var(--text);font-family:'Fira Code',monospace;font-size:0.85em;resize:vertical;outline:none;line-height:1.6}
.sandbox-output{background:#0d1117;border-top:1px solid #30363d;padding:15px;min-height:100px;font-family:'Fira Code',monospace;font-size:0.85em;color:var(--text2)}

/* Layer visualization */
.layer-viz{margin:15px 0}
.layer{padding:10px 20px;margin:3px 0;border-radius:6px;font-size:0.85em;font-family:'Fira Code',monospace;position:relative;padding-left:40px;transition:all 0.3s}
.layer:hover{transform:translateX(5px)}
.layer::before{content:attr(data-size);position:absolute;right:15px;font-size:0.75em;color:var(--text3)}
.layer.base{background:rgba(33,150,243,0.15);border-left:4px solid var(--accent)}
.layer.mid{background:rgba(0,188,212,0.12);border-left:4px solid var(--accent2)}
.layer.top{background:rgba(76,175,80,0.12);border-left:4px solid var(--success)}
.layer .num{position:absolute;left:12px;color:var(--text3);font-size:0.8em}

/* Completion checkmark */
.section-complete{color:var(--success);font-size:0.7em;margin-left:5px}

/* Search */
.search-box{padding:8px 16px;background:var(--surface2);border:1px solid var(--surface3);border-radius:20px;color:var(--text);font-size:0.85em;outline:none;width:200px;transition:all 0.3s}
.search-box:focus{border-color:var(--accent);width:250px}
</style>
</head>
<body>

<div class="hero">
<div class="docker-whale">ğŸ³</div>
<h1>Docker & Container Orchestration</h1>
<p class="subtitle">Master containerization for your next big interview</p>
</div>

<div class="progress-container">
<div class="progress-text">
<span id="progressLabel">Progress: 0%</span>
<span id="scoreLabel">Score: 0 pts</span>
</div>
<div class="progress-bar-bg">
<div class="progress-bar-fill" id="progressBar"></div>
</div>
</div>

<nav class="nav" id="navBar">
<button class="nav-btn active" data-section="learn" onclick="showSection('learn')">ğŸ“˜ Learn Basics</button>
<button class="nav-btn" data-section="dockerfile" onclick="showSection('dockerfile')">ğŸ“„ Dockerfile</button>
<button class="nav-btn" data-section="compose" onclick="showSection('compose')">ğŸ”— Docker Compose</button>
<button class="nav-btn" data-section="deploy" onclick="showSection('deploy')">ğŸš€ Deployment</button>
<button class="nav-btn" data-section="exercises" onclick="showSection('exercises')">ğŸ’ª Exercises</button>
<button class="nav-btn" data-section="quiz" onclick="showSection('quiz')">ğŸ§  Quiz</button>
<button class="nav-btn" data-section="pitfalls" onclick="showSection('pitfalls')">âš ï¸ Pitfalls</button>
<button class="nav-btn" data-section="cheatsheet" onclick="showSection('cheatsheet')">ğŸ“‹ Cheat Sheet</button>
<button class="nav-btn" data-section="flashcards" onclick="showSection('flashcards')">ğŸƒ Flashcards</button>
</nav>

<div class="main">

<!-- =================== SECTION: LEARN BASICS =================== -->
<div class="section active" id="section-learn">
<h2 class="section-title"><span class="icon">ğŸ“˜</span> Docker & Containerization Basics</h2>

<div class="card fade-in">
<h3>ğŸ¤” What Problem Does Docker Solve?</h3>
<div class="analogy">
<div class="label">ğŸ’¡ Real-World Analogy</div>
<p>Imagine shipping goods internationally. Before <strong>shipping containers</strong>, workers loaded items individually â€” fragile items broke, things got lost. Then someone invented the <strong>standardized shipping container</strong>. Any item, any ship, any port â€” it just works.</p>
<p style="margin-top:8px"><strong>Docker does the same for software.</strong> Instead of saying "it works on my machine!", you package everything (code, dependencies, config) into a <strong>container</strong> that runs identically everywhere.</p>
</div>
</div>

<div class="concept-grid">
<div class="concept-card">
<span class="emoji">ğŸ“¦</span>
<h4>Container</h4>
<p>A lightweight, standalone package that includes everything needed to run a piece of software â€” code, runtime, libraries, settings.</p>
</div>
<div class="concept-card">
<span class="emoji">ğŸ“‹</span>
<h4>Image</h4>
<p>A read-only template/blueprint used to create containers. Like a class in OOP â€” containers are instances of images.</p>
</div>
<div class="concept-card">
<span class="emoji">ğŸ³</span>
<h4>Docker Engine</h4>
<p>The runtime that builds and runs containers. It's the core technology that makes containerization possible.</p>
</div>
<div class="concept-card">
<span class="emoji">ğŸ“„</span>
<h4>Dockerfile</h4>
<p>A text file with instructions to build a Docker image. Think of it as a recipe for your container.</p>
</div>
<div class="concept-card">
<span class="emoji">ğŸª</span>
<h4>Docker Hub</h4>
<p>A cloud registry where Docker images are stored and shared. Like npm for containers.</p>
</div>
<div class="concept-card">
<span class="emoji">ğŸ“¦</span>
<h4>Docker Compose</h4>
<p>A tool for defining and running multi-container applications using a YAML file.</p>
</div>
</div>

<div class="card">
<h3>ğŸ†š Containers vs Virtual Machines</h3>
<table class="comparison-table">
<thead>
<tr><th>Feature</th><th>Container ğŸ“¦</th><th>Virtual Machine ğŸ–¥ï¸</th></tr>
</thead>
<tbody>
<tr><td>Start time</td><td>Seconds</td><td>Minutes</td></tr>
<tr><td>Size</td><td>MBs</td><td>GBs</td></tr>
<tr><td>OS</td><td>Shares host OS kernel</td><td>Full OS per VM</td></tr>
<tr><td>Isolation</td><td>Process-level</td><td>Full hardware-level</td></tr>
<tr><td>Performance</td><td>Near-native</td><td>Overhead from hypervisor</td></tr>
<tr><td>Portability</td><td>Highly portable</td><td>Less portable</td></tr>
<tr><td>Resource usage</td><td>Lightweight</td><td>Heavy</td></tr>
</tbody>
</table>
<div class="analogy">
<div class="label">ğŸ’¡ Analogy</div>
<p><strong>VM</strong> = Each tenant builds a whole house (foundation, walls, plumbing).<br>
<strong>Container</strong> = Tenants share a building's infrastructure but have separate apartments.</p>
</div>
</div>

<div class="card">
<h3>ğŸ—ï¸ Docker Architecture</h3>
<div class="diagram">
<pre style="text-align:left;display:inline-block;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Your Application               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚Container1â”‚Container2â”‚Container3â”‚ Container4 â”‚
â”‚  Node.js â”‚  MySQL   â”‚  Redis   â”‚   Nginx    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              Docker Engine                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              Host OS (Linux)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              Hardware / Cloud               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
</div>
</div>

<div class="card">
<h3>ğŸ”§ Essential Docker Commands</h3>

<h4>Working with Images</h4>
<div class="code-block">
<span class="lang-label">Terminal</span>
<span class="code-comment"># Pull an image from Docker Hub</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> pull node:18-alpine

<span class="code-comment"># List all local images</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> images

<span class="code-comment"># Remove an image</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> rmi node:18-alpine

<span class="code-comment"># Build an image from Dockerfile</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> build <span class="code-flag">-t</span> myapp:1.0 .
</div>

<h4>Working with Containers</h4>
<div class="code-block">
<span class="lang-label">Terminal</span>
<span class="code-comment"># Run a container</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> run <span class="code-flag">-d</span> <span class="code-flag">-p</span> 3000:3000 <span class="code-flag">--name</span> myapp node:18-alpine

<span class="code-comment"># List running containers</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> ps

<span class="code-comment"># List ALL containers (including stopped)</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> ps <span class="code-flag">-a</span>

<span class="code-comment"># Stop a container</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> stop myapp

<span class="code-comment"># Remove a container</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> rm myapp

<span class="code-comment"># View container logs</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> logs <span class="code-flag">-f</span> myapp

<span class="code-comment"># Execute command inside running container</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> exec <span class="code-flag">-it</span> myapp /bin/sh
</div>

<div class="tip">
<div class="label">ğŸ’¡ Key Flags Decoded</div>
<p><code>-d</code> = detached mode (run in background)<br>
<code>-p 3000:3000</code> = map host port : container port<br>
<code>--name</code> = give the container a friendly name<br>
<code>-it</code> = interactive + TTY (for shell access)<br>
<code>-f</code> = follow (stream logs in real-time)<br>
<code>-t</code> = tag (name your image)</p>
</div>
</div>

<div class="card">
<h3>ğŸ”„ Docker Workflow</h3>
<div class="flow">
<div class="flow-box">Write Code</div>
<div class="flow-arrow">â†’</div>
<div class="flow-box highlight">Create Dockerfile</div>
<div class="flow-arrow">â†’</div>
<div class="flow-box">docker build</div>
<div class="flow-arrow">â†’</div>
<div class="flow-box highlight">Image Created</div>
<div class="flow-arrow">â†’</div>
<div class="flow-box">docker run</div>
<div class="flow-arrow">â†’</div>
<div class="flow-box highlight">Container Running ğŸ‰</div>
</div>
</div>

<div class="card">
<h3>ğŸ“ Volumes & Data Persistence</h3>
<p>Containers are <strong>ephemeral</strong> â€” data inside is lost when the container is removed. Volumes solve this.</p>

<div class="code-block">
<span class="lang-label">Terminal</span>
<span class="code-comment"># Named volume (Docker manages location)</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> run <span class="code-flag">-v</span> mydata:/app/data myapp

<span class="code-comment"># Bind mount (you specify host path)</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> run <span class="code-flag">-v</span> $(pwd)/data:/app/data myapp

<span class="code-comment"># List volumes</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> volume ls

<span class="code-comment"># Remove unused volumes</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> volume prune
</div>

<div class="warning">
<div class="label">âš ï¸ Important</div>
<p>Never store important data only inside a container. Always use volumes for databases, uploads, or any persistent data!</p>
</div>
</div>

<div class="card">
<h3>ğŸŒ Docker Networking</h3>
<div class="code-block">
<span class="lang-label">Terminal</span>
<span class="code-comment"># Create a custom network</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> network create mynetwork

<span class="code-comment"># Run containers on the same network</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> run <span class="code-flag">-d</span> <span class="code-flag">--network</span> mynetwork <span class="code-flag">--name</span> api myapi
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> run <span class="code-flag">-d</span> <span class="code-flag">--network</span> mynetwork <span class="code-flag">--name</span> db postgres

<span class="code-comment"># Now 'api' can reach 'db' by container name!</span>
<span class="code-comment"># e.g., postgres://db:5432/mydb</span>
</div>

<div class="info-box">
<div class="label">ğŸ“Œ Network Types</div>
<p><strong>bridge</strong> (default) â€” containers on same host communicate<br>
<strong>host</strong> â€” container shares host's network directly<br>
<strong>none</strong> â€” no networking<br>
<strong>overlay</strong> â€” multi-host networking for Docker Swarm</p>
</div>
</div>

<div class="btn-group">
<button class="btn btn-primary" onclick="completeSection('learn');showSection('dockerfile')">Next: Dockerfile â†’</button>
</div>
</div>

<!-- =================== SECTION: DOCKERFILE =================== -->
<div class="section" id="section-dockerfile">
<h2 class="section-title"><span class="icon">ğŸ“„</span> Dockerfile Deep Dive</h2>

<div class="card fade-in">
<h3>ğŸ“ What is a Dockerfile?</h3>
<p>A Dockerfile is a text document containing <strong>step-by-step instructions</strong> for Docker to build an image. Each instruction creates a <strong>layer</strong> in the image.</p>
<div class="analogy">
<div class="label">ğŸ’¡ Analogy</div>
<p>Think of a Dockerfile like a <strong>recipe card</strong>: start with a base ingredient (FROM), add things (COPY/RUN), set up the cooking environment (ENV/WORKDIR), and tell the chef what to make (CMD).</p>
</div>
</div>

<div class="card">
<h3>ğŸ§± Dockerfile Instructions Reference</h3>
<table class="comparison-table">
<thead>
<tr><th>Instruction</th><th>Purpose</th><th>Example</th></tr>
</thead>
<tbody>
<tr><td><code>FROM</code></td><td>Base image to start from</td><td><code>FROM node:18-alpine</code></td></tr>
<tr><td><code>WORKDIR</code></td><td>Set working directory</td><td><code>WORKDIR /app</code></td></tr>
<tr><td><code>COPY</code></td><td>Copy files from host to image</td><td><code>COPY package.json .</code></td></tr>
<tr><td><code>ADD</code></td><td>Copy + extract archives + URLs</td><td><code>ADD app.tar.gz /app</code></td></tr>
<tr><td><code>RUN</code></td><td>Execute command during build</td><td><code>RUN npm install</code></td></tr>
<tr><td><code>ENV</code></td><td>Set environment variables</td><td><code>ENV NODE_ENV=production</code></td></tr>
<tr><td><code>EXPOSE</code></td><td>Document which port the app uses</td><td><code>EXPOSE 3000</code></td></tr>
<tr><td><code>CMD</code></td><td>Default command to run</td><td><code>CMD ["node", "server.js"]</code></td></tr>
<tr><td><code>ENTRYPOINT</code></td><td>Main executable (not easily overridden)</td><td><code>ENTRYPOINT ["node"]</code></td></tr>
<tr><td><code>ARG</code></td><td>Build-time variables</td><td><code>ARG VERSION=1.0</code></td></tr>
<tr><td><code>VOLUME</code></td><td>Create mount point for data</td><td><code>VOLUME /app/data</code></td></tr>
<tr><td><code>USER</code></td><td>Set user for subsequent commands</td><td><code>USER node</code></td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3>ğŸŸ¢ Example 1: Simple Node.js Dockerfile</h3>
<div class="code-block">
<span class="lang-label">Dockerfile</span>
<span class="code-comment"># Step 1: Start from Node.js base image</span>
<span class="code-instruction">FROM</span> <span class="code-value">node:18-alpine</span>

<span class="code-comment"># Step 2: Set the working directory inside container</span>
<span class="code-instruction">WORKDIR</span> <span class="code-value">/app</span>

<span class="code-comment"># Step 3: Copy package files first (for better caching)</span>
<span class="code-instruction">COPY</span> <span class="code-value">package*.json ./</span>

<span class="code-comment"># Step 4: Install dependencies</span>
<span class="code-instruction">RUN</span> <span class="code-value">npm ci --only=production</span>

<span class="code-comment"># Step 5: Copy the rest of the source code</span>
<span class="code-instruction">COPY</span> <span class="code-value">. .</span>

<span class="code-comment"># Step 6: Document the port</span>
<span class="code-instruction">EXPOSE</span> <span class="code-value">3000</span>

<span class="code-comment"># Step 7: Define the command to run</span>
<span class="code-instruction">CMD</span> <span class="code-value">["node", "server.js"]</span>
</div>
<div class="tip">
<div class="label">ğŸ’¡ Why copy package.json first?</div>
<p>Docker caches each layer. If your source code changes but package.json hasn't, Docker skips the <code>npm install</code> step entirely! This dramatically speeds up builds.</p>
</div>
</div>

<div class="card">
<h3>ğŸ”µ Example 2: Multi-Stage Build (Production Optimized)</h3>
<div class="code-block">
<span class="lang-label">Dockerfile</span>
<span class="code-comment"># ---- Stage 1: Build ----</span>
<span class="code-instruction">FROM</span> <span class="code-value">node:18-alpine AS builder</span>
<span class="code-instruction">WORKDIR</span> <span class="code-value">/app</span>
<span class="code-instruction">COPY</span> <span class="code-value">package*.json ./</span>
<span class="code-instruction">RUN</span> <span class="code-value">npm ci</span>
<span class="code-instruction">COPY</span> <span class="code-value">. .</span>
<span class="code-instruction">RUN</span> <span class="code-value">npm run build</span>

<span class="code-comment"># ---- Stage 2: Production ----</span>
<span class="code-instruction">FROM</span> <span class="code-value">node:18-alpine AS production</span>
<span class="code-instruction">WORKDIR</span> <span class="code-value">/app</span>
<span class="code-instruction">COPY</span> <span class="code-value">package*.json ./</span>
<span class="code-instruction">RUN</span> <span class="code-value">npm ci --only=production</span>

<span class="code-comment"># Copy built files from stage 1</span>
<span class="code-instruction">COPY</span> <span class="code-value">--from=builder /app/dist ./dist</span>

<span class="code-instruction">ENV</span> <span class="code-value">NODE_ENV=production</span>
<span class="code-instruction">USER</span> <span class="code-value">node</span>
<span class="code-instruction">EXPOSE</span> <span class="code-value">3000</span>
<span class="code-instruction">CMD</span> <span class="code-value">["node", "dist/server.js"]</span>
</div>
<div class="info-box">
<div class="label">ğŸ“Œ Why Multi-Stage?</div>
<p>The final image only contains production dependencies and built code. Build tools, dev dependencies, and source files are left behind in the builder stage. This can reduce image size by <strong>50-80%</strong>!</p>
</div>
</div>

<div class="card">
<h3>ğŸ“Š Understanding Image Layers</h3>
<p>Each Dockerfile instruction creates a new layer. Docker caches layers and only rebuilds from the point of change.</p>
<div class="layer-viz">
<div class="layer base" data-size="~5MB"><span class="num">1</span>FROM alpine:3.18</div>
<div class="layer base" data-size="~80MB"><span class="num">2</span>FROM node:18-alpine (includes Node.js)</div>
<div class="layer mid" data-size="~0KB"><span class="num">3</span>WORKDIR /app</div>
<div class="layer mid" data-size="~2KB"><span class="num">4</span>COPY package*.json ./</div>
<div class="layer mid" data-size="~50MB"><span class="num">5</span>RUN npm ci</div>
<div class="layer top" data-size="~5MB"><span class="num">6</span>COPY . . (your source code)</div>
<div class="layer top" data-size="~0KB"><span class="num">7</span>CMD ["node", "server.js"]</div>
</div>
<div class="tip">
<div class="label">ğŸ’¡ Layer Caching Strategy</div>
<p>Put things that change <strong>least frequently</strong> at the top (base image, dependencies) and things that change <strong>most frequently</strong> at the bottom (source code). This maximizes cache hits!</p>
</div>
</div>

<div class="card">
<h3>ğŸ“ .dockerignore File</h3>
<p>Like <code>.gitignore</code>, this prevents unnecessary files from being sent to Docker during build.</p>
<div class="code-block">
<span class="lang-label">.dockerignore</span>
node_modules
npm-debug.log
.git
.gitignore
.env
.env.local
Dockerfile
docker-compose.yml
README.md
.vscode
coverage
.nyc_output
dist
</div>
<div class="warning">
<div class="label">âš ï¸ Always create .dockerignore!</div>
<p>Without it, <code>COPY . .</code> sends <strong>everything</strong> (including node_modules, .git, secrets) into the image. This bloats the image and may leak sensitive data.</p>
</div>
</div>

<div class="card">
<h3>ğŸ†š CMD vs ENTRYPOINT</h3>
<div class="code-block">
<span class="lang-label">Dockerfile</span>
<span class="code-comment"># CMD - can be overridden at runtime</span>
<span class="code-instruction">CMD</span> <span class="code-value">["node", "server.js"]</span>
<span class="code-comment"># docker run myapp node other.js  â† overrides CMD</span>

<span class="code-comment"># ENTRYPOINT - always runs, CMD becomes default args</span>
<span class="code-instruction">ENTRYPOINT</span> <span class="code-value">["node"]</span>
<span class="code-instruction">CMD</span> <span class="code-value">["server.js"]</span>
<span class="code-comment"># docker run myapp other.js  â† runs "node other.js"</span>
</div>
<table class="comparison-table">
<thead><tr><th>Feature</th><th>CMD</th><th>ENTRYPOINT</th></tr></thead>
<tbody>
<tr><td>Overridable?</td><td>Yes, easily</td><td>Needs --entrypoint flag</td></tr>
<tr><td>Use case</td><td>Default command/args</td><td>Main executable</td></tr>
<tr><td>Combined</td><td colspan="2">ENTRYPOINT + CMD = executable + default args</td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3>ğŸ” Security Best Practices</h3>
<div class="code-block">
<span class="lang-label">Dockerfile</span>
<span class="code-comment"># 1. Use specific image tags (never use :latest in prod)</span>
<span class="code-instruction">FROM</span> <span class="code-value">node:18.17.1-alpine3.18</span>

<span class="code-comment"># 2. Run as non-root user</span>
<span class="code-instruction">RUN</span> <span class="code-value">addgroup -g 1001 appgroup && \
    adduser -S -u 1001 -G appgroup appuser</span>
<span class="code-instruction">USER</span> <span class="code-value">appuser</span>

<span class="code-comment"># 3. Use COPY not ADD (ADD has extra features you usually don't need)</span>
<span class="code-instruction">COPY</span> <span class="code-value">. .</span>

<span class="code-comment"># 4. Don't store secrets in images â€” use runtime env vars</span>
<span class="code-comment"># BAD:  ENV API_KEY=mysecretkey123</span>
<span class="code-comment"># GOOD: pass at runtime with -e or .env file</span>
</div>
</div>

<div class="btn-group">
<button class="btn btn-outline" onclick="showSection('learn')">â† Back</button>
<button class="btn btn-primary" onclick="completeSection('dockerfile');showSection('compose')">Next: Docker Compose â†’</button>
</div>
</div>

<!-- =================== SECTION: DOCKER COMPOSE =================== -->
<div class="section" id="section-compose">
<h2 class="section-title"><span class="icon">ğŸ”—</span> Docker Compose</h2>

<div class="card fade-in">
<h3>ğŸ¤” What is Docker Compose?</h3>
<p>Docker Compose lets you define and manage <strong>multi-container applications</strong> in a single YAML file. Instead of running multiple <code>docker run</code> commands with tons of flags, you write one <code>docker-compose.yml</code>.</p>
<div class="analogy">
<div class="label">ğŸ’¡ Analogy</div>
<p>If individual <code>docker run</code> commands are like manually starting each musician in an orchestra, <strong>Docker Compose is the conductor</strong> â€” it coordinates everything at once with a single gesture.</p>
</div>
</div>

<div class="card">
<h3>ğŸŸ¢ Example 1: Full-Stack App (Node.js + MongoDB + Redis)</h3>
<div class="code-block">
<span class="lang-label">docker-compose.yml</span>
<span class="code-key">version</span>: <span class="code-string">"3.9"</span>

<span class="code-key">services</span>:
  <span class="code-service">api</span>:
    <span class="code-key">build</span>: <span class="code-string">./api</span>
    <span class="code-key">ports</span>:
      - <span class="code-string">"3000:3000"</span>
    <span class="code-key">environment</span>:
      - <span class="code-value">NODE_ENV=development</span>
      - <span class="code-value">MONGO_URL=mongodb://mongo:27017/mydb</span>
      - <span class="code-value">REDIS_URL=redis://redis:6379</span>
    <span class="code-key">volumes</span>:
      - <span class="code-string">./api:/app</span>
      - <span class="code-string">/app/node_modules</span>
    <span class="code-key">depends_on</span>:
      - <span class="code-value">mongo</span>
      - <span class="code-value">redis</span>
    <span class="code-key">restart</span>: <span class="code-value">unless-stopped</span>

  <span class="code-service">mongo</span>:
    <span class="code-key">image</span>: <span class="code-string">mongo:7</span>
    <span class="code-key">ports</span>:
      - <span class="code-string">"27017:27017"</span>
    <span class="code-key">volumes</span>:
      - <span class="code-string">mongo_data:/data/db</span>
    <span class="code-key">environment</span>:
      - <span class="code-value">MONGO_INITDB_ROOT_USERNAME=admin</span>
      - <span class="code-value">MONGO_INITDB_ROOT_PASSWORD=secret</span>

  <span class="code-service">redis</span>:
    <span class="code-key">image</span>: <span class="code-string">redis:7-alpine</span>
    <span class="code-key">ports</span>:
      - <span class="code-string">"6379:6379"</span>

<span class="code-key">volumes</span>:
  <span class="code-service">mongo_data</span>:
</div>
</div>

<div class="card">
<h3>ğŸ“– Compose File Reference</h3>
<table class="comparison-table">
<thead><tr><th>Key</th><th>Purpose</th><th>Example</th></tr></thead>
<tbody>
<tr><td><code>image</code></td><td>Use pre-built image</td><td><code>image: postgres:15</code></td></tr>
<tr><td><code>build</code></td><td>Build from Dockerfile</td><td><code>build: ./app</code></td></tr>
<tr><td><code>ports</code></td><td>Map host:container ports</td><td><code>"8080:3000"</code></td></tr>
<tr><td><code>volumes</code></td><td>Mount data/code</td><td><code>./src:/app/src</code></td></tr>
<tr><td><code>environment</code></td><td>Set env vars</td><td><code>DB_HOST=postgres</code></td></tr>
<tr><td><code>env_file</code></td><td>Load env from file</td><td><code>env_file: .env</code></td></tr>
<tr><td><code>depends_on</code></td><td>Start order</td><td><code>depends_on: [db]</code></td></tr>
<tr><td><code>restart</code></td><td>Restart policy</td><td><code>restart: always</code></td></tr>
<tr><td><code>networks</code></td><td>Custom networking</td><td><code>networks: [backend]</code></td></tr>
<tr><td><code>command</code></td><td>Override CMD</td><td><code>command: npm run dev</code></td></tr>
<tr><td><code>healthcheck</code></td><td>Container health probe</td><td>See example below</td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3>ğŸ”§ Docker Compose Commands</h3>
<div class="code-block">
<span class="lang-label">Terminal</span>
<span class="code-comment"># Start all services (build if needed)</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker compose</span> up <span class="code-flag">-d</span>

<span class="code-comment"># Start with fresh build</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker compose</span> up <span class="code-flag">-d</span> <span class="code-flag">--build</span>

<span class="code-comment"># Stop all services</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker compose</span> down

<span class="code-comment"># Stop and remove volumes (wipes data!)</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker compose</span> down <span class="code-flag">-v</span>

<span class="code-comment"># View logs</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker compose</span> logs <span class="code-flag">-f</span> api

<span class="code-comment"># Run command in service</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker compose</span> exec api npm test

<span class="code-comment"># Scale a service</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker compose</span> up <span class="code-flag">--scale</span> api=3

<span class="code-comment"># View running services</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker compose</span> ps
</div>
</div>

<div class="card">
<h3>ğŸŸ  Example 2: Development vs Production Compose</h3>
<div class="tab-container">
<div class="tab-buttons">
<button class="tab-btn active" onclick="switchTab(this,'compose-dev')">Development</button>
<button class="tab-btn" onclick="switchTab(this,'compose-prod')">Production</button>
<button class="tab-btn" onclick="switchTab(this,'compose-override')">Override Pattern</button>
</div>
<div class="tab-content active" id="compose-dev">
<div class="code-block">
<span class="lang-label">docker-compose.dev.yml</span>
<span class="code-key">version</span>: <span class="code-string">"3.9"</span>
<span class="code-key">services</span>:
  <span class="code-service">app</span>:
    <span class="code-key">build</span>:
      <span class="code-key">context</span>: <span class="code-string">.</span>
      <span class="code-key">dockerfile</span>: <span class="code-string">Dockerfile.dev</span>
    <span class="code-key">volumes</span>:
      - <span class="code-string">./src:/app/src</span>          <span class="code-comment"># Hot reload!</span>
      - <span class="code-string">/app/node_modules</span>       <span class="code-comment"># Don't overwrite</span>
    <span class="code-key">environment</span>:
      - <span class="code-value">NODE_ENV=development</span>
      - <span class="code-value">DEBUG=app:*</span>
    <span class="code-key">command</span>: <span class="code-string">npm run dev</span>       <span class="code-comment"># nodemon</span>
</div>
</div>
<div class="tab-content" id="compose-prod">
<div class="code-block">
<span class="lang-label">docker-compose.prod.yml</span>
<span class="code-key">version</span>: <span class="code-string">"3.9"</span>
<span class="code-key">services</span>:
  <span class="code-service">app</span>:
    <span class="code-key">build</span>:
      <span class="code-key">context</span>: <span class="code-string">.</span>
      <span class="code-key">dockerfile</span>: <span class="code-string">Dockerfile</span>
    <span class="code-key">environment</span>:
      - <span class="code-value">NODE_ENV=production</span>
    <span class="code-key">restart</span>: <span class="code-value">always</span>
    <span class="code-key">deploy</span>:
      <span class="code-key">resources</span>:
        <span class="code-key">limits</span>:
          <span class="code-key">memory</span>: <span class="code-value">512M</span>
          <span class="code-key">cpus</span>: <span class="code-string">"0.5"</span>
</div>
</div>
<div class="tab-content" id="compose-override">
<div class="code-block">
<span class="lang-label">Terminal</span>
<span class="code-comment"># Development</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker compose</span> <span class="code-flag">-f</span> docker-compose.yml <span class="code-flag">-f</span> docker-compose.dev.yml up

<span class="code-comment"># Production</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker compose</span> <span class="code-flag">-f</span> docker-compose.yml <span class="code-flag">-f</span> docker-compose.prod.yml up <span class="code-flag">-d</span>
</div>
</div>
</div>
</div>

<div class="card">
<h3>â¤ï¸ Health Checks</h3>
<div class="code-block">
<span class="lang-label">docker-compose.yml</span>
<span class="code-key">services</span>:
  <span class="code-service">api</span>:
    <span class="code-key">build</span>: <span class="code-string">.</span>
    <span class="code-key">healthcheck</span>:
      <span class="code-key">test</span>: [<span class="code-string">"CMD"</span>, <span class="code-string">"curl"</span>, <span class="code-string">"-f"</span>, <span class="code-string">"http://localhost:3000/health"</span>]
      <span class="code-key">interval</span>: <span class="code-value">30s</span>
      <span class="code-key">timeout</span>: <span class="code-value">10s</span>
      <span class="code-key">retries</span>: <span class="code-value">3</span>
      <span class="code-key">start_period</span>: <span class="code-value">40s</span>

  <span class="code-service">postgres</span>:
    <span class="code-key">image</span>: <span class="code-string">postgres:15</span>
    <span class="code-key">healthcheck</span>:
      <span class="code-key">test</span>: [<span class="code-string">"CMD-SHELL"</span>, <span class="code-string">"pg_isready -U postgres"</span>]
      <span class="code-key">interval</span>: <span class="code-value">5s</span>
      <span class="code-key">timeout</span>: <span class="code-value">5s</span>
      <span class="code-key">retries</span>: <span class="code-value">5</span>
</div>
</div>

<div class="card">
<h3>ğŸŒ Networking in Compose</h3>
<div class="code-block">
<span class="lang-label">docker-compose.yml</span>
<span class="code-key">services</span>:
  <span class="code-service">frontend</span>:
    <span class="code-key">networks</span>:
      - <span class="code-value">frontend-net</span>

  <span class="code-service">api</span>:
    <span class="code-key">networks</span>:
      - <span class="code-value">frontend-net</span>
      - <span class="code-value">backend-net</span>

  <span class="code-service">database</span>:
    <span class="code-key">networks</span>:
      - <span class="code-value">backend-net</span>       <span class="code-comment"># frontend CAN'T reach database!</span>

<span class="code-key">networks</span>:
  <span class="code-service">frontend-net</span>:
  <span class="code-service">backend-net</span>:
</div>
<div class="tip">
<div class="label">ğŸ’¡ Network Isolation</div>
<p>By separating networks, the frontend container cannot directly access the database â€” it must go through the API. This is a security best practice!</p>
</div>
</div>

<div class="btn-group">
<button class="btn btn-outline" onclick="showSection('dockerfile')">â† Back</button>
<button class="btn btn-primary" onclick="completeSection('compose');showSection('deploy')">Next: Deployment â†’</button>
</div>
</div>

<!-- =================== SECTION: DEPLOYMENT =================== -->
<div class="section" id="section-deploy">
<h2 class="section-title"><span class="icon">ğŸš€</span> Container Deployment</h2>

<div class="card fade-in">
<h3>ğŸŒ Deployment Options Overview</h3>
<div class="concept-grid">
<div class="concept-card">
<span class="emoji">â˜ï¸</span>
<h4>Cloud Platforms</h4>
<p>AWS ECS/Fargate, Google Cloud Run, Azure Container Instances â€” managed container hosting.</p>
</div>
<div class="concept-card">
<span class="emoji">â˜¸ï¸</span>
<h4>Kubernetes (K8s)</h4>
<p>Industry standard for orchestrating containers at scale. Complex but powerful.</p>
</div>
<div class="concept-card">
<span class="emoji">ğŸ³</span>
<h4>Docker Swarm</h4>
<p>Docker's built-in orchestration. Simpler than K8s, good for smaller deployments.</p>
</div>
<div class="concept-card">
<span class="emoji">ğŸš‚</span>
<h4>Railway/Render/Fly.io</h4>
<p>Modern PaaS that deploy Docker containers with minimal config.</p>
</div>
</div>
</div>

<div class="card">
<h3>ğŸ“‹ Production Deployment Checklist</h3>
<div class="code-block">
<span class="lang-label">Checklist</span>
âœ… Use specific image tags (not :latest)
âœ… Multi-stage builds for smaller images
âœ… Run as non-root user
âœ… Set resource limits (CPU, memory)
âœ… Health checks configured
âœ… Secrets managed properly (not in image)
âœ… .dockerignore file created
âœ… Logging configured (stdout/stderr)
âœ… Graceful shutdown handling (SIGTERM)
âœ… Container restart policies set
âœ… Volume mounts for persistent data
âœ… Network isolation between services
</div>
</div>

<div class="card">
<h3>ğŸ—ï¸ CI/CD Pipeline with Docker</h3>
<div class="flow">
<div class="flow-box">Git Push</div>
<div class="flow-arrow">â†’</div>
<div class="flow-box">CI Triggers</div>
<div class="flow-arrow">â†’</div>
<div class="flow-box highlight">Docker Build</div>
<div class="flow-arrow">â†’</div>
<div class="flow-box">Run Tests</div>
<div class="flow-arrow">â†’</div>
<div class="flow-box highlight">Push to Registry</div>
<div class="flow-arrow">â†’</div>
<div class="flow-box">Deploy</div>
</div>

<div class="code-block">
<span class="lang-label">GitHub Actions - .github/workflows/deploy.yml</span>
<span class="code-key">name</span>: <span class="code-string">Build and Deploy</span>
<span class="code-key">on</span>:
  <span class="code-key">push</span>:
    <span class="code-key">branches</span>: [<span class="code-string">main</span>]

<span class="code-key">jobs</span>:
  <span class="code-service">build-and-push</span>:
    <span class="code-key">runs-on</span>: <span class="code-value">ubuntu-latest</span>
    <span class="code-key">steps</span>:
      - <span class="code-key">uses</span>: <span class="code-value">actions/checkout@v4</span>

      - <span class="code-key">name</span>: <span class="code-string">Login to Docker Hub</span>
        <span class="code-key">uses</span>: <span class="code-value">docker/login-action@v3</span>
        <span class="code-key">with</span>:
          <span class="code-key">username</span>: <span class="code-value">${{ secrets.DOCKER_USERNAME }}</span>
          <span class="code-key">password</span>: <span class="code-value">${{ secrets.DOCKER_PASSWORD }}</span>

      - <span class="code-key">name</span>: <span class="code-string">Build and Push</span>
        <span class="code-key">uses</span>: <span class="code-value">docker/build-push-action@v5</span>
        <span class="code-key">with</span>:
          <span class="code-key">push</span>: <span class="code-value">true</span>
          <span class="code-key">tags</span>: <span class="code-value">myuser/myapp:${{ github.sha }}</span>
</div>
</div>

<div class="card">
<h3>â˜¸ï¸ Kubernetes Basics (Interview Must-Know)</h3>
<div class="code-block">
<span class="lang-label">deployment.yml</span>
<span class="code-key">apiVersion</span>: <span class="code-value">apps/v1</span>
<span class="code-key">kind</span>: <span class="code-value">Deployment</span>
<span class="code-key">metadata</span>:
  <span class="code-key">name</span>: <span class="code-value">my-node-app</span>
<span class="code-key">spec</span>:
  <span class="code-key">replicas</span>: <span class="code-number">3</span>
  <span class="code-key">selector</span>:
    <span class="code-key">matchLabels</span>:
      <span class="code-key">app</span>: <span class="code-value">my-node-app</span>
  <span class="code-key">template</span>:
    <span class="code-key">metadata</span>:
      <span class="code-key">labels</span>:
        <span class="code-key">app</span>: <span class="code-value">my-node-app</span>
    <span class="code-key">spec</span>:
      <span class="code-key">containers</span>:
        - <span class="code-key">name</span>: <span class="code-value">app</span>
          <span class="code-key">image</span>: <span class="code-string">myuser/myapp:v1.0.0</span>
          <span class="code-key">ports</span>:
            - <span class="code-key">containerPort</span>: <span class="code-number">3000</span>
          <span class="code-key">resources</span>:
            <span class="code-key">limits</span>:
              <span class="code-key">memory</span>: <span class="code-string">"256Mi"</span>
              <span class="code-key">cpu</span>: <span class="code-string">"500m"</span>
          <span class="code-key">livenessProbe</span>:
            <span class="code-key">httpGet</span>:
              <span class="code-key">path</span>: <span class="code-value">/health</span>
              <span class="code-key">port</span>: <span class="code-number">3000</span>
            <span class="code-key">initialDelaySeconds</span>: <span class="code-number">15</span>
            <span class="code-key">periodSeconds</span>: <span class="code-number">10</span>
</div>
<div class="info-box">
<div class="label">ğŸ“Œ K8s Key Concepts</div>
<p><strong>Pod</strong> â€” smallest unit, wraps one or more containers<br>
<strong>Deployment</strong> â€” manages pods, handles scaling & rolling updates<br>
<strong>Service</strong> â€” stable network endpoint to access pods<br>
<strong>Ingress</strong> â€” routes external HTTP traffic to services<br>
<strong>ConfigMap/Secret</strong> â€” externalized configuration</p>
</div>
</div>

<div class="card">
<h3>ğŸ³ Docker Swarm Quick Start</h3>
<div class="code-block">
<span class="lang-label">Terminal</span>
<span class="code-comment"># Initialize swarm mode</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> swarm init

<span class="code-comment"># Deploy a stack from compose file</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> stack deploy <span class="code-flag">-c</span> docker-compose.yml mystack

<span class="code-comment"># Scale a service</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> service scale mystack_api=5

<span class="code-comment"># View services</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> service ls

<span class="code-comment"># Rolling update</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> service update <span class="code-flag">--image</span> myapp:v2.0 mystack_api
</div>
</div>

<div class="card">
<h3>ğŸ”’ Secrets Management in Production</h3>
<div class="code-block">
<span class="lang-label">docker-compose.yml</span>
<span class="code-key">services</span>:
  <span class="code-service">api</span>:
    <span class="code-key">image</span>: <span class="code-string">myapp:latest</span>
    <span class="code-key">secrets</span>:
      - <span class="code-value">db_password</span>
      - <span class="code-value">api_key</span>
    <span class="code-key">environment</span>:
      - <span class="code-value">DB_PASSWORD_FILE=/run/secrets/db_password</span>

<span class="code-key">secrets</span>:
  <span class="code-service">db_password</span>:
    <span class="code-key">file</span>: <span class="code-string">./secrets/db_password.txt</span>
  <span class="code-service">api_key</span>:
    <span class="code-key">external</span>: <span class="code-value">true</span>
</div>
<div class="pitfall">
<div class="label">ğŸš« Never Do This</div>
<p>Never put secrets in Dockerfiles, environment variables in compose files committed to git, or build arguments. Use Docker secrets, Vault, AWS Secrets Manager, or similar tools.</p>
</div>
</div>

<div class="card">
<h3>ğŸ“Š Monitoring Containers</h3>
<div class="code-block">
<span class="lang-label">Terminal</span>
<span class="code-comment"># Real-time resource usage</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> stats

<span class="code-comment"># Inspect a container's details</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> inspect mycontainer

<span class="code-comment"># View container processes</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> top mycontainer

<span class="code-comment"># System-wide info</span>
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> system df
<span class="code-prompt">$ </span><span class="code-keyword">docker</span> system prune <span class="code-flag">-a</span>    <span class="code-comment"># Clean up everything unused</span>
</div>
</div>

<div class="btn-group">
<button class="btn btn-outline" onclick="showSection('compose')">â† Back</button>
<button class="btn btn-primary" onclick="completeSection('deploy');showSection('exercises')">Next: Exercises â†’</button>
</div>
</div>

<!-- =================== SECTION: EXERCISES =================== -->
<div class="section" id="section-exercises">
<h2 class="section-title"><span class="icon">ğŸ’ª</span> Hands-On Exercises</h2>

<div class="stats-bar">
<div class="stat-box"><div class="number" id="exercisesCompleted">0</div><div class="label">Completed</div></div>
<div class="stat-box"><div class="number">8</div><div class="label">Total</div></div>
<div class="stat-box"><div class="number" id="exerciseScore">0</div><div class="label">Points</div></div>
</div>

<!-- Exercise 1 -->
<div class="exercise" id="ex1">
<h4>Exercise 1: Write a Basic Dockerfile</h4>
<span class="difficulty easy">Easy</span>
<p>Write a Dockerfile for a Node.js Express app that:</p>
<ul>
<li>Uses node:18-alpine as base</li>
<li>Sets working directory to /app</li>
<li>Copies package.json first, runs npm install</li>
<li>Copies all source files</li>
<li>Exposes port 3000</li>
<li>Runs "node index.js"</li>
</ul>
<textarea id="ex1-input" placeholder="Write your Dockerfile here..."></textarea>
<div class="btn-group">
<button class="btn btn-primary btn-small" onclick="checkExercise(1)">Check Answer</button>
<button class="btn btn-outline btn-small" onclick="showHint(1)">Show Hint</button>
<button class="btn btn-outline btn-small" onclick="showSolution(1)">Show Solution</button>
</div>
<div id="ex1-hint" style="display:none" class="tip"><div class="label">Hint</div><p>Start with FROM, then WORKDIR, then COPY package files, RUN npm install, COPY everything, EXPOSE, and CMD.</p></div>
<div id="ex1-solution" style="display:none" class="info-box">
<div class="label">Solution</div>
<div class="code-block">FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["node", "index.js"]</div>
</div>
<div id="ex1-result"></div>
</div>

<!-- Exercise 2 -->
<div class="exercise" id="ex2">
<h4>Exercise 2: Fix the Broken Dockerfile</h4>
<span class="difficulty medium">Medium</span>
<p>This Dockerfile has 4 bugs. Find and fix them:</p>
<div class="code-block">
FROM node:latest
COPY . .
RUN npm install
WORKDIR /app
ENV API_KEY=sk-secret-key-12345
EXPOSE 3000
CMD npm start
</div>
<textarea id="ex2-input" placeholder="Write the corrected Dockerfile here..."></textarea>
<div class="btn-group">
<button class="btn btn-primary btn-small" onclick="checkExercise(2)">Check Answer</button>
<button class="btn btn-outline btn-small" onclick="showHint(2)">Show Hint</button>
<button class="btn btn-outline btn-small" onclick="showSolution(2)">Show Solution</button>
</div>
<div id="ex2-hint" style="display:none" class="tip"><div class="label">Hint</div>
<p>Issues: 1) :latest tag 2) WORKDIR should be before COPY 3) Secret in ENV 4) COPY package.json first for caching 5) CMD should use exec form</p></div>
<div id="ex2-solution" style="display:none" class="info-box">
<div class="label">Solution</div>
<div class="code-block">FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
# Don't put secrets in Dockerfile!
# Pass at runtime: docker run -e API_KEY=xxx
EXPOSE 3000
CMD ["npm", "start"]</div>
</div>
<div id="ex2-result"></div>
</div>

<!-- Exercise 3 -->
<div class="exercise" id="ex3">
<h4>Exercise 3: Write Docker Compose for a Full Stack App</h4>
<span class="difficulty medium">Medium</span>
<p>Write a docker-compose.yml with:</p>
<ul>
<li>A <strong>web</strong> service built from current directory, port 3000, depends on db</li>
<li>A <strong>db</strong> service using postgres:15, with a named volume for data persistence</li>
<li>Environment variable POSTGRES_PASSWORD=mysecret for db</li>
</ul>
<textarea id="ex3-input" placeholder="Write your docker-compose.yml here..."></textarea>
<div class="btn-group">
<button class="btn btn-primary btn-small" onclick="checkExercise(3)">Check Answer</button>
<button class="btn btn-outline btn-small" onclick="showHint(3)">Show Hint</button>
<button class="btn btn-outline btn-small" onclick="showSolution(3)">Show Solution</button>
</div>
<div id="ex3-hint" style="display:none" class="tip"><div class="label">Hint</div><p>Structure: version, services (web with build/ports/depends_on, db with image/environment/volumes), then top-level volumes.</p></div>
<div id="ex3-solution" style="display:none" class="info-box">
<div class="label">Solution</div>
<div class="code-block">version: "3.9"
services:
  web:
    build: .
    ports:
      - "3000:3000"
    depends_on:
      - db
    environment:
      - DATABASE_URL=postgres://postgres:mysecret@db:5432/app

  db:
    image: postgres:15
    environment:
      - POSTGRES_PASSWORD=mysecret
    volumes:
      - pgdata:/var/lib/postgresql/data

volumes:
  pgdata:</div>
</div>
<div id="ex3-result"></div>
</div>

<!-- Exercise 4 -->
<div class="exercise" id="ex4">
<h4>Exercise 4: Multi-Stage Dockerfile</h4>
<span class="difficulty hard">Hard</span>
<p>Write a multi-stage Dockerfile for a React app that:</p>
<ul>
<li>Stage 1 "builder": Uses node:18-alpine, installs deps, runs npm run build</li>
<li>Stage 2: Uses nginx:alpine, copies built files from stage 1 to /usr/share/nginx/html</li>
<li>Exposes port 80</li>
</ul>
<textarea id="ex4-input" placeholder="Write your multi-stage Dockerfile here..."></textarea>
<div class="btn-group">
<button class="btn btn-primary btn-small" onclick="checkExercise(4)">Check Answer</button>
<button class="btn btn-outline btn-small" onclick="showHint(4)">Show Hint</button>
<button class="btn btn-outline btn-small" onclick="showSolution(4)">Show Solution</button>
</div>
<div id="ex4-hint" style="display:none" class="tip"><div class="label">Hint</div><p>Use "FROM ... AS builder" for stage 1, then new "FROM nginx:alpine" for stage 2. Use "COPY --from=builder" to copy built files.</p></div>
<div id="ex4-solution" style="display:none" class="info-box">
<div class="label">Solution</div>
<div class="code-block"># Stage 1: Build
FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

# Stage 2: Serve
FROM nginx:alpine
COPY --from=builder /app/build /usr/share/nginx/html
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]</div>
</div>
<div id="ex4-result"></div>
</div>

<!-- Exercise 5 -->
<div class="exercise" id="ex5">
<h4>Exercise 5: Docker Commands Challenge</h4>
<span class="difficulty easy">Easy</span>
<p>Write the Docker command to:</p>
<ol>
<li>Build an image tagged "myapi:v2" from current directory</li>
<li>Run it in detached mode, mapping port 8080 to 3000, named "prod-api"</li>
<li>View its logs in real-time</li>
<li>Open a shell inside the running container</li>
</ol>
<textarea id="ex5-input" placeholder="Write your commands here (one per line)..."></textarea>
<div class="btn-group">
<button class="btn btn-primary btn-small" onclick="checkExercise(5)">Check Answer</button>
<button class="btn btn-outline btn-small" onclick="showSolution(5)">Show Solution</button>
</div>
<div id="ex5-solution" style="display:none" class="info-box">
<div class="label">Solution</div>
<div class="code-block">docker build -t myapi:v2 .
docker run -d -p 8080:3000 --name prod-api myapi:v2
docker logs -f prod-api
docker exec -it prod-api /bin/sh</div>
</div>
<div id="ex5-result"></div>
</div>

<!-- Exercise 6 -->
<div class="exercise" id="ex6">
<h4>Exercise 6: Write a .dockerignore</h4>
<span class="difficulty easy">Easy</span>
<p>Write a .dockerignore file for a Node.js project. What files/folders should you exclude?</p>
<textarea id="ex6-input" placeholder="Write your .dockerignore contents here..."></textarea>
<div class="btn-group">
<button class="btn btn-primary btn-small" onclick="checkExercise(6)">Check Answer</button>
<button class="btn btn-outline btn-small" onclick="showSolution(6)">Show Solution</button>
</div>
<div id="ex6-solution" style="display:none" class="info-box">
<div class="label">Solution</div>
<div class="code-block">node_modules
npm-debug.log*
.git
.gitignore
.env
.env.*
Dockerfile
docker-compose*.yml
README.md
.vscode
.idea
coverage
.nyc_output
dist
*.md</div>
</div>
<div id="ex6-result"></div>
</div>

<!-- Exercise 7 -->
<div class="exercise" id="ex7">
<h4>Exercise 7: Networking & Communication</h4>
<span class="difficulty medium">Medium</span>
<p>You have a compose file with services named "api" and "postgres". In your Node.js connection string, what hostname do you use to connect to postgres? What about port mapping?</p>
<textarea id="ex7-input" placeholder="Write the connection string and explain..."></textarea>
<div class="btn-group">
<button class="btn btn-primary btn-small" onclick="checkExercise(7)">Check Answer</button>
<button class="btn btn-outline btn-small" onclick="showSolution(7)">Show Solution</button>
</div>
<div id="ex7-solution" style="display:none" class="info-box">
<div class="label">Solution</div>
<p>Use the <strong>service name</strong> as the hostname:</p>
<div class="code-block">postgres://user:password@postgres:5432/mydb</div>
<p>Inside a Docker network, containers reach each other by service name. You use the <strong>container's internal port</strong> (5432), NOT any mapped host port. Port mapping (e.g., "5433:5432") is only for accessing from the host machine.</p>
</div>
<div id="ex7-result"></div>
</div>

<!-- Exercise 8 -->
<div class="exercise" id="ex8">
<h4>Exercise 8: Optimize This Dockerfile</h4>
<span class="difficulty hard">Hard</span>
<p>Optimize this Dockerfile for production â€” identify all issues and rewrite it:</p>
<div class="code-block">FROM node:latest
WORKDIR /app
COPY . .
RUN npm install
RUN apt-get update && apt-get install -y curl vim
ENV NODE_ENV=production
EXPOSE 3000
USER root
CMD node server.js</div>
<textarea id="ex8-input" placeholder="Write the optimized Dockerfile here..."></textarea>
<div class="btn-group">
<button class="btn btn-primary btn-small" onclick="checkExercise(8)">Check Answer</button>
<button class="btn btn-outline btn-small" onclick="showHint(8)">Show Hint</button>
<button class="btn btn-outline btn-small" onclick="showSolution(8)">Show Solution</button>
</div>
<div id="ex8-hint" style="display:none" class="tip"><div class="label">Hint</div><p>Issues: latest tag, no .dockerignore strategy, copy before install, dev deps in prod, unnecessary packages (vim), running as root, shell form CMD, package.json not copied first.</p></div>
<div id="ex8-solution" style="display:none" class="info-box">
<div class="label">Solution</div>
<div class="code-block">FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production && npm cache clean --force
COPY --from=builder /app/dist ./dist
ENV NODE_ENV=production
RUN addgroup -g 1001 appgroup && \
    adduser -S -u 1001 -G appgroup appuser
USER appuser
EXPOSE 3000
CMD ["node", "dist/server.js"]</div>
<p>Improvements: specific tag, alpine for smaller size, multi-stage build, npm ci over npm install, production deps only, no unnecessary packages, non-root user, exec-form CMD, layer caching with package.json first.</p>
</div>
<div id="ex8-result"></div>
</div>

<div class="btn-group">
<button class="btn btn-outline" onclick="showSection('deploy')">â† Back</button>
<button class="btn btn-primary" onclick="completeSection('exercises');showSection('quiz')">Next: Quiz â†’</button>
</div>
</div>

<!-- =================== SECTION: QUIZ =================== -->
<div class="section" id="section-quiz">
<h2 class="section-title"><span class="icon">ğŸ§ </span> Knowledge Quiz</h2>

<div class="stats-bar">
<div class="stat-box"><div class="number" id="quizCorrect">0</div><div class="label">Correct</div></div>
<div class="stat-box"><div class="number" id="quizTotal">0</div><div class="label">Answered</div></div>
<div class="stat-box"><div class="number" id="quizPercent">0%</div><div class="label">Accuracy</div></div>
</div>

<div class="quiz-container" id="quizContainer"></div>

<div class="btn-group">
<button class="btn btn-warning" onclick="resetQuiz()">ğŸ”„ Reset Quiz</button>
<button class="btn btn-primary" onclick="completeSection('quiz');showSection('pitfalls')">Next: Pitfalls â†’</button>
</div>
</div>

<!-- =================== SECTION: PITFALLS =================== -->
<div class="section" id="section-pitfalls">
<h2 class="section-title"><span class="icon">âš ï¸</span> Common Mistakes & Pitfalls</h2>

<div class="card fade-in">
<h3>ğŸ”´ Pitfall #1: Using <code>:latest</code> Tag</h3>
<div class="pitfall">
<div class="label">âŒ Bad</div>
<div class="code-block">FROM node:latest</div>
<p>The <code>:latest</code> tag changes over time. Your build might work today but break tomorrow when a new version is published.</p>
</div>
<div class="tip">
<div class="label">âœ… Good</div>
<div class="code-block">FROM node:18.17.1-alpine3.18</div>
<p>Pin to a specific version. Even better, use the SHA digest for maximum reproducibility.</p>
</div>
</div>

<div class="card">
<h3>ğŸ”´ Pitfall #2: Not Leveraging Layer Caching</h3>
<div class="pitfall">
<div class="label">âŒ Bad - Busts cache every time code changes</div>
<div class="code-block">COPY . .
RUN npm install</div>
</div>
<div class="tip">
<div class="label">âœ… Good - Only reinstalls when dependencies change</div>
<div class="code-block">COPY package*.json ./
RUN npm ci
COPY . .</div>
</div>
</div>

<div class="card">
<h3>ğŸ”´ Pitfall #3: Running as Root</h3>
<div class="pitfall">
<div class="label">âŒ Bad</div>
<p>By default, containers run as root. If an attacker breaks into your container, they have root access!</p>
</div>
<div class="tip">
<div class="label">âœ… Good</div>
<div class="code-block">RUN addgroup -g 1001 appgroup && \
    adduser -S -u 1001 -G appgroup appuser
USER appuser</div>
</div>
</div>

<div class="card">
<h3>ğŸ”´ Pitfall #4: Storing Secrets in Images</h3>
<div class="pitfall">
<div class="label">âŒ Bad - Secrets baked into image layers forever</div>
<div class="code-block">ENV API_KEY=sk-12345-secret
ARG DB_PASSWORD=mysupersecret
RUN echo "password=secret" > /app/.env</div>
</div>
<div class="tip">
<div class="label">âœ… Good - Pass at runtime</div>
<div class="code-block"># At runtime:
docker run -e API_KEY=$API_KEY myapp

# Or use Docker secrets / .env file (not in image):
docker run --env-file .env myapp</div>
</div>
</div>

<div class="card">
<h3>ğŸ”´ Pitfall #5: Ignoring .dockerignore</h3>
<div class="pitfall">
<div class="label">âŒ Bad</div>
<p>Without .dockerignore, <code>COPY . .</code> sends node_modules (hundreds of MBs), .git history, .env files with secrets, and all development files into your image.</p>
</div>
<div class="tip">
<div class="label">âœ… Good</div>
<p>Always create a .dockerignore file. It speeds up builds and prevents sensitive data leakage.</p>
</div>
</div>

<div class="card">
<h3>ğŸ”´ Pitfall #6: Using ADD Instead of COPY</h3>
<div class="pitfall">
<div class="label">âŒ Avoid</div>
<div class="code-block">ADD . /app
ADD https://example.com/file.tar.gz /app/</div>
<p><code>ADD</code> has implicit behaviors (auto-extracting archives, fetching URLs) that can lead to surprises.</p>
</div>
<div class="tip">
<div class="label">âœ… Prefer</div>
<div class="code-block">COPY . /app
RUN curl -o file.tar.gz https://example.com/file.tar.gz && \
    tar -xzf file.tar.gz && rm file.tar.gz</div>
<p>Use COPY for files. Use RUN with explicit commands for downloads.</p>
</div>
</div>

<div class="card">
<h3>ğŸ”´ Pitfall #7: Not Handling Graceful Shutdown</h3>
<div class="pitfall">
<div class="label">âŒ Bad - Shell form doesn't receive signals</div>
<div class="code-block">CMD npm start</div>
<p>Shell form wraps command in <code>/bin/sh -c</code>, which doesn't forward SIGTERM. Your app won't shut down gracefully!</p>
</div>
<div class="tip">
<div class="label">âœ… Good - Exec form receives signals directly</div>
<div class="code-block">CMD ["node", "server.js"]

# In your Node.js code:
process.on('SIGTERM', () => {
  server.close(() => process.exit(0));
});</div>
</div>
</div>

<div class="card">
<h3>ğŸ”´ Pitfall #8: One Process Per Container Violation</h3>
<div class="pitfall">
<div class="label">âŒ Bad</div>
<div class="code-block"># Running multiple services in one container
CMD service nginx start && node server.js && redis-server</div>
</div>
<div class="tip">
<div class="label">âœ… Good</div>
<p>Each container should run <strong>one process</strong>. Use Docker Compose to orchestrate multiple services.</p>
</div>
</div>

<div class="card">
<h3>ğŸ”´ Pitfall #9: depends_on Doesn't Wait for Ready</h3>
<div class="pitfall">
<div class="label">âŒ Common Misconception</div>
<div class="code-block">depends_on:
  - db   # Only waits for container to START, not for DB to be READY!</div>
</div>
<div class="tip">
<div class="label">âœ… Solution</div>
<p>Use health checks with condition, or add retry logic in your application:</p>
<div class="code-block">depends_on:
  db:
    condition: service_healthy</div>
</div>
</div>

<div class="card">
<h3>ğŸ”´ Pitfall #10: Forgetting to Clean Up</h3>
<div class="pitfall">
<div class="label">âŒ Bad - Wasted disk space</div>
<p>Docker images, containers, volumes, and networks accumulate over time.</p>
</div>
<div class="tip">
<div class="label">âœ… Good - Regular cleanup</div>
<div class="code-block">docker system prune -a     # Remove all unused data
docker volume prune        # Remove unused volumes
docker image prune -a      # Remove unused images</div>
</div>
</div>

<div class="btn-group">
<button class="btn btn-outline" onclick="showSection('quiz')">â† Back</button>
<button class="btn btn-primary" onclick="completeSection('pitfalls');showSection('cheatsheet')">Next: Cheat Sheet â†’</button>
</div>
</div>

<!-- =================== SECTION: CHEAT SHEET =================== -->
<div class="section" id="section-cheatsheet">
<h2 class="section-title"><span class="icon">ğŸ“‹</span> Docker Cheat Sheet</h2>

<div class="cheatsheet-grid">
<div class="cheat-card">
<h4>ğŸ–¼ï¸ Image Commands</h4>
<div class="cheat-item"><span class="cheat-cmd">docker build -t name:tag .</span><span class="cheat-desc">Build image</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker images</span><span class="cheat-desc">List images</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker pull image:tag</span><span class="cheat-desc">Download image</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker push image:tag</span><span class="cheat-desc">Upload to registry</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker rmi image</span><span class="cheat-desc">Remove image</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker tag old new</span><span class="cheat-desc">Tag/rename image</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker history image</span><span class="cheat-desc">Show layers</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker image prune</span><span class="cheat-desc">Remove unused</span></div>
</div>

<div class="cheat-card green">
<h4>ğŸ“¦ Container Commands</h4>
<div class="cheat-item"><span class="cheat-cmd">docker run -d -p H:C img</span><span class="cheat-desc">Run container</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker ps</span><span class="cheat-desc">List running</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker ps -a</span><span class="cheat-desc">List all</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker stop name</span><span class="cheat-desc">Stop gracefully</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker kill name</span><span class="cheat-desc">Force stop</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker rm name</span><span class="cheat-desc">Remove container</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker logs -f name</span><span class="cheat-desc">Stream logs</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker exec -it name sh</span><span class="cheat-desc">Shell into container</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker inspect name</span><span class="cheat-desc">Full details (JSON)</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker stats</span><span class="cheat-desc">Resource usage</span></div>
</div>

<div class="cheat-card orange">
<h4>ğŸ“‚ Volume Commands</h4>
<div class="cheat-item"><span class="cheat-cmd">docker volume create name</span><span class="cheat-desc">Create volume</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker volume ls</span><span class="cheat-desc">List volumes</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker volume rm name</span><span class="cheat-desc">Remove volume</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker volume prune</span><span class="cheat-desc">Remove unused</span></div>
<div class="cheat-item"><span class="cheat-cmd">-v name:/path</span><span class="cheat-desc">Named volume</span></div>
<div class="cheat-item"><span class="cheat-cmd">-v ./host:/container</span><span class="cheat-desc">Bind mount</span></div>
</div>

<div class="cheat-card pink">
<h4>ğŸŒ Network Commands</h4>
<div class="cheat-item"><span class="cheat-cmd">docker network create n</span><span class="cheat-desc">Create network</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker network ls</span><span class="cheat-desc">List networks</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker network rm n</span><span class="cheat-desc">Remove network</span></div>
<div class="cheat-item"><span class="cheat-cmd">--network name</span><span class="cheat-desc">Connect to network</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker network inspect n</span><span class="cheat-desc">Network details</span></div>
</div>

<div class="cheat-card">
<h4>ğŸ”— Docker Compose Commands</h4>
<div class="cheat-item"><span class="cheat-cmd">docker compose up -d</span><span class="cheat-desc">Start all services</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker compose down</span><span class="cheat-desc">Stop & remove</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker compose down -v</span><span class="cheat-desc">...and delete volumes</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker compose build</span><span class="cheat-desc">Build images</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker compose logs -f</span><span class="cheat-desc">Stream all logs</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker compose exec svc cmd</span><span class="cheat-desc">Run in service</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker compose ps</span><span class="cheat-desc">List services</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker compose --scale s=N</span><span class="cheat-desc">Scale service</span></div>
</div>

<div class="cheat-card green">
<h4>ğŸ“„ Dockerfile Instructions</h4>
<div class="cheat-item"><span class="cheat-cmd">FROM image:tag</span><span class="cheat-desc">Base image</span></div>
<div class="cheat-item"><span class="cheat-cmd">WORKDIR /path</span><span class="cheat-desc">Set directory</span></div>
<div class="cheat-item"><span class="cheat-cmd">COPY src dest</span><span class="cheat-desc">Copy files</span></div>
<div class="cheat-item"><span class="cheat-cmd">RUN command</span><span class="cheat-desc">Execute at build</span></div>
<div class="cheat-item"><span class="cheat-cmd">ENV KEY=value</span><span class="cheat-desc">Set env var</span></div>
<div class="cheat-item"><span class="cheat-cmd">EXPOSE port</span><span class="cheat-desc">Document port</span></div>
<div class="cheat-item"><span class="cheat-cmd">CMD ["exec","args"]</span><span class="cheat-desc">Default command</span></div>
<div class="cheat-item"><span class="cheat-cmd">ENTRYPOINT ["exec"]</span><span class="cheat-desc">Main executable</span></div>
<div class="cheat-item"><span class="cheat-cmd">USER username</span><span class="cheat-desc">Switch user</span></div>
<div class="cheat-item"><span class="cheat-cmd">ARG NAME=default</span><span class="cheat-desc">Build-time var</span></div>
<div class="cheat-item"><span class="cheat-cmd">VOLUME /path</span><span class="cheat-desc">Mount point</span></div>
</div>

<div class="cheat-card orange">
<h4>ğŸ§¹ Cleanup Commands</h4>
<div class="cheat-item"><span class="cheat-cmd">docker system prune</span><span class="cheat-desc">Remove unused data</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker system prune -a</span><span class="cheat-desc">Remove ALL unused</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker system df</span><span class="cheat-desc">Disk usage</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker rm $(docker ps -aq)</span><span class="cheat-desc">Remove all containers</span></div>
<div class="cheat-item"><span class="cheat-cmd">docker rmi $(docker images -q)</span><span class="cheat-desc">Remove all images</span></div>
</div>

<div class="cheat-card pink">
<h4>ğŸƒ Common Run Flags</h4>
<div class="cheat-item"><span class="cheat-cmd">-d</span><span class="cheat-desc">Detached (background)</span></div>
<div class="cheat-item"><span class="cheat-cmd">-p 8080:3000</span><span class="cheat-desc">Port mapping</span></div>
<div class="cheat-item"><span class="cheat-cmd">--name myapp</span><span class="cheat-desc">Container name</span></div>
<div class="cheat-item"><span class="cheat-cmd">-e KEY=val</span><span class="cheat-desc">Environment var</span></div>
<div class="cheat-item"><span class="cheat-cmd">--env-file .env</span><span class="cheat-desc">Env from file</span></div>
<div class="cheat-item"><span class="cheat-cmd">-v vol:/path</span><span class="cheat-desc">Volume mount</span></div>
<div class="cheat-item"><span class="cheat-cmd">--network net</span><span class="cheat-desc">Network</span></div>
<div class="cheat-item"><span class="cheat-cmd">--rm</span><span class="cheat-desc">Auto-remove on stop</span></div>
<div class="cheat-item"><span class="cheat-cmd">--restart always</span><span class="cheat-desc">Restart policy</span></div>
<div class="cheat-item"><span class="cheat-cmd">-it</span><span class="cheat-desc">Interactive + TTY</span></div>
</div>
</div>

<div class="btn-group">
<button class="btn btn-outline" onclick="showSection('pitfalls')">â† Back</button>
<button class="btn btn-primary" onclick="completeSection('cheatsheet');showSection('flashcards')">Next: Flashcards â†’</button>
</div>
</div>

<!-- =================== SECTION: FLASHCARDS =================== -->
<div class="section" id="section-flashcards">
<h2 class="section-title"><span class="icon">ğŸƒ</span> Interview Flashcards</h2>

<p style="color:var(--text2);margin-bottom:20px">Click cards to flip. Use arrows to navigate. These cover the most common Docker interview questions.</p>

<div style="text-align:center;margin-bottom:15px">
<span id="flashcardCounter" style="color:var(--text2)">Card 1 of 15</span>
</div>

<div class="flashcard-container" id="flashcardContainer">
<div class="flashcard" id="flashcard" onclick="flipCard()">
<div class="flashcard-face flashcard-front">
<h3 id="flashFrontTitle">Loading...</h3>
<p id="flashFrontText" style="color:var(--text2)"></p>
<p style="color:var(--text3);font-size:0.8em;margin-top:15px">Click to reveal answer</p>
</div>
<div class="flashcard-face flashcard-back">
<h3>Answer</h3>
<p id="flashBackText" style="color:var(--text2);text-align:left"></p>
</div>
</div>
</div>

<div class="btn-group" style="justify-content:center;margin-top:20px">
<button class="btn btn-outline" onclick="prevCard()">â† Previous</button>
<button class="btn btn-primary" onclick="nextCard()">Next â†’</button>
<button class="btn btn-success" onclick="shuffleCards()">ğŸ”€ Shuffle</button>
</div>

<div class="btn-group" style="margin-top:30px">
<button class="btn btn-outline" onclick="showSection('cheatsheet')">â† Back</button>
<button class="btn btn-success" onclick="completeSection('flashcards')">âœ… Mark Complete</button>
</div>
</div>

</div><!-- end main -->

<script>
// =================== STATE ===================
const state = {
  completedSections: new Set(),
  quizAnswers: {},
  quizCorrect: 0,
  quizTotal: 0,
  exercisesCompleted: 0,
  score: 0,
  currentFlashcard: 0
};

// =================== NAVIGATION ===================
function showSection(sectionId) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('section-' + sectionId).classList.add('active');
  document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');
  window.scrollTo({top: 0, behavior: 'smooth'});
}

function completeSection(name) {
  state.completedSections.add(name);
  updateProgress();
  const btn = document.querySelector(`[data-section="${name}"]`);
  if (btn && !btn.querySelector('.section-complete')) {
    btn.innerHTML += '<span class="section-complete">âœ“</span>';
  }
}

function updateProgress() {
  const total = 9;
  const pct = Math.round((state.completedSections.size / total) * 100);
  document.getElementById('progressBar').style.width = pct + '%';
  document.getElementById('progressLabel').textContent = `Progress: ${pct}%`;
  document.getElementById('scoreLabel').textContent = `Score: ${state.score} pts`;
}

// =================== TABS ===================
function switchTab(btn, tabId) {
  const container = btn.closest('.tab-container') || btn.closest('.card');
  container.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  container.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById(tabId).classList.add('active');
}

// =================== EXERCISES ===================
const exerciseChecks = {
  1: (input) => {
    const lower = input.toLowerCase();
    return lower.includes('from') && lower.includes('node') && lower.includes('alpine') &&
           lower.includes('workdir') && lower.includes('copy') && lower.includes('package') &&
           lower.includes('npm') && (lower.includes('install') || lower.includes('ci')) &&
           lower.includes('expose') && lower.includes('3000') && lower.includes('cmd');
  },
  2: (input) => {
    const lower = input.toLowerCase();
    return !lower.includes(':latest') && lower.includes('workdir') &&
           lower.includes('copy package') && !lower.includes('api_key=') &&
           lower.includes('cmd');
  },
  3: (input) => {
    const lower = input.toLowerCase();
    return lower.includes('services') && lower.includes('web') && lower.includes('db') &&
           lower.includes('build') && lower.includes('postgres') &&
           lower.includes('depends_on') && lower.includes('volumes');
  },
  4: (input) => {
    const lower = input.toLowerCase();
    return lower.includes('as builder') && lower.includes('nginx') &&
           lower.includes('--from=builder') && lower.includes('npm run build') &&
           lower.includes('expose') && lower.includes('80');
  },
  5: (input) => {
    const lower = input.toLowerCase();
    return lower.includes('docker build') && lower.includes('-t') && lower.includes('myapi:v2') &&
           lower.includes('docker run') && lower.includes('-d') && lower.includes('8080:3000') &&
           lower.includes('docker logs') && lower.includes('docker exec');
  },
  6: (input) => {
    const lower = input.toLowerCase();
    return lower.includes('node_modules') && lower.includes('.git') &&
           (lower.includes('.env') || lower.includes('env'));
  },
  7: (input) => {
    const lower = input.toLowerCase();
    return lower.includes('postgres') && (lower.includes('service name') || lower.includes('hostname') ||
           lower.includes('@postgres:') || lower.includes('5432'));
  },
  8: (input) => {
    const lower = input.toLowerCase();
    return lower.includes('alpine') && !lower.includes(':latest') &&
           lower.includes('user') && !lower.includes('user root') &&
           lower.includes('copy package') && lower.includes('cmd [');
  }
};

function checkExercise(num) {
  const input = document.getElementById(`ex${num}-input`).value.trim();
  const resultEl = document.getElementById(`ex${num}-result`);

  if (!input) {
    resultEl.innerHTML = '<div class="warning" style="margin-top:10px"><div class="label">âš ï¸</div><p>Please write your answer first!</p></div>';
    return;
  }

  if (exerciseChecks[num](input)) {
    resultEl.innerHTML = '<div class="tip" style="margin-top:10px"><div class="label">âœ… Great Job!</div><p>Your answer looks correct! Check the solution to compare approaches.</p></div>';
    state.exercisesCompleted++;
    state.score += 10;
    document.getElementById('exercisesCompleted').textContent = state.exercisesCompleted;
    document.getElementById('exerciseScore').textContent = state.score;
    updateProgress();
  } else {
    resultEl.innerHTML = '<div class="pitfall" style="margin-top:10px"><div class="label">âŒ Not Quite</div><p>Something seems missing or incorrect. Check the hint or solution for guidance.</p></div>';
  }
}

function showHint(num) {
  document.getElementById(`ex${num}-hint`).style.display = 'block';
}

function showSolution(num) {
  document.getElementById(`ex${num}-solution`).style.display = 'block';
}

// =================== QUIZ ===================
const quizData = [
  {
    q: "What is the difference between a Docker image and a container?",
    options: [
      "They are the same thing",
      "An image is a running instance of a container",
      "An image is a read-only template; a container is a running instance of an image",
      "A container is stored on Docker Hub; an image runs locally"
    ],
    correct: 2,
    explanation: "An image is like a class/blueprint (read-only). A container is an instance created from that image (running process). You can create many containers from one image."
  },
  {
    q: "What does the -d flag do in 'docker run -d myapp'?",
    options: [
      "Deletes the container after it stops",
      "Runs the container in debug mode",
      "Runs the container in detached (background) mode",
      "Downloads the image first"
    ],
    correct: 2,
    explanation: "The -d flag runs the container in detached mode, meaning it runs in the background and you get your terminal back. Use 'docker logs' to see its output."
  },
  {
    q: "Why should you copy package.json before copying source code in a Dockerfile?",
    options: [
      "Docker requires it in that order",
      "To leverage Docker's layer caching â€” dependencies only reinstall when package.json changes",
      "It's just a convention with no practical benefit",
      "To prevent security vulnerabilities"
    ],
    correct: 1,
    explanation: "Docker caches each layer. If you copy everything at once, any source code change invalidates the cache and forces a full npm install. By copying package.json first, npm install is cached until dependencies actually change."
  },
  {
    q: "What is the purpose of a multi-stage Docker build?",
    options: [
      "To run multiple containers simultaneously",
      "To create smaller, production-optimized images by leaving build tools behind",
      "To enable horizontal scaling",
      "To support multiple operating systems"
    ],
    correct: 1,
    explanation: "Multi-stage builds use multiple FROM statements. Build tools and dev dependencies stay in earlier stages. Only the necessary artifacts are copied to the final, slim production image."
  },
  {
    q: "In Docker Compose, what does depends_on actually guarantee?",
    options: [
      "The dependent service is fully initialized and ready to accept connections",
      "The dependent service container has started (not necessarily ready)",
      "The dependent service has passed its health check",
      "The services start simultaneously"
    ],
    correct: 1,
    explanation: "depends_on only guarantees the container has STARTED, not that the service inside is ready. A database container might start but take seconds to initialize. Use healthchecks with 'condition: service_healthy' for proper readiness checking."
  },
  {
    q: "What's wrong with 'FROM node:latest' in production?",
    options: [
      "Nothing, it's the recommended approach",
      "The :latest tag is immutable and never changes",
      "The :latest tag changes over time, making builds non-reproducible",
      "It downloads the largest possible image"
    ],
    correct: 2,
    explanation: ":latest is a moving target. Your image might build fine today but break tomorrow when a new Node.js version is tagged as latest. Always pin specific versions like node:18.17.1-alpine."
  },
  {
    q: "How do containers on the same Docker network communicate?",
    options: [
      "By IP address only",
      "By container name as hostname",
      "They cannot communicate with each other",
      "Only through the host machine's network"
    ],
    correct: 1,
    explanation: "Docker provides built-in DNS. Containers on the same network can reach each other using the container name (or service name in Compose) as the hostname. For example: postgres://db:5432/mydb"
  },
  {
    q: "What is the difference between CMD and ENTRYPOINT?",
    options: [
      "They are identical in function",
      "CMD sets the default command (easily overridden); ENTRYPOINT sets the main executable (not easily overridden)",
      "ENTRYPOINT only works in Docker Compose",
      "CMD runs at build time; ENTRYPOINT runs at runtime"
    ],
    correct: 1,
    explanation: "CMD provides default arguments that can be easily overridden at 'docker run'. ENTRYPOINT defines the main executable. When used together, CMD provides default arguments to ENTRYPOINT."
  },
  {
    q: "Why should containers run as a non-root user?",
    options: [
      "Root doesn't work in containers",
      "It makes the container faster",
      "Security: if an attacker breaks in, they have limited privileges",
      "Docker Hub requires it"
    ],
    correct: 2,
    explanation: "Running as root inside a container means an attacker exploiting a vulnerability gets root access. This is especially dangerous with certain host mount configurations. Always use USER instruction to switch to a non-root user."
  },
  {
    q: "What's the difference between 'docker compose up' and 'docker compose up --build'?",
    options: [
      "No difference",
      "'up' uses cached images; '--build' forces a rebuild of all images",
      "'--build' starts more containers",
      "'--build' only builds without starting"
    ],
    correct: 1,
    explanation: "'docker compose up' reuses existing images if they exist. '--build' forces Docker to rebuild images from Dockerfiles, picking up code changes. Use '--build' when you've modified source code or Dockerfiles."
  },
  {
    q: "What does EXPOSE in a Dockerfile actually do?",
    options: [
      "Opens the port and makes it accessible from outside",
      "Documents which port the app listens on (doesn't actually publish it)",
      "Blocks all other ports",
      "Maps the port to the same host port automatically"
    ],
    correct: 1,
    explanation: "EXPOSE is purely documentation. It tells other developers which port the containerized app uses. To actually make the port accessible, you need '-p' flag with docker run or 'ports' in docker-compose.yml."
  },
  {
    q: "What happens to data inside a container when it's removed?",
    options: [
      "It persists automatically",
      "It's saved to Docker Hub",
      "It's lost forever unless stored in a volume",
      "It's backed up to the host system"
    ],
    correct: 2,
    explanation: "Containers are ephemeral. When you 'docker rm' a container, all data inside is gone. Use Docker volumes or bind mounts to persist data beyond the container's lifecycle."
  },
  {
    q: "What's the preferred format for CMD in a Dockerfile?",
    options: [
      "Shell form: CMD npm start",
      "Exec form: CMD [\"npm\", \"start\"]",
      "Both are equally good",
      "Inline form: CMD = npm start"
    ],
    correct: 1,
    explanation: "Exec form (JSON array) is preferred because: 1) The process runs directly (PID 1), not through /bin/sh. 2) It properly receives shutdown signals (SIGTERM). Shell form wraps in 'sh -c' which doesn't forward signals, preventing graceful shutdown."
  },
  {
    q: "What is the correct order of these Dockerfile instructions for optimal caching?",
    options: [
      "COPY . . â†’ RUN npm install â†’ FROM node â†’ WORKDIR /app",
      "FROM node â†’ WORKDIR /app â†’ COPY . . â†’ RUN npm install",
      "FROM node â†’ WORKDIR /app â†’ COPY package*.json ./ â†’ RUN npm install â†’ COPY . .",
      "FROM node â†’ COPY . . â†’ WORKDIR /app â†’ RUN npm install"
    ],
    correct: 2,
    explanation: "The correct order: FROM â†’ WORKDIR â†’ COPY package files â†’ RUN npm install â†’ COPY source code. This ensures npm install is cached when only source code changes, because package.json layer hasn't changed."
  },
  {
    q: "In a Compose file, how would you make the frontend unable to directly access the database?",
    options: [
      "Use depends_on to prevent access",
      "Put them on different Docker networks",
      "Use EXPOSE to block ports",
      "It's impossible â€” all Compose services can communicate"
    ],
    correct: 1,
    explanation: "By defining separate networks (e.g., 'frontend-net' and 'backend-net'), you control which services can communicate. Put frontend on frontend-net, API on both, and database on backend-net only. The frontend can't reach the database directly."
  }
];

function initQuiz() {
  const container = document.getElementById('quizContainer');
  let html = '';

  quizData.forEach((q, i) => {
    html += `<div class="quiz-question" id="quiz-q-${i}">
      <div class="q-number">Question ${i + 1} of ${quizData.length}</div>
      <h4>${q.q}</h4>
      <div class="quiz-options">`;

    const letters = ['A', 'B', 'C', 'D'];
    q.options.forEach((opt, j) => {
      html += `<div class="quiz-option" id="q${i}-opt${j}" onclick="answerQuiz(${i},${j})">
        <span class="letter">${letters[j]}</span>
        <span>${opt}</span>
      </div>`;
    });

    html += `</div>
      <div class="quiz-explanation" id="q${i}-explanation">
        <strong>Explanation:</strong> ${q.explanation}
      </div>
    </div>`;
  });

  container.innerHTML = html;
}

function answerQuiz(qIndex, optIndex) {
  if (state.quizAnswers[qIndex] !== undefined) return;

  state.quizAnswers[qIndex] = optIndex;
  state.quizTotal++;

  const correct = quizData[qIndex].correct;
  const selectedEl = document.getElementById(`q${qIndex}-opt${optIndex}`);
  const correctEl = document.getElementById(`q${qIndex}-opt${correct}`);

  if (optIndex === correct) {
    selectedEl.classList.add('correct');
    state.quizCorrect++;
    state.score += 5;
  } else {
    selectedEl.classList.add('wrong');
    correctEl.classList.add('correct');
  }

  document.getElementById(`q${qIndex}-explanation`).style.display = 'block';

  document.getElementById('quizCorrect').textContent = state.quizCorrect;
  document.getElementById('quizTotal').textContent = state.quizTotal;
  document.getElementById('quizPercent').textContent =
    Math.round((state.quizCorrect / state.quizTotal) * 100) + '%';
  updateProgress();
}

function resetQuiz() {
  state.quizAnswers = {};
  state.quizCorrect = 0;
  state.quizTotal = 0;
  initQuiz();
  document.getElementById('quizCorrect').textContent = '0';
  document.getElementById('quizTotal').textContent = '0';
  document.getElementById('quizPercent').textContent = '0%';
}

// =================== FLASHCARDS ===================
const flashcards = [
  {
    front: "What is Docker?",
    back: "Docker is a platform for developing, shipping, and running applications in containers. Containers package an application with all its dependencies into a standardized unit that runs consistently across any environment."
  },
  {
    front: "Image vs Container?",
    back: "Image = read-only blueprint/template (like a class in OOP)\nContainer = running instance of an image (like an object)\n\nYou can create many containers from one image. Images are built from Dockerfiles."
  },
  {
    front: "What is a Dockerfile?",
    back: "A text file containing step-by-step instructions to build a Docker image. Each instruction (FROM, COPY, RUN, CMD, etc.) creates a new cached layer in the image."
  },
  {
    front: "Explain Docker layer caching",
    back: "Each Dockerfile instruction creates a layer. Docker caches layers and only rebuilds from the point where something changed. Strategy: put rarely-changing instructions (dependencies) first and frequently-changing ones (source code) last."
  },
  {
    front: "What is Docker Compose?",
    back: "A tool for defining and running multi-container Docker applications using a YAML configuration file. Instead of multiple 'docker run' commands, you define all services, networks, and volumes in docker-compose.yml and manage them with 'docker compose up/down'."
  },
  {
    front: "CMD vs ENTRYPOINT?",
    back: "CMD: Default command, easily overridden by docker run args\nENTRYPOINT: Main executable, not easily overridden\n\nCombined: ENTRYPOINT defines the executable, CMD provides default arguments.\n\nAlways prefer exec form: CMD [\"node\",\"app.js\"] over shell form: CMD node app.js"
  },
  {
    front: "What is a multi-stage build?",
    back: "A Dockerfile pattern using multiple FROM statements. Build tools and dev dependencies stay in earlier stages. Only necessary artifacts are COPY --from to the final stage, resulting in much smaller production images (50-80% smaller)."
  },
  {
    front: "How do containers communicate?",
    back: "Containers on the same Docker network can reach each other using container names as hostnames (Docker provides DNS). In Compose, service names are used. Example: postgres://db-service:5432/mydb"
  },
  {
    front: "Named Volume vs Bind Mount?",
    back: "Named Volume: Docker manages the storage location. Best for persistent data (databases).\n  -v mydata:/app/data\n\nBind Mount: You specify the host path. Best for development (live code reload).\n  -v ./src:/app/src"
  },
  {
    front: "Why use alpine images?",
    back: "Alpine Linux-based images are much smaller (~5MB vs ~900MB for full images). This means faster pulls, less storage, smaller attack surface. Trade-off: uses musl instead of glibc, which can occasionally cause compatibility issues."
  },
  {
    front: "What does 'docker system prune -a' do?",
    back: "Removes ALL unused Docker data: stopped containers, unused networks, dangling AND unused images, and build cache. Add -v to also remove unused volumes. Great for freeing disk space but be careful in production!"
  },
  {
    front: "What is container orchestration?",
    back: "Automated management of containerized applications at scale: deployment, scaling, networking, load balancing, health monitoring, rolling updates. Tools: Kubernetes (industry standard), Docker Swarm (simpler), AWS ECS, etc."
  },
  {
    front: "Key Kubernetes concepts?",
    back: "Pod: Smallest unit, wraps 1+ containers\nDeployment: Manages pod replicas & updates\nService: Stable network endpoint for pods\nIngress: Routes external HTTP traffic\nConfigMap/Secret: External configuration\nNamespace: Resource isolation"
  },
  {
    front: "Docker security best practices?",
    back: "1. Use specific image tags (not :latest)\n2. Run as non-root user (USER instruction)\n3. Never store secrets in images\n4. Use .dockerignore\n5. Scan images for vulnerabilities\n6. Use multi-stage builds\n7. Minimize installed packages\n8. Use read-only filesystems where possible"
  },
  {
    front: "What does EXPOSE do?",
    back: "EXPOSE is purely documentation â€” it tells developers which port the app uses inside the container. It does NOT publish the port. To actually make a port accessible:\n  docker run -p 8080:3000 (maps host 8080 â†’ container 3000)\n  Or 'ports' in docker-compose.yml"
  }
];

let shuffledCards = [...flashcards];

function renderFlashcard() {
  const card = shuffledCards[state.currentFlashcard];
  document.getElementById('flashFrontTitle').textContent = card.front;
  document.getElementById('flashFrontText').textContent = '';
  document.getElementById('flashBackText').textContent = card.back;
  document.getElementById('flashcardCounter').textContent =
    `Card ${state.currentFlashcard + 1} of ${shuffledCards.length}`;
  document.getElementById('flashcard').classList.remove('flipped');
}

function flipCard() {
  document.getElementById('flashcard').classList.toggle('flipped');
}

function nextCard() {
  state.currentFlashcard = (state.currentFlashcard + 1) % shuffledCards.length;
  renderFlashcard();
}

function prevCard() {
  state.currentFlashcard = (state.currentFlashcard - 1 + shuffledCards.length) % shuffledCards.length;
  renderFlashcard();
}

function shuffleCards() {
  for (let i = shuffledCards.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffledCards[i], shuffledCards[j]] = [shuffledCards[j], shuffledCards[i]];
  }
  state.currentFlashcard = 0;
  renderFlashcard();
}

// =================== INIT ===================
document.addEventListener('DOMContentLoaded', () => {
  initQuiz();
  renderFlashcard();
  updateProgress();
});
</script>
</body>
</html>