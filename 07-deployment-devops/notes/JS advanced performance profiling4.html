<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Testing Mastery ‚Äî JavaScript</title>
<style>
:root {
  --bg: #0a0e17;
  --surface: #131a2b;
  --surface2: #1a2340;
  --primary: #6c5ce7;
  --primary-light: #a29bfe;
  --accent: #00cec9;
  --accent2: #fd79a8;
  --success: #00b894;
  --danger: #d63031;
  --warning: #fdcb6e;
  --text: #dfe6e9;
  --text-dim: #636e72;
  --border: #2d3436;
  --code-bg: #0d1117;
  --radius: 12px;
  --shadow: 0 8px 32px rgba(0,0,0,0.3);
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.7;
  overflow-x: hidden;
}

/* Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 3px; }

/* Layout */
.app-container {
  display: flex;
  min-height: 100vh;
}

/* Sidebar */
.sidebar {
  width: 300px;
  background: var(--surface);
  border-right: 1px solid var(--border);
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  overflow-y: auto;
  z-index: 100;
  transition: transform 0.3s;
}

.sidebar-header {
  padding: 24px 20px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(135deg, var(--primary), var(--accent));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.sidebar-header h1 { font-size: 1.3rem; font-weight: 800; }
.sidebar-header p { font-size: 0.75rem; opacity: 0.7; -webkit-text-fill-color: var(--text-dim); }

.nav-section {
  padding: 12px 0;
  border-bottom: 1px solid var(--border);
}

.nav-section-title {
  padding: 6px 20px;
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--text-dim);
  font-weight: 700;
}

.nav-item {
  padding: 10px 20px 10px 28px;
  cursor: pointer;
  font-size: 0.85rem;
  transition: all 0.2s;
  border-left: 3px solid transparent;
  display: flex;
  align-items: center;
  gap: 10px;
}

.nav-item:hover { background: var(--surface2); color: var(--primary-light); }
.nav-item.active {
  background: var(--surface2);
  border-left-color: var(--primary);
  color: var(--primary-light);
  font-weight: 600;
}

.nav-item .icon { font-size: 1rem; width: 22px; text-align: center; }
.nav-item .badge {
  margin-left: auto;
  background: var(--primary);
  color: white;
  font-size: 0.6rem;
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 700;
}

.progress-bar-container {
  padding: 16px 20px;
  border-bottom: 1px solid var(--border);
}

.progress-label {
  display: flex;
  justify-content: space-between;
  font-size: 0.7rem;
  margin-bottom: 6px;
  color: var(--text-dim);
}

.progress-track {
  height: 6px;
  background: var(--border);
  border-radius: 3px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--primary), var(--accent));
  border-radius: 3px;
  transition: width 0.5s ease;
  width: 0%;
}

/* Main Content */
.main-content {
  margin-left: 300px;
  flex: 1;
  padding: 40px;
  max-width: 960px;
}

/* Sections */
.section {
  display: none;
  animation: fadeIn 0.4s ease;
}

.section.active { display: block; }

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(15px); }
  to { opacity: 1; transform: translateY(0); }
}

h2 {
  font-size: 2rem;
  margin-bottom: 8px;
  background: linear-gradient(135deg, var(--primary-light), var(--accent));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.section-subtitle {
  color: var(--text-dim);
  font-size: 0.95rem;
  margin-bottom: 32px;
}

h3 {
  font-size: 1.3rem;
  color: var(--primary-light);
  margin: 32px 0 12px;
}

h4 {
  font-size: 1.05rem;
  color: var(--accent);
  margin: 20px 0 8px;
}

p { margin-bottom: 14px; color: var(--text); font-size: 0.92rem; }

/* Cards */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  margin: 20px 0;
  box-shadow: var(--shadow);
}

.card.highlight {
  border-left: 4px solid var(--primary);
}

.card.warning {
  border-left: 4px solid var(--warning);
  background: rgba(253,203,110,0.05);
}

.card.danger {
  border-left: 4px solid var(--danger);
  background: rgba(214,48,49,0.05);
}

.card.success {
  border-left: 4px solid var(--success);
  background: rgba(0,184,148,0.05);
}

.card.info {
  border-left: 4px solid var(--accent);
  background: rgba(0,206,201,0.05);
}

.card-title {
  font-weight: 700;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.95rem;
}

/* Code blocks */
.code-block {
  background: var(--code-bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 20px;
  margin: 16px 0;
  overflow-x: auto;
  position: relative;
  font-family: 'Fira Code', 'Cascadia Code', 'Consolas', monospace;
  font-size: 0.82rem;
  line-height: 1.8;
}

.code-block .lang-tag {
  position: absolute;
  top: 8px;
  right: 12px;
  font-size: 0.6rem;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 1px;
  font-family: system-ui;
}

.code-block .line-num {
  color: var(--text-dim);
  user-select: none;
  display: inline-block;
  width: 30px;
  text-align: right;
  margin-right: 16px;
}

.kw { color: #c678dd; }
.fn { color: #61afef; }
.str { color: #98c379; }
.cm { color: #5c6370; font-style: italic; }
.num { color: #d19a66; }
.op { color: #56b6c2; }
.prop { color: #e06c75; }
.type { color: #e5c07b; }
.const { color: #d19a66; }

/* Testing Pyramid */
.pyramid-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 30px 0;
  gap: 4px;
}

.pyramid-level {
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 700;
  font-size: 0.85rem;
  padding: 16px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s;
  text-align: center;
}

.pyramid-level:hover { transform: scale(1.05); }
.pyramid-level.e2e { width: 200px; background: var(--danger); }
.pyramid-level.integration { width: 320px; background: var(--primary); }
.pyramid-level.unit { width: 440px; background: var(--success); }

.pyramid-labels {
  display: flex;
  justify-content: space-between;
  width: 440px;
  margin-top: 10px;
  font-size: 0.7rem;
  color: var(--text-dim);
}

/* Tabs */
.tabs {
  display: flex;
  gap: 4px;
  border-bottom: 2px solid var(--border);
  margin-bottom: 20px;
  flex-wrap: wrap;
}

.tab {
  padding: 10px 20px;
  cursor: pointer;
  font-size: 0.85rem;
  color: var(--text-dim);
  border-bottom: 2px solid transparent;
  margin-bottom: -2px;
  transition: all 0.2s;
  font-weight: 500;
}

.tab:hover { color: var(--text); }
.tab.active {
  color: var(--primary-light);
  border-bottom-color: var(--primary);
  font-weight: 700;
}

.tab-content { display: none; }
.tab-content.active { display: block; animation: fadeIn 0.3s ease; }

/* Comparison table */
.comparison-table {
  width: 100%;
  border-collapse: collapse;
  margin: 16px 0;
  font-size: 0.82rem;
}

.comparison-table th {
  background: var(--surface2);
  padding: 12px 16px;
  text-align: left;
  font-weight: 700;
  color: var(--primary-light);
  border-bottom: 2px solid var(--primary);
}

.comparison-table td {
  padding: 10px 16px;
  border-bottom: 1px solid var(--border);
}

.comparison-table tr:hover td { background: rgba(108,92,231,0.05); }

/* Quiz */
.quiz-container { margin: 20px 0; }

.quiz-question {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  margin: 16px 0;
}

.quiz-question h4 {
  color: var(--text);
  margin: 0 0 16px;
  font-size: 0.95rem;
}

.quiz-question .q-num {
  color: var(--primary-light);
  font-weight: 700;
}

.quiz-options { display: flex; flex-direction: column; gap: 8px; }

.quiz-option {
  padding: 12px 16px;
  background: var(--surface2);
  border: 2px solid var(--border);
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85rem;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 10px;
}

.quiz-option:hover { border-color: var(--primary); }

.quiz-option.selected { border-color: var(--primary); background: rgba(108,92,231,0.1); }
.quiz-option.correct { border-color: var(--success); background: rgba(0,184,148,0.1); }
.quiz-option.wrong { border-color: var(--danger); background: rgba(214,48,49,0.1); }

.quiz-option .letter {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.75rem;
  flex-shrink: 0;
}

.quiz-explanation {
  margin-top: 12px;
  padding: 12px 16px;
  background: rgba(0,206,201,0.08);
  border-left: 3px solid var(--accent);
  border-radius: 0 8px 8px 0;
  font-size: 0.82rem;
  display: none;
}

.quiz-explanation.show { display: block; animation: fadeIn 0.3s; }

/* Buttons */
.btn {
  padding: 10px 24px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  transition: all 0.2s;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.btn-primary { background: var(--primary); color: white; }
.btn-primary:hover { background: var(--primary-light); transform: translateY(-1px); }
.btn-success { background: var(--success); color: white; }
.btn-success:hover { opacity: 0.9; }
.btn-outline {
  background: transparent;
  color: var(--primary-light);
  border: 2px solid var(--primary);
}
.btn-outline:hover { background: var(--primary); color: white; }

.btn-group { display: flex; gap: 10px; margin: 20px 0; flex-wrap: wrap; }

/* Exercise */
.exercise-box {
  background: var(--surface);
  border: 2px solid var(--primary);
  border-radius: var(--radius);
  padding: 24px;
  margin: 20px 0;
}

.exercise-box h4 {
  color: var(--primary-light);
  margin-bottom: 4px;
}

.exercise-box .difficulty {
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 12px;
}

.difficulty.easy { color: var(--success); }
.difficulty.medium { color: var(--warning); }
.difficulty.hard { color: var(--danger); }

textarea.code-input {
  width: 100%;
  min-height: 200px;
  background: var(--code-bg);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 16px;
  font-family: 'Fira Code', 'Consolas', monospace;
  font-size: 0.82rem;
  line-height: 1.7;
  resize: vertical;
  margin: 12px 0;
}

textarea.code-input:focus {
  outline: none;
  border-color: var(--primary);
}

.result-box {
  padding: 14px 18px;
  border-radius: 8px;
  margin-top: 10px;
  font-size: 0.85rem;
  display: none;
}

.result-box.show { display: block; animation: fadeIn 0.3s; }
.result-box.pass { background: rgba(0,184,148,0.12); border: 1px solid var(--success); color: var(--success); }
.result-box.fail { background: rgba(214,48,49,0.12); border: 1px solid var(--danger); color: var(--danger); }

/* Cheat sheet */
.cheat-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 16px;
  margin: 20px 0;
}

.cheat-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
}

.cheat-card h4 {
  margin: 0 0 12px;
  font-size: 0.9rem;
}

.cheat-card code {
  background: var(--code-bg);
  padding: 2px 6px;
  border-radius: 4px;
  font-family: monospace;
  font-size: 0.8rem;
  color: var(--accent);
}

.cheat-card ul {
  list-style: none;
  padding: 0;
}

.cheat-card li {
  padding: 4px 0;
  font-size: 0.82rem;
  display: flex;
  align-items: baseline;
  gap: 6px;
}

.cheat-card li::before {
  content: '‚Üí';
  color: var(--primary-light);
  flex-shrink: 0;
}

/* Pitfall */
.pitfall-item {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  margin: 16px 0;
  overflow: hidden;
}

.pitfall-header {
  padding: 16px 20px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: 600;
  font-size: 0.9rem;
  transition: background 0.2s;
}

.pitfall-header:hover { background: var(--surface2); }

.pitfall-header .toggle { transition: transform 0.3s; }
.pitfall-header.open .toggle { transform: rotate(180deg); }

.pitfall-body {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease;
}

.pitfall-body.open { max-height: 2000px; }

.pitfall-body-inner { padding: 0 20px 20px; }

/* Score badge */
.score-display {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  text-align: center;
  margin: 20px 0;
}

.score-number {
  font-size: 3rem;
  font-weight: 800;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Diagram / Flow */
.flow-diagram {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin: 20px 0;
  flex-wrap: wrap;
}

.flow-box {
  padding: 12px 18px;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 8px;
  font-size: 0.8rem;
  font-weight: 600;
  text-align: center;
  min-width: 100px;
}

.flow-arrow { color: var(--primary-light); font-size: 1.2rem; }

/* Interactive demo */
.demo-area {
  background: var(--code-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  margin: 16px 0;
}

.demo-output {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 16px;
  margin-top: 12px;
  font-family: monospace;
  font-size: 0.82rem;
  min-height: 60px;
  white-space: pre-wrap;
}

.demo-output .pass { color: var(--success); }
.demo-output .fail { color: var(--danger); }
.demo-output .info { color: var(--accent); }

/* List styles */
ul.styled-list, ol.styled-list {
  padding-left: 0;
  list-style: none;
  margin: 12px 0;
}

ul.styled-list li, ol.styled-list li {
  padding: 6px 0 6px 24px;
  position: relative;
  font-size: 0.88rem;
}

ul.styled-list li::before {
  content: '‚ñ∏';
  position: absolute;
  left: 4px;
  color: var(--primary-light);
  font-weight: bold;
}

ol.styled-list { counter-reset: ol-counter; }
ol.styled-list li { counter-increment: ol-counter; }
ol.styled-list li::before {
  content: counter(ol-counter);
  position: absolute;
  left: 0;
  color: var(--primary-light);
  font-weight: 700;
  font-size: 0.8rem;
}

/* Hamburger */
.hamburger {
  display: none;
  position: fixed;
  top: 14px;
  left: 14px;
  z-index: 200;
  background: var(--primary);
  border: none;
  color: white;
  width: 40px;
  height: 40px;
  border-radius: 8px;
  font-size: 1.3rem;
  cursor: pointer;
}

/* Tooltip */
.tooltip {
  position: relative;
  display: inline-block;
  border-bottom: 1px dashed var(--primary-light);
  cursor: help;
  color: var(--primary-light);
}

.tooltip .tooltip-text {
  visibility: hidden;
  background: var(--surface2);
  color: var(--text);
  padding: 8px 12px;
  border-radius: 6px;
  font-size: 0.75rem;
  position: absolute;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%);
  white-space: nowrap;
  z-index: 10;
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
}

.tooltip:hover .tooltip-text { visibility: visible; }

.tag {
  display: inline-block;
  padding: 2px 10px;
  border-radius: 12px;
  font-size: 0.7rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.tag-playwright { background: rgba(45,212,191,0.15); color: #2dd4bf; }
.tag-cypress { background: rgba(0,150,136,0.15); color: #4db6ac; }
.tag-jest { background: rgba(198,69,66,0.15); color: #e57373; }
.tag-concept { background: rgba(108,92,231,0.15); color: var(--primary-light); }

/* Responsive */
@media (max-width: 860px) {
  .hamburger { display: flex; align-items: center; justify-content: center; }
  .sidebar { transform: translateX(-100%); }
  .sidebar.open { transform: translateX(0); }
  .main-content { margin-left: 0; padding: 20px; padding-top: 70px; }
  .pyramid-labels, .pyramid-level.unit { width: 100%; max-width: 440px; }
  .pyramid-level.integration { width: 80%; max-width: 320px; }
  .pyramid-level.e2e { width: 55%; max-width: 200px; }
}

/* Animations */
.bounce { animation: bounce 0.5s ease; }
@keyframes bounce {
  0%,100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.checkmark {
  display: inline-block;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  text-align: center;
  line-height: 20px;
  font-size: 0.7rem;
  flex-shrink: 0;
}

.checkmark.done { background: var(--success); color: white; }
.checkmark.pending { background: var(--border); color: var(--text-dim); }
</style>
</head>
<body>

<button class="hamburger" onclick="toggleSidebar()">‚ò∞</button>

<div class="app-container">
<!-- SIDEBAR -->
<nav class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <h1>üß™ Advanced Testing</h1>
    <p>JavaScript Mastery Course</p>
  </div>

  <div class="progress-bar-container">
    <div class="progress-label">
      <span>Progress</span>
      <span id="progress-text">0%</span>
    </div>
    <div class="progress-track">
      <div class="progress-fill" id="progress-fill"></div>
    </div>
  </div>

  <div class="nav-section">
    <div class="nav-section-title">üìò Learn</div>
    <div class="nav-item active" data-section="intro" onclick="showSection('intro', this)">
      <span class="icon">üè†</span> Overview & Pyramid
      <span class="checkmark pending" id="check-intro">‚óã</span>
    </div>
    <div class="nav-item" data-section="integration" onclick="showSection('integration', this)">
      <span class="icon">üîó</span> Integration Testing
      <span class="checkmark pending" id="check-integration">‚óã</span>
    </div>
    <div class="nav-item" data-section="e2e" onclick="showSection('e2e', this)">
      <span class="icon">üé≠</span> E2E Testing
      <span class="checkmark pending" id="check-e2e">‚óã</span>
    </div>
    <div class="nav-item" data-section="playwright" onclick="showSection('playwright', this)">
      <span class="icon">üé¨</span> Playwright Deep Dive
      <span class="checkmark pending" id="check-playwright">‚óã</span>
    </div>
    <div class="nav-item" data-section="cypress" onclick="showSection('cypress', this)">
      <span class="icon">üå≤</span> Cypress Deep Dive
      <span class="checkmark pending" id="check-cypress">‚óã</span>
    </div>
    <div class="nav-item" data-section="visual" onclick="showSection('visual', this)">
      <span class="icon">üëÅÔ∏è</span> Visual Regression
      <span class="checkmark pending" id="check-visual">‚óã</span>
    </div>
    <div class="nav-item" data-section="strategies" onclick="showSection('strategies', this)">
      <span class="icon">‚ôüÔ∏è</span> Test Strategies
      <span class="checkmark pending" id="check-strategies">‚óã</span>
    </div>
    <div class="nav-item" data-section="automation" onclick="showSection('automation', this)">
      <span class="icon">‚öôÔ∏è</span> Test Automation & CI
      <span class="checkmark pending" id="check-automation">‚óã</span>
    </div>
  </div>

  <div class="nav-section">
    <div class="nav-section-title">üèãÔ∏è Practice</div>
    <div class="nav-item" data-section="exercises" onclick="showSection('exercises', this)">
      <span class="icon">‚úèÔ∏è</span> Exercises
      <span class="badge">8</span>
    </div>
    <div class="nav-item" data-section="quiz" onclick="showSection('quiz', this)">
      <span class="icon">‚ùì</span> Quiz
      <span class="badge">15</span>
    </div>
    <div class="nav-item" data-section="pitfalls" onclick="showSection('pitfalls', this)">
      <span class="icon">‚ö†Ô∏è</span> Mistakes & Pitfalls
      <span class="badge">12</span>
    </div>
  </div>

  <div class="nav-section">
    <div class="nav-section-title">üìã Reference</div>
    <div class="nav-item" data-section="cheatsheet" onclick="showSection('cheatsheet', this)">
      <span class="icon">üìÑ</span> Cheat Sheet
    </div>
    <div class="nav-item" data-section="comparison" onclick="showSection('comparison', this)">
      <span class="icon">‚öñÔ∏è</span> Tool Comparison
    </div>
  </div>
</nav>

<!-- MAIN CONTENT -->
<main class="main-content">

<!-- ============ INTRO ============ -->
<div class="section active" id="sec-intro">
  <h2>üß™ Advanced Testing</h2>
  <p class="section-subtitle">Master integration tests, E2E tests, visual regression, and test strategies to ship bulletproof JavaScript applications.</p>

  <div class="card info">
    <div class="card-title">üí° Why This Matters for Getting Hired</div>
    <p>Top companies expect engineers to write <strong>not just unit tests</strong>, but also integration and E2E tests. During interviews, you'll be asked about test strategies, the testing pyramid, and how to balance speed with confidence. This module gets you there.</p>
  </div>

  <h3>The Testing Pyramid</h3>
  <p>This is the foundational mental model. Click each level to learn more:</p>

  <div class="pyramid-container">
    <div class="pyramid-level e2e" onclick="showSection('e2e', document.querySelector('[data-section=e2e]'))">
      üîù E2E Tests<br><small>Few, Slow, High Confidence</small>
    </div>
    <div class="pyramid-level integration" onclick="showSection('integration', document.querySelector('[data-section=integration]'))">
      üîó Integration Tests<br><small>Some, Medium Speed, Good Coverage</small>
    </div>
    <div class="pyramid-level unit" onclick="showSection('unit', null)">
      ‚ö° Unit Tests<br><small>Many, Fast, Low-Level Confidence</small>
    </div>
  </div>
  <div class="pyramid-labels">
    <span>‚¨ÜÔ∏è More isolation, faster</span>
    <span>‚¨ÜÔ∏è More realistic, slower</span>
  </div>

  <h3>What Each Layer Tests</h3>
  <table class="comparison-table">
    <thead>
      <tr><th>Layer</th><th>Tests What?</th><th>Example</th><th>Speed</th></tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Unit</strong></td>
        <td>Single function/module in isolation</td>
        <td><code>formatPrice(1999) ‚Üí "$19.99"</code></td>
        <td>‚ö° ~1ms</td>
      </tr>
      <tr>
        <td><strong>Integration</strong></td>
        <td>Multiple modules working together</td>
        <td>API route ‚Üí DB ‚Üí Response validation</td>
        <td>üîÑ ~100ms</td>
      </tr>
      <tr>
        <td><strong>E2E</strong></td>
        <td>Full user journey through real UI</td>
        <td>Login ‚Üí Add to cart ‚Üí Checkout</td>
        <td>üê¢ ~5-30s</td>
      </tr>
    </tbody>
  </table>

  <h3>The Modern View: Testing Trophy üèÜ</h3>
  <div class="card highlight">
    <p>Kent C. Dodds proposed the <strong>Testing Trophy</strong> which emphasizes <strong>integration tests</strong> as the best bang-for-your-buck layer. The idea: integration tests give you the most confidence per line of test code.</p>
    <div class="code-block">
      <span class="lang-tag">concept</span>
<span class="cm">// Testing Trophy (bottom to top):</span>
<span class="cm">//</span>
<span class="cm">//        üèÜ E2E          ‚Üê few critical paths</span>
<span class="cm">//      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>
<span class="cm">//    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà         ‚Üê MOST tests here</span>
<span class="cm">//   ‚ñà‚ñà Integration ‚ñà‚ñà</span>
<span class="cm">//    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>
<span class="cm">//      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà          ‚Üê unit tests</span>
<span class="cm">//        ‚ñà‚ñà‚ñà‚ñà</span>
<span class="cm">//    Static Analysis      ‚Üê TypeScript, ESLint</span>
    </div>
  </div>

  <div class="btn-group">
    <button class="btn btn-primary" onclick="markDone('intro'); showSection('integration', document.querySelector('[data-section=integration]'))">Next: Integration Testing ‚Üí</button>
  </div>
</div>

<!-- ============ INTEGRATION TESTING ============ -->
<div class="section" id="sec-integration">
  <h2>üîó Integration Testing</h2>
  <p class="section-subtitle">Testing how multiple parts of your system work together ‚Äî the sweet spot of the testing trophy.</p>

  <h3>What Is an Integration Test?</h3>
  <p>An integration test verifies that <strong>multiple units work together correctly</strong>. Unlike unit tests where you mock everything, here you use <em>real</em> implementations of collaborating modules.</p>

  <div class="card highlight">
    <div class="card-title">üîë Key Principle</div>
    <p><strong>"The more your tests resemble the way your software is used, the more confidence they can give you."</strong> ‚Äî Kent C. Dodds</p>
  </div>

  <h3>Integration Test: React Component with API</h3>
  <div class="code-block">
    <span class="lang-tag">integration test - react</span>
<span class="cm">// UserProfile.integration.test.jsx</span>
<span class="kw">import</span> { render, screen, waitFor } <span class="kw">from</span> <span class="str">'@testing-library/react'</span>;
<span class="kw">import</span> { rest } <span class="kw">from</span> <span class="str">'msw'</span>;
<span class="kw">import</span> { setupServer } <span class="kw">from</span> <span class="str">'msw/node'</span>;
<span class="kw">import</span> { UserProfile } <span class="kw">from</span> <span class="str">'./UserProfile'</span>;
<span class="kw">import</span> { AppProviders } <span class="kw">from</span> <span class="str">'./AppProviders'</span>; <span class="cm">// real providers!</span>

<span class="cm">// Mock the HTTP layer, NOT the modules</span>
<span class="kw">const</span> server = <span class="fn">setupServer</span>(
  rest.<span class="fn">get</span>(<span class="str">'/api/users/:id'</span>, (req, res, ctx) <span class="op">=></span> {
    <span class="kw">return</span> <span class="fn">res</span>(ctx.<span class="fn">json</span>({
      <span class="prop">id</span>: req.params.id,
      <span class="prop">name</span>: <span class="str">'Jane Doe'</span>,
      <span class="prop">email</span>: <span class="str">'jane@example.com'</span>,
      <span class="prop">role</span>: <span class="str">'admin'</span>
    }));
  })
);

<span class="fn">beforeAll</span>(() <span class="op">=></span> server.<span class="fn">listen</span>());
<span class="fn">afterEach</span>(() <span class="op">=></span> server.<span class="fn">resetHandlers</span>());
<span class="fn">afterAll</span>(() <span class="op">=></span> server.<span class="fn">close</span>());

<span class="fn">describe</span>(<span class="str">'UserProfile Integration'</span>, () <span class="op">=></span> {
  <span class="fn">it</span>(<span class="str">'renders user data after fetching from API'</span>, <span class="kw">async</span> () <span class="op">=></span> {
    <span class="cm">// Render with REAL providers (router, state, theme...)</span>
    <span class="fn">render</span>(
      <span class="op">&lt;</span><span class="type">AppProviders</span><span class="op">></span>
        <span class="op">&lt;</span><span class="type">UserProfile</span> <span class="prop">userId</span>=<span class="str">"123"</span> <span class="op">/></span>
      <span class="op">&lt;/</span><span class="type">AppProviders</span><span class="op">></span>
    );

    <span class="cm">// Loading state</span>
    <span class="fn">expect</span>(screen.<span class="fn">getByText</span>(<span class="str">'Loading...'</span>)).<span class="fn">toBeInTheDocument</span>();

    <span class="cm">// Wait for data to appear</span>
    <span class="kw">await</span> <span class="fn">waitFor</span>(() <span class="op">=></span> {
      <span class="fn">expect</span>(screen.<span class="fn">getByText</span>(<span class="str">'Jane Doe'</span>)).<span class="fn">toBeInTheDocument</span>();
    });

    <span class="cm">// Verify integration: component + API + state management</span>
    <span class="fn">expect</span>(screen.<span class="fn">getByText</span>(<span class="str">'jane@example.com'</span>)).<span class="fn">toBeInTheDocument</span>();
    <span class="fn">expect</span>(screen.<span class="fn">getByText</span>(<span class="str">'Admin'</span>)).<span class="fn">toBeInTheDocument</span>(); <span class="cm">// role badge</span>
  });

  <span class="fn">it</span>(<span class="str">'shows error when API fails'</span>, <span class="kw">async</span> () <span class="op">=></span> {
    <span class="cm">// Override handler for this specific test</span>
    server.<span class="fn">use</span>(
      rest.<span class="fn">get</span>(<span class="str">'/api/users/:id'</span>, (req, res, ctx) <span class="op">=></span> {
        <span class="kw">return</span> <span class="fn">res</span>(ctx.<span class="fn">status</span>(<span class="num">500</span>));
      })
    );

    <span class="fn">render</span>(
      <span class="op">&lt;</span><span class="type">AppProviders</span><span class="op">></span>
        <span class="op">&lt;</span><span class="type">UserProfile</span> <span class="prop">userId</span>=<span class="str">"123"</span> <span class="op">/></span>
      <span class="op">&lt;/</span><span class="type">AppProviders</span><span class="op">></span>
    );

    <span class="kw">await</span> <span class="fn">waitFor</span>(() <span class="op">=></span> {
      <span class="fn">expect</span>(screen.<span class="fn">getByText</span>(<span class="str">/something went wrong/i</span>))
        .<span class="fn">toBeInTheDocument</span>();
    });
  });
});
  </div>

  <h3>Integration Test: Express API + Database</h3>
  <div class="code-block">
    <span class="lang-tag">integration test - node api</span>
<span class="cm">// orders.integration.test.js</span>
<span class="kw">import</span> request <span class="kw">from</span> <span class="str">'supertest'</span>;
<span class="kw">import</span> { app } <span class="kw">from</span> <span class="str">'../app'</span>;
<span class="kw">import</span> { db } <span class="kw">from</span> <span class="str">'../database'</span>;
<span class="kw">import</span> { createTestUser, generateAuthToken } <span class="kw">from</span> <span class="str">'./helpers'</span>;

<span class="fn">describe</span>(<span class="str">'POST /api/orders'</span>, () <span class="op">=></span> {
  <span class="kw">let</span> authToken;
  <span class="kw">let</span> testUser;

  <span class="fn">beforeAll</span>(<span class="kw">async</span> () <span class="op">=></span> {
    <span class="kw">await</span> db.<span class="fn">migrate</span>(); <span class="cm">// real DB schema</span>
  });

  <span class="fn">beforeEach</span>(<span class="kw">async</span> () <span class="op">=></span> {
    <span class="kw">await</span> db.<span class="fn">truncate</span>([<span class="str">'orders'</span>, <span class="str">'users'</span>, <span class="str">'products'</span>]);
    testUser = <span class="kw">await</span> <span class="fn">createTestUser</span>();
    authToken = <span class="fn">generateAuthToken</span>(testUser);

    <span class="cm">// Seed test product</span>
    <span class="kw">await</span> db(<span class="str">'products'</span>).<span class="fn">insert</span>({
      <span class="prop">id</span>: <span class="str">'prod_1'</span>,
      <span class="prop">name</span>: <span class="str">'Widget'</span>,
      <span class="prop">price</span>: <span class="num">2999</span>,
      <span class="prop">stock</span>: <span class="num">10</span>
    });
  });

  <span class="fn">it</span>(<span class="str">'creates order and reduces stock'</span>, <span class="kw">async</span> () <span class="op">=></span> {
    <span class="kw">const</span> res = <span class="kw">await</span> <span class="fn">request</span>(app)
      .<span class="fn">post</span>(<span class="str">'/api/orders'</span>)
      .<span class="fn">set</span>(<span class="str">'Authorization'</span>, <span class="str">`Bearer <span class="op">${</span>authToken<span class="op">}</span>`</span>)
      .<span class="fn">send</span>({
        <span class="prop">items</span>: [{ <span class="prop">productId</span>: <span class="str">'prod_1'</span>, <span class="prop">quantity</span>: <span class="num">2</span> }]
      });

    <span class="cm">// Verify response</span>
    <span class="fn">expect</span>(res.status).<span class="fn">toBe</span>(<span class="num">201</span>);
    <span class="fn">expect</span>(res.body.order).<span class="fn">toMatchObject</span>({
      <span class="prop">userId</span>: testUser.id,
      <span class="prop">total</span>: <span class="num">5998</span>,
      <span class="prop">status</span>: <span class="str">'pending'</span>
    });

    <span class="cm">// Verify DB side effects (integration!)</span>
    <span class="kw">const</span> product = <span class="kw">await</span> db(<span class="str">'products'</span>)
      .<span class="fn">where</span>({ <span class="prop">id</span>: <span class="str">'prod_1'</span> }).<span class="fn">first</span>();
    <span class="fn">expect</span>(product.stock).<span class="fn">toBe</span>(<span class="num">8</span>); <span class="cm">// 10 - 2</span>

    <span class="cm">// Verify order exists in DB</span>
    <span class="kw">const</span> order = <span class="kw">await</span> db(<span class="str">'orders'</span>)
      .<span class="fn">where</span>({ <span class="prop">id</span>: res.body.order.id }).<span class="fn">first</span>();
    <span class="fn">expect</span>(order).<span class="fn">toBeTruthy</span>();
  });

  <span class="fn">it</span>(<span class="str">'rejects order when stock insufficient'</span>, <span class="kw">async</span> () <span class="op">=></span> {
    <span class="kw">const</span> res = <span class="kw">await</span> <span class="fn">request</span>(app)
      .<span class="fn">post</span>(<span class="str">'/api/orders'</span>)
      .<span class="fn">set</span>(<span class="str">'Authorization'</span>, <span class="str">`Bearer <span class="op">${</span>authToken<span class="op">}</span>`</span>)
      .<span class="fn">send</span>({
        <span class="prop">items</span>: [{ <span class="prop">productId</span>: <span class="str">'prod_1'</span>, <span class="prop">quantity</span>: <span class="num">99</span> }]
      });

    <span class="fn">expect</span>(res.status).<span class="fn">toBe</span>(<span class="num">400</span>);
    <span class="fn">expect</span>(res.body.error).<span class="fn">toMatch</span>(<span class="str">/insufficient stock/i</span>);

    <span class="cm">// Stock should NOT have changed</span>
    <span class="kw">const</span> product = <span class="kw">await</span> db(<span class="str">'products'</span>)
      .<span class="fn">where</span>({ <span class="prop">id</span>: <span class="str">'prod_1'</span> }).<span class="fn">first</span>();
    <span class="fn">expect</span>(product.stock).<span class="fn">toBe</span>(<span class="num">10</span>);
  });
});
  </div>

  <h3>Key Integration Testing Patterns</h3>

  <div class="card success">
    <div class="card-title">‚úÖ DO: Mock at the boundaries</div>
    <p>Mock network requests (MSW), external APIs, email services ‚Äî but use <strong>real</strong> internal modules, real state management, real routers.</p>
  </div>

  <div class="card danger">
    <div class="card-title">‚ùå DON'T: Mock everything</div>
    <p>If you mock every dependency, you're just writing unit tests with extra steps. Integration tests should test real interactions between modules.</p>
  </div>

  <h3>MSW (Mock Service Worker) ‚Äî The Gold Standard</h3>
  <div class="code-block">
    <span class="lang-tag">msw setup</span>
<span class="cm">// mocks/handlers.js - Central mock definitions</span>
<span class="kw">import</span> { rest } <span class="kw">from</span> <span class="str">'msw'</span>;

<span class="kw">export const</span> handlers = [
  <span class="cm">// Products API</span>
  rest.<span class="fn">get</span>(<span class="str">'/api/products'</span>, (req, res, ctx) <span class="op">=></span> {
    <span class="kw">const</span> category = req.url.searchParams.<span class="fn">get</span>(<span class="str">'category'</span>);
    <span class="kw">const</span> products = <span class="fn">getProductsByCategory</span>(category);
    <span class="kw">return</span> <span class="fn">res</span>(ctx.<span class="fn">delay</span>(<span class="num">100</span>), ctx.<span class="fn">json</span>(products));
  }),

  <span class="cm">// Auth API</span>
  rest.<span class="fn">post</span>(<span class="str">'/api/auth/login'</span>, <span class="kw">async</span> (req, res, ctx) <span class="op">=></span> {
    <span class="kw">const</span> { email, password } = <span class="kw">await</span> req.<span class="fn">json</span>();
    <span class="kw">if</span> (email === <span class="str">'test@test.com'</span> && password === <span class="str">'pass123'</span>) {
      <span class="kw">return</span> <span class="fn">res</span>(ctx.<span class="fn">json</span>({ <span class="prop">token</span>: <span class="str">'fake-jwt'</span> }));
    }
    <span class="kw">return</span> <span class="fn">res</span>(ctx.<span class="fn">status</span>(<span class="num">401</span>), ctx.<span class="fn">json</span>({ <span class="prop">error</span>: <span class="str">'Invalid'</span> }));
  }),
];
  </div>

  <div class="btn-group">
    <button class="btn btn-primary" onclick="markDone('integration'); showSection('e2e', document.querySelector('[data-section=e2e]'))">Next: E2E Testing ‚Üí</button>
  </div>
</div>

<!-- ============ E2E TESTING ============ -->
<div class="section" id="sec-e2e">
  <h2>üé≠ End-to-End (E2E) Testing</h2>
  <p class="section-subtitle">Testing complete user workflows through a real browser, just like a real user would.</p>

  <h3>What Makes E2E Different?</h3>
  <div class="flow-diagram">
    <div class="flow-box">Real Browser</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box">Real Frontend</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box">Real API</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box">Real Database</div>
  </div>

  <div class="card info">
    <div class="card-title">üéØ When to Write E2E Tests</div>
    <ul class="styled-list">
      <li>Critical user journeys (login, checkout, signup)</li>
      <li>Flows that cross multiple pages/services</li>
      <li>Smoke tests for production deployments</li>
      <li>Regression tests for high-priority bugs</li>
    </ul>
  </div>

  <h3>E2E Test Anatomy</h3>
  <div class="code-block">
    <span class="lang-tag">e2e concept</span>
<span class="cm">// Every E2E test follows this pattern:</span>

<span class="cm">// 1. ARRANGE ‚Äî Set up the world</span>
<span class="cm">//    Navigate to page, seed data, log in</span>

<span class="cm">// 2. ACT ‚Äî Perform user actions</span>
<span class="cm">//    Click buttons, fill forms, navigate</span>

<span class="cm">// 3. ASSERT ‚Äî Verify outcomes</span>
<span class="cm">//    Check URL, visible text, DB state</span>

<span class="cm">// 4. CLEANUP ‚Äî Reset state</span>
<span class="cm">//    Clear DB, log out, reset cookies</span>
  </div>

  <h3>Common E2E Scenarios to Test</h3>
  <table class="comparison-table">
    <thead><tr><th>Scenario</th><th>What to Verify</th></tr></thead>
    <tbody>
      <tr><td>User Registration</td><td>Form validation, success redirect, welcome email triggered</td></tr>
      <tr><td>Login / Logout</td><td>Auth state, protected routes, session persistence</td></tr>
      <tr><td>Shopping Cart</td><td>Add/remove items, price calculation, persistence</td></tr>
      <tr><td>Checkout</td><td>Payment integration, order confirmation, stock update</td></tr>
      <tr><td>Search & Filter</td><td>Results accuracy, URL params, pagination</td></tr>
      <tr><td>Error Handling</td><td>404 pages, network errors, form validation messages</td></tr>
    </tbody>
  </table>

  <h3>E2E Best Practices</h3>
  <div class="card success">
    <div class="card-title">‚úÖ Golden Rules</div>
    <ul class="styled-list">
      <li><strong>Test user behavior, not implementation</strong> ‚Äî click by visible text, not CSS selectors</li>
      <li><strong>Use data-testid sparingly</strong> ‚Äî prefer accessible selectors (role, label)</li>
      <li><strong>Each test should be independent</strong> ‚Äî no test should depend on another</li>
      <li><strong>Handle flakiness</strong> ‚Äî use proper waits, never <code>sleep()</code></li>
      <li><strong>Keep E2E count small</strong> ‚Äî 20 focused E2E tests beat 200 brittle ones</li>
    </ul>
  </div>

  <div class="btn-group">
    <button class="btn btn-primary" onclick="markDone('e2e'); showSection('playwright', document.querySelector('[data-section=playwright]'))">Next: Playwright ‚Üí</button>
  </div>
</div>

<!-- ============ PLAYWRIGHT ============ -->
<div class="section" id="sec-playwright">
  <h2>üé¨ Playwright Deep Dive</h2>
  <p class="section-subtitle">Microsoft's modern E2E testing framework ‚Äî fast, reliable, cross-browser.</p>

  <div class="card info">
    <div class="card-title">Why Playwright is Taking Over</div>
    <ul class="styled-list">
      <li>Auto-wait for elements (no flaky <code>wait</code> calls)</li>
      <li>Cross-browser: Chromium, Firefox, WebKit</li>
      <li>Mobile emulation built-in</li>
      <li>Parallel test execution by default</li>
      <li>Trace viewer for debugging</li>
      <li>API testing capabilities</li>
    </ul>
  </div>

  <h3>Setup</h3>
  <div class="code-block">
    <span class="lang-tag">terminal</span>
<span class="cm"># Initialize Playwright in your project</span>
npm init playwright@latest

<span class="cm"># This creates:</span>
<span class="cm"># playwright.config.ts  ‚Äî configuration</span>
<span class="cm"># tests/               ‚Äî test directory</span>
<span class="cm"># tests/example.spec.ts</span>
  </div>

  <h3>Configuration</h3>
  <div class="code-block">
    <span class="lang-tag">playwright.config.ts</span>
<span class="kw">import</span> { defineConfig, devices } <span class="kw">from</span> <span class="str">'@playwright/test'</span>;

<span class="kw">export default</span> <span class="fn">defineConfig</span>({
  <span class="prop">testDir</span>: <span class="str">'./tests'</span>,
  <span class="prop">fullyParallel</span>: <span class="num">true</span>,
  <span class="prop">forbidOnly</span>: !!process.env.CI,    <span class="cm">// fail if .only in CI</span>
  <span class="prop">retries</span>: process.env.CI ? <span class="num">2</span> : <span class="num">0</span>, <span class="cm">// retry on CI</span>
  <span class="prop">workers</span>: process.env.CI ? <span class="num">1</span> : <span class="kw">undefined</span>,
  <span class="prop">reporter</span>: <span class="str">'html'</span>,

  <span class="prop">use</span>: {
    <span class="prop">baseURL</span>: <span class="str">'http://localhost:3000'</span>,
    <span class="prop">trace</span>: <span class="str">'on-first-retry'</span>,      <span class="cm">// capture trace on failure</span>
    <span class="prop">screenshot</span>: <span class="str">'only-on-failure'</span>,
    <span class="prop">video</span>: <span class="str">'retain-on-failure'</span>,
  },

  <span class="prop">projects</span>: [
    { <span class="prop">name</span>: <span class="str">'chromium'</span>, <span class="prop">use</span>: { ...devices[<span class="str">'Desktop Chrome'</span>] } },
    { <span class="prop">name</span>: <span class="str">'firefox'</span>,  <span class="prop">use</span>: { ...devices[<span class="str">'Desktop Firefox'</span>] } },
    { <span class="prop">name</span>: <span class="str">'mobile'</span>,   <span class="prop">use</span>: { ...devices[<span class="str">'iPhone 13'</span>] } },
  ],

  <span class="cm">// Auto-start your dev server</span>
  <span class="prop">webServer</span>: {
    <span class="prop">command</span>: <span class="str">'npm run dev'</span>,
    <span class="prop">url</span>: <span class="str">'http://localhost:3000'</span>,
    <span class="prop">reuseExistingServer</span>: !process.env.CI,
  },
});
  </div>

  <h3>Your First Playwright Test</h3>
  <div class="code-block">
    <span class="lang-tag">tests/auth.spec.ts</span>
<span class="kw">import</span> { test, expect } <span class="kw">from</span> <span class="str">'@playwright/test'</span>;

test.<span class="fn">describe</span>(<span class="str">'Authentication'</span>, () <span class="op">=></span> {

  test(<span class="str">'successful login redirects to dashboard'</span>, <span class="kw">async</span> ({ page }) <span class="op">=></span> {
    <span class="cm">// Navigate</span>
    <span class="kw">await</span> page.<span class="fn">goto</span>(<span class="str">'/login'</span>);

    <span class="cm">// Fill in form ‚Äî uses labels (accessible!)</span>
    <span class="kw">await</span> page.<span class="fn">getByLabel</span>(<span class="str">'Email'</span>).<span class="fn">fill</span>(<span class="str">'user@example.com'</span>);
    <span class="kw">await</span> page.<span class="fn">getByLabel</span>(<span class="str">'Password'</span>).<span class="fn">fill</span>(<span class="str">'securepass123'</span>);

    <span class="cm">// Click login button</span>
    <span class="kw">await</span> page.<span class="fn">getByRole</span>(<span class="str">'button'</span>, { <span class="prop">name</span>: <span class="str">'Sign In'</span> }).<span class="fn">click</span>();

    <span class="cm">// Assert redirect</span>
    <span class="kw">await</span> <span class="fn">expect</span>(page).<span class="fn">toHaveURL</span>(<span class="str">'/dashboard'</span>);

    <span class="cm">// Assert welcome message visible</span>
    <span class="kw">await</span> <span class="fn">expect</span>(
      page.<span class="fn">getByText</span>(<span class="str">'Welcome back!'</span>)
    ).<span class="fn">toBeVisible</span>();
  });

  test(<span class="str">'shows error for invalid credentials'</span>, <span class="kw">async</span> ({ page }) <span class="op">=></span> {
    <span class="kw">await</span> page.<span class="fn">goto</span>(<span class="str">'/login'</span>);
    <span class="kw">await</span> page.<span class="fn">getByLabel</span>(<span class="str">'Email'</span>).<span class="fn">fill</span>(<span class="str">'wrong@example.com'</span>);
    <span class="kw">await</span> page.<span class="fn">getByLabel</span>(<span class="str">'Password'</span>).<span class="fn">fill</span>(<span class="str">'wrongpass'</span>);
    <span class="kw">await</span> page.<span class="fn">getByRole</span>(<span class="str">'button'</span>, { <span class="prop">name</span>: <span class="str">'Sign In'</span> }).<span class="fn">click</span>();

    <span class="cm">// Should stay on login page</span>
    <span class="kw">await</span> <span class="fn">expect</span>(page).<span class="fn">toHaveURL</span>(<span class="str">'/login'</span>);

    <span class="cm">// Error message visible</span>
    <span class="kw">await</span> <span class="fn">expect</span>(
      page.<span class="fn">getByRole</span>(<span class="str">'alert'</span>)
    ).<span class="fn">toContainText</span>(<span class="str">'Invalid email or password'</span>);
  });

});
  </div>

  <h3>Advanced Playwright Patterns</h3>

  <div class="tabs" id="pw-tabs">
    <div class="tab active" onclick="switchTab('pw-tabs', 'pw-content', 0)">Page Objects</div>
    <div class="tab" onclick="switchTab('pw-tabs', 'pw-content', 1)">Auth State</div>
    <div class="tab" onclick="switchTab('pw-tabs', 'pw-content', 2)">API Testing</div>
    <div class="tab" onclick="switchTab('pw-tabs', 'pw-content', 3)">Fixtures</div>
    <div class="tab" onclick="switchTab('pw-tabs', 'pw-content', 4)">Network</div>
  </div>

  <div id="pw-content">
    <div class="tab-content active">
      <div class="code-block">
        <span class="lang-tag">Page Object Model</span>
<span class="cm">// pages/LoginPage.ts</span>
<span class="kw">import</span> { Page, Locator } <span class="kw">from</span> <span class="str">'@playwright/test'</span>;

<span class="kw">export class</span> <span class="type">LoginPage</span> {
  <span class="kw">readonly</span> <span class="prop">emailInput</span>: Locator;
  <span class="kw">readonly</span> <span class="prop">passwordInput</span>: Locator;
  <span class="kw">readonly</span> <span class="prop">submitBtn</span>: Locator;
  <span class="kw">readonly</span> <span class="prop">errorAlert</span>: Locator;

  <span class="fn">constructor</span>(<span class="kw">readonly</span> <span class="prop">page</span>: Page) {
    <span class="kw">this</span>.emailInput = page.<span class="fn">getByLabel</span>(<span class="str">'Email'</span>);
    <span class="kw">this</span>.passwordInput = page.<span class="fn">getByLabel</span>(<span class="str">'Password'</span>);
    <span class="kw">this</span>.submitBtn = page.<span class="fn">getByRole</span>(<span class="str">'button'</span>, { <span class="prop">name</span>: <span class="str">'Sign In'</span> });
    <span class="kw">this</span>.errorAlert = page.<span class="fn">getByRole</span>(<span class="str">'alert'</span>);
  }

  <span class="kw">async</span> <span class="fn">goto</span>() {
    <span class="kw">await</span> <span class="kw">this</span>.page.<span class="fn">goto</span>(<span class="str">'/login'</span>);
  }

  <span class="kw">async</span> <span class="fn">login</span>(email: <span class="type">string</span>, password: <span class="type">string</span>) {
    <span class="kw">await</span> <span class="kw">this</span>.emailInput.<span class="fn">fill</span>(email);
    <span class="kw">await</span> <span class="kw">this</span>.passwordInput.<span class="fn">fill</span>(password);
    <span class="kw">await</span> <span class="kw">this</span>.submitBtn.<span class="fn">click</span>();
  }
}

<span class="cm">// Usage in tests:</span>
test(<span class="str">'login works'</span>, <span class="kw">async</span> ({ page }) <span class="op">=></span> {
  <span class="kw">const</span> loginPage = <span class="kw">new</span> <span class="type">LoginPage</span>(page);
  <span class="kw">await</span> loginPage.<span class="fn">goto</span>();
  <span class="kw">await</span> loginPage.<span class="fn">login</span>(<span class="str">'user@test.com'</span>, <span class="str">'pass123'</span>);
  <span class="kw">await</span> <span class="fn">expect</span>(page).<span class="fn">toHaveURL</span>(<span class="str">'/dashboard'</span>);
});
      </div>
    </div>

    <div class="tab-content">
      <div class="code-block">
        <span class="lang-tag">Reusing Auth State</span>
<span class="cm">// Save auth state once, reuse across tests</span>

<span class="cm">// auth.setup.ts</span>
<span class="kw">import</span> { test <span class="kw">as</span> setup } <span class="kw">from</span> <span class="str">'@playwright/test'</span>;

setup(<span class="str">'authenticate'</span>, <span class="kw">async</span> ({ page }) <span class="op">=></span> {
  <span class="kw">await</span> page.<span class="fn">goto</span>(<span class="str">'/login'</span>);
  <span class="kw">await</span> page.<span class="fn">getByLabel</span>(<span class="str">'Email'</span>).<span class="fn">fill</span>(<span class="str">'admin@test.com'</span>);
  <span class="kw">await</span> page.<span class="fn">getByLabel</span>(<span class="str">'Password'</span>).<span class="fn">fill</span>(<span class="str">'admin123'</span>);
  <span class="kw">await</span> page.<span class="fn">getByRole</span>(<span class="str">'button'</span>, { <span class="prop">name</span>: <span class="str">'Sign In'</span> }).<span class="fn">click</span>();
  <span class="kw">await</span> page.<span class="fn">waitForURL</span>(<span class="str">'/dashboard'</span>);

  <span class="cm">// Save signed-in state to a file</span>
  <span class="kw">await</span> page.context().<span class="fn">storageState</span>({
    <span class="prop">path</span>: <span class="str">'./tests/.auth/user.json'</span>
  });
});

<span class="cm">// In config: tests that need auth use this state</span>
<span class="cm">// { name: 'authed', use: { storageState: './tests/.auth/user.json' } }</span>
      </div>
    </div>

    <div class="tab-content">
      <div class="code-block">
        <span class="lang-tag">API Testing with Playwright</span>
<span class="cm">// Playwright can test APIs directly (no browser needed!)</span>
<span class="kw">import</span> { test, expect } <span class="kw">from</span> <span class="str">'@playwright/test'</span>;

test(<span class="str">'GET /api/products returns products'</span>, <span class="kw">async</span> ({ request }) <span class="op">=></span> {
  <span class="kw">const</span> response = <span class="kw">await</span> request.<span class="fn">get</span>(<span class="str">'/api/products'</span>);

  <span class="fn">expect</span>(response.<span class="fn">ok</span>()).<span class="fn">toBeTruthy</span>();

  <span class="kw">const</span> data = <span class="kw">await</span> response.<span class="fn">json</span>();
  <span class="fn">expect</span>(data.products.length).<span class="fn">toBeGreaterThan</span>(<span class="num">0</span>);
  <span class="fn">expect</span>(data.products[<span class="num">0</span>]).<span class="fn">toHaveProperty</span>(<span class="str">'name'</span>);
  <span class="fn">expect</span>(data.products[<span class="num">0</span>]).<span class="fn">toHaveProperty</span>(<span class="str">'price'</span>);
});

test(<span class="str">'POST /api/orders requires auth'</span>, <span class="kw">async</span> ({ request }) <span class="op">=></span> {
  <span class="kw">const</span> response = <span class="kw">await</span> request.<span class="fn">post</span>(<span class="str">'/api/orders'</span>, {
    <span class="prop">data</span>: { <span class="prop">items</span>: [] }
  });

  <span class="fn">expect</span>(response.<span class="fn">status</span>()).<span class="fn">toBe</span>(<span class="num">401</span>);
});
      </div>
    </div>

    <div class="tab-content">
      <div class="code-block">
        <span class="lang-tag">Custom Fixtures</span>
<span class="cm">// fixtures.ts ‚Äî Create reusable test contexts</span>
<span class="kw">import</span> { test <span class="kw">as</span> base, expect } <span class="kw">from</span> <span class="str">'@playwright/test'</span>;
<span class="kw">import</span> { LoginPage } <span class="kw">from</span> <span class="str">'./pages/LoginPage'</span>;
<span class="kw">import</span> { DashboardPage } <span class="kw">from</span> <span class="str">'./pages/DashboardPage'</span>;

<span class="kw">type</span> <span class="type">MyFixtures</span> = {
  <span class="prop">loginPage</span>: LoginPage;
  <span class="prop">dashboardPage</span>: DashboardPage;
};

<span class="kw">export const</span> test = base.<span class="fn">extend</span>&lt;<span class="type">MyFixtures</span>&gt;({
  <span class="prop">loginPage</span>: <span class="kw">async</span> ({ page }, use) <span class="op">=></span> {
    <span class="kw">const</span> loginPage = <span class="kw">new</span> <span class="type">LoginPage</span>(page);
    <span class="kw">await</span> loginPage.<span class="fn">goto</span>();
    <span class="kw">await</span> <span class="fn">use</span>(loginPage);
  },
  <span class="prop">dashboardPage</span>: <span class="kw">async</span> ({ page }, use) <span class="op">=></span> {
    <span class="kw">await</span> <span class="fn">use</span>(<span class="kw">new</span> <span class="type">DashboardPage</span>(page));
  },
});

<span class="cm">// Usage:</span>
test(<span class="str">'dashboard loads'</span>, <span class="kw">async</span> ({ loginPage, dashboardPage }) <span class="op">=></span> {
  <span class="kw">await</span> loginPage.<span class="fn">login</span>(<span class="str">'user@test.com'</span>, <span class="str">'pass'</span>);
  <span class="kw">await</span> <span class="fn">expect</span>(dashboardPage.heading).<span class="fn">toBeVisible</span>();
});
      </div>
    </div>

    <div class="tab-content">
      <div class="code-block">
        <span class="lang-tag">Network Interception</span>
<span class="cm">// Mock or intercept network requests</span>
test(<span class="str">'shows error on API failure'</span>, <span class="kw">async</span> ({ page }) <span class="op">=></span> {
  <span class="cm">// Intercept and return error</span>
  <span class="kw">await</span> page.<span class="fn">route</span>(<span class="str">'**/api/products'</span>, route <span class="op">=></span> {
    route.<span class="fn">fulfill</span>({
      <span class="prop">status</span>: <span class="num">500</span>,
      <span class="prop">body</span>: <span class="str">'Internal Server Error'</span>
    });
  });

  <span class="kw">await</span> page.<span class="fn">goto</span>(<span class="str">'/products'</span>);

  <span class="kw">await</span> <span class="fn">expect</span>(
    page.<span class="fn">getByText</span>(<span class="str">'Failed to load products'</span>)
  ).<span class="fn">toBeVisible</span>();
});

<span class="cm">// Wait for a specific API call</span>
test(<span class="str">'search calls API'</span>, <span class="kw">async</span> ({ page }) <span class="op">=></span> {
  <span class="kw">await</span> page.<span class="fn">goto</span>(<span class="str">'/products'</span>);

  <span class="cm">// Set up listener BEFORE the action</span>
  <span class="kw">const</span> responsePromise = page.<span class="fn">waitForResponse</span>(
    resp <span class="op">=></span> resp.<span class="fn">url</span>().<span class="fn">includes</span>(<span class="str">'/api/search'</span>)
      && resp.<span class="fn">status</span>() === <span class="num">200</span>
  );

  <span class="kw">await</span> page.<span class="fn">getByPlaceholder</span>(<span class="str">'Search...'</span>).<span class="fn">fill</span>(<span class="str">'widget'</span>);

  <span class="kw">const</span> response = <span class="kw">await</span> responsePromise;
  <span class="kw">const</span> data = <span class="kw">await</span> response.<span class="fn">json</span>();
  <span class="fn">expect</span>(data.results.length).<span class="fn">toBeGreaterThan</span>(<span class="num">0</span>);
});
      </div>
    </div>
  </div>

  <div class="btn-group">
    <button class="btn btn-primary" onclick="markDone('playwright'); showSection('cypress', document.querySelector('[data-section=cypress]'))">Next: Cypress ‚Üí</button>
  </div>
</div>

<!-- ============ CYPRESS ============ -->
<div class="section" id="sec-cypress">
  <h2>üå≤ Cypress Deep Dive</h2>
  <p class="section-subtitle">The developer-friendly E2E framework with time-travel debugging.</p>

  <div class="card info">
    <div class="card-title">Cypress Strengths</div>
    <ul class="styled-list">
      <li>Runs in the same event loop as your app ‚Äî direct DOM access</li>
      <li>Time-travel debugging ‚Äî see snapshots at every step</li>
      <li>Automatic waiting ‚Äî no explicit waits needed</li>
      <li>Excellent DX ‚Äî fast feedback, great error messages</li>
      <li>Network stubbing built-in with <code>cy.intercept()</code></li>
    </ul>
  </div>

  <h3>Setup</h3>
  <div class="code-block">
    <span class="lang-tag">terminal</span>
npm install cypress --save-dev
npx cypress open     <span class="cm"># Opens interactive runner</span>
npx cypress run      <span class="cm"># Headless mode for CI</span>
  </div>

  <h3>Cypress Test Examples</h3>

  <div class="tabs" id="cy-tabs">
    <div class="tab active" onclick="switchTab('cy-tabs', 'cy-content', 0)">Basic</div>
    <div class="tab" onclick="switchTab('cy-tabs', 'cy-content', 1)">Forms</div>
    <div class="tab" onclick="switchTab('cy-tabs', 'cy-content', 2)">Network</div>
    <div class="tab" onclick="switchTab('cy-tabs', 'cy-content', 3)">Commands</div>
    <div class="tab" onclick="switchTab('cy-tabs', 'cy-content', 4)">Component</div>
  </div>

  <div id="cy-content">
    <div class="tab-content active">
      <div class="code-block">
        <span class="lang-tag">cypress/e2e/login.cy.js</span>
<span class="fn">describe</span>(<span class="str">'Login Page'</span>, () <span class="op">=></span> {
  <span class="fn">beforeEach</span>(() <span class="op">=></span> {
    cy.<span class="fn">visit</span>(<span class="str">'/login'</span>);
  });

  <span class="fn">it</span>(<span class="str">'logs in successfully'</span>, () <span class="op">=></span> {
    cy.<span class="fn">get</span>(<span class="str">'[data-testid="email"]'</span>).<span class="fn">type</span>(<span class="str">'user@test.com'</span>);
    cy.<span class="fn">get</span>(<span class="str">'[data-testid="password"]'</span>).<span class="fn">type</span>(<span class="str">'password123'</span>);
    cy.<span class="fn">get</span>(<span class="str">'[data-testid="submit"]'</span>).<span class="fn">click</span>();

    <span class="cm">// Cypress auto-waits for assertions</span>
    cy.<span class="fn">url</span>().<span class="fn">should</span>(<span class="str">'include'</span>, <span class="str">'/dashboard'</span>);
    cy.<span class="fn">contains</span>(<span class="str">'Welcome back'</span>).<span class="fn">should</span>(<span class="str">'be.visible'</span>);
  });

  <span class="fn">it</span>(<span class="str">'shows validation errors'</span>, () <span class="op">=></span> {
    cy.<span class="fn">get</span>(<span class="str">'[data-testid="submit"]'</span>).<span class="fn">click</span>();
    cy.<span class="fn">contains</span>(<span class="str">'Email is required'</span>).<span class="fn">should</span>(<span class="str">'be.visible'</span>);
    cy.<span class="fn">contains</span>(<span class="str">'Password is required'</span>).<span class="fn">should</span>(<span class="str">'be.visible'</span>);
  });
});
      </div>
    </div>

    <div class="tab-content">
      <div class="code-block">
        <span class="lang-tag">Form Testing</span>
<span class="fn">it</span>(<span class="str">'fills and submits complex form'</span>, () <span class="op">=></span> {
  cy.<span class="fn">visit</span>(<span class="str">'/register'</span>);

  <span class="cm">// Text input</span>
  cy.<span class="fn">get</span>(<span class="str">'#name'</span>).<span class="fn">type</span>(<span class="str">'Jane Doe'</span>);

  <span class="cm">// Select dropdown</span>
  cy.<span class="fn">get</span>(<span class="str">'#country'</span>).<span class="fn">select</span>(<span class="str">'United States'</span>);

  <span class="cm">// Checkbox</span>
  cy.<span class="fn">get</span>(<span class="str">'#terms'</span>).<span class="fn">check</span>();

  <span class="cm">// Radio button</span>
  cy.<span class="fn">get</span>(<span class="str">'[value="premium"]'</span>).<span class="fn">check</span>();

  <span class="cm">// File upload</span>
  cy.<span class="fn">get</span>(<span class="str">'#avatar'</span>).<span class="fn">selectFile</span>(<span class="str">'cypress/fixtures/photo.jpg'</span>);

  <span class="cm">// Date input</span>
  cy.<span class="fn">get</span>(<span class="str">'#birthdate'</span>).<span class="fn">type</span>(<span class="str">'1990-05-15'</span>);

  <span class="cm">// Submit</span>
  cy.<span class="fn">get</span>(<span class="str">'form'</span>).<span class="fn">submit</span>();
  cy.<span class="fn">contains</span>(<span class="str">'Registration successful!'</span>);
});
      </div>
    </div>

    <div class="tab-content">
      <div class="code-block">
        <span class="lang-tag">Network Stubbing</span>
<span class="fn">it</span>(<span class="str">'displays products from API'</span>, () <span class="op">=></span> {
  <span class="cm">// Intercept API call and return mock data</span>
  cy.<span class="fn">intercept</span>(<span class="str">'GET'</span>, <span class="str">'/api/products'</span>, {
    <span class="prop">statusCode</span>: <span class="num">200</span>,
    <span class="prop">body</span>: [
      { <span class="prop">id</span>: <span class="num">1</span>, <span class="prop">name</span>: <span class="str">'Widget'</span>, <span class="prop">price</span>: <span class="num">29.99</span> },
      { <span class="prop">id</span>: <span class="num">2</span>, <span class="prop">name</span>: <span class="str">'Gadget'</span>, <span class="prop">price</span>: <span class="num">49.99</span> },
    ]
  }).<span class="fn">as</span>(<span class="str">'getProducts'</span>);

  cy.<span class="fn">visit</span>(<span class="str">'/products'</span>);
  cy.<span class="fn">wait</span>(<span class="str">'@getProducts'</span>); <span class="cm">// Wait for the intercepted call</span>

  cy.<span class="fn">get</span>(<span class="str">'.product-card'</span>).<span class="fn">should</span>(<span class="str">'have.length'</span>, <span class="num">2</span>);
  cy.<span class="fn">contains</span>(<span class="str">'Widget'</span>);
  cy.<span class="fn">contains</span>(<span class="str">'$29.99'</span>);
});

<span class="fn">it</span>(<span class="str">'handles API error gracefully'</span>, () <span class="op">=></span> {
  cy.<span class="fn">intercept</span>(<span class="str">'GET'</span>, <span class="str">'/api/products'</span>, {
    <span class="prop">statusCode</span>: <span class="num">500</span>,
    <span class="prop">body</span>: { <span class="prop">error</span>: <span class="str">'Server Error'</span> }
  });

  cy.<span class="fn">visit</span>(<span class="str">'/products'</span>);
  cy.<span class="fn">contains</span>(<span class="str">'Something went wrong'</span>).<span class="fn">should</span>(<span class="str">'be.visible'</span>);
  cy.<span class="fn">get</span>(<span class="str">'[data-testid="retry-btn"]'</span>).<span class="fn">should</span>(<span class="str">'be.visible'</span>);
});
      </div>
    </div>

    <div class="tab-content">
      <div class="code-block">
        <span class="lang-tag">Custom Commands</span>
<span class="cm">// cypress/support/commands.js</span>

<span class="cm">// Reusable login command</span>
Cypress.Commands.<span class="fn">add</span>(<span class="str">'login'</span>, (email, password) <span class="op">=></span> {
  <span class="cm">// Fast login via API (skip UI for speed!)</span>
  cy.<span class="fn">request</span>({
    <span class="prop">method</span>: <span class="str">'POST'</span>,
    <span class="prop">url</span>: <span class="str">'/api/auth/login'</span>,
    <span class="prop">body</span>: { email, password }
  }).<span class="fn">then</span>(({ body }) <span class="op">=></span> {
    window.localStorage.<span class="fn">setItem</span>(<span class="str">'authToken'</span>, body.token);
  });
});

<span class="cm">// Reusable seed command</span>
Cypress.Commands.<span class="fn">add</span>(<span class="str">'seedDatabase'</span>, (fixture) <span class="op">=></span> {
  cy.<span class="fn">request</span>(<span class="str">'POST'</span>, <span class="str">'/api/test/seed'</span>, { fixture });
});

<span class="cm">// Usage in tests:</span>
<span class="fn">beforeEach</span>(() <span class="op">=></span> {
  cy.<span class="fn">seedDatabase</span>(<span class="str">'products'</span>);
  cy.<span class="fn">login</span>(<span class="str">'admin@test.com'</span>, <span class="str">'admin123'</span>);
});
      </div>
    </div>

    <div class="tab-content">
      <div class="code-block">
        <span class="lang-tag">Component Testing (Cypress 12+)</span>
<span class="cm">// Button.cy.jsx ‚Äî test React components in isolation</span>
<span class="kw">import</span> { Button } <span class="kw">from</span> <span class="str">'./Button'</span>;

<span class="fn">describe</span>(<span class="str">'Button Component'</span>, () <span class="op">=></span> {
  <span class="fn">it</span>(<span class="str">'fires onClick'</span>, () <span class="op">=></span> {
    <span class="kw">const</span> onClickSpy = cy.<span class="fn">spy</span>().<span class="fn">as</span>(<span class="str">'clickHandler'</span>);

    cy.<span class="fn">mount</span>(<span class="op">&lt;</span><span class="type">Button</span> <span class="prop">onClick</span>={onClickSpy}<span class="op">></span>Click me<span class="op">&lt;/</span><span class="type">Button</span><span class="op">></span>);

    cy.<span class="fn">get</span>(<span class="str">'button'</span>).<span class="fn">click</span>();
    cy.<span class="fn">get</span>(<span class="str">'@clickHandler'</span>).<span class="fn">should</span>(<span class="str">'have.been.calledOnce'</span>);
  });

  <span class="fn">it</span>(<span class="str">'is disabled when loading'</span>, () <span class="op">=></span> {
    cy.<span class="fn">mount</span>(<span class="op">&lt;</span><span class="type">Button</span> <span class="prop">loading</span><span class="op">></span>Save<span class="op">&lt;/</span><span class="type">Button</span><span class="op">></span>);
    cy.<span class="fn">get</span>(<span class="str">'button'</span>).<span class="fn">should</span>(<span class="str">'be.disabled'</span>);
    cy.<span class="fn">get</span>(<span class="str">'.spinner'</span>).<span class="fn">should</span>(<span class="str">'be.visible'</span>);
  });
});
      </div>
    </div>
  </div>

  <div class="btn-group">
    <button class="btn btn-primary" onclick="markDone('cypress'); showSection('visual', document.querySelector('[data-section=visual]'))">Next: Visual Regression ‚Üí</button>
  </div>
</div>

<!-- ============ VISUAL REGRESSION ============ -->
<div class="section" id="sec-visual">
  <h2>üëÅÔ∏è Visual Regression Testing</h2>
  <p class="section-subtitle">Catch unintended visual changes by comparing screenshots pixel-by-pixel.</p>

  <h3>What It Does</h3>
  <div class="flow-diagram">
    <div class="flow-box">üì∏ Take Baseline<br>Screenshot</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box">üîÑ Make Code<br>Changes</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box">üì∏ Take New<br>Screenshot</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box">üîç Compare<br>Diff</div>
  </div>

  <div class="card info">
    <div class="card-title">When Visual Tests Shine</div>
    <ul class="styled-list">
      <li>CSS changes that break layouts in unexpected places</li>
      <li>Component library updates</li>
      <li>Theme changes (dark mode, brand updates)</li>
      <li>Responsive design breakpoints</li>
      <li>Cross-browser rendering differences</li>
    </ul>
  </div>

  <h3>Tools Landscape</h3>
  <table class="comparison-table">
    <thead><tr><th>Tool</th><th>Type</th><th>Best For</th></tr></thead>
    <tbody>
      <tr><td><strong>Playwright</strong> (built-in)</td><td>Screenshot comparison</td><td>Already using Playwright</td></tr>
      <tr><td><strong>Percy</strong> (BrowserStack)</td><td>Cloud service</td><td>Cross-browser visual testing</td></tr>
      <tr><td><strong>Chromatic</strong></td><td>Cloud service</td><td>Storybook components</td></tr>
      <tr><td><strong>BackstopJS</strong></td><td>Open source</td><td>Multi-viewport testing</td></tr>
      <tr><td><strong>Applitools</strong></td><td>AI-powered</td><td>Intelligent diff detection</td></tr>
    </tbody>
  </table>

  <h3>Playwright Visual Testing</h3>
  <div class="code-block">
    <span class="lang-tag">visual.spec.ts</span>
<span class="kw">import</span> { test, expect } <span class="kw">from</span> <span class="str">'@playwright/test'</span>;

test(<span class="str">'homepage visual snapshot'</span>, <span class="kw">async</span> ({ page }) <span class="op">=></span> {
  <span class="kw">await</span> page.<span class="fn">goto</span>(<span class="str">'/'</span>);

  <span class="cm">// Wait for all images/fonts to load</span>
  <span class="kw">await</span> page.<span class="fn">waitForLoadState</span>(<span class="str">'networkidle'</span>);

  <span class="cm">// Full page screenshot comparison</span>
  <span class="kw">await</span> <span class="fn">expect</span>(page).<span class="fn">toHaveScreenshot</span>(<span class="str">'homepage.png'</span>, {
    <span class="prop">maxDiffPixelRatio</span>: <span class="num">0.01</span>,  <span class="cm">// allow 1% diff</span>
    <span class="prop">fullPage</span>: <span class="num">true</span>,
  });
});

test(<span class="str">'button hover state'</span>, <span class="kw">async</span> ({ page }) <span class="op">=></span> {
  <span class="kw">await</span> page.<span class="fn">goto</span>(<span class="str">'/components'</span>);

  <span class="kw">const</span> button = page.<span class="fn">getByRole</span>(<span class="str">'button'</span>, { <span class="prop">name</span>: <span class="str">'Primary'</span> });

  <span class="cm">// Screenshot specific element</span>
  <span class="kw">await</span> <span class="fn">expect</span>(button).<span class="fn">toHaveScreenshot</span>(<span class="str">'btn-default.png'</span>);

  <span class="cm">// Hover and screenshot</span>
  <span class="kw">await</span> button.<span class="fn">hover</span>();
  <span class="kw">await</span> <span class="fn">expect</span>(button).<span class="fn">toHaveScreenshot</span>(<span class="str">'btn-hover.png'</span>);
});

test(<span class="str">'responsive layout'</span>, <span class="kw">async</span> ({ page }) <span class="op">=></span> {
  <span class="cm">// Test multiple viewports</span>
  <span class="kw">const</span> viewports = [
    { <span class="prop">width</span>: <span class="num">375</span>,  <span class="prop">height</span>: <span class="num">667</span>,  <span class="prop">name</span>: <span class="str">'mobile'</span> },
    { <span class="prop">width</span>: <span class="num">768</span>,  <span class="prop">height</span>: <span class="num">1024</span>, <span class="prop">name</span>: <span class="str">'tablet'</span> },
    { <span class="prop">width</span>: <span class="num">1440</span>, <span class="prop">height</span>: <span class="num">900</span>,  <span class="prop">name</span>: <span class="str">'desktop'</span> },
  ];

  <span class="kw">for</span> (<span class="kw">const</span> vp <span class="kw">of</span> viewports) {
    <span class="kw">await</span> page.<span class="fn">setViewportSize</span>({ <span class="prop">width</span>: vp.width, <span class="prop">height</span>: vp.height });
    <span class="kw">await</span> page.<span class="fn">goto</span>(<span class="str">'/pricing'</span>);
    <span class="kw">await</span> <span class="fn">expect</span>(page).<span class="fn">toHaveScreenshot</span>(<span class="str">`pricing-<span class="op">${</span>vp.name<span class="op">}</span>.png`</span>);
  }
});
  </div>

  <h3>Handling Flaky Visual Tests</h3>
  <div class="code-block">
    <span class="lang-tag">Anti-flake techniques</span>
<span class="cm">// Problem: Dynamic content causes false failures</span>

<span class="cm">// Solution 1: Mask dynamic areas</span>
<span class="kw">await</span> <span class="fn">expect</span>(page).<span class="fn">toHaveScreenshot</span>(<span class="str">'dashboard.png'</span>, {
  <span class="prop">mask</span>: [
    page.<span class="fn">locator</span>(<span class="str">'.timestamp'</span>),    <span class="cm">// hide dates</span>
    page.<span class="fn">locator</span>(<span class="str">'.avatar'</span>),       <span class="cm">// hide dynamic images</span>
    page.<span class="fn">locator</span>(<span class="str">'.ad-banner'</span>),    <span class="cm">// hide ads</span>
  ],
});

<span class="cm">// Solution 2: Wait for animations to finish</span>
<span class="kw">await</span> page.<span class="fn">evaluate</span>(() <span class="op">=></span> {
  document.querySelectorAll(<span class="str">'*'</span>).<span class="fn">forEach</span>(el <span class="op">=></span> {
    el.style.animation = <span class="str">'none'</span>;
    el.style.transition = <span class="str">'none'</span>;
  });
});

<span class="cm">// Solution 3: Use threshold</span>
<span class="kw">await</span> <span class="fn">expect</span>(page).<span class="fn">toHaveScreenshot</span>({
  <span class="prop">maxDiffPixels</span>: <span class="num">100</span>,     <span class="cm">// allow up to 100 pixels diff</span>
  <span class="prop">threshold</span>: <span class="num">0.2</span>,          <span class="cm">// per-pixel color threshold</span>
});
  </div>

  <div class="btn-group">
    <button class="btn btn-primary" onclick="markDone('visual'); showSection('strategies', document.querySelector('[data-section=strategies]'))">Next: Test Strategies ‚Üí</button>
  </div>
</div>

<!-- ============ STRATEGIES ============ -->
<div class="section" id="sec-strategies">
  <h2>‚ôüÔ∏è Test Strategies</h2>
  <p class="section-subtitle">How to decide WHAT to test, HOW MUCH to test, and WHERE to focus ‚Äî the thinking that gets you hired.</p>

  <h3>The Risk-Based Approach</h3>
  <div class="card highlight">
    <div class="card-title">üéØ Core Principle</div>
    <p><strong>Test the things that would hurt the most if they broke.</strong> Not everything needs a test ‚Äî prioritize by business impact √ó likelihood of breakage.</p>
  </div>

  <div class="code-block">
    <span class="lang-tag">Risk Matrix</span>
<span class="cm">// HIGH RISK ‚Üí Heavy Testing</span>
<span class="cm">// ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span>
<span class="cm">// ‚îÇ  Likelihood of Breaking                       ‚îÇ</span>
<span class="cm">// ‚îÇ         HIGH              LOW                 ‚îÇ</span>
<span class="cm">// ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ</span>
<span class="cm">// ‚îÇ  ‚îÇ üî¥ CRITICAL      ‚îÇ üü° IMPORTANT    ‚îÇ HIGH  ‚îÇ</span>
<span class="cm">// ‚îÇ  ‚îÇ Payment flow     ‚îÇ Settings page   ‚îÇ       ‚îÇ</span>
<span class="cm">// ‚îÇ  ‚îÇ Auth system      ‚îÇ Profile edit    ‚îÇ Impact‚îÇ</span>
<span class="cm">// ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§       ‚îÇ</span>
<span class="cm">// ‚îÇ  ‚îÇ üü° MODERATE      ‚îÇ üü¢ LOW PRIORITY ‚îÇ       ‚îÇ</span>
<span class="cm">// ‚îÇ  ‚îÇ Notification UI  ‚îÇ About page      ‚îÇ LOW   ‚îÇ</span>
<span class="cm">// ‚îÇ  ‚îÇ Tooltip logic    ‚îÇ Footer links    ‚îÇ       ‚îÇ</span>
<span class="cm">// ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ</span>
<span class="cm">// ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span>
  </div>

  <h3>Strategy Patterns</h3>

  <div class="tabs" id="strat-tabs">
    <div class="tab active" onclick="switchTab('strat-tabs', 'strat-content', 0)">Coverage Goals</div>
    <div class="tab" onclick="switchTab('strat-tabs', 'strat-content', 1)">Test Distribution</div>
    <div class="tab" onclick="switchTab('strat-tabs', 'strat-content', 2)">When to Write What</div>
    <div class="tab" onclick="switchTab('strat-tabs', 'strat-content', 3)">TDD vs BDD</div>
  </div>

  <div id="strat-content">
    <div class="tab-content active">
      <h4>Meaningful Coverage Targets</h4>
      <div class="card warning">
        <div class="card-title">‚ö†Ô∏è 100% Coverage Is a Trap</div>
        <p>Code coverage measures which lines <em>executed</em>, not whether your tests are <em>meaningful</em>. 100% coverage with shallow assertions is worse than 70% coverage with deep assertions.</p>
      </div>
      <div class="code-block">
        <span class="lang-tag">Coverage Strategy</span>
<span class="cm">// GOOD: Meaningful coverage targets</span>
<span class="cm">// ‚úÖ Critical paths: 90%+ coverage</span>
<span class="cm">// ‚úÖ Business logic: 80%+ coverage</span>
<span class="cm">// ‚úÖ UI components: 60-70% coverage</span>
<span class="cm">// ‚úÖ Utility functions: 95%+ coverage</span>

<span class="cm">// BAD: Gaming the metric</span>
<span class="cm">// ‚ùå Testing getters/setters for coverage %</span>
<span class="cm">// ‚ùå Testing framework code (React internals)</span>
<span class="cm">// ‚ùå Snapshot tests without understanding what they capture</span>
      </div>
    </div>

    <div class="tab-content">
      <h4>Recommended Test Distribution</h4>
      <div class="code-block">
        <span class="lang-tag">Test Distribution</span>
<span class="cm">// For a typical web application:</span>
<span class="cm">//</span>
<span class="cm">// Static Analysis (TypeScript + ESLint)  ‚Üí catches ~30% of bugs</span>
<span class="cm">// Unit Tests        (Jest)               ‚Üí ~200-500 tests</span>
<span class="cm">// Integration Tests (Testing Library)    ‚Üí ~50-150 tests  ‚Üê sweet spot</span>
<span class="cm">// E2E Tests         (Playwright/Cypress) ‚Üí ~10-30 tests</span>
<span class="cm">// Visual Tests      (Chromatic/Percy)    ‚Üí ~20-50 screenshots</span>
<span class="cm">//</span>
<span class="cm">// Total test runtime targets:</span>
<span class="cm">// Unit + Integration: &lt; 5 minutes</span>
<span class="cm">// E2E: &lt; 15 minutes</span>
<span class="cm">// Visual: &lt; 10 minutes</span>
      </div>
    </div>

    <div class="tab-content">
      <h4>Test Decision Framework</h4>
      <div class="code-block">
        <span class="lang-tag">Decision Tree</span>
<span class="cm">// Is it a pure function with complex logic?</span>
<span class="cm">//   ‚Üí Unit test</span>
<span class="cm">//</span>
<span class="cm">// Does it involve multiple components or API calls?</span>
<span class="cm">//   ‚Üí Integration test with Testing Library + MSW</span>
<span class="cm">//</span>
<span class="cm">// Is it a critical user journey (login, payment)?</span>
<span class="cm">//   ‚Üí E2E test</span>
<span class="cm">//</span>
<span class="cm">// Is it primarily visual (layout, styling)?</span>
<span class="cm">//   ‚Üí Visual regression test</span>
<span class="cm">//</span>
<span class="cm">// Is it type-related (wrong argument type)?</span>
<span class="cm">//   ‚Üí TypeScript / static analysis</span>
<span class="cm">//</span>
<span class="cm">// Is it a bug fix?</span>
<span class="cm">//   ‚Üí Write a regression test at the LOWEST possible level</span>
      </div>
    </div>

    <div class="tab-content">
      <h4>TDD vs BDD</h4>
      <table class="comparison-table">
        <thead><tr><th>Aspect</th><th>TDD</th><th>BDD</th></tr></thead>
        <tbody>
          <tr><td>Focus</td><td>Developer perspective</td><td>Business/user perspective</td></tr>
          <tr><td>Language</td><td>Technical: "should return..."</td><td>Natural: "Given/When/Then"</td></tr>
          <tr><td>Cycle</td><td>Red ‚Üí Green ‚Üí Refactor</td><td>Feature ‚Üí Scenario ‚Üí Steps</td></tr>
          <tr><td>Best for</td><td>Unit/Integration tests</td><td>E2E / Acceptance tests</td></tr>
          <tr><td>Tools</td><td>Jest, Vitest</td><td>Cucumber, Behave</td></tr>
        </tbody>
      </table>
      <div class="code-block">
        <span class="lang-tag">BDD Example</span>
<span class="cm">// Feature: Shopping Cart</span>
<span class="cm">//   Scenario: Add item to empty cart</span>
<span class="cm">//     Given I am on the product page for "Widget"</span>
<span class="cm">//     When I click "Add to Cart"</span>
<span class="cm">//     Then the cart badge should show "1"</span>
<span class="cm">//     And the cart should contain "Widget"</span>
      </div>
    </div>
  </div>

  <h3>Test Organization</h3>
  <div class="code-block">
    <span class="lang-tag">Project Structure</span>
<span class="cm">// Recommended file structure:</span>
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ Button/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Button.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Button.test.tsx        <span class="cm">‚Üê unit tests (co-located)</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Button.stories.tsx     <span class="cm">‚Üê storybook</span>
‚îÇ   ‚îî‚îÄ‚îÄ Cart/
‚îÇ       ‚îú‚îÄ‚îÄ Cart.tsx
‚îÇ       ‚îî‚îÄ‚îÄ Cart.integration.test.tsx <span class="cm">‚Üê integration</span>
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ formatPrice.ts
‚îÇ   ‚îî‚îÄ‚îÄ formatPrice.test.ts       <span class="cm">‚Üê unit test</span>
tests/
‚îú‚îÄ‚îÄ e2e/
‚îÇ   ‚îú‚îÄ‚îÄ checkout.spec.ts           <span class="cm">‚Üê E2E tests</span>
‚îÇ   ‚îú‚îÄ‚îÄ auth.spec.ts
‚îÇ   ‚îî‚îÄ‚îÄ pages/                     <span class="cm">‚Üê Page Objects</span>
‚îÇ       ‚îú‚îÄ‚îÄ LoginPage.ts
‚îÇ       ‚îî‚îÄ‚îÄ CartPage.ts
‚îú‚îÄ‚îÄ visual/
‚îÇ   ‚îî‚îÄ‚îÄ homepage.visual.spec.ts    <span class="cm">‚Üê Visual tests</span>
‚îî‚îÄ‚îÄ fixtures/
    ‚îî‚îÄ‚îÄ products.json              <span class="cm">‚Üê Test data</span>
  </div>

  <div class="btn-group">
    <button class="btn btn-primary" onclick="markDone('strategies'); showSection('automation', document.querySelector('[data-section=automation]'))">Next: Test Automation & CI ‚Üí</button>
  </div>
</div>

<!-- ============ AUTOMATION ============ -->
<div class="section" id="sec-automation">
  <h2>‚öôÔ∏è Test Automation & CI/CD</h2>
  <p class="section-subtitle">Running tests automatically on every commit ‚Äî the foundation of shipping with confidence.</p>

  <h3>CI Pipeline Design</h3>
  <div class="flow-diagram">
    <div class="flow-box">üìù Push Code</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box">üîç Lint + Type Check</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box">‚ö° Unit Tests</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box">üîó Integration</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box">üé≠ E2E</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box">‚úÖ Deploy</div>
  </div>

  <h3>GitHub Actions Example</h3>
  <div class="code-block">
    <span class="lang-tag">.github/workflows/test.yml</span>
<span class="prop">name</span>: <span class="str">CI Test Suite</span>

<span class="prop">on</span>:
  <span class="prop">push</span>:
    <span class="prop">branches</span>: [main, develop]
  <span class="prop">pull_request</span>:
    <span class="prop">branches</span>: [main]

<span class="prop">jobs</span>:
  <span class="cm"># Stage 1: Fast checks (fail fast!)</span>
  <span class="prop">lint-and-type</span>:
    <span class="prop">runs-on</span>: <span class="str">ubuntu-latest</span>
    <span class="prop">steps</span>:
      - <span class="prop">uses</span>: <span class="str">actions/checkout@v4</span>
      - <span class="prop">uses</span>: <span class="str">actions/setup-node@v4</span>
        <span class="prop">with</span>:
          <span class="prop">node-version</span>: <span class="num">20</span>
          <span class="prop">cache</span>: <span class="str">'npm'</span>
      - <span class="prop">run</span>: <span class="str">npm ci</span>
      - <span class="prop">run</span>: <span class="str">npm run lint</span>
      - <span class="prop">run</span>: <span class="str">npm run typecheck</span>

  <span class="cm"># Stage 2: Unit + Integration tests</span>
  <span class="prop">test-unit</span>:
    <span class="prop">needs</span>: <span class="str">lint-and-type</span>
    <span class="prop">runs-on</span>: <span class="str">ubuntu-latest</span>
    <span class="prop">steps</span>:
      - <span class="prop">uses</span>: <span class="str">actions/checkout@v4</span>
      - <span class="prop">uses</span>: <span class="str">actions/setup-node@v4</span>
        <span class="prop">with</span>:
          <span class="prop">node-version</span>: <span class="num">20</span>
          <span class="prop">cache</span>: <span class="str">'npm'</span>
      - <span class="prop">run</span>: <span class="str">npm ci</span>
      - <span class="prop">run</span>: <span class="str">npm run test -- --coverage</span>
      - <span class="prop">uses</span>: <span class="str">codecov/codecov-action@v3</span>

  <span class="cm"># Stage 3: E2E tests (only if unit tests pass)</span>
  <span class="prop">test-e2e</span>:
    <span class="prop">needs</span>: <span class="str">test-unit</span>
    <span class="prop">runs-on</span>: <span class="str">ubuntu-latest</span>
    <span class="prop">steps</span>:
      - <span class="prop">uses</span>: <span class="str">actions/checkout@v4</span>
      - <span class="prop">uses</span>: <span class="str">actions/setup-node@v4</span>
        <span class="prop">with</span>:
          <span class="prop">node-version</span>: <span class="num">20</span>
          <span class="prop">cache</span>: <span class="str">'npm'</span>
      - <span class="prop">run</span>: <span class="str">npm ci</span>
      - <span class="prop">run</span>: <span class="str">npx playwright install --with-deps</span>
      - <span class="prop">run</span>: <span class="str">npx playwright test</span>
      - <span class="prop">uses</span>: <span class="str">actions/upload-artifact@v4</span>
        <span class="kw">if</span>: <span class="str">failure()</span>
        <span class="prop">with</span>:
          <span class="prop">name</span>: <span class="str">playwright-report</span>
          <span class="prop">path</span>: <span class="str">playwright-report/</span>
  </div>

  <h3>Performance Optimization</h3>
  <div class="card success">
    <div class="card-title">üöÄ Speed Up Your CI</div>
    <ul class="styled-list">
      <li><strong>Parallelize:</strong> Split E2E tests across multiple machines with sharding</li>
      <li><strong>Cache:</strong> Cache node_modules and Playwright browsers</li>
      <li><strong>Fail fast:</strong> Run linting and type checks before expensive tests</li>
      <li><strong>Selective runs:</strong> Only run affected tests based on changed files</li>
      <li><strong>Test DB:</strong> Use in-memory SQLite for integration tests</li>
    </ul>
  </div>

  <div class="code-block">
    <span class="lang-tag">Playwright Sharding</span>
<span class="cm"># Run tests across 4 parallel machines</span>
<span class="cm"># Machine 1:</span>
npx playwright test --shard=1/4
<span class="cm"># Machine 2:</span>
npx playwright test --shard=2/4
<span class="cm"># etc...</span>
  </div>

  <h3>Pre-commit Hooks</h3>
  <div class="code-block">
    <span class="lang-tag">package.json + husky + lint-staged</span>
<span class="cm">// Run fast checks before commit</span>
{
  <span class="str">"lint-staged"</span>: {
    <span class="str">"*.{ts,tsx}"</span>: [
      <span class="str">"eslint --fix"</span>,
      <span class="str">"jest --bail --findRelatedTests"</span>  <span class="cm">‚Üê only related tests!</span>
    ]
  }
}
  </div>

  <div class="btn-group">
    <button class="btn btn-primary" onclick="markDone('automation'); showSection('exercises', document.querySelector('[data-section=exercises]'))">Practice: Exercises ‚Üí</button>
  </div>
</div>

<!-- ============ EXERCISES ============ -->
<div class="section" id="sec-exercises">
  <h2>‚úèÔ∏è Practice Exercises</h2>
  <p class="section-subtitle">Write real test code. Each exercise has hints and a solution you can reveal.</p>

  <!-- Exercise 1 -->
  <div class="exercise-box">
    <h4>Exercise 1: Write an Integration Test</h4>
    <div class="difficulty easy">Easy</div>
    <p>Write an integration test for a <code>TodoList</code> component. It should:</p>
    <ul class="styled-list">
      <li>Render the component with real providers</li>
      <li>Mock the API with MSW to return 2 todos</li>
      <li>Verify both todos are displayed</li>
      <li>Add a new todo and verify it appears</li>
    </ul>
    <textarea class="code-input" id="ex1-input" placeholder="// Write your integration test here...
// Use @testing-library/react and MSW

describe('TodoList Integration', () => {
  // Your code here
});"></textarea>
    <div class="btn-group">
      <button class="btn btn-outline" onclick="showHint('ex1')">üí° Show Hint</button>
      <button class="btn btn-primary" onclick="checkExercise('ex1')">Check Answer</button>
      <button class="btn btn-success" onclick="showSolution('ex1')">Show Solution</button>
    </div>
    <div class="result-box" id="ex1-hint">
      üí° <strong>Hint:</strong> Use <code>render()</code> with real providers, <code>setupServer()</code> from MSW for API mocking, <code>waitFor()</code> for async assertions, and <code>userEvent.click()</code> + <code>userEvent.type()</code> for interactions.
    </div>
    <div class="result-box" id="ex1-result"></div>
    <div class="result-box pass" id="ex1-solution" style="color: var(--text);">
<pre style="white-space:pre-wrap; font-family:monospace; font-size:0.8rem;">
import { render, screen, waitFor } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { rest } from 'msw';
import { setupServer } from 'msw/node';
import { TodoList } from './TodoList';
import { AppProviders } from './AppProviders';

const server = setupServer(
  rest.get('/api/todos', (req, res, ctx) => {
    return res(ctx.json([
      { id: 1, text: 'Learn testing', done: false },
      { id: 2, text: 'Ship feature', done: false },
    ]));
  }),
  rest.post('/api/todos', async (req, res, ctx) => {
    const { text } = await req.json();
    return res(ctx.json({ id: 3, text, done: false }));
  })
);

beforeAll(() => server.listen());
afterEach(() => server.resetHandlers());
afterAll(() => server.close());

describe('TodoList Integration', () => {
  it('loads and displays todos from API', async () => {
    render(&lt;AppProviders>&lt;TodoList />&lt;/AppProviders>);

    await waitFor(() => {
      expect(screen.getByText('Learn testing')).toBeInTheDocument();
      expect(screen.getByText('Ship feature')).toBeInTheDocument();
    });
  });

  it('adds a new todo', async () => {
    const user = userEvent.setup();
    render(&lt;AppProviders>&lt;TodoList />&lt;/AppProviders>);

    await waitFor(() => {
      expect(screen.getByText('Learn testing')).toBeInTheDocument();
    });

    await user.type(screen.getByPlaceholderText('Add todo...'), 'Write tests');
    await user.click(screen.getByRole('button', { name: /add/i }));

    await waitFor(() => {
      expect(screen.getByText('Write tests')).toBeInTheDocument();
    });
  });
});
</pre>
    </div>
  </div>

  <!-- Exercise 2 -->
  <div class="exercise-box">
    <h4>Exercise 2: Write a Playwright E2E Test</h4>
    <div class="difficulty medium">Medium</div>
    <p>Write a Playwright test for a checkout flow:</p>
    <ul class="styled-list">
      <li>Navigate to a product page</li>
      <li>Add item to cart</li>
      <li>Go to cart page</li>
      <li>Fill in shipping details</li>
      <li>Complete purchase</li>
      <li>Verify confirmation page</li>
    </ul>
    <textarea class="code-input" id="ex2-input" placeholder="// Write your Playwright E2E test here...
import { test, expect } from '@playwright/test';

test('complete checkout flow', async ({ page }) => {
  // Your code here
});"></textarea>
    <div class="btn-group">
      <button class="btn btn-outline" onclick="showHint('ex2')">üí° Show Hint</button>
      <button class="btn btn-primary" onclick="checkExercise('ex2')">Check Answer</button>
      <button class="btn btn-success" onclick="showSolution('ex2')">Show Solution</button>
    </div>
    <div class="result-box" id="ex2-hint">
      üí° <strong>Hint:</strong> Use <code>page.goto()</code>, <code>page.getByRole()</code> for accessible selectors, <code>page.getByLabel()</code> for form fields, and <code>expect(page).toHaveURL()</code> for navigation assertions.
    </div>
    <div class="result-box" id="ex2-result"></div>
    <div class="result-box pass" id="ex2-solution" style="color: var(--text);">
<pre style="white-space:pre-wrap; font-family:monospace; font-size:0.8rem;">
import { test, expect } from '@playwright/test';

test('complete checkout flow', async ({ page }) => {
  // 1. Navigate to product
  await page.goto('/products/widget-pro');

  // 2. Add to cart
  await page.getByRole('button', { name: 'Add to Cart' }).click();

  // 3. Verify cart badge updated
  await expect(page.getByTestId('cart-badge')).toHaveText('1');

  // 4. Go to cart
  await page.getByRole('link', { name: 'Cart' }).click();
  await expect(page).toHaveURL('/cart');

  // 5. Verify item in cart
  await expect(page.getByText('Widget Pro')).toBeVisible();

  // 6. Proceed to checkout
  await page.getByRole('button', { name: 'Checkout' }).click();

  // 7. Fill shipping details
  await page.getByLabel('Full Name').fill('Jane Doe');
  await page.getByLabel('Address').fill('123 Test St');
  await page.getByLabel('City').fill('San Francisco');
  await page.getByLabel('Zip Code').fill('94102');

  // 8. Fill payment
  await page.getByLabel('Card Number').fill('4242424242424242');
  await page.getByLabel('Expiry').fill('12/25');
  await page.getByLabel('CVC').fill('123');

  // 9. Place order
  await page.getByRole('button', { name: 'Place Order' }).click();

  // 10. Verify confirmation
  await expect(page).toHaveURL(/\/orders\/\w+/);
  await expect(page.getByText('Order Confirmed!')).toBeVisible();
  await expect(page.getByText('Widget Pro')).toBeVisible();
});
</pre>
    </div>
  </div>

  <!-- Exercise 3 -->
  <div class="exercise-box">
    <h4>Exercise 3: Write a Cypress Custom Command</h4>
    <div class="difficulty medium">Medium</div>
    <p>Create a reusable Cypress command called <code>cy.createProduct()</code> that:</p>
    <ul class="styled-list">
      <li>Takes name, price, and category as parameters</li>
      <li>Calls the API directly (not through UI)</li>
      <li>Returns the created product</li>
    </ul>
    <textarea class="code-input" id="ex3-input" placeholder="// Write your Cypress custom command here...
// In cypress/support/commands.js

Cypress.Commands.add('createProduct', (...) => {
  // Your code here
});"></textarea>
    <div class="btn-group">
      <button class="btn btn-outline" onclick="showHint('ex3')">üí° Show Hint</button>
      <button class="btn btn-success" onclick="showSolution('ex3')">Show Solution</button>
    </div>
    <div class="result-box" id="ex3-hint">
      üí° <strong>Hint:</strong> Use <code>cy.request()</code> to make API calls. Chain with <code>.its('body')</code> to extract the response body.
    </div>
    <div class="result-box pass" id="ex3-solution" style="color: var(--text);">
<pre style="white-space:pre-wrap; font-family:monospace; font-size:0.8rem;">
// cypress/support/commands.js
Cypress.Commands.add('createProduct', (name, price, category) => {
  return cy.request({
    method: 'POST',
    url: '/api/test/products',
    body: { name, price, category },
    headers: {
      'Content-Type': 'application/json',
    }
  }).its('body');
});

// Usage in test:
it('displays newly created product', () => {
  cy.createProduct('Super Widget', 4999, 'electronics')
    .then((product) => {
      cy.visit(`/products/${product.id}`);
      cy.contains('Super Widget');
      cy.contains('$49.99');
    });
});
</pre>
    </div>
  </div>

  <!-- Exercise 4 -->
  <div class="exercise-box">
    <h4>Exercise 4: Page Object Model</h4>
    <div class="difficulty medium">Medium</div>
    <p>Create a Playwright Page Object for a registration page with: name, email, password fields, terms checkbox, submit button, and error messages.</p>
    <textarea class="code-input" id="ex4-input" placeholder="// Write your Page Object here...
import { Page, Locator } from '@playwright/test';

export class RegistrationPage {
  // Your code here
}"></textarea>
    <div class="btn-group">
      <button class="btn btn-outline" onclick="showHint('ex4')">üí° Show Hint</button>
      <button class="btn btn-success" onclick="showSolution('ex4')">Show Solution</button>
    </div>
    <div class="result-box" id="ex4-hint">
      üí° <strong>Hint:</strong> Define locators in the constructor. Create methods like <code>goto()</code>, <code>register(name, email, password)</code>, <code>getErrorMessage()</code>.
    </div>
    <div class="result-box pass" id="ex4-solution" style="color: var(--text);">
<pre style="white-space:pre-wrap; font-family:monospace; font-size:0.8rem;">
import { Page, Locator, expect } from '@playwright/test';

export class RegistrationPage {
  readonly nameInput: Locator;
  readonly emailInput: Locator;
  readonly passwordInput: Locator;
  readonly termsCheckbox: Locator;
  readonly submitButton: Locator;
  readonly errorMessages: Locator;
  readonly successMessage: Locator;

  constructor(readonly page: Page) {
    this.nameInput = page.getByLabel('Full Name');
    this.emailInput = page.getByLabel('Email');
    this.passwordInput = page.getByLabel('Password');
    this.termsCheckbox = page.getByLabel('I agree to the terms');
    this.submitButton = page.getByRole('button', { name: 'Create Account' });
    this.errorMessages = page.getByRole('alert');
    this.successMessage = page.getByText('Account created successfully!');
  }

  async goto() {
    await this.page.goto('/register');
  }

  async register(name: string, email: string, password: string) {
    await this.nameInput.fill(name);
    await this.emailInput.fill(email);
    await this.passwordInput.fill(password);
    await this.termsCheckbox.check();
    await this.submitButton.click();
  }

  async expectSuccess() {
    await expect(this.successMessage).toBeVisible();
  }

  async expectError(message: string) {
    await expect(this.errorMessages).toContainText(message);
  }
}
</pre>
    </div>
  </div>

  <!-- Exercise 5 -->
  <div class="exercise-box">
    <h4>Exercise 5: Error Handling E2E Test</h4>
    <div class="difficulty hard">Hard</div>
    <p>Write a Playwright test that intercepts network requests to simulate various error scenarios:</p>
    <ul class="styled-list">
      <li>500 Internal Server Error on product load</li>
      <li>Timeout on search</li>
      <li>401 Unauthorized on protected route</li>
    </ul>
    <textarea class="code-input" id="ex5-input" placeholder="// Write your error handling tests here..."></textarea>
    <div class="btn-group">
      <button class="btn btn-success" onclick="showSolution('ex5')">Show Solution</button>
    </div>
    <div class="result-box pass" id="ex5-solution" style="color: var(--text);">
<pre style="white-space:pre-wrap; font-family:monospace; font-size:0.8rem;">
import { test, expect } from '@playwright/test';

test.describe('Error Handling', () => {
  test('shows error page on 500', async ({ page }) => {
    await page.route('**/api/products', route => {
      route.fulfill({ status: 500, body: 'Server Error' });
    });

    await page.goto('/products');
    await expect(page.getByText('Something went wrong')).toBeVisible();
    await expect(page.getByRole('button', { name: 'Retry' })).toBeVisible();
  });

  test('shows timeout message on slow response', async ({ page }) => {
    await page.route('**/api/search**', route => {
      // Simulate a very slow response
      return new Promise(resolve => {
        setTimeout(() => {
          resolve(route.fulfill({ status: 200, body: '[]' }));
        }, 30000); // 30s delay
      });
    });

    await page.goto('/products');
    await page.getByPlaceholder('Search...').fill('widget');

    await expect(page.getByText('Taking too long...')).toBeVisible({
      timeout: 15000
    });
  });

  test('redirects to login on 401', async ({ page }) => {
    await page.route('**/api/profile', route => {
      route.fulfill({
        status: 401,
        body: JSON.stringify({ error: 'Unauthorized' })
      });
    });

    await page.goto('/profile');
    await expect(page).toHaveURL('/login?redirect=/profile');
    await expect(page.getByText('Please sign in')).toBeVisible();
  });
});
</pre>
    </div>
  </div>

  <!-- Exercise 6 -->
  <div class="exercise-box">
    <h4>Exercise 6: Write a Visual Regression Test</h4>
    <div class="difficulty medium">Medium</div>
    <p>Write a Playwright visual test for a pricing page that:</p>
    <ul class="styled-list">
      <li>Tests 3 viewport sizes (mobile, tablet, desktop)</li>
      <li>Masks the "current date" element</li>
      <li>Disables animations before capturing</li>
    </ul>
    <textarea class="code-input" id="ex6-input" placeholder="// Write your visual regression test here..."></textarea>
    <div class="btn-group">
      <button class="btn btn-success" onclick="showSolution('ex6')">Show Solution</button>
    </div>
    <div class="result-box pass" id="ex6-solution" style="color: var(--text);">
<pre style="white-space:pre-wrap; font-family:monospace; font-size:0.8rem;">
import { test, expect } from '@playwright/test';

const viewports = [
  { width: 375, height: 667, name: 'mobile' },
  { width: 768, height: 1024, name: 'tablet' },
  { width: 1440, height: 900, name: 'desktop' },
];

for (const vp of viewports) {
  test(`pricing page visual - ${vp.name}`, async ({ page }) => {
    await page.setViewportSize({ width: vp.width, height: vp.height });
    await page.goto('/pricing');
    await page.waitForLoadState('networkidle');

    // Disable animations
    await page.addStyleTag({
      content: `
        *, *::before, *::after {
          animation: none !important;
          transition: none !important;
        }
      `
    });

    // Take screenshot with mask
    await expect(page).toHaveScreenshot(`pricing-${vp.name}.png`, {
      fullPage: true,
      mask: [
        page.locator('.current-date'),
        page.locator('.live-chat-widget'),
      ],
      maxDiffPixelRatio: 0.01,
    });
  });
}
</pre>
    </div>
  </div>

  <!-- Exercise 7 -->
  <div class="exercise-box">
    <h4>Exercise 7: CI Pipeline Configuration</h4>
    <div class="difficulty hard">Hard</div>
    <p>Write a GitHub Actions workflow that runs tests in stages with proper caching, artifact uploading, and Playwright sharding across 3 machines.</p>
    <textarea class="code-input" id="ex7-input" placeholder="# Write your GitHub Actions YAML here...
name: CI
on: [push, pull_request]

jobs:
  # Your stages here"></textarea>
    <div class="btn-group">
      <button class="btn btn-success" onclick="showSolution('ex7')">Show Solution</button>
    </div>
    <div class="result-box pass" id="ex7-solution" style="color: var(--text);">
<pre style="white-space:pre-wrap; font-family:monospace; font-size:0.8rem;">
name: CI
on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  quality:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: 'npm'
      - run: npm ci
      - run: npm run lint
      - run: npm run typecheck

  unit-tests:
    needs: quality
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: 'npm'
      - run: npm ci
      - run: npm test -- --coverage --ci
      - uses: codecov/codecov-action@v3

  e2e-tests:
    needs: unit-tests
    runs-on: ubuntu-latest
    strategy:
      matrix:
        shardIndex: [1, 2, 3]
        shardTotal: [3]
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: 'npm'
      - run: npm ci
      - run: npx playwright install --with-deps
      - run: npx playwright test --shard=${{ matrix.shardIndex }}/${{ matrix.shardTotal }}
      - uses: actions/upload-artifact@v4
        if: failure()
        with:
          name: pw-report-${{ matrix.shardIndex }}
          path: playwright-report/
          retention-days: 7
</pre>
    </div>
  </div>

  <!-- Exercise 8 -->
  <div class="exercise-box">
    <h4>Exercise 8: Design a Test Strategy</h4>
    <div class="difficulty hard">Hard</div>
    <p>You're building an e-commerce site with: authentication, product search, shopping cart, checkout, order history, and admin dashboard. Write out:</p>
    <ul class="styled-list">
      <li>Which features get unit tests? Integration? E2E? Visual?</li>
      <li>How many tests of each type (roughly)?</li>
      <li>What would you mock vs. use real implementations?</li>
      <li>What's your CI pipeline order?</li>
    </ul>
    <textarea class="code-input" id="ex8-input" placeholder="// Write your test strategy here...
// Feature ‚Üí Test Type ‚Üí What to Verify ‚Üí Mock/Real"></textarea>
    <div class="btn-group">
      <button class="btn btn-success" onclick="showSolution('ex8')">Show Solution</button>
    </div>
    <div class="result-box pass" id="ex8-solution" style="color: var(--text);">
<pre style="white-space:pre-wrap; font-family:monospace; font-size:0.8rem;">
TEST STRATEGY: E-Commerce Platform

‚ïê‚ïê‚ïê UNIT TESTS (~200 tests, &lt;2 min) ‚ïê‚ïê‚ïê
‚Ä¢ Price formatting, tax calculation, discount logic
‚Ä¢ Input validation functions
‚Ä¢ Cart total calculation
‚Ä¢ Password strength checker
‚Ä¢ Date/currency formatters
‚Üí Mock: Nothing (pure functions)

‚ïê‚ïê‚ïê INTEGRATION TESTS (~80 tests, &lt;5 min) ‚ïê‚ïê‚ïê
‚Ä¢ Product listing with filters (Component + API + State)
‚Ä¢ Cart operations (Add/Remove/Update quantity)
‚Ä¢ Authentication flow (Login component + Auth provider)
‚Ä¢ Search with debounce (Input + API + Results display)
‚Ä¢ Order history page (Component + API pagination)
‚Ä¢ Admin CRUD operations
‚Üí Mock: HTTP layer (MSW) | Real: Components, State, Routers

‚ïê‚ïê‚ïê E2E TESTS (~15 tests, &lt;10 min) ‚ïê‚ïê‚ïê
‚Ä¢ Critical: Full checkout flow (browse ‚Üí cart ‚Üí payment ‚Üí confirmation)
‚Ä¢ Critical: Sign up ‚Üí Login ‚Üí Protected page access
‚Ä¢ Important: Search ‚Üí Filter ‚Üí Add to cart
‚Ä¢ Important: Admin: Create product ‚Üí Verify in storefront
‚Ä¢ Smoke: Homepage loads, navigation works
‚Üí Mock: Payment provider (Stripe test mode) | Real: Everything else

‚ïê‚ïê‚ïê VISUAL TESTS (~30 snapshots, &lt;5 min) ‚ïê‚ïê‚ïê
‚Ä¢ Homepage (mobile, tablet, desktop)
‚Ä¢ Product detail page
‚Ä¢ Cart page (empty + with items)
‚Ä¢ Checkout form
‚Ä¢ Admin dashboard
‚Üí Mask: Dates, user avatars, dynamic counts

‚ïê‚ïê‚ïê CI PIPELINE ‚ïê‚ïê‚ïê
1. Lint + TypeScript (30s)
2. Unit Tests (2min)
3. Integration Tests (5min) ‚Äî parallel with unit if possible
4. E2E Tests (10min) ‚Äî sharded across 3 workers
5. Visual Tests (5min) ‚Äî can run parallel with E2E
6. Deploy to staging (if all pass)
</pre>
    </div>
  </div>
</div>

<!-- ============ QUIZ ============ -->
<div class="section" id="sec-quiz">
  <h2>‚ùì Knowledge Quiz</h2>
  <p class="section-subtitle">Test your understanding. 15 questions covering all topics.</p>

  <div class="quiz-container" id="quiz-container"></div>

  <div class="btn-group">
    <button class="btn btn-primary" onclick="submitQuiz()">Submit All Answers</button>
    <button class="btn btn-outline" onclick="resetQuiz()">Reset Quiz</button>
  </div>

  <div class="score-display" id="quiz-score" style="display:none;">
    <div class="score-number" id="score-num">0/15</div>
    <p id="score-msg"></p>
  </div>
</div>

<!-- ============ PITFALLS ============ -->
<div class="section" id="sec-pitfalls">
  <h2>‚ö†Ô∏è Common Mistakes & Pitfalls</h2>
  <p class="section-subtitle">Avoid these traps that even experienced developers fall into. Click to expand each one.</p>

  <div id="pitfalls-container"></div>
</div>

<!-- ============ CHEATSHEET ============ -->
<div class="section" id="sec-cheatsheet">
  <h2>üìÑ Cheat Sheet</h2>
  <p class="section-subtitle">Quick reference for all major testing patterns and commands.</p>

  <div class="cheat-grid">
    <div class="cheat-card">
      <h4>üé≠ Playwright Selectors</h4>
      <ul>
        <li><code>page.getByRole('button', {name: 'Submit'})</code></li>
        <li><code>page.getByLabel('Email')</code></li>
        <li><code>page.getByText('Welcome')</code></li>
        <li><code>page.getByPlaceholder('Search...')</code></li>
        <li><code>page.getByTestId('cart-badge')</code></li>
        <li><code>page.locator('.css-class')</code></li>
        <li><code>page.locator('text=exact match')</code></li>
      </ul>
    </div>

    <div class="cheat-card">
      <h4>üé≠ Playwright Assertions</h4>
      <ul>
        <li><code>expect(page).toHaveURL('/path')</code></li>
        <li><code>expect(page).toHaveTitle('Title')</code></li>
        <li><code>expect(locator).toBeVisible()</code></li>
        <li><code>expect(locator).toHaveText('text')</code></li>
        <li><code>expect(locator).toHaveCount(3)</code></li>
        <li><code>expect(locator).toBeEnabled()</code></li>
        <li><code>expect(page).toHaveScreenshot()</code></li>
      </ul>
    </div>

    <div class="cheat-card">
      <h4>üé≠ Playwright Actions</h4>
      <ul>
        <li><code>page.goto('/path')</code></li>
        <li><code>locator.click()</code></li>
        <li><code>locator.fill('text')</code></li>
        <li><code>locator.check() / .uncheck()</code></li>
        <li><code>locator.selectOption('value')</code></li>
        <li><code>locator.hover()</code></li>
        <li><code>page.waitForResponse(url)</code></li>
      </ul>
    </div>

    <div class="cheat-card">
      <h4>üå≤ Cypress Commands</h4>
      <ul>
        <li><code>cy.visit('/path')</code></li>
        <li><code>cy.get('[data-testid="x"]')</code></li>
        <li><code>cy.contains('text')</code></li>
        <li><code>cy.get('input').type('text')</code></li>
        <li><code>cy.get('btn').click()</code></li>
        <li><code>cy.intercept('GET', '/api/*')</code></li>
        <li><code>cy.request('POST', '/api/x')</code></li>
      </ul>
    </div>

    <div class="cheat-card">
      <h4>üå≤ Cypress Assertions</h4>
      <ul>
        <li><code>.should('be.visible')</code></li>
        <li><code>.should('have.length', 3)</code></li>
        <li><code>.should('contain', 'text')</code></li>
        <li><code>.should('have.class', 'active')</code></li>
        <li><code>.should('exist') / .should('not.exist')</code></li>
        <li><code>cy.url().should('include', '/dash')</code></li>
      </ul>
    </div>

    <div class="cheat-card">
      <h4>üîó MSW (Mock Service Worker)</h4>
      <ul>
        <li><code>rest.get('/api/x', handler)</code></li>
        <li><code>rest.post('/api/x', handler)</code></li>
        <li><code>res(ctx.json(data))</code></li>
        <li><code>res(ctx.status(500))</code></li>
        <li><code>res(ctx.delay(200))</code></li>
        <li><code>server.use(override)</code> per test</li>
        <li><code>server.resetHandlers()</code> in afterEach</li>
      </ul>
    </div>

    <div class="cheat-card">
      <h4>üß™ Testing Library</h4>
      <ul>
        <li><code>render(&lt;Component />)</code></li>
        <li><code>screen.getByRole('button')</code></li>
        <li><code>screen.getByLabelText('Email')</code></li>
        <li><code>screen.queryByText('gone')</code> ‚Üí null</li>
        <li><code>screen.findByText('async')</code> ‚Üí Promise</li>
        <li><code>waitFor(() => expect(...))</code></li>
        <li><code>userEvent.click(element)</code></li>
      </ul>
    </div>

    <div class="cheat-card">
      <h4>üìê Test Strategy Quick Guide</h4>
      <ul>
        <li>Pure function ‚Üí <strong>Unit test</strong></li>
        <li>Component + API ‚Üí <strong>Integration</strong></li>
        <li>User journey ‚Üí <strong>E2E test</strong></li>
        <li>Layout/CSS ‚Üí <strong>Visual test</strong></li>
        <li>Types ‚Üí <strong>TypeScript</strong></li>
        <li>Bug fix ‚Üí <strong>Regression test</strong></li>
        <li>Always mock at <strong>boundaries</strong></li>
      </ul>
    </div>

    <div class="cheat-card">
      <h4>üèÉ CLI Commands</h4>
      <ul>
        <li><code>npx playwright test</code></li>
        <li><code>npx playwright test --ui</code></li>
        <li><code>npx playwright show-report</code></li>
        <li><code>npx playwright codegen url</code></li>
        <li><code>npx cypress open</code></li>
        <li><code>npx cypress run --spec "path"</code></li>
        <li><code>jest --watch --coverage</code></li>
      </ul>
    </div>

    <div class="cheat-card">
      <h4>üö´ Anti-Patterns</h4>
      <ul>
        <li>Never use <code>sleep()</code>/<code>wait(ms)</code></li>
        <li>Don't test implementation details</li>
        <li>Don't chain tests (test order dependency)</li>
        <li>Don't mock what you don't own ‚Äî wrap it</li>
        <li>Don't aim for 100% coverage blindly</li>
        <li>Don't write E2E for edge cases</li>
        <li>Don't skip cleanup in afterEach</li>
      </ul>
    </div>
  </div>
</div>

<!-- ============ COMPARISON ============ -->
<div class="section" id="sec-comparison">
  <h2>‚öñÔ∏è Tool Comparison</h2>
  <p class="section-subtitle">Playwright vs Cypress vs Others ‚Äî make an informed choice.</p>

  <table class="comparison-table">
    <thead>
      <tr><th>Feature</th><th>Playwright</th><th>Cypress</th></tr>
    </thead>
    <tbody>
      <tr><td><strong>Language</strong></td><td>JS/TS, Python, C#, Java</td><td>JS/TS only</td></tr>
      <tr><td><strong>Browsers</strong></td><td>Chromium, Firefox, WebKit</td><td>Chromium, Firefox, WebKit*</td></tr>
      <tr><td><strong>Speed</strong></td><td>‚ö° Very fast (parallel)</td><td>üîÑ Fast (single thread)</td></tr>
      <tr><td><strong>Auto-wait</strong></td><td>‚úÖ Built-in</td><td>‚úÖ Built-in</td></tr>
      <tr><td><strong>Multi-tab</strong></td><td>‚úÖ Yes</td><td>‚ùå No</td></tr>
      <tr><td><strong>iFrames</strong></td><td>‚úÖ Full support</td><td>‚ö†Ô∏è Limited</td></tr>
      <tr><td><strong>Network mock</strong></td><td>‚úÖ page.route()</td><td>‚úÖ cy.intercept()</td></tr>
      <tr><td><strong>API testing</strong></td><td>‚úÖ Built-in</td><td>‚úÖ cy.request()</td></tr>
      <tr><td><strong>Component testing</strong></td><td>‚ö†Ô∏è Experimental</td><td>‚úÖ Built-in</td></tr>
      <tr><td><strong>Visual testing</strong></td><td>‚úÖ Built-in screenshots</td><td>Via plugins</td></tr>
      <tr><td><strong>Debugging</strong></td><td>Trace viewer, VS Code ext</td><td>Time-travel UI</td></tr>
      <tr><td><strong>CI parallel</strong></td><td>‚úÖ Sharding built-in</td><td>Needs Cypress Cloud</td></tr>
      <tr><td><strong>Mobile</strong></td><td>‚úÖ Emulation</td><td>‚ö†Ô∏è Viewport only</td></tr>
      <tr><td><strong>Learning curve</strong></td><td>Moderate</td><td>Easy</td></tr>
      <tr><td><strong>Community</strong></td><td>Growing fast</td><td>Large, mature</td></tr>
      <tr><td><strong>Cost</strong></td><td>Free & open source</td><td>Free (Cloud is paid)</td></tr>
    </tbody>
  </table>

  <div class="card highlight">
    <div class="card-title">üéØ Recommendation for 2024+</div>
    <p><strong>Playwright</strong> is the better choice for new projects. It's faster, more capable (multi-tab, iframes, built-in visual testing), and has better CI support. <strong>Cypress</strong> remains excellent for teams already using it, and its component testing is more mature.</p>
    <p>For interviews: <strong>know both</strong>. Many companies still use Cypress. Being able to discuss trade-offs shows senior-level thinking.</p>
  </div>

  <h3>When to Choose What</h3>
  <div class="cheat-grid">
    <div class="cheat-card">
      <h4 style="color: var(--accent);">Choose Playwright When</h4>
      <ul>
        <li>Starting a new project</li>
        <li>Need cross-browser testing</li>
        <li>Need multi-tab/iframe support</li>
        <li>Need parallel execution on CI</li>
        <li>Want built-in visual testing</li>
        <li>Team knows Python/C#/Java too</li>
      </ul>
    </div>
    <div class="cheat-card">
      <h4 style="color: var(--success);">Choose Cypress When</h4>
      <ul>
        <li>Team already uses and loves it</li>
        <li>Need component testing now</li>
        <li>Simpler learning curve needed</li>
        <li>Love the time-travel debugger</li>
        <li>Existing Cypress test suite</li>
        <li>Large plugin ecosystem needed</li>
      </ul>
    </div>
  </div>
</div>

</main>
</div>

<script>
// ===== STATE =====
const state = {
  completed: new Set(),
  quizAnswers: {},
  totalSections: 8
};

// ===== NAVIGATION =====
function showSection(id, navEl) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));

  const sec = document.getElementById('sec-' + id);
  if (sec) sec.classList.add('active');
  if (navEl) navEl.classList.add('active');

  // Close sidebar on mobile
  document.getElementById('sidebar').classList.remove('open');
  window.scrollTo(0, 0);
}

function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('open');
}

function markDone(id) {
  state.completed.add(id);
  const check = document.getElementById('check-' + id);
  if (check) {
    check.textContent = '‚úì';
    check.className = 'checkmark done';
  }
  updateProgress();
}

function updateProgress() {
  const pct = Math.round((state.completed.size / state.totalSections) * 100);
  document.getElementById('progress-fill').style.width = pct + '%';
  document.getElementById('progress-text').textContent = pct + '%';
}

// ===== TABS =====
function switchTab(tabGroupId, contentGroupId, index) {
  const tabGroup = document.getElementById(tabGroupId);
  const contentGroup = document.getElementById(contentGroupId);

  tabGroup.querySelectorAll('.tab').forEach((t, i) => {
    t.classList.toggle('active', i === index);
  });
  contentGroup.querySelectorAll('.tab-content').forEach((c, i) => {
    c.classList.toggle('active', i === index);
  });
}

// ===== EXERCISES =====
function showHint(exId) {
  const hint = document.getElementById(exId + '-hint');
  hint.classList.toggle('show');
  hint.classList.toggle('pass');
}

function showSolution(exId) {
  const sol = document.getElementById(exId + '-solution');
  sol.classList.toggle('show');
}

function checkExercise(exId) {
  const input = document.getElementById(exId + '-input').value.trim();
  const result = document.getElementById(exId + '-result');

  if (!input) {
    result.textContent = '‚ö†Ô∏è Please write some code first!';
    result.className = 'result-box show fail';
    return;
  }

  const checks = {
    ex1: ['describe', 'render', 'waitFor', 'expect', 'toBeInTheDocument', 'server'],
    ex2: ['page.goto', 'click', 'fill', 'expect', 'toHaveURL'],
  };

  const keywords = checks[exId] || [];
  const found = keywords.filter(kw => input.toLowerCase().includes(kw.toLowerCase()));
  const pct = Math.round((found.length / keywords.length) * 100);

  if (pct >= 80) {
    result.textContent = `‚úÖ Great job! Your answer includes ${found.length}/${keywords.length} key concepts. Check the solution to compare!`;
    result.className = 'result-box show pass';
  } else if (pct >= 50) {
    result.textContent = `üü° Good start! You have ${found.length}/${keywords.length} key concepts. Missing: ${keywords.filter(k => !found.includes(k)).join(', ')}`;
    result.className = 'result-box show fail';
  } else {
    result.textContent = `‚ùå Keep going! Only ${found.length}/${keywords.length} key concepts found. Look for: ${keywords.join(', ')}`;
    result.className = 'result-box show fail';
  }
}

// ===== QUIZ =====
const quizData = [
  {
    q: "What is the main difference between an integration test and a unit test?",
    options: [
      "Integration tests are slower",
      "Integration tests verify multiple modules working together instead of testing in isolation",
      "Integration tests don't use assertions",
      "Integration tests only test the database"
    ],
    correct: 1,
    explanation: "Integration tests verify that multiple units/modules work together correctly, unlike unit tests which test a single function or module in isolation with all dependencies mocked."
  },
  {
    q: "In the Testing Trophy model, which layer should have the MOST tests?",
    options: [
      "E2E tests",
      "Unit tests",
      "Integration tests",
      "Visual tests"
    ],
    correct: 2,
    explanation: "The Testing Trophy, proposed by Kent C. Dodds, emphasizes integration tests as giving the most confidence per line of test code. They're the sweet spot between speed and realism."
  },
  {
    q: "What is MSW (Mock Service Worker) primarily used for?",
    options: [
      "Mocking React components",
      "Intercepting network requests at the service worker level for testing",
      "Running tests in parallel",
      "Generating test data"
    ],
    correct: 1,
    explanation: "MSW intercepts actual network requests at the service worker level, making it ideal for integration tests where you want to mock the HTTP layer without mocking internal modules."
  },
  {
    q: "Which selector approach does Playwright recommend as the BEST practice?",
    options: [
      "CSS class selectors like .btn-primary",
      "XPath selectors",
      "Role-based selectors like getByRole('button')",
      "ID selectors like #submit-btn"
    ],
    correct: 2,
    explanation: "Playwright recommends accessible selectors (getByRole, getByLabel, getByText) because they resemble how users interact with the page and encourage accessible HTML."
  },
  {
    q: "What does Playwright's 'auto-wait' feature do?",
    options: [
      "Adds sleep(1000) before each action",
      "Automatically waits for elements to be actionable before performing actions",
      "Waits for the page to fully load before starting",
      "Retries failed tests automatically"
    ],
    correct: 1,
    explanation: "Playwright automatically waits for elements to be visible, enabled, and stable before performing actions like click() or fill(). This eliminates most flaky test issues."
  },
  {
    q: "In Cypress, what is cy.intercept() used for?",
    options: [
      "Intercepting and mocking network requests",
      "Intercepting DOM events",
      "Intercepting console.log calls",
      "Intercepting page navigation"
    ],
    correct: 0,
    explanation: "cy.intercept() allows you to stub, spy on, or modify HTTP requests and responses. It's Cypress's equivalent of network mocking."
  },
  {
    q: "Why should you avoid using sleep()/wait(ms) in E2E tests?",
    options: [
      "They make tests slower and more flaky ‚Äî use event-based waits instead",
      "They're not supported in modern browsers",
      "They cause memory leaks",
      "They're only for unit tests"
    ],
    correct: 0,
    explanation: "Fixed waits are inherently flaky: too short and tests fail on slow machines, too long and tests waste time. Use event-based waits: waitFor(), waitForResponse(), or auto-wait features."
  },
  {
    q: "What is a Page Object Model (POM)?",
    options: [
      "A database design pattern",
      "A design pattern that encapsulates page elements and actions in a class for reusability",
      "A way to render pages faster",
      "A React component pattern"
    ],
    correct: 1,
    explanation: "POM encapsulates page-specific selectors and actions in dedicated classes. This reduces duplication, improves maintainability, and makes tests more readable."
  },
  {
    q: "What is visual regression testing primarily designed to catch?",
    options: [
      "JavaScript errors",
      "API response changes",
      "Unintended visual/CSS changes by comparing screenshots",
      "Memory leaks"
    ],
    correct: 2,
    explanation: "Visual regression testing captures screenshots and compares them against baseline images to detect unintended visual changes ‚Äî layout shifts, color changes, font issues, etc."
  },
  {
    q: "How do you handle dynamic content (dates, avatars) in visual tests?",
    options: [
      "Ignore visual testing for those pages",
      "Use masking to hide dynamic elements before taking screenshots",
      "Test only in production",
      "Update baselines every day"
    ],
    correct: 1,
    explanation: "You mask dynamic elements (dates, user avatars, ads) so they're covered during screenshot comparison. Playwright supports this with the 'mask' option in toHaveScreenshot()."
  },
  {
    q: "What is the correct order for a CI test pipeline?",
    options: [
      "E2E ‚Üí Unit ‚Üí Lint ‚Üí Deploy",
      "Lint ‚Üí Type Check ‚Üí Unit ‚Üí Integration ‚Üí E2E ‚Üí Deploy",
      "Deploy ‚Üí Test ‚Üí Rollback",
      "Unit ‚Üí E2E ‚Üí Lint ‚Üí Deploy"
    ],
    correct: 1,
    explanation: "Run fastest/cheapest checks first (lint, types), then unit tests, integration tests, and finally E2E tests. This 'fail fast' approach saves CI time and resources."
  },
  {
    q: "What does Playwright's sharding feature do?",
    options: [
      "Splits a database into shards",
      "Runs different tests across multiple machines in parallel",
      "Splits the browser DOM into sections",
      "Creates multiple browser instances on one machine"
    ],
    correct: 1,
    explanation: "Sharding distributes your test suite across multiple CI machines (e.g., --shard=1/4 runs the first quarter of tests). This dramatically reduces E2E test execution time."
  },
  {
    q: "In integration testing, where should you draw the mocking boundary?",
    options: [
      "Mock everything except the function under test",
      "Mock at the network/external service boundary, use real internal modules",
      "Never mock anything",
      "Mock only the database"
    ],
    correct: 1,
    explanation: "Integration tests should use real internal modules (components, state management, routers) but mock external boundaries (HTTP APIs via MSW, third-party services, email)."
  },
  {
    q: "What advantage does Playwright have over Cypress for multi-tab scenarios?",
    options: [
      "Playwright is faster",
      "Playwright natively supports multiple browser contexts and tabs; Cypress cannot",
      "Playwright has better CSS selectors",
      "There is no difference"
    ],
    correct: 1,
    explanation: "Playwright can control multiple browser contexts, tabs, and even different browsers simultaneously. Cypress runs within a single browser tab and cannot natively test multi-tab flows."
  },
  {
    q: "What is the risk of aiming for 100% code coverage?",
    options: [
      "It takes too long to achieve",
      "Tests become focused on hitting coverage numbers rather than testing meaningful behavior",
      "It causes test files to become too large",
      "Modern tools don't support 100% coverage"
    ],
    correct: 1,
    explanation: "Chasing 100% coverage leads to testing trivial code (getters, framework code) with shallow assertions. Coverage measures execution, not quality. Focus on meaningful tests for critical paths."
  }
];

function renderQuiz() {
  const container = document.getElementById('quiz-container');
  container.innerHTML = quizData.map((q, qi) => `
    <div class="quiz-question" id="quiz-q-${qi}">
      <h4><span class="q-num">Q${qi + 1}.</span> ${q.q}</h4>
      <div class="quiz-options">
        ${q.options.map((opt, oi) => `
          <div class="quiz-option" id="qopt-${qi}-${oi}" onclick="selectQuizOption(${qi}, ${oi})">
            <span class="letter">${String.fromCharCode(65 + oi)}</span>
            <span>${opt}</span>
          </div>
        `).join('')}
      </div>
      <div class="quiz-explanation" id="qexp-${qi}">
        ${q.explanation}
      </div>
    </div>
  `).join('');
}

function selectQuizOption(qi, oi) {
  // Clear previous selection for this question
  const qDiv = document.getElementById(`quiz-q-${qi}`);
  qDiv.querySelectorAll('.quiz-option').forEach(o => o.classList.remove('selected'));
  document.getElementById(`qopt-${qi}-${oi}`).classList.add('selected');
  state.quizAnswers[qi] = oi;
}

function submitQuiz() {
  let score = 0;
  quizData.forEach((q, qi) => {
    const userAnswer = state.quizAnswers[qi];
    const options = document.querySelectorAll(`#quiz-q-${qi} .quiz-option`);

    options.forEach((opt, oi) => {
      opt.classList.remove('selected');
      opt.style.pointerEvents = 'none';
      if (oi === q.correct) {
        opt.classList.add('correct');
      } else if (oi === userAnswer && oi !== q.correct) {
        opt.classList.add('wrong');
      }
    });

    if (userAnswer === q.correct) score++;

    document.getElementById(`qexp-${qi}`).classList.add('show');
  });

  const scoreDisplay = document.getElementById('quiz-score');
  scoreDisplay.style.display = 'block';
  document.getElementById('score-num').textContent = `${score}/${quizData.length}`;

  const pct = (score / quizData.length) * 100;
  let msg = '';
  if (pct === 100) msg = 'üèÜ Perfect! You\'re interview-ready!';
  else if (pct >= 80) msg = 'üéâ Excellent! You know your testing!';
  else if (pct >= 60) msg = 'üëç Good foundation. Review the missed topics!';
  else msg = 'üìö Keep studying! Review the learning sections.';
  document.getElementById('score-msg').textContent = msg;

  scoreDisplay.scrollIntoView({ behavior: 'smooth' });
}

function resetQuiz() {
  state.quizAnswers = {};
  document.getElementById('quiz-score').style.display = 'none';
  renderQuiz();
}

// ===== PITFALLS =====
const pitfallsData = [
  {
    title: "‚ùå Testing Implementation Details Instead of Behavior",
    icon: "üî¥",
    content: `<p><strong>The Mistake:</strong> Testing internal state, private methods, or specific CSS classes instead of what the user sees.</p>
<div class="code-block">
<span class="cm">// ‚ùå BAD: Testing implementation</span>
expect(component.state.isLoading).toBe(true);
expect(wrapper.find('.btn--loading')).toHaveLength(1);

<span class="cm">// ‚úÖ GOOD: Testing behavior</span>
expect(screen.getByRole('button')).toBeDisabled();
expect(screen.getByText('Loading...')).toBeInTheDocument();
</div>
<p><strong>Why it matters:</strong> Implementation tests break when you refactor (even if behavior is unchanged), giving you false failures and slowing development.</p>`
  },
  {
    title: "‚ùå Using sleep()/fixed timeouts in E2E tests",
    icon: "üî¥",
    content: `<p><strong>The Mistake:</strong> Adding <code>await page.waitForTimeout(3000)</code> or <code>cy.wait(5000)</code> to "fix" flaky tests.</p>
<div class="code-block">
<span class="cm">// ‚ùå BAD: Fixed timeout</span>
await page.waitForTimeout(3000);
expect(page.getByText('Data')).toBeVisible();

<span class="cm">// ‚úÖ GOOD: Wait for specific condition</span>
await expect(page.getByText('Data')).toBeVisible(); <span class="cm">// auto-waits!</span>
// or
await page.waitForResponse('**/api/data');
</div>
<p><strong>Why:</strong> Fixed waits are either too slow (wasting CI time) or too fast (causing flaky failures on slower machines). Always wait for specific events.</p>`
  },
  {
    title: "‚ùå Tests That Depend on Each Other",
    icon: "üî¥",
    content: `<p><strong>The Mistake:</strong> Test B depends on Test A creating some data first.</p>
<div class="code-block">
<span class="cm">// ‚ùå BAD: Test order dependency</span>
it('creates a user', () => { ... }); <span class="cm">// must run first</span>
it('edits the user', () => { ... }); <span class="cm">// depends on created user</span>

<span class="cm">// ‚úÖ GOOD: Independent tests</span>
it('edits a user', () => {
  <span class="cm">// Each test sets up its own data</span>
  const user = createTestUser();
  <span class="cm">// Now test editing</span>
});
</div>
<p><strong>Why:</strong> Dependent tests can't run in parallel, can't run individually, and one failure cascades to all subsequent tests.</p>`
  },
  {
    title: "‚ùå Not Cleaning Up Test Data",
    icon: "üü°",
    content: `<p><strong>The Mistake:</strong> Tests leave data in the database, causing other tests to fail intermittently.</p>
<div class="code-block">
<span class="cm">// ‚úÖ GOOD: Clean up in beforeEach</span>
beforeEach(async () => {
  await db.truncate(['users', 'orders']);
  await seedTestData();
});

<span class="cm">// ‚úÖ Also good: Use transactions</span>
beforeEach(async () => {
  await db.beginTransaction();
});
afterEach(async () => {
  await db.rollback(); <span class="cm">// undo all changes</span>
});
</div>`
  },
  {
    title: "‚ùå Mocking Too Much in Integration Tests",
    icon: "üî¥",
    content: `<p><strong>The Mistake:</strong> Mocking internal modules in what should be an integration test, turning it into a unit test.</p>
<div class="code-block">
<span class="cm">// ‚ùå BAD: Mocking internal modules</span>
jest.mock('./useAuth');
jest.mock('./CartContext');
jest.mock('./api/products');

<span class="cm">// ‚úÖ GOOD: Only mock network boundary</span>
<span class="cm">// Use MSW for HTTP mocking</span>
<span class="cm">// Use real useAuth, real CartContext, real api module</span>
const server = setupServer(
  rest.get('/api/products', handler)
);
</div>
<p><strong>Rule of thumb:</strong> If you're mocking more than the network layer, you're probably writing a unit test, not an integration test.</p>`
  },
  {
    title: "‚ùå Using Fragile CSS Selectors in E2E Tests",
    icon: "üü°",
    content: `<div class="code-block">
<span class="cm">// ‚ùå BAD: Fragile selectors that break with CSS changes</span>
cy.get('.MuiButton-root.MuiButton-containedPrimary > span');
page.locator('div:nth-child(3) > form > button.submit');

<span class="cm">// ‚úÖ GOOD: Resilient selectors</span>
cy.get('[data-testid="submit-btn"]');
page.getByRole('button', { name: 'Submit' });
page.getByLabel('Email');
</div>
<p><strong>Selector priority:</strong> role > label > placeholder > text > test-id > CSS class</p>`
  },
  {
    title: "‚ùå Writing E2E Tests for Every Edge Case",
    icon: "üü°",
    content: `<p><strong>The Mistake:</strong> Using slow E2E tests to cover input validation, boundary conditions, and error edge cases.</p>
<div class="code-block">
<span class="cm">// ‚ùå BAD: E2E test for email validation edge cases</span>
test('rejects email without @', ...);
test('rejects email with spaces', ...);
test('rejects email over 254 chars', ...);

<span class="cm">// ‚úÖ GOOD: Unit test for edge cases, E2E for happy path</span>
<span class="cm">// Unit test: test all validation rules (fast!)</span>
<span class="cm">// E2E test: just verify the form works end-to-end</span>
</div>
<p><strong>Rule:</strong> Push tests as far down the pyramid as possible. Only use E2E for critical user journeys.</p>`
  },
  {
    title: "‚ùå Ignoring Test Flakiness",
    icon: "üî¥",
    content: `<p><strong>The Mistake:</strong> Re-running flaky tests until they pass, or adding retries to mask underlying issues.</p>
<p><strong>Common causes of flakiness:</strong></p>
<ul class="styled-list">
<li>Race conditions ‚Äî not waiting for async operations</li>
<li>Shared state between tests ‚Äî missing cleanup</li>
<li>Animations/transitions ‚Äî not disabled in tests</li>
<li>Time-dependent code ‚Äî not mocking clocks</li>
<li>External service dependencies ‚Äî not properly mocked</li>
</ul>
<p><strong>Fix it:</strong> Investigate every flaky test. A flaky test is worse than no test ‚Äî it erodes trust in the entire suite.</p>`
  },
  {
    title: "‚ùå Snapshot Testing Overuse",
    icon: "üü°",
    content: `<div class="code-block">
<span class="cm">// ‚ùå BAD: Meaningless snapshot</span>
it('renders', () => {
  const tree = render(<Component />);
  expect(tree).toMatchSnapshot(); <span class="cm">// What are we even testing?</span>
});

<span class="cm">// ‚úÖ GOOD: Targeted assertions</span>
it('renders user info correctly', () => {
  render(<UserCard user={mockUser} />);
  expect(screen.getByText('Jane Doe')).toBeInTheDocument();
  expect(screen.getByText('admin')).toBeInTheDocument();
});
</div>
<p><strong>Problem with snapshots:</strong> Developers blindly update them without reviewing changes. They test too much (implementation details) and too little (actual behavior).</p>`
  },
  {
    title: "‚ùå Not Running Tests in CI",
    icon: "üî¥",
    content: `<p><strong>The Mistake:</strong> Writing tests but only running them locally, manually, "when you remember."</p>
<p><strong>Result:</strong> Tests fall out of date, break silently, and provide no safety net. Tests without CI are like a seatbelt that's never worn.</p>
<p><strong>Fix:</strong> Every PR must pass all tests. Block merging until CI is green. No exceptions.</p>`
  },
  {
    title: "‚ùå Logging In Through the UI for Every Test",
    icon: "üü°",
    content: `<div class="code-block">
<span class="cm">// ‚ùå SLOW: Login through UI every single test</span>
beforeEach(() => {
  cy.visit('/login');
  cy.get('#email').type('admin@test.com');
  cy.get('#password').type('admin123');
  cy.get('#submit').click();
  cy.url().should('include', '/dashboard');
});

<span class="cm">// ‚úÖ FAST: Login via API, save auth state</span>
beforeEach(() => {
  cy.request('POST', '/api/auth', { email, password })
    .then(({ body }) => {
      localStorage.setItem('token', body.token);
    });
});
</div>
<p><strong>Why:</strong> UI login adds 3-5 seconds per test. With 20 tests, that's 1-2 wasted minutes. Test login through UI ONCE, then use API/stored state.</p>`
  },
  {
    title: "‚ùå Forgetting to Test Error States",
    icon: "üü°",
    content: `<p><strong>The Mistake:</strong> Only testing the happy path and ignoring how your app handles errors.</p>
<div class="code-block">
<span class="cm">// ‚úÖ Always test these error scenarios:</span>
<span class="cm">// - API returns 500</span>
<span class="cm">// - API returns 401 (expired auth)</span>
<span class="cm">// - API returns 422 (validation error)</span>
<span class="cm">// - Network timeout</span>
<span class="cm">// - Empty state (no data)</span>
<span class="cm">// - Offline mode</span>
</div>
<p><strong>In interviews:</strong> Mentioning error state testing signals senior-level thinking.</p>`
  }
];

function renderPitfalls() {
  const container = document.getElementById('pitfalls-container');
  container.innerHTML = pitfallsData.map((p, i) => `
    <div class="pitfall-item">
      <div class="pitfall-header" onclick="togglePitfall(this, ${i})">
        <span>${p.title}</span>
        <span class="toggle">‚ñº</span>
      </div>
      <div class="pitfall-body" id="pitfall-body-${i}">
        <div class="pitfall-body-inner">${p.content}</div>
      </div>
    </div>
  `).join('');
}

function togglePitfall(header, index) {
  header.classList.toggle('open');
  document.getElementById('pitfall-body-' + index).classList.toggle('open');
}

// ===== INTERACTIVE DEMO =====
function runDemo(demoId) {
  const output = document.getElementById(demoId + '-output');
  output.innerHTML = '';

  const lines = [
    { text: 'üß™ Running test suite...', cls: 'info', delay: 0 },
    { text: '  ‚úì renders loading state', cls: 'pass', delay: 300 },
    { text: '  ‚úì fetches and displays user data', cls: 'pass', delay: 600 },
    { text: '  ‚úì handles API error gracefully', cls: 'pass', delay: 900 },
    { text: '  ‚úó shows correct role badge', cls: 'fail', delay: 1200 },
    { text: '\n    Expected: "Admin"', cls: 'fail', delay: 1400 },
    { text: '    Received: "admin"', cls: 'fail', delay: 1500 },
    { text: '\n3 passed, 1 failed (0.8s)', cls: 'info', delay: 1800 },
  ];

  lines.forEach(line => {
    setTimeout(() => {
      output.innerHTML += `<span class="${line.cls}">${line.text}</span>\n`;
    }, line.delay);
  });
}

// ===== INIT =====
document.addEventListener('DOMContentLoaded', () => {
  renderQuiz();
  renderPitfalls();
});
</script>

</body>
</html>