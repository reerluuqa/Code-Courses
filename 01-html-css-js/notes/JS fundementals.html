<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Fundamentals Academy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #050a12;
            --bg-main: #0a1019;
            --bg-card: #111827;
            --bg-elevated: #1a2436;
            --accent-primary: #00ff88;
            --accent-secondary: #00d4ff;
            --accent-warning: #ffaa00;
            --accent-danger: #ff4466;
            --text-primary: #f0f4f8;
            --text-secondary: #8899aa;
            --border-color: #1e3048;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--bg-deep);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Animated background */
        .bg-grid {
            background-image: 
                linear-gradient(rgba(0, 255, 136, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 136, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 20s linear infinite;
        }

        @keyframes gridMove {
            0% { background-position: 0 0; }
            100% { background-position: 50px 50px; }
        }

        /* Floating orbs */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            pointer-events: none;
            z-index: 0;
        }

        .orb-1 {
            width: 400px;
            height: 400px;
            background: rgba(0, 255, 136, 0.15);
            top: -100px;
            right: -100px;
            animation: float1 15s ease-in-out infinite;
        }

        .orb-2 {
            width: 300px;
            height: 300px;
            background: rgba(0, 212, 255, 0.1);
            bottom: -50px;
            left: -50px;
            animation: float2 18s ease-in-out infinite;
        }

        @keyframes float1 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(-50px, 50px) scale(1.1); }
        }

        @keyframes float2 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(30px, -30px) scale(1.05); }
        }

        /* Card styles */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: rgba(0, 255, 136, 0.3);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.05);
        }

        /* Navigation */
        .nav-item {
            padding: 12px 16px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }

        .nav-item:hover {
            background: var(--bg-elevated);
        }

        .nav-item.active {
            background: rgba(0, 255, 136, 0.1);
            border-color: var(--accent-primary);
            color: var(--accent-primary);
        }

        .nav-item.completed {
            border-left: 3px solid var(--accent-primary);
        }

        /* Code blocks */
        .code-block {
            background: var(--bg-deep);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
        }

        .code-header {
            background: var(--bg-elevated);
            padding: 10px 16px;
            display: flex;
            gap: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .code-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .code-content {
            padding: 16px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            line-height: 1.6;
            overflow-x: auto;
        }

        .code-content .keyword { color: #ff79c6; }
        .code-content .string { color: #f1fa8c; }
        .code-content .number { color: #bd93f9; }
        .code-content .comment { color: #6272a4; }
        .code-content .function { color: #50fa7b; }
        .code-content .operator { color: #ff79c6; }
        .code-content .variable { color: #8be9fd; }

        /* Interactive code editor */
        .code-editor {
            background: var(--bg-deep);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            font-family: 'JetBrains Mono', monospace;
            resize: none;
            color: var(--text-primary);
            padding: 16px;
            width: 100%;
            min-height: 120px;
            outline: none;
            transition: border-color 0.2s;
        }

        .code-editor:focus {
            border-color: var(--accent-primary);
        }

        /* Buttons */
        .btn-primary {
            background: var(--accent-primary);
            color: var(--bg-deep);
            font-weight: 600;
            padding: 12px 24px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: var(--accent-primary);
            font-weight: 600;
            padding: 12px 24px;
            border-radius: 10px;
            border: 2px solid var(--accent-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-secondary:hover {
            background: rgba(0, 255, 136, 0.1);
        }

        /* Quiz options */
        .quiz-option {
            background: var(--bg-elevated);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quiz-option:hover {
            border-color: var(--accent-secondary);
            background: rgba(0, 212, 255, 0.05);
        }

        .quiz-option.selected {
            border-color: var(--accent-secondary);
            background: rgba(0, 212, 255, 0.1);
        }

        .quiz-option.correct {
            border-color: var(--accent-primary);
            background: rgba(0, 255, 136, 0.15);
        }

        .quiz-option.incorrect {
            border-color: var(--accent-danger);
            background: rgba(255, 68, 102, 0.15);
        }

        /* Progress bar */
        .progress-bar {
            height: 8px;
            background: var(--bg-elevated);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Visual diagrams */
        .diagram-box {
            background: var(--bg-elevated);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .diagram-box.highlight {
            border-color: var(--accent-primary);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
        }

        /* Pitfall card */
        .pitfall-card {
            background: rgba(255, 170, 0, 0.1);
            border: 1px solid rgba(255, 170, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .animate-in {
            animation: fadeInUp 0.5s ease forwards;
        }

        .stagger-1 { animation-delay: 0.1s; opacity: 0; }
        .stagger-2 { animation-delay: 0.2s; opacity: 0; }
        .stagger-3 { animation-delay: 0.3s; opacity: 0; }
        .stagger-4 { animation-delay: 0.4s; opacity: 0; }

        /* Badge */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-success {
            background: rgba(0, 255, 136, 0.15);
            color: var(--accent-primary);
        }

        .badge-warning {
            background: rgba(255, 170, 0, 0.15);
            color: var(--accent-warning);
        }

        /* Tabs */
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            color: var(--text-secondary);
        }

        .tab:hover {
            color: var(--text-primary);
        }

        .tab.active {
            color: var(--accent-primary);
            border-bottom-color: var(--accent-primary);
        }

        /* Console output */
        .console-output {
            background: #000;
            border-radius: 8px;
            padding: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            min-height: 60px;
        }

        .console-line {
            margin: 4px 0;
        }

        .console-log { color: #fff; }
        .console-error { color: var(--accent-danger); }
        .console-success { color: var(--accent-primary); }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-deep);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-primary);
        }

        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Mobile */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -280px;
                z-index: 100;
                transition: left 0.3s ease;
            }

            .sidebar.open {
                left: 0;
            }

            .mobile-overlay {
                display: none;
                position: fixed;
                inset: 0;
                background: rgba(0, 0, 0, 0.7);
                z-index: 99;
            }

            .mobile-overlay.open {
                display: block;
            }
        }
    </style>
</head>
<body class="bg-grid">
    <!-- Floating orbs -->
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>

    <!-- Mobile overlay -->
    <div class="mobile-overlay" id="mobileOverlay" onclick="toggleSidebar()"></div>

    <div class="flex min-h-screen relative z-10">
        <!-- Sidebar -->
        <aside class="sidebar w-72 bg-[var(--bg-main)] border-r border-[var(--border-color)] p-6 flex flex-col" id="sidebar">
            <div class="mb-8">
                <h1 class="text-xl font-bold flex items-center gap-2">
                    <span class="text-[var(--accent-primary)]">&lt;/&gt;</span>
                    JS Academy
                </h1>
                <p class="text-sm text-[var(--text-secondary)] mt-1">Master the fundamentals</p>
            </div>

            <!-- Progress -->
            <div class="mb-6">
                <div class="flex justify-between text-sm mb-2">
                    <span class="text-[var(--text-secondary)]">Overall Progress</span>
                    <span class="text-[var(--accent-primary)]" id="progressPercent">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
            </div>

            <!-- Navigation -->
            <nav class="flex-1 space-y-2" id="navMenu">
                <div class="text-xs uppercase text-[var(--text-secondary)] mb-3 mt-4">Lessons</div>
                
                <div class="nav-item active" data-lesson="variables" onclick="loadLesson('variables')">
                    <div class="flex items-center gap-3">
                        <span class="w-6 h-6 rounded-full bg-[var(--bg-elevated)] flex items-center justify-center text-xs" id="num-variables">1</span>
                        <span>Variables & Scope</span>
                    </div>
                </div>

                <div class="nav-item" data-lesson="datatypes" onclick="loadLesson('datatypes')">
                    <div class="flex items-center gap-3">
                        <span class="w-6 h-6 rounded-full bg-[var(--bg-elevated)] flex items-center justify-center text-xs" id="num-datatypes">2</span>
                        <span>Data Types</span>
                    </div>
                </div>

                <div class="nav-item" data-lesson="operators" onclick="loadLesson('operators')">
                    <div class="flex items-center gap-3">
                        <span class="w-6 h-6 rounded-full bg-[var(--bg-elevated)] flex items-center justify-center text-xs" id="num-operators">3</span>
                        <span>Operators</span>
                    </div>
                </div>

                <div class="nav-item" data-lesson="controlflow" onclick="loadLesson('controlflow')">
                    <div class="flex items-center gap-3">
                        <span class="w-6 h-6 rounded-full bg-[var(--bg-elevated)] flex items-center justify-center text-xs" id="num-controlflow">4</span>
                        <span>Control Flow</span>
                    </div>
                </div>
            </nav>

            <!-- Stats -->
            <div class="mt-6 p-4 bg-[var(--bg-elevated)] rounded-xl">
                <div class="text-sm text-[var(--text-secondary)] mb-2">Your Stats</div>
                <div class="flex justify-between">
                    <div class="text-center">
                        <div class="text-xl font-bold text-[var(--accent-primary)]" id="scoreCount">0</div>
                        <div class="text-xs text-[var(--text-secondary)]">Points</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xl font-bold text-[var(--accent-secondary)]" id="quizCount">0</div>
                        <div class="text-xs text-[var(--text-secondary)]">Quizzes</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xl font-bold text-[var(--accent-warning)]" id="streakCount">0</div>
                        <div class="text-xs text-[var(--text-secondary)]">Streak</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-4 md:p-8 overflow-y-auto">
            <!-- Mobile menu button -->
            <button class="md:hidden mb-4 p-2 bg-[var(--bg-card)] rounded-lg" onclick="toggleSidebar()">
                <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12h18M3 6h18M3 18h18"/>
                </svg>
            </button>

            <div id="lessonContent" class="max-w-4xl mx-auto">
                <!-- Content will be dynamically loaded -->
            </div>
        </main>
    </div>

    <script>
        // ============================================
        // STATE MANAGEMENT
        // ============================================
        const state = {
            currentLesson: 'variables',
            completedLessons: new Set(),
            score: 0,
            quizzesCompleted: 0,
            streak: 0,
            quizAnswers: {}
        };

        // ============================================
        // LESSON DATA
        // ============================================
        const lessons = {
            variables: {
                title: "Variables & Scope",
                emoji: "üì¶",
                sections: [
                    {
                        type: "intro",
                        content: `
                            <h1 class="text-3xl md:text-4xl font-bold mb-4 animate-in stagger-1">Variables: Your Data Containers</h1>
                            <p class="text-lg text-[var(--text-secondary)] mb-6 animate-in stagger-2">
                                Think of variables as <strong class="text-[var(--accent-primary)]">labeled boxes</strong> where you store things. 
                                Just like you might have a box labeled "TOYS" for your toys, in JavaScript, you create boxes (variables) 
                                to store data like numbers, text, or lists.
                            </p>
                        `
                    },
                    {
                        type: "visual",
                        title: "Visual: Variables are Labeled Boxes",
                        content: "variable-boxes"
                    },
                    {
                        type: "explanation",
                        title: "The Three Ways to Create Variables",
                        content: `
                            <div class="space-y-6">
                                <div class="card p-6">
                                    <div class="flex items-start gap-4">
                                        <div class="w-12 h-12 rounded-xl bg-[var(--accent-primary)] bg-opacity-20 flex items-center justify-center text-[var(--accent-primary)] font-mono font-bold">let</div>
                                        <div class="flex-1">
                                            <h4 class="font-bold text-lg mb-2">let - The Changeable Box</h4>
                                            <p class="text-[var(--text-secondary)] mb-3">Use <code class="bg-[var(--bg-elevated)] px-2 py-1 rounded">let</code> when you want to change what's inside the box later.</p>
                                            <div class="code-block">
                                                <div class="code-header">
                                                    <div class="code-dot bg-[var(--accent-danger)]"></div>
                                                    <div class="code-dot bg-[var(--accent-warning)]"></div>
                                                    <div class="code-dot bg-[var(--accent-primary)]"></div>
                                                </div>
                                                <pre class="code-content"><span class="keyword">let</span> <span class="variable">age</span> = <span class="number">10</span>;        <span class="comment">// I'm 10 years old</span>
<span class="variable">age</span> = <span class="number">11</span>;            <span class="comment">// Birthday! Now I'm 11</span>
<span class="comment">// The box 'age' now holds 11 instead of 10</span></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="card p-6">
                                    <div class="flex items-start gap-4">
                                        <div class="w-12 h-12 rounded-xl bg-[var(--accent-secondary)] bg-opacity-20 flex items-center justify-center text-[var(--accent-secondary)] font-mono font-bold">const</div>
                                        <div class="flex-1">
                                            <h4 class="font-bold text-lg mb-2">const - The Permanent Box</h4>
                                            <p class="text-[var(--text-secondary)] mb-3">Use <code class="bg-[var(--bg-elevated)] px-2 py-1 rounded">const</code> when you NEVER want the value to change. Like your birthday!</p>
                                            <div class="code-block">
                                                <div class="code-header">
                                                    <div class="code-dot bg-[var(--accent-danger)]"></div>
                                                    <div class="code-dot bg-[var(--accent-warning)]"></div>
                                                    <div class="code-dot bg-[var(--accent-primary)]"></div>
                                                </div>
                                                <pre class="code-content"><span class="keyword">const</span> <span class="variable">BIRTHDAY</span> = <span class="string">"March 15"</span>;
<span class="variable">BIRTHDAY</span> = <span class="string">"April 20"</span>;  <span class="comment">// ERROR! Can't change!</span>
<span class="comment">// Your birthday never changes, neither does const!</span></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="card p-6">
                                    <div class="flex items-start gap-4">
                                        <div class="w-12 h-12 rounded-xl bg-[var(--text-secondary)] bg-opacity-20 flex items-center justify-center text-[var(--text-secondary)] font-mono font-bold">var</div>
                                        <div class="flex-1">
                                            <h4 class="font-bold text-lg mb-2">var - The Old School Box (Avoid!)</h4>
                                            <p class="text-[var(--text-secondary)] mb-3"><code class="bg-[var(--bg-elevated)] px-2 py-1 rounded">var</code> is the old way. It has weird rules that can cause bugs. Modern developers rarely use it.</p>
                                            <div class="code-block">
                                                <div class="code-header">
                                                    <div class="code-dot bg-[var(--accent-danger)]"></div>
                                                    <div class="code-dot bg-[var(--accent-warning)]"></div>
                                                    <div class="code-dot bg-[var(--accent-primary)]"></div>
                                                </div>
                                                <pre class="code-content"><span class="keyword">var</span> <span class="variable">oldWay</span> = <span class="string">"grandpa style"</span>; <span class="comment">// Don't use this!</span>
<span class="comment">// var has confusing scope rules - avoid it!</span></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "visual",
                        title: "Understanding Scope",
                        content: "scope-diagram"
                    },
                    {
                        type: "explanation",
                        title: "Scope: Where Can You See Your Variable?",
                        content: `
                            <p class="text-lg text-[var(--text-secondary)] mb-6">
                                <strong>Scope</strong> is like the rooms in your house. A variable declared in one "room" (scope) 
                                can't necessarily be seen in another "room".
                            </p>
                            <div class="grid md:grid-cols-2 gap-4">
                                <div class="card p-5">
                                    <h4 class="font-bold text-[var(--accent-primary)] mb-3">Global Scope (Whole House)</h4>
                                    <p class="text-[var(--text-secondary)] text-sm mb-3">Variables declared outside any function. Everyone can see them!</p>
                                    <div class="code-block">
                                        <pre class="code-content text-sm"><span class="keyword">let</span> <span class="variable">globalVar</span> = <span class="string">"I'm everywhere!"</span>;

<span class="keyword">function</span> <span class="function">sayHi</span>() {
    <span class="function">console</span>.<span class="function">log</span>(<span class="variable">globalVar</span>); <span class="comment">// Works!</span>
}</pre>
                                    </div>
                                </div>
                                <div class="card p-5">
                                    <h4 class="font-bold text-[var(--accent-secondary)] mb-3">Block Scope (One Room)</h4>
                                    <p class="text-[var(--text-secondary)] text-sm mb-3">Variables inside { } are trapped there with let/const.</p>
                                    <div class="code-block">
                                        <pre class="code-content text-sm"><span class="keyword">if</span> (<span class="keyword">true</span>) {
    <span class="keyword">let</span> <span class="variable">blockVar</span> = <span class="string">"Trapped!"</span>;
}
<span class="function">console</span>.<span class="function">log</span>(<span class="variable">blockVar</span>); <span class="comment">// Error!</span></pre>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "pitfall",
                        title: "Common Pitfalls to Avoid",
                        content: `
                            <div class="space-y-4">
                                <div class="pitfall-card">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">‚ö†Ô∏è</span>
                                        <div>
                                            <h4 class="font-bold text-[var(--accent-warning)]">Pitfall 1: Using var by accident</h4>
                                            <p class="text-[var(--text-secondary)] text-sm mt-1">var doesn't respect block scope, causing weird bugs!</p>
                                            <div class="code-block mt-3">
                                                <pre class="code-content text-sm"><span class="keyword">if</span> (<span class="keyword">true</span>) {
    <span class="keyword">var</span> <span class="variable">leaky</span> = <span class="string">"I escaped!"</span>; <span class="comment">// var leaks out!</span>
}
<span class="function">console</span>.<span class="function">log</span>(<span class="variable">leaky</span>); <span class="comment">// Works (but shouldn't!)</span></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pitfall-card">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">‚ö†Ô∏è</span>
                                        <div>
                                            <h4 class="font-bold text-[var(--accent-warning)]">Pitfall 2: Reassigning const</h4>
                                            <p class="text-[var(--text-secondary)] text-sm mt-1">This throws an error and crashes your code!</p>
                                            <div class="code-block mt-3">
                                                <pre class="code-content text-sm"><span class="keyword">const</span> <span class="variable">PI</span> = <span class="number">3.14</span>;
<span class="variable">PI</span> = <span class="number">3.14159</span>; <span class="comment">// TypeError! Cannot reassign!</span></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pitfall-card">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">‚ö†Ô∏è</span>
                                        <div>
                                            <h4 class="font-bold text-[var(--accent-warning)]">Pitfall 3: Accessing before declaring</h4>
                                            <p class="text-[var(--text-secondary)] text-sm mt-1">let and const aren't usable before their line!</p>
                                            <div class="code-block mt-3">
                                                <pre class="code-content text-sm"><span class="function">console</span>.<span class="function">log</span>(<span class="variable">myVar</span>); <span class="comment">// Error! Not defined yet</span>
<span class="keyword">let</span> <span class="variable">myVar</span> = <span class="string">"hello"</span>;</pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "exercise",
                        title: "Interactive Exercise",
                        content: "variables-exercise"
                    },
                    {
                        type: "quiz",
                        title: "Quiz Time!",
                        content: "variables-quiz"
                    }
                ]
            },
            datatypes: {
                title: "Data Types",
                emoji: "üé≠",
                sections: [
                    {
                        type: "intro",
                        content: `
                            <h1 class="text-3xl md:text-4xl font-bold mb-4 animate-in stagger-1">Data Types: What's in the Box?</h1>
                            <p class="text-lg text-[var(--text-secondary)] mb-6 animate-in stagger-2">
                                Just like your toy box has different types of toys (cars, dolls, blocks), 
                                JavaScript variables can hold different <strong class="text-[var(--accent-primary)]">types of data</strong>. 
                                Understanding types helps you know what operations you can do with your data!
                            </p>
                        `
                    },
                    {
                        type: "visual",
                        title: "The 7 Primitive Data Types",
                        content: "datatype-overview"
                    },
                    {
                        type: "explanation",
                        title: "Primitive Types Explained",
                        content: `
                            <div class="grid md:grid-cols-2 gap-4">
                                <div class="card p-5 border-l-4 border-l-[#50fa7b]">
                                    <h4 class="font-bold mb-2 flex items-center gap-2">
                                        <span class="text-[#50fa7b]">123</span> Number
                                    </h4>
                                    <p class="text-[var(--text-secondary)] text-sm mb-3">Any number: whole, decimal, negative, even Infinity!</p>
                                    <div class="code-block">
                                        <pre class="code-content text-sm"><span class="keyword">let</span> <span class="variable">age</span> = <span class="number">25</span>;
<span class="keyword">let</span> <span class="variable">price</span> = <span class="number">9.99</span>;
<span class="keyword">let</span> <span class="variable">temp</span> = <span class="number">-10</span>;</pre>
                                    </div>
                                </div>
                                <div class="card p-5 border-l-4 border-l-[#f1fa8c]">
                                    <h4 class="font-bold mb-2 flex items-center gap-2">
                                        <span class="text-[#f1fa8c]">"abc"</span> String
                                    </h4>
                                    <p class="text-[var(--text-secondary)] text-sm mb-3">Text! Use quotes (single or double) or backticks.</p>
                                    <div class="code-block">
                                        <pre class="code-content text-sm"><span class="keyword">let</span> <span class="variable">name</span> = <span class="string">"Alex"</span>;
<span class="keyword">let</span> <span class="variable">greeting</span> = <span class="string">'Hello!'</span>;
<span class="keyword">let</span> <span class="variable">msg</span> = <span class="string">\`Hi \${name}!\`</span>;</pre>
                                    </div>
                                </div>
                                <div class="card p-5 border-l-4 border-l-[#ff79c6]">
                                    <h4 class="font-bold mb-2 flex items-center gap-2">
                                        <span class="text-[#ff79c6]">true/false</span> Boolean
                                    </h4>
                                    <p class="text-[var(--text-secondary)] text-sm mb-3">Only two values: true or false. Like a light switch!</p>
                                    <div class="code-block">
                                        <pre class="code-content text-sm"><span class="keyword">let</span> <span class="variable">isHappy</span> = <span class="keyword">true</span>;
<span class="keyword">let</span> <span class="variable">isRaining</span> = <span class="keyword">false</span>;</pre>
                                    </div>
                                </div>
                                <div class="card p-5 border-l-4 border-l-[#6272a4]">
                                    <h4 class="font-bold mb-2 flex items-center gap-2">
                                        <span class="text-[#6272a4]">null</span> Null
                                    </h4>
                                    <p class="text-[var(--text-secondary)] text-sm mb-3">Intentionally empty. "I put nothing in this box on purpose."</p>
                                    <div class="code-block">
                                        <pre class="code-content text-sm"><span class="keyword">let</span> <span class="variable">emptyBox</span> = <span class="keyword">null</span>;
<span class="comment">// I chose to put nothing here</span></pre>
                                    </div>
                                </div>
                                <div class="card p-5 border-l-4 border-l-[#8be9fd]">
                                    <h4 class="font-bold mb-2 flex items-center gap-2">
                                        <span class="text-[#8be9fd]">undefined</span> Undefined
                                    </h4>
                                    <p class="text-[var(--text-secondary)] text-sm mb-3">Not assigned yet. "I haven't put anything in this box."</p>
                                    <div class="code-block">
                                        <pre class="code-content text-sm"><span class="keyword">let</span> <span class="variable">notAssigned</span>;
<span class="function">console</span>.<span class="function">log</span>(<span class="variable">notAssigned</span>); <span class="comment">// undefined</span></pre>
                                    </div>
                                </div>
                                <div class="card p-5 border-l-4 border-l-[#bd93f9]">
                                    <h4 class="font-bold mb-2 flex items-center gap-2">
                                        <span class="text-[#bd93f9]">Symbol</span> Symbol
                                    </h4>
                                    <p class="text-[var(--text-secondary)] text-sm mb-3">Unique identifier. Like a fingerprint - no two are alike!</p>
                                    <div class="code-block">
                                        <pre class="code-content text-sm"><span class="keyword">let</span> <span class="variable">id</span> = <span class="function">Symbol</span>(<span class="string">'id'</span>);
<span class="comment">// Always unique!</span></pre>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "explanation",
                        title: "Type Conversion: Changing Types",
                        content: `
                            <p class="text-lg text-[var(--text-secondary)] mb-6">
                                Sometimes you need to convert one type to another. Like turning the string "42" into the number 42!
                            </p>
                            <div class="space-y-4">
                                <div class="card p-5">
                                    <h4 class="font-bold text-[var(--accent-primary)] mb-3">String to Number</h4>
                                    <div class="code-block">
                                        <pre class="code-content"><span class="keyword">let</span> <span class="variable">text</span> = <span class="string">"42"</span>;
<span class="keyword">let</span> <span class="variable">num</span> = <span class="function">Number</span>(<span class="variable">text</span>);     <span class="comment">// 42 (number)</span>
<span class="keyword">let</span> <span class="variable">num2</span> = <span class="function">parseInt</span>(<span class="variable">text</span>); <span class="comment">// 42 (number)</span>
<span class="keyword">let</span> <span class="variable">num3</span> = +<span class="variable">text</span>;          <span class="comment">// 42 (number) - shortcut!</span></pre>
                                    </div>
                                </div>
                                <div class="card p-5">
                                    <h4 class="font-bold text-[var(--accent-secondary)] mb-3">Number to String</h4>
                                    <div class="code-block">
                                        <pre class="code-content"><span class="keyword">let</span> <span class="variable">num</span> = <span class="number">42</span>;
<span class="keyword">let</span> <span class="variable">text</span> = <span class="function">String</span>(<span class="variable">num</span>);    <span class="comment">// "42" (string)</span>
<span class="keyword">let</span> <span class="variable">text2</span> = <span class="variable">num</span>.<span class="function">toString</span>(); <span class="comment">// "42" (string)</span>
<span class="keyword">let</span> <span class="variable">text3</span> = <span class="string">\`\${num}\`</span>;     <span class="comment">// "42" (string)</span></pre>
                                    </div>
                                </div>
                                <div class="card p-5">
                                    <h4 class="font-bold text-[var(--accent-warning)] mb-3">To Boolean</h4>
                                    <div class="code-block">
                                        <pre class="code-content"><span class="comment">// Falsy values (become false): 0, "", null, undefined, NaN</span>
<span class="comment">// Truthy values (everything else!)</span>
<span class="function">Boolean</span>(<span class="number">0</span>);         <span class="comment">// false</span>
<span class="function">Boolean</span>(<span class="string">""</span>);        <span class="comment">// false</span>
<span class="function">Boolean</span>(<span class="number">1</span>);         <span class="comment">// true</span>
<span class="function">Boolean</span>(<span class="string">"hello"</span>);  <span class="comment">// true</span></pre>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "visual",
                        title: "Type Conversion Visualized",
                        content: "type-conversion-visual"
                    },
                    {
                        type: "pitfall",
                        title: "Type Pitfalls",
                        content: `
                            <div class="space-y-4">
                                <div class="pitfall-card">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">üò±</span>
                                        <div>
                                            <h4 class="font-bold text-[var(--accent-warning)]">Pitfall: String + Number = Surprise!</h4>
                                            <p class="text-[var(--text-secondary)] text-sm mt-1">Adding a string to a number concatenates (joins) them!</p>
                                            <div class="code-block mt-3">
                                                <pre class="code-content text-sm"><span class="string">"5"</span> + <span class="number">3</span>   <span class="comment">// "53" (string!) Not 8!</span>
<span class="string">"5"</span> - <span class="number">3</span>   <span class="comment">// 2 (number) Subtraction works!</span>
<span class="string">"5"</span> * <span class="number">3</span>   <span class="comment">// 15 (number) Multiplication works!</span></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pitfall-card">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">ü§Ø</span>
                                        <div>
                                            <h4 class="font-bold text-[var(--accent-warning)]">Pitfall: null vs undefined</h4>
                                            <p class="text-[var(--text-secondary)] text-sm mt-1">They seem similar but are different!</p>
                                            <div class="code-block mt-3">
                                                <pre class="code-content text-sm"><span class="keyword">typeof</span> <span class="keyword">null</span>;      <span class="comment">// "object" (weird JS bug!)</span>
<span class="keyword">typeof</span> <span class="keyword">undefined</span>; <span class="comment">// "undefined"</span>
<span class="keyword">null</span> === <span class="keyword">undefined</span>; <span class="comment">// false (different types!)</span>
<span class="keyword">null</span> == <span class="keyword">undefined</span>;  <span class="comment">// true (loose equality)</span></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pitfall-card">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">ü§°</span>
                                        <div>
                                            <h4 class="font-bold text-[var(--accent-warning)]">Pitfall: NaN is... weird</h4>
                                            <p class="text-[var(--text-secondary)] text-sm mt-1">NaN means "Not a Number" but...</p>
                                            <div class="code-block mt-3">
                                                <pre class="code-content text-sm"><span class="keyword">typeof</span> <span class="variable">NaN</span>;     <span class="comment">// "number" (yes, really!)</span>
<span class="variable">NaN</span> === <span class="variable">NaN</span>;    <span class="comment">// false (WAT?!)</span>
<span class="function">isNaN</span>(<span class="variable">NaN</span>);    <span class="comment">// true (use this to check)</span></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "exercise",
                        title: "Type Detective Exercise",
                        content: "datatypes-exercise"
                    },
                    {
                        type: "quiz",
                        title: "Quiz Time!",
                        content: "datatypes-quiz"
                    }
                ]
            },
            operators: {
                title: "Operators",
                emoji: "‚öôÔ∏è",
                sections: [
                    {
                        type: "intro",
                        content: `
                            <h1 class="text-3xl md:text-4xl font-bold mb-4 animate-in stagger-1">Operators: Your Action Tools</h1>
                            <p class="text-lg text-[var(--text-secondary)] mb-6 animate-in stagger-2">
                                Operators are like <strong class="text-[var(--accent-primary)]">tools in your toolbox</strong>. 
                                Just like you use a hammer to hit nails and a screwdriver to turn screws, 
                                you use different operators to do different things with your data!
                            </p>
                        `
                    },
                    {
                        type: "explanation",
                        title: "Arithmetic Operators",
                        content: `
                            <p class="text-[var(--text-secondary)] mb-4">Math operations! Just like school, but more fun.</p>
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                                <div class="card p-4 text-center">
                                    <div class="text-3xl font-mono text-[var(--accent-primary)] mb-2">+</div>
                                    <div class="text-sm font-bold">Add</div>
                                    <div class="text-xs text-[var(--text-secondary)]">5 + 3 = 8</div>
                                </div>
                                <div class="card p-4 text-center">
                                    <div class="text-3xl font-mono text-[var(--accent-primary)] mb-2">-</div>
                                    <div class="text-sm font-bold">Subtract</div>
                                    <div class="text-xs text-[var(--text-secondary)]">5 - 3 = 2</div>
                                </div>
                                <div class="card p-4 text-center">
                                    <div class="text-3xl font-mono text-[var(--accent-primary)] mb-2">*</div>
                                    <div class="text-sm font-bold">Multiply</div>
                                    <div class="text-xs text-[var(--text-secondary)]">5 * 3 = 15</div>
                                </div>
                                <div class="card p-4 text-center">
                                    <div class="text-3xl font-mono text-[var(--accent-primary)] mb-2">/</div>
                                    <div class="text-sm font-bold">Divide</div>
                                    <div class="text-xs text-[var(--text-secondary)]">6 / 2 = 3</div>
                                </div>
                                <div class="card p-4 text-center">
                                    <div class="text-3xl font-mono text-[var(--accent-primary)] mb-2">%</div>
                                    <div class="text-sm font-bold">Remainder</div>
                                    <div class="text-xs text-[var(--text-secondary)]">7 % 3 = 1</div>
                                </div>
                                <div class="card p-4 text-center">
                                    <div class="text-3xl font-mono text-[var(--accent-primary)] mb-2">**</div>
                                    <div class="text-sm font-bold">Power</div>
                                    <div class="text-xs text-[var(--text-secondary)]">2 ** 3 = 8</div>
                                </div>
                            </div>
                            <div class="code-block mt-4">
                                <div class="code-header">
                                    <div class="code-dot bg-[var(--accent-danger)]"></div>
                                    <div class="code-dot bg-[var(--accent-warning)]"></div>
                                    <div class="code-dot bg-[var(--accent-primary)]"></div>
                                </div>
                                <pre class="code-content"><span class="keyword">let</span> <span class="variable">pizza</span> = <span class="number">8</span>;
<span class="keyword">let</span> <span class="variable">friends</span> = <span class="number">3</span>;
<span class="keyword">let</span> <span class="variable">each</span> = <span class="variable">pizza</span> / <span class="variable">friends</span>;     <span class="comment">// 2.666... slices each</span>
<span class="keyword">let</span> <span class="variable">leftover</span> = <span class="variable">pizza</span> % <span class="variable">friends</span>; <span class="comment">// 2 slices left</span></pre>
                            </div>
                        `
                    },
                    {
                        type: "visual",
                        title: "Comparison Operators Visualized",
                        content: "comparison-visual"
                    },
                    {
                        type: "explanation",
                        title: "Comparison Operators",
                        content: `
                            <p class="text-[var(--text-secondary)] mb-4">Compare two values - always returns true or false!</p>
                            <div class="space-y-3">
                                <div class="card p-4 flex items-center justify-between">
                                    <div class="flex items-center gap-4">
                                        <code class="text-xl font-mono text-[var(--accent-secondary)]">===</code>
                                        <span>Strict Equal (same value AND type)</span>
                                    </div>
                                    <code class="text-sm bg-[var(--bg-elevated)] px-3 py-1 rounded">5 === 5 <span class="text-[var(--accent-primary)]">// true</span></code>
                                </div>
                                <div class="card p-4 flex items-center justify-between">
                                    <div class="flex items-center gap-4">
                                        <code class="text-xl font-mono text-[var(--accent-secondary)]">!==</code>
                                        <span>Strict Not Equal</span>
                                    </div>
                                    <code class="text-sm bg-[var(--bg-elevated)] px-3 py-1 rounded">5 !== 3 <span class="text-[var(--accent-primary)]">// true</span></code>
                                </div>
                                <div class="card p-4 flex items-center justify-between">
                                    <div class="flex items-center gap-4">
                                        <code class="text-xl font-mono text-[var(--accent-warning)]">==</code>
                                        <span>Loose Equal (converts types - avoid!)</span>
                                    </div>
                                    <code class="text-sm bg-[var(--bg-elevated)] px-3 py-1 rounded">"5" == 5 <span class="text-[var(--accent-warning)]">// true (weird!)</span></code>
                                </div>
                                <div class="card p-4 flex items-center justify-between">
                                    <div class="flex items-center gap-4">
                                        <code class="text-xl font-mono text-[var(--accent-secondary)]">></code>
                                        <span>Greater Than</span>
                                    </div>
                                    <code class="text-sm bg-[var(--bg-elevated)] px-3 py-1 rounded">5 > 3 <span class="text-[var(--accent-primary)]">// true</span></code>
                                </div>
                                <div class="card p-4 flex items-center justify-between">
                                    <div class="flex items-center gap-4">
                                        <code class="text-xl font-mono text-[var(--accent-secondary)]"><</code>
                                        <span>Less Than</span>
                                    </div>
                                    <code class="text-sm bg-[var(--bg-elevated)] px-3 py-1 rounded">3 < 5 <span class="text-[var(--accent-primary)]">// true</span></code>
                                </div>
                                <div class="card p-4 flex items-center justify-between">
                                    <div class="flex items-center gap-4">
                                        <code class="text-xl font-mono text-[var(--accent-secondary)]">>=</code>
                                        <span>Greater or Equal</span>
                                    </div>
                                    <code class="text-sm bg-[var(--bg-elevated)] px-3 py-1 rounded">5 >= 5 <span class="text-[var(--accent-primary)]">// true</span></code>
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "explanation",
                        title: "Logical Operators",
                        content: `
                            <p class="text-[var(--text-secondary)] mb-4">Combine boolean values - think of them like connectors!</p>
                            <div class="grid md:grid-cols-3 gap-4">
                                <div class="card p-5">
                                    <div class="text-3xl font-mono text-[var(--accent-primary)] mb-3">&&</div>
                                    <h4 class="font-bold mb-2">AND</h4>
                                    <p class="text-[var(--text-secondary)] text-sm mb-3">Both must be true!</p>
                                    <div class="bg-[var(--bg-deep)] p-3 rounded-lg text-sm">
                                        <div class="flex items-center gap-2 mb-1">
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-primary)]"></span>
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-primary)]"></span>
                                            <span class="mx-2">=</span>
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-primary)]"></span>
                                        </div>
                                        <div class="flex items-center gap-2 mb-1">
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-danger)]"></span>
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-primary)]"></span>
                                            <span class="mx-2">=</span>
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-danger)]"></span>
                                        </div>
                                    </div>
                                    <div class="code-block mt-3">
                                        <pre class="code-content text-xs"><span class="keyword">true</span> && <span class="keyword">true</span>  <span class="comment">// true</span>
<span class="keyword">true</span> && <span class="keyword">false</span> <span class="comment">// false</span></pre>
                                    </div>
                                </div>
                                <div class="card p-5">
                                    <div class="text-3xl font-mono text-[var(--accent-secondary)] mb-3">||</div>
                                    <h4 class="font-bold mb-2">OR</h4>
                                    <p class="text-[var(--text-secondary)] text-sm mb-3">At least one must be true!</p>
                                    <div class="bg-[var(--bg-deep)] p-3 rounded-lg text-sm">
                                        <div class="flex items-center gap-2 mb-1">
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-primary)]"></span>
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-danger)]"></span>
                                            <span class="mx-2">=</span>
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-primary)]"></span>
                                        </div>
                                        <div class="flex items-center gap-2 mb-1">
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-danger)]"></span>
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-danger)]"></span>
                                            <span class="mx-2">=</span>
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-danger)]"></span>
                                        </div>
                                    </div>
                                    <div class="code-block mt-3">
                                        <pre class="code-content text-xs"><span class="keyword">true</span> || <span class="keyword">false</span> <span class="comment">// true</span>
<span class="keyword">false</span> || <span class="keyword">false</span> <span class="comment">// false</span></pre>
                                    </div>
                                </div>
                                <div class="card p-5">
                                    <div class="text-3xl font-mono text-[var(--accent-warning)] mb-3">!</div>
                                    <h4 class="font-bold mb-2">NOT</h4>
                                    <p class="text-[var(--text-secondary)] text-sm mb-3">Flips the value!</p>
                                    <div class="bg-[var(--bg-deep)] p-3 rounded-lg text-sm">
                                        <div class="flex items-center gap-2 mb-1">
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-primary)]"></span>
                                            <span class="mx-2">‚Üí</span>
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-danger)]"></span>
                                        </div>
                                        <div class="flex items-center gap-2 mb-1">
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-danger)]"></span>
                                            <span class="mx-2">‚Üí</span>
                                            <span class="w-2 h-2 rounded-full bg-[var(--accent-primary)]"></span>
                                        </div>
                                    </div>
                                    <div class="code-block mt-3">
                                        <pre class="code-content text-xs">!<span class="keyword">true</span>  <span class="comment">// false</span>
!<span class="keyword">false</span> <span class="comment">// true</span></pre>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "pitfall",
                        title: "Operator Pitfalls",
                        content: `
                            <div class="space-y-4">
                                <div class="pitfall-card">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">‚ö†Ô∏è</span>
                                        <div>
                                            <h4 class="font-bold text-[var(--accent-warning)]">Pitfall: == vs ===</h4>
                                            <p class="text-[var(--text-secondary)] text-sm mt-1">Always use === (strict equality) unless you have a specific reason!</p>
                                            <div class="code-block mt-3">
                                                <pre class="code-content text-sm"><span class="string">"5"</span> == <span class="number">5</span>   <span class="comment">// true (converts types - confusing!)</span>
<span class="string">"5"</span> === <span class="number">5</span>  <span class="comment">// false (different types - predictable!)</span>

<span class="keyword">null</span> == <span class="keyword">undefined</span>  <span class="comment">// true (weird!)</span>
<span class="keyword">null</span> === <span class="keyword">undefined</span> <span class="comment">// false (correct!)</span></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pitfall-card">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">‚ö†Ô∏è</span>
                                        <div>
                                            <h4 class="font-bold text-[var(--accent-warning)]">Pitfall: String Concatenation Surprise</h4>
                                            <p class="text-[var(--text-secondary)] text-sm mt-1">+ with strings concatenates, doesn't add!</p>
                                            <div class="code-block mt-3">
                                                <pre class="code-content text-sm"><span class="string">"10"</span> + <span class="number">5</span>   <span class="comment">// "105" (string!)</span>
<span class="string">"10"</span> - <span class="number">5</span>   <span class="comment">// 5 (number - subtraction works)</span>
<span class="string">"10"</span> * <span class="number">5</span>   <span class="comment">// 50 (number)</span></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pitfall-card">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">‚ö†Ô∏è</span>
                                        <div>
                                            <h4 class="font-bold text-[var(--accent-warning)]">Pitfall: Short-circuit Evaluation</h4>
                                            <p class="text-[var(--text-secondary)] text-sm mt-1">&& and || return the last evaluated value, not always true/false!</p>
                                            <div class="code-block mt-3">
                                                <pre class="code-content text-sm"><span class="keyword">false</span> && <span class="string">"hello"</span>  <span class="comment">// false (stops at first falsy)</span>
<span class="keyword">true</span> && <span class="string">"hello"</span>   <span class="comment">// "hello" (returns last value!)</span>
<span class="keyword">false</span> || <span class="string">"hello"</span>  <span class="comment">// "hello" (returns first truthy)</span>
<span class="keyword">true</span> || <span class="string">"hello"</span>   <span class="comment">// true (stops at first truthy)</span></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "exercise",
                        title: "Operator Challenge",
                        content: "operators-exercise"
                    },
                    {
                        type: "quiz",
                        title: "Quiz Time!",
                        content: "operators-quiz"
                    }
                ]
            },
            controlflow: {
                title: "Control Flow",
                emoji: "üîÄ",
                sections: [
                    {
                        type: "intro",
                        content: `
                            <h1 class="text-3xl md:text-4xl font-bold mb-4 animate-in stagger-1">Control Flow: Choose Your Path</h1>
                            <p class="text-lg text-[var(--text-secondary)] mb-6 animate-in stagger-2">
                                Life is full of decisions: "If it's raining, take an umbrella. Otherwise, wear sunglasses." 
                                <strong class="text-[var(--accent-primary)]">Control flow</strong> lets your code make decisions too!
                            </p>
                        `
                    },
                    {
                        type: "visual",
                        title: "If/Else Flowchart",
                        content: "ifelse-flowchart"
                    },
                    {
                        type: "explanation",
                        title: "If / Else If / Else Statements",
                        content: `
                            <p class="text-[var(--text-secondary)] mb-4">The most common way to make decisions in code!</p>
                            <div class="code-block mb-6">
                                <div class="code-header">
                                    <div class="code-dot bg-[var(--accent-danger)]"></div>
                                    <div class="code-dot bg-[var(--accent-warning)]"></div>
                                    <div class="code-dot bg-[var(--accent-primary)]"></div>
                                </div>
                                <pre class="code-content"><span class="keyword">let</span> <span class="variable">temperature</span> = <span class="number">25</span>;

<span class="keyword">if</span> (<span class="variable">temperature</span> > <span class="number">30</span>) {
    <span class="function">console</span>.<span class="function">log</span>(<span class="string">"It's HOT! Wear shorts!"</span>);
} <span class="keyword">else if</span> (<span class="variable">temperature</span> > <span class="number">20</span>) {
    <span class="function">console</span>.<span class="function">log</span>(<span class="string">"Nice weather! T-shirt is fine."</span>);
} <span class="keyword">else if</span> (<span class="variable">temperature</span> > <span class="number">10</span>) {
    <span class="function">console</span>.<span class="function">log</span>(<span class="string">"A bit chilly. Bring a jacket."</span>);
} <span class="keyword">else</span> {
    <span class="function">console</span>.<span class="function">log</span>(<span class="string">"Brrr! Wear a coat!"</span>);
}
<span class="comment">// Output: "Nice weather! T-shirt is fine."</span></pre>
                            </div>
                            <div class="grid md:grid-cols-2 gap-4">
                                <div class="card p-4">
                                    <h4 class="font-bold text-[var(--accent-primary)] mb-2">if</h4>
                                    <p class="text-[var(--text-secondary)] text-sm">The first condition to check. Required!</p>
                                </div>
                                <div class="card p-4">
                                    <h4 class="font-bold text-[var(--accent-secondary)] mb-2">else if</h4>
                                    <p class="text-[var(--text-secondary)] text-sm">Additional conditions. Optional, can have many!</p>
                                </div>
                                <div class="card p-4 md:col-span-2">
                                    <h4 class="font-bold text-[var(--accent-warning)] mb-2">else</h4>
                                    <p class="text-[var(--text-secondary)] text-sm">The fallback - runs if nothing else matched. Optional!</p>
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "explanation",
                        title: "Switch Statements",
                        content: `
                            <p class="text-[var(--text-secondary)] mb-4">When you have MANY specific values to check, switch is cleaner!</p>
                            <div class="code-block mb-6">
                                <div class="code-header">
                                    <div class="code-dot bg-[var(--accent-danger)]"></div>
                                    <div class="code-dot bg-[var(--accent-warning)]"></div>
                                    <div class="code-dot bg-[var(--accent-primary)]"></div>
                                </div>
                                <pre class="code-content"><span class="keyword">let</span> <span class="variable">day</span> = <span class="string">"Saturday"</span>;

<span class="keyword">switch</span> (<span class="variable">day</span>) {
    <span class="keyword">case</span> <span class="string">"Monday"</span>:
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"Start of work week"</span>);
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="string">"Friday"</span>:
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"Almost weekend!"</span>);
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="string">"Saturday"</span>:
    <span class="keyword">case</span> <span class="string">"Sunday"</span>:
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"WEEKEND!"</span>);
        <span class="keyword">break</span>;
    <span class="keyword">default</span>:
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"Just a regular day"</span>);
}
<span class="comment">// Output: "WEEKEND!"</span></pre>
                            </div>
                            <div class="bg-[var(--bg-elevated)] p-4 rounded-xl border border-[var(--border-color)]">
                                <h4 class="font-bold mb-2">Key Parts of Switch:</h4>
                                <ul class="text-[var(--text-secondary)] text-sm space-y-2">
                                    <li><code class="text-[var(--accent-primary)]">case</code> - Check if value matches</li>
                                    <li><code class="text-[var(--accent-primary)]">break</code> - Stop here, don't check more cases!</li>
                                    <li><code class="text-[var(--accent-primary)]">default</code> - Runs if no case matched (like else)</li>
                                </ul>
                            </div>
                        `
                    },
                    {
                        type: "visual",
                        title: "Switch vs If/Else: When to Use",
                        content: "switch-vs-if"
                    },
                    {
                        type: "pitfall",
                        title: "Control Flow Pitfalls",
                        content: `
                            <div class="space-y-4">
                                <div class="pitfall-card">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">‚ö†Ô∏è</span>
                                        <div>
                                            <h4 class="font-bold text-[var(--accent-warning)]">Pitfall: Forgetting break in switch</h4>
                                            <p class="text-[var(--text-secondary)] text-sm mt-1">Without break, code "falls through" to the next case!</p>
                                            <div class="code-block mt-3">
                                                <pre class="code-content text-sm"><span class="keyword">switch</span> (<span class="variable">x</span>) {
    <span class="keyword">case</span> <span class="number">1</span>:
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"One"</span>);
        <span class="comment">// Oops, no break!</span>
    <span class="keyword">case</span> <span class="number">2</span>:
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"Two"</span>); <span class="comment">// Runs even if x is 1!</span>
        <span class="keyword">break</span>;
}</pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pitfall-card">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">‚ö†Ô∏è</span>
                                        <div>
                                            <h4 class="font-bold text-[var(--accent-warning)]">Pitfall: Using = instead of ===</h4>
                                            <p class="text-[var(--text-secondary)] text-sm mt-1">= assigns, === compares. This bug is SUPER common!</p>
                                            <div class="code-block mt-3">
                                                <pre class="code-content text-sm"><span class="keyword">if</span> (<span class="variable">x</span> = <span class="number">5</span>) { }  <span class="comment">// WRONG! Assigns 5 to x</span>
<span class="keyword">if</span> (<span class="variable">x</span> === <span class="number">5</span>) { } <span class="comment">// Correct! Compares x to 5</span></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pitfall-card">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">‚ö†Ô∏è</span>
                                        <div>
                                            <h4 class="font-bold text-[var(--accent-warning)]">Pitfall: Nested if-else hell</h4>
                                            <p class="text-[var(--text-secondary)] text-sm mt-1">Too many nested conditions make code hard to read!</p>
                                            <div class="code-block mt-3">
                                                <pre class="code-content text-sm"><span class="comment">// BAD - nested nightmare</span>
<span class="keyword">if</span> (<span class="variable">a</span>) {
    <span class="keyword">if</span> (<span class="variable">b</span>) {
        <span class="keyword">if</span> (<span class="variable">c</span>) {
            <span class="comment">// do something</span>
        }
    }
}

<span class="comment">// BETTER - combine with &&</span>
<span class="keyword">if</span> (<span class="variable">a</span> && <span class="variable">b</span> && <span class="variable">c</span>) {
    <span class="comment">// do something</span>
}</pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "exercise",
                        title: "Control Flow Challenge",
                        content: "controlflow-exercise"
                    },
                    {
                        type: "quiz",
                        title: "Quiz Time!",
                        content: "controlflow-quiz"
                    }
                ]
            }
        };

        // ============================================
        // QUIZ DATA
        // ============================================
        const quizzes = {
            "variables-quiz": [
                {
                    question: "Which keyword should you use for a variable that will NEVER change?",
                    options: ["let", "const", "var", "variable"],
                    correct: 1,
                    explanation: "const is for constants - values that should never change, like your birthday!"
                },
                {
                    question: "What happens if you try to reassign a const variable?",
                    options: ["It works fine", "It creates a new variable", "It throws an error", "It becomes undefined"],
                    correct: 2,
                    explanation: "const variables cannot be reassigned - JavaScript will throw a TypeError!"
                },
                {
                    question: "Which variable keyword has block scope?",
                    options: ["var only", "let only", "Both let and const", "None of them"],
                    correct: 2,
                    explanation: "Both let and const respect block scope (inside {}). var does not!"
                },
                {
                    question: "What will this code output?\nlet x = 5;\n{\n  let x = 10;\n}\nconsole.log(x);",
                    options: ["5", "10", "undefined", "Error"],
                    correct: 0,
                    explanation: "The inner x is a different variable due to block scope. The outer x is still 5!"
                }
            ],
            "datatypes-quiz": [
                {
                    question: 'What is typeof "Hello World"?',
                    options: ["string", "text", "String", "word"],
                    correct: 0,
                    explanation: "typeof returns the type as a lowercase string: 'string'"
                },
                {
                    question: 'What is 5 + "5"?',
                    options: ["10", '"55"', "55", "Error"],
                    correct: 1,
                    explanation: 'When you + a number with a string, JavaScript converts the number to string and concatenates! Result: "55"'
                },
                {
                    question: "Which values are 'falsy' in JavaScript?",
                    options: ["0, '', null, undefined, NaN", "0, '', false", "null, undefined", "All empty values"],
                    correct: 0,
                    explanation: "These 5 values are falsy: 0, empty string, null, undefined, NaN. Everything else is truthy!"
                },
                {
                    question: "What is typeof null?",
                    options: ["null", "undefined", "object", "number"],
                    correct: 2,
                    explanation: "This is a famous JavaScript bug! typeof null returns 'object' even though null is a primitive."
                }
            ],
            "operators-quiz": [
                {
                    question: 'What is "10" === 10?',
                    options: ["true", "false", "Error", "NaN"],
                    correct: 1,
                    explanation: "=== checks both value AND type. '10' is a string, 10 is a number. Different types = false!"
                },
                {
                    question: "What is 17 % 5?",
                    options: ["3", "2", "3.4", "12"],
                    correct: 1,
                    explanation: "% gives the remainder. 17 √∑ 5 = 3 with remainder 2!"
                },
                {
                    question: "What is true && false?",
                    options: ["true", "false", "null", "undefined"],
                    correct: 1,
                    explanation: "AND (&&) requires BOTH sides to be true. Since one is false, result is false!"
                },
                {
                    question: "What is false || 'hello'?",
                    options: ["false", "'hello'", "true", "Error"],
                    correct: 1,
                    explanation: "OR returns the first truthy value. false is falsy, so it returns 'hello'!"
                }
            ],
            "controlflow-quiz": [
                {
                    question: "What happens if you forget 'break' in a switch case?",
                    options: ["Error", "Nothing", "Falls through to next case", "Skips to default"],
                    correct: 2,
                    explanation: "Without break, execution 'falls through' and runs the next case's code too!"
                },
                {
                    question: "Can you have multiple 'else if' statements?",
                    options: ["No, only one", "Yes, as many as needed", "Maximum of 3", "Only with switch"],
                    correct: 1,
                    explanation: "You can have as many else if statements as you need!"
                },
                {
                    question: "Is the 'else' block required in an if statement?",
                    options: ["Yes, always", "No, it's optional", "Only for nested ifs", "Only with switch"],
                    correct: 1,
                    explanation: "else is completely optional - use it only when you need a fallback!"
                },
                {
                    question: "What's wrong with: if (x = 5) { }",
                    options: ["Nothing", "Should be x === 5", "Missing semicolon", "Wrong keyword"],
                    correct: 1,
                    explanation: "= assigns a value, === compares! This if will ALWAYS be true (assigns 5, which is truthy)"
                }
            ]
        };

        // ============================================
        // EXERCISE DATA
        // ============================================
        const exercises = {
            "variables-exercise": {
                instruction: "Create variables to store information about a pet. Use const for things that won't change, and let for things that might change.",
                starterCode: `// Create a const for the pet's name (it won't change)
// Create a const for the pet's species
// Create a let for the pet's age (it will change each year)
// Create a let for how hungry the pet is (0-100)

// Now simulate the pet having a birthday!
// Increase age by 1

// Feed the pet!
// Decrease hunger by 20`,
                solution: `const petName = "Fluffy";
const species = "Cat";
let age = 3;
let hunger = 50;

// Birthday!
age = age + 1;

// Feeding time!
hunger = hunger - 20;`,
                checkFunction: (code) => {
                    const hasConstName = /const\s+\w*[Nn]ame\w*\s*=/.test(code);
                    const hasConstSpecies = /const\s+\w*[Ss]pecies\w*\s*=/.test(code);
                    const hasLetAge = /let\s+\w*[Aa]ge\w*\s*=/.test(code);
                    const hasLetHunger = /let\s+\w*[Hh]unger\w*\s*=/.test(code);
                    const hasAgeChange = /age\s*=/.test(code) || /age\s*\+/.test(code);
                    
                    const passed = hasConstName && hasConstSpecies && hasLetAge && hasLetHunger;
                    return {
                        passed,
                        message: passed 
                            ? "Great job! You used const for permanent values and let for changing ones!" 
                            : "Make sure you're using const for name/species and let for age/hunger!"
                    };
                }
            },
            "datatypes-exercise": {
                instruction: "Practice type conversions! Convert the values as shown in the comments.",
                starterCode: `let strNum = "42";
let strBool = "true";
let numStr = 100;

// Convert strNum to a number (store in new variable)
// Convert strBool to a boolean (store in new variable)
// Convert numStr to a string (store in new variable)

// Bonus: What type is this?
let mystery = typeof "hello";
console.log(mystery);`,
                solution: `let strNum = "42";
let strBool = "true";
let numStr = 100;

let convertedNum = Number(strNum);
let convertedBool = Boolean(strBool);
let convertedStr = String(numStr);

let mystery = typeof "hello";
console.log(mystery); // "string"`,
                checkFunction: (code) => {
                    const hasNumConvert = /Number\s*\(|parseInt\s*\(|\+\s*\w+/.test(code);
                    const hasBoolConvert = /Boolean\s*\(/.test(code);
                    const hasStrConvert = /String\s*\(|\.toString\s*\(|`\${/.test(code);
                    const hasTypeof = /typeof/.test(code);
                    
                    const passed = hasNumConvert && hasBoolConvert && hasStrConvert;
                    return {
                        passed,
                        message: passed 
                            ? "Excellent! You've mastered type conversion!" 
                            : "Make sure you're converting: string to number, string to boolean, and number to string!"
                    };
                }
            },
            "operators-exercise": {
                instruction: "Complete the calculations and comparisons. Predict what each expression will return!",
                starterCode: `// Arithmetic - fill in the results:
console.log(10 % 3);      // ???
console.log(2 ** 4);      // ???
console.log(15 / 4);      // ???

// Comparison - are these true or false?
console.log(5 === "5");   // ???
console.log(5 == "5");    // ???
console.log(5 !== "5");   // ???

// Logical - what do these return?
console.log(true && false);      // ???
console.log(true || false);      // ???
console.log(!true);              // ???
console.log(false && "hello");   // ???
console.log(true || "hello");    // ???`,
                solution: `// Arithmetic:
console.log(10 % 3);      // 1 (remainder)
console.log(2 ** 4);      // 16 (2 to power of 4)
console.log(15 / 4);      // 3.75

// Comparison:
console.log(5 === "5");   // false (different types!)
console.log(5 == "5");    // true (loose equality converts)
console.log(5 !== "5");   // true (different types)

// Logical:
console.log(true && false);      // false
console.log(true || false);      // true
console.log(!true);              // false
console.log(false && "hello");   // false (short-circuits)
console.log(true || "hello");    // true (short-circuits)`,
                checkFunction: (code) => {
                    const hasModulo = /%\s*\d+/.test(code);
                    const hasPower = /\*\*\s*\d+/.test(code);
                    const hasComparison = /===|==|!==/.test(code);
                    const hasLogical = /&&|\|\|/.test(code);
                    
                    const passed = hasModulo && hasPower && hasComparison && hasLogical;
                    return {
                        passed,
                        message: passed 
                            ? "Perfect! You understand arithmetic, comparison, and logical operators!" 
                            : "Make sure you're using all three types of operators!"
                    };
                }
            },
            "controlflow-exercise": {
                instruction: "Create a grading system! Given a score (0-100), output the letter grade.",
                starterCode: `let score = 85;

// Write if/else if/else to output grades:
// 90-100: "A - Excellent!"
// 80-89:  "B - Good job!"
// 70-79:  "C - Not bad!"
// 60-69:  "D - Need to study!"
// Below 60: "F - Try again!"

// Your code here:`,
                solution: `let score = 85;

if (score >= 90) {
    console.log("A - Excellent!");
} else if (score >= 80) {
    console.log("B - Good job!");
} else if (score >= 70) {
    console.log("C - Not bad!");
} else if (score >= 60) {
    console.log("D - Need to study!");
} else {
    console.log("F - Try again!");
}`,
                checkFunction: (code) => {
                    const hasIf = /\bif\s*\(/.test(code);
                    const hasElseIf = /else\s+if\s*\(/.test(code);
                    const hasElse = /else\s*\{/.test(code);
                    const hasComparison = />=|>|<=|</.test(code);
                    const hasConsoleLog = /console\.log/.test(code);
                    
                    const passed = hasIf && hasElseIf && hasElse && hasComparison && hasConsoleLog;
                    return {
                        passed,
                        message: passed 
                            ? "Amazing! You've built a working grading system!" 
                            : "Make sure you have: if, else if, else, comparisons, and console.log!"
                    };
                }
            }
        };

        // ============================================
        // RENDER FUNCTIONS
        // ============================================
        function renderVisual(type) {
            const visuals = {
                "variable-boxes": `
                    <div class="grid grid-cols-3 gap-4 my-6">
                        <div class="diagram-box" id="box1">
                            <div class="text-xs text-[var(--text-secondary)] mb-2">Label:</div>
                            <div class="font-mono text-[var(--accent-primary)] font-bold">myAge</div>
                            <div class="text-xs text-[var(--text-secondary)] my-2">Contents:</div>
                            <div class="text-3xl font-bold">25</div>
                            <div class="text-xs text-[var(--text-secondary)] mt-2">Type: Number</div>
                        </div>
                        <div class="diagram-box" id="box2">
                            <div class="text-xs text-[var(--text-secondary)] mb-2">Label:</div>
                            <div class="font-mono text-[var(--accent-primary)] font-bold">myName</div>
                            <div class="text-xs text-[var(--text-secondary)] my-2">Contents:</div>
                            <div class="text-xl font-bold">"Alex"</div>
                            <div class="text-xs text-[var(--text-secondary)] mt-2">Type: String</div>
                        </div>
                        <div class="diagram-box" id="box3">
                            <div class="text-xs text-[var(--text-secondary)] mb-2">Label:</div>
                            <div class="font-mono text-[var(--accent-primary)] font-bold">isHappy</div>
                            <div class="text-xs text-[var(--text-secondary)] my-2">Contents:</div>
                            <div class="text-3xl font-bold text-[var(--accent-primary)]">true</div>
                            <div class="text-xs text-[var(--text-secondary)] mt-2">Type: Boolean</div>
                        </div>
                    </div>
                    <p class="text-center text-[var(--text-secondary)] text-sm">Variables are labeled boxes that hold different types of data!</p>
                `,
                "scope-diagram": `
                    <div class="my-6 p-4 bg-[var(--bg-deep)] rounded-xl">
                        <div class="border-2 border-dashed border-[var(--accent-primary)] rounded-xl p-6 relative">
                            <div class="absolute -top-3 left-4 bg-[var(--bg-card)] px-2 text-sm text-[var(--accent-primary)]">Global Scope (Whole House)</div>
                            <div class="font-mono text-sm mb-4">let globalVar = "I'm everywhere!";</div>
                            
                            <div class="border-2 border-[var(--accent-secondary)] rounded-xl p-4 relative ml-4">
                                <div class="absolute -top-3 left-4 bg-[var(--bg-card)] px-2 text-xs text-[var(--accent-secondary)]">Function Scope (Room 1)</div>
                                <div class="font-mono text-xs">function myFunc() {</div>
                                <div class="font-mono text-xs ml-4">let localVar = "Only in this room";</div>
                                <div class="font-mono text-xs ml-4 text-[var(--text-secondary)]">// Can see globalVar AND localVar</div>
                                <div class="font-mono text-xs">}</div>
                            </div>
                            
                            <div class="border-2 border-[var(--accent-warning)] rounded-xl p-4 relative ml-4 mt-4">
                                <div class="absolute -top-3 left-4 bg-[var(--bg-card)] px-2 text-xs text-[var(--accent-warning)]">Block Scope (Closet)</div>
                                <div class="font-mono text-xs">if (true) {</div>
                                <div class="font-mono text-xs ml-4">let blockVar = "Trapped here!";</div>
                                <div class="font-mono text-xs ml-4 text-[var(--text-secondary)]">// Can see globalVar AND blockVar</div>
                                <div class="font-mono text-xs">}</div>
                                <div class="font-mono text-xs mt-2 text-[var(--accent-danger)]">// blockVar is NOT visible here!</div>
                            </div>
                        </div>
                    </div>
                `,
                "datatype-overview": `
                    <div class="grid grid-cols-3 md:grid-cols-4 gap-3 my-6">
                        <div class="diagram-box">
                            <div class="text-2xl mb-2">123</div>
                            <div class="text-xs text-[var(--accent-primary)]">Number</div>
                        </div>
                        <div class="diagram-box">
                            <div class="text-2xl mb-2">"Hi"</div>
                            <div class="text-xs text-[var(--accent-secondary)]">String</div>
                        </div>
                        <div class="diagram-box">
                            <div class="text-2xl mb-2">true</div>
                            <div class="text-xs text-[var(--accent-warning)]">Boolean</div>
                        </div>
                        <div class="diagram-box">
                            <div class="text-2xl mb-2">null</div>
                            <div class="text-xs text-[var(--text-secondary)]">Null</div>
                        </div>
                        <div class="diagram-box">
                            <div class="text-sm mb-2">undef</div>
                            <div class="text-xs text-[var(--text-secondary)]">Undefined</div>
                        </div>
                        <div class="diagram-box">
                            <div class="text-lg mb-2">Sym()</div>
                            <div class="text-xs text-[var(--accent-primary)]">Symbol</div>
                        </div>
                        <div class="diagram-box">
                            <div class="text-lg mb-2">BigInt</div>
                            <div class="text-xs text-[var(--accent-secondary)]">BigInt</div>
                        </div>
                        <div class="diagram-box">
                            <div class="text-lg mb-2">{ }</div>
                            <div class="text-xs text-[var(--accent-warning)]">Object</div>
                        </div>
                    </div>
                    <p class="text-center text-[var(--text-secondary)] text-sm mb-4">JavaScript has 7 primitive types + Object</p>
                `,
                "type-conversion-visual": `
                    <div class="my-6 flex flex-wrap items-center justify-center gap-4">
                        <div class="diagram-box px-6">
                            <div class="text-2xl font-mono">"42"</div>
                            <div class="text-xs text-[var(--text-secondary)]">String</div>
                        </div>
                        <div class="text-3xl text-[var(--accent-primary)] animate-pulse">‚Üí Number() ‚Üí</div>
                        <div class="diagram-box px-6">
                            <div class="text-2xl font-mono">42</div>
                            <div class="text-xs text-[var(--text-secondary)]">Number</div>
                        </div>
                    </div>
                    <div class="my-6 flex flex-wrap items-center justify-center gap-4">
                        <div class="diagram-box px-6">
                            <div class="text-2xl font-mono">100</div>
                            <div class="text-xs text-[var(--text-secondary)]">Number</div>
                        </div>
                        <div class="text-3xl text-[var(--accent-secondary)] animate-pulse">‚Üí String() ‚Üí</div>
                        <div class="diagram-box px-6">
                            <div class="text-2xl font-mono">"100"</div>
                            <div class="text-xs text-[var(--text-secondary)]">String</div>
                        </div>
                    </div>
                `,
                "comparison-visual": `
                    <div class="my-6 space-y-4">
                        <div class="flex items-center justify-center gap-4 flex-wrap">
                            <div class="diagram-box px-4">
                                <div class="font-mono text-xl">5</div>
                                <div class="text-xs text-[var(--text-secondary)]">Number</div>
                            </div>
                            <div class="text-2xl">===</div>
                            <div class="diagram-box px-4">
                                <div class="font-mono text-xl">5</div>
                                <div class="text-xs text-[var(--text-secondary)]">Number</div>
                            </div>
                            <div class="text-3xl">=</div>
                            <div class="diagram-box px-4 border-[var(--accent-primary)]">
                                <div class="font-mono text-xl text-[var(--accent-primary)]">true</div>
                            </div>
                        </div>
                        <div class="flex items-center justify-center gap-4 flex-wrap">
                            <div class="diagram-box px-4">
                                <div class="font-mono text-xl">"5"</div>
                                <div class="text-xs text-[var(--text-secondary)]">String</div>
                            </div>
                            <div class="text-2xl">===</div>
                            <div class="diagram-box px-4">
                                <div class="font-mono text-xl">5</div>
                                <div class="text-xs text-[var(--text-secondary)]">Number</div>
                            </div>
                            <div class="text-3xl">=</div>
                            <div class="diagram-box px-4 border-[var(--accent-danger)]">
                                <div class="font-mono text-xl text-[var(--accent-danger)]">false</div>
                            </div>
                        </div>
                        <div class="text-center text-sm text-[var(--text-secondary)]">
                            === checks VALUE and TYPE!
                        </div>
                    </div>
                `,
                "ifelse-flowchart": `
                    <div class="my-6 p-4 bg-[var(--bg-deep)] rounded-xl">
                        <div class="flex flex-col items-center">
                            <div class="diagram-box px-8 py-3 rounded-full">Start: Is it raining?</div>
                            <div class="text-2xl my-2">‚Üì</div>
                            <div class="diagram-box px-6 py-4 diamond-shape">
                                <div class="font-mono text-sm">raining === true?</div>
                            </div>
                            <div class="flex gap-8 mt-2">
                                <div class="flex flex-col items-center">
                                    <div class="text-sm text-[var(--accent-primary)]">Yes</div>
                                    <div class="text-2xl">‚Üì</div>
                                    <div class="diagram-box px-4 py-2 border-[var(--accent-primary)]">
                                        <div class="text-sm">Take umbrella</div>
                                    </div>
                                </div>
                                <div class="flex flex-col items-center">
                                    <div class="text-sm text-[var(--accent-danger)]">No</div>
                                    <div class="text-2xl">‚Üì</div>
                                    <div class="diagram-box px-4 py-2 border-[var(--accent-secondary)]">
                                        <div class="text-sm">Wear sunglasses</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                "switch-vs-if": `
                    <div class="grid md:grid-cols-2 gap-4 my-6">
                        <div class="card p-4">
                            <h4 class="font-bold text-[var(--accent-primary)] mb-3">Use switch when:</h4>
                            <ul class="text-sm text-[var(--text-secondary)] space-y-2">
                                <li>‚úì Checking ONE value against MANY options</li>
                                <li>‚úì Values are specific (not ranges)</li>
                                <li>‚úì Like a menu selection</li>
                            </ul>
                            <div class="mt-3 text-xs font-mono bg-[var(--bg-deep)] p-2 rounded">switch(day) { case "Mon": ... }</div>
                        </div>
                        <div class="card p-4">
                            <h4 class="font-bold text-[var(--accent-secondary)] mb-3">Use if/else when:</h4>
                            <ul class="text-sm text-[var(--text-secondary)] space-y-2">
                                <li>‚úì Checking complex conditions</li>
                                <li>‚úì Comparing ranges (x > 10)</li>
                                <li>‚úì Multiple variables involved</li>
                            </ul>
                            <div class="mt-3 text-xs font-mono bg-[var(--bg-deep)] p-2 rounded">if(temp > 30 && humid) { ... }</div>
                        </div>
                    </div>
                `
            };
            return visuals[type] || '';
        }

        function renderExercise(type) {
            const exercise = exercises[type];
            if (!exercise) return '';
            
            return `
                <div class="card p-6 my-6">
                    <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                        <span class="text-2xl">üí™</span> ${exercise.instruction}
                    </h3>
                    <textarea class="code-editor mb-4" id="exerciseCode">${exercise.starterCode}</textarea>
                    <div class="flex gap-3 mb-4">
                        <button class="btn-primary" onclick="runExercise('${type}')">Run Code</button>
                        <button class="btn-secondary" onclick="showSolution('${type}')">Show Solution</button>
                    </div>
                    <div class="console-output" id="exerciseOutput">
                        <div class="console-line text-[var(--text-secondary)]">// Output will appear here...</div>
                    </div>
                    <div id="exerciseResult" class="mt-4"></div>
                </div>
            `;
        }

        function renderQuiz(type) {
            const quiz = quizzes[type];
            if (!quiz) return '';
            
            return `
                <div class="card p-6 my-6" id="quizContainer">
                    <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                        <span class="text-2xl">üéØ</span> Test Your Knowledge!
                    </h3>
                    <div id="quizContent">
                        ${quiz.map((q, i) => `
                            <div class="mb-6 quiz-question" data-question="${i}">
                                <p class="font-medium mb-3">${i + 1}. ${q.question.replace(/\n/g, '<br>')}</p>
                                <div class="space-y-2">
                                    ${q.options.map((opt, j) => `
                                        <div class="quiz-option" data-option="${j}" onclick="selectOption('${type}', ${i}, ${j})">
                                            <span class="font-mono mr-2">${String.fromCharCode(65 + j)}.</span>
                                            ${opt}
                                        </div>
                                    `).join('')}
                                </div>
                                <div class="explanation hidden mt-3 p-3 rounded-lg bg-[var(--bg-elevated)]" id="explanation-${i}"></div>
                            </div>
                        `).join('')}
                    </div>
                    <button class="btn-primary w-full" onclick="submitQuiz('${type}')" id="submitQuizBtn">Check Answers</button>
                    <div id="quizResult" class="mt-4 hidden"></div>
                </div>
            `;
        }

        // ============================================
        // LESSON LOADING
        // ============================================
        function loadLesson(lessonId) {
            state.currentLesson = lessonId;
            
            // Update nav
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.lesson === lessonId) {
                    item.classList.add('active');
                }
            });
            
            const lesson = lessons[lessonId];
            if (!lesson) return;
            
            let html = '';
            
            lesson.sections.forEach((section, index) => {
                switch(section.type) {
                    case 'intro':
                        html += section.content;
                        break;
                    case 'explanation':
                        html += `
                            <div class="card p-6 my-6 animate-in stagger-${Math.min(index + 1, 4)}">
                                <h2 class="text-2xl font-bold mb-4">${section.title}</h2>
                                ${section.content}
                            </div>
                        `;
                        break;
                    case 'visual':
                        html += `
                            <div class="card p-6 my-6 animate-in stagger-${Math.min(index + 1, 4)}">
                                <h2 class="text-2xl font-bold mb-4">${section.title}</h2>
                                ${renderVisual(section.content)}
                            </div>
                        `;
                        break;
                    case 'pitfall':
                        html += `
                            <div class="my-6 animate-in stagger-${Math.min(index + 1, 4)}">
                                <h2 class="text-2xl font-bold mb-4 flex items-center gap-2">
                                    <span class="text-2xl">‚ö†Ô∏è</span> ${section.title}
                                </h2>
                                ${section.content}
                            </div>
                        `;
                        break;
                    case 'exercise':
                        html += renderExercise(section.content);
                        break;
                    case 'quiz':
                        html += renderQuiz(section.content);
                        break;
                }
            });
            
            // Add complete button
            html += `
                <div class="card p-6 my-6 text-center">
                    <h3 class="text-xl font-bold mb-4">Finished with this lesson?</h3>
                    <button class="btn-primary" onclick="completeLesson('${lessonId}')">
                        Mark as Complete
                    </button>
                </div>
            `;
            
            document.getElementById('lessonContent').innerHTML = html;
            
            // Reset quiz state
            state.quizAnswers = {};
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Close mobile sidebar
            document.getElementById('sidebar').classList.remove('open');
            document.getElementById('mobileOverlay').classList.remove('open');
        }

        // ============================================
        // QUIZ FUNCTIONS
        // ============================================
        function selectOption(quizType, questionIndex, optionIndex) {
            const questionEl = document.querySelector(`[data-question="${questionIndex}"]`);
            const options = questionEl.querySelectorAll('.quiz-option');
            
            // Reset selection
            options.forEach(opt => opt.classList.remove('selected'));
            
            // Select new
            options[optionIndex].classList.add('selected');
            
            // Store answer
            state.quizAnswers[questionIndex] = optionIndex;
        }

        function submitQuiz(quizType) {
            const quiz = quizzes[quizType];
            let correct = 0;
            
            quiz.forEach((q, i) => {
                const questionEl = document.querySelector(`[data-question="${i}"]`);
                const options = questionEl.querySelectorAll('.quiz-option');
                const explanationEl = document.getElementById(`explanation-${i}`);
                const userAnswer = state.quizAnswers[i];
                
                options.forEach((opt, j) => {
                    opt.classList.remove('correct', 'incorrect');
                    if (j === q.correct) {
                        opt.classList.add('correct');
                    } else if (j === userAnswer && j !== q.correct) {
                        opt.classList.add('incorrect');
                    }
                });
                
                explanationEl.textContent = q.explanation;
                explanationEl.classList.remove('hidden');
                
                if (userAnswer === q.correct) {
                    correct++;
                }
            });
            
            const resultEl = document.getElementById('quizResult');
            const scorePercent = Math.round((correct / quiz.length) * 100);
            
            resultEl.innerHTML = `
                <div class="text-center p-4 rounded-xl ${scorePercent >= 75 ? 'bg-[rgba(0,255,136,0.1)]' : 'bg-[rgba(255,170,0,0.1)]'}">
                    <div class="text-3xl mb-2">${scorePercent >= 75 ? 'üéâ' : 'üìö'}</div>
                    <div class="text-xl font-bold">${correct}/${quiz.length} Correct (${scorePercent}%)</div>
                    <div class="text-[var(--text-secondary)] mt-1">
                        ${scorePercent >= 75 ? 'Great job! You understand this topic!' : 'Keep practicing! Review the lesson and try again.'}
                    </div>
                </div>
            `;
            resultEl.classList.remove('hidden');
            
            // Update stats
            if (scorePercent >= 75) {
                state.score += correct * 10;
                state.quizzesCompleted++;
                state.streak++;
                updateStats();
            }
            
            // Disable submit button
            document.getElementById('submitQuizBtn').disabled = true;
            document.getElementById('submitQuizBtn').textContent = 'Submitted!';
        }

        // ============================================
        // EXERCISE FUNCTIONS
        // ============================================
        function runExercise(type) {
            const exercise = exercises[type];
            const code = document.getElementById('exerciseCode').value;
            const outputEl = document.getElementById('exerciseOutput');
            const resultEl = document.getElementById('exerciseResult');
            
            let output = [];
            const originalLog = console.log;
            console.log = (...args) => {
                output.push(args.map(a => String(a)).join(' '));
            };
            
            try {
                eval(code);
                
                outputEl.innerHTML = output.map(line => 
                    `<div class="console-line console-log">> ${line}</div>`
                ).join('') || '<div class="console-line text-[var(--text-secondary)]">// No output</div>';
                
                // Check solution
                const result = exercise.checkFunction(code);
                resultEl.innerHTML = `
                    <div class="p-4 rounded-lg ${result.passed ? 'bg-[rgba(0,255,136,0.1)] border border-[var(--accent-primary)]' : 'bg-[rgba(255,170,0,0.1)] border border-[var(--accent-warning)]'}">
                        <div class="font-bold ${result.passed ? 'text-[var(--accent-primary)]' : 'text-[var(--accent-warning)]'}">
                            ${result.passed ? '‚úì Challenge Complete!' : 'Almost there!'}
                        </div>
                        <div class="text-sm text-[var(--text-secondary)] mt-1">${result.message}</div>
                    </div>
                `;
                
                if (result.passed) {
                    state.score += 25;
                    updateStats();
                }
            } catch (e) {
                outputEl.innerHTML = `<div class="console-line console-error">Error: ${e.message}</div>`;
                resultEl.innerHTML = '';
            }
            
            console.log = originalLog;
        }

        function showSolution(type) {
            const exercise = exercises[type];
            document.getElementById('exerciseCode').value = exercise.solution;
        }

        // ============================================
        // PROGRESS FUNCTIONS
        // ============================================
        function completeLesson(lessonId) {
            state.completedLessons.add(lessonId);
            
            // Update nav styling
            const navItem = document.querySelector(`[data-lesson="${lessonId}"]`);
            if (navItem) {
                navItem.classList.add('completed');
            }
            
            // Update progress
            const totalLessons = Object.keys(lessons).length;
            const completed = state.completedLessons.size;
            const percent = Math.round((completed / totalLessons) * 100);
            
            document.getElementById('progressPercent').textContent = `${percent}%`;
            document.getElementById('progressFill').style.width = `${percent}%`;
            
            state.score += 50;
            updateStats();
            
            // Show celebration
            const content = document.getElementById('lessonContent');
            const celebration = document.createElement('div');
            celebration.className = 'fixed inset-0 flex items-center justify-center z-50 pointer-events-none';
            celebration.innerHTML = `
                <div class="bg-[var(--bg-card)] p-8 rounded-2xl text-center animate-in border-2 border-[var(--accent-primary)]">
                    <div class="text-6xl mb-4">üéâ</div>
                    <div class="text-2xl font-bold mb-2">Lesson Complete!</div>
                    <div class="text-[var(--text-secondary)]">+50 points earned!</div>
                </div>
            `;
            document.body.appendChild(celebration);
            
            setTimeout(() => {
                celebration.remove();
            }, 2000);
        }

        function updateStats() {
            document.getElementById('scoreCount').textContent = state.score;
            document.getElementById('quizCount').textContent = state.quizzesCompleted;
            document.getElementById('streakCount').textContent = state.streak;
        }

        // ============================================
        // MOBILE FUNCTIONS
        // ============================================
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
            document.getElementById('mobileOverlay').classList.toggle('open');
        }

        // ============================================
        // INTERSECTION OBSERVER FOR ANIMATIONS
        // ============================================
        function setupScrollAnimations() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, { threshold: 0.1 });
            
            document.querySelectorAll('.animate-in').forEach(el => {
                observer.observe(el);
            });
        }

        // ============================================
        // INITIALIZATION
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            loadLesson('variables');
            setupScrollAnimations();
            
            // Animate variable boxes
            setTimeout(() => {
                const boxes = document.querySelectorAll('.diagram-box');
                boxes.forEach((box, i) => {
                    setTimeout(() => {
                        box.classList.add('highlight');
                        setTimeout(() => box.classList.remove('highlight'), 500);
                    }, i * 300);
                });
            }, 1000);
        });
    </script>
</body>
</html>