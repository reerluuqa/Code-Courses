<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOM Manipulation Masterclass</title>
    <style>
        /* ============================================
           GLOBAL STYLES & CSS VARIABLES
        ============================================ */
        :root {
            --primary: #6c63ff;
            --secondary: #ff6584;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --dark: #1a1a2e;
            --darker: #16213e;
            --card: #0f3460;
            --text: #e0e0e0;
            --text-muted: #a0a0b0;
            --code-bg: #0d1117;
            --code-border: #30363d;
            --highlight: #ffd700;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--dark);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ============================================
           ANIMATED BACKGROUND
        ============================================ */
        .bg-animation {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .bg-animation span {
            position: absolute;
            display: block;
            width: 20px; height: 20px;
            background: rgba(108, 99, 255, 0.1);
            animation: float 25s linear infinite;
            bottom: -150px;
            border-radius: 4px;
        }

        .bg-animation span:nth-child(1)  { left: 10%; animation-duration: 20s; width: 10px; height: 10px; }
        .bg-animation span:nth-child(2)  { left: 20%; animation-duration: 25s; animation-delay: 2s; width: 15px; height: 15px; }
        .bg-animation span:nth-child(3)  { left: 35%; animation-duration: 22s; animation-delay: 4s; }
        .bg-animation span:nth-child(4)  { left: 50%; animation-duration: 18s; animation-delay: 1s; width: 25px; height: 25px; }
        .bg-animation span:nth-child(5)  { left: 65%; animation-duration: 28s; animation-delay: 3s; width: 12px; height: 12px; }
        .bg-animation span:nth-child(6)  { left: 80%; animation-duration: 21s; animation-delay: 5s; }
        .bg-animation span:nth-child(7)  { left: 90%; animation-duration: 24s; animation-delay: 2s; width: 18px; height: 18px; }

        @keyframes float {
            0%   { transform: translateY(0) rotate(0deg); opacity: 0.5; }
            100% { transform: translateY(-1000px) rotate(720deg); opacity: 0; }
        }

        /* ============================================
           NAVIGATION
        ============================================ */
        .top-nav {
            background: rgba(15, 52, 96, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--primary);
            padding: 0 20px;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-logo {
            font-size: 1.4rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            padding: 15px 0;
            white-space: nowrap;
        }

        .nav-tabs {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
            padding: 8px 0;
        }

        .nav-tab {
            padding: 8px 14px;
            background: transparent;
            border: 2px solid transparent;
            border-radius: 8px;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .nav-tab:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(108, 99, 255, 0.1);
        }

        .nav-tab.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Progress bar */
        .progress-bar {
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            position: fixed;
            top: 0; left: 0;
            z-index: 9999;
            transition: width 0.3s;
        }

        /* ============================================
           MAIN LAYOUT
        ============================================ */
        .main-container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* Pages */
        .page {
            display: none;
            animation: pageIn 0.4s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes pageIn {
            from { opacity: 0; transform: translateY(20px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        /* ============================================
           TYPOGRAPHY & SHARED COMPONENTS
        ============================================ */
        .page-title {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-subtitle {
            color: var(--text-muted);
            font-size: 1.05rem;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 35px 0 15px;
            color: var(--highlight);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::after {
            content: '';
            flex: 1;
            height: 2px;
            background: linear-gradient(90deg, var(--highlight), transparent);
        }

        /* Cards */
        .card {
            background: var(--card);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            border: 1px solid rgba(108, 99, 255, 0.2);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(108, 99, 255, 0.2);
        }

        .card-title {
            font-size: 1.15rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Info boxes */
        .info-box {
            border-radius: 12px;
            padding: 16px 20px;
            margin: 15px 0;
            border-left: 4px solid;
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .info-box.tip    { background: rgba(46, 204, 113, 0.1); border-color: var(--success); }
        .info-box.warn   { background: rgba(243, 156, 18, 0.1);  border-color: var(--warning); }
        .info-box.danger { background: rgba(231, 76, 60, 0.1);   border-color: var(--danger);  }
        .info-box.info   { background: rgba(108, 99, 255, 0.1);  border-color: var(--primary); }

        .info-box-icon { font-size: 1.3rem; flex-shrink: 0; margin-top: 2px; }

        .info-box-content strong {
            display: block;
            margin-bottom: 4px;
            font-size: 0.95rem;
        }

        .info-box-content p {
            font-size: 0.9rem;
            color: var(--text-muted);
            line-height: 1.6;
        }

        /* Code blocks */
        .code-block {
            background: var(--code-bg);
            border: 1px solid var(--code-border);
            border-radius: 12px;
            overflow: hidden;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .code-header {
            background: #161b22;
            padding: 10px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--code-border);
        }

        .code-dots {
            display: flex;
            gap: 6px;
        }

        .code-dot {
            width: 12px; height: 12px;
            border-radius: 50%;
        }

        .code-dot.red    { background: #ff5f57; }
        .code-dot.yellow { background: #ffbd2e; }
        .code-dot.green  { background: #28c840; }

        .code-lang {
            color: var(--text-muted);
            font-size: 0.8rem;
            font-family: 'Segoe UI', sans-serif;
        }

        .code-body {
            padding: 20px;
            line-height: 1.7;
            overflow-x: auto;
            white-space: pre;
        }

        /* Syntax highlighting */
        .kw  { color: #ff7b72; }   /* keywords */
        .fn  { color: #d2a8ff; }   /* functions */
        .str { color: #a5d6ff; }   /* strings */
        .num { color: #79c0ff; }   /* numbers */
        .cmt { color: #8b949e; font-style: italic; } /* comments */
        .cls { color: #ffa657; }   /* class/selector */
        .prp { color: #e3b341; }   /* property */
        .dom { color: #56d364; }   /* DOM element */

        /* Inline code */
        code {
            background: rgba(108, 99, 255, 0.2);
            color: var(--primary);
            padding: 2px 8px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.88em;
        }

        /* Buttons */
        .btn {
            padding: 10px 22px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), #8b5cf6);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(108, 99, 255, 0.4);
        }

        .btn-secondary {
            background: rgba(108, 99, 255, 0.15);
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #27ae60);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #c0392b);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #e67e22);
            color: white;
        }

        .btn-sm {
            padding: 6px 14px;
            font-size: 0.82rem;
        }

        /* Grid */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
        }

        /* Badge */
        .badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-primary { background: rgba(108, 99, 255, 0.2); color: var(--primary); }
        .badge-success { background: rgba(46, 204, 113, 0.2); color: var(--success); }
        .badge-warning { background: rgba(243, 156, 18, 0.2);  color: var(--warning); }
        .badge-danger  { background: rgba(231, 76, 60, 0.2);   color: var(--danger);  }

        /* ============================================
           HOME PAGE
        ============================================ */
        .hero {
            text-align: center;
            padding: 50px 20px;
        }

        .hero-emoji {
            font-size: 5rem;
            display: block;
            margin-bottom: 20px;
            animation: bounce 2s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50%       { transform: translateY(-15px); }
        }

        .hero h1 {
            font-size: 2.8rem;
            font-weight: 900;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #6c63ff, #ff6584, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.1rem;
            color: var(--text-muted);
            max-width: 600px;
            margin: 0 auto 30px;
            line-height: 1.7;
        }

        .topic-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 40px;
            text-align: left;
        }

        .topic-card {
            background: var(--card);
            border: 2px solid rgba(108, 99, 255, 0.2);
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .topic-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(108, 99, 255, 0.3);
        }

        .topic-card-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
            display: block;
        }

        .topic-card h3 {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 6px;
            color: var(--primary);
        }

        .topic-card p {
            font-size: 0.82rem;
            color: var(--text-muted);
            line-height: 1.5;
        }

        /* DOM Tree Visual */
        .dom-tree {
            background: var(--code-bg);
            border-radius: 12px;
            padding: 24px;
            font-family: 'Courier New', monospace;
            font-size: 0.88rem;
            line-height: 2;
            border: 1px solid var(--code-border);
        }

        .tree-node {
            position: relative;
        }

        .tree-tag   { color: #79c0ff; }
        .tree-attr  { color: #ffa657; }
        .tree-val   { color: #a5d6ff; }
        .tree-text  { color: #a5d6ff; font-style: italic; }
        .tree-arrow { color: var(--text-muted); }
        .tree-label {
            background: rgba(108, 99, 255, 0.2);
            color: var(--primary);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-family: 'Segoe UI', sans-serif;
            margin-left: 8px;
        }

        /* What is DOM diagram */
        .dom-diagram {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0;
            margin: 20px 0;
        }

        .dom-layer {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 600px;
        }

        .dom-box {
            padding: 14px 30px;
            border-radius: 10px;
            text-align: center;
            font-weight: 700;
            font-size: 0.95rem;
            min-width: 200px;
            transition: all 0.3s;
            cursor: default;
        }

        .dom-box:hover {
            transform: scale(1.05);
        }

        .dom-box.html    { background: linear-gradient(135deg, #e44d26, #f16529); color: white; }
        .dom-box.css     { background: linear-gradient(135deg, #264de4, #2965f1); color: white; }
        .dom-box.js      { background: linear-gradient(135deg, #f7df1e, #e6cc00); color: #333; }
        .dom-box.dom     { background: linear-gradient(135deg, var(--primary), #8b5cf6); color: white; }
        .dom-box.browser { background: linear-gradient(135deg, #2ecc71, #27ae60); color: white; }

        .dom-connector {
            width: 2px;
            height: 30px;
            background: linear-gradient(180deg, var(--primary), var(--secondary));
            margin: 4px auto;
        }

        /* ============================================
           SELECTORS PAGE
        ============================================ */
        .selector-demo {
            background: var(--code-bg);
            border-radius: 12px;
            border: 1px solid var(--code-border);
            overflow: hidden;
            margin: 15px 0;
        }

        .selector-toolbar {
            background: #161b22;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .selector-toolbar label {
            color: var(--text-muted);
            font-size: 0.85rem;
            font-weight: 600;
        }

        .selector-toolbar input {
            flex: 1;
            min-width: 200px;
            padding: 8px 14px;
            background: var(--card);
            border: 2px solid var(--code-border);
            border-radius: 8px;
            color: var(--text);
            font-size: 0.9rem;
            outline: none;
            font-family: 'Courier New', monospace;
            transition: border-color 0.3s;
        }

        .selector-toolbar input:focus {
            border-color: var(--primary);
        }

        .selector-preview {
            padding: 20px;
        }

        /* Interactive DOM preview */
        .dom-preview {
            background: white;
            border-radius: 10px;
            padding: 20px;
            color: #333;
        }

        .dom-preview h2 {
            color: #e44d26;
            font-size: 1.1rem;
            margin-bottom: 12px;
        }

        .dom-preview .intro-text {
            color: #555;
            font-size: 0.9rem;
            margin-bottom: 14px;
        }

        .dom-preview ul {
            list-style: none;
            padding: 0;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .dom-preview ul li {
            background: #f0f0f0;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
            color: #333;
            cursor: pointer;
            transition: all 0.2s;
        }

        .dom-preview ul li.item { background: #e8f4fd; color: #2980b9; }
        .dom-preview .special    { color: #e74c3c; font-weight: 700; }
        .dom-preview .highlight-el {
            outline: 3px solid #f39c12;
            background: rgba(243, 156, 18, 0.2) !important;
            animation: highlightPulse 0.5s ease;
        }

        @keyframes highlightPulse {
            0%   { transform: scale(1.1); }
            100% { transform: scale(1);   }
        }

        /* Method comparison table */
        .method-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.88rem;
        }

        .method-table th {
            background: rgba(108, 99, 255, 0.2);
            color: var(--primary);
            padding: 12px 16px;
            text-align: left;
            font-weight: 700;
        }

        .method-table td {
            padding: 10px 16px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            color: var(--text);
            vertical-align: top;
        }

        .method-table tr:hover td {
            background: rgba(108, 99, 255, 0.05);
        }

        .method-table tr:last-child td {
            border-bottom: none;
        }

        /* Live selector playground */
        .playground {
            border: 2px solid rgba(108, 99, 255, 0.3);
            border-radius: 14px;
            overflow: hidden;
            margin: 20px 0;
        }

        .playground-header {
            background: rgba(108, 99, 255, 0.15);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            color: var(--primary);
            font-size: 0.95rem;
        }

        .playground-body {
            padding: 20px;
        }

        .playground-output {
            background: var(--code-bg);
            border: 1px solid var(--code-border);
            border-radius: 10px;
            padding: 14px;
            min-height: 60px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            margin-top: 12px;
            color: var(--success);
        }

        /* ============================================
           MODIFICATION PAGE
        ============================================ */
        .modification-demo {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 600px) {
            .modification-demo { grid-template-columns: 1fr; }
        }

        .demo-panel {
            background: var(--code-bg);
            border-radius: 12px;
            border: 1px solid var(--code-border);
            overflow: hidden;
        }

        .demo-panel-header {
            background: #161b22;
            padding: 10px 16px;
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .demo-panel-body {
            padding: 16px;
        }

        /* Card builder */
        .card-builder-preview {
            background: white;
            border-radius: 12px;
            padding: 20px;
            color: #333;
            min-height: 150px;
            transition: all 0.3s;
        }

        .card-builder-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .ctrl-input {
            flex: 1;
            min-width: 150px;
            padding: 8px 12px;
            background: var(--card);
            border: 2px solid rgba(108,99,255,0.3);
            border-radius: 8px;
            color: var(--text);
            font-size: 0.88rem;
            outline: none;
            transition: border-color 0.3s;
        }

        .ctrl-input:focus {
            border-color: var(--primary);
        }

        /* innerHTML vs textContent comparison */
        .compare-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        @media (max-width: 600px) {
            .compare-grid { grid-template-columns: 1fr; }
        }

        .compare-side {
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid;
        }

        .compare-side.danger-side { border-color: rgba(231,76,60,0.4); }
        .compare-side.safe-side   { border-color: rgba(46,204,113,0.4); }

        .compare-header {
            padding: 10px 16px;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .compare-header.danger-header { background: rgba(231,76,60,0.2); color: var(--danger); }
        .compare-header.safe-header   { background: rgba(46,204,113,0.2); color: var(--success); }

        .compare-body {
            padding: 14px;
            background: var(--code-bg);
        }

        .compare-output {
            background: white;
            border-radius: 8px;
            padding: 12px;
            color: #333;
            margin-top: 10px;
            min-height: 50px;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        /* ============================================
           EVENTS PAGE
        ============================================ */
        .event-visualizer {
            background: var(--code-bg);
            border: 1px solid var(--code-border);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
        }

        .event-log {
            list-style: none;
            max-height: 200px;
            overflow-y: auto;
            padding: 0;
        }

        .event-log li {
            padding: 6px 12px;
            margin: 4px 0;
            border-radius: 6px;
            font-size: 0.82rem;
            font-family: 'Courier New', monospace;
            animation: logIn 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        @keyframes logIn {
            from { opacity: 0; transform: translateX(-10px); }
            to   { opacity: 1; transform: translateX(0); }
        }

        .log-click     { background: rgba(108,99,255,0.15); color: var(--primary); }
        .log-mouseover { background: rgba(46,204,113,0.15);  color: var(--success); }
        .log-keydown   { background: rgba(243,156,18,0.15);  color: var(--warning); }
        .log-input     { background: rgba(255,101,132,0.15); color: var(--secondary); }

        .event-demo-area {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            gap: 12px;
            margin-bottom: 15px;
        }

        .event-btn {
            padding: 14px;
            border-radius: 12px;
            border: 2px solid rgba(108,99,255,0.3);
            background: rgba(108,99,255,0.1);
            color: var(--text);
            cursor: pointer;
            text-align: center;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.2s;
        }

        .event-btn:hover {
            background: rgba(108,99,255,0.25);
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .event-btn-icon { font-size: 1.8rem; display: block; margin-bottom: 6px; }

        /* Hover demo box */
        .hover-demo-box {
            width: 100%;
            height: 100px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin: 12px 0;
            user-select: none;
        }

        .hover-demo-box.hovered {
            background: linear-gradient(135deg, var(--success), #27ae60);
            transform: scale(1.03);
            box-shadow: 0 10px 30px rgba(46,204,113,0.4);
        }

        /* Input event demo */
        .input-event-demo {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .live-input {
            padding: 12px 16px;
            background: var(--card);
            border: 2px solid rgba(108,99,255,0.3);
            border-radius: 10px;
            color: var(--text);
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s;
        }

        .live-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(108,99,255,0.15);
        }

        .live-output {
            background: var(--code-bg);
            border-radius: 10px;
            padding: 14px;
            font-family: 'Courier New', monospace;
            font-size: 0.88rem;
            color: var(--text-muted);
            border: 1px solid var(--code-border);
        }

        /* Event propagation */
        .propagation-demo {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0;
        }

        .prop-box {
            border-radius: 10px;
            padding: 16px 24px;
            text-align: center;
            cursor: pointer;
            font-weight: 700;
            font-size: 0.85rem;
            transition: all 0.2s;
            width: 90%;
        }

        .prop-box.outer { background: rgba(231,76,60,0.2); border: 2px solid var(--danger); margin-bottom: -30px; padding-bottom: 46px; }
        .prop-box.mid   { background: rgba(243,156,18,0.2); border: 2px solid var(--warning); margin-bottom: -30px; padding-bottom: 46px; }
        .prop-box.inner { background: rgba(46,204,113,0.2); border: 2px solid var(--success); position: relative; z-index: 1; width: 50%; }

        .prop-box.fired { animation: propFire 0.5s ease; }

        @keyframes propFire {
            0%, 100% { transform: scale(1); }
            50%  { transform: scale(1.05); filter: brightness(1.5); }
        }

        /* ============================================
           EXERCISES PAGE
        ============================================ */
        .exercise-card {
            background: var(--card);
            border: 2px solid rgba(108,99,255,0.2);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 24px;
            transition: border-color 0.3s;
        }

        .exercise-card.completed {
            border-color: var(--success);
        }

        .exercise-header {
            padding: 16px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(0,0,0,0.2);
        }

        .exercise-title {
            font-weight: 700;
            font-size: 1rem;
        }

        .exercise-difficulty {
            font-size: 0.75rem;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 20px;
        }

        .diff-easy   { background: rgba(46,204,113,0.2); color: var(--success); }
        .diff-medium { background: rgba(243,156,18,0.2);  color: var(--warning); }
        .diff-hard   { background: rgba(231,76,60,0.2);   color: var(--danger);  }

        .exercise-body {
            padding: 20px;
        }

        .exercise-desc {
            color: var(--text-muted);
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .exercise-task {
            background: rgba(108,99,255,0.1);
            border-left: 3px solid var(--primary);
            padding: 12px 16px;
            border-radius: 0 8px 8px 0;
            margin-bottom: 16px;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .code-editor {
            background: var(--code-bg);
            border: 1px solid var(--code-border);
            border-radius: 10px;
            overflow: hidden;
        }

        .code-editor-header {
            background: #161b22;
            padding: 8px 14px;
            font-size: 0.78rem;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .code-editor textarea {
            width: 100%;
            background: transparent;
            border: none;
            color: var(--success);
            font-family: 'Courier New', monospace;
            font-size: 0.88rem;
            padding: 14px;
            outline: none;
            resize: vertical;
            line-height: 1.6;
            min-height: 100px;
        }

        .exercise-result {
            margin-top: 12px;
            padding: 12px 16px;
            border-radius: 10px;
            font-size: 0.88rem;
            font-weight: 600;
            display: none;
        }

        .result-correct {
            background: rgba(46,204,113,0.15);
            color: var(--success);
            border: 1px solid rgba(46,204,113,0.3);
        }

        .result-wrong {
            background: rgba(231,76,60,0.15);
            color: var(--danger);
            border: 1px solid rgba(231,76,60,0.3);
        }

        /* ============================================
           QUIZ PAGE
        ============================================ */
        .quiz-container {
            max-width: 700px;
            margin: 0 auto;
        }

        .quiz-progress-wrap {
            margin-bottom: 24px;
        }

        .quiz-progress-text {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .quiz-progress-bar {
            height: 8px;
            background: rgba(108,99,255,0.2);
            border-radius: 4px;
            overflow: hidden;
        }

        .quiz-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .quiz-question-card {
            background: var(--card);
            border-radius: 18px;
            padding: 28px;
            border: 2px solid rgba(108,99,255,0.2);
            margin-bottom: 20px;
        }

        .quiz-q-number {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 600;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .quiz-q-text {
            font-size: 1.1rem;
            font-weight: 700;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .quiz-q-code {
            background: var(--code-bg);
            border: 1px solid var(--code-border);
            border-radius: 8px;
            padding: 14px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            margin-bottom: 20px;
            line-height: 1.6;
            white-space: pre;
            overflow-x: auto;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            padding: 14px 18px;
            background: rgba(255,255,255,0.04);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.92rem;
            transition: all 0.25s;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .quiz-option:hover:not(.disabled) {
            border-color: var(--primary);
            background: rgba(108,99,255,0.1);
            transform: translateX(4px);
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: rgba(46,204,113,0.15);
            color: var(--success);
        }

        .quiz-option.wrong {
            border-color: var(--danger);
            background: rgba(231,76,60,0.15);
            color: var(--danger);
        }

        .quiz-option.disabled { cursor: not-allowed; }

        .option-letter {
            width: 28px; height: 28px;
            border-radius: 50%;
            background: rgba(108,99,255,0.15);
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 0.8rem;
            flex-shrink: 0;
        }

        .quiz-explanation {
            background: rgba(108,99,255,0.1);
            border: 1px solid rgba(108,99,255,0.3);
            border-radius: 10px;
            padding: 14px 18px;
            font-size: 0.88rem;
            line-height: 1.6;
            margin-top: 14px;
            display: none;
            color: var(--text);
        }

        .quiz-score-card {
            text-align: center;
            padding: 40px 20px;
        }

        .score-emoji {
            font-size: 5rem;
            display: block;
            margin-bottom: 20px;
        }

        .score-number {
            font-size: 4rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* ============================================
           PITFALLS PAGE
        ============================================ */
        .pitfall-card {
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 20px;
            border: 2px solid rgba(231,76,60,0.3);
        }

        .pitfall-header {
            background: linear-gradient(135deg, rgba(231,76,60,0.2), rgba(192,57,43,0.2));
            padding: 14px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pitfall-title {
            font-weight: 700;
            font-size: 1rem;
            color: var(--danger);
        }

        .pitfall-body {
            background: var(--card);
            padding: 20px;
        }

        .wrong-right {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
            margin-top: 14px;
        }

        @media (max-width: 600px) {
            .wrong-right { grid-template-columns: 1fr; }
        }

        .wrong-side, .right-side {
            border-radius: 10px;
            overflow: hidden;
        }

        .wrong-label, .right-label {
            padding: 8px 14px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .wrong-label { background: rgba(231,76,60,0.2); color: var(--danger); }
        .right-label { background: rgba(46,204,113,0.2); color: var(--success); }

        .wrong-code, .right-code {
            background: var(--code-bg);
            padding: 12px 14px;
            font-family: 'Courier New', monospace;
            font-size: 0.82rem;
            line-height: 1.6;
            white-space: pre;
            overflow-x: auto;
        }

        /* Cheatsheet */
        .cheatsheet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
        }

        .cheat-card {
            background: var(--code-bg);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--code-border);
        }

        .cheat-card-header {
            background: rgba(108,99,255,0.2);
            padding: 10px 16px;
            font-weight: 700;
            font-size: 0.88rem;
            color: var(--primary);
        }

        .cheat-item {
            padding: 10px 16px;
            border-bottom: 1px solid rgba(255,255,255,0.04);
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 10px;
            align-items: center;
            font-size: 0.82rem;
        }

        .cheat-item:last-child { border-bottom: none; }

        .cheat-method {
            font-family: 'Courier New', monospace;
            color: var(--primary);
            font-size: 0.78rem;
        }

        .cheat-desc {
            color: var(--text-muted);
        }

        /* ============================================
           RESPONSIVE
        ============================================ */
        @media (max-width: 768px) {
            .hero h1     { font-size: 2rem; }
            .page-title  { font-size: 1.7rem; }
            .nav-logo    { font-size: 1.1rem; }
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: var(--darker); }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 3px; }

        /* Utility */
        .mt-10  { margin-top: 10px; }
        .mt-20  { margin-top: 20px; }
        .mb-10  { margin-bottom: 10px; }
        .mb-20  { margin-bottom: 20px; }
        .flex   { display: flex; }
        .gap-10 { gap: 10px; }
        .gap-16 { gap: 16px; }
        .wrap   { flex-wrap: wrap; }
        .center { align-items: center; }

        /* Confetti */
        .confetti-piece {
            position: fixed;
            width: 10px;
            height: 10px;
            border-radius: 2px;
            animation: confettiFall 2s linear forwards;
            z-index: 9999;
            pointer-events: none;
        }

        @keyframes confettiFall {
            0%   { transform: translateY(-20px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* Tooltip */
        .tooltip-wrap {
            position: relative;
            display: inline-block;
        }

        .tooltip-wrap .tooltip {
            visibility: hidden;
            background: var(--darker);
            color: var(--text);
            text-align: center;
            border-radius: 6px;
            padding: 5px 10px;
            position: absolute;
            z-index: 100;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            font-size: 0.78rem;
            border: 1px solid var(--code-border);
            opacity: 0;
            transition: opacity 0.2s;
        }

        .tooltip-wrap:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }

        /* Accordion */
        .accordion {
            border: 1px solid rgba(108,99,255,0.2);
            border-radius: 12px;
            overflow: hidden;
            margin: 10px 0;
        }

        .accordion-header {
            padding: 14px 18px;
            background: rgba(108,99,255,0.1);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            transition: background 0.2s;
        }

        .accordion-header:hover {
            background: rgba(108,99,255,0.2);
        }

        .accordion-arrow {
            transition: transform 0.3s;
        }

        .accordion-body {
            display: none;
            padding: 16px 18px;
            background: var(--code-bg);
            font-size: 0.88rem;
            line-height: 1.7;
            color: var(--text-muted);
        }

        .accordion.open .accordion-arrow {
            transform: rotate(180deg);
        }

        .accordion.open .accordion-body {
            display: block;
        }
    </style>
</head>
<body>

<!-- Animated background -->
<div class="bg-animation">
    <span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span>
</div>

<!-- Reading progress bar -->
<div class="progress-bar" id="progressBar"></div>

<!-- Navigation -->
<nav class="top-nav">
    <div class="nav-logo">üéØ DOM Masterclass</div>
    <div class="nav-tabs">
        <button class="nav-tab active" onclick="showPage('home')">üè† Home</button>
        <button class="nav-tab" onclick="showPage('selectors')">üîç Selectors</button>
        <button class="nav-tab" onclick="showPage('modification')">‚úèÔ∏è Modify</button>
        <button class="nav-tab" onclick="showPage('events')">‚ö° Events</button>
        <button class="nav-tab" onclick="showPage('exercises')">üí™ Exercises</button>
        <button class="nav-tab" onclick="showPage('quiz')">üß† Quiz</button>
        <button class="nav-tab" onclick="showPage('pitfalls')">‚ö†Ô∏è Pitfalls</button>
    </div>
</nav>

<div class="main-container">

    <!-- ==========================================
         PAGE 1: HOME
    ========================================== -->
    <div class="page active" id="page-home">
        <div class="hero">
            <span class="hero-emoji">üå≥</span>
            <h1>Master the DOM!</h1>
            <p>The <strong>Document Object Model</strong> is your superpower for making web pages
               come alive. Let's go from zero to hero ‚Äî visually, interactively, and with loads of fun!</p>
            <button class="btn btn-primary" style="margin: 0 auto; font-size:1.1rem; padding:14px 32px;"
                    onclick="showPage('selectors')">
                üöÄ Start Learning
            </button>
        </div>

        <!-- What is the DOM? -->
        <h2 class="section-title">ü§î What IS the DOM?</h2>

        <div class="card">
            <div class="card-title">üå≥ The DOM is a Tree</div>
            <p style="color:var(--text-muted); margin-bottom:20px; line-height:1.7;">
                When your browser loads an HTML page, it creates a <strong>tree of objects</strong>
                ‚Äî one object for every HTML element. JavaScript can read and change this tree.
                That's the DOM!
            </p>
            <div class="dom-tree">
<span style="color:#8b949e;">// Your HTML looks like this in the browser's memory:</span>

<span class="tree-tag">document</span>  <span class="tree-label">ROOT</span>
  ‚îî‚îÄ‚îÄ <span class="tree-tag">&lt;html&gt;</span>
        ‚îú‚îÄ‚îÄ <span class="tree-tag">&lt;head&gt;</span>
        ‚îÇ     ‚îî‚îÄ‚îÄ <span class="tree-tag">&lt;title&gt;</span>  <span class="tree-text">"My Page"</span>
        ‚îî‚îÄ‚îÄ <span class="tree-tag">&lt;body&gt;</span>
              ‚îú‚îÄ‚îÄ <span class="tree-tag">&lt;h1</span> <span class="tree-attr">id=</span><span class="tree-val">"title"</span><span class="tree-tag">&gt;</span>  <span class="tree-text">"Hello World"</span>  <span class="tree-label">‚Üê you can grab this!</span>
              ‚îú‚îÄ‚îÄ <span class="tree-tag">&lt;p</span> <span class="tree-attr">class=</span><span class="tree-val">"intro"</span><span class="tree-tag">&gt;</span>  <span class="tree-text">"Welcome..."</span>
              ‚îî‚îÄ‚îÄ <span class="tree-tag">&lt;ul&gt;</span>
                    ‚îú‚îÄ‚îÄ <span class="tree-tag">&lt;li&gt;</span>  <span class="tree-text">"Item 1"</span>
                    ‚îú‚îÄ‚îÄ <span class="tree-tag">&lt;li&gt;</span>  <span class="tree-text">"Item 2"</span>
                    ‚îî‚îÄ‚îÄ <span class="tree-tag">&lt;li&gt;</span>  <span class="tree-text">"Item 3"</span>
            </div>
        </div>

        <!-- Layer diagram -->
        <div class="card">
            <div class="card-title">üîó How It All Connects</div>
            <div class="dom-diagram">
                <div class="dom-layer">
                    <div class="dom-box html">üìÑ HTML<br><small style="font-weight:400;">Your structure</small></div>
                </div>
                <div class="dom-connector"></div>
                <div class="dom-layer">
                    <div class="dom-box dom">üå≥ DOM<br><small style="font-weight:400;">Browser's object tree</small></div>
                </div>
                <div class="dom-connector"></div>
                <div class="dom-layer">
                    <div class="dom-box js">‚ö° JavaScript<br><small style="font-weight:400;">Reads & changes the DOM</small></div>
                </div>
                <div class="dom-connector"></div>
                <div class="dom-layer">
                    <div class="dom-box browser">üåê Browser<br><small style="font-weight:400;">Renders updated page</small></div>
                </div>
            </div>
        </div>

        <!-- Topics overview -->
        <h2 class="section-title">üìö What You'll Learn</h2>
        <div class="topic-cards">
            <div class="topic-card" onclick="showPage('selectors')">
                <span class="topic-card-icon">üîç</span>
                <h3>Selecting Elements</h3>
                <p>Learn querySelector, querySelectorAll and how to find any element on the page.</p>
            </div>
            <div class="topic-card" onclick="showPage('modification')">
                <span class="topic-card-icon">‚úèÔ∏è</span>
                <h3>Modifying Content</h3>
                <p>Change text, HTML, styles, classes and attributes with JavaScript.</p>
            </div>
            <div class="topic-card" onclick="showPage('modification')">
                <span class="topic-card-icon">üèóÔ∏è</span>
                <h3>Creating Elements</h3>
                <p>Build new HTML elements from scratch and add them to the page dynamically.</p>
            </div>
            <div class="topic-card" onclick="showPage('events')">
                <span class="topic-card-icon">‚ö°</span>
                <h3>Event Listeners</h3>
                <p>React to clicks, keyboard presses, mouse moves and more.</p>
            </div>
            <div class="topic-card" onclick="showPage('exercises')">
                <span class="topic-card-icon">üí™</span>
                <h3>Exercises</h3>
                <p>Hands-on challenges to solidify your understanding.</p>
            </div>
            <div class="topic-card" onclick="showPage('pitfalls')">
                <span class="topic-card-icon">‚ö†Ô∏è</span>
                <h3>Common Mistakes</h3>
                <p>The most common DOM pitfalls and how to avoid them.</p>
            </div>
        </div>

        <!-- Quick Facts -->
        <h2 class="section-title">‚ö° Quick Facts</h2>
        <div class="grid-3">
            <div class="card" style="text-align:center;">
                <div style="font-size:2.5rem; margin-bottom:10px;">üéØ</div>
                <div style="font-weight:700; color:var(--primary); font-size:1.1rem;">querySelector</div>
                <div style="color:var(--text-muted); font-size:0.85rem; margin-top:6px;">The #1 most used DOM method</div>
            </div>
            <div class="card" style="text-align:center;">
                <div style="font-size:2.5rem; margin-bottom:10px;">üå≤</div>
                <div style="font-weight:700; color:var(--secondary); font-size:1.1rem;">Every element</div>
                <div style="color:var(--text-muted); font-size:0.85rem; margin-top:6px;">is a node in the tree</div>
            </div>
            <div class="card" style="text-align:center;">
                <div style="font-size:2.5rem; margin-bottom:10px;">‚ö°</div>
                <div style="font-weight:700; color:var(--warning); font-size:1.1rem;">Instant updates</div>
                <div style="color:var(--text-muted); font-size:0.85rem; margin-top:6px;">No page refresh needed</div>
            </div>
        </div>
    </div>

    <!-- ==========================================
         PAGE 2: SELECTORS
    ========================================== -->
    <div class="page" id="page-selectors">
        <h1 class="page-title">üîç Selecting Elements</h1>
        <p class="page-subtitle">
            Before you can change anything on the page, you first need to <strong>find</strong> it.
            Think of selectors as your GPS ‚Äî they tell JavaScript exactly which element you want to work with.
        </p>

        <!-- querySelector -->
        <h2 class="section-title">üéØ querySelector( )</h2>

        <div class="card">
            <div class="card-title">Finding ONE element</div>
            <p style="color:var(--text-muted); margin-bottom:15px; line-height:1.7;">
                <code>querySelector()</code> searches the page and returns the
                <strong>first matching element</strong>. It uses the same CSS selector syntax you already know!
            </p>

            <div class="code-block">
                <div class="code-header">
                    <div class="code-dots">
                        <div class="code-dot red"></div>
                        <div class="code-dot yellow"></div>
                        <div class="code-dot green"></div>
                    </div>
                    <span class="code-lang">JavaScript</span>
                </div>
                <div class="code-body"><span class="cmt">// Select by ID (use #)</span>
<span class="kw">const</span> title = document.<span class="fn">querySelector</span>(<span class="str">'#main-title'</span>);

<span class="cmt">// Select by class (use .)</span>
<span class="kw">const</span> btn = document.<span class="fn">querySelector</span>(<span class="str">'.my-button'</span>);

<span class="cmt">// Select by tag name</span>
<span class="kw">const</span> firstPara = document.<span class="fn">querySelector</span>(<span class="str">'p'</span>);

<span class="cmt">// Select by attribute</span>
<span class="kw">const</span> emailInput = document.<span class="fn">querySelector</span>(<span class="str">'input[type="email"]'</span>);

<span class="cmt">// Combine selectors (CSS style!)</span>
<span class="kw">const</span> navLink = document.<span class="fn">querySelector</span>(<span class="str">'nav .menu-item'</span>);
<span class="kw">const</span> firstLi = document.<span class="fn">querySelector</span>(<span class="str">'ul li:first-child'</span>);</div>
            </div>

            <div class="info-box tip">
                <div class="info-box-icon">üí°</div>
                <div class="info-box-content">
                    <strong>Pro Tip</strong>
                    <p>If no element matches, <code>querySelector()</code> returns <code>null</code> ‚Äî not an error!
                       Always check for null before using the result.</p>
                </div>
            </div>
        </div>

        <!-- querySelectorAll -->
        <h2 class="section-title">üìã querySelectorAll( )</h2>

        <div class="card">
            <div class="card-title">Finding MULTIPLE elements</div>
            <p style="color:var(--text-muted); margin-bottom:15px; line-height:1.7;">
                <code>querySelectorAll()</code> returns <strong>all matching elements</strong>
                as a NodeList (similar to an array). Perfect for working with groups!
            </p>

            <div class="code-block">
                <div class="code-header">
                    <div class="code-dots">
                        <div class="code-dot red"></div>
                        <div class="code-dot yellow"></div>
                        <div class="code-dot green"></div>
                    </div>
                    <span class="code-lang">JavaScript</span>
                </div>
                <div class="code-body"><span class="cmt">// Get ALL paragraphs</span>
<span class="kw">const</span> allParas = document.<span class="fn">querySelectorAll</span>(<span class="str">'p'</span>);

<span class="cmt">// Get ALL elements with a class</span>
<span class="kw">const</span> cards = document.<span class="fn">querySelectorAll</span>(<span class="str">'.card'</span>);

<span class="cmt">// Loop through results with forEach</span>
cards.<span class="fn">forEach</span>(<span class="kw">function</span>(card) {
    card.style.background = <span class="str">'blue'</span>;  <span class="cmt">// Change every card</span>
});

<span class="cmt">// Modern arrow function version</span>
cards.<span class="fn">forEach</span>(card => {
    card.style.background = <span class="str">'blue'</span>;
});</div>
            </div>

            <div class="info-box warn">
                <div class="info-box-icon">‚ö†Ô∏è</div>
                <div class="info-box-content">
                    <strong>NodeList ‚â† Array!</strong>
                    <p>A NodeList looks like an array but is NOT one. It has <code>forEach()</code>
                       but not <code>map()</code> or <code>filter()</code>.
                       Convert with <code>Array.from(list)</code> if you need array methods.</p>
                </div>
            </div>
        </div>

        <!-- Comparison table -->
        <h2 class="section-title">üìä All Selector Methods</h2>
        <div class="card">
            <table class="method-table">
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Returns</th>
                        <th>Example</th>
                        <th>Use When</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>querySelector()</code></td>
                        <td><span class="badge badge-primary">1 element</span></td>
                        <td><code>querySelector('#id')</code></td>
                        <td>You need the first match</td>
                    </tr>
                    <tr>
                        <td><code>querySelectorAll()</code></td>
                        <td><span class="badge badge-success">NodeList</span></td>
                        <td><code>querySelectorAll('.class')</code></td>
                        <td>You need all matches</td>
                    </tr>
                    <tr>
                        <td><code>getElementById()</code></td>
                        <td><span class="badge badge-primary">1 element</span></td>
                        <td><code>getElementById('id')</code></td>
                        <td>Select by ID (older, fast)</td>
                    </tr>
                    <tr>
                        <td><code>getElementsByClassName()</code></td>
                        <td><span class="badge badge-warning">HTMLCollection</span></td>
                        <td><code>getElementsByClassName('cls')</code></td>
                        <td>Select by class (older)</td>
                    </tr>
                    <tr>
                        <td><code>getElementsByTagName()</code></td>
                        <td><span class="badge badge-warning">HTMLCollection</span></td>
                        <td><code>getElementsByTagName('p')</code></td>
                        <td>Select by tag (older)</td>
                    </tr>
                </tbody>
            </table>
            <div class="info-box tip" style="margin-top:15px;">
                <div class="info-box-icon">üèÜ</div>
                <div class="info-box-content">
                    <strong>Modern Best Practice</strong>
                    <p>Stick with <code>querySelector</code> and <code>querySelectorAll</code>.
                       They can do everything the others can, with CSS selector syntax you already know.</p>
                </div>
            </div>
        </div>

        <!-- Interactive Playground -->
        <h2 class="section-title">üéÆ Live Selector Playground</h2>

        <div class="playground">
            <div class="playground-header">
                üéÆ Try It! Click the buttons to run selectors on the demo page below
            </div>
            <div class="playground-body">
                <!-- HTML Preview -->
                <div class="dom-preview" id="selectorPreview">
                    <h2 id="demo-heading">Welcome to My Page!</h2>
                    <p class="intro-text" id="demo-intro">This is the intro paragraph.</p>
                    <ul>
                        <li class="item" id="item-1">üçé Apple</li>
                        <li class="item" id="item-2">üçå Banana</li>
                        <li class="item special" id="item-3">‚≠ê Special Item</li>
                        <li class="item" id="item-4">üçá Grape</li>
                    </ul>
                </div>

                <!-- Selector buttons -->
                <div class="flex gap-10 wrap mt-20">
                    <button class="btn btn-secondary btn-sm"
                            onclick="runSelector(&#39;#demo-heading&#39;, &#39;querySelector&#39;)">
                        querySelector('#demo-heading')
                    </button>
                    <button class="btn btn-secondary btn-sm"
                            onclick="runSelector(&#39;.item&#39;, &#39;querySelectorAll&#39;)">
                        querySelectorAll('.item')
                    </button>
                    <button class="btn btn-secondary btn-sm"
                            onclick="runSelector(&#39;.special&#39;, &#39;querySelector&#39;)">
                        querySelector('.special')
                    </button>
                    <button class="btn btn-secondary btn-sm"
                            onclick="runSelector(&#39;li:first-child&#39;, &#39;querySelector&#39;)">
                        querySelector('li:first-child')
                    </button>
                    <button class="btn btn-secondary btn-sm"
                            onclick="runSelector(&#39;p&#39;, &#39;querySelector&#39;)">
                        querySelector('p')
                    </button>
                    <button class="btn btn-secondary btn-sm"
                            onclick="runSelector(&#39;.item&#39;, &#39;querySelector&#39;)">
                        querySelector('.item') ‚Äî first only
                    </button>
                    <button class="btn btn-warning btn-sm" onclick="clearHighlights()">
                        üßπ Clear
                    </button>
                </div>

                <div class="playground-output" id="selectorOutput">
                    üëÜ Click a button above to see which element(s) get selected...
                </div>
            </div>
        </div>

        <!-- CSS Selectors Cheatsheet -->
        <h2 class="section-title">üìå CSS Selector Cheatsheet</h2>
        <div class="grid-2">
            <div class="card">
                <div class="card-title">Basic Selectors</div>
                <div style="font-family:'Courier New'; font-size:0.85rem; line-height:2.2;">
                    <div><code style="color:#ffa657;">#myId</code> <span style="color:var(--text-muted);">‚Üí Element with id="myId"</span></div>
                    <div><code style="color:#ffa657;">.myClass</code> <span style="color:var(--text-muted);">‚Üí Elements with class="myClass"</span></div>
                    <div><code style="color:#ffa657;">p</code> <span style="color:var(--text-muted);">‚Üí All &lt;p&gt; elements</span></div>
                    <div><code style="color:#ffa657;">*</code> <span style="color:var(--text-muted);">‚Üí Every element</span></div>
                </div>
            </div>
            <div class="card">
                <div class="card-title">Advanced Selectors</div>
                <div style="font-family:'Courier New'; font-size:0.85rem; line-height:2.2;">
                    <div><code style="color:#ffa657;">ul li</code> <span style="color:var(--text-muted);">‚Üí &lt;li&gt; inside a &lt;ul&gt;</span></div>
                    <div><code style="color:#ffa657;">li:first-child</code> <span style="color:var(--text-muted);">‚Üí First &lt;li&gt;</span></div>
                    <div><code style="color:#ffa657;">li:nth-child(2)</code> <span style="color:var(--text-muted);">‚Üí Second &lt;li&gt;</span></div>
                    <div><code style="color:#ffa657;">input[type="text"]</code> <span style="color:var(--text-muted);">‚Üí Text inputs</span></div>
                </div>
            </div>
        </div>
    </div>

    <!-- ==========================================
         PAGE 3: MODIFICATION
    ========================================== -->
    <div class="page" id="page-modification">
        <h1 class="page-title">‚úèÔ∏è Modifying the DOM</h1>
        <p class="page-subtitle">
            Now that you can find elements, let's <strong>change them</strong>!
            You can modify text, HTML, styles, classes, attributes ‚Äî and even create brand-new elements.
        </p>

        <!-- textContent vs innerHTML -->
        <h2 class="section-title">üìù textContent vs innerHTML</h2>

        <div class="card">
            <div class="card-title">‚öîÔ∏è The Big Difference</div>
            <p style="color:var(--text-muted); margin-bottom:16px; line-height:1.7;">
                Both change element content, but they behave very differently with HTML tags:
            </p>

            <div class="compare-grid">
                <div class="compare-side safe-side">
                    <div class="compare-header safe-header">‚úÖ textContent ‚Äî SAFE</div>
                    <div class="compare-body">
                        <p style="color:var(--text-muted); font-size:0.85rem; line-height:1.6;">
                            Sets/gets plain text. HTML tags are treated as <strong>literal characters</strong>, NOT rendered. Safer against XSS attacks.
                        </p>
                        <div class="compare-output" id="tcOutput">Click the button below ‚Üí</div>
                        <div style="margin-top:10px;">
                            <button class="btn btn-success btn-sm" onclick="demoTextContent()">
                                Run textContent
                            </button>
                        </div>
                    </div>
                </div>
                <div class="compare-side danger-side">
                    <div class="compare-header danger-header">‚ö° innerHTML ‚Äî POWERFUL</div>
                    <div class="compare-body">
                        <p style="color:var(--text-muted); font-size:0.85rem; line-height:1.6;">
                            Sets/gets HTML. Tags are <strong>actually rendered</strong> as HTML. Powerful but dangerous with user input.
                        </p>
                        <div class="compare-output" id="ihOutput">Click the button below ‚Üí</div>
                        <div style="margin-top:10px;">
                            <button class="btn btn-warning btn-sm" onclick="demoInnerHTML()">
                                Run innerHTML
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Code examples -->
        <div class="code-block">
            <div class="code-header">
                <div class="code-dots">
                    <div class="code-dot red"></div>
                    <div class="code-dot yellow"></div>
                    <div class="code-dot green"></div>
                </div>
                <span class="code-lang">JavaScript ‚Äî textContent vs innerHTML</span>
            </div>
            <div class="code-body"><span class="kw">const</span> box = document.<span class="fn">querySelector</span>(<span class="str">'#myBox'</span>);

<span class="cmt">// ‚úÖ textContent ‚Äî treats &lt;b&gt; as plain text</span>
box.<span class="prp">textContent</span> = <span class="str">'Hello &lt;b&gt;World&lt;/b&gt;'</span>;
<span class="cmt">// Result: displays  Hello &lt;b&gt;World&lt;/b&gt;  literally</span>

<span class="cmt">// ‚ö° innerHTML ‚Äî renders the HTML</span>
box.<span class="prp">innerHTML</span> = <span class="str">'Hello &lt;b&gt;World&lt;/b&gt;'</span>;
<span class="cmt">// Result: displays  Hello <b>World</b>  (bold!)</span>

<span class="cmt">// üìñ Reading content back:</span>
console.<span class="fn">log</span>(box.<span class="prp">textContent</span>);  <span class="cmt">// "Hello World" (no tags)</span>
console.<span class="fn">log</span>(box.<span class="prp">innerHTML</span>);   <span class="cmt">// "Hello &lt;b&gt;World&lt;/b&gt;"</span></div>
        </div>

        <!-- Styles & Classes -->
        <h2 class="section-title">üé® Changing Styles & Classes</h2>

        <div class="grid-2">
            <div class="card">
                <div class="card-title">üñåÔ∏è Inline Styles</div>
                <div class="code-block">
                    <div class="code-header">
                        <div class="code-dots">
                            <div class="code-dot red"></div>
                            <div class="code-dot yellow"></div>
                            <div class="code-dot green"></div>
                        </div>
                        <span class="code-lang">JS</span>
                    </div>
                    <div class="code-body" style="font-size:0.8rem;"><span class="kw">const</span> el = document
  .<span class="fn">querySelector</span>(<span class="str">'#box'</span>);

<span class="cmt">// Set styles directly</span>
el.style.<span class="prp">color</span> = <span class="str">'red'</span>;
el.style.<span class="prp">fontSize</span> = <span class="str">'24px'</span>;
el.style.<span class="prp">background</span> = <span class="str">'blue'</span>;
el.style.<span class="prp">display</span> = <span class="str">'none'</span>; <span class="cmt">// hide</span>
el.style.<span class="prp">display</span> = <span class="str">'block'</span>;<span class="cmt">// show</span>

<span class="cmt">// CSS: background-color</span>
<span class="cmt">// JS:  backgroundColor (camelCase!)</span></div>
                </div>
            </div>
            <div class="card">
                <div class="card-title">üè∑Ô∏è CSS Classes (Best Practice!)</div>
                <div class="code-block">
                    <div class="code-header">
                        <div class="code-dots">
                            <div class="code-dot red"></div>
                            <div class="code-dot yellow"></div>
                            <div class="code-dot green"></div>
                        </div>
                        <span class="code-lang">JS</span>
                    </div>
                    <div class="code-body" style="font-size:0.8rem;"><span class="kw">const</span> el = document
  .<span class="fn">querySelector</span>(<span class="str">'#box'</span>);

<span class="cmt">// Add a class</span>
el.classList.<span class="fn">add</span>(<span class="str">'active'</span>);

<span class="cmt">// Remove a class</span>
el.classList.<span class="fn">remove</span>(<span class="str">'hidden'</span>);

<span class="cmt">// Toggle on/off</span>
el.classList.<span class="fn">toggle</span>(<span class="str">'dark'</span>);

<span class="cmt">// Check if has class</span>
el.classList.<span class="fn">contains</span>(<span class="str">'active'</span>);</div>
                </div>
            </div>
        </div>

        <!-- Attributes -->
        <div class="card">
            <div class="card-title">üîß Working with Attributes</div>
            <div class="code-block">
                <div class="code-header">
                    <div class="code-dots">
                        <div class="code-dot red"></div>
                        <div class="code-dot yellow"></div>
                        <div class="code-dot green"></div>
                    </div>
                    <span class="code-lang">JavaScript</span>
                </div>
                <div class="code-body"><span class="kw">const</span> img = document.<span class="fn">querySelector</span>(<span class="str">'img'</span>);
<span class="kw">const</span> link = document.<span class="fn">querySelector</span>(<span class="str">'a'</span>);

<span class="cmt">// Get an attribute</span>
<span class="kw">const</span> src = img.<span class="fn">getAttribute</span>(<span class="str">'src'</span>);

<span class="cmt">// Set an attribute</span>
img.<span class="fn">setAttribute</span>(<span class="str">'src'</span>, <span class="str">'new-image.jpg'</span>);
img.<span class="fn">setAttribute</span>(<span class="str">'alt'</span>, <span class="str">'A cool image'</span>);
link.<span class="fn">setAttribute</span>(<span class="str">'href'</span>, <span class="str">'https://example.com'</span>);

<span class="cmt">// Remove an attribute</span>
img.<span class="fn">removeAttribute</span>(<span class="str">'disabled'</span>);

<span class="cmt">// Direct property access (faster for common attributes)</span>
img.<span class="prp">src</span> = <span class="str">'new-image.jpg'</span>;
link.<span class="prp">href</span> = <span class="str">'https://example.com'</span>;</div>
            </div>
        </div>

        <!-- Creating Elements -->
        <h2 class="section-title">üèóÔ∏è Creating New Elements</h2>

        <div class="card">
            <div class="card-title">Building the DOM from Scratch</div>
            <div class="code-block">
                <div class="code-header">
                    <div class="code-dots">
                        <div class="code-dot red"></div>
                        <div class="code-dot yellow"></div>
                        <div class="code-dot green"></div>
                    </div>
                    <span class="code-lang">JavaScript ‚Äî Full Creation Flow</span>
                </div>
                <div class="code-body"><span class="cmt">// Step 1: Create the element</span>
<span class="kw">const</span> newCard = document.<span class="fn">createElement</span>(<span class="str">'div'</span>);

<span class="cmt">// Step 2: Add content & attributes</span>
newCard.<span class="prp">textContent</span> = <span class="str">'I am a new card!'</span>;
newCard.classList.<span class="fn">add</span>(<span class="str">'card'</span>);
newCard.<span class="fn">setAttribute</span>(<span class="str">'id'</span>, <span class="str">'myNewCard'</span>);

<span class="cmt">// Step 3: Add to the page</span>
<span class="kw">const</span> container = document.<span class="fn">querySelector</span>(<span class="str">'#container'</span>);
container.<span class="fn">appendChild</span>(newCard);   <span class="cmt">// Add at the END</span>
container.<span class="fn">prepend</span>(newCard);        <span class="cmt">// Add at the START</span>

<span class="cmt">// Removing an element</span>
newCard.<span class="fn">remove</span>();  <span class="cmt">// Poof! It's gone.</span></div>
            </div>
        </div>

        <!-- INTERACTIVE: Card Builder -->
        <h2 class="section-title">üéÆ Live Card Builder</h2>

        <div class="playground">
            <div class="playground-header">
                üèóÔ∏è Build a Card Dynamically ‚Äî Fill in the fields and click "Create Card"!
            </div>
            <div class="playground-body">
                <div class="grid-2">
                    <div>
                        <p style="color:var(--text-muted); font-size:0.88rem; margin-bottom:12px;">Controls:</p>
                        <div style="display:flex; flex-direction:column; gap:10px;">
                            <input class="ctrl-input" type="text" id="cardTitle" placeholder="Card Title (e.g. My Item)" value="New Card">
                            <input class="ctrl-input" type="text" id="cardText" placeholder="Card Text" value="Some cool description here.">
                            <input class="ctrl-input" type="color" id="cardColor" value="#6c63ff" style="height:44px;">
                            <div class="flex gap-10 wrap">
                                <button class="btn btn-primary" onclick="buildCard()">‚ûï Create Card</button>
                                <button class="btn btn-danger btn-sm" onclick="clearCards()">üóëÔ∏è Clear All</button>
                            </div>
                        </div>
                    </div>
                    <div>
                        <p style="color:var(--text-muted); font-size:0.88rem; margin-bottom:12px;">Preview:</p>
                        <div id="cardContainer" style="min-height:160px; border:2px dashed rgba(108,99,255,0.3); border-radius:12px; padding:14px; display:flex; flex-wrap:wrap; gap:10px; align-items:flex-start;">
                            <p style="color:var(--text-muted); font-size:0.85rem; margin:auto; text-align:center;">Cards appear here üëÜ</p>
                        </div>
                    </div>
                </div>

                <!-- Generated code display -->
                <div style="margin-top:16px;">
                    <p style="color:var(--text-muted); font-size:0.85rem; margin-bottom:8px;">üìã Generated Code:</p>
                    <div class="playground-output" id="generatedCode" style="color:var(--primary);">
                        // Code will appear here when you create a card...
                    </div>
                </div>
            </div>
        </div>

        <!-- Style Experimenter -->
        <h2 class="section-title">üé® Live Style Experimenter</h2>

        <div class="playground">
            <div class="playground-header">üé® Change styles in real time!</div>
            <div class="playground-body">
                <div id="styleTarget" style="
                    background: linear-gradient(135deg, #6c63ff, #ff6584);
                    border-radius: 16px;
                    padding: 30px;
                    text-align: center;
                    font-size: 1.3rem;
                    font-weight: 700;
                    color: white;
                    margin-bottom: 16px;
                    transition: all 0.4s;
                    cursor: default;
                ">
                    üéØ I am the target element!
                </div>
                <div class="flex gap-10 wrap">
                    <button class="btn btn-sm" style="background:#e74c3c;color:white;" onclick="styleTarget('background','#e74c3c')">üî¥ Red BG</button>
                    <button class="btn btn-sm" style="background:#2ecc71;color:white;" onclick="styleTarget('background','linear-gradient(135deg,#2ecc71,#27ae60)')">üü¢ Green BG</button>
                    <button class="btn btn-sm" style="background:#f39c12;color:#333;" onclick="styleTarget('background','#f39c12')">üü° Yellow BG</button>
                    <button class="btn btn-sm" style="background:#6c63ff;color:white;" onclick="styleTarget('fontSize','2rem')">üî° Big Text</button>
                    <button class="btn btn-sm" style="background:#ff6584;color:white;" onclick="styleTarget('fontSize','0.9rem')">üî§ Small Text</button>
                    <button class="btn btn-sm" style="background:#333;color:white;" onclick="styleTarget('borderRadius','0')">‚¨õ No Radius</button>
                    <button class="btn btn-sm" style="background:#0f3460;color:white; border:2px solid #6c63ff;" onclick="styleTarget('borderRadius','50%')">‚≠ï Circle</button>
                    <button class="btn btn-secondary btn-sm" onclick="resetStyleTarget()">‚Ü©Ô∏è Reset</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ==========================================
         PAGE 4: EVENTS
    ========================================== -->
    <div class="page" id="page-events">
        <h1 class="page-title">‚ö° Event Listeners</h1>
        <p class="page-subtitle">
            Events let your page <strong>react</strong> to what users do ‚Äî clicks, key presses,
            mouse movements, form submissions, and much more. This is where the magic happens!
        </p>

        <!-- What are events? -->
        <h2 class="section-title">ü§î What is an Event?</h2>

        <div class="card">
            <div class="card-title">The Anatomy of addEventListener</div>
            <div class="code-block">
                <div class="code-header">
                    <div class="code-dots">
                        <div class="code-dot red"></div>
                        <div class="code-dot yellow"></div>
                        <div class="code-dot green"></div>
                    </div>
                    <span class="code-lang">JavaScript</span>
                </div>
                <div class="code-body"><span class="cmt">// The three parts of addEventListener:</span>
element.<span class="fn">addEventListener</span>(
    <span class="str">'click'</span>,    <span class="cmt">// 1Ô∏è‚É£ EVENT TYPE ‚Äî what to listen for</span>
    <span class="fn">myFunction</span>, <span class="cmt">// 2Ô∏è‚É£ CALLBACK ‚Äî function to run when it fires</span>
    <span class="kw">false</span>         <span class="cmt">// 3Ô∏è‚É£ OPTIONS (optional, usually omit this)</span>
);

<span class="cmt">// Most common way ‚Äî inline arrow function:</span>
<span class="kw">const</span> btn = document.<span class="fn">querySelector</span>(<span class="str">'#myBtn'</span>);

btn.<span class="fn">addEventListener</span>(<span class="str">'click'</span>, <span class="kw">function</span>(event) {
    console.<span class="fn">log</span>(<span class="str">'Button was clicked!'</span>);
    console.<span class="fn">log</span>(event);  <span class="cmt">// The event object ‚Äî contains details!</span>
});

<span class="cmt">// Arrow function version (same thing, shorter):</span>
btn.<span class="fn">addEventListener</span>(<span class="str">'click'</span>, (e) => {
    console.<span class="fn">log</span>(<span class="str">'Clicked!'</span>, e.target); <span class="cmt">// e.target = the clicked element</span>
});</div>
            </div>
        </div>

        <!-- Common Events -->
        <h2 class="section-title">üìã Common Events Reference</h2>
        <div class="grid-3">
            <div class="card">
                <div class="card-title">üñ±Ô∏è Mouse Events</div>
                <div style="display:flex;flex-direction:column;gap:6px;font-size:0.85rem;">
                    <div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.05);">
                        <code>click</code> <span style="color:var(--text-muted);">Single click</span>
                    </div>
                    <div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.05);">
                        <code>dblclick</code> <span style="color:var(--text-muted);">Double click</span>
                    </div>
                    <div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.05);">
                        <code>mouseenter</code> <span style="color:var(--text-muted);">Mouse in</span>
                    </div>
                    <div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.05);">
                        <code>mouseleave</code> <span style="color:var(--text-muted);">Mouse out</span>
                    </div>
                    <div style="display:flex;justify-content:space-between;padding:4px 0;">
                        <code>mousemove</code> <span style="color:var(--text-muted);">Moving over</span>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-title">‚å®Ô∏è Keyboard Events</div>
                <div style="display:flex;flex-direction:column;gap:6px;font-size:0.85rem;">
                    <div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.05);">
                        <code>keydown</code> <span style="color:var(--text-muted);">Key pressed</span>
                    </div>
                    <div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.05);">
                        <code>keyup</code> <span style="color:var(--text-muted);">Key released</span>
                    </div>
                    <div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.05);">
                        <code>keypress</code> <span style="color:var(--text-muted);">Key held (old)</span>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-title">üìã Form Events</div>
                <div style="display:flex;flex-direction:column;gap:6px;font-size:0.85rem;">
                    <div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.05);">
                        <code>input</code> <span style="color:var(--text-muted);">Value changes</span>
                    </div>
                    <div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.05);">
                        <code>change</code> <span style="color:var(--text-muted);">Focus lost</span>
                    </div>
                    <div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.05);">
                        <code>submit</code> <span style="color:var(--text-muted);">Form submit</span>
                    </div>
                    <div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.05);">
                        <code>focus</code> <span style="color:var(--text-muted);">Gets focus</span>
                    </div>
                    <div style="display:flex;justify-content:space-between;padding:4px 0;">
                        <code>blur</code> <span style="color:var(--text-muted);">Loses focus</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interactive Event Logger -->
        <h2 class="section-title">üéÆ Interactive Event Logger</h2>

        <div class="playground">
            <div class="playground-header">‚ö° Interact with the buttons below ‚Äî watch events fire in real time!</div>
            <div class="playground-body">
                <div class="event-demo-area">
                    <button class="event-btn" id="evtClick" onclick="logEvent('click','üñ±Ô∏è click fired!')">
                        <span class="event-btn-icon">üëÜ</span>
                        Click Me!
                    </button>
                    <div class="event-btn" id="evtHover"
                         onmouseenter="logEvent('mouseover','üü¢ mouseenter fired!')"
                         onmouseleave="logEvent('mouseover','üî¥ mouseleave fired!')">
                        <span class="event-btn-icon">ü§ö</span>
                        Hover Me!
                    </div>
                    <button class="event-btn" id="evtDouble" ondblclick="logEvent('click','üí• dblclick fired!')">
                        <span class="event-btn-icon">‚úåÔ∏è</span>
                        Double Click!
                    </button>
                </div>

                <div class="input-event-demo">
                    <input class="live-input" type="text" id="eventInput"
                           placeholder="‚å®Ô∏è Type here to see input events..."
                           oninput="logEvent('input', '‚å®Ô∏è input: \"' + this.value + '\"')"
                           onkeydown="logEvent('keydown', '‚¨áÔ∏è keydown: ' + event.key)"
                           onkeyup="logEvent('keydown', '‚¨ÜÔ∏è keyup: ' + event.key)"
                           onfocus="logEvent('input', 'üéØ focus event fired!')"
                           onblur="logEvent('input', 'üí® blur event fired!')">
                </div>

                <!-- Hover demo -->
                <div class="hover-demo-box" id="hoverBox"
                     onmouseenter="this.classList.add('hovered'); this.textContent='üéâ mouseenter fired!'"
                     onmouseleave="this.classList.remove('hovered'); this.textContent='üñ±Ô∏è Hover over me to see mouseenter!'">
                    üñ±Ô∏è Hover over me to see mouseenter!
                </div>

                <!-- Event log -->
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                    <span style="color:var(--text-muted);font-size:0.85rem;font-weight:600;">üìã Event Log:</span>
                    <button class="btn btn-sm btn-secondary" onclick="clearLog()">üßπ Clear Log</button>
                </div>
                <div class="event-visualizer">
                    <ul class="event-log" id="eventLog">
                        <li style="color:var(--text-muted); font-style:italic;">Events will appear here...</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Event Object -->
        <h2 class="section-title">üé´ The Event Object</h2>

        <div class="card">
            <div class="card-title">What's inside the event object?</div>
            <div class="code-block">
                <div class="code-header">
                    <div class="code-dots">
                        <div class="code-dot red"></div>
                        <div class="code-dot yellow"></div>
                        <div class="code-dot green"></div>
                    </div>
                    <span class="code-lang">JavaScript</span>
                </div>
                <div class="code-body">document.<span class="fn">querySelector</span>(<span class="str">'#btn'</span>).<span class="fn">addEventListener</span>(<span class="str">'click'</span>, (e) => {

    e.<span class="prp">target</span>         <span class="cmt">// The exact element that was clicked</span>
    e.<span class="prp">currentTarget</span>  <span class="cmt">// Element the listener is attached to</span>
    e.<span class="prp">type</span>           <span class="cmt">// "click", "keydown", etc.</span>
    e.<span class="prp">timeStamp</span>      <span class="cmt">// When the event happened (ms)</span>

    <span class="cmt">// Mouse events:</span>
    e.<span class="prp">clientX</span>        <span class="cmt">// Mouse X position</span>
    e.<span class="prp">clientY</span>        <span class="cmt">// Mouse Y position</span>

    <span class="cmt">// Keyboard events:</span>
    e.<span class="prp">key</span>            <span class="cmt">// Which key was pressed: 'Enter', 'a', etc.</span>
    e.<span class="prp">ctrlKey</span>        <span class="cmt">// Was Ctrl held? (true/false)</span>

    <span class="cmt">// Prevent default browser behavior (e.g. form submit):</span>
    e.<span class="fn">preventDefault</span>();

    <span class="cmt">// Stop event from bubbling up:</span>
    e.<span class="fn">stopPropagation</span>();
});

<span class="cmt">// Keyboard shortcut example:</span>
document.<span class="fn">addEventListener</span>(<span class="str">'keydown'</span>, (e) => {
    <span class="kw">if</span> (e.<span class="prp">ctrlKey</span> && e.<span class="prp">key</span> === <span class="str">'s'</span>) {
        e.<span class="fn">preventDefault</span>(); <span class="cmt">// Prevent browser save dialog</span>
        console.<span class="fn">log</span>(<span class="str">'Custom save triggered!'</span>);
    }
});</div>
            </div>
        </div>

        <!-- Mouse Tracker -->
        <h2 class="section-title">üñ±Ô∏è Live Mouse Tracker</h2>

        <div class="playground">
            <div class="playground-header">üñ±Ô∏è Move your mouse in the box below!</div>
            <div class="playground-body">
                <div id="mouseTracker" style="
                    height:180px;
                    background: var(--code-bg);
                    border: 2px dashed rgba(108,99,255,0.4);
                    border-radius: 12px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-family: 'Courier New', monospace;
                    color: var(--text-muted);
                    cursor: crosshair;
                    position: relative;
                    overflow: hidden;
                    transition: border-color 0.3s;
                " onmousemove="trackMouse(event)" onmouseleave="resetTracker()">
                    <div id="trackerInfo" style="text-align:center;">
                        <div style="font-size:2rem; margin-bottom:8px;">üñ±Ô∏è</div>
                        <div>Move mouse here...</div>
                    </div>
                    <div id="mouseDot" style="
                        position: absolute;
                        width: 20px; height: 20px;
                        background: var(--primary);
                        border-radius: 50%;
                        pointer-events: none;
                        transform: translate(-50%, -50%);
                        transition: top 0.05s, left 0.05s;
                        display: none;
                        box-shadow: 0 0 15px rgba(108,99,255,0.6);
                    "></div>
                </div>
            </div>
        </div>

        <!-- Event Propagation -->
        <h2 class="section-title">ü´ß Event Bubbling (Propagation)</h2>

        <div class="card">
            <div class="card-title">Events "bubble up" the DOM tree</div>
            <p style="color:var(--text-muted); margin-bottom:16px; line-height:1.7;">
                When you click an element, the event <strong>bubbles up</strong> through
                all its parent elements. Click the inner box below to see it!
            </p>

            <div class="propagation-demo">
                <div class="prop-box outer" id="prop-outer"
                     onclick="fireProp('outer','üî¥ Outer DIV clicked (bubbled up!)')">
                    üî¥ OUTER DIV ‚Äî click anywhere inside
                    <div style="height:70px;"></div>
                </div>
                <div class="prop-box mid" id="prop-mid"
                     onclick="fireProp('mid','üü° Middle DIV clicked (bubbled up!)')">
                    üü° MIDDLE DIV ‚Äî click anywhere inside
                    <div style="height:30px;"></div>
                </div>
                <div class="prop-box inner" id="prop-inner"
                     onclick="fireProp('inner','üü¢ Inner BUTTON clicked!')">
                    üü¢ INNER BUTTON ‚Äî click me!
                </div>
            </div>

            <div class="playground-output" id="propOutput" style="margin-top:16px; min-height:50px;">
                üëÜ Click the inner green button above...
            </div>

            <div class="code-block" style="margin-top:16px;">
                <div class="code-header">
                    <div class="code-dots">
                        <div class="code-dot red"></div>
                        <div class="code-dot yellow"></div>
                        <div class="code-dot green"></div>
                    </div>
                    <span class="code-lang">JavaScript ‚Äî Stop bubbling</span>
                </div>
                <div class="code-body"><span class="cmt">// Stop the event from bubbling up</span>
inner.<span class="fn">addEventListener</span>(<span class="str">'click'</span>, (e) => {
    e.<span class="fn">stopPropagation</span>(); <span class="cmt">// Outer won't fire!</span>
    console.<span class="fn">log</span>(<span class="str">'Only inner fires'</span>);
});</div>
            </div>
        </div>
    </div>

    <!-- ==========================================
         PAGE 5: EXERCISES
    ========================================== -->
    <div class="page" id="page-exercises">
        <h1 class="page-title">üí™ Hands-On Exercises</h1>
        <p class="page-subtitle">
            The best way to learn is by doing! Write the JavaScript code in the boxes below
            and click "Check Answer" to see if you got it right.
        </p>

        <!-- Exercise 1 -->
        <div class="exercise-card" id="ex1-card">
            <div class="exercise-header">
                <span class="exercise-title">üéØ Exercise 1 ‚Äî Select & Read</span>
                <span class="exercise-difficulty diff-easy">Easy</span>
            </div>
            <div class="exercise-body">
                <div class="exercise-desc">
                    The page has a paragraph with id <code>greeting</code> that says "Hello World!".
                    Your job is to select it and read its text content.
                </div>
                <div class="exercise-task">
                    üìù Task: Write code that selects the element with id "greeting" using
                    <code>querySelector</code> and stores it in a variable called <code>el</code>.
                </div>
                <div class="code-editor">
                    <div class="code-editor-header">
                        <span>Write your code here:</span>
                        <span style="color:var(--primary);">JavaScript</span>
                    </div>
                    <textarea id="ex1-code" spellcheck="false" placeholder="Type your answer here...">const el = </textarea>
                </div>
                <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
                    <button class="btn btn-primary btn-sm" onclick="checkExercise(1)">‚úÖ Check Answer</button>
                    <button class="btn btn-secondary btn-sm" onclick="showHint(1)">üí° Hint</button>
                    <button class="btn btn-sm" style="background:rgba(255,255,255,0.1);color:var(--text);" onclick="showSolution(1)">üëÅÔ∏è Solution</button>
                </div>
                <div class="exercise-result" id="ex1-result"></div>
            </div>
        </div>

        <!-- Exercise 2 -->
        <div class="exercise-card" id="ex2-card">
            <div class="exercise-header">
                <span class="exercise-title">‚úèÔ∏è Exercise 2 ‚Äî Change Text</span>
                <span class="exercise-difficulty diff-easy">Easy</span>
            </div>
            <div class="exercise-body">
                <div class="exercise-desc">
                    Imagine you have a heading with id <code>page-title</code>.
                    You need to update its text safely (without rendering HTML).
                </div>
                <div class="exercise-task">
                    üìù Task: Select the element with id "page-title" and set its text content
                    to "DOM is Awesome!" using the SAFE method.
                </div>
                <div class="code-editor">
                    <div class="code-editor-header">
                        <span>Write your code here:</span>
                        <span style="color:var(--primary);">JavaScript</span>
                    </div>
                    <textarea id="ex2-code" spellcheck="false" placeholder="Write 2 lines of code..."></textarea>
                </div>
                <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
                    <button class="btn btn-primary btn-sm" onclick="checkExercise(2)">‚úÖ Check Answer</button>
                    <button class="btn btn-secondary btn-sm" onclick="showHint(2)">üí° Hint</button>
                    <button class="btn btn-sm" style="background:rgba(255,255,255,0.1);color:var(--text);" onclick="showSolution(2)">üëÅÔ∏è Solution</button>
                </div>
                <div class="exercise-result" id="ex2-result"></div>
            </div>
        </div>

        <!-- Exercise 3 -->
        <div class="exercise-card" id="ex3-card">
            <div class="exercise-header">
                <span class="exercise-title">üè∑Ô∏è Exercise 3 ‚Äî Class Toggle</span>
                <span class="exercise-difficulty diff-medium">Medium</span>
            </div>
            <div class="exercise-body">
                <div class="exercise-desc">
                    Working with CSS classes is the best way to change element appearance.
                    No messy inline styles!
                </div>
                <div class="exercise-task">
                    üìù Task: Write a function called <code>toggleDark()</code> that:
                    <br>1. Selects the element with id "myBox"
                    <br>2. Toggles the class "dark-mode" on it
                </div>
                <div class="code-editor">
                    <div class="code-editor-header">
                        <span>Write your code here:</span>
                        <span style="color:var(--primary);">JavaScript</span>
                    </div>
                    <textarea id="ex3-code" spellcheck="false" placeholder="function toggleDark() {&#10;    // your code here&#10;}"></textarea>
                </div>
                <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
                    <button class="btn btn-primary btn-sm" onclick="checkExercise(3)">‚úÖ Check Answer</button>
                    <button class="btn btn-secondary btn-sm" onclick="showHint(3)">üí° Hint</button>
                    <button class="btn btn-sm" style="background:rgba(255,255,255,0.1);color:var(--text);" onclick="showSolution(3)">üëÅÔ∏è Solution</button>
                </div>
                <div class="exercise-result" id="ex3-result"></div>
            </div>
        </div>

        <!-- Exercise 4 -->
        <div class="exercise-card" id="ex4-card">
            <div class="exercise-header">
                <span class="exercise-title">üèóÔ∏è Exercise 4 ‚Äî Create & Append</span>
                <span class="exercise-difficulty diff-medium">Medium</span>
            </div>
            <div class="exercise-body">
                <div class="exercise-desc">
                    Creating elements dynamically is a core DOM skill. Every dynamic website
                    does this constantly!
                </div>
                <div class="exercise-task">
                    üìù Task: Write code that:
                    <br>1. Creates a new <code>&lt;li&gt;</code> element
                    <br>2. Sets its text content to "New Item"
                    <br>3. Appends it to the element with id "myList"
                </div>
                <div class="code-editor">
                    <div class="code-editor-header">
                        <span>Write your code here:</span>
                        <span style="color:var(--primary);">JavaScript</span>
                    </div>
                    <textarea id="ex4-code" spellcheck="false" placeholder="// 3 steps ‚Äî create, set content, append"></textarea>
                </div>
                <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
                    <button class="btn btn-primary btn-sm" onclick="checkExercise(4)">‚úÖ Check Answer</button>
                    <button class="btn btn-secondary btn-sm" onclick="showHint(4)">üí° Hint</button>
                    <button class="btn btn-sm" style="background:rgba(255,255,255,0.1);color:var(--text);" onclick="showSolution(4)">üëÅÔ∏è Solution</button>
                </div>
                <div class="exercise-result" id="ex4-result"></div>
            </div>
        </div>

        <!-- Exercise 5 -->
        <div class="exercise-card" id="ex5-card">
            <div class="exercise-header">
                <span class="exercise-title">‚ö° Exercise 5 ‚Äî Event Listener</span>
                <span class="exercise-difficulty diff-hard">Hard</span>
            </div>
            <div class="exercise-body">
                <div class="exercise-desc">
                    Event listeners make your page interactive. This is the foundation of
                    every interactive web app!
                </div>
                <div class="exercise-task">
                    üìù Task: Write code that adds a <code>click</code> event listener to the
                    button with id "alertBtn". When clicked, it should change the text content of
                    the element with id "output" to "Button was clicked! üéâ"
                </div>
                <div class="code-editor">
                    <div class="code-editor-header">
                        <span>Write your code here:</span>
                        <span style="color:var(--primary);">JavaScript</span>
                    </div>
                    <textarea id="ex5-code" spellcheck="false" placeholder="// Select the button, add an event listener..."></textarea>
                </div>
                <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
                    <button class="btn btn-primary btn-sm" onclick="checkExercise(5)">‚úÖ Check Answer</button>
                    <button class="btn btn-secondary btn-sm" onclick="showHint(5)">üí° Hint</button>
                    <button class="btn btn-sm" style="background:rgba(255,255,255,0.1);color:var(--text);" onclick="showSolution(5)">üëÅÔ∏è Solution</button>
                </div>
                <div class="exercise-result" id="ex5-result"></div>
            </div>
        </div>

        <!-- Live Exercise Sandbox -->
        <h2 class="section-title">üèñÔ∏è Free Sandbox</h2>
        <div class="playground">
            <div class="playground-header">üèñÔ∏è Free Play ‚Äî Interact with the live demo below!</div>
            <div class="playground-body">
                <div class="grid-2">
                    <div>
                        <div id="sandboxTarget" style="
                            background: linear-gradient(135deg, var(--primary), var(--secondary));
                            padding: 20px; border-radius: 12px; text-align: center;
                            color: white; font-weight: 700; margin-bottom: 12px;
                            transition: all 0.3s;
                        ">üéØ Sandbox Target</div>
                        <ul id="sandboxList" style="list-style:none;padding:0;display:flex;flex-direction:column;gap:6px;">
                            <li style="padding:8px 14px;background:rgba(108,99,255,0.1);border-radius:8px;font-size:0.88rem;">üìç Item One</li>
                            <li style="padding:8px 14px;background:rgba(108,99,255,0.1);border-radius:8px;font-size:0.88rem;">üìç Item Two</li>
                            <li style="padding:8px 14px;background:rgba(108,99,255,0.1);border-radius:8px;font-size:0.88rem;">üìç Item Three</li>
                        </ul>
                    </div>
                    <div style="display:flex;flex-direction:column;gap:10px;">
                        <button class="btn btn-primary btn-sm" onclick="sandboxAction('changeText')">üìù Change Text</button>
                        <button class="btn btn-success btn-sm" onclick="sandboxAction('changeColor')">üé® Change Color</button>
                        <button class="btn btn-warning btn-sm" onclick="sandboxAction('addItem')">‚ûï Add List Item</button>
                        <button class="btn btn-danger btn-sm" onclick="sandboxAction('removeItem')">‚ûñ Remove Last Item</button>
                        <button class="btn btn-secondary btn-sm" onclick="sandboxAction('toggleClass')">üîÑ Toggle Class</button>
                        <button class="btn btn-sm" style="background:rgba(255,255,255,0.1);color:var(--text);" onclick="sandboxAction('reset')">‚Ü©Ô∏è Reset</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ==========================================
         PAGE 6: QUIZ
    ========================================== -->
    <div class="page" id="page-quiz">
        <h1 class="page-title">üß† Knowledge Quiz</h1>
        <p class="page-subtitle">
            Let's test what you've learned! 10 questions covering everything from selectors
            to events. Good luck! üçÄ
        </p>

        <div class="quiz-container">
            <!-- Progress -->
            <div class="quiz-progress-wrap">
                <div class="quiz-progress-text">
                    <span id="quizProgressText">Question 1 of 10</span>
                    <span id="quizScoreText">Score: 0</span>
                </div>
                <div class="quiz-progress-bar">
                    <div class="quiz-progress-fill" id="quizProgressFill" style="width:10%"></div>
                </div>
            </div>

            <!-- Question display -->
            <div id="quizContent"></div>

            <!-- Navigation -->
            <div id="quizNav" class="flex gap-10" style="margin-top:16px;">
                <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" style="display:none;">
                    Next Question ‚Üí
                </button>
                <button class="btn btn-secondary" onclick="restartQuiz()" id="restartBtn" style="display:none;">
                    üîÑ Restart
                </button>
            </div>
        </div>
    </div>

    <!-- ==========================================
         PAGE 7: PITFALLS
    ========================================== -->
    <div class="page" id="page-pitfalls">
        <h1 class="page-title">‚ö†Ô∏è Common Mistakes & Pitfalls</h1>
        <p class="page-subtitle">
            Every developer hits these walls at some point. Learn them now so you can
            avoid hours of frustrating debugging later!
        </p>

        <!-- Pitfall 1 -->
        <div class="pitfall-card">
            <div class="pitfall-header">
                <span style="font-size:1.4rem;">üí•</span>
                <span class="pitfall-title">Pitfall #1 ‚Äî Script runs before DOM loads</span>
                <span class="badge badge-danger">VERY COMMON</span>
            </div>
            <div class="pitfall-body">
                <p style="color:var(--text-muted); line-height:1.7; margin-bottom:12px;">
                    If your <code>&lt;script&gt;</code> tag is in the <code>&lt;head&gt;</code>,
                    JavaScript runs before the HTML elements exist. Your selectors return <code>null</code>!
                </p>
                <div class="wrong-right">
                    <div class="wrong-side">
                        <div class="wrong-label">‚ùå WRONG</div>
                        <div class="wrong-code">&lt;head&gt;
  &lt;script&gt;
    <span class="cmt">// Runs before body!</span>
    <span class="kw">const</span> btn = document
      .<span class="fn">querySelector</span>(<span class="str">'#btn'</span>);
    <span class="cmt">// btn is NULL here üí•</span>
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;button id="btn"&gt;...&lt;/button&gt;
&lt;/body&gt;</div>
                    </div>
                    <div class="right-side">
                        <div class="right-label">‚úÖ CORRECT</div>
                        <div class="right-code">&lt;body&gt;
  &lt;button id="btn"&gt;...&lt;/button&gt;

  <span class="cmt">&lt;!-- Script at BOTTOM --&gt;</span>
  &lt;script&gt;
    <span class="kw">const</span> btn = document
      .<span class="fn">querySelector</span>(<span class="str">'#btn'</span>);
    <span class="cmt">// Works! ‚úÖ</span>
  &lt;/script&gt;
&lt;/body&gt;</div>
                    </div>
                </div>
                <div class="info-box tip" style="margin-top:14px;">
                    <div class="info-box-icon">üí°</div>
                    <div class="info-box-content">
                        <strong>Alternative Solution</strong>
                        <p>Add <code>defer</code> to your script tag: <code>&lt;script src="app.js" defer&gt;&lt;/script&gt;</code>.
                           This tells the browser to wait until HTML is loaded before running the script.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pitfall 2 -->
        <div class="pitfall-card">
            <div class="pitfall-header">
                <span style="font-size:1.4rem;">üö´</span>
                <span class="pitfall-title">Pitfall #2 ‚Äî Not checking for null</span>
                <span class="badge badge-danger">VERY COMMON</span>
            </div>
            <div class="pitfall-body">
                <p style="color:var(--text-muted); line-height:1.7; margin-bottom:12px;">
                    <code>querySelector()</code> returns <code>null</code> if no element matches.
                    Calling methods on null causes a TypeError crash.
                </p>
                <div class="wrong-right">
                    <div class="wrong-side">
                        <div class="wrong-label">‚ùå WRONG</div>
                        <div class="wrong-code"><span class="kw">const</span> el = document
  .<span class="fn">querySelector</span>(<span class="str">'#doesNotExist'</span>);

el.style.color = <span class="str">'red'</span>;
<span class="cmt">// üí• TypeError: Cannot</span>
<span class="cmt">// set properties of null</span></div>
                    </div>
                    <div class="right-side">
                        <div class="right-label">‚úÖ CORRECT</div>
                        <div class="right-code"><span class="kw">const</span> el = document
  .<span class="fn">querySelector</span>(<span class="str">'#doesNotExist'</span>);

<span class="cmt">// Check before using!</span>
<span class="kw">if</span> (el) {
  el.style.color = <span class="str">'red'</span>;
}

<span class="cmt">// Or optional chaining:</span>
el?.<span class="prp">style</span>?.color = <span class="str">'red'</span>;</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pitfall 3 -->
        <div class="pitfall-card">
            <div class="pitfall-header">
                <span style="font-size:1.4rem;">‚ò£Ô∏è</span>
                <span class="pitfall-title">Pitfall #3 ‚Äî Using innerHTML with user input (XSS!)</span>
                <span class="badge badge-danger">SECURITY RISK</span>
            </div>
            <div class="pitfall-body">
                <p style="color:var(--text-muted); line-height:1.7; margin-bottom:12px;">
                    Never use <code>innerHTML</code> with content that came from a user!
                    A malicious user can inject scripts ‚Äî this is called XSS (Cross-Site Scripting).
                </p>
                <div class="wrong-right">
                    <div class="wrong-side">
                        <div class="wrong-label">‚ùå DANGEROUS</div>
                        <div class="wrong-code"><span class="kw">const</span> name = <span class="cmt">/* user typed: */</span>
  <span class="str">'&lt;img src=x onerror=alert("hacked!")&gt;'</span>;

<span class="cmt">// This RUNS the script!</span>
el.<span class="prp">innerHTML</span> = <span class="str">`Hello ${name}`</span>;
<span class="cmt">// üí• XSS Attack!</span></div>
                    </div>
                    <div class="right-side">
                        <div class="right-label">‚úÖ SAFE</div>
                        <div class="right-code"><span class="kw">const</span> name = <span class="cmt">/* user input */</span>
  <span class="str">'&lt;img src=x onerror=alert(1)&gt;'</span>;

<span class="cmt">// textContent = safe!</span>
<span class="cmt">// Treats as plain text</span>
el.<span class="prp">textContent</span> = <span class="str">`Hello ${name}`</span>;
<span class="cmt">// ‚úÖ Shows tag as text</span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pitfall 4 -->
        <div class="pitfall-card">
            <div class="pitfall-header">
                <span style="font-size:1.4rem;">üîÅ</span>
                <span class="pitfall-title">Pitfall #4 ‚Äî forEach doesn't work on HTMLCollection</span>
                <span class="badge badge-warning">COMMON</span>
            </div>
            <div class="pitfall-body">
                <p style="color:var(--text-muted); line-height:1.7; margin-bottom:12px;">
                    <code>getElementsByClassName()</code> and <code>getElementsByTagName()</code>
                    return an <strong>HTMLCollection</strong>, not an array. It doesn't have <code>forEach</code>!
                </p>
                <div class="wrong-right">
                    <div class="wrong-side">
                        <div class="wrong-label">‚ùå WRONG</div>
                        <div class="wrong-code"><span class="kw">const</span> items =
  document.<span class="fn">getElementsByClassName</span>(
    <span class="str">'item'</span>
  );

items.<span class="fn">forEach</span>(i => ...);
<span class="cmt">// üí• items.forEach</span>
<span class="cmt">// is not a function!</span></div>
                    </div>
                    <div class="right-side">
                        <div class="right-label">‚úÖ CORRECT</div>
                        <div class="right-code"><span class="cmt">// Option 1: Convert first</span>
<span class="kw">const</span> items = Array.<span class="fn">from</span>(
  document.<span class="fn">getElementsByClassName</span>(
    <span class="str">'item'</span>
  )
);
items.<span class="fn">forEach</span>(i => ...);  <span class="cmt">‚úÖ</span>

<span class="cmt">// Option 2: Use querySelectorAll!</span>
document.<span class="fn">querySelectorAll</span>(<span class="str">'.item'</span>)
  .<span class="fn">forEach</span>(i => ...);  <span class="cmt">‚úÖ</span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pitfall 5 -->
        <div class="pitfall-card">
            <div class="pitfall-header">
                <span style="font-size:1.4rem;">üìù</span>
                <span class="pitfall-title">Pitfall #5 ‚Äî CSS properties in camelCase</span>
                <span class="badge badge-warning">COMMON</span>
            </div>
            <div class="pitfall-body">
                <p style="color:var(--text-muted); line-height:1.7; margin-bottom:12px;">
                    In CSS we use <code>background-color</code>, but in JavaScript hyphens
                    aren't allowed in property names. You must use <strong>camelCase</strong>!
                </p>
                <div class="wrong-right">
                    <div class="wrong-side">
                        <div class="wrong-label">‚ùå WRONG</div>
                        <div class="wrong-code">el.style.<span class="prp">background-color</span> = <span class="str">'red'</span>;
<span class="cmt">// üí• SyntaxError!</span>

el.style.<span class="prp">font-size</span> = <span class="str">'20px'</span>;
<span class="cmt">// üí• SyntaxError!</span>

el.style.<span class="prp">border-radius</span> = <span class="str">'10px'</span>;
<span class="cmt">// üí• SyntaxError!</span></div>
                    </div>
                    <div class="right-side">
                        <div class="right-label">‚úÖ CORRECT (camelCase)</div>
                        <div class="right-code">el.style.<span class="prp">backgroundColor</span> = <span class="str">'red'</span>;
<span class="cmt">// ‚úÖ Works!</span>

el.style.<span class="prp">fontSize</span> = <span class="str">'20px'</span>;
<span class="cmt">// ‚úÖ Works!</span>

el.style.<span class="prp">borderRadius</span> = <span class="str">'10px'</span>;
<span class="cmt">// ‚úÖ Works!</span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pitfall 6 -->
        <div class="pitfall-card">
            <div class="pitfall-header">
                <span style="font-size:1.4rem;">‚ö°</span>
                <span class="pitfall-title">Pitfall #6 ‚Äî Overusing innerHTML (performance)</span>
                <span class="badge badge-warning">MEDIUM</span>
            </div>
            <div class="pitfall-body">
                <p style="color:var(--text-muted); line-height:1.7; margin-bottom:12px;">
                    Every time you set <code>innerHTML</code>, the browser destroys and
                    recreates ALL child elements. This is slow and also removes event listeners!
                </p>
                <div class="wrong-right">
                    <div class="wrong-side">
                        <div class="wrong-label">‚ùå WRONG (in loops)</div>
                        <div class="wrong-code"><span class="kw">const</span> list = document
  .<span class="fn">querySelector</span>(<span class="str">'#list'</span>);
<span class="kw">const</span> items = [<span class="str">'a'</span>, <span class="str">'b'</span>, <span class="str">'c'</span>];

<span class="cmt">// Rebuilds DOM 3 times!</span>
items.<span class="fn">forEach</span>(item => {
  list.<span class="prp">innerHTML</span> +=
    <span class="str">`&lt;li&gt;${item}&lt;/li&gt;`</span>;
});</div>
                    </div>
                    <div class="right-side">
                        <div class="right-label">‚úÖ BETTER (createElement)</div>
                        <div class="right-code"><span class="kw">const</span> list = document
  .<span class="fn">querySelector</span>(<span class="str">'#list'</span>);
<span class="kw">const</span> items = [<span class="str">'a'</span>, <span class="str">'b'</span>, <span class="str">'c'</span>];

items.<span class="fn">forEach</span>(item => {
  <span class="kw">const</span> li = document
    .<span class="fn">createElement</span>(<span class="str">'li'</span>);
  li.<span class="prp">textContent</span> = item;
  list.<span class="fn">appendChild</span>(li);
  <span class="cmt">// Adds one at a time ‚úÖ</span>
});</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Reference Cheatsheet -->
        <h2 class="section-title">üìå Quick Reference Cheatsheet</h2>

        <div class="cheatsheet-grid">
            <div class="cheat-card">
                <div class="cheat-card-header">üîç Selecting Elements</div>
                <div class="cheat-item">
                    <code class="cheat-method">querySelector('#id')</code>
                    <span class="cheat-desc">First match, any selector</span>
                </div>
                <div class="cheat-item">
                    <code class="cheat-method">querySelectorAll('.cls')</code>
                    <span class="cheat-desc">All matches ‚Üí NodeList</span>
                </div>
                <div class="cheat-item">
                    <code class="cheat-method">getElementById('id')</code>
                    <span class="cheat-desc">By ID only (fast)</span>
                </div>
            </div>

            <div class="cheat-card">
                <div class="cheat-card-header">‚úèÔ∏è Modifying Content</div>
                <div class="cheat-item">
                    <code class="cheat-method">el.textContent = 'x'</code>
                    <span class="cheat-desc">Safe text change</span>
                </div>
                <div class="cheat-item">
                    <code class="cheat-method">el.innerHTML = '&lt;b&gt;x&lt;/b&gt;'</code>
                    <span class="cheat-desc">Renders HTML</span>
                </div>
                <div class="cheat-item">
                    <code class="cheat-method">el.value</code>
                    <span class="cheat-desc">Input field value</span>
                </div>
            </div>

            <div class="cheat-card">
                <div class="cheat-card-header">üé® Styles & Classes</div>
                <div class="cheat-item">
                    <code class="cheat-method">el.style.color = 'red'</code>
                    <span class="cheat-desc">Inline style</span>
                </div>
                <div class="cheat-item">
                    <code class="cheat-method">el.classList.add('x')</code>
                    <span class="cheat-desc">Add CSS class</span>
                </div>
                <div class="cheat-item">
                    <code class="cheat-method">el.classList.toggle('x')</code>
                    <span class="cheat-desc">Toggle CSS class</span>
                </div>
            </div>

            <div class="cheat-card">
                <div class="cheat-card-header">üèóÔ∏è Creating Elements</div>
                <div class="cheat-item">
                    <code class="cheat-method">createElement('div')</code>
                    <span class="cheat-desc">Create new element</span>
                </div>
                <div class="cheat-item">
                    <code class="cheat-method">parent.appendChild(el)</code>
                    <span class="cheat-desc">Add to end</span>
                </div>
                <div class="cheat-item">
                    <code class="cheat-method">el.remove()</code>
                    <span class="cheat-desc">Remove element</span>
                </div>
            </div>

            <div class="cheat-card">
                <div class="cheat-card-header">‚ö° Events</div>
                <div class="cheat-item">
                    <code class="cheat-method">addEventListener('click', fn)</code>
                    <span class="cheat-desc">Attach event</span>
                </div>
                <div class="cheat-item">
                    <code class="cheat-method">e.target</code>
                    <span class="cheat-desc">Clicked element</span>
                </div>
                <div class="cheat-item">
                    <code class="cheat-method">e.preventDefault()</code>
                    <span class="cheat-desc">Stop default action</span>
                </div>
            </div>

            <div class="cheat-card">
                <div class="cheat-card-header">üîß Attributes</div>
                <div class="cheat-item">
                    <code class="cheat-method">getAttribute('href')</code>
                    <span class="cheat-desc">Get attribute value</span>
                </div>
                <div class="cheat-item">
                    <code class="cheat-method">setAttribute('src', 'x')</code>
                    <span class="cheat-desc">Set attribute</span>
                </div>
                <div class="cheat-item">
                    <code class="cheat-method">removeAttribute('disabled')</code>
                    <span class="cheat-desc">Remove attribute</span>
                </div>
            </div>
        </div>

        <!-- FAQ Accordions -->
        <h2 class="section-title">‚ùì Frequently Asked Questions</h2>

        <div class="accordion" onclick="toggleAccordion(this)">
            <div class="accordion-header">
                What's the difference between querySelector and getElementById?
                <span class="accordion-arrow">‚ñº</span>
            </div>
            <div class="accordion-body">
                <code>getElementById('id')</code> only works with IDs and is slightly faster because it uses a
                direct lookup. <code>querySelector('#id')</code> works with any CSS selector.
                In modern code, <code>querySelector</code> is preferred for consistency ‚Äî
                you only need to learn one syntax.
            </div>
        </div>

        <div class="accordion" onclick="toggleAccordion(this)">
            <div class="accordion-header">
                When should I use innerHTML vs textContent?
                <span class="accordion-arrow">‚ñº</span>
            </div>
            <div class="accordion-body">
                Use <code>textContent</code> by default ‚Äî it's safer and faster.
                Only use <code>innerHTML</code> when you need to insert actual HTML markup,
                and <strong>never</strong> use it with user-provided input due to XSS risks.
                If you need user input + HTML, sanitize the input first.
            </div>
        </div>

        <div class="accordion" onclick="toggleAccordion(this)">
            <div class="accordion-header">
                Can I have multiple event listeners on one element?
                <span class="accordion-arrow">‚ñº</span>
            </div>
            <div class="accordion-body">
                Yes! Unlike the old <code>onclick</code> attribute (which overwrites),
                <code>addEventListener</code> stacks listeners. You can add as many as you want
                and they'll all fire. You can also remove specific ones with <code>removeEventListener</code>.
            </div>
        </div>

        <div class="accordion" onclick="toggleAccordion(this)">
            <div class="accordion-header">
                What is event delegation and why is it useful?
                <span class="accordion-arrow">‚ñº</span>
            </div>
            <div class="accordion-body">
                Instead of adding listeners to many elements, add ONE listener to their parent.
                It uses event bubbling to catch events from children.
                This is great for dynamic lists where items are added later!
                <br><br>
                <code style="display:block;background:var(--code-bg);padding:10px;border-radius:6px;margin-top:8px;white-space:pre;">list.addEventListener('click', (e) => {
  if (e.target.tagName === 'LI') {
    // Handle any LI click
  }
});</code>
            </div>
        </div>
    </div>

</div><!-- end main-container -->

<script>
    /* ==============================================
       NAVIGATION & PAGE MANAGEMENT
    ============================================== */
    function showPage(id) {
        // Hide all pages
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));

        // Show target
        document.getElementById('page-' + id).classList.add('active');

        // Activate nav tab
        document.querySelectorAll('.nav-tab').forEach(t => {
            if (t.getAttribute('onclick').includes("'" + id + "'")) {
                t.classList.add('active');
            }
        });

        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });

        // Init quiz if needed
        if (id === 'quiz') initQuiz();
    }

    /* ==============================================
       PROGRESS BAR
    ============================================== */
    window.addEventListener('scroll', () => {
        const scrollTop = document.documentElement.scrollTop;
        const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const progress = (scrollTop / height) * 100;
        document.getElementById('progressBar').style.width = progress + '%';
    });

    /* ==============================================
       SELECTOR PLAYGROUND
    ============================================== */
    function runSelector(selector, method) {
        // Clear previous highlights
        clearHighlights();

        const preview = document.getElementById('selectorPreview');
        const output  = document.getElementById('selectorOutput');

        if (method === 'querySelectorAll') {
            const elements = preview.querySelectorAll(selector);
            elements.forEach(el => el.classList.add('highlight-el'));
            output.innerHTML = `<span style="color:var(--success)">‚úÖ querySelectorAll('${selector}')</span>\n`
                + `Found: <span style="color:var(--warning)">${elements.length} element(s)</span>\n`
                + Array.from(elements).map(el => `  ‚Üí &lt;${el.tagName.toLowerCase()} id="${el.id}"&gt; "${el.textContent.trim()}"&lt;/${el.tagName.toLowerCase()}&gt;`).join('\n');
        } else {
            const el = preview.querySelector(selector);
            if (el) {
                el.classList.add('highlight-el');
                output.innerHTML = `<span style="color:var(--success)">‚úÖ querySelector('${selector}')</span>\n`
                    + `Found: <span style="color:var(--warning)">&lt;${el.tagName.toLowerCase()} id="${el.id}"&gt; "${el.textContent.trim()}"&lt;/${el.tagName.toLowerCase()}&gt;</span>`;
            } else {
                output.innerHTML = `<span style="color:var(--danger)">‚ùå querySelector('${selector}') ‚Üí null (no match found)</span>`;
            }
        }
    }

    function clearHighlights() {
        document.querySelectorAll('#selectorPreview .highlight-el')
            .forEach(el => el.classList.remove('highlight-el'));
        document.getElementById('selectorOutput').textContent = 'üëÜ Click a button above to see which element(s) get selected...';
    }

    /* ==============================================
       MODIFICATION DEMOS
    ============================================== */
    function demoTextContent() {
        const el = document.getElementById('tcOutput');
        el.textContent = 'Hello <b>World</b> ‚Äî tags shown as TEXT!';
        el.style.border = '2px solid var(--success)';
    }

    function demoInnerHTML() {
        const el = document.getElementById('ihOutput');
        el.innerHTML = 'Hello <b style="color:#e74c3c;">World</b> ‚Äî tags <u>RENDERED</u>! üé®';
        el.style.border = '2px solid var(--warning)';
    }

    /* Card Builder */
    function buildCard() {
        const title    = document.getElementById('cardTitle').value || 'Card';
        const text     = document.getElementById('cardText').value  || 'Description';
        const color    = document.getElementById('cardColor').value;
        const container = document.getElementById('cardContainer');

        // Clear placeholder
        const placeholder = container.querySelector('p');
        if (placeholder) placeholder.remove();

        // Create elements (as we teach!)
        const card   = document.createElement('div');
        const h3     = document.createElement('h3');
        const p      = document.createElement('p');
        const removeBtn = document.createElement('button');

        h3.textContent = title;
        p.textContent  = text;
        removeBtn.textContent = '‚úï';

        card.style.cssText = `
            background: ${color};
            border-radius: 10px;
            padding: 14px 16px;
            color: white;
            min-width: 130px;
            font-size: 0.85rem;
            position: relative;
            animation: fadeIn 0.3s ease;
            flex: 1;
            min-width: 120px;
            max-width: 200px;
        `;
        h3.style.cssText = 'margin-bottom:6px; font-size:0.95rem;';
        p.style.cssText  = 'opacity:0.85; font-size:0.8rem; line-height:1.4;';
        removeBtn.style.cssText = `
            position: absolute; top: 6px; right: 8px;
            background: rgba(0,0,0,0.3); border: none;
            color: white; cursor: pointer; border-radius: 50%;
            width: 20px; height: 20px; font-size: 0.7rem;
            display: flex; align-items: center; justify-content: center;
        `;
        removeBtn.addEventListener('click', () => {
            card.style.transform = 'scale(0)';
            card.style.opacity = '0';
            card.style.transition = 'all 0.3s';
            setTimeout(() => card.remove(), 300);
        });

        card.appendChild(h3);
        card.appendChild(p);
        card.appendChild(removeBtn);
        container.appendChild(card);

        // Show generated code
        document.getElementById('generatedCode').innerHTML =
`<span style="color:#8b949e;">// Here's what just ran:</span>
<span style="color:#ff7b72;">const</span> card = document.<span style="color:#d2a8ff;">createElement</span>(<span style="color:#a5d6ff;">'div'</span>);
<span style="color:#ff7b72;">const</span> h3 = document.<span style="color:#d2a8ff;">createElement</span>(<span style="color:#a5d6ff;">'h3'</span>);
<span style="color:#ff7b72;">const</span> p = document.<span style="color:#d2a8ff;">createElement</span>(<span style="color:#a5d6ff;">'p'</span>);

h3.textContent = <span style="color:#a5d6ff;">'${title}'</span>;
p.textContent = <span style="color:#a5d6ff;">'${text}'</span>;
card.style.background = <span style="color:#a5d6ff;">'${color}'</span>;

card.<span style="color:#d2a8ff;">appendChild</span>(h3);
card.<span style="color:#d2a8ff;">appendChild</span>(p);
document.<span style="color:#d2a8ff;">querySelector</span>(<span style="color:#a5d6ff;">'#container'</span>).<span style="color:#d2a8ff;">appendChild</span>(card);`;
    }

    function clearCards() {
        const container = document.getElementById('cardContainer');
        container.innerHTML = '<p style="color:var(--text-muted); font-size:0.85rem; margin:auto; text-align:center;">Cards appear here üëÜ</p>';
        document.getElementById('generatedCode').textContent = '// Code will appear here when you create a card...';
    }

    /* Style Target */
    function styleTarget(prop, value) {
        const el = document.getElementById('styleTarget');
        el.style[prop] = value;
    }

    function resetStyleTarget() {
        const el = document.getElementById('styleTarget');
        el.style.cssText = `
            background: linear-gradient(135deg, #6c63ff, #ff6584);
            border-radius: 16px;
            font-size: 1.3rem;
            color: white;
        `;
    }

    /* ==============================================
       EVENT DEMOS
    ============================================== */
    function logEvent(type, message) {
        const log = document.getElementById('eventLog');

        // Remove placeholder
        if (log.querySelector('li[style*="italic"]')) {
            log.innerHTML = '';
        }

        const li = document.createElement('li');
        li.innerHTML = `<span style="opacity:0.6; font-size:0.75rem;">${new Date().toLocaleTimeString()}</span> ${message}`;
        li.className = 'log-' + type;

        log.insertBefore(li, log.firstChild);

        // Keep only 12 entries
        while (log.children.length > 12) {
            log.removeChild(log.lastChild);
        }
    }

    function clearLog() {
        document.getElementById('eventLog').innerHTML =
            '<li style="color:var(--text-muted); font-style:italic;">Events will appear here...</li>';
    }

    /* Mouse Tracker */
    function trackMouse(e) {
        const box  = document.getElementById('mouseTracker');
        const dot  = document.getElementById('mouseDot');
        const info = document.getElementById('trackerInfo');
        const rect = box.getBoundingClientRect();

        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        dot.style.display = 'block';
        dot.style.left = x + 'px';
        dot.style.top  = y + 'px';

        info.innerHTML = `
            <div style="font-size:0.85rem; text-align:center;">
                <div style="color:var(--primary); font-size:1rem; font-weight:700; margin-bottom:4px;">üñ±Ô∏è Tracking!</div>
                <div>clientX: <span style="color:var(--success)">${Math.round(e.clientX)}</span></div>
                <div>clientY: <span style="color:var(--warning)">${Math.round(e.clientY)}</span></div>
                <div>offsetX: <span style="color:var(--secondary)">${Math.round(x)}</span></div>
                <div>offsetY: <span style="color:var(--danger)">${Math.round(y)}</span></div>
            </div>`;
        box.style.borderColor = 'var(--primary)';
    }

    function resetTracker() {
        document.getElementById('mouseDot').style.display = 'none';
        document.getElementById('trackerInfo').innerHTML = `<div style="font-size:2rem; margin-bottom:8px;">üñ±Ô∏è</div><div>Move mouse here...</div>`;
        document.getElementById('mouseTracker').style.borderColor = 'rgba(108,99,255,0.4)';
    }

    /* Event Propagation */
    let propLog = [];
    function fireProp(box, msg) {
        propLog.push(msg);
        document.getElementById('prop-' + box).classList.add('fired');
        setTimeout(() => document.getElementById('prop-' + box).classList.remove('fired'), 600);

        clearTimeout(window.propTimer);
        window.propTimer = setTimeout(() => {
            document.getElementById('propOutput').innerHTML =
                propLog.map((m, i) =>
                    `<span style="color:${i===0?'var(--success)':i===1?'var(--warning)':'var(--danger)'}">
                     ${i+1}. ${m}</span>`
                ).join('\n');
            propLog = [];
        }, 600);
    }

    /* ==============================================
       EXERCISES
    ============================================== */
    const answers = {
        1: (code) => {
            const cleaned = code.replace(/\s+/g, ' ').trim();
            return cleaned.includes("querySelector('#greeting')") ||
                   cleaned.includes('querySelector("#greeting")') ||
                   cleaned.includes("getElementById('greeting')") ||
                   cleaned.includes('getElementById("greeting")');
        },
        2: (code) => {
            const cleaned = code.replace(/\s+/g, ' ').trim();
            return cleaned.includes("querySelector") &&
                   cleaned.includes("textContent") &&
                   cleaned.includes("DOM is Awesome!");
        },
        3: (code) => {
            const cleaned = code.replace(/\s+/g, ' ').trim();
            return cleaned.includes("function toggleDark") &&
                   cleaned.includes("classList.toggle") &&
                   cleaned.includes("dark-mode");
        },
        4: (code) => {
            const cleaned = code.replace(/\s+/g, ' ').trim();
            return cleaned.includes("createElement('li')") || cleaned.includes('createElement("li")') &&
                   cleaned.includes("textContent") &&
                   (cleaned.includes("appendChild") || cleaned.includes("append("));
        },
        5: (code) => {
            const cleaned = code.replace(/\s+/g, ' ').trim();
            return cleaned.includes("addEventListener") &&
                   cleaned.includes("'click'") || cleaned.includes('"click"') &&
                   cleaned.includes("textContent") &&
                   cleaned.includes("Button was clicked");
        }
    };

    const hints = {
        1: "Use document.querySelector() with a # symbol for IDs. Example: document.querySelector('#someId')",
        2: "Two lines: 1) const el = document.querySelector('#page-title')  2) el.textContent = 'DOM is Awesome!'",
        3: "Inside the function, use querySelector to get #myBox, then .classList.toggle('dark-mode') on it.",
        4: "Three steps: const li = document.createElement('li'); li.textContent = 'New Item'; document.querySelector('#myList').appendChild(li);",
        5: "const btn = document.querySelector('#alertBtn'); btn.addEventListener('click', function() { document.querySelector('#output').textContent = 'Button was clicked! üéâ'; });"
    };

    const solutions = {
        1: "const el = document.querySelector('#greeting');",
        2: `const el = document.querySelector('#page-title');\nel.textContent = 'DOM is Awesome!';`,
        3: `function toggleDark() {\n    const box = document.querySelector('#myBox');\n    box.classList.toggle('dark-mode');\n}`,
        4: `const li = document.createElement('li');\nli.textContent = 'New Item';\ndocument.querySelector('#myList').appendChild(li);`,
        5: `const btn = document.querySelector('#alertBtn');\nbtn.addEventListener('click', function() {\n    document.querySelector('#output').textContent = 'Button was clicked! üéâ';\n});`
    };

    function checkExercise(num) {
        const code    = document.getElementById('ex' + num + '-code').value;
        const result  = document.getElementById('ex' + num + '-result');
        const card    = document.getElementById('ex' + num + '-card');
        const correct = answers[num](code);

        result.style.display = 'block';

        if (correct) {
            result.className  = 'exercise-result result-correct';
            result.textContent = 'üéâ Excellent! Your answer looks correct! Well done!';
            card.classList.add('completed');
            launchConfetti();
        } else {
            result.className  = 'exercise-result result-wrong';
            result.textContent = '‚ùå Not quite right. Try again, or click "Hint" for a nudge!';
        }
    }

    function showHint(num) {
        const result = document.getElementById('ex' + num + '-result');
        result.style.display = 'block';
        result.className = 'exercise-result';
        result.style.background  = 'rgba(108,99,255,0.1)';
        result.style.color       = 'var(--primary)';
        result.style.border      = '1px solid rgba(108,99,255,0.3)';
        result.textContent       = 'üí° Hint: ' + hints[num];
    }

    function showSolution(num) {
        const result = document.getElementById('ex' + num + '-result');
        result.style.display = 'block';
        result.className     = 'exercise-result';
        result.style.background  = 'rgba(255,101,132,0.1)';
        result.style.color       = 'var(--secondary)';
        result.style.border      = '1px solid rgba(255,101,132,0.3)';
        result.innerHTML = 'üëÅÔ∏è Solution:<br><pre style="margin-top:8px;font-family:Courier New;font-size:0.85rem;white-space:pre-wrap;">' + solutions[num] + '</pre>';
        document.getElementById('ex' + num + '-code').value = solutions[num];
    }

    /* Sandbox */
    let sandboxColors = ['linear-gradient(135deg,#6c63ff,#ff6584)',
                          '#e74c3c','#2ecc71','#f39c12','#3498db'];
    let sandboxColorIdx = 0;
    let sandboxItemCount = 3;

    function sandboxAction(action) {
        const target = document.getElementById('sandboxTarget');
        const list   = document.getElementById('sandboxList');

        switch(action) {
            case 'changeText':
                const texts = ['üéØ Text Changed!', '‚ú® DOM Power!', 'üöÄ JavaScript Rocks!', 'üí° You Got This!'];
                target.textContent = texts[Math.floor(Math.random() * texts.length)];
                break;
            case 'changeColor':
                sandboxColorIdx = (sandboxColorIdx + 1) % sandboxColors.length;
                target.style.background = sandboxColors[sandboxColorIdx];
                break;
            case 'addItem':
                sandboxItemCount++;
                const li = document.createElement('li');
                li.textContent = `üìç Item ${sandboxItemCount} (added by JS!)`;
                li.style.cssText = 'padding:8px 14px;background:rgba(46,204,113,0.15);border-radius:8px;font-size:0.88rem;animation:logIn 0.3s ease;border:1px solid rgba(46,204,113,0.3);';
                list.appendChild(li);
                break;
            case 'removeItem':
                if (list.lastChild) {
                    list.lastChild.style.transform = 'translateX(20px)';
                    list.lastChild.style.opacity = '0';
                    list.lastChild.style.transition = 'all 0.3s';
                    setTimeout(() => { if(list.lastChild) list.removeChild(list.lastChild); }, 300);
                    if (sandboxItemCount > 0) sandboxItemCount--;
                }
                break;
            case 'toggleClass':
                target.classList.toggle('sandbox-toggled');
                if (target.classList.contains('sandbox-toggled')) {
                    target.style.transform = 'rotate(3deg) scale(1.05)';
                    target.style.boxShadow = '0 10px 30px rgba(108,99,255,0.5)';
                } else {
                    target.style.transform = '';
                    target.style.boxShadow = '';
                }
                break;
            case 'reset':
                target.style.cssText = 'background:linear-gradient(135deg,var(--primary),var(--secondary));padding:20px;border-radius:12px;text-align:center;color:white;font-weight:700;margin-bottom:12px;transition:all 0.3s;';
                target.textContent = 'üéØ Sandbox Target';
                list.innerHTML = `
                    <li style="padding:8px 14px;background:rgba(108,99,255,0.1);border-radius:8px;font-size:0.88rem;">üìç Item One</li>
                    <li style="padding:8px 14px;background:rgba(108,99,255,0.1);border-radius:8px;font-size:0.88rem;">üìç Item Two</li>
                    <li style="padding:8px 14px;background:rgba(108,99,255,0.1);border-radius:8px;font-size:0.88rem;">üìç Item Three</li>`;
                sandboxItemCount = 3;
                sandboxColorIdx = 0;
                break;
        }
    }

    /* ==============================================
       QUIZ
    ============================================== */
    const quizData = [
        {
            q: "Which method returns the FIRST element matching a CSS selector?",
            code: null,
            options: ["querySelectorAll('.btn')", "querySelector('.btn')", "getElementsByClassName('btn')", "getElement('.btn')"],
            answer: 1,
            explanation: "querySelector() always returns only the FIRST matching element (or null if none found). querySelectorAll() returns ALL matches as a NodeList."
        },
        {
            q: "What does this code do?",
            code: "const items = document.querySelectorAll('li');\nconsole.log(items.length);",
            options: ["Logs the text of the first li", "Logs the number of li elements", "Deletes all li elements", "Throws a SyntaxError"],
            answer: 1,
            explanation: "querySelectorAll('li') returns a NodeList of all li elements. .length gives you how many were found."
        },
        {
            q: "Which property is SAFE to use with user-provided content?",
            code: null,
            options: ["innerHTML", "outerHTML", "textContent", "insertAdjacentHTML"],
            answer: 2,
            explanation: "textContent treats all input as plain text, so HTML tags are never rendered. innerHTML would execute malicious scripts (XSS vulnerability)."
        },
        {
            q: "What does this code output?",
            code: "const el = document.querySelector('#missing');\nconsole.log(el);",
            options: ["undefined", "An empty element", "null", "0"],
            answer: 2,
            explanation: "When querySelector() finds no matching element, it returns null ‚Äî not undefined, not 0, not an empty element. Always check for null before using the result!"
        },
        {
            q: "How do you add a CSS class to an element?",
            code: null,
            options: ["el.class.add('active')", "el.className.add('active')", "el.classList.add('active')", "el.style.add('active')"],
            answer: 2,
            explanation: "classList is the property that gives you access to class manipulation methods: add(), remove(), toggle(), and contains(). className is a string (older approach)."
        },
        {
            q: "What is WRONG with this code?",
            code: "const btn = document.querySelector('#btn');\nbtn.style.background-color = 'red';",
            options: ["querySelector needs a # before btn", "'red' should be in double quotes", "CSS properties use camelCase in JS (backgroundColor)", "The semicolons are wrong"],
            answer: 2,
            explanation: "In JavaScript, CSS property names must be camelCase because hyphens aren't valid in JS identifiers. background-color becomes backgroundColor, font-size becomes fontSize, etc."
        },
        {
            q: "What does e.target refer to inside an event listener?",
            code: "btn.addEventListener('click', function(e) {\n    console.log(e.target);\n});",
            options: ["The element the listener is attached to", "The exact element that was clicked", "The event type string", "The parent element"],
            answer: 1,
            explanation: "e.target is the exact element that triggered the event. e.currentTarget is the element the listener is attached to. They can be different when using event delegation."
        },
        {
            q: "Which method creates a new HTML element?",
            code: null,
            options: ["document.newElement('p')", "document.createElement('p')", "document.makeElement('p')", "new HTMLElement('p')"],
            answer: 1,
            explanation: "document.createElement('tagName') creates a new element. Remember: it's created in memory but NOT yet in the DOM ‚Äî you still need to append it somewhere with appendChild() or append()."
        },
        {
            q: "What is event bubbling?",
            code: null,
            options: [
                "When an event fires multiple times rapidly",
                "When events only fire on the exact clicked element",
                "When an event propagates up through parent elements after firing",
                "When you remove an event listener"
            ],
            answer: 2,
            explanation: "Event bubbling means after an event fires on an element, it 'bubbles up' through all ancestor elements. You can stop it with e.stopPropagation()."
        },
        {
            q: "What does this code do?",
            code: "const el = document.querySelector('#box');\nel.classList.toggle('active');",
            options: [
                "Always adds the 'active' class",
                "Always removes the 'active' class",
                "Adds 'active' if absent, removes it if present",
                "Checks if 'active' class exists"
            ],
            answer: 2,
            explanation: "classList.toggle() is the on/off switch! If the class is there, it removes it. If it's not there, it adds it. Perfect for dark mode toggles, menus, etc."
        }
    ];

    let currentQuestion = 0;
    let score = 0;
    let answered = false;
    let quizInitialized = false;

    function initQuiz() {
        if (quizInitialized) return;
        quizInitialized = true;
        currentQuestion = 0;
        score = 0;
        renderQuestion();
    }

    function restartQuiz() {
        currentQuestion = 0;
        score = 0;
        answered = false;
        document.getElementById('nextBtn').style.display = 'none';
        document.getElementById('restartBtn').style.display = 'none';
        renderQuestion();
    }

    function renderQuestion() {
        if (currentQuestion >= quizData.length) {
            showScore();
            return;
        }

        const q   = quizData[currentQuestion];
        answered  = false;

        // Update progress
        const progress = ((currentQuestion + 1) / quizData.length) * 100;
        document.getElementById('quizProgressFill').style.width = progress + '%';
        document.getElementById('quizProgressText').textContent = `Question ${currentQuestion + 1} of ${quizData.length}`;
        document.getElementById('quizScoreText').textContent = `Score: ${score}`;

        let html = `
            <div class="quiz-question-card">
                <div class="quiz-q-number">Question ${currentQuestion + 1}</div>
                <div class="quiz-q-text">${q.q}</div>
                ${q.code ? `<div class="quiz-q-code">${escapeHtml(q.code)}</div>` : ''}
                <div class="quiz-options" id="quizOptions">`;

        q.options.forEach((opt, i) => {
            const letters = ['A', 'B', 'C', 'D'];
            html += `
                <div class="quiz-option" onclick="selectAnswer(${i})" id="opt-${i}">
                    <span class="option-letter">${letters[i]}</span>
                    ${opt}
                </div>`;
        });

        html += `</div>
                <div class="quiz-explanation" id="quizExplanation">${q.explanation}</div>
            </div>`;

        document.getElementById('quizContent').innerHTML = html;
        document.getElementById('nextBtn').style.display = 'none';
        document.getElementById('restartBtn').style.display = 'none';
    }

    function selectAnswer(idx) {
        if (answered) return;
        answered = true;

        const q       = quizData[currentQuestion];
        const options = document.querySelectorAll('.quiz-option');

        options.forEach((opt, i) => {
            opt.classList.add('disabled');
            if (i === q.answer) opt.classList.add('correct');
            else if (i === idx && idx !== q.answer) opt.classList.add('wrong');
        });

        if (idx === q.answer) {
            score++;
            document.getElementById('quizScoreText').textContent = `Score: ${score}`;
            launchConfetti();
        }

        document.getElementById('quizExplanation').style.display = 'block';
        document.getElementById('nextBtn').style.display = 'flex';

        if (currentQuestion === quizData.length - 1) {
            document.getElementById('nextBtn').textContent = 'üèÜ See Results';
        }
    }

    function nextQuestion() {
        currentQuestion++;
        renderQuestion();
    }

    function showScore() {
        const percentage = Math.round((score / quizData.length) * 100);
        let emoji, message;

        if (percentage >= 90) { emoji = 'üèÜ'; message = 'Outstanding! You are a DOM master!'; }
        else if (percentage >= 70) { emoji = 'üéâ'; message = 'Great job! You really know your stuff!'; }
        else if (percentage >= 50) { emoji = 'üí™'; message = 'Good effort! Review the missed topics and try again.'; }
        else { emoji = 'üìö'; message = 'Keep studying! Go back through the lessons and try again.'; }

        document.getElementById('quizContent').innerHTML = `
            <div class="quiz-score-card">
                <span class="score-emoji">${emoji}</span>
                <div class="score-number">${score} / ${quizData.length}</div>
                <div style="font-size:1.3rem;font-weight:700;margin:10px 0;">${percentage}%</div>
                <p style="color:var(--text-muted);margin:16px 0 24px;line-height:1.6;">${message}</p>
                <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap;">
                    <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Try Again</button>
                    <button class="btn btn-secondary" onclick="showPage('pitfalls')">üìå Review Cheatsheet</button>
                </div>
            </div>`;

        document.getElementById('nextBtn').style.display = 'none';
        document.getElementById('restartBtn').style.display = 'none';

        if (percentage >= 70) launchConfetti();
    }

    function escapeHtml(str) {
        return str
            .replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;');
    }

    /* ==============================================
       ACCORDION
    ============================================== */
    function toggleAccordion(el) {
        el.classList.toggle('open');
    }

    /* ==============================================
       CONFETTI
    ============================================== */
    function launchConfetti() {
        const colors = ['#6c63ff','#ff6584','#ffd700','#2ecc71','#e74c3c','#3498db'];
        for (let i = 0; i < 40; i++) {
            setTimeout(() => {
                const piece = document.createElement('div');
                piece.className = 'confetti-piece';
                piece.style.left = Math.random() * 100 + 'vw';
                piece.style.background = colors[Math.floor(Math.random() * colors.length)];
                piece.style.animationDelay = Math.random() * 0.5 + 's';
                piece.style.animationDuration = (1 + Math.random()) + 's';
                piece.style.width = (5 + Math.random() * 10) + 'px';
                piece.style.height = (5 + Math.random() * 10) + 'px';
                piece.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                document.body.appendChild(piece);
                setTimeout(() => piece.remove(), 2500);
            }, i * 30);
        }
    }
</script>
</body>
</html>