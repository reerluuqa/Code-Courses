<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Operators Mastery üöÄ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap');

        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg: #0f0f1a;
            --card: #1a1a2e;
            --card2: #16213e;
            --accent: #e94560;
            --accent2: #0f3460;
            --green: #00d474;
            --yellow: #ffd700;
            --blue: #4fc3f7;
            --purple: #bb86fc;
            --text: #e0e0e0;
            --text2: #a0a0b0;
            --radius: 16px;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated background */
        .bg-particles {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
            animation: floatUp linear infinite;
        }

        @keyframes floatUp {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.1; }
            90% { opacity: 0.1; }
            100% { transform: translateY(-10vh) rotate(720deg); opacity: 0; }
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(15, 15, 26, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(233, 69, 96, 0.2);
            padding: 12px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header h1 {
            font-size: 1.4rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent), var(--yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .progress-container {
            flex: 1;
            max-width: 400px;
            margin: 0 24px;
        }

        .progress-bar {
            height: 8px;
            background: var(--card);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--yellow));
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .progress-text {
            font-size: 0.75rem;
            color: var(--text2);
            margin-top: 4px;
            text-align: center;
        }

        .xp-badge {
            background: linear-gradient(135deg, var(--yellow), #ff8c00);
            color: #000;
            padding: 6px 16px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .streak-badge {
            background: linear-gradient(135deg, var(--accent), #ff6b6b);
            color: #fff;
            padding: 6px 16px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.85rem;
            margin-left: 8px;
        }

        /* Main layout */
        .main {
            position: relative;
            z-index: 1;
            max-width: 1000px;
            margin: 0 auto;
            padding: 24px;
        }

        /* Sidebar nav */
        .sidebar-toggle {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 200;
            background: var(--accent);
            border: none;
            color: white;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(233, 69, 96, 0.4);
            transition: transform 0.3s;
        }

        .sidebar-toggle:hover { transform: scale(1.1); }

        .sidebar {
            position: fixed;
            top: 0;
            right: -380px;
            width: 360px;
            height: 100vh;
            background: var(--card);
            z-index: 150;
            transition: right 0.3s ease;
            padding: 80px 20px 20px;
            overflow-y: auto;
            border-left: 1px solid rgba(233, 69, 96, 0.2);
        }

        .sidebar.open { right: 0; }

        .sidebar-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 140;
            display: none;
        }

        .sidebar-overlay.show { display: block; }

        .topic-list {
            list-style: none;
        }

        .topic-item {
            padding: 12px 16px;
            margin-bottom: 6px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .topic-item:hover { background: var(--card2); }
        .topic-item.active { background: var(--accent); color: white; }
        .topic-item.completed { border-left: 3px solid var(--green); }

        .topic-item .icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .topic-item .check {
            margin-left: auto;
            color: var(--green);
            font-size: 1.2rem;
        }

        /* Section styles */
        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .section-emoji {
            font-size: 3rem;
            margin-bottom: 12px;
            display: block;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .section-title {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--blue), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .section-subtitle {
            color: var(--text2);
            font-size: 1rem;
        }

        /* Cards */
        .card {
            background: var(--card);
            border-radius: var(--radius);
            padding: 24px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.05);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.3);
        }

        .card h3 {
            font-size: 1.2rem;
            margin-bottom: 12px;
            color: var(--blue);
        }

        .card p {
            color: var(--text2);
            line-height: 1.7;
            margin-bottom: 12px;
        }

        /* Code blocks */
        .code-block {
            background: #0d1117;
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.8;
            overflow-x: auto;
            border: 1px solid rgba(255,255,255,0.08);
            position: relative;
        }

        .code-block .line-comment {
            color: #6a9955;
        }

        .code-block .keyword {
            color: #c586c0;
        }

        .code-block .variable {
            color: #9cdcfe;
        }

        .code-block .string {
            color: #ce9178;
        }

        .code-block .number {
            color: #b5cea8;
        }

        .code-block .operator {
            color: #d4d4d4;
        }

        .code-block .function {
            color: #dcdcaa;
        }

        .run-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--green);
            border: none;
            color: #000;
            padding: 6px 14px;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            transition: all 0.2s;
        }

        .run-btn:hover { transform: scale(1.05); }

        .output-block {
            background: #1a1a2e;
            border: 1px solid var(--green);
            border-radius: 10px;
            padding: 12px 16px;
            margin-top: 8px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--green);
            min-height: 30px;
            white-space: pre-wrap;
        }

        .output-label {
            font-size: 0.7rem;
            color: var(--text2);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 12px;
            margin-bottom: 4px;
        }

        /* Interactive playground */
        .playground {
            background: var(--card);
            border-radius: var(--radius);
            padding: 24px;
            margin: 20px 0;
            border: 2px solid var(--accent2);
        }

        .playground h3 {
            color: var(--yellow);
            margin-bottom: 16px;
            font-size: 1.1rem;
        }

        .playground textarea {
            width: 100%;
            min-height: 120px;
            background: #0d1117;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            color: var(--text);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            padding: 16px;
            resize: vertical;
            outline: none;
            transition: border-color 0.3s;
        }

        .playground textarea:focus {
            border-color: var(--accent);
        }

        /* Buttons */
        .btn {
            padding: 12px 28px;
            border-radius: 12px;
            border: none;
            font-weight: 700;
            font-size: 0.9rem;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover { transform: translateY(-2px); }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent), #ff6b6b);
            color: white;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--green), #00b894);
            color: #000;
            box-shadow: 0 4px 15px rgba(0, 212, 116, 0.3);
        }

        .btn-outline {
            background: transparent;
            color: var(--text);
            border: 2px solid var(--accent);
        }

        .btn-group {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        /* Quiz styles */
        .quiz-container {
            background: var(--card);
            border-radius: var(--radius);
            padding: 32px;
            margin: 20px 0;
            border: 2px solid var(--purple);
        }

        .quiz-question {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .quiz-question code {
            background: #0d1117;
            padding: 2px 8px;
            border-radius: 6px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--yellow);
        }

        .quiz-options {
            display: grid;
            gap: 10px;
        }

        .quiz-option {
            padding: 14px 20px;
            background: var(--card2);
            border: 2px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--text);
        }

        .quiz-option:hover {
            border-color: var(--purple);
            transform: translateX(4px);
        }

        .quiz-option.selected {
            border-color: var(--blue);
            background: rgba(79, 195, 247, 0.1);
        }

        .quiz-option.correct {
            border-color: var(--green);
            background: rgba(0, 212, 116, 0.15);
            animation: correctPulse 0.5s;
        }

        .quiz-option.wrong {
            border-color: var(--accent);
            background: rgba(233, 69, 96, 0.15);
            animation: shake 0.5s;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        .quiz-feedback {
            margin-top: 16px;
            padding: 16px;
            border-radius: 12px;
            font-weight: 600;
            display: none;
        }

        .quiz-feedback.correct {
            background: rgba(0, 212, 116, 0.15);
            color: var(--green);
            border: 1px solid var(--green);
            display: block;
        }

        .quiz-feedback.wrong {
            background: rgba(233, 69, 96, 0.15);
            color: var(--accent);
            border: 1px solid var(--accent);
            display: block;
        }

        .quiz-score {
            text-align: center;
            padding: 40px;
        }

        .quiz-score .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 800;
            margin: 0 auto 20px;
        }

        .quiz-score .score-circle.pass {
            background: rgba(0, 212, 116, 0.2);
            border: 3px solid var(--green);
            color: var(--green);
        }

        .quiz-score .score-circle.fail {
            background: rgba(233, 69, 96, 0.2);
            border: 3px solid var(--accent);
            color: var(--accent);
        }

        /* Exercise styles */
        .exercise {
            background: var(--card);
            border-radius: var(--radius);
            padding: 24px;
            margin: 20px 0;
            border-left: 4px solid var(--yellow);
        }

        .exercise h4 {
            color: var(--yellow);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .exercise-result {
            margin-top: 12px;
            padding: 12px;
            border-radius: 8px;
            font-weight: 600;
            display: none;
        }

        .exercise-result.correct {
            display: block;
            background: rgba(0,212,116,0.15);
            color: var(--green);
        }

        .exercise-result.wrong {
            display: block;
            background: rgba(233,69,96,0.15);
            color: var(--accent);
        }

        /* Operator table */
        .op-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
        }

        .op-table th {
            background: var(--accent2);
            padding: 12px;
            text-align: left;
            font-size: 0.85rem;
            border-radius: 4px;
        }

        .op-table td {
            padding: 10px 12px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            font-size: 0.85rem;
        }

        .op-table td:first-child {
            font-family: 'JetBrains Mono', monospace;
            color: var(--yellow);
            font-weight: 600;
        }

        .op-table tr:hover td {
            background: rgba(255,255,255,0.02);
        }

        /* Analogy boxes */
        .analogy {
            background: linear-gradient(135deg, rgba(187, 134, 252, 0.1), rgba(79, 195, 247, 0.1));
            border: 1px solid var(--purple);
            border-radius: var(--radius);
            padding: 20px;
            margin: 16px 0;
        }

        .analogy .title {
            color: var(--purple);
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .analogy p {
            color: var(--text);
            line-height: 1.7;
        }

        /* Tip boxes */
        .tip {
            background: rgba(255, 215, 0, 0.08);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
        }

        .tip .title {
            color: var(--yellow);
            font-weight: 700;
            margin-bottom: 6px;
        }

        /* Navigation */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.05);
        }

        /* Confetti */
        .confetti-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 10px;
            top: -10px;
            animation: confettiFall linear forwards;
        }

        @keyframes confettiFall {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--card);
            border: 1px solid var(--green);
            padding: 16px 24px;
            border-radius: 12px;
            z-index: 300;
            transition: transform 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
        }

        /* Welcome screen */
        .welcome {
            text-align: center;
            padding: 60px 20px;
            animation: fadeIn 0.5s ease;
        }

        .welcome h2 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 16px;
            background: linear-gradient(135deg, var(--accent), var(--yellow), var(--blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .welcome p {
            color: var(--text2);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto 30px;
            line-height: 1.7;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin: 30px 0;
        }

        .feature-card {
            background: var(--card);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .feature-card .emoji { font-size: 2rem; margin-bottom: 10px; }
        .feature-card h4 { margin-bottom: 6px; color: var(--blue); }
        .feature-card p { font-size: 0.85rem; color: var(--text2); }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { background: var(--accent2); border-radius: 3px; }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 { font-size: 1rem; }
            .progress-container { max-width: 200px; }
            .section-title { font-size: 1.5rem; }
            .welcome h2 { font-size: 1.8rem; }
            .sidebar { width: 300px; right: -320px; }
        }

        /* Phase indicator */
        .phase-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }
        .phase-learn { background: rgba(79,195,247,0.2); color: var(--blue); }
        .phase-example { background: rgba(187,134,252,0.2); color: var(--purple); }
        .phase-exercise { background: rgba(255,215,0,0.2); color: var(--yellow); }
        .phase-quiz { background: rgba(233,69,96,0.2); color: var(--accent); }

        .highlight {
            background: rgba(255,215,0,0.15);
            padding: 2px 6px;
            border-radius: 4px;
            color: var(--yellow);
            font-weight: 600;
        }

        /* Visual operator demo */
        .visual-demo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            padding: 24px;
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            margin: 16px 0;
            flex-wrap: wrap;
        }

        .demo-box {
            background: var(--accent2);
            padding: 16px 24px;
            border-radius: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            font-weight: 700;
            min-width: 60px;
            text-align: center;
        }

        .demo-operator {
            font-size: 1.5rem;
            color: var(--yellow);
            font-weight: 800;
        }

        .demo-result {
            color: var(--green);
            font-size: 1.2rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
        }

        .tab-container {
            display: flex;
            gap: 4px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 4px;
        }

        .tab {
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            background: var(--card2);
            color: var(--text2);
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 0.8rem;
            white-space: nowrap;
            transition: all 0.2s;
        }

        .tab.active {
            background: var(--accent);
            color: white;
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .locked-overlay {
            position: relative;
        }
        .locked-overlay::after {
            content: 'üîí Complete the quiz above to unlock';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(15, 15, 26, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius);
            font-weight: 600;
            color: var(--text2);
        }
    </style>
</head>
<body>

<!-- Background particles -->
<div class="bg-particles" id="particles"></div>

<!-- Toast notification -->
<div class="toast" id="toast"></div>

<!-- Confetti container -->
<div class="confetti-container" id="confetti"></div>

<!-- Header -->
<header class="header">
    <h1>‚ö° JS Operators</h1>
    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text" id="progressText">0 / 7 topics completed</div>
    </div>
    <div class="xp-badge" id="xpBadge">‚≠ê <span id="xpCount">0</span> XP</div>
    <div class="streak-badge" id="streakBadge">üî• <span id="streakCount">0</span></div>
</header>

<!-- Sidebar toggle -->
<button class="sidebar-toggle" id="sidebarToggle" onclick="toggleSidebar()">üìã</button>

<!-- Sidebar overlay -->
<div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

<!-- Sidebar -->
<nav class="sidebar" id="sidebar">
    <h3 style="margin-bottom:20px; color:var(--accent);">üìö Topics</h3>
    <ul class="topic-list" id="topicList"></ul>
</nav>

<!-- Main content -->
<main class="main" id="mainContent">
    <!-- Content dynamically loaded here -->
</main>

<script>
// ============== APP STATE ==============
const state = {
    currentTopic: -1,
    xp: 0,
    streak: 0,
    completedTopics: new Set(),
    quizAttempts: {},
    unlockedTopics: new Set([0])
};

// ============== TOPICS DATA ==============
const topics = [
    {
        id: 0,
        title: "Welcome & Overview",
        icon: "üè†",
        emoji: "üöÄ",
        color: "#e94560"
    },
    {
        id: 1,
        title: "Arithmetic Operators",
        icon: "üî¢",
        emoji: "‚ûï",
        color: "#4fc3f7"
    },
    {
        id: 2,
        title: "Assignment Operators",
        icon: "üìù",
        emoji: "üì¶",
        color: "#bb86fc"
    },
    {
        id: 3,
        title: "Comparison Operators",
        icon: "‚öñÔ∏è",
        emoji: "üîç",
        color: "#00d474"
    },
    {
        id: 4,
        title: "Logical Operators",
        icon: "üß†",
        emoji: "üîó",
        color: "#ffd700"
    },
    {
        id: 5,
        title: "String Operators",
        icon: "üìù",
        emoji: "‚úçÔ∏è",
        color: "#ff8c00"
    },
    {
        id: 6,
        title: "Type Operators",
        icon: "üè∑Ô∏è",
        emoji: "üè∑Ô∏è",
        color: "#e94560"
    },
    {
        id: 7,
        title: "Ternary & Special",
        icon: "‚ú®",
        emoji: "üéØ",
        color: "#4fc3f7"
    }
];

// ============== INITIALIZATION ==============
function init() {
    createParticles();
    renderTopicList();
    // Unlock all topics for smooth experience
    topics.forEach(t => state.unlockedTopics.add(t.id));
    navigateTo(0);
}

function createParticles() {
    const container = document.getElementById('particles');
    const colors = ['#e94560', '#4fc3f7', '#bb86fc', '#ffd700', '#00d474'];
    for (let i = 0; i < 20; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        const size = Math.random() * 6 + 2;
        p.style.width = size + 'px';
        p.style.height = size + 'px';
        p.style.left = Math.random() * 100 + '%';
        p.style.background = colors[Math.floor(Math.random() * colors.length)];
        p.style.animationDuration = (Math.random() * 20 + 10) + 's';
        p.style.animationDelay = (Math.random() * 20) + 's';
        container.appendChild(p);
    }
}

// ============== NAVIGATION ==============
function renderTopicList() {
    const list = document.getElementById('topicList');
    list.innerHTML = topics.map(t => `
        <li class="topic-item ${state.currentTopic === t.id ? 'active' : ''} ${state.completedTopics.has(t.id) ? 'completed' : ''}"
            onclick="navigateTo(${t.id})">
            <span class="icon" style="background:${t.color}20; color:${t.color}">${t.icon}</span>
            <span>${t.title}</span>
            ${state.completedTopics.has(t.id) ? '<span class="check">‚úì</span>' : ''}
        </li>
    `).join('');
}

function navigateTo(topicId) {
    state.currentTopic = topicId;
    renderTopicList();
    updateProgress();
    const main = document.getElementById('mainContent');
    main.innerHTML = '';

    switch(topicId) {
        case 0: renderWelcome(); break;
        case 1: renderArithmetic(); break;
        case 2: renderAssignment(); break;
        case 3: renderComparison(); break;
        case 4: renderLogical(); break;
        case 5: renderString(); break;
        case 6: renderType(); break;
        case 7: renderTernary(); break;
    }

    window.scrollTo({ top: 0, behavior: 'smooth' });
    closeSidebar();
}

function toggleSidebar() {
    document.getElementById('sidebar').classList.toggle('open');
    document.getElementById('sidebarOverlay').classList.toggle('show');
}

function closeSidebar() {
    document.getElementById('sidebar').classList.remove('open');
    document.getElementById('sidebarOverlay').classList.remove('show');
}

// ============== PROGRESS & XP ==============
function updateProgress() {
    const pct = (state.completedTopics.size / (topics.length - 1)) * 100;
    document.getElementById('progressFill').style.width = pct + '%';
    document.getElementById('progressText').textContent = `${state.completedTopics.size} / ${topics.length - 1} topics completed`;
    document.getElementById('xpCount').textContent = state.xp;
    document.getElementById('streakCount').textContent = state.streak;
}

function addXP(amount) {
    state.xp += amount;
    updateProgress();
    showToast(`+${amount} XP earned! ‚≠ê`);
}

function completeTopic(id) {
    if (!state.completedTopics.has(id)) {
        state.completedTopics.add(id);
        state.streak++;
        addXP(50);
        launchConfetti();
        renderTopicList();
        updateProgress();
    }
}

function showToast(msg) {
    const toast = document.getElementById('toast');
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 2500);
}

function launchConfetti() {
    const container = document.getElementById('confetti');
    const colors = ['#e94560', '#4fc3f7', '#bb86fc', '#ffd700', '#00d474', '#ff8c00'];
    for (let i = 0; i < 50; i++) {
        const piece = document.createElement('div');
        piece.className = 'confetti-piece';
        piece.style.left = Math.random() * 100 + '%';
        piece.style.background = colors[Math.floor(Math.random() * colors.length)];
        piece.style.width = (Math.random() * 10 + 5) + 'px';
        piece.style.height = (Math.random() * 10 + 5) + 'px';
        piece.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
        piece.style.animationDuration = (Math.random() * 2 + 1) + 's';
        piece.style.animationDelay = (Math.random() * 0.5) + 's';
        container.appendChild(piece);
        setTimeout(() => piece.remove(), 3500);
    }
}

// ============== CODE RUNNER ==============
function runCode(codeId, outputId) {
    const codeEl = document.getElementById(codeId);
    const outputEl = document.getElementById(outputId);
    const code = codeEl.value || codeEl.textContent;

    let output = [];
    const origLog = console.log;
    console.log = (...args) => output.push(args.map(a =>
        typeof a === 'object' ? JSON.stringify(a) : String(a)
    ).join(' '));

    try {
        const result = eval(code);
        if (result !== undefined && output.length === 0) {
            output.push(String(result));
        }
        outputEl.textContent = output.join('\n') || '(no output)';
        outputEl.style.color = 'var(--green)';
    } catch (e) {
        outputEl.textContent = '‚ùå Error: ' + e.message;
        outputEl.style.color = 'var(--accent)';
    }

    console.log = origLog;
    addXP(5);
}

// ============== QUIZ ENGINE ==============
function createQuiz(containerId, questions, topicId) {
    const container = document.getElementById(containerId);
    let currentQ = 0;
    let score = 0;
    let answered = false;

    function renderQuestion() {
        if (currentQ >= questions.length) {
            renderResults();
            return;
        }

        const q = questions[currentQ];
        answered = false;

        container.innerHTML = `
            <div class="quiz-container">
                <div style="display:flex; justify-content:space-between; margin-bottom:16px;">
                    <span class="phase-badge phase-quiz">Quiz</span>
                    <span style="color:var(--text2); font-size:0.85rem;">Question ${currentQ + 1} / ${questions.length}</span>
                </div>
                <div class="quiz-question">${q.question}</div>
                <div class="quiz-options">
                    ${q.options.map((opt, i) => `
                        <div class="quiz-option" id="qopt_${i}" onclick="selectQuizOption(${i})">${opt}</div>
                    `).join('')}
                </div>
                <div class="quiz-feedback" id="quizFeedback"></div>
                <div class="btn-group" style="justify-content:flex-end;">
                    <button class="btn btn-primary" id="quizNextBtn" onclick="nextQuizQuestion()" style="display:none;">Next ‚Üí</button>
                </div>
            </div>
        `;

        window.selectQuizOption = function(idx) {
            if (answered) return;
            answered = true;

            const fb = document.getElementById('quizFeedback');
            const el = document.getElementById('qopt_' + idx);

            if (idx === q.correct) {
                score++;
                el.classList.add('correct');
                fb.className = 'quiz-feedback correct';
                fb.innerHTML = `‚úÖ Correct! ${q.explanation}`;
                addXP(15);
            } else {
                el.classList.add('wrong');
                document.getElementById('qopt_' + q.correct).classList.add('correct');
                fb.className = 'quiz-feedback wrong';
                fb.innerHTML = `‚ùå Not quite. ${q.explanation}`;
                state.streak = 0;
                updateProgress();
            }

            document.getElementById('quizNextBtn').style.display = 'inline-flex';
        };

        window.nextQuizQuestion = function() {
            currentQ++;
            renderQuestion();
        };
    }

    function renderResults() {
        const pct = Math.round((score / questions.length) * 100);
        const passed = pct >= 70;

        if (passed && topicId) {
            completeTopic(topicId);
        }

        container.innerHTML = `
            <div class="quiz-container">
                <div class="quiz-score">
                    <div class="score-circle ${passed ? 'pass' : 'fail'}">${pct}%</div>
                    <h3 style="margin-bottom:8px;">${passed ? 'üéâ Excellent!' : 'üí™ Keep Practicing!'}</h3>
                    <p style="color:var(--text2); margin-bottom:20px;">
                        You got ${score} out of ${questions.length} correct.
                        ${passed ? 'Topic unlocked! You earned 50 bonus XP!' : 'You need 70% to pass. Try again!'}
                    </p>
                    <div class="btn-group" style="justify-content:center;">
                        ${!passed ? `<button class="btn btn-primary" onclick="createQuiz('${containerId}', quizData_${topicId}, ${topicId})">üîÑ Retry Quiz</button>` : ''}
                        ${passed && topicId < 7 ? `<button class="btn btn-success" onclick="navigateTo(${topicId + 1})">Next Topic ‚Üí</button>` : ''}
                        ${passed && topicId === 7 ? `<button class="btn btn-success" onclick="navigateTo(0)">üè† Back to Home</button>` : ''}
                    </div>
                </div>
            </div>
        `;
    }

    renderQuestion();
}

// ============== EXERCISE CHECKER ==============
function checkExercise(textareaId, resultId, validator) {
    const code = document.getElementById(textareaId).value;
    const resultEl = document.getElementById(resultId);

    let output = [];
    const origLog = console.log;
    console.log = (...args) => output.push(args.map(a => typeof a === 'object' ? JSON.stringify(a) : String(a)).join(' '));

    try {
        const result = eval(code);
        console.log = origLog;

        if (validator(code, result, output)) {
            resultEl.className = 'exercise-result correct';
            resultEl.textContent = '‚úÖ Great job! That\'s correct!';
            addXP(20);
        } else {
            resultEl.className = 'exercise-result wrong';
            resultEl.textContent = '‚ùå Not quite. Check your code and try again.';
        }
    } catch (e) {
        console.log = origLog;
        resultEl.className = 'exercise-result wrong';
        resultEl.textContent = '‚ùå Error: ' + e.message;
    }
}

// ============== RENDER: WELCOME ==============
function renderWelcome() {
    const main = document.getElementById('mainContent');
    main.innerHTML = `
        <div class="welcome">
            <span class="section-emoji">üöÄ</span>
            <h2>Master JavaScript Operators</h2>
            <p>Welcome! This interactive course will teach you every type of JavaScript operator through lessons, real-world examples, hands-on exercises, and quizzes. Let's make you an operator expert!</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <div class="emoji">üìñ</div>
                    <h4>Learn</h4>
                    <p>Clear explanations with visual analogies</p>
                </div>
                <div class="feature-card">
                    <div class="emoji">üí°</div>
                    <h4>Examples</h4>
                    <p>Real-world runnable code examples</p>
                </div>
                <div class="feature-card">
                    <div class="emoji">üèãÔ∏è</div>
                    <h4>Practice</h4>
                    <p>Hands-on coding exercises</p>
                </div>
                <div class="feature-card">
                    <div class="emoji">üß™</div>
                    <h4>Quiz</h4>
                    <p>Test your knowledge to unlock next topic</p>
                </div>
            </div>

            <div class="card" style="text-align:left;">
                <h3>üó∫Ô∏è What You'll Learn</h3>
                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap:12px; margin-top:12px;">
                    ${topics.slice(1).map(t => `
                        <div style="display:flex; align-items:center; gap:10px; padding:10px; background:var(--card2); border-radius:10px;">
                            <span style="font-size:1.3rem;">${t.icon}</span>
                            <span style="font-size:0.9rem;">${t.title}</span>
                            ${state.completedTopics.has(t.id) ? '<span style="margin-left:auto; color:var(--green);">‚úì</span>' : ''}
                        </div>
                    `).join('')}
                </div>
            </div>

            <div class="analogy" style="text-align:left;">
                <div class="title">üé≠ What are Operators?</div>
                <p>Think of operators like <strong>verbs</strong> in English. Variables are the <strong>nouns</strong> (things), and operators are the <strong>actions</strong> you perform on them. Just like "John <em>kicks</em> the ball" ‚Äî in code, <code style="background:#0d1117; padding:2px 6px; border-radius:4px;">5 <span style="color:var(--yellow);">+</span> 3</code> means "add 5 and 3 together".</p>
            </div>

            <div class="btn-group" style="justify-content:center; margin-top:30px;">
                <button class="btn btn-primary" onclick="navigateTo(1)" style="font-size:1.1rem; padding:16px 40px;">
                    Start Learning! üöÄ
                </button>
            </div>
        </div>
    `;

    // Mark welcome as completed
    state.completedTopics.add(0);
    renderTopicList();
}

// ============== RENDER: ARITHMETIC ==============
function renderArithmetic() {
    const main = document.getElementById('mainContent');
    main.innerHTML = `
        <div class="section active">
            <div class="section-header">
                <span class="section-emoji">‚ûï</span>
                <h2 class="section-title">Arithmetic Operators</h2>
                <p class="section-subtitle">The math operators ‚Äî your calculator inside JavaScript!</p>
            </div>

            <!-- TABS -->
            <div class="tab-container">
                <button class="tab active" onclick="switchTab(this, 'arith-learn')">üìñ Learn</button>
                <button class="tab" onclick="switchTab(this, 'arith-examples')">üí° Examples</button>
                <button class="tab" onclick="switchTab(this, 'arith-exercises')">üèãÔ∏è Exercises</button>
                <button class="tab" onclick="switchTab(this, 'arith-quiz')">üß™ Quiz</button>
            </div>

            <!-- LEARN TAB -->
            <div class="tab-content active" id="arith-learn">
                <span class="phase-badge phase-learn">Learn</span>

                <div class="analogy">
                    <div class="title">üé≠ Real Life Analogy</div>
                    <p>Arithmetic operators work just like a calculator! If you can do math in real life (add prices, split a bill, count items), you already understand these operators. JavaScript just lets you do it with code.</p>
                </div>

                <div class="card">
                    <h3>The 7 Arithmetic Operators</h3>
                    <table class="op-table">
                        <tr><th>Operator</th><th>Name</th><th>Example</th><th>Result</th></tr>
                        <tr><td>+</td><td>Addition</td><td>5 + 3</td><td>8</td></tr>
                        <tr><td>-</td><td>Subtraction</td><td>10 - 4</td><td>6</td></tr>
                        <tr><td>*</td><td>Multiplication</td><td>3 * 7</td><td>21</td></tr>
                        <tr><td>/</td><td>Division</td><td>20 / 4</td><td>5</td></tr>
                        <tr><td>%</td><td>Modulus (Remainder)</td><td>10 % 3</td><td>1</td></tr>
                        <tr><td>**</td><td>Exponentiation (Power)</td><td>2 ** 3</td><td>8</td></tr>
                        <tr><td>++</td><td>Increment</td><td>x++ or ++x</td><td>x + 1</td></tr>
                        <tr><td>--</td><td>Decrement</td><td>x-- or --x</td><td>x - 1</td></tr>
                    </table>
                </div>

                <div class="card">
                    <h3>üéØ Visual Demo</h3>
                    <p>See how each operator works visually:</p>

                    <div class="visual-demo">
                        <div class="demo-box">10</div>
                        <div class="demo-operator">%</div>
                        <div class="demo-box">3</div>
                        <div class="demo-operator">=</div>
                        <div class="demo-result">1</div>
                    </div>
                    <p style="text-align:center; font-size:0.85rem; color:var(--text2);">
                        10 √∑ 3 = 3 remainder <strong style="color:var(--yellow)">1</strong> ‚Üí The modulus gives you the remainder!
                    </p>

                    <div class="visual-demo" style="margin-top:16px;">
                        <div class="demo-box">2</div>
                        <div class="demo-operator">**</div>
                        <div class="demo-box">3</div>
                        <div class="demo-operator">=</div>
                        <div class="demo-result">8</div>
                    </div>
                    <p style="text-align:center; font-size:0.85rem; color:var(--text2);">
                        2 √ó 2 √ó 2 = <strong style="color:var(--yellow)">8</strong> ‚Üí Exponentiation means "multiply by itself N times"
                    </p>
                </div>

                <div class="card">
                    <h3>‚ö° Increment & Decrement</h3>
                    <p>These are shortcuts to add or subtract 1:</p>
                    <div class="code-block">
<span class="keyword">let</span> <span class="variable">count</span> = <span class="number">5</span>;
<span class="variable">count</span>++;    <span class="line-comment">// count is now 6 (same as count = count + 1)</span>
<span class="variable">count</span>--;    <span class="line-comment">// count is now 5 again</span>

<span class="line-comment">// Prefix vs Postfix difference:</span>
<span class="keyword">let</span> <span class="variable">a</span> = <span class="number">5</span>;
<span class="keyword">let</span> <span class="variable">b</span> = <span class="variable">a</span>++;  <span class="line-comment">// b = 5, THEN a becomes 6 (use first, increment after)</span>
<span class="keyword">let</span> <span class="variable">c</span> = ++<span class="variable">a</span>;  <span class="line-comment">// a becomes 7 first, THEN c = 7 (increment first, then use)</span>
                    </div>

                    <div class="tip">
                        <div class="title">üí° Pro Tip</div>
                        <p style="color:var(--text2); font-size:0.9rem;">When in doubt, use <code>x++</code> (postfix) ‚Äî it's the most common. The prefix/postfix difference only matters when you use it in an expression like <code>let b = a++</code>.</p>
                    </div>
                </div>
            </div>

            <!-- EXAMPLES TAB -->
            <div class="tab-content" id="arith-examples">
                <span class="phase-badge phase-example">Real-World Examples</span>

                <div class="card">
                    <h3>üõí Shopping Cart Total</h3>
                    <p>Calculate the total price of items in a shopping cart:</p>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('arith_ex1', 'arith_out1')">‚ñ∂ Run</button>
                        <textarea id="arith_ex1" style="width:100%;min-height:140px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let shirt = 29.99;
let pants = 49.99;
let shoes = 89.99;

let subtotal = shirt + pants + shoes;
let tax = subtotal * 0.08;  // 8% sales tax
let total = subtotal + tax;

console.log("Subtotal: $" + subtotal.toFixed(2));
console.log("Tax: $" + tax.toFixed(2));
console.log("Total: $" + total.toFixed(2));</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="arith_out1"></div>
                </div>

                <div class="card">
                    <h3>üçï Splitting a Bill</h3>
                    <p>Divide a restaurant bill among friends:</p>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('arith_ex2', 'arith_out2')">‚ñ∂ Run</button>
                        <textarea id="arith_ex2" style="width:100%;min-height:120px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let totalBill = 87.50;
let numberOfFriends = 4;

let eachPays = totalBill / numberOfFriends;
let leftover = totalBill % numberOfFriends;

console.log("Each person pays: $" + eachPays.toFixed(2));
console.log("Remainder cents: $" + leftover.toFixed(2));</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="arith_out2"></div>
                </div>

                <div class="card">
                    <h3>üéÆ Game Score Counter</h3>
                    <p>Track and update a player's score:</p>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('arith_ex3', 'arith_out3')">‚ñ∂ Run</button>
                        <textarea id="arith_ex3" style="width:100%;min-height:150px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let score = 0;

score++;           // Got a point! score = 1
score++;           // Another point! score = 2
score += 10;       // Bonus! score = 12
score *= 2;        // Double score power-up! score = 24
score--;           // Lost a point. score = 23

console.log("Final Score: " + score);
console.log("Score squared: " + score ** 2);</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="arith_out3"></div>
                </div>

                <div class="card">
                    <h3>‚è∞ Time Converter</h3>
                    <p>Convert seconds to hours, minutes, and seconds using modulus:</p>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('arith_ex4', 'arith_out4')">‚ñ∂ Run</button>
                        <textarea id="arith_ex4" style="width:100%;min-height:130px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let totalSeconds = 3725;

let hours = Math.floor(totalSeconds / 3600);
let minutes = Math.floor((totalSeconds % 3600) / 60);
let seconds = totalSeconds % 60;

console.log(totalSeconds + " seconds = " + hours + "h " + minutes + "m " + seconds + "s");</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="arith_out4"></div>
                </div>

                <div class="card">
                    <h3>üî¢ Even or Odd Checker</h3>
                    <p>The modulus operator is perfect for checking if a number is even or odd:</p>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('arith_ex5', 'arith_out5')">‚ñ∂ Run</button>
                        <textarea id="arith_ex5" style="width:100%;min-height:100px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let num = 7;
console.log(num + " % 2 = " + num % 2);
console.log(num + " is " + (num % 2 === 0 ? "even" : "odd"));

let num2 = 12;
console.log(num2 + " % 2 = " + num2 % 2);
console.log(num2 + " is " + (num2 % 2 === 0 ? "even" : "odd"));</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="arith_out5"></div>
                </div>
            </div>

            <!-- EXERCISES TAB -->
            <div class="tab-content" id="arith-exercises">
                <span class="phase-badge phase-exercise">Practice Exercises</span>

                <div class="exercise">
                    <h4>üèãÔ∏è Exercise 1: Calculate the Area</h4>
                    <p style="color:var(--text2); margin-bottom:12px;">Calculate the area of a rectangle with width 15 and height 8. Store the result in a variable called <code>area</code> and log it.</p>
                    <div class="playground">
                        <textarea id="ex_arith_1" placeholder="// Write your code here...">let width = 15;
let height = 8;
// Calculate area and console.log it
</textarea>
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="checkExercise('ex_arith_1', 'res_arith_1', (code, result, output) => output.some(o => o.includes('120')))">Check Answer ‚úì</button>
                        </div>
                        <div class="exercise-result" id="res_arith_1"></div>
                    </div>
                </div>

                <div class="exercise">
                    <h4>üèãÔ∏è Exercise 2: Temperature Converter</h4>
                    <p style="color:var(--text2); margin-bottom:12px;">Convert 98.6¬∞F to Celsius. Formula: <code>(F - 32) * 5/9</code>. Log the result.</p>
                    <div class="playground">
                        <textarea id="ex_arith_2" placeholder="// Write your code here...">let fahrenheit = 98.6;
// Convert to celsius and console.log it
</textarea>
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="checkExercise('ex_arith_2', 'res_arith_2', (code, result, output) => output.some(o => o.includes('37')))">Check Answer ‚úì</button>
                        </div>
                        <div class="exercise-result" id="res_arith_2"></div>
                    </div>
                </div>

                <div class="exercise">
                    <h4>üèãÔ∏è Exercise 3: Remainder Challenge</h4>
                    <p style="color:var(--text2); margin-bottom:12px;">What is the remainder when 257 is divided by 7? Log the result using the modulus operator.</p>
                    <div class="playground">
                        <textarea id="ex_arith_3" placeholder="// Use the % operator">// Calculate 257 % 7 and log it
</textarea>
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="checkExercise('ex_arith_3', 'res_arith_3', (code, result, output) => code.includes('%') && output.some(o => o.includes('5')))">Check Answer ‚úì</button>
                        </div>
                        <div class="exercise-result" id="res_arith_3"></div>
                    </div>
                </div>
            </div>

            <!-- QUIZ TAB -->
            <div class="tab-content" id="arith-quiz">
                <span class="phase-badge phase-quiz">Quiz Time!</span>
                <p style="color:var(--text2); margin-bottom:20px;">Score at least 70% to complete this topic and earn bonus XP! üèÜ</p>
                <div id="quiz-arith"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-outline" onclick="navigateTo(0)">‚Üê Home</button>
                <button class="btn btn-primary" onclick="navigateTo(2)">Next: Assignment Operators ‚Üí</button>
            </div>
        </div>
    `;

    // Setup quiz data
    window.quizData_1 = [
        {
            question: 'What is the result of <code>10 % 3</code>?',
            options: ['3', '3.33', '1', '0'],
            correct: 2,
            explanation: '10 √∑ 3 = 3 remainder 1. The modulus operator (%) returns the remainder.'
        },
        {
            question: 'What does <code>2 ** 4</code> equal?',
            options: ['8', '16', '6', '24'],
            correct: 1,
            explanation: '2 ** 4 means 2 √ó 2 √ó 2 √ó 2 = 16. The ** operator is exponentiation.'
        },
        {
            question: 'What is the value of <code>b</code> after: <code>let a = 5; let b = a++;</code>?',
            options: ['5', '6', '4', 'undefined'],
            correct: 0,
            explanation: 'With postfix (a++), the original value (5) is assigned to b FIRST, then a increments to 6.'
        },
        {
            question: 'What does <code>15 / 4</code> return in JavaScript?',
            options: ['3', '3.75', '4', '3.5'],
            correct: 1,
            explanation: 'JavaScript division returns a decimal (float), not an integer. 15 / 4 = 3.75.'
        },
        {
            question: 'Which operator would you use to check if a number is even?',
            options: ['/', '**', '%', '-'],
            correct: 2,
            explanation: 'Use % (modulus). If num % 2 === 0, the number is even. If num % 2 === 1, it\'s odd.'
        }
    ];

    // Initialize quiz when tab is clicked
    const quizTab = document.querySelector('[onclick*="arith-quiz"]');
    if (quizTab) {
        quizTab.addEventListener('click', () => {
            setTimeout(() => createQuiz('quiz-arith', quizData_1, 1), 100);
        }, { once: true });
    }
}

// ============== RENDER: ASSIGNMENT ==============
function renderAssignment() {
    const main = document.getElementById('mainContent');
    main.innerHTML = `
        <div class="section active">
            <div class="section-header">
                <span class="section-emoji">üì¶</span>
                <h2 class="section-title">Assignment Operators</h2>
                <p class="section-subtitle">Shortcuts for storing and updating values in variables!</p>
            </div>

            <div class="tab-container">
                <button class="tab active" onclick="switchTab(this, 'assign-learn')">üìñ Learn</button>
                <button class="tab" onclick="switchTab(this, 'assign-examples')">üí° Examples</button>
                <button class="tab" onclick="switchTab(this, 'assign-exercises')">üèãÔ∏è Exercises</button>
                <button class="tab" onclick="switchTab(this, 'assign-quiz')">üß™ Quiz</button>
            </div>

            <div class="tab-content active" id="assign-learn">
                <span class="phase-badge phase-learn">Learn</span>

                <div class="analogy">
                    <div class="title">üé≠ Real Life Analogy</div>
                    <p>Think of a variable like a <strong>jar</strong>. The <code>=</code> operator puts something IN the jar. The compound operators like <code>+=</code> are like saying "take what's in the jar, add more to it, and put it back."</p>
                </div>

                <div class="card">
                    <h3>All Assignment Operators</h3>
                    <table class="op-table">
                        <tr><th>Operator</th><th>Example</th><th>Same As</th><th>Description</th></tr>
                        <tr><td>=</td><td>x = 5</td><td>x = 5</td><td>Assign value</td></tr>
                        <tr><td>+=</td><td>x += 3</td><td>x = x + 3</td><td>Add & assign</td></tr>
                        <tr><td>-=</td><td>x -= 2</td><td>x = x - 2</td><td>Subtract & assign</td></tr>
                        <tr><td>*=</td><td>x *= 4</td><td>x = x * 4</td><td>Multiply & assign</td></tr>
                        <tr><td>/=</td><td>x /= 2</td><td>x = x / 2</td><td>Divide & assign</td></tr>
                        <tr><td>%=</td><td>x %= 3</td><td>x = x % 3</td><td>Modulus & assign</td></tr>
                        <tr><td>**=</td><td>x **= 2</td><td>x = x ** 2</td><td>Exponent & assign</td></tr>
                    </table>
                </div>

                <div class="card">
                    <h3>üéØ Why Use Them?</h3>
                    <p>They're <strong>shortcuts</strong> that make your code shorter and cleaner:</p>
                    <div class="code-block">
<span class="line-comment">// Without shortcut (longer):</span>
<span class="variable">score</span> = <span class="variable">score</span> + <span class="number">10</span>;

<span class="line-comment">// With shortcut (cleaner):</span>
<span class="variable">score</span> += <span class="number">10</span>;

<span class="line-comment">// Both do the EXACT same thing!</span>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="assign-examples">
                <span class="phase-badge phase-example">Real-World Examples</span>

                <div class="card">
                    <h3>üè¶ Bank Account</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('assign_ex1', 'assign_out1')">‚ñ∂ Run</button>
                        <textarea id="assign_ex1" style="width:100%;min-height:160px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let balance = 1000;
console.log("Starting balance: $" + balance);

balance += 500;  // Deposit
console.log("After deposit of $500: $" + balance);

balance -= 200;  // Withdrawal
console.log("After withdrawal of $200: $" + balance);

balance *= 1.05; // 5% interest
console.log("After 5% interest: $" + balance.toFixed(2));</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="assign_out1"></div>
                </div>

                <div class="card">
                    <h3>üìä Student Grade Accumulator</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('assign_ex2', 'assign_out2')">‚ñ∂ Run</button>
                        <textarea id="assign_ex2" style="width:100%;min-height:140px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let totalScore = 0;
let testCount = 0;

totalScore += 85;  testCount++;  // Test 1
totalScore += 92;  testCount++;  // Test 2
totalScore += 78;  testCount++;  // Test 3
totalScore += 95;  testCount++;  // Test 4

let average = totalScore / testCount;
console.log("Total: " + totalScore);
console.log("Tests taken: " + testCount);
console.log("Average: " + average);</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="assign_out2"></div>
                </div>
            </div>

            <div class="tab-content" id="assign-exercises">
                <span class="phase-badge phase-exercise">Practice Exercises</span>

                <div class="exercise">
                    <h4>üèãÔ∏è Exercise: Savings Goal</h4>
                    <p style="color:var(--text2); margin-bottom:12px;">Start with $200. Add $50 three times using +=. Then double it with *=. Log the final amount.</p>
                    <div class="playground">
                        <textarea id="ex_assign_1" placeholder="// Write your code here...">let savings = 200;
// Add $50 three times using +=
// Then double with *=
// Log the result
</textarea>
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="checkExercise('ex_assign_1', 'res_assign_1', (code, result, output) => code.includes('+=') && code.includes('*=') && output.some(o => o.includes('700')))">Check Answer ‚úì</button>
                        </div>
                        <div class="exercise-result" id="res_assign_1"></div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="assign-quiz">
                <span class="phase-badge phase-quiz">Quiz Time!</span>
                <p style="color:var(--text2); margin-bottom:20px;">Score at least 70% to complete this topic! üèÜ</p>
                <div id="quiz-assign"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-outline" onclick="navigateTo(1)">‚Üê Arithmetic</button>
                <button class="btn btn-primary" onclick="navigateTo(3)">Next: Comparison ‚Üí</button>
            </div>
        </div>
    `;

    window.quizData_2 = [
        {
            question: 'What is <code>x</code> after: <code>let x = 10; x += 5;</code>?',
            options: ['5', '10', '15', '50'],
            correct: 2,
            explanation: 'x += 5 is the same as x = x + 5, so x = 10 + 5 = 15.'
        },
        {
            question: 'What is <code>x</code> after: <code>let x = 20; x /= 4;</code>?',
            options: ['4', '5', '80', '16'],
            correct: 1,
            explanation: 'x /= 4 is the same as x = x / 4, so x = 20 / 4 = 5.'
        },
        {
            question: 'What does <code>x %= 3</code> mean?',
            options: ['x = x * 3', 'x = x / 3', 'x = x % 3', 'x = 3 % x'],
            correct: 2,
            explanation: 'The %= operator divides x by 3 and assigns the remainder back to x.'
        },
        {
            question: 'What is <code>x</code> after: <code>let x = 3; x **= 3;</code>?',
            options: ['9', '27', '6', '33'],
            correct: 1,
            explanation: 'x **= 3 means x = x ** 3, so x = 3¬≥ = 27.'
        }
    ];

    const quizTab = document.querySelector('[onclick*="assign-quiz"]');
    if (quizTab) {
        quizTab.addEventListener('click', () => {
            setTimeout(() => createQuiz('quiz-assign', quizData_2, 2), 100);
        }, { once: true });
    }
}

// ============== RENDER: COMPARISON ==============
function renderComparison() {
    const main = document.getElementById('mainContent');
    main.innerHTML = `
        <div class="section active">
            <div class="section-header">
                <span class="section-emoji">üîç</span>
                <h2 class="section-title">Comparison Operators</h2>
                <p class="section-subtitle">Compare values and get true/false answers!</p>
            </div>

            <div class="tab-container">
                <button class="tab active" onclick="switchTab(this, 'comp-learn')">üìñ Learn</button>
                <button class="tab" onclick="switchTab(this, 'comp-examples')">üí° Examples</button>
                <button class="tab" onclick="switchTab(this, 'comp-exercises')">üèãÔ∏è Exercises</button>
                <button class="tab" onclick="switchTab(this, 'comp-quiz')">üß™ Quiz</button>
            </div>

            <div class="tab-content active" id="comp-learn">
                <span class="phase-badge phase-learn">Learn</span>

                <div class="analogy">
                    <div class="title">üé≠ Real Life Analogy</div>
                    <p>Comparison operators are like asking <strong>yes/no questions</strong>: "Is 5 greater than 3?" ‚Üí <strong>Yes (true)!</strong> "Is 2 equal to 7?" ‚Üí <strong>No (false)!</strong> They always return either <code>true</code> or <code>false</code>.</p>
                </div>

                <div class="card">
                    <h3>All Comparison Operators</h3>
                    <table class="op-table">
                        <tr><th>Operator</th><th>Description</th><th>Example</th><th>Result</th></tr>
                        <tr><td>==</td><td>Equal to (loose)</td><td>5 == "5"</td><td>true</td></tr>
                        <tr><td>===</td><td>Strict equal (value + type)</td><td>5 === "5"</td><td>false</td></tr>
                        <tr><td>!=</td><td>Not equal (loose)</td><td>5 != "5"</td><td>false</td></tr>
                        <tr><td>!==</td><td>Strict not equal</td><td>5 !== "5"</td><td>true</td></tr>
                        <tr><td>></td><td>Greater than</td><td>10 > 5</td><td>true</td></tr>
                        <tr><td><</td><td>Less than</td><td>3 < 8</td><td>true</td></tr>
                        <tr><td>>=</td><td>Greater or equal</td><td>5 >= 5</td><td>true</td></tr>
                        <tr><td><=</td><td>Less or equal</td><td>3 <= 2</td><td>false</td></tr>
                    </table>
                </div>

                <div class="card">
                    <h3>‚ö†Ô∏è == vs === (The Most Important Difference!)</h3>
                    <div class="visual-demo">
                        <div class="demo-box">5</div>
                        <div class="demo-operator">==</div>
                        <div class="demo-box">"5"</div>
                        <div class="demo-operator">=</div>
                        <div class="demo-result" style="color:var(--green);">true ‚úì</div>
                    </div>
                    <p style="text-align:center; color:var(--text2); font-size:0.85rem;">== converts types first, then compares. "5" becomes 5, so 5 == 5 is true.</p>

                    <div class="visual-demo" style="margin-top:16px;">
                        <div class="demo-box">5</div>
                        <div class="demo-operator">===</div>
                        <div class="demo-box">"5"</div>
                        <div class="demo-operator">=</div>
                        <div class="demo-result" style="color:var(--accent);">false ‚úó</div>
                    </div>
                    <p style="text-align:center; color:var(--text2); font-size:0.85rem;">=== checks type AND value. Number 5 ‚â† String "5". Different types = false.</p>

                    <div class="tip">
                        <div class="title">üí° Golden Rule</div>
                        <p style="color:var(--text2);">Always use <code>===</code> and <code>!==</code> (strict comparison). Using <code>==</code> can lead to weird bugs because of automatic type conversion!</p>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="comp-examples">
                <span class="phase-badge phase-example">Real-World Examples</span>

                <div class="card">
                    <h3>üé¢ Age Checker for a Ride</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('comp_ex1', 'comp_out1')">‚ñ∂ Run</button>
                        <textarea id="comp_ex1" style="width:100%;min-height:130px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let age = 14;
let minAge = 12;
let maxAge = 65;

console.log("Age:", age);
console.log("Old enough?", age >= minAge);
console.log("Not too old?", age <= maxAge);
console.log("Exactly minimum age?", age === minAge);
console.log("Can ride?", age >= minAge && age <= maxAge);</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="comp_out1"></div>
                </div>

                <div class="card">
                    <h3>üîê Password Checker</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('comp_ex2', 'comp_out2')">‚ñ∂ Run</button>
                        <textarea id="comp_ex2" style="width:100%;min-height:120px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let password = "hello123";
let minLength = 8;

console.log("Password length:", password.length);
console.log("Long enough?", password.length >= minLength);
console.log("Is it 'admin'?", password === "admin");
console.log("Is it NOT empty?", password !== "");</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="comp_out2"></div>
                </div>

                <div class="card">
                    <h3>ü§Ø Tricky == vs === Examples</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('comp_ex3', 'comp_out3')">‚ñ∂ Run</button>
                        <textarea id="comp_ex3" style="width:100%;min-height:160px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">// These are why == is dangerous!
console.log('0 == ""  ‚Üí', 0 == "");       // true! (both become 0)
console.log('0 === "" ‚Üí', 0 === "");       // false (different types)

console.log('false == 0  ‚Üí', false == 0);   // true!
console.log('false === 0 ‚Üí', false === 0);  // false

console.log('null == undefined  ‚Üí', null == undefined);   // true!
console.log('null === undefined ‚Üí', null === undefined);   // false

console.log('"" == false  ‚Üí', "" == false);   // true!
console.log('"" === false ‚Üí', "" === false);   // false</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="comp_out3"></div>
                </div>
            </div>

            <div class="tab-content" id="comp-exercises">
                <span class="phase-badge phase-exercise">Practice Exercises</span>

                <div class="exercise">
                    <h4>üèãÔ∏è Exercise: Voting Eligibility</h4>
                    <p style="color:var(--text2); margin-bottom:12px;">Create a variable <code>age</code> set to 17. Log whether the person can vote (age >= 18) using a comparison operator.</p>
                    <div class="playground">
                        <textarea id="ex_comp_1">let age = 17;
// Log whether age >= 18 (should be false)
</textarea>
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="checkExercise('ex_comp_1', 'res_comp_1', (code, result, output) => code.includes('>=') && output.some(o => o.includes('false')))">Check Answer ‚úì</button>
                        </div>
                        <div class="exercise-result" id="res_comp_1"></div>
                    </div>
                </div>

                <div class="exercise">
                    <h4>üèãÔ∏è Exercise: Strict vs Loose</h4>
                    <p style="color:var(--text2); margin-bottom:12px;">Log the result of <code>100 === "100"</code> and <code>100 == "100"</code>. Which is true?</p>
                    <div class="playground">
                        <textarea id="ex_comp_2">// Compare using both === and ==
console.log(100 === "100");
console.log(100 == "100");
</textarea>
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="checkExercise('ex_comp_2', 'res_comp_2', (code, result, output) => code.includes('===') && code.includes('==') && output.length >= 2)">Check Answer ‚úì</button>
                        </div>
                        <div class="exercise-result" id="res_comp_2"></div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="comp-quiz">
                <span class="phase-badge phase-quiz">Quiz Time!</span>
                <p style="color:var(--text2); margin-bottom:20px;">Score at least 70% to complete this topic! üèÜ</p>
                <div id="quiz-comp"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-outline" onclick="navigateTo(2)">‚Üê Assignment</button>
                <button class="btn btn-primary" onclick="navigateTo(4)">Next: Logical ‚Üí</button>
            </div>
        </div>
    `;

    window.quizData_3 = [
        {
            question: 'What does <code>5 === "5"</code> return?',
            options: ['true', 'false', 'undefined', 'error'],
            correct: 1,
            explanation: '=== checks both value AND type. 5 is a number, "5" is a string ‚Äî different types, so false.'
        },
        {
            question: 'What does <code>5 == "5"</code> return?',
            options: ['true', 'false', 'undefined', 'null'],
            correct: 0,
            explanation: '== converts types before comparing. "5" becomes the number 5, so 5 == 5 is true.'
        },
        {
            question: 'What does <code>10 !== 10</code> return?',
            options: ['true', 'false'],
            correct: 1,
            explanation: '10 and 10 are the same value and same type, so they ARE equal. !== asks "are they NOT equal?" ‚Üí false.'
        },
        {
            question: 'Which should you always use for equality?',
            options: ['==', '===', '=', '!='],
            correct: 1,
            explanation: 'Always use === (strict equality). It prevents bugs from unexpected type conversions.'
        },
        {
            question: 'What does <code>null == undefined</code> return?',
            options: ['true', 'false', 'error', 'null'],
            correct: 0,
            explanation: 'This is a special case in JavaScript: null == undefined is true, but null === undefined is false.'
        }
    ];

    const quizTab = document.querySelector('[onclick*="comp-quiz"]');
    if (quizTab) {
        quizTab.addEventListener('click', () => {
            setTimeout(() => createQuiz('quiz-comp', quizData_3, 3), 100);
        }, { once: true });
    }
}

// ============== RENDER: LOGICAL ==============
function renderLogical() {
    const main = document.getElementById('mainContent');
    main.innerHTML = `
        <div class="section active">
            <div class="section-header">
                <span class="section-emoji">üîó</span>
                <h2 class="section-title">Logical Operators</h2>
                <p class="section-subtitle">Combine conditions like a logic master!</p>
            </div>

            <div class="tab-container">
                <button class="tab active" onclick="switchTab(this, 'logic-learn')">üìñ Learn</button>
                <button class="tab" onclick="switchTab(this, 'logic-examples')">üí° Examples</button>
                <button class="tab" onclick="switchTab(this, 'logic-exercises')">üèãÔ∏è Exercises</button>
                <button class="tab" onclick="switchTab(this, 'logic-quiz')">üß™ Quiz</button>
            </div>

            <div class="tab-content active" id="logic-learn">
                <span class="phase-badge phase-learn">Learn</span>

                <div class="analogy">
                    <div class="title">üé≠ Real Life Analogy</div>
                    <p><strong>AND (&&):</strong> "I'll go to the party IF I finish homework <strong>AND</strong> my mom says yes." Both must be true!<br><br>
                    <strong>OR (||):</strong> "I'll eat pizza <strong>OR</strong> burgers." At least one must be available.<br><br>
                    <strong>NOT (!):</strong> "I'm <strong>NOT</strong> tired" flips tired(true) to false.</p>
                </div>

                <div class="card">
                    <h3>The 3 Logical Operators</h3>
                    <table class="op-table">
                        <tr><th>Operator</th><th>Name</th><th>Description</th><th>Example</th></tr>
                        <tr><td>&&</td><td>AND</td><td>Both must be true</td><td>true && true ‚Üí true</td></tr>
                        <tr><td>||</td><td>OR</td><td>At least one must be true</td><td>false || true ‚Üí true</td></tr>
                        <tr><td>!</td><td>NOT</td><td>Flips true‚Üîfalse</td><td>!true ‚Üí false</td></tr>
                    </table>
                </div>

                <div class="card">
                    <h3>üßÆ Truth Tables</h3>
                    <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:16px;">
                        <div>
                            <h4 style="color:var(--blue); margin-bottom:8px;">AND (&&)</h4>
                            <table class="op-table">
                                <tr><td>true && true</td><td style="color:var(--green);">true</td></tr>
                                <tr><td>true && false</td><td style="color:var(--accent);">false</td></tr>
                                <tr><td>false && true</td><td style="color:var(--accent);">false</td></tr>
                                <tr><td>false && false</td><td style="color:var(--accent);">false</td></tr>
                            </table>
                        </div>
                        <div>
                            <h4 style="color:var(--purple); margin-bottom:8px;">OR (||)</h4>
                            <table class="op-table">
                                <tr><td>true || true</td><td style="color:var(--green);">true</td></tr>
                                <tr><td>true || false</td><td style="color:var(--green);">true</td></tr>
                                <tr><td>false || true</td><td style="color:var(--green);">true</td></tr>
                                <tr><td>false || false</td><td style="color:var(--accent);">false</td></tr>
                            </table>
                        </div>
                        <div>
                            <h4 style="color:var(--yellow); margin-bottom:8px;">NOT (!)</h4>
                            <table class="op-table">
                                <tr><td>!true</td><td style="color:var(--accent);">false</td></tr>
                                <tr><td>!false</td><td style="color:var(--green);">true</td></tr>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>üî• Nullish Coalescing (??) ‚Äî Bonus!</h3>
                    <p>Returns the right side only if the left side is <code>null</code> or <code>undefined</code>:</p>
                    <div class="code-block">
<span class="keyword">let</span> <span class="variable">name</span> = <span class="keyword">null</span>;
<span class="keyword">let</span> <span class="variable">displayName</span> = <span class="variable">name</span> ?? <span class="string">"Guest"</span>;
<span class="line-comment">// displayName = "Guest" (because name is null)</span>

<span class="keyword">let</span> <span class="variable">score</span> = <span class="number">0</span>;
<span class="keyword">let</span> <span class="variable">display</span> = <span class="variable">score</span> ?? <span class="number">100</span>;
<span class="line-comment">// display = 0 (0 is NOT null/undefined, so it stays!)</span>
<span class="line-comment">// Compare with ||: score || 100 would give 100 (because 0 is falsy)</span>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="logic-examples">
                <span class="phase-badge phase-example">Real-World Examples</span>

                <div class="card">
                    <h3>üîê Login Validator</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('logic_ex1', 'logic_out1')">‚ñ∂ Run</button>
                        <textarea id="logic_ex1" style="width:100%;min-height:140px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let username = "admin";
let password = "secret123";
let isAdmin = true;

// AND: Both username AND password must be correct
let loginSuccess = (username === "admin") && (password === "secret123");
console.log("Login successful?", loginSuccess);

// OR: User is admin OR has special access
let hasAccess = isAdmin || (username === "superuser");
console.log("Has access?", hasAccess);

// NOT: Flip it
let isLoggedOut = !loginSuccess;
console.log("Is logged out?", isLoggedOut);</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="logic_out1"></div>
                </div>

                <div class="card">
                    <h3>üõçÔ∏è Discount Eligibility</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('logic_ex2', 'logic_out2')">‚ñ∂ Run</button>
                        <textarea id="logic_ex2" style="width:100%;min-height:140px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let age = 25;
let isMember = true;
let purchaseAmount = 75;

// Student discount: age < 26 AND is a member
let studentDiscount = (age < 26) && isMember;
console.log("Gets student discount?", studentDiscount);

// Free shipping: member OR spends over $50
let freeShipping = isMember || (purchaseAmount > 50);
console.log("Gets free shipping?", freeShipping);

// Nullish coalescing for default values
let couponCode = null;
let appliedCoupon = couponCode ?? "NO_COUPON";
console.log("Applied coupon:", appliedCoupon);</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="logic_out2"></div>
                </div>
            </div>

            <div class="tab-content" id="logic-exercises">
                <span class="phase-badge phase-exercise">Practice Exercises</span>

                <div class="exercise">
                    <h4>üèãÔ∏è Exercise: Theme Park Entry</h4>
                    <p style="color:var(--text2); margin-bottom:12px;">A person can enter if they are at least 10 years old AND shorter than 200cm. Create variables <code>age = 12</code> and <code>height = 150</code>, then log whether they can enter using <code>&&</code>.</p>
                    <div class="playground">
                        <textarea id="ex_logic_1">let age = 12;
let height = 150;
// Check: age >= 10 AND height < 200
// Log the result
</textarea>
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="checkExercise('ex_logic_1', 'res_logic_1', (code, result, output) => code.includes('&&') && output.some(o => o.includes('true')))">Check Answer ‚úì</button>
                        </div>
                        <div class="exercise-result" id="res_logic_1"></div>
                    </div>
                </div>

                <div class="exercise">
                    <h4>üèãÔ∏è Exercise: NOT Operator</h4>
                    <p style="color:var(--text2); margin-bottom:12px;">Create a variable <code>isRaining = true</code>. Use the NOT operator to create <code>canGoOutside</code> and log it (should be false).</p>
                    <div class="playground">
                        <textarea id="ex_logic_2">let isRaining = true;
// Create canGoOutside using !
// Log it
</textarea>
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="checkExercise('ex_logic_2', 'res_logic_2', (code, result, output) => code.includes('!') && output.some(o => o.includes('false')))">Check Answer ‚úì</button>
                        </div>
                        <div class="exercise-result" id="res_logic_2"></div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="logic-quiz">
                <span class="phase-badge phase-quiz">Quiz Time!</span>
                <p style="color:var(--text2); margin-bottom:20px;">Score at least 70% to complete this topic! üèÜ</p>
                <div id="quiz-logic"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-outline" onclick="navigateTo(3)">‚Üê Comparison</button>
                <button class="btn btn-primary" onclick="navigateTo(5)">Next: String ‚Üí</button>
            </div>
        </div>
    `;

    window.quizData_4 = [
        {
            question: 'What does <code>true && false</code> return?',
            options: ['true', 'false', 'undefined', 'null'],
            correct: 1,
            explanation: 'AND (&&) requires BOTH sides to be true. Since one is false, the result is false.'
        },
        {
            question: 'What does <code>false || true</code> return?',
            options: ['false', 'true', 'undefined', 'error'],
            correct: 1,
            explanation: 'OR (||) returns true if at least ONE side is true. Since the right side is true, result is true.'
        },
        {
            question: 'What does <code>!false</code> return?',
            options: ['false', 'true', '0', '1'],
            correct: 1,
            explanation: 'NOT (!) flips the value. !false = true.'
        },
        {
            question: 'What does <code>null ?? "hello"</code> return?',
            options: ['null', '"hello"', 'undefined', 'false'],
            correct: 1,
            explanation: '?? returns the right side when the left side is null or undefined. Since null is null, result is "hello".'
        },
        {
            question: 'What does <code>(5 > 3) && (2 < 1)</code> return?',
            options: ['true', 'false'],
            correct: 1,
            explanation: '5 > 3 is true, but 2 < 1 is false. true && false = false. Both must be true for AND.'
        }
    ];

    const quizTab = document.querySelector('[onclick*="logic-quiz"]');
    if (quizTab) {
        quizTab.addEventListener('click', () => {
            setTimeout(() => createQuiz('quiz-logic', quizData_4, 4), 100);
        }, { once: true });
    }
}

// ============== RENDER: STRING ==============
function renderString() {
    const main = document.getElementById('mainContent');
    main.innerHTML = `
        <div class="section active">
            <div class="section-header">
                <span class="section-emoji">‚úçÔ∏è</span>
                <h2 class="section-title">String Operators</h2>
                <p class="section-subtitle">Combine and work with text like a pro!</p>
            </div>

            <div class="tab-container">
                <button class="tab active" onclick="switchTab(this, 'str-learn')">üìñ Learn</button>
                <button class="tab" onclick="switchTab(this, 'str-examples')">üí° Examples</button>
                <button class="tab" onclick="switchTab(this, 'str-exercises')">üèãÔ∏è Exercises</button>
                <button class="tab" onclick="switchTab(this, 'str-quiz')">üß™ Quiz</button>
            </div>

            <div class="tab-content active" id="str-learn">
                <span class="phase-badge phase-learn">Learn</span>

                <div class="analogy">
                    <div class="title">üé≠ Real Life Analogy</div>
                    <p>String concatenation is like <strong>linking train cars together</strong>. "Hello" + " " + "World" connects three "cars" into one train: "Hello World". Template literals (backticks) are like <strong>Mad Libs</strong> ‚Äî you leave blanks and fill them in!</p>
                </div>

                <div class="card">
                    <h3>String Concatenation (+)</h3>
                    <p>The <code>+</code> operator joins strings together:</p>
                    <div class="visual-demo">
                        <div class="demo-box" style="font-size:0.9rem;">"Hello"</div>
                        <div class="demo-operator">+</div>
                        <div class="demo-box" style="font-size:0.9rem;">" World"</div>
                        <div class="demo-operator">=</div>
                        <div class="demo-result" style="font-size:0.9rem;">"Hello World"</div>
                    </div>

                    <div class="tip">
                        <div class="title">‚ö†Ô∏è Number + String Trap!</div>
                        <p style="color:var(--text2); font-size:0.9rem;">When you use + with a string and a number, JavaScript converts the number to a string: <code>5 + "3"</code> = <code>"53"</code> (not 8!)</p>
                    </div>
                </div>

                <div class="card">
                    <h3>Template Literals (Modern Way!)</h3>
                    <p>Use backticks (<code>\`\`</code>) and <code>\${}</code> for cleaner string building:</p>
                    <div class="code-block">
<span class="keyword">let</span> <span class="variable">name</span> = <span class="string">"Sarah"</span>;
<span class="keyword">let</span> <span class="variable">age</span> = <span class="number">25</span>;

<span class="line-comment">// Old way (messy):</span>
<span class="keyword">let</span> <span class="variable">msg1</span> = <span class="string">"Hi, I'm "</span> + <span class="variable">name</span> + <span class="string">" and I'm "</span> + <span class="variable">age</span> + <span class="string">" years old."</span>;

<span class="line-comment">// New way (clean!):</span>
<span class="keyword">let</span> <span class="variable">msg2</span> = <span class="string">\`Hi, I'm \${name} and I'm \${age} years old.\`</span>;
                    </div>
                </div>
            </div>

            <div class="tab-content" id="str-examples">
                <span class="phase-badge phase-example">Real-World Examples</span>

                <div class="card">
                    <h3>üìß Email Builder</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('str_ex1', 'str_out1')">‚ñ∂ Run</button>
                        <textarea id="str_ex1" style="width:100%;min-height:150px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let firstName = "John";
let lastName = "Doe";
let company = "TechCorp";

// Concatenation
let email = firstName.toLowerCase() + "." + lastName.toLowerCase() + "@" + company.toLowerCase() + ".com";
console.log("Email:", email);

// Template literal version
let greeting = \`Dear \${firstName} \${lastName},

Welcome to \${company}! We're glad to have you.

Best regards,
The \${company} Team\`;

console.log(greeting);</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="str_out1"></div>
                </div>

                <div class="card">
                    <h3>üé® HTML Generator</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('str_ex2', 'str_out2')">‚ñ∂ Run</button>
                        <textarea id="str_ex2" style="width:100%;min-height:120px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let product = "JavaScript Course";
let price = 29.99;
let rating = 4.8;

let html = \`<div class="product">
  <h2>\${product}</h2>
  <p>Price: $\${price}</p>
  <p>Rating: \${"‚≠ê".repeat(Math.round(rating))} (\${rating}/5)</p>
</div>\`;

console.log(html);</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="str_out2"></div>
                </div>

                <div class="card">
                    <h3>‚ö†Ô∏è The + Trap Explained</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('str_ex3', 'str_out3')">‚ñ∂ Run</button>
                        <textarea id="str_ex3" style="width:100%;min-height:120px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">console.log(5 + 3);       // 8 (both numbers ‚Üí addition)
console.log("5" + 3);     // "53" (string + number ‚Üí concatenation!)
console.log(5 + "3");     // "53" (number + string ‚Üí concatenation!)
console.log("5" + "3");   // "53" (both strings ‚Üí concatenation)
console.log(5 - "3");     // 2 (- only works with numbers, so "3" ‚Üí 3)
console.log("5" * "3");   // 15 (* forces number conversion)

// How to fix: convert string to number first!
console.log(5 + Number("3"));  // 8</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="str_out3"></div>
                </div>
            </div>

            <div class="tab-content" id="str-exercises">
                <span class="phase-badge phase-exercise">Practice Exercises</span>

                <div class="exercise">
                    <h4>üèãÔ∏è Exercise: Profile Card</h4>
                    <p style="color:var(--text2); margin-bottom:12px;">Use template literals to create a string: "Name: Alex, Age: 30, City: New York" and log it.</p>
                    <div class="playground">
                        <textarea id="ex_str_1">let name = "Alex";
let age = 30;
let city = "New York";
// Use template literal (\`\`) to combine and log
</textarea>
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="checkExercise('ex_str_1', 'res_str_1', (code, result, output) => code.includes('${') && output.some(o => o.includes('Alex') && o.includes('30')))">Check Answer ‚úì</button>
                        </div>
                        <div class="exercise-result" id="res_str_1"></div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="str-quiz">
                <span class="phase-badge phase-quiz">Quiz Time!</span>
                <p style="color:var(--text2); margin-bottom:20px;">Score at least 70% to complete this topic! üèÜ</p>
                <div id="quiz-str"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-outline" onclick="navigateTo(4)">‚Üê Logical</button>
                <button class="btn btn-primary" onclick="navigateTo(6)">Next: Type Operators ‚Üí</button>
            </div>
        </div>
    `;

    window.quizData_5 = [
        {
            question: 'What does <code>"Hello" + " " + "World"</code> return?',
            options: ['"HelloWorld"', '"Hello World"', 'Error', 'undefined'],
            correct: 1,
            explanation: 'The + operator concatenates (joins) strings. "Hello" + " " + "World" = "Hello World".'
        },
        {
            question: 'What does <code>5 + "3"</code> return?',
            options: ['8', '"53"', '"8"', 'Error'],
            correct: 1,
            explanation: 'When + has a string operand, it converts everything to strings. 5 becomes "5", then "5" + "3" = "53".'
        },
        {
            question: 'What does <code>`I am ${10 + 5} years old`</code> return?',
            options: ['"I am ${10 + 5} years old"', '"I am 10 + 5 years old"', '"I am 15 years old"', 'Error'],
            correct: 2,
            explanation: 'Inside ${}, expressions are evaluated. 10 + 5 = 15, so the result is "I am 15 years old".'
        },
        {
            question: 'What does <code>"5" - 3</code> return?',
            options: ['"53"', '2', '"2"', 'Error'],
            correct: 1,
            explanation: 'The - operator only works with numbers, so "5" is converted to 5. Then 5 - 3 = 2.'
        }
    ];

    const quizTab = document.querySelector('[onclick*="str-quiz"]');
    if (quizTab) {
        quizTab.addEventListener('click', () => {
            setTimeout(() => createQuiz('quiz-str', quizData_5, 5), 100);
        }, { once: true });
    }
}

// ============== RENDER: TYPE ==============
function renderType() {
    const main = document.getElementById('mainContent');
    main.innerHTML = `
        <div class="section active">
            <div class="section-header">
                <span class="section-emoji">üè∑Ô∏è</span>
                <h2 class="section-title">Type Operators</h2>
                <p class="section-subtitle">Discover and check the type of any value!</p>
            </div>

            <div class="tab-container">
                <button class="tab active" onclick="switchTab(this, 'type-learn')">üìñ Learn</button>
                <button class="tab" onclick="switchTab(this, 'type-examples')">üí° Examples</button>
                <button class="tab" onclick="switchTab(this, 'type-exercises')">üèãÔ∏è Exercises</button>
                <button class="tab" onclick="switchTab(this, 'type-quiz')">üß™ Quiz</button>
            </div>

            <div class="tab-content active" id="type-learn">
                <span class="phase-badge phase-learn">Learn</span>

                <div class="analogy">
                    <div class="title">üé≠ Real Life Analogy</div>
                    <p><strong>typeof</strong> is like asking "What kind of thing is this?" ‚Äî Is it a book? A number? A name? <br><br><strong>instanceof</strong> is like checking a family tree: "Is this a Dog? Is it an Animal?" It checks if something was created from a specific blueprint (class/constructor).</p>
                </div>

                <div class="card">
                    <h3>typeof ‚Äî Check the Type</h3>
                    <table class="op-table">
                        <tr><th>Expression</th><th>Result</th></tr>
                        <tr><td>typeof 42</td><td>"number"</td></tr>
                        <tr><td>typeof "hello"</td><td>"string"</td></tr>
                        <tr><td>typeof true</td><td>"boolean"</td></tr>
                        <tr><td>typeof undefined</td><td>"undefined"</td></tr>
                        <tr><td>typeof null</td><td>"object" ‚ö†Ô∏è (this is a JS bug!)</td></tr>
                        <tr><td>typeof {}</td><td>"object"</td></tr>
                        <tr><td>typeof []</td><td>"object" (arrays are objects!)</td></tr>
                        <tr><td>typeof function(){}</td><td>"function"</td></tr>
                    </table>

                    <div class="tip">
                        <div class="title">‚ö†Ô∏è Famous JavaScript Bug!</div>
                        <p style="color:var(--text2); font-size:0.9rem;"><code>typeof null</code> returns <code>"object"</code> ‚Äî this is a bug from 1995 that can never be fixed because too much code depends on it! To check for null, use <code>=== null</code> instead.</p>
                    </div>
                </div>

                <div class="card">
                    <h3>instanceof ‚Äî Check the Blueprint</h3>
                    <div class="code-block">
<span class="keyword">let</span> <span class="variable">today</span> = <span class="keyword">new</span> <span class="function">Date</span>();
<span class="function">console.log</span>(<span class="variable">today</span> <span class="keyword">instanceof</span> <span class="function">Date</span>);    <span class="line-comment">// true</span>
<span class="function">console.log</span>(<span class="variable">today</span> <span class="keyword">instanceof</span> <span class="function">Object</span>);  <span class="line-comment">// true (Date extends Object)</span>

<span class="keyword">let</span> <span class="variable">nums</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];
<span class="function">console.log</span>(<span class="variable">nums</span> <span class="keyword">instanceof</span> <span class="function">Array</span>);   <span class="line-comment">// true</span>
<span class="function">console.log</span>(<span class="variable">nums</span> <span class="keyword">instanceof</span> <span class="function">Object</span>);  <span class="line-comment">// true</span>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="type-examples">
                <span class="phase-badge phase-example">Real-World Examples</span>

                <div class="card">
                    <h3>üîç Type Checking in Action</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('type_ex1', 'type_out1')">‚ñ∂ Run</button>
                        <textarea id="type_ex1" style="width:100%;min-height:200px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">// typeof with all types
console.log("--- typeof examples ---");
console.log(typeof 42);            // "number"
console.log(typeof 3.14);          // "number"
console.log(typeof "hello");       // "string"
console.log(typeof true);          // "boolean"
console.log(typeof undefined);     // "undefined"
console.log(typeof null);          // "object" (bug!)
console.log(typeof {name: "Jo"});  // "object"
console.log(typeof [1, 2, 3]);     // "object"
console.log(typeof function(){}); // "function"
console.log(typeof Symbol());      // "symbol"
console.log(typeof 10n);           // "bigint"

// How to properly check for an array:
let arr = [1, 2, 3];
console.log("\\n--- Array check ---");
console.log("typeof arr:", typeof arr);           // "object" (not helpful!)
console.log("Array.isArray(arr):", Array.isArray(arr));  // true (the right way!)</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="type_out1"></div>
                </div>

                <div class="card">
                    <h3>üõ°Ô∏è Safe Function with Type Checking</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('type_ex2', 'type_out2')">‚ñ∂ Run</button>
                        <textarea id="type_ex2" style="width:100%;min-height:160px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">function safeAdd(a, b) {
    if (typeof a !== "number" || typeof b !== "number") {
        return "Error: Both arguments must be numbers!";
    }
    return a + b;
}

console.log(safeAdd(5, 3));       // 8
console.log(safeAdd("5", 3));     // Error message
console.log(safeAdd(10, "abc"));  // Error message
console.log(safeAdd(7, 8));       // 15</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="type_out2"></div>
                </div>
            </div>

            <div class="tab-content" id="type-exercises">
                <span class="phase-badge phase-exercise">Practice Exercises</span>

                <div class="exercise">
                    <h4>üèãÔ∏è Exercise: Type Detective</h4>
                    <p style="color:var(--text2); margin-bottom:12px;">Log the typeof for each: <code>42</code>, <code>"hello"</code>, <code>true</code>, <code>null</code>, <code>undefined</code>.</p>
                    <div class="playground">
                        <textarea id="ex_type_1">// Log typeof for each value
console.log(typeof 42);
// Add the rest...
</textarea>
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="checkExercise('ex_type_1', 'res_type_1', (code, result, output) => output.length >= 5 && code.includes('typeof'))">Check Answer ‚úì</button>
                        </div>
                        <div class="exercise-result" id="res_type_1"></div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="type-quiz">
                <span class="phase-badge phase-quiz">Quiz Time!</span>
                <p style="color:var(--text2); margin-bottom:20px;">Score at least 70% to complete this topic! üèÜ</p>
                <div id="quiz-type"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-outline" onclick="navigateTo(5)">‚Üê String</button>
                <button class="btn btn-primary" onclick="navigateTo(7)">Next: Ternary & Special ‚Üí</button>
            </div>
        </div>
    `;

    window.quizData_6 = [
        {
            question: 'What does <code>typeof "hello"</code> return?',
            options: ['"text"', '"string"', '"String"', '"word"'],
            correct: 1,
            explanation: 'typeof returns "string" (lowercase) for any string value.'
        },
        {
            question: 'What does <code>typeof null</code> return?',
            options: ['"null"', '"undefined"', '"object"', '"nothing"'],
            correct: 2,
            explanation: 'This is a famous JavaScript bug! typeof null returns "object" instead of "null".'
        },
        {
            question: 'What does <code>typeof [1, 2, 3]</code> return?',
            options: ['"array"', '"object"', '"list"', '"Array"'],
            correct: 1,
            explanation: 'Arrays are actually objects in JS. typeof returns "object". Use Array.isArray() to check for arrays.'
        },
        {
            question: 'How do you properly check if something is an array?',
            options: ['typeof x === "array"', 'x instanceof Array', 'Array.isArray(x)', 'Both B and C'],
            correct: 3,
            explanation: 'Both instanceof Array and Array.isArray() work, but Array.isArray() is the most reliable method.'
        }
    ];

    const quizTab = document.querySelector('[onclick*="type-quiz"]');
    if (quizTab) {
        quizTab.addEventListener('click', () => {
            setTimeout(() => createQuiz('quiz-type', quizData_6, 6), 100);
        }, { once: true });
    }
}

// ============== RENDER: TERNARY & SPECIAL ==============
function renderTernary() {
    const main = document.getElementById('mainContent');
    main.innerHTML = `
        <div class="section active">
            <div class="section-header">
                <span class="section-emoji">üéØ</span>
                <h2 class="section-title">Ternary & Special Operators</h2>
                <p class="section-subtitle">The one-liner decision maker and more special powers!</p>
            </div>

            <div class="tab-container">
                <button class="tab active" onclick="switchTab(this, 'tern-learn')">üìñ Learn</button>
                <button class="tab" onclick="switchTab(this, 'tern-examples')">üí° Examples</button>
                <button class="tab" onclick="switchTab(this, 'tern-exercises')">üèãÔ∏è Exercises</button>
                <button class="tab" onclick="switchTab(this, 'tern-quiz')">üß™ Quiz</button>
            </div>

            <div class="tab-content active" id="tern-learn">
                <span class="phase-badge phase-learn">Learn</span>

                <div class="analogy">
                    <div class="title">üé≠ Real Life Analogy</div>
                    <p>The ternary operator is like a <strong>quick decision</strong>: "Is it raining? If yes ‚Üí take umbrella. If no ‚Üí wear sunglasses." One question, two possible outcomes!<br><br>
                    The <strong>optional chaining (?.) </strong> is like carefully opening nested boxes: "Open the box... IF there's something inside, open the next box... IF there's something inside..."</p>
                </div>

                <div class="card">
                    <h3>Ternary Operator (? :)</h3>
                    <p>The only operator that takes <strong>three</strong> operands ‚Äî a shortcut for if/else:</p>
                    <div class="code-block">
<span class="line-comment">// Syntax: condition ? valueIfTrue : valueIfFalse</span>

<span class="keyword">let</span> <span class="variable">age</span> = <span class="number">20</span>;
<span class="keyword">let</span> <span class="variable">status</span> = <span class="variable">age</span> >= <span class="number">18</span> ? <span class="string">"Adult"</span> : <span class="string">"Minor"</span>;
<span class="line-comment">// status = "Adult"</span>

<span class="line-comment">// Same thing with if/else (longer):</span>
<span class="keyword">let</span> <span class="variable">status2</span>;
<span class="keyword">if</span> (<span class="variable">age</span> >= <span class="number">18</span>) {
    <span class="variable">status2</span> = <span class="string">"Adult"</span>;
} <span class="keyword">else</span> {
    <span class="variable">status2</span> = <span class="string">"Minor"</span>;
}
                    </div>
                </div>

                <div class="card">
                    <h3>Optional Chaining (?.)</h3>
                    <p>Safely access nested properties without crashing:</p>
                    <div class="code-block">
<span class="keyword">let</span> <span class="variable">user</span> = {
    <span class="variable">name</span>: <span class="string">"Alice"</span>,
    <span class="variable">address</span>: {
        <span class="variable">city</span>: <span class="string">"NYC"</span>
    }
};

<span class="line-comment">// Without ?. ‚Äî this would CRASH if address didn't exist!</span>
<span class="line-comment">// let zip = user.address.zipCode; // undefined (ok)</span>
<span class="line-comment">// let zip = user.location.zipCode; // ERROR! location is undefined</span>

<span class="line-comment">// With ?. ‚Äî safe!</span>
<span class="keyword">let</span> <span class="variable">zip</span> = <span class="variable">user</span>.<span class="variable">location</span>?.<span class="variable">zipCode</span>; <span class="line-comment">// undefined (no crash!)</span>
                    </div>
                </div>

                <div class="card">
                    <h3>Spread Operator (...)</h3>
                    <p>Expands arrays or objects ‚Äî like "unpacking" a suitcase:</p>
                    <div class="code-block">
<span class="line-comment">// Spread arrays</span>
<span class="keyword">let</span> <span class="variable">fruits</span> = [<span class="string">"apple"</span>, <span class="string">"banana"</span>];
<span class="keyword">let</span> <span class="variable">moreFruits</span> = [...<span class="variable">fruits</span>, <span class="string">"cherry"</span>]; <span class="line-comment">// ["apple", "banana", "cherry"]</span>

<span class="line-comment">// Spread objects</span>
<span class="keyword">let</span> <span class="variable">defaults</span> = { <span class="variable">theme</span>: <span class="string">"dark"</span>, <span class="variable">lang</span>: <span class="string">"en"</span> };
<span class="keyword">let</span> <span class="variable">settings</span> = { ...<span class="variable">defaults</span>, <span class="variable">lang</span>: <span class="string">"fr"</span> }; <span class="line-comment">// { theme: "dark", lang: "fr" }</span>
                    </div>
                </div>

                <div class="card">
                    <h3>Comma Operator (,)</h3>
                    <p>Evaluates multiple expressions, returns the last one:</p>
                    <div class="code-block">
<span class="keyword">let</span> <span class="variable">x</span> = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="line-comment">// x = 3 (returns the last value)</span>

<span class="line-comment">// Commonly used in for loops:</span>
<span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>, <span class="variable">j</span> = <span class="number">10</span>; <span class="variable">i</span> < <span class="number">5</span>; <span class="variable">i</span>++, <span class="variable">j</span>--) {
    <span class="line-comment">// i goes up, j goes down</span>
}
                    </div>
                </div>
            </div>

            <div class="tab-content" id="tern-examples">
                <span class="phase-badge phase-example">Real-World Examples</span>

                <div class="card">
                    <h3>üé´ Ticket Pricing</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('tern_ex1', 'tern_out1')">‚ñ∂ Run</button>
                        <textarea id="tern_ex1" style="width:100%;min-height:160px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let age = 15;

// Simple ternary
let ticketType = age >= 18 ? "Adult" : "Child";
console.log("Ticket type:", ticketType);

// Nested ternary (use sparingly!)
let price = age < 5 ? 0 : age < 18 ? 10 : age > 65 ? 12 : 20;
console.log("Price: $" + price);

// Better alternative: show both approaches
let greeting = new Date().getHours() < 12 ? "Good morning!" : "Good afternoon!";
console.log(greeting);

// Ternary in template literals
console.log(\`You are \${age >= 18 ? "eligible" : "not eligible"} to vote.\`);</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="tern_out1"></div>
                </div>

                <div class="card">
                    <h3>üîó Optional Chaining in Practice</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('tern_ex2', 'tern_out2')">‚ñ∂ Run</button>
                        <textarea id="tern_ex2" style="width:100%;min-height:170px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">let user1 = {
    name: "Alice",
    address: { city: "NYC", zip: "10001" }
};

let user2 = {
    name: "Bob"
    // No address!
};

// Safe access with ?.
console.log("User1 city:", user1.address?.city);       // "NYC"
console.log("User2 city:", user2.address?.city);       // undefined (no crash!)
console.log("User2 zip:", user2.address?.zip ?? "N/A"); // "N/A" (combined with ??)

// Optional chaining with methods
let str = "hello";
console.log(str.toUpperCase?.());  // "HELLO"
console.log(str.nonExistent?.());  // undefined</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="tern_out2"></div>
                </div>

                <div class="card">
                    <h3>üì¶ Spread Operator Magic</h3>
                    <div class="code-block" style="position:relative;">
                        <button class="run-btn" onclick="runCode('tern_ex3', 'tern_out3')">‚ñ∂ Run</button>
                        <textarea id="tern_ex3" style="width:100%;min-height:160px;background:transparent;border:none;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.85rem;resize:vertical;outline:none;">// Merge arrays
let team1 = ["Alice", "Bob"];
let team2 = ["Charlie", "Diana"];
let allPlayers = [...team1, ...team2];
console.log("All players:", allPlayers);

// Clone an array (not a reference!)
let original = [1, 2, 3];
let copy = [...original];
copy.push(4);
console.log("Original:", original);  // [1, 2, 3] - unchanged!
console.log("Copy:", copy);          // [1, 2, 3, 4]

// Merge objects with overrides
let defaults = { theme: "light", fontSize: 14, lang: "en" };
let userPrefs = { theme: "dark", fontSize: 18 };
let finalSettings = { ...defaults, ...userPrefs };
console.log("Settings:", JSON.stringify(finalSettings));</textarea>
                    </div>
                    <div class="output-label">Output:</div>
                    <div class="output-block" id="tern_out3"></div>
                </div>
            </div>

            <div class="tab-content" id="tern-exercises">
                <span class="phase-badge phase-exercise">Practice Exercises</span>

                <div class="exercise">
                    <h4>üèãÔ∏è Exercise: Pass or Fail</h4>
                    <p style="color:var(--text2); margin-bottom:12px;">Use the ternary operator: if <code>score</code> is 75 or above, log "Pass", otherwise log "Fail". Set score to 82.</p>
                    <div class="playground">
                        <textarea id="ex_tern_1">let score = 82;
// Use ternary operator and log the result
</textarea>
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="checkExercise('ex_tern_1', 'res_tern_1', (code, result, output) => code.includes('?') && code.includes(':') && output.some(o => o.includes('Pass')))">Check Answer ‚úì</button>
                        </div>
                        <div class="exercise-result" id="res_tern_1"></div>
                    </div>
                </div>

                <div class="exercise">
                    <h4>üèãÔ∏è Exercise: Safe Access</h4>
                    <p style="color:var(--text2); margin-bottom:12px;">Given a user object without an address, safely try to access <code>user.address.city</code> using optional chaining. Log the result (should be undefined, not an error!).</p>
                    <div class="playground">
                        <textarea id="ex_tern_2">let user = { name: "Sam" };
// Safely access address.city using ?.
// Log the result
</textarea>
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="checkExercise('ex_tern_2', 'res_tern_2', (code, result, output) => code.includes('?.') && output.some(o => o.includes('undefined')))">Check Answer ‚úì</button>
                        </div>
                        <div class="exercise-result" id="res_tern_2"></div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="tern-quiz">
                <span class="phase-badge phase-quiz">Quiz Time!</span>
                <p style="color:var(--text2); margin-bottom:20px;">Score at least 70% to complete this topic! üèÜ</p>
                <div id="quiz-tern"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-outline" onclick="navigateTo(6)">‚Üê Type Operators</button>
                <button class="btn btn-primary" onclick="navigateTo(0)">üè† Back to Home</button>
            </div>
        </div>
    `;

    window.quizData_7 = [
        {
            question: 'What does <code>true ? "yes" : "no"</code> return?',
            options: ['"yes"', '"no"', 'true', 'undefined'],
            correct: 0,
            explanation: 'The condition is true, so the ternary returns the first value after ? which is "yes".'
        },
        {
            question: 'What does <code>let x = null; x?.name</code> return?',
            options: ['Error', 'null', 'undefined', '""'],
            correct: 2,
            explanation: 'Optional chaining (?.) returns undefined when the left side is null or undefined, instead of throwing an error.'
        },
        {
            question: 'What does <code>[...["a","b"], "c"]</code> return?',
            options: ['["a", "b", "c"]', '[["a","b"], "c"]', 'Error', '"abc"'],
            correct: 0,
            explanation: 'The spread operator (...) unpacks the array, so the result is a flat array ["a", "b", "c"].'
        },
        {
            question: 'What is <code>5 > 3 ? "big" : "small"</code>?',
            options: ['"small"', '"big"', 'true', '5'],
            correct: 1,
            explanation: '5 > 3 is true, so the ternary returns the first option: "big".'
        },
        {
            question: 'What does <code>{...{a:1, b:2}, b:3}</code> evaluate to?',
            options: ['{a:1, b:2}', '{a:1, b:3}', '{a:1, b:2, b:3}', 'Error'],
            correct: 1,
            explanation: 'When spreading objects, later properties override earlier ones. b:3 overrides b:2, resulting in {a:1, b:3}.'
        }
    ];

    const quizTab = document.querySelector('[onclick*="tern-quiz"]');
    if (quizTab) {
        quizTab.addEventListener('click', () => {
            setTimeout(() => createQuiz('quiz-tern', quizData_7, 7), 100);
        }, { once: true });
    }
}

// ============== TAB SWITCHING ==============
function switchTab(tabBtn, contentId) {
    // Deactivate all tabs and content in parent
    const container = tabBtn.closest('.section');
    container.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    container.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

    // Activate clicked tab
    tabBtn.classList.add('active');
    document.getElementById(contentId).classList.add('active');

    // Initialize quiz if needed
    if (contentId.includes('quiz')) {
        const quizDiv = document.getElementById(contentId).querySelector('[id^="quiz-"]');
        if (quizDiv && !quizDiv.hasChildNodes()) {
            const topicId = state.currentTopic;
            const quizData = window['quizData_' + topicId];
            if (quizData) {
                createQuiz(quizDiv.id, quizData, topicId);
            }
        }
    }
}

// ============== START APP ==============
init();
</script>
</body>
</html>