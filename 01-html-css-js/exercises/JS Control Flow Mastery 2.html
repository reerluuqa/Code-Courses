<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Master JavaScript Control Flow</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0d1117;
      --bg-secondary: #161b22;
      --card: #1c2128;
      --border: #30363d;
      --fg: #e6edf3;
      --muted: #8b949e;
      --accent: #00d9ff;
      --accent-glow: rgba(0, 217, 255, 0.3);
      --success: #3fb950;
      --error: #f85149;
      --warning: #d29922;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Space Grotesk', sans-serif;
      background: var(--bg);
      color: var(--fg);
      min-height: 100vh;
      overflow-x: hidden;
    }

    code, .code, .mono {
      font-family: 'JetBrains Mono', monospace;
    }

    .bg-gradient {
      background: 
        radial-gradient(ellipse at 20% 20%, rgba(0, 217, 255, 0.08) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 80%, rgba(139, 92, 246, 0.08) 0%, transparent 50%),
        var(--bg);
    }

    .code-block {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.25rem;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.875rem;
      line-height: 1.7;
      overflow-x: auto;
    }

    .code-editor {
      background: var(--bg);
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 1rem;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.875rem;
      color: var(--fg);
      width: 100%;
      min-height: 120px;
      resize: vertical;
      transition: border-color 0.2s;
    }

    .code-editor:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-glow);
    }

    .keyword { color: #ff7b72; }
    .string { color: #a5d6ff; }
    .number { color: #79c0ff; }
    .function { color: #d2a8ff; }
    .comment { color: var(--muted); font-style: italic; }
    .operator { color: #ff7b72; }
    .variable { color: #ffa657; }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent) 0%, #00b8d9 100%);
      color: var(--bg);
      font-weight: 600;
      padding: 0.875rem 2rem;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 4px 20px var(--accent-glow);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 30px var(--accent-glow);
    }

    .btn-primary:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: var(--card);
      color: var(--fg);
      font-weight: 500;
      padding: 0.75rem 1.5rem;
      border-radius: 10px;
      border: 1px solid var(--border);
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-secondary:hover {
      background: var(--border);
      border-color: var(--muted);
    }

    .progress-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--border);
      transition: all 0.3s;
    }

    .progress-dot.completed {
      background: var(--success);
      box-shadow: 0 0 10px rgba(63, 185, 80, 0.5);
    }

    .progress-dot.active {
      background: var(--accent);
      box-shadow: 0 0 10px var(--accent-glow);
      transform: scale(1.3);
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 1.5rem;
      transition: all 0.3s;
    }

    .card:hover {
      border-color: var(--muted);
    }

    .flowchart-box {
      background: var(--card);
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 1rem 1.5rem;
      text-align: center;
      transition: all 0.3s;
    }

    .flowchart-box.decision {
      transform: rotate(45deg);
      border-radius: 8px;
    }

    .flowchart-box.decision > * {
      transform: rotate(-45deg);
    }

    .flowchart-arrow {
      width: 2px;
      height: 30px;
      background: var(--muted);
      margin: 0 auto;
      position: relative;
    }

    .flowchart-arrow::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
      border-top: 8px solid var(--muted);
    }

    .quiz-option {
      background: var(--bg);
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 1rem 1.25rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .quiz-option:hover {
      border-color: var(--accent);
      background: rgba(0, 217, 255, 0.05);
    }

    .quiz-option.selected {
      border-color: var(--accent);
      background: rgba(0, 217, 255, 0.1);
    }

    .quiz-option.correct {
      border-color: var(--success);
      background: rgba(63, 185, 80, 0.15);
    }

    .quiz-option.incorrect {
      border-color: var(--error);
      background: rgba(248, 81, 73, 0.15);
    }

    .section {
      display: none;
      animation: fadeIn 0.4s ease-out;
    }

    .section.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .animate-pulse-slow {
      animation: pulse 2s ease-in-out infinite;
    }

    .output-box {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      min-height: 60px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.875rem;
    }

    .success-msg {
      color: var(--success);
    }

    .error-msg {
      color: var(--error);
    }

    .tab-btn {
      padding: 0.75rem 1.25rem;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      background: transparent;
      border: none;
      color: var(--muted);
      font-weight: 500;
    }

    .tab-btn:hover {
      color: var(--fg);
      background: var(--card);
    }

    .tab-btn.active {
      background: var(--accent);
      color: var(--bg);
    }

    .example-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      overflow: hidden;
      transition: all 0.3s;
    }

    .example-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    }

    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      pointer-events: none;
      z-index: 1000;
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
      }
    }

    .floating-particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: var(--accent);
      border-radius: 50%;
      opacity: 0.3;
      pointer-events: none;
    }
  </style>
</head>
<body class="bg-gradient">
  <!-- Header -->
  <header class="fixed top-0 left-0 right-0 z-50 bg-opacity-90 backdrop-blur-lg border-b border-[var(--border)]" style="background: rgba(13, 17, 23, 0.9);">
    <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--accent)] to-cyan-400 flex items-center justify-center">
          <svg class="w-6 h-6 text-[var(--bg)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
          </svg>
        </div>
        <span class="font-semibold text-lg">Control Flow Master</span>
      </div>
      <div class="flex items-center gap-2" id="progressDots"></div>
    </div>
  </header>

  <main class="pt-24 pb-16 px-6 max-w-5xl mx-auto">
    <!-- Welcome Section -->
    <section id="welcome" class="section active">
      <div class="text-center mb-12">
        <h1 class="text-5xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-[var(--accent)] via-cyan-300 to-[var(--accent)] bg-clip-text text-transparent">
          Master Control Flow
        </h1>
        <p class="text-xl text-[var(--muted)] max-w-2xl mx-auto mb-8">
          Learn how to control the flow of your JavaScript programs with conditions, loops, and more through interactive lessons and hands-on exercises.
        </p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4 mb-12">
        <div class="card text-center">
          <div class="text-3xl font-bold text-[var(--accent)] mb-2">4</div>
          <div class="text-[var(--muted)]">Topics</div>
        </div>
        <div class="card text-center">
          <div class="text-3xl font-bold text-[var(--accent)] mb-2">12</div>
          <div class="text-[var(--muted)]">Examples</div>
        </div>
        <div class="card text-center">
          <div class="text-3xl font-bold text-[var(--accent)] mb-2">8</div>
          <div class="text-[var(--muted)]">Exercises</div>
        </div>
        <div class="card text-center">
          <div class="text-3xl font-bold text-[var(--accent)] mb-2">4</div>
          <div class="text-[var(--muted)]">Quizzes</div>
        </div>
      </div>

      <div class="card mb-8">
        <h2 class="text-2xl font-semibold mb-4">What You'll Learn</h2>
        <div class="grid md:grid-cols-2 gap-4">
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-lg bg-[var(--accent)] bg-opacity-20 flex items-center justify-center flex-shrink-0 mt-0.5">
              <span class="text-[var(--accent)] font-bold">1</span>
            </div>
            <div>
              <h3 class="font-medium mb-1">If / Else Statements</h3>
              <p class="text-sm text-[var(--muted)]">Make decisions in your code based on conditions</p>
            </div>
          </div>
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-lg bg-[var(--accent)] bg-opacity-20 flex items-center justify-center flex-shrink-0 mt-0.5">
              <span class="text-[var(--accent)] font-bold">2</span>
            </div>
            <div>
              <h3 class="font-medium mb-1">Switch Statements</h3>
              <p class="text-sm text-[var(--muted)]">Handle multiple cases elegantly</p>
            </div>
          </div>
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-lg bg-[var(--accent)] bg-opacity-20 flex items-center justify-center flex-shrink-0 mt-0.5">
              <span class="text-[var(--accent)] font-bold">3</span>
            </div>
            <div>
              <h3 class="font-medium mb-1">For Loops</h3>
              <p class="text-sm text-[var(--muted)]">Repeat code a specific number of times</p>
            </div>
          </div>
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-lg bg-[var(--accent)] bg-opacity-20 flex items-center justify-center flex-shrink-0 mt-0.5">
              <span class="text-[var(--accent)] font-bold">4</span>
            </div>
            <div>
              <h3 class="font-medium mb-1">While Loops</h3>
              <p class="text-sm text-[var(--muted)]">Repeat code while a condition is true</p>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center">
        <button class="btn-primary text-lg" onclick="startLearning()">
          Start Learning
          <svg class="inline-block w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
          </svg>
        </button>
      </div>
    </section>

    <!-- Topic 1: If/Else -->
    <section id="ifelse-learn" class="section">
      <div class="flex items-center gap-2 mb-6">
        <span class="px-3 py-1 rounded-full bg-[var(--accent)] bg-opacity-20 text-[var(--accent)] text-sm font-medium">Topic 1 of 4</span>
      </div>
      
      <h2 class="text-4xl font-bold mb-4">If / Else Statements</h2>
      <p class="text-xl text-[var(--muted)] mb-8">The foundation of decision-making in code</p>

      <div class="card mb-8">
        <h3 class="text-xl font-semibold mb-4">What is Control Flow?</h3>
        <p class="text-[var(--muted)] mb-4">
          Control flow is the order in which your code executes. By default, JavaScript runs line by line from top to bottom. 
          But with control flow statements, you can make your code <strong class="text-[var(--fg)]">make decisions</strong> and <strong class="text-[var(--fg)]">repeat actions</strong>.
        </p>
        
        <div class="bg-[var(--bg)] rounded-xl p-6 mb-6">
          <div class="flex flex-col md:flex-row items-center justify-center gap-4">
            <div class="flowchart-box">
              <span class="mono text-sm">Start</span>
            </div>
          </div>
          <div class="flowchart-arrow my-2"></div>
          <div class="flex flex-col md:flex-row items-center justify-center gap-4">
            <div class="flowchart-box" style="border-color: var(--warning);">
              <span class="mono text-sm">Condition?</span>
            </div>
          </div>
          <div class="flex justify-center gap-16 mt-4">
            <div class="text-center">
              <span class="text-[var(--success)] mono text-sm">true</span>
              <div class="flowchart-arrow my-2"></div>
              <div class="flowchart-box" style="border-color: var(--success);">
                <span class="mono text-sm">Run Code A</span>
              </div>
            </div>
            <div class="text-center">
              <span class="text-[var(--error)] mono text-sm">false</span>
              <div class="flowchart-arrow my-2"></div>
              <div class="flowchart-box" style="border-color: var(--error);">
                <span class="mono text-sm">Run Code B</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card mb-8">
        <h3 class="text-xl font-semibold mb-4">The Basic If Statement</h3>
        <p class="text-[var(--muted)] mb-4">Run code only when a condition is true:</p>
        
        <div class="code-block mb-4">
          <pre><span class="keyword">if</span> (condition) {
  <span class="comment">// code runs only if condition is true</span>
}</pre>
        </div>

        <div class="code-block">
          <pre><span class="keyword">let</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">18</span>;

<span class="keyword">if</span> (age <span class="operator">>=</span> <span class="number">18</span>) {
  console.<span class="function">log</span>(<span class="string">"You can vote!"</span>);
}</pre>
        </div>
      </div>

      <div class="card mb-8">
        <h3 class="text-xl font-semibold mb-4">If / Else Statement</h3>
        <p class="text-[var(--muted)] mb-4">Run one block if true, another if false:</p>
        
        <div class="code-block mb-4">
          <pre><span class="keyword">let</span> <span class="variable">temperature</span> <span class="operator">=</span> <span class="number">30</span>;

<span class="keyword">if</span> (temperature <span class="operator">></span> <span class="number">25</span>) {
  console.<span class="function">log</span>(<span class="string">"It's hot!"</span>);
} <span class="keyword">else</span> {
  console.<span class="function">log</span>(<span class="string">"It's cool!"</span>);
}</pre>
        </div>

        <div class="output-box">
          <span class="text-[var(--muted)]">Output:</span> <span class="string">"It's hot!"</span>
        </div>
      </div>

      <div class="card mb-8">
        <h3 class="text-xl font-semibold mb-4">If / Else If / Else</h3>
        <p class="text-[var(--muted)] mb-4">Check multiple conditions in order:</p>
        
        <div class="code-block">
          <pre><span class="keyword">let</span> <span class="variable">score</span> <span class="operator">=</span> <span class="number">85</span>;

<span class="keyword">if</span> (score <span class="operator">>=</span> <span class="number">90</span>) {
  console.<span class="function">log</span>(<span class="string">"Grade: A"</span>);
} <span class="keyword">else if</span> (score <span class="operator">>=</span> <span class="number">80</span>) {
  console.<span class="function">log</span>(<span class="string">"Grade: B"</span>);
} <span class="keyword">else if</span> (score <span class="operator">>=</span> <span class="number">70</span>) {
  console.<span class="function">log</span>(<span class="string">"Grade: C"</span>);
} <span class="keyword">else</span> {
  console.<span class="function">log</span>(<span class="string">"Grade: F"</span>);
}</pre>
        </div>
      </div>

      <div class="flex justify-between">
        <button class="btn-secondary" onclick="showSection('welcome')">Back</button>
        <button class="btn-primary" onclick="showSection('ifelse-examples')">See Examples</button>
      </div>
    </section>

    <!-- If/Else Examples -->
    <section id="ifelse-examples" class="section">
      <div class="flex items-center gap-2 mb-6">
        <span class="px-3 py-1 rounded-full bg-[var(--accent)] bg-opacity-20 text-[var(--accent)] text-sm font-medium">Topic 1: Examples</span>
      </div>
      
      <h2 class="text-4xl font-bold mb-4">Real-World Examples</h2>
      <p class="text-xl text-[var(--muted)] mb-8">See if/else in action with practical scenarios</p>

      <div class="grid gap-6 mb-8">
        <div class="example-card">
          <div class="p-4 border-b border-[var(--border)] bg-[var(--bg-secondary)]">
            <h3 class="font-semibold">Login System</h3>
          </div>
          <div class="p-4">
            <div class="code-block mb-4">
              <pre><span class="keyword">let</span> <span class="variable">isLoggedIn</span> <span class="operator">=</span> <span class="keyword">true</span>;
<span class="keyword">let</span> <span class="variable">isAdmin</span> <span class="operator">=</span> <span class="keyword">false</span>;

<span class="keyword">if</span> (isLoggedIn <span class="operator">&&</span> isAdmin) {
  console.<span class="function">log</span>(<span class="string">"Welcome Admin!"</span>);
} <span class="keyword">else if</span> (isLoggedIn) {
  console.<span class="function">log</span>(<span class="string">"Welcome User!"</span>);
} <span class="keyword">else</span> {
  console.<span class="function">log</span>(<span class="string">"Please log in"</span>);
}</pre>
            </div>
            <div class="output-box">
              <span class="text-[var(--muted)]">Output:</span> <span class="string">"Welcome User!"</span>
            </div>
          </div>
        </div>

        <div class="example-card">
          <div class="p-4 border-b border-[var(--border)] bg-[var(--bg-secondary)]">
            <h3 class="font-semibold">Weather Recommendation</h3>
          </div>
          <div class="p-4">
            <div class="code-block mb-4">
              <pre><span class="keyword">let</span> <span class="variable">weather</span> <span class="operator">=</span> <span class="string">"rainy"</span>;

<span class="keyword">if</span> (weather <span class="operator">===</span> <span class="string">"sunny"</span>) {
  console.<span class="function">log</span>(<span class="string">"Wear sunglasses!"</span>);
} <span class="keyword">else if</span> (weather <span class="operator">===</span> <span class="string">"rainy"</span>) {
  console.<span class="function">log</span>(<span class="string">"Bring an umbrella!"</span>);
} <span class="keyword">else if</span> (weather <span class="operator">===</span> <span class="string">"snowy"</span>) {
  console.<span class="function">log</span>(<span class="string">"Wear a coat!"</span>);
} <span class="keyword">else</span> {
  console.<span class="function">log</span>(<span class="string">"Check the weather!"</span>);
}</pre>
            </div>
            <div class="output-box">
              <span class="text-[var(--muted)]">Output:</span> <span class="string">"Bring an umbrella!"</span>
            </div>
          </div>
        </div>

        <div class="example-card">
          <div class="p-4 border-b border-[var(--border)] bg-[var(--bg-secondary)]">
            <h3 class="font-semibold">Shopping Cart Discount</h3>
          </div>
          <div class="p-4">
            <div class="code-block mb-4">
              <pre><span class="keyword">let</span> <span class="variable">cartTotal</span> <span class="operator">=</span> <span class="number">150</span>;
<span class="keyword">let</span> <span class="variable">discount</span> <span class="operator">=</span> <span class="number">0</span>;

<span class="keyword">if</span> (cartTotal <span class="operator">>=</span> <span class="number">100</span>) {
  discount <span class="operator">=</span> <span class="number">0.20</span>; <span class="comment">// 20% off</span>
} <span class="keyword">else if</span> (cartTotal <span class="operator">>=</span> <span class="number">50</span>) {
  discount <span class="operator">=</span> <span class="number">0.10</span>; <span class="comment">// 10% off</span>
}

<span class="keyword">let</span> <span class="variable">finalPrice</span> <span class="operator">=</span> cartTotal <span class="operator">-</span> (cartTotal <span class="operator">*</span> discount);
console.<span class="function">log</span>(<span class="string">`You pay: $</span>${finalPrice}<span class="string">`</span>);</pre>
            </div>
            <div class="output-box">
              <span class="text-[var(--muted)]">Output:</span> <span class="string">"You pay: $120"</span>
            </div>
          </div>
        </div>
      </div>

      <div class="flex justify-between">
        <button class="btn-secondary" onclick="showSection('ifelse-learn')">Back to Learn</button>
        <button class="btn-primary" onclick="showSection('ifelse-exercise')">Practice Exercise</button>
      </div>
    </section>

    <!-- If/Else Exercise -->
    <section id="ifelse-exercise" class="section">
      <div class="flex items-center gap-2 mb-6">
        <span class="px-3 py-1 rounded-full bg-[var(--warning)] bg-opacity-20 text-[var(--warning)] text-sm font-medium">Topic 1: Exercise</span>
      </div>
      
      <h2 class="text-4xl font-bold mb-4">Hands-On Practice</h2>
      <p class="text-xl text-[var(--muted)] mb-8">Write your own if/else statement!</p>

      <div class="card mb-6">
        <h3 class="text-xl font-semibold mb-4">Your Challenge</h3>
        <p class="text-[var(--muted)] mb-4">
          Create a simple "even or odd" checker. Write code that:
        </p>
        <ol class="list-decimal list-inside text-[var(--muted)] mb-4 space-y-2">
          <li>Uses the variable <code class="mono bg-[var(--bg)] px-2 py-1 rounded">number</code> (already set to 7)</li>
          <li>If the number is even, log <code class="mono bg-[var(--bg)] px-2 py-1 rounded">"Even"</code></li>
          <li>If the number is odd, log <code class="mono bg-[var(--bg)] px-2 py-1 rounded">"Odd"</code></li>
        </ol>
        <p class="text-sm text-[var(--accent)]">Hint: Use the modulo operator % (number % 2 === 0 means even)</p>
      </div>

      <div class="card mb-6">
        <label class="block mb-2 font-medium">Your Code:</label>
        <textarea id="ifelse-code" class="code-editor" spellcheck="false">// number is already defined for you
let number = 7;

// Write your if/else statement below:


</textarea>
        <div class="flex gap-3 mt-4">
          <button class="btn-secondary" onclick="runIfElseExercise()">Run Code</button>
          <button class="btn-secondary" onclick="resetIfElseExercise()">Reset</button>
        </div>
      </div>

      <div class="card mb-8">
        <label class="block mb-2 font-medium">Output:</label>
        <div id="ifelse-output" class="output-box">
          <span class="text-[var(--muted)]">Run your code to see the output...</span>
        </div>
      </div>

      <div class="flex justify-between">
        <button class="btn-secondary" onclick="showSection('ifelse-examples')">Back to Examples</button>
        <button class="btn-primary" onclick="showSection('ifelse-quiz')" id="ifelse-continue" disabled style="opacity: 0.5;">Take Quiz</button>
      </div>
    </section>

    <!-- If/Else Quiz -->
    <section id="ifelse-quiz" class="section">
      <div class="flex items-center gap-2 mb-6">
        <span class="px-3 py-1 rounded-full bg-[var(--error)] bg-opacity-20 text-[var(--error)] text-sm font-medium">Topic 1: Quiz</span>
      </div>
      
      <h2 class="text-4xl font-bold mb-4">Test Your Knowledge</h2>
      <p class="text-xl text-[var(--muted)] mb-8">Answer these questions to proceed</p>

      <div id="ifelse-quiz-container">
        <!-- Quiz questions rendered by JS -->
      </div>

      <div class="flex justify-between mt-8">
        <button class="btn-secondary" onclick="showSection('ifelse-exercise')">Back to Exercise</button>
        <button class="btn-primary" onclick="completeIfElseQuiz()" id="ifelse-quiz-complete" disabled style="opacity: 0.5;">Complete & Continue</button>
      </div>
    </section>

    <!-- Topic 2: Switch -->
    <section id="switch-learn" class="section">
      <div class="flex items-center gap-2 mb-6">
        <span class="px-3 py-1 rounded-full bg-[var(--accent)] bg-opacity-20 text-[var(--accent)] text-sm font-medium">Topic 2 of 4</span>
      </div>
      
      <h2 class="text-4xl font-bold mb-4">Switch Statements</h2>
      <p class="text-xl text-[var(--muted)] mb-8">A cleaner way to handle multiple conditions</p>

      <div class="card mb-8">
        <h3 class="text-xl font-semibold mb-4">Why Use Switch?</h3>
        <p class="text-[var(--muted)] mb-4">
          When you have many conditions checking the <strong class="text-[var(--fg)]">same value</strong>, switch is cleaner than if/else if chains.
        </p>
        
        <div class="code-block">
          <pre><span class="keyword">switch</span> (value) {
  <span class="keyword">case</span> option1:
    <span class="comment">// code for option1</span>
    <span class="keyword">break</span>;
  <span class="keyword">case</span> option2:
    <span class="comment">// code for option2</span>
    <span class="keyword">break</span>;
  <span class="keyword">default</span>:
    <span class="comment">// code if no match</span>
}</pre>
        </div>
      </div>

      <div class="card mb-8">
        <h3 class="text-xl font-semibold mb-4">Real Example: Day of Week</h3>
        
        <div class="code-block mb-4">
          <pre><span class="keyword">let</span> <span class="variable">day</span> <span class="operator">=</span> <span class="number">3</span>;
<span class="keyword">let</span> <span class="variable">dayName</span>;

<span class="keyword">switch</span> (day) {
  <span class="keyword">case</span> <span class="number">1</span>:
    dayName <span class="operator">=</span> <span class="string">"Monday"</span>;
    <span class="keyword">break</span>;
  <span class="keyword">case</span> <span class="number">2</span>:
    dayName <span class="operator">=</span> <span class="string">"Tuesday"</span>;
    <span class="keyword">break</span>;
  <span class="keyword">case</span> <span class="number">3</span>:
    dayName <span class="operator">=</span> <span class="string">"Wednesday"</span>;
    <span class="keyword">break</span>;
  <span class="keyword">case</span> <span class="number">4</span>:
    dayName <span class="operator">=</span> <span class="string">"Thursday"</span>;
    <span class="keyword">break</span>;
  <span class="keyword">case</span> <span class="number">5</span>:
    dayName <span class="operator">=</span> <span class="string">"Friday"</span>;
    <span class="keyword">break</span>;
  <span class="keyword">default</span>:
    dayName <span class="operator">=</span> <span class="string">"Weekend!"</span>;
}

console.<span class="function">log</span>(dayName); <span class="comment">// "Wednesday"</span></pre>
        </div>
      </div>

      <div class="card mb-8" style="border-color: var(--warning);">
        <h3 class="text-xl font-semibold mb-4 text-[var(--warning)]">Don't Forget Break!</h3>
        <p class="text-[var(--muted)] mb-4">
          Without <code class="mono">break</code>, code "falls through" to the next case:
        </p>
        
        <div class="code-block">
          <pre><span class="keyword">let</span> <span class="variable">fruit</span> <span class="operator">=</span> <span class="string">"apple"</span>;

<span class="keyword">switch</span> (fruit) {
  <span class="keyword">case</span> <span class="string">"apple"</span>:
    console.<span class="function">log</span>(<span class="string">"Red"</span>);
    <span class="comment">// No break! Falls through...</span>
  <span class="keyword">case</span> <span class="string">"banana"</span>:
    console.<span class="function">log</span>(<span class="string">"Yellow"</span>);
    <span class="keyword">break</span>;
}
<span class="comment">// Output: "Red" then "Yellow" (oops!)</span></pre>
        </div>
      </div>

      <div class="flex justify-between">
        <button class="btn-secondary" onclick="showSection('ifelse-quiz')">Back</button>
        <button class="btn-primary" onclick="showSection('switch-exercise')">Practice Now</button>
      </div>
    </section>

    <!-- Switch Exercise -->
    <section id="switch-exercise" class="section">
      <div class="flex items-center gap-2 mb-6">
        <span class="px-3 py-1 rounded-full bg-[var(--warning)] bg-opacity-20 text-[var(--warning)] text-sm font-medium">Topic 2: Exercise</span>
      </div>
      
      <h2 class="text-4xl font-bold mb-4">Switch Practice</h2>
      <p class="text-xl text-[var(--muted)] mb-8">Create a traffic light system</p>

      <div class="card mb-6">
        <h3 class="text-xl font-semibold mb-4">Your Challenge</h3>
        <p class="text-[var(--muted)] mb-4">
          Create a switch statement for traffic light colors:
        </p>
        <ul class="list-disc list-inside text-[var(--muted)] mb-4 space-y-2">
          <li><code class="mono bg-[var(--bg)] px-2 py-1 rounded">"red"</code> → log <code class="mono bg-[var(--bg)] px-2 py-1 rounded">"Stop!"</code></li>
          <li><code class="mono bg-[var(--bg)] px-2 py-1 rounded">"yellow"</code> → log <code class="mono bg-[var(--bg)] px-2 py-1 rounded">"Slow down!"</code></li>
          <li><code class="mono bg-[var(--bg)] px-2 py-1 rounded">"green"</code> → log <code class="mono bg-[var(--bg)] px-2 py-1 rounded">"Go!"</code></li>
          <li>Any other → log <code class="mono bg-[var(--bg)] px-2 py-1 rounded">"Invalid color"</code></li>
        </ul>
      </div>

      <div class="card mb-6">
        <label class="block mb-2 font-medium">Your Code:</label>
        <textarea id="switch-code" class="code-editor" spellcheck="false">let light = "green";

// Write your switch statement below:


</textarea>
        <div class="flex gap-3 mt-4">
          <button class="btn-secondary" onclick="runSwitchExercise()">Run Code</button>
          <button class="btn-secondary" onclick="resetSwitchExercise()">Reset</button>
        </div>
      </div>

      <div class="card mb-8">
        <label class="block mb-2 font-medium">Output:</label>
        <div id="switch-output" class="output-box">
          <span class="text-[var(--muted)]">Run your code to see the output...</span>
        </div>
      </div>

      <div class="flex justify-between">
        <button class="btn-secondary" onclick="showSection('switch-learn')">Back to Learn</button>
        <button class="btn-primary" onclick="showSection('switch-quiz')" id="switch-continue" disabled style="opacity: 0.5;">Take Quiz</button>
      </div>
    </section>

    <!-- Switch Quiz -->
    <section id="switch-quiz" class="section">
      <div class="flex items-center gap-2 mb-6">
        <span class="px-3 py-1 rounded-full bg-[var(--error)] bg-opacity-20 text-[var(--error)] text-sm font-medium">Topic 1: Quiz</span>
      </div>
      
      <h2 class="text-4xl font-bold mb-4">Switch Quiz</h2>
      <p class="text-xl text-[var(--muted)] mb-8">Prove you understand switch statements</p>

      <div id="switch-quiz-container">
        <!-- Quiz questions rendered by JS -->
      </div>

      <div class="flex justify-between mt-8">
        <button class="btn-secondary" onclick="showSection('switch-exercise')">Back to Exercise</button>
        <button class="btn-primary" onclick="completeSwitchQuiz()" id="switch-quiz-complete" disabled style="opacity: 0.5;">Complete & Continue</button>
      </div>
    </section>

    <!-- Topic 3: For Loops -->
    <section id="for-learn" class="section">
      <div class="flex items-center gap-2 mb-6">
        <span class="px-3 py-1 rounded-full bg-[var(--accent)] bg-opacity-20 text-[var(--accent)] text-sm font-medium">Topic 3 of 4</span>
      </div>
      
      <h2 class="text-4xl font-bold mb-4">For Loops</h2>
      <p class="text-xl text-[var(--muted)] mb-8">Repeat code a specific number of times</p>

      <div class="card mb-8">
        <h3 class="text-xl font-semibold mb-4">The For Loop Structure</h3>
        
        <div class="code-block mb-4">
          <pre><span class="keyword">for</span> (start; condition; update) {
  <span class="comment">// code to repeat</span>
}</pre>
        </div>

        <div class="grid md:grid-cols-3 gap-4">
          <div class="bg-[var(--bg)] rounded-lg p-4 text-center">
            <div class="text-[var(--accent)] font-semibold mb-2">Start</div>
            <code class="text-sm">let i = 0</code>
            <p class="text-xs text-[var(--muted)] mt-2">Runs once at the beginning</p>
          </div>
          <div class="bg-[var(--bg)] rounded-lg p-4 text-center">
            <div class="text-[var(--warning)] font-semibold mb-2">Condition</div>
            <code class="text-sm">i < 5</code>
            <p class="text-xs text-[var(--muted)] mt-2">Checked before each iteration</p>
          </div>
          <div class="bg-[var(--bg)] rounded-lg p-4 text-center">
            <div class="text-[var(--success)] font-semibold mb-2">Update</div>
            <code class="text-sm">i++</code>
            <p class="text-xs text-[var(--muted)] mt-2">Runs after each iteration</p>
          </div>
        </div>
      </div>

      <div class="card mb-8">
        <h3 class="text-xl font-semibold mb-4">Example: Count to 5</h3>
        
        <div class="code-block mb-4">
          <pre><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i <span class="operator"><=</span> <span class="number">5</span>; i<span class="operator">++</span>) {
  console.<span class="function">log</span>(<span class="string">"Count: "</span> <span class="operator">+</span> i);
}</pre>
        </div>

        <div class="output-box">
          <div class="text-[var(--muted)]">Output:</div>
          <div class="string">"Count: 1"</div>
          <div class="string">"Count: 2"</div>
          <div class="string">"Count: 3"</div>
          <div class="string">"Count: 4"</div>
          <div class="string">"Count: 5"</div>
        </div>
      </div>

      <div class="card mb-8">
        <h3 class="text-xl font-semibold mb-4">Looping Through Arrays</h3>
        
        <div class="code-block mb-4">
          <pre><span class="keyword">let</span> <span class="variable">fruits</span> <span class="operator">=</span> [<span class="string">"Apple"</span>, <span class="string">"Banana"</span>, <span class="string">"Orange"</span>];

<span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i <span class="operator"><</span> fruits.length; i<span class="operator">++</span>) {
  console.<span class="function">log</span>(fruits[i]);
}</pre>
        </div>

        <div class="output-box">
          <div class="text-[var(--muted)]">Output:</div>
          <div class="string">"Apple"</div>
          <div class="string">"Banana"</div>
          <div class="string">"Orange"</div>
        </div>
      </div>

      <div class="flex justify-between">
        <button class="btn-secondary" onclick="showSection('switch-quiz')">Back</button>
        <button class="btn-primary" onclick="showSection('for-exercise')">Practice Now</button>
      </div>
    </section>

    <!-- For Loop Exercise -->
    <section id="for-exercise" class="section">
      <div class="flex items-center gap-2 mb-6">
        <span class="px-3 py-1 rounded-full bg-[var(--warning)] bg-opacity-20 text-[var(--warning)] text-sm font-medium">Topic 3: Exercise</span>
      </div>
      
      <h2 class="text-4xl font-bold mb-4">For Loop Practice</h2>
      <p class="text-xl text-[var(--muted)] mb-8">Calculate the sum of numbers</p>

      <div class="card mb-6">
        <h3 class="text-xl font-semibold mb-4">Your Challenge</h3>
        <p class="text-[var(--muted)] mb-4">
          Use a for loop to calculate the sum of numbers 1 to 10:
        </p>
        <ol class="list-decimal list-inside text-[var(--muted)] mb-4 space-y-2">
          <li>Create a variable <code class="mono bg-[var(--bg)] px-2 py-1 rounded">sum</code> starting at 0</li>
          <li>Loop from 1 to 10</li>
          <li>Add each number to sum</li>
          <li>Log the final sum (should be 55)</li>
        </ol>
      </div>

      <div class="card mb-6">
        <label class="block mb-2 font-medium">Your Code:</label>
        <textarea id="for-code" class="code-editor" spellcheck="false">// Create your sum variable and for loop below:

</textarea>
        <div class="flex gap-3 mt-4">
          <button class="btn-secondary" onclick="runForExercise()">Run Code</button>
          <button class="btn-secondary" onclick="resetForExercise()">Reset</button>
        </div>
      </div>

      <div class="card mb-8">
        <label class="block mb-2 font-medium">Output:</label>
        <div id="for-output" class="output-box">
          <span class="text-[var(--muted)]">Run your code to see the output...</span>
        </div>
      </div>

      <div class="flex justify-between">
        <button class="btn-secondary" onclick="showSection('for-learn')">Back to Learn</button>
        <button class="btn-primary" onclick="showSection('for-quiz')" id="for-continue" disabled style="opacity: 0.5;">Take Quiz</button>
      </div>
    </section>

    <!-- For Quiz -->
    <section id="for-quiz" class="section">
      <div class="flex items-center gap-2 mb-6">
        <span class="px-3 py-1 rounded-full bg-[var(--error)] bg-opacity-20 text-[var(--error)] text-sm font-medium">Topic 3: Quiz</span>
      </div>
      
      <h2 class="text-4xl font-bold mb-4">For Loop Quiz</h2>
      <p class="text-xl text-[var(--muted)] mb-8">Test your loop knowledge</p>

      <div id="for-quiz-container">
        <!-- Quiz questions rendered by JS -->
      </div>

      <div class="flex justify-between mt-8">
        <button class="btn-secondary" onclick="showSection('for-exercise')">Back to Exercise</button>
        <button class="btn-primary" onclick="completeForQuiz()" id="for-quiz-complete" disabled style="opacity: 0.5;">Complete & Continue</button>
      </div>
    </section>

    <!-- Topic 4: While Loops -->
    <section id="while-learn" class="section">
      <div class="flex items-center gap-2 mb-6">
        <span class="px-3 py-1 rounded-full bg-[var(--accent)] bg-opacity-20 text-[var(--accent)] text-sm font-medium">Topic 4 of 4</span>
      </div>
      
      <h2 class="text-4xl font-bold mb-4">While Loops</h2>
      <p class="text-xl text-[var(--muted)] mb-8">Repeat code while a condition is true</p>

      <div class="card mb-8">
        <h3 class="text-xl font-semibold mb-4">While vs For</h3>
        <div class="grid md:grid-cols-2 gap-4">
          <div class="bg-[var(--bg)] rounded-lg p-4">
            <div class="text-[var(--accent)] font-semibold mb-3">For Loop</div>
            <p class="text-sm text-[var(--muted)] mb-3">Use when you know how many times to repeat</p>
            <code class="text-xs">"Repeat 10 times"</code>
          </div>
          <div class="bg-[var(--bg)] rounded-lg p-4">
            <div class="text-[var(--warning)] font-semibold mb-3">While Loop</div>
            <p class="text-sm text-[var(--muted)] mb-3">Use when you don't know the exact count</p>
            <code class="text-xs">"Repeat until user quits"</code>
          </div>
        </div>
      </div>

      <div class="card mb-8">
        <h3 class="text-xl font-semibold mb-4">Basic While Loop</h3>
        
        <div class="code-block mb-4">
          <pre><span class="keyword">let</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">1</span>;

<span class="keyword">while</span> (count <span class="operator"><=</span> <span class="number">3</span>) {
  console.<span class="function">log</span>(<span class="string">"Count: "</span> <span class="operator">+</span> count);
  count<span class="operator">++</span>; <span class="comment">// Don't forget this!</span>
}</pre>
        </div>

        <div class="output-box">
          <div class="text-[var(--muted)]">Output:</div>
          <div class="string">"Count: 1"</div>
          <div class="string">"Count: 2"</div>
          <div class="string">"Count: 3"</div>
        </div>
      </div>

      <div class="card mb-8" style="border-color: var(--error);">
        <h3 class="text-xl font-semibold mb-4 text-[var(--error)]">Watch Out: Infinite Loops!</h3>
        <p class="text-[var(--muted)] mb-4">
          If your condition never becomes false, the loop runs forever!
        </p>
        
        <div class="code-block">
          <pre><span class="comment">// DANGER: This runs forever!</span>
<span class="keyword">let</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">1</span>;
<span class="keyword">while</span> (x <span class="operator">></span> <span class="number">0</span>) {
  console.<span class="function">log</span>(<span class="string">"Forever..."</span>);
  <span class="comment">// x never changes!</span>
}</pre>
        </div>
      </div>

      <div class="card mb-8">
        <h3 class="text-xl font-semibold mb-4">Do...While Loop</h3>
        <p class="text-[var(--muted)] mb-4">
          Runs at least once, then checks the condition:
        </p>
        
        <div class="code-block">
          <pre><span class="keyword">let</span> <span class="variable">input</span>;

<span class="keyword">do</span> {
  input <span class="operator">=</span> <span class="function">prompt</span>(<span class="string">"Enter a number"</span>);
} <span class="keyword">while</span> (<span class="function">isNaN</span>(input));

console.<span class="function">log</span>(<span class="string">"You entered: "</span> <span class="operator">+</span> input);</pre>
        </div>
      </div>

      <div class="flex justify-between">
        <button class="btn-secondary" onclick="showSection('for-quiz')">Back</button>
        <button class="btn-primary" onclick="showSection('while-exercise')">Practice Now</button>
      </div>
    </section>

    <!-- While Exercise -->
    <section id="while-exercise" class="section">
      <div class="flex items-center gap-2 mb-6">
        <span class="px-3 py-1 rounded-full bg-[var(--warning)] bg-opacity-20 text-[var(--warning)] text-sm font-medium">Topic 4: Exercise</span>
      </div>
      
      <h2 class="text-4xl font-bold mb-4">While Loop Practice</h2>
      <p class="text-xl text-[var(--muted)] mb-8">Double a number until it's over 100</p>

      <div class="card mb-6">
        <h3 class="text-xl font-semibold mb-4">Your Challenge</h3>
        <p class="text-[var(--muted)] mb-4">
          Use a while loop to keep doubling a number:
        </p>
        <ol class="list-decimal list-inside text-[var(--muted)] mb-4 space-y-2">
          <li>Start with <code class="mono bg-[var(--bg)] px-2 py-1 rounded">num = 5</code></li>
          <li>While num is less than 100, double it</li>
          <li>Log each value of num</li>
          <li>Log how many times you doubled</li>
        </ol>
      </div>

      <div class="card mb-6">
        <label class="block mb-2 font-medium">Your Code:</label>
        <textarea id="while-code" class="code-editor" spellcheck="false">let num = 5;
let times = 0;

// Write your while loop below:

</textarea>
        <div class="flex gap-3 mt-4">
          <button class="btn-secondary" onclick="runWhileExercise()">Run Code</button>
          <button class="btn-secondary" onclick="resetWhileExercise()">Reset</button>
        </div>
      </div>

      <div class="card mb-8">
        <label class="block mb-2 font-medium">Output:</label>
        <div id="while-output" class="output-box">
          <span class="text-[var(--muted)]">Run your code to see the output...</span>
        </div>
      </div>

      <div class="flex justify-between">
        <button class="btn-secondary" onclick="showSection('while-learn')">Back to Learn</button>
        <button class="btn-primary" onclick="showSection('while-quiz')" id="while-continue" disabled style="opacity: 0.5;">Take Quiz</button>
      </div>
    </section>

    <!-- While Quiz -->
    <section id="while-quiz" class="section">
      <div class="flex items-center gap-2 mb-6">
        <span class="px-3 py-1 rounded-full bg-[var(--error)] bg-opacity-20 text-[var(--error)] text-sm font-medium">Topic 4: Quiz</span>
      </div>
      
      <h2 class="text-4xl font-bold mb-4">While Loop Quiz</h2>
      <p class="text-xl text-[var(--muted)] mb-8">Final quiz before completion!</p>

      <div id="while-quiz-container">
        <!-- Quiz questions rendered by JS -->
      </div>

      <div class="flex justify-between mt-8">
        <button class="btn-secondary" onclick="showSection('while-exercise')">Back to Exercise</button>
        <button class="btn-primary" onclick="completeWhileQuiz()" id="while-quiz-complete" disabled style="opacity: 0.5;">Complete Course</button>
      </div>
    </section>

    <!-- Completion Section -->
    <section id="complete" class="section">
      <div class="text-center">
        <div class="w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-[var(--success)] to-emerald-400 flex items-center justify-center">
          <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
          </svg>
        </div>
        
        <h2 class="text-4xl font-bold mb-4">Congratulations!</h2>
        <p class="text-xl text-[var(--muted)] mb-8 max-w-lg mx-auto">
          You've completed the Control Flow Master course! You now understand if/else, switch, for loops, and while loops.
        </p>

        <div class="card max-w-md mx-auto mb-8">
          <h3 class="font-semibold mb-4">Your Stats</h3>
          <div class="grid grid-cols-2 gap-4 text-center">
            <div>
              <div class="text-2xl font-bold text-[var(--accent)]" id="final-topics">4/4</div>
              <div class="text-sm text-[var(--muted)]">Topics Completed</div>
            </div>
            <div>
              <div class="text-2xl font-bold text-[var(--success)]" id="final-quizzes">4/4</div>
              <div class="text-sm text-[var(--muted)]">Quizzes Passed</div>
            </div>
          </div>
        </div>

        <button class="btn-primary text-lg" onclick="restartCourse()">
          Start Over
        </button>
      </div>
    </section>
  </main>

  <script>
    // Course Data
    const topics = ['ifelse', 'switch', 'for', 'while'];
    const sections = [
      'welcome',
      'ifelse-learn', 'ifelse-examples', 'ifelse-exercise', 'ifelse-quiz',
      'switch-learn', 'switch-exercise', 'switch-quiz',
      'for-learn', 'for-exercise', 'for-quiz',
      'while-learn', 'while-exercise', 'while-quiz',
      'complete'
    ];

    let completedTopics = new Set();
    let completedQuizzes = new Set();

    // Quiz Data
    const quizData = {
      ifelse: [
        {
          question: "What will this code output?\nlet x = 5;\nif (x > 10) {\n  console.log('Big');\n} else {\n  console.log('Small');\n}",
          options: ["'Big'", "'Small'", "undefined", "Error"],
          correct: 1
        },
        {
          question: "Which operator checks both value AND type?",
          options: ["==", "===", "!=", "!=="],
          correct: 1
        },
        {
          question: "What does this evaluate to?\n(5 > 3) && (2 < 1)",
          options: ["true", "false", "undefined", "Error"],
          correct: 1
        }
      ],
      switch: [
        {
          question: "What happens if you forget 'break' in a switch case?",
          options: ["Error occurs", "Nothing happens", "Code falls through to next case", "Switch exits immediately"],
          correct: 2
        },
        {
          question: "Which is the default case equivalent in if/else?",
          options: ["if", "else if", "else", "break"],
          correct: 2
        },
        {
          question: "Can switch use strict equality (===)?",
          options: ["No, only ==", "Yes, always uses ===", "Only with numbers", "Only with strings"],
          correct: 1
        }
      ],
      for: [
        {
          question: "How many times will this run?\nfor (let i = 0; i < 3; i++) { }",
          options: ["2 times", "3 times", "4 times", "Infinite"],
          correct: 1
        },
        {
          question: "What does i++ mean?",
          options: ["i = i + 2", "i = i + 1", "i = i - 1", "i = 0"],
          correct: 1
        },
        {
          question: "What's the output?\nlet arr = [1, 2, 3];\nconsole.log(arr.length);",
          options: ["2", "3", "4", "undefined"],
          correct: 1
        }
      ],
      while: [
        {
          question: "When does a while loop stop?",
          options: ["After 100 iterations", "When condition is true", "When condition is false", "Never"],
          correct: 2
        },
        {
          question: "What's the difference between while and do...while?",
          options: ["No difference", "do...while runs at least once", "while runs at least once", "do...while is faster"],
          correct: 1
        },
        {
          question: "What causes an infinite loop?",
          options: ["Condition never becomes false", "Missing semicolon", "Using let instead of var", "Too many iterations"],
          correct: 0
        }
      ]
    };

    // Quiz state tracking
    const quizAnswers = {
      ifelse: [-1, -1, -1],
      switch: [-1, -1, -1],
      for: [-1, -1, -1],
      while: [-1, -1, -1]
    };

    // Initialize
    function init() {
      renderProgressDots();
      renderQuizzes();
      createParticles();
    }

    function renderProgressDots() {
      const container = document.getElementById('progressDots');
      container.innerHTML = '';
      
      const progressSections = ['ifelse', 'switch', 'for', 'while'];
      progressSections.forEach((topic, i) => {
        const dot = document.createElement('div');
        dot.className = 'progress-dot';
        dot.title = topic.charAt(0).toUpperCase() + topic.slice(1);
        
        if (completedQuizzes.has(topic)) {
          dot.classList.add('completed');
        }
        
        container.appendChild(dot);
      });
    }

    function renderQuizzes() {
      Object.keys(quizData).forEach(topic => {
        const container = document.getElementById(`${topic}-quiz-container`);
        if (!container) return;
        
        container.innerHTML = quizData[topic].map((q, i) => `
          <div class="card mb-4" id="${topic}-question-${i}">
            <h3 class="font-semibold mb-4">Question ${i + 1}</h3>
            <pre class="text-[var(--muted)] mb-4 whitespace-pre-wrap font-sans">${q.question}</pre>
            <div class="space-y-2">
              ${q.options.map((opt, j) => `
                <div class="quiz-option" onclick="selectAnswer('${topic}', ${i}, ${j})" id="${topic}-opt-${i}-${j}">
                  <span class="mono text-sm">${String.fromCharCode(65 + j)}.</span> ${opt}
                </div>
              `).join('')}
            </div>
          </div>
        `).join('');
      });
    }

    function selectAnswer(topic, questionIdx, optionIdx) {
      // Clear previous selection
      for (let i = 0; i < 4; i++) {
        const opt = document.getElementById(`${topic}-opt-${questionIdx}-${i}`);
        if (opt) {
          opt.classList.remove('selected', 'correct', 'incorrect');
        }
      }
      
      // Set new selection
      quizAnswers[topic][questionIdx] = optionIdx;
      const selected = document.getElementById(`${topic}-opt-${questionIdx}-${optionIdx}`);
      if (selected) {
        selected.classList.add('selected');
      }
      
      // Check if all questions answered
      const allAnswered = quizAnswers[topic].every(a => a !== -1);
      if (allAnswered) {
        checkQuiz(topic);
      }
    }

    function checkQuiz(topic) {
      let correct = 0;
      quizData[topic].forEach((q, i) => {
        const selectedIdx = quizAnswers[topic][i];
        const correctIdx = q.correct;
        
        const selectedOpt = document.getElementById(`${topic}-opt-${i}-${selectedIdx}`);
        const correctOpt = document.getElementById(`${topic}-opt-${i}-${correctIdx}`);
        
        if (selectedIdx === correctIdx) {
          correct++;
          if (selectedOpt) selectedOpt.classList.add('correct');
        } else {
          if (selectedOpt) selectedOpt.classList.add('incorrect');
          if (correctOpt) correctOpt.classList.add('correct');
        }
      });
      
      if (correct >= 2) {
        const btn = document.getElementById(`${topic}-quiz-complete`);
        if (btn) {
          btn.disabled = false;
          btn.style.opacity = '1';
        }
      }
    }

    function showSection(sectionId) {
      sections.forEach(s => {
        const el = document.getElementById(s);
        if (el) {
          el.classList.remove('active');
        }
      });
      
      const target = document.getElementById(sectionId);
      if (target) {
        target.classList.add('active');
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    }

    function startLearning() {
      showSection('ifelse-learn');
    }

    // Exercise Runners
    function runIfElseExercise() {
      const code = document.getElementById('ifelse-code').value;
      const output = document.getElementById('ifelse-output');
      
      try {
        let logs = [];
        const originalLog = console.log;
        console.log = (...args) => logs.push(args.join(' '));
        
        eval(code);
        
        console.log = originalLog;
        
        output.innerHTML = logs.map(l => `<div>${l}</div>`).join('');
        
        if (logs.includes('Odd') || logs.includes('odd')) {
          output.innerHTML += '<div class="success-msg mt-2">Correct! 7 is odd!</div>';
          document.getElementById('ifelse-continue').disabled = false;
          document.getElementById('ifelse-continue').style.opacity = '1';
        } else {
          output.innerHTML += '<div class="error-msg mt-2">Try again! Check if 7 is even or odd.</div>';
        }
      } catch (e) {
        output.innerHTML = `<div class="error-msg">Error: ${e.message}</div>`;
      }
    }

    function resetIfElseExercise() {
      document.getElementById('ifelse-code').value = `// number is already defined for you
let number = 7;

// Write your if/else statement below:

`;
      document.getElementById('ifelse-output').innerHTML = '<span class="text-[var(--muted)]">Run your code to see the output...</span>';
    }

    function runSwitchExercise() {
      const code = document.getElementById('switch-code').value;
      const output = document.getElementById('switch-output');
      
      try {
        let logs = [];
        const originalLog = console.log;
        console.log = (...args) => logs.push(args.join(' '));
        
        eval(code);
        
        console.log = originalLog;
        
        output.innerHTML = logs.map(l => `<div>${l}</div>`).join('');
        
        if (logs.includes('Go!')) {
          output.innerHTML += '<div class="success-msg mt-2">Great job! Your switch works correctly!</div>';
          document.getElementById('switch-continue').disabled = false;
          document.getElementById('switch-continue').style.opacity = '1';
        } else {
          output.innerHTML += '<div class="error-msg mt-2">Try again! Make sure green logs "Go!"</div>';
        }
      } catch (e) {
        output.innerHTML = `<div class="error-msg">Error: ${e.message}</div>`;
      }
    }

    function resetSwitchExercise() {
      document.getElementById('switch-code').value = `let light = "green";

// Write your switch statement below:

`;
      document.getElementById('switch-output').innerHTML = '<span class="text-[var(--muted)]">Run your code to see the output...</span>';
    }

    function runForExercise() {
      const code = document.getElementById('for-code').value;
      const output = document.getElementById('for-output');
      
      try {
        let logs = [];
        const originalLog = console.log;
        console.log = (...args) => logs.push(args.join(' '));
        
        eval(code);
        
        console.log = originalLog;
        
        output.innerHTML = logs.map(l => `<div>${l}</div>`).join('');
        
        if (logs.some(l => l.includes('55'))) {
          output.innerHTML += '<div class="success-msg mt-2">Perfect! The sum of 1-10 is 55!</div>';
          document.getElementById('for-continue').disabled = false;
          document.getElementById('for-continue').style.opacity = '1';
        } else {
          output.innerHTML += '<div class="error-msg mt-2">Try again! The sum should be 55.</div>';
        }
      } catch (e) {
        output.innerHTML = `<div class="error-msg">Error: ${e.message}</div>`;
      }
    }

    function resetForExercise() {
      document.getElementById('for-code').value = `// Create your sum variable and for loop below:

`;
      document.getElementById('for-output').innerHTML = '<span class="text-[var(--muted)]">Run your code to see the output...</span>';
    }

    function runWhileExercise() {
      const code = document.getElementById('while-code').value;
      const output = document.getElementById('while-output');
      
      try {
        let logs = [];
        const originalLog = console.log;
        console.log = (...args) => logs.push(args.join(' '));
        
        eval(code);
        
        console.log = originalLog;
        
        output.innerHTML = logs.map(l => `<div>${l}</div>`).join('');
        
        // Check if they logged the values
        const hasDoubled = logs.some(l => l.includes('10') || l.includes('20') || l.includes('40') || l.includes('80'));
        
        if (hasDoubled) {
          output.innerHTML += '<div class="success-msg mt-2">Great! You doubled until over 100!</div>';
          document.getElementById('while-continue').disabled = false;
          document.getElementById('while-continue').style.opacity = '1';
        } else {
          output.innerHTML += '<div class="error-msg mt-2">Try again! Double 5 until it exceeds 100.</div>';
        }
      } catch (e) {
        output.innerHTML = `<div class="error-msg">Error: ${e.message}</div>`;
      }
    }

    function resetWhileExercise() {
      document.getElementById('while-code').value = `let num = 5;
let times = 0;

// Write your while loop below:

`;
      document.getElementById('while-output').innerHTML = '<span class="text-[var(--muted)]">Run your code to see the output...</span>';
    }

    // Quiz Completion
    function completeIfElseQuiz() {
      completedQuizzes.add('ifelse');
      renderProgressDots();
      showSection('switch-learn');
    }

    function completeSwitchQuiz() {
      completedQuizzes.add('switch');
      renderProgressDots();
      showSection('for-learn');
    }

    function completeForQuiz() {
      completedQuizzes.add('for');
      renderProgressDots();
      showSection('while-learn');
    }

    function completeWhileQuiz() {
      completedQuizzes.add('while');
      renderProgressDots();
      showConfetti();
      setTimeout(() => showSection('complete'), 500);
    }

    function restartCourse() {
      completedTopics.clear();
      completedQuizzes.clear();
      
      Object.keys(quizAnswers).forEach(topic => {
        quizAnswers[topic] = [-1, -1, -1];
      });
      
      renderProgressDots();
      renderQuizzes();
      
      // Reset all continue buttons
      ['ifelse', 'switch', 'for', 'while'].forEach(topic => {
        const continueBtn = document.getElementById(`${topic}-continue`);
        if (continueBtn) {
          continueBtn.disabled = true;
          continueBtn.style.opacity = '0.5';
        }
        const quizBtn = document.getElementById(`${topic}-quiz-complete`);
        if (quizBtn) {
          quizBtn.disabled = true;
          quizBtn.style.opacity = '0.5';
        }
      });
      
      showSection('welcome');
    }

    // Confetti Effect
    function showConfetti() {
      const colors = ['#00d9ff', '#3fb950', '#d29922', '#ff7b72', '#d2a8ff'];
      
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.top = '-10px';
        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
        confetti.style.width = (Math.random() * 8 + 6) + 'px';
        confetti.style.height = (Math.random() * 8 + 6) + 'px';
        
        document.body.appendChild(confetti);
        
        const duration = Math.random() * 2000 + 2000;
        const xEnd = (Math.random() - 0.5) * 200;
        
        confetti.animate([
          { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
          { transform: `translateY(100vh) translateX(${xEnd}px) rotate(720deg)`, opacity: 0 }
        ], {
          duration: duration,
          easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'
        }).onfinish = () => confetti.remove();
      }
    }

    // Floating Particles
    function createParticles() {
      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReducedMotion) return;
      
      const container = document.body;
      
      for (let i = 0; i < 15; i++) {
        const particle = document.createElement('div');
        particle.className = 'floating-particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 5 + 's';
        
        container.appendChild(particle);
        
        animateParticle(particle);
      }
    }

    function animateParticle(particle) {
      const duration = 10000 + Math.random() * 20000;
      const startX = parseFloat(particle.style.left);
      const startY = parseFloat(particle.style.top);
      const endX = startX + (Math.random() - 0.5) * 30;
      const endY = startY + (Math.random() - 0.5) * 30;
      
      particle.animate([
        { left: startX + '%', top: startY + '%', opacity: 0.3 },
        { left: endX + '%', top: endY + '%', opacity: 0.6 },
        { left: startX + '%', top: startY + '%', opacity: 0.3 }
      ], {
        duration: duration,
        iterations: Infinity,
        easing: 'ease-in-out'
      });
    }

    // Initialize on load
    init();
  </script>
</body>
</html>