<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé∏ JS String Mastery - Interactive Learning</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Poppins:wght@400;600;700;800&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6c5ce7;
            --primary-light: #a29bfe;
            --secondary: #00cec9;
            --accent: #fd79a8;
            --success: #00b894;
            --warning: #fdcb6e;
            --danger: #e17055;
            --dark: #2d3436;
            --light: #f8f9fa;
            --code-bg: #1e1e2e;
            --gradient1: linear-gradient(135deg, #6c5ce7, #a29bfe);
            --gradient2: linear-gradient(135deg, #00cec9, #55efc4);
            --gradient3: linear-gradient(135deg, #fd79a8, #e84393);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: #0f0f1a;
            color: #e0e0e0;
            overflow-x: hidden;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .bg-animation .particle {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
            animation: float 15s infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.1; }
            50% { transform: translateY(-100px) rotate(180deg); opacity: 0.3; }
        }

        /* Navigation */
        .nav-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 280px;
            height: 100vh;
            background: rgba(15, 15, 30, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(108, 92, 231, 0.2);
            overflow-y: auto;
            z-index: 100;
            transition: transform 0.3s ease;
            padding: 20px 0;
        }

        .nav-container.collapsed {
            transform: translateX(-280px);
        }

        .nav-toggle {
            position: fixed;
            top: 20px;
            left: 290px;
            z-index: 101;
            background: var(--primary);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
            display: none;
        }

        .nav-logo {
            text-align: center;
            padding: 20px;
            border-bottom: 1px solid rgba(108, 92, 231, 0.2);
            margin-bottom: 10px;
        }

        .nav-logo h2 {
            font-size: 18px;
            background: var(--gradient1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-item {
            padding: 12px 25px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 3px solid transparent;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-item:hover, .nav-item.active {
            background: rgba(108, 92, 231, 0.1);
            border-left-color: var(--primary);
            color: var(--primary-light);
        }

        .nav-item .icon {
            font-size: 18px;
            width: 25px;
            text-align: center;
        }

        .nav-section-title {
            padding: 15px 25px 5px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #666;
            font-weight: 700;
        }

        .progress-bar-nav {
            margin: 15px 25px;
            background: rgba(108, 92, 231, 0.1);
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
        }

        .progress-bar-nav .fill {
            height: 100%;
            background: var(--gradient1);
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .progress-text {
            text-align: center;
            font-size: 12px;
            color: var(--primary-light);
            margin-bottom: 10px;
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            padding: 30px 40px;
            max-width: 1200px;
            transition: margin-left 0.3s;
        }

        /* Section Styling */
        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(135deg, rgba(108, 92, 231, 0.1), rgba(0, 206, 201, 0.1));
            border-radius: 20px;
            margin-bottom: 40px;
            border: 1px solid rgba(108, 92, 231, 0.2);
        }

        .hero h1 {
            font-size: 48px;
            font-weight: 800;
            background: var(--gradient1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }

        .hero p {
            font-size: 18px;
            color: #aaa;
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .hero-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Buttons */
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 12px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--gradient1);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(108, 92, 231, 0.4);
        }

        .btn-secondary {
            background: rgba(108, 92, 231, 0.1);
            color: var(--primary-light);
            border: 1px solid rgba(108, 92, 231, 0.3);
        }

        .btn-success {
            background: var(--gradient2);
            color: var(--dark);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 13px;
            border-radius: 8px;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        /* Content Cards */
        .card {
            background: rgba(20, 20, 40, 0.8);
            border: 1px solid rgba(108, 92, 231, 0.15);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 25px;
            transition: all 0.3s;
        }

        .card:hover {
            border-color: rgba(108, 92, 231, 0.3);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
        }

        .card h2 {
            font-size: 24px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h3 {
            font-size: 18px;
            margin: 20px 0 10px;
            color: var(--secondary);
        }

        .card p {
            color: #bbb;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        /* Code Blocks */
        .code-block {
            background: var(--code-bg);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            line-height: 1.8;
            overflow-x: auto;
            border: 1px solid rgba(108, 92, 231, 0.2);
            position: relative;
        }

        .code-block .code-label {
            position: absolute;
            top: 8px;
            right: 12px;
            font-size: 11px;
            color: #666;
            font-family: 'Poppins', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .code-block .copy-btn {
            position: absolute;
            top: 8px;
            right: 80px;
            background: rgba(108, 92, 231, 0.2);
            border: none;
            color: var(--primary-light);
            padding: 4px 10px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 11px;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s;
        }

        .code-block .copy-btn:hover {
            background: rgba(108, 92, 231, 0.4);
        }

        .keyword { color: #c678dd; }
        .string { color: #98c379; }
        .comment { color: #5c6370; font-style: italic; }
        .method { color: #61afef; }
        .number { color: #d19a66; }
        .variable { color: #e06c75; }
        .operator { color: #56b6c2; }
        .function { color: #61afef; }
        .template { color: #98c379; }
        .interpolation { color: #e5c07b; }
        .console { color: #e06c75; }
        .property { color: #e5c07b; }

        /* Interactive Playground */
        .playground {
            background: rgba(20, 20, 40, 0.9);
            border: 2px solid rgba(108, 92, 231, 0.3);
            border-radius: 16px;
            overflow: hidden;
            margin: 20px 0;
        }

        .playground-header {
            background: rgba(108, 92, 231, 0.1);
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(108, 92, 231, 0.2);
        }

        .playground-header h4 {
            font-size: 14px;
            color: var(--primary-light);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .playground-body {
            display: grid;
            grid-template-columns: 1fr 1fr;
            min-height: 200px;
        }

        .playground textarea {
            width: 100%;
            min-height: 200px;
            background: var(--code-bg);
            color: #abb2bf;
            border: none;
            padding: 20px;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            line-height: 1.8;
            resize: vertical;
            outline: none;
        }

        .playground-output {
            background: #1a1a2e;
            padding: 20px;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            line-height: 1.8;
            border-left: 1px solid rgba(108, 92, 231, 0.2);
            overflow-y: auto;
            max-height: 400px;
        }

        .output-line {
            padding: 2px 0;
            color: #98c379;
        }

        .output-line.error {
            color: var(--danger);
        }

        /* Visual Demo */
        .visual-demo {
            background: rgba(0, 206, 201, 0.05);
            border: 1px solid rgba(0, 206, 201, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin: 15px 0;
        }

        .visual-demo h4 {
            color: var(--secondary);
            margin-bottom: 15px;
            font-size: 16px;
        }

        .string-visual {
            display: flex;
            gap: 2px;
            flex-wrap: wrap;
            margin: 15px 0;
            align-items: center;
        }

        .char-box {
            width: 40px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(108, 92, 231, 0.2);
            border: 1px solid rgba(108, 92, 231, 0.4);
            border-radius: 6px;
            font-family: 'Fira Code', monospace;
            font-size: 16px;
            color: white;
            transition: all 0.3s;
            position: relative;
        }

        .char-box:hover {
            background: rgba(108, 92, 231, 0.4);
            transform: translateY(-3px);
        }

        .char-box .index {
            position: absolute;
            bottom: -20px;
            font-size: 10px;
            color: var(--accent);
        }

        .char-box.highlight {
            background: rgba(253, 121, 168, 0.3);
            border-color: var(--accent);
        }

        .char-box.space {
            background: rgba(0, 206, 201, 0.1);
            border-style: dashed;
        }

        /* Quiz Section */
        .quiz-container {
            background: rgba(20, 20, 40, 0.8);
            border: 2px solid rgba(253, 121, 168, 0.3);
            border-radius: 16px;
            padding: 30px;
            margin: 20px 0;
        }

        .quiz-question {
            font-size: 16px;
            margin-bottom: 20px;
            color: white;
            font-weight: 600;
        }

        .quiz-question .question-number {
            background: var(--gradient3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 14px;
        }

        .quiz-options {
            display: grid;
            gap: 10px;
            margin-bottom: 20px;
        }

        .quiz-option {
            padding: 14px 20px;
            background: rgba(108, 92, 231, 0.05);
            border: 1px solid rgba(108, 92, 231, 0.2);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            color: #ccc;
        }

        .quiz-option:hover {
            border-color: var(--primary);
            background: rgba(108, 92, 231, 0.1);
        }

        .quiz-option.selected {
            border-color: var(--primary);
            background: rgba(108, 92, 231, 0.2);
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: rgba(0, 184, 148, 0.2);
            color: var(--success);
        }

        .quiz-option.wrong {
            border-color: var(--danger);
            background: rgba(225, 112, 85, 0.2);
            color: var(--danger);
        }

        .quiz-feedback {
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: none;
            font-size: 14px;
        }

        .quiz-feedback.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .quiz-feedback.correct {
            background: rgba(0, 184, 148, 0.1);
            border: 1px solid rgba(0, 184, 148, 0.3);
            color: var(--success);
        }

        .quiz-feedback.wrong {
            background: rgba(225, 112, 85, 0.1);
            border: 1px solid rgba(225, 112, 85, 0.3);
            color: var(--danger);
        }

        /* Exercise Section */
        .exercise {
            background: rgba(0, 184, 148, 0.05);
            border: 2px solid rgba(0, 184, 148, 0.2);
            border-radius: 16px;
            padding: 30px;
            margin: 20px 0;
        }

        .exercise h4 {
            color: var(--success);
            margin-bottom: 10px;
            font-size: 16px;
        }

        .exercise .task {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            font-size: 14px;
            color: #ccc;
        }

        .exercise textarea {
            width: 100%;
            min-height: 120px;
            background: var(--code-bg);
            color: #abb2bf;
            border: 1px solid rgba(0, 184, 148, 0.3);
            padding: 15px;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            line-height: 1.8;
            border-radius: 10px;
            resize: vertical;
            outline: none;
            margin: 10px 0;
        }

        .exercise textarea:focus {
            border-color: var(--success);
        }

        .exercise-result {
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            display: none;
        }

        .exercise-result.show {
            display: block;
        }

        .exercise-result.pass {
            background: rgba(0, 184, 148, 0.1);
            border: 1px solid rgba(0, 184, 148, 0.3);
            color: var(--success);
        }

        .exercise-result.fail {
            background: rgba(225, 112, 85, 0.1);
            border: 1px solid rgba(225, 112, 85, 0.3);
            color: var(--danger);
        }

        /* Pitfall Card */
        .pitfall {
            background: rgba(225, 112, 85, 0.05);
            border-left: 4px solid var(--danger);
            border-radius: 0 12px 12px 0;
            padding: 20px 25px;
            margin: 15px 0;
        }

        .pitfall h4 {
            color: var(--danger);
            margin-bottom: 8px;
            font-size: 15px;
        }

        .pitfall p {
            font-size: 14px;
            color: #bbb;
        }

        /* Tip Card */
        .tip {
            background: rgba(0, 206, 201, 0.05);
            border-left: 4px solid var(--secondary);
            border-radius: 0 12px 12px 0;
            padding: 20px 25px;
            margin: 15px 0;
        }

        .tip h4 {
            color: var(--secondary);
            margin-bottom: 8px;
            font-size: 15px;
        }

        /* Method Reference Table */
        .method-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 14px;
        }

        .method-table th {
            background: rgba(108, 92, 231, 0.2);
            padding: 12px 15px;
            text-align: left;
            color: var(--primary-light);
            font-weight: 600;
        }

        .method-table td {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(108, 92, 231, 0.1);
            color: #ccc;
        }

        .method-table tr:hover td {
            background: rgba(108, 92, 231, 0.05);
        }

        .method-table code {
            background: rgba(108, 92, 231, 0.15);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Fira Code', monospace;
            font-size: 13px;
            color: var(--primary-light);
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .badge-beginner { background: rgba(0, 184, 148, 0.2); color: var(--success); }
        .badge-intermediate { background: rgba(253, 203, 110, 0.2); color: var(--warning); }
        .badge-advanced { background: rgba(253, 121, 168, 0.2); color: var(--accent); }

        /* Score Board */
        .scoreboard {
            background: var(--gradient1);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
            margin: 20px 0;
            color: white;
        }

        .scoreboard .score-number {
            font-size: 48px;
            font-weight: 800;
        }

        .scoreboard .score-label {
            font-size: 14px;
            opacity: 0.8;
        }

        /* Comparison Cards */
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        .comparison .do {
            background: rgba(0, 184, 148, 0.05);
            border: 1px solid rgba(0, 184, 148, 0.3);
            border-radius: 12px;
            padding: 20px;
        }

        .comparison .dont {
            background: rgba(225, 112, 85, 0.05);
            border: 1px solid rgba(225, 112, 85, 0.3);
            border-radius: 12px;
            padding: 20px;
        }

        .comparison h4 {
            margin-bottom: 10px;
            font-size: 14px;
        }

        .comparison .do h4 { color: var(--success); }
        .comparison .dont h4 { color: var(--danger); }

        /* Animated String Demo */
        .string-animation {
            background: rgba(20, 20, 40, 0.9);
            border-radius: 12px;
            padding: 25px;
            margin: 15px 0;
            text-align: center;
        }

        .string-animation .animated-text {
            font-family: 'Fira Code', monospace;
            font-size: 24px;
            color: var(--secondary);
            min-height: 40px;
            margin: 15px 0;
        }

        .string-animation .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 0;
            border-bottom: 1px solid rgba(108, 92, 231, 0.2);
            padding-bottom: 0;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
            font-size: 14px;
            color: #888;
        }

        .tab:hover, .tab.active {
            color: var(--primary-light);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
            padding: 20px 0;
        }

        .tab-content.active {
            display: block;
        }

        /* Regex Tester */
        .regex-tester {
            background: rgba(20, 20, 40, 0.8);
            border: 1px solid rgba(253, 121, 168, 0.3);
            border-radius: 16px;
            padding: 25px;
            margin: 15px 0;
        }

        .regex-tester input {
            width: 100%;
            padding: 12px 15px;
            background: var(--code-bg);
            border: 1px solid rgba(108, 92, 231, 0.3);
            border-radius: 8px;
            color: #abb2bf;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            outline: none;
            margin: 8px 0;
        }

        .regex-tester input:focus {
            border-color: var(--accent);
        }

        .regex-matches {
            margin-top: 15px;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            line-height: 2;
        }

        .regex-matches .match {
            background: rgba(253, 121, 168, 0.3);
            padding: 2px 4px;
            border-radius: 3px;
            color: var(--accent);
        }

        /* Score display */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(20, 20, 40, 0.8);
            border: 1px solid rgba(108, 92, 231, 0.2);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .stat-card .stat-value {
            font-size: 32px;
            font-weight: 800;
            background: var(--gradient1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-card .stat-label {
            font-size: 12px;
            color: #888;
            margin-top: 5px;
        }

        /* Navigation Arrows */
        .nav-arrows {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(108, 92, 231, 0.2);
        }

        /* Responsive */
        @media (max-width: 900px) {
            .nav-container {
                transform: translateX(-280px);
            }
            .nav-container.open {
                transform: translateX(0);
            }
            .nav-toggle {
                display: block;
                left: 10px;
            }
            .nav-toggle.shifted {
                left: 290px;
            }
            .main-content {
                margin-left: 0;
                padding: 20px 15px;
                padding-top: 70px;
            }
            .playground-body {
                grid-template-columns: 1fr;
            }
            .playground-output {
                border-left: none;
                border-top: 1px solid rgba(108, 92, 231, 0.2);
            }
            .comparison {
                grid-template-columns: 1fr;
            }
            .stats-grid {
                grid-template-columns: 1fr;
            }
            .hero h1 {
                font-size: 32px;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(108, 92, 231, 0.3);
            border-radius: 3px;
        }

        /* Highlight animation */
        @keyframes highlightPulse {
            0% { background-color: rgba(108, 92, 231, 0.3); }
            50% { background-color: rgba(108, 92, 231, 0.1); }
            100% { background-color: rgba(108, 92, 231, 0.3); }
        }

        .highlight-pulse {
            animation: highlightPulse 1s ease infinite;
        }

        .inline-code {
            background: rgba(108, 92, 231, 0.15);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Fira Code', monospace;
            font-size: 13px;
            color: var(--primary-light);
        }

        /* Cheat sheet grid */
        .cheat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .cheat-item {
            background: rgba(20, 20, 40, 0.8);
            border: 1px solid rgba(108, 92, 231, 0.15);
            border-radius: 10px;
            padding: 15px;
        }

        .cheat-item .method-name {
            font-family: 'Fira Code', monospace;
            color: var(--primary-light);
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cheat-item .method-desc {
            font-size: 12px;
            color: #999;
            margin-bottom: 8px;
        }

        .cheat-item .method-example {
            font-family: 'Fira Code', monospace;
            font-size: 12px;
            color: var(--secondary);
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 10px;
            border-radius: 6px;
        }
    </style>
</head>
<body>

<!-- Background Animation -->
<div class="bg-animation" id="bgAnimation"></div>

<!-- Navigation Toggle -->
<button class="nav-toggle" id="navToggle" onclick="toggleNav()">‚ò∞</button>

<!-- Side Navigation -->
<nav class="nav-container" id="navContainer">
    <div class="nav-logo">
        <h2>üé∏ JS String Mastery</h2>
    </div>

    <div class="progress-text" id="progressText">0% Complete</div>
    <div class="progress-bar-nav">
        <div class="fill" id="progressFill"></div>
    </div>

    <div class="nav-section-title">Getting Started</div>
    <div class="nav-item active" onclick="showSection('welcome')" data-section="welcome">
        <span class="icon">üè†</span> Welcome
    </div>

    <div class="nav-section-title">Lessons</div>
    <div class="nav-item" onclick="showSection('lesson1')" data-section="lesson1">
        <span class="icon">üìù</span> Creating Strings
    </div>
    <div class="nav-item" onclick="showSection('lesson2')" data-section="lesson2">
        <span class="icon">üîó</span> String Properties & Access
    </div>
    <div class="nav-item" onclick="showSection('lesson3')" data-section="lesson3">
        <span class="icon">‚ú®</span> Template Literals
    </div>
    <div class="nav-item" onclick="showSection('lesson4')" data-section="lesson4">
        <span class="icon">üîß</span> Search Methods
    </div>
    <div class="nav-item" onclick="showSection('lesson5')" data-section="lesson5">
        <span class="icon">‚úÇÔ∏è</span> Extract & Modify
    </div>
    <div class="nav-item" onclick="showSection('lesson6')" data-section="lesson6">
        <span class="icon">üîÑ</span> Transform Methods
    </div>
    <div class="nav-item" onclick="showSection('lesson7')" data-section="lesson7">
        <span class="icon">üéØ</span> Regex Basics
    </div>

    <div class="nav-section-title">Practice</div>
    <div class="nav-item" onclick="showSection('playground')" data-section="playground">
        <span class="icon">üéÆ</span> Playground
    </div>
    <div class="nav-item" onclick="showSection('quiz')" data-section="quiz">
        <span class="icon">üß†</span> Master Quiz
    </div>
    <div class="nav-item" onclick="showSection('exercises')" data-section="exercises">
        <span class="icon">üí™</span> Exercises
    </div>
    <div class="nav-item" onclick="showSection('pitfalls')" data-section="pitfalls">
        <span class="icon">‚ö†Ô∏è</span> Common Pitfalls
    </div>
    <div class="nav-item" onclick="showSection('cheatsheet')" data-section="cheatsheet">
        <span class="icon">üìã</span> Cheat Sheet
    </div>
</nav>

<!-- Main Content Area -->
<div class="main-content" id="mainContent">

    <!-- ========== WELCOME ========== -->
    <div class="section active" id="section-welcome">
        <div class="hero">
            <h1>üé∏ String Mastery</h1>
            <p>Master JavaScript strings from zero to hero! Interactive lessons, visual demos, hands-on exercises, and quizzes await you.</p>
            <div class="hero-buttons">
                <button class="btn btn-primary" onclick="showSection('lesson1')">üöÄ Start Learning</button>
                <button class="btn btn-secondary" onclick="showSection('playground')">üéÆ Jump to Playground</button>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="lessonsCompleted">0</div>
                <div class="stat-label">Lessons Completed</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="quizScore">0</div>
                <div class="stat-label">Quiz Score</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="exercisesDone">0</div>
                <div class="stat-label">Exercises Done</div>
            </div>
        </div>

        <div class="card">
            <h2>üìö What You'll Learn</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                <div style="padding: 15px; background: rgba(108,92,231,0.1); border-radius: 10px;">
                    <strong>üìù String Creation</strong><br>
                    <small style="color:#999">Single quotes, double quotes, backticks, and the String constructor</small>
                </div>
                <div style="padding: 15px; background: rgba(0,206,201,0.1); border-radius: 10px;">
                    <strong>‚ú® Template Literals</strong><br>
                    <small style="color:#999">Interpolation, multi-line strings, tagged templates</small>
                </div>
                <div style="padding: 15px; background: rgba(253,121,168,0.1); border-radius: 10px;">
                    <strong>üîß String Methods</strong><br>
                    <small style="color:#999">30+ methods for searching, slicing, transforming</small>
                </div>
                <div style="padding: 15px; background: rgba(0,184,148,0.1); border-radius: 10px;">
                    <strong>üéØ Regular Expressions</strong><br>
                    <small style="color:#999">Pattern matching, special characters, common patterns</small>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== LESSON 1: Creating Strings ========== -->
    <div class="section" id="section-lesson1">
        <h1 style="margin-bottom: 5px;">üìù Lesson 1: Creating Strings</h1>
        <span class="badge badge-beginner">Beginner</span>

        <div class="card" style="margin-top: 20px;">
            <h2>ü§î What is a String?</h2>
            <p>A <strong>string</strong> is a sequence of characters used to represent text. In JavaScript, strings are <strong>immutable</strong> ‚Äî meaning once created, they cannot be changed (but you can create new strings from them).</p>

            <div class="visual-demo">
                <h4>üé® Visualizing a String</h4>
                <p>Think of a string like a train ‚Äî each car holds one character:</p>
                <div class="string-visual" id="stringVisual1">
                </div>
                <div style="margin-top: 30px;">
                    <input type="text" value="Hello!" style="padding: 8px 15px; background: var(--code-bg); border: 1px solid rgba(108,92,231,0.3); border-radius: 8px; color: #abb2bf; font-family: 'Fira Code', monospace; font-size: 14px; outline: none; width: 200px;" oninput="visualizeString(this.value, 'stringVisual1')" placeholder="Type here...">
                    <small style="color: #666; margin-left: 10px;">‚Üê Type to see the visual!</small>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>3 Ways to Create Strings</h2>

            <h3>1Ô∏è‚É£ Single Quotes</h3>
            <div class="code-block">
                <span class="code-label">JavaScript</span>
<span class="keyword">let</span> <span class="variable">greeting</span> <span class="operator">=</span> <span class="string">'Hello, World!'</span>;
<span class="keyword">let</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">'Alice'</span>;
<span class="keyword">let</span> <span class="variable">empty</span> <span class="operator">=</span> <span class="string">''</span>;  <span class="comment">// empty string</span>
            </div>

            <h3>2Ô∏è‚É£ Double Quotes</h3>
            <div class="code-block">
                <span class="code-label">JavaScript</span>
<span class="keyword">let</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">"JavaScript is fun!"</span>;
<span class="keyword">let</span> <span class="variable">quote</span> <span class="operator">=</span> <span class="string">"She said 'Hi!'"</span>;  <span class="comment">// single inside double ‚úÖ</span>
            </div>

            <h3>3Ô∏è‚É£ Backticks (Template Literals) ‚Äî üåü Modern & Recommended</h3>
            <div class="code-block">
                <span class="code-label">JavaScript</span>
<span class="keyword">let</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">`Bob`</span>;
<span class="keyword">let</span> <span class="variable">greeting</span> <span class="operator">=</span> <span class="template">`Hello, <span class="interpolation">${name}</span>!`</span>;  <span class="comment">// "Hello, Bob!"</span>
<span class="keyword">let</span> <span class="variable">multiLine</span> <span class="operator">=</span> <span class="template">`Line 1
Line 2
Line 3`</span>;  <span class="comment">// multi-line! ‚úÖ</span>
            </div>

            <div class="tip">
                <h4>üí° Pro Tip</h4>
                <p>Single and double quotes work exactly the same in JavaScript. The choice is just a style preference. Most teams pick one and stick with it. Template literals (backticks) have superpowers ‚Äî we'll cover them in detail in Lesson 3!</p>
            </div>
        </div>

        <div class="card">
            <h2>üî§ Escape Characters</h2>
            <p>Sometimes you need special characters inside your strings. Use the backslash <span class="inline-code">\</span> to "escape" them:</p>

            <table class="method-table">
                <tr><th>Escape</th><th>Character</th><th>Example</th></tr>
                <tr><td><code>\'</code></td><td>Single quote</td><td><code>'I\'m happy'</code></td></tr>
                <tr><td><code>\"</code></td><td>Double quote</td><td><code>"He said \"Hi\""</code></td></tr>
                <tr><td><code>\\</code></td><td>Backslash</td><td><code>"C:\\Users"</code></td></tr>
                <tr><td><code>\n</code></td><td>New line</td><td><code>"Line1\nLine2"</code></td></tr>
                <tr><td><code>\t</code></td><td>Tab</td><td><code>"Col1\tCol2"</code></td></tr>
            </table>

            <div class="code-block">
<span class="comment">// Escaping quotes</span>
<span class="keyword">let</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="string">'I\'m learning JavaScript!'</span>;
<span class="keyword">let</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="string">"He said \"wow!\""</span>;

<span class="comment">// New lines</span>
<span class="keyword">let</span> <span class="variable">poem</span> <span class="operator">=</span> <span class="string">"Roses are red,\nViolets are blue"</span>;
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">poem</span>);
<span class="comment">// Output:</span>
<span class="comment">// Roses are red,</span>
<span class="comment">// Violets are blue</span>
            </div>
        </div>

        <div class="card">
            <h2>üèóÔ∏è String Constructor (Rarely Used)</h2>
            <div class="code-block">
<span class="keyword">let</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">String</span>(<span class="string">"Hello"</span>);
<span class="console">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> <span class="variable">str</span>);  <span class="comment">// "object" ‚Äî NOT "string"!</span>
            </div>

            <div class="pitfall">
                <h4>‚ö†Ô∏è Avoid new String()</h4>
                <p>Using <code>new String()</code> creates a String <em>object</em>, not a primitive string. This can cause unexpected behavior with <code>===</code> comparisons. Always use string literals instead.</p>
            </div>
        </div>

        <!-- Quick Quiz for Lesson 1 -->
        <div class="quiz-container">
            <h3 style="color: var(--accent); margin-bottom: 15px;">üß† Quick Check</h3>
            <div class="quiz-question">
                <span class="question-number">Q1: </span>Which of these creates a valid multi-line string WITHOUT using \n?
            </div>
            <div class="quiz-options" id="l1q1">
                <div class="quiz-option" onclick="checkQuickQuiz(this, false, 'l1q1')"><code>'Line 1\nLine 2'</code></div>
                <div class="quiz-option" onclick="checkQuickQuiz(this, true, 'l1q1')"><code>`Line 1
Line 2`</code></div>
                <div class="quiz-option" onclick="checkQuickQuiz(this, false, 'l1q1')"><code>"Line 1
Line 2"</code></div>
                <div class="quiz-option" onclick="checkQuickQuiz(this, false, 'l1q1')"><code>'Line 1
Line 2'</code></div>
            </div>
            <div class="quiz-feedback" id="l1q1-feedback"></div>
        </div>

        <div class="nav-arrows">
            <button class="btn btn-secondary" onclick="showSection('welcome')">‚Üê Welcome</button>
            <button class="btn btn-primary" onclick="showSection('lesson2')">Lesson 2: Properties & Access ‚Üí</button>
        </div>
    </div>

    <!-- ========== LESSON 2: String Properties & Access ========== -->
    <div class="section" id="section-lesson2">
        <h1 style="margin-bottom: 5px;">üîó Lesson 2: String Properties & Character Access</h1>
        <span class="badge badge-beginner">Beginner</span>

        <div class="card" style="margin-top: 20px;">
            <h2>üìè The .length Property</h2>
            <p>Every string has a <span class="inline-code">.length</span> property that tells you how many characters it contains:</p>

            <div class="code-block">
<span class="keyword">let</span> <span class="variable">word</span> <span class="operator">=</span> <span class="string">"JavaScript"</span>;
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">word</span>.<span class="property">length</span>);  <span class="comment">// 10</span>

<span class="keyword">let</span> <span class="variable">empty</span> <span class="operator">=</span> <span class="string">""</span>;
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">empty</span>.<span class="property">length</span>);  <span class="comment">// 0</span>

<span class="keyword">let</span> <span class="variable">spaced</span> <span class="operator">=</span> <span class="string">"Hi there!"</span>;
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">spaced</span>.<span class="property">length</span>);  <span class="comment">// 9 (spaces count!)</span>
            </div>

            <div class="visual-demo">
                <h4>üé® Length Visualizer</h4>
                <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                    <input type="text" id="lengthInput" value="JavaScript" style="padding: 8px 15px; background: var(--code-bg); border: 1px solid rgba(108,92,231,0.3); border-radius: 8px; color: #abb2bf; font-family: 'Fira Code', monospace; font-size: 14px; outline: none; width: 200px;" oninput="showLength()">
                    <span style="font-family: 'Fira Code', monospace; color: var(--secondary);">.length = <strong id="lengthOutput">10</strong></span>
                </div>
                <div class="string-visual" id="lengthVisual" style="margin-top: 15px;"></div>
            </div>
        </div>

        <div class="card">
            <h2>üéØ Accessing Characters</h2>
            <p>Strings are <strong>zero-indexed</strong> ‚Äî the first character is at position <code>0</code>!</p>

            <div class="visual-demo">
                <h4>üé® Zero-Indexing Explained</h4>
                <div class="string-visual" id="indexDemo"></div>
                <p style="margin-top: 25px; color: #999; font-size: 14px;">‚òùÔ∏è Hover over each box to see its index</p>
            </div>

            <h3>Method 1: Bracket Notation <code>str[index]</code></h3>
            <div class="code-block">
<span class="keyword">let</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">"Hello"</span>;
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">str</span>[<span class="number">0</span>]);  <span class="comment">// "H"</span>
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">str</span>[<span class="number">1</span>]);  <span class="comment">// "e"</span>
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">str</span>[<span class="number">4</span>]);  <span class="comment">// "o"</span>
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">str</span>[<span class="number">5</span>]);  <span class="comment">// undefined (out of range!)</span>
            </div>

            <h3>Method 2: .charAt(index)</h3>
            <div class="code-block">
<span class="keyword">let</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">"Hello"</span>;
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">str</span>.<span class="method">charAt</span>(<span class="number">0</span>));  <span class="comment">// "H"</span>
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">str</span>.<span class="method">charAt</span>(<span class="number">5</span>));  <span class="comment">// "" (empty string, not undefined)</span>
            </div>

            <h3>Method 3: .at(index) ‚Äî üÜï Modern!</h3>
            <div class="code-block">
<span class="keyword">let</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">"Hello"</span>;
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">str</span>.<span class="method">at</span>(<span class="number">0</span>));   <span class="comment">// "H"</span>
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">str</span>.<span class="method">at</span>(<span class="number">-1</span>));  <span class="comment">// "o" ‚Üê Negative index = from the end! üéâ</span>
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">str</span>.<span class="method">at</span>(<span class="number">-2</span>));  <span class="comment">// "l"</span>
            </div>

            <div class="tip">
                <h4>üí° .at() is amazing for getting the last character!</h4>
                <p><code>str.at(-1)</code> is much cleaner than <code>str[str.length - 1]</code></p>
            </div>
        </div>

        <div class="card">
            <h2>üîÑ String Immutability</h2>
            <p>Strings cannot be changed in place. You must create a new string:</p>

            <div class="code-block">
<span class="keyword">let</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">"Hello"</span>;
<span class="variable">str</span>[<span class="number">0</span>] <span class="operator">=</span> <span class="string">"J"</span>;  <span class="comment">// ‚ùå This does NOTHING! No error, just ignored.</span>
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">str</span>);  <span class="comment">// Still "Hello"</span>

<span class="comment">// ‚úÖ Create a new string instead:</span>
<span class="keyword">let</span> <span class="variable">newStr</span> <span class="operator">=</span> <span class="string">"J"</span> <span class="operator">+</span> <span class="variable">str</span>.<span class="method">slice</span>(<span class="number">1</span>);
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">newStr</span>);  <span class="comment">// "Jello"</span>
            </div>

            <div class="pitfall">
                <h4>‚ö†Ô∏è Silent Failure!</h4>
                <p>Trying to change a character with <code>str[0] = "X"</code> fails silently ‚Äî no error, no change. This trips up many beginners!</p>
            </div>
        </div>

        <div class="quiz-container">
            <h3 style="color: var(--accent); margin-bottom: 15px;">üß† Quick Check</h3>
            <div class="quiz-question">
                <span class="question-number">Q: </span>What does <code>"Hello".at(-2)</code> return?
            </div>
            <div class="quiz-options" id="l2q1">
                <div class="quiz-option" onclick="checkQuickQuiz(this, false, 'l2q1')"><code>"o"</code></div>
                <div class="quiz-option" onclick="checkQuickQuiz(this, true, 'l2q1')"><code>"l"</code></div>
                <div class="quiz-option" onclick="checkQuickQuiz(this, false, 'l2q1')"><code>"e"</code></div>
                <div class="quiz-option" onclick="checkQuickQuiz(this, false, 'l2q1')"><code>undefined</code></div>
            </div>
            <div class="quiz-feedback" id="l2q1-feedback"></div>
        </div>

        <div class="nav-arrows">
            <button class="btn btn-secondary" onclick="showSection('lesson1')">‚Üê Lesson 1</button>
            <button class="btn btn-primary" onclick="showSection('lesson3')">Lesson 3: Template Literals ‚Üí</button>
        </div>
    </div>

    <!-- ========== LESSON 3: Template Literals ========== -->
    <div class="section" id="section-lesson3">
        <h1 style="margin-bottom: 5px;">‚ú® Lesson 3: Template Literals</h1>
        <span class="badge badge-beginner">Beginner</span>

        <div class="card" style="margin-top: 20px;">
            <h2>üé≠ What are Template Literals?</h2>
            <p>Template literals are strings wrapped in <strong>backticks</strong> (<code>`</code>). They bring <strong>superpowers</strong> that regular quotes don't have!</p>

            <div class="comparison">
                <div class="dont">
                    <h4>‚ùå Old Way (Concatenation)</h4>
                    <div class="code-block" style="margin: 10px 0;">
<span class="keyword">let</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">"Alice"</span>;
<span class="keyword">let</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">25</span>;
<span class="keyword">let</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">"Hi, I'm "</span> <span class="operator">+</span> <span class="variable">name</span> 
  <span class="operator">+</span> <span class="string">" and I'm "</span> <span class="operator">+</span> <span class="variable">age</span> 
  <span class="operator">+</span> <span class="string">" years old."</span>;
                    </div>
                </div>
                <div class="do">
                    <h4>‚úÖ New Way (Template Literals)</h4>
                    <div class="code-block" style="margin: 10px 0;">
<span class="keyword">let</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">"Alice"</span>;
<span class="keyword">let</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">25</span>;
<span class="keyword">let</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="template">`Hi, I'm <span class="interpolation">${name}</span> and I'm <span class="interpolation">${age}</span> years old.`</span>;
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>üß¨ String Interpolation: <code>${expression}</code></h2>
            <p>Put any JavaScript expression inside <code>${...}</code> and it gets evaluated and inserted:</p>

            <div class="code-block">
<span class="comment">// Variables</span>
<span class="keyword">let</span> <span class="variable">fruit</span> <span class="operator">=</span> <span class="string">"apple"</span>;
<span class="console">console</span>.<span class="method">log</span>(<span class="template">`I love <span class="interpolation">${fruit}</span>s`</span>);  <span class="comment">// "I love apples"</span>

<span class="comment">// Math expressions</span>
<span class="console">console</span>.<span class="method">log</span>(<span class="template">`2 + 3 = <span class="interpolation">${2 + 3}</span>`</span>);  <span class="comment">// "2 + 3 = 5"</span>

<span class="comment">// Method calls</span>
<span class="keyword">let</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">"alice"</span>;
<span class="console">console</span>.<span class="method">log</span>(<span class="template">`Hello, <span class="interpolation">${name.toUpperCase()}</span>!`</span>);  <span class="comment">// "Hello, ALICE!"</span>

<span class="comment">// Ternary operator</span>
<span class="keyword">let</span> <span class="variable">score</span> <span class="operator">=</span> <span class="number">85</span>;
<span class="console">console</span>.<span class="method">log</span>(<span class="template">`You <span class="interpolation">${score >= 70 ? 'passed' : 'failed'}</span>!`</span>);  <span class="comment">// "You passed!"</span>

<span class="comment">// Function calls</span>
<span class="keyword">function</span> <span class="function">getEmoji</span>(<span class="variable">mood</span>) {
  <span class="keyword">return</span> <span class="variable">mood</span> <span class="operator">===</span> <span class="string">'happy'</span> <span class="operator">?</span> <span class="string">'üòÑ'</span> <span class="operator">:</span> <span class="string">'üò¢'</span>;
}
<span class="console">console</span>.<span class="method">log</span>(<span class="template">`Feeling: <span class="interpolation">${getEmoji('happy')}</span>`</span>);  <span class="comment">// "Feeling: üòÑ"</span>
            </div>
        </div>

        <div class="card">
            <h2>üìÑ Multi-Line Strings</h2>
            <div class="comparison">
                <div class="dont">
                    <h4>‚ùå Old Way</h4>
                    <div class="code-block" style="margin: 10px 0;">
<span class="keyword">let</span> <span class="variable">html</span> <span class="operator">=</span> <span class="string">"&lt;div&gt;\n"</span> <span class="operator">+</span>
  <span class="string">"  &lt;h1&gt;Title&lt;/h1&gt;\n"</span> <span class="operator">+</span>
  <span class="string">"  &lt;p&gt;Content&lt;/p&gt;\n"</span> <span class="operator">+</span>
  <span class="string">"&lt;/div&gt;"</span>;
                    </div>
                </div>
                <div class="do">
                    <h4>‚úÖ Template Literal</h4>
                    <div class="code-block" style="margin: 10px 0;">
<span class="keyword">let</span> <span class="variable">html</span> <span class="operator">=</span> <span class="template">`&lt;div&gt;
  &lt;h1&gt;Title&lt;/h1&gt;
  &lt;p&gt;Content&lt;/p&gt;
&lt;/div&gt;`</span>;
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>üî¨ Interactive Template Literal Builder</h2>
            <div class="visual-demo">
                <h4>Try it! Change the values and see the result:</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0;">
                    <div>
                        <label style="font-size: 13px; color: #888;">Name:</label>
                        <input type="text" id="tlName" value="Alice" style="width: 100%; padding: 8px; background: var(--code-bg); border: 1px solid rgba(108,92,231,0.3); border-radius: 6px; color: #abb2bf; font-family: 'Fira Code', monospace; outline: none;" oninput="updateTemplateDemo()">
                    </div>
                    <div>
                        <label style="font-size: 13px; color: #888;">Age:</label>
                        <input type="number" id="tlAge" value="25" style="width: 100%; padding: 8px; background: var(--code-bg); border: 1px solid rgba(108,92,231,0.3); border-radius: 6px; color: #abb2bf; font-family: 'Fira Code', monospace; outline: none;" oninput="updateTemplateDemo()">
                    </div>
                    <div>
                        <label style="font-size: 13px; color: #888;">City:</label>
                        <input type="text" id="tlCity" value="London" style="width: 100%; padding: 8px; background: var(--code-bg); border: 1px solid rgba(108,92,231,0.3); border-radius: 6px; color: #abb2bf; font-family: 'Fira Code', monospace; outline: none;" oninput="updateTemplateDemo()">
                    </div>
                    <div>
                        <label style="font-size: 13px; color: #888;">Hobby:</label>
                        <input type="text" id="tlHobby" value="coding" style="width: 100%; padding: 8px; background: var(--code-bg); border: 1px solid rgba(108,92,231,0.3); border-radius: 6px; color: #abb2bf; font-family: 'Fira Code', monospace; outline: none;" oninput="updateTemplateDemo()">
                    </div>
                </div>
                <div class="code-block" style="margin-top: 15px;">
<span class="keyword">let</span> <span class="variable">bio</span> <span class="operator">=</span> <span class="template">`My name is <span class="interpolation">${<span id="tlNameShow">Alice</span>}</span>.
I'm <span class="interpolation">${<span id="tlAgeShow">25</span>}</span> years old, living in <span class="interpolation">${<span id="tlCityShow">London</span>}</span>.
I love <span class="interpolation">${<span id="tlHobbyShow">coding</span>}</span>! In <span class="interpolation">${<span id="tlYearsShow">5</span>}</span> years I'll be <span class="interpolation">${<span id="tlFutureAgeShow">30</span>}</span>.`</span>;
                </div>
                <div style="margin-top: 15px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px; font-family: 'Fira Code', monospace; font-size: 14px; color: var(--secondary);">
                    <strong>Output:</strong><br>
                    <span id="tlOutput">My name is Alice.
I'm 25 years old, living in London.
I love coding! In 5 years I'll be 30.</span>
                </div>
            </div>
        </div>

        <div class="quiz-container">
            <h3 style="color: var(--accent); margin-bottom: 15px;">üß† Quick Check</h3>
            <div class="quiz-question">
                <span class="question-number">Q: </span>What does <code>`${10 > 5 ? 'yes' : 'no'}`</code> return?
            </div>
            <div class="quiz-options" id="l3q1">
                <div class="quiz-option" onclick="checkQuickQuiz(this, false, 'l3q1')"><code>"${10 > 5 ? 'yes' : 'no'}"</code></div>
                <div class="quiz-option" onclick="checkQuickQuiz(this, true, 'l3q1')"><code>"yes"</code></div>
                <div class="quiz-option" onclick="checkQuickQuiz(this, false, 'l3q1')"><code>"true"</code></div>
                <div class="quiz-option" onclick="checkQuickQuiz(this, false, 'l3q1')"><code>"no"</code></div>
            </div>
            <div class="quiz-feedback" id="l3q1-feedback"></div>
        </div>

        <div class="nav-arrows">
            <button class="btn btn-secondary" onclick="showSection('lesson2')">‚Üê Lesson 2</button>
            <button class="btn btn-primary" onclick="showSection('lesson4')">Lesson 4: Search Methods ‚Üí</button>
        </div>
    </div>

    <!-- ========== LESSON 4: Search Methods ========== -->
    <div class="section" id="section-lesson4">
        <h1 style="margin-bottom: 5px;">üîß Lesson 4: Search Methods</h1>
        <span class="badge badge-intermediate">Intermediate</span>

        <div class="card" style="margin-top: 20px;">
            <h2>üîç Finding Things in Strings</h2>

            <h3>indexOf() & lastIndexOf()</h3>
            <p>Returns the <strong>position</strong> of the first/last occurrence. Returns <code>-1</code> if not found.</p>
            <div class="code-block">
<span class="keyword">let</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">"Hello World, Hello JavaScript"</span>;

<span class="variable">str</span>.<span class="method">indexOf</span>(<span class="string">"Hello"</span>);      <span class="comment">// 0 (first occurrence)</span>
<span class="variable">str</span>.<span class="method">lastIndexOf</span>(<span class="string">"Hello"</span>);  <span class="comment">// 13 (last occurrence)</span>
<span class="variable">str</span>.<span class="method">indexOf</span>(<span class="string">"Python"</span>);     <span class="comment">// -1 (not found)</span>
<span class="variable">str</span>.<span class="method">indexOf</span>(<span class="string">"Hello"</span>, <span class="number">1</span>);   <span class="comment">// 13 (search from position 1)</span>
            </div>

            <h3>includes()</h3>
            <p>Returns <code>true</code> or <code>false</code>. Much cleaner for checking existence!</p>
            <div class="code-block">
<span class="keyword">let</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">"JavaScript is awesome"</span>;

<span class="variable">str</span>.<span class="method">includes</span>(<span class="string">"awesome"</span>);   <span class="comment">// true</span>
<span class="variable">str</span>.<span class="method">includes</span>(<span class="string">"boring"</span>);    <span class="comment">// false</span>
<span class="variable">str</span>.<span class="method">includes</span>(<span class="string">"Java"</span>);      <span class="comment">// true (it's inside "JavaScript"!)</span>
<span class="variable">str</span>.<span class="method">includes</span>(<span class="string">"java"</span>);      <span class="comment">// false (case-sensitive!)</span>
            </div>

            <h3>startsWith() & endsWith()</h3>
            <div class="code-block">
<span class="keyword">let</span> <span class="variable">file</span> <span class="operator">=</span> <span class="string">"photo.jpg"</span>;

<span class="variable">file</span>.<span class="method">startsWith</span>(<span class="string">"photo"</span>);  <span class="comment">// true</span>
<span class="variable">file</span>.<span class="method">endsWith</span>(<span class="string">".jpg"</span>);     <span class="comment">// true</span>
<span class="variable">file</span>.<span class="method">endsWith</span>(<span class="string">".png"</span>);     <span class="comment">// false</span>

<span class="comment">// Practical use: file type checking</span>
<span class="keyword">if</span> (<span class="variable">file</span>.<span class="method">endsWith</span>(<span class="string">".jpg"</span>) <span class="operator">||</span> <span class="variable">file</span>.<span class="method">endsWith</span>(<span class="string">".png"</span>)) {
  <span class="console">console</span>.<span class="method">log</span>(<span class="string">"It's an image!"</span>);
}
            </div>

            <div class="pitfall">
                <h4>‚ö†Ô∏è All search methods are CASE-SENSITIVE!</h4>
                <p><code>"Hello".includes("hello")</code> returns <code>false</code>! To do case-insensitive search, convert both to the same case first: <code>str.toLowerCase().includes("hello")</code></p>
            </div>
        </div>

        <div class="card">
            <h2>üéÆ Interactive Search Tester</h2>
            <div class="visual-demo">
                <div style="margin-bottom: 10px;">
                    <label style="font-size: 13px; color: #888;">String to search in:</label>
                    <input type="text" id="searchStr" value="JavaScript is amazing and fun" style="width: 100%; padding: 8px; background: var(--code-bg); border: 1px solid rgba(108,92,231,0.3); border-radius: 6px; color: #abb2bf; font-family: 'Fira Code', monospace; outline: none;" oninput="runSearchDemo()">
                </div>
                <div style="margin-bottom: 10px;">
                    <label style="font-size: 13px; color: #888;">Search term:</label>
                    <input type="text" id="searchTerm" value="amazing" style="width: 100%; padding: 8px; background: var(--code-bg); border: 1px solid rgba(108,92,231,0.3); border-radius: 6px; color: #abb2bf; font-family: 'Fira Code', monospace; outline: none;" oninput="runSearchDemo()">
                </div>
                <div id="searchResults" style="font-family: 'Fira Code', monospace; font-size: 13px; line-height: 2;"></div>
            </div>
        </div>

        <div class="nav-arrows">
            <button class="btn btn-secondary" onclick="showSection('lesson3')">‚Üê Lesson 3</button>
            <button class="btn btn-primary" onclick="showSection('lesson5')">Lesson 5: Extract & Modify ‚Üí</button>
        </div>
    </div>

    <!-- ========== LESSON 5: Extract & Modify ========== -->
    <div class="section" id="section-lesson5">
        <h1 style="margin-bottom: 5px;">‚úÇÔ∏è Lesson 5: Extracting & Modifying Strings</h1>
        <span class="badge badge-intermediate">Intermediate</span>

        <div class="card" style="margin-top: 20px;">
            <h2>‚úÇÔ∏è Extracting Parts: slice(), substring(), substr()</h2>

            <h3>slice(start, end) ‚Äî ‚≠ê Most Recommended</h3>
            <p>Extracts from <code>start</code> up to (but NOT including) <code>end</code>.</p>
            <div class="code-block">
<span class="keyword">let</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">"Hello, World!"</span>;

<span class="variable">str</span>.<span class="method">slice</span>(<span class="number">0</span>, <span class="number">5</span>);    <span class="comment">// "Hello"</span>
<span class="variable">str</span>.<span class="method">slice</span>(<span class="number">7</span>);       <span class="comment">// "World!" (from index 7 to end)</span>
<span class="variable">str</span>.<span class="method">slice</span>(<span class="number">-6</span>);      <span class="comment">// "orld!" (negative = from end)</span>
<span class="variable">str</span>.<span class="method">slice</span>(<span class="number">-6</span>, <span class="number">-1</span>);  <span class="comment">// "orld"</span>
            </div>

            <div class="visual-demo">
                <h4>üé® Slice Visualizer</h4>
                <div class="string-visual" id="sliceVisual"></div>
                <div style="display: flex; gap: 15px; margin-top: 25px; align-items: center; flex-wrap: wrap;">
                    <div>
                        <label style="font-size: 12px; color: #888;">Start:</label>
                        <input type="number" id="sliceStart" value="0" min="-20" max="20" style="width: 60px; padding: 6px; background: var(--code-bg); border: 1px solid rgba(108,92,231,0.3); border-radius: 6px; color: #abb2bf; font-family: 'Fira Code', monospace; outline: none;" oninput="updateSliceVisual()">
                    </div>
                    <div>
                        <label style="font-size: 12px; color: #888;">End:</label>
                        <input type="number" id="sliceEnd" value="5" min="-20" max="20" style="width: 60px; padding: 6px; background: var(--code-bg); border: 1px solid rgba(108,92,231,0.3); border-radius: 6px; color: #abb2bf; font-family: 'Fira Code', monospace; outline: none;" oninput="updateSliceVisual()">
                    </div>
                    <div style="font-family: 'Fira Code', monospace; color: var(--secondary);">
                        Result: "<span id="sliceResult">Hello</span>"
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>üîÑ Replace Methods</h2>

            <div class="code-block">
<span class="keyword">let</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">"I love cats. cats are great."</span>;

<span class="comment">// replace() ‚Äî only first occurrence</span>
<span class="variable">str</span>.<span class="method">replace</span>(<span class="string">"cats"</span>, <span class="string">"dogs"</span>);
<span class="comment">// "I love dogs. cats are great."</span>

<span class="comment">// replaceAll() ‚Äî all occurrences</span>
<span class="variable">str</span>.<span class="method">replaceAll</span>(<span class="string">"cats"</span>, <span class="string">"dogs"</span>);
<span class="comment">// "I love dogs. dogs are great."</span>

<span class="comment">// With regex (global flag)</span>
<span class="variable">str</span>.<span class="method">replace</span>(<span class="operator">/cats/g</span>, <span class="string">"dogs"</span>);
<span class="comment">// "I love dogs. dogs are great."</span>
            </div>
        </div>

        <div class="card">
            <h2>üî® Split & Join</h2>
            <div class="code-block">
<span class="comment">// split() ‚Äî String ‚Üí Array</span>
<span class="keyword">let</span> <span class="variable">csv</span> <span class="operator">=</span> <span class="string">"apple,banana,cherry"</span>;
<span class="keyword">let</span> <span class="variable">fruits</span> <span class="operator">=</span> <span class="variable">csv</span>.<span class="method">split</span>(<span class="string">","</span>);
<span class="comment">// ["apple", "banana", "cherry"]</span>

<span class="keyword">let</span> <span class="variable">words</span> <span class="operator">=</span> <span class="string">"Hello World"</span>.<span class="method">split</span>(<span class="string">" "</span>);
<span class="comment">// ["Hello", "World"]</span>

<span class="keyword">let</span> <span class="variable">chars</span> <span class="operator">=</span> <span class="string">"Hello"</span>.<span class="method">split</span>(<span class="string">""</span>);
<span class="comment">// ["H", "e", "l", "l", "o"]</span>

<span class="comment">// join() ‚Äî Array ‚Üí String</span>
<span class="variable">fruits</span>.<span class="method">join</span>(<span class="string">" & "</span>);
<span class="comment">// "apple & banana & cherry"</span>

<span class="comment">// Reverse a string trick!</span>
<span class="string">"Hello"</span>.<span class="method">split</span>(<span class="string">""</span>).<span class="method">reverse</span>().<span class="method">join</span>(<span class="string">""</span>);
<span class="comment">// "olleH"</span>
            </div>
        </div>

        <div class="card">
            <h2>üìè Padding Methods</h2>
            <div class="code-block">
<span class="comment">// padStart(targetLength, padString)</span>
<span class="string">"5"</span>.<span class="method">padStart</span>(<span class="number">3</span>, <span class="string">"0"</span>);     <span class="comment">// "005"</span>
<span class="string">"42"</span>.<span class="method">padStart</span>(<span class="number">5</span>, <span class="string">"*"</span>);    <span class="comment">// "***42"</span>
<span class="string">"hi"</span>.<span class="method">padStart</span>(<span class="number">10</span>);         <span class="comment">// "        hi"</span>

<span class="comment">// padEnd(targetLength, padString)</span>
<span class="string">"hi"</span>.<span class="method">padEnd</span>(<span class="number">10</span>, <span class="string">"."</span>);      <span class="comment">// "hi........"</span>
<span class="string">"42"</span>.<span class="method">padEnd</span>(<span class="number">5</span>, <span class="string">"0"</span>);       <span class="comment">// "42000"</span>

<span class="comment">// Practical: Format credit card</span>
<span class="keyword">let</span> <span class="variable">last4</span> <span class="operator">=</span> <span class="string">"4242"</span>;
<span class="variable">last4</span>.<span class="method">padStart</span>(<span class="number">16</span>, <span class="string">"*"</span>);  <span class="comment">// "************4242"</span>
            </div>
        </div>

        <div class="nav-arrows">
            <button class="btn btn-secondary" onclick="showSection('lesson4')">‚Üê Lesson 4</button>
            <button class="btn btn-primary" onclick="showSection('lesson6')">Lesson 6: Transform Methods ‚Üí</button>
        </div>
    </div>

    <!-- ========== LESSON 6: Transform Methods ========== -->
    <div class="section" id="section-lesson6">
        <h1 style="margin-bottom: 5px;">üîÑ Lesson 6: String Transformations</h1>
        <span class="badge badge-intermediate">Intermediate</span>

        <div class="card" style="margin-top: 20px;">
            <h2>üî† Case Methods</h2>
            <div class="code-block">
<span class="keyword">let</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">"Hello World"</span>;

<span class="variable">str</span>.<span class="method">toUpperCase</span>();    <span class="comment">// "HELLO WORLD"</span>
<span class="variable">str</span>.<span class="method">toLowerCase</span>();    <span class="comment">// "hello world"</span>

<span class="comment">// Practical: Case-insensitive comparison</span>
<span class="keyword">let</span> <span class="variable">input</span> <span class="operator">=</span> <span class="string">"Yes"</span>;
<span class="keyword">if</span> (<span class="variable">input</span>.<span class="method">toLowerCase</span>() <span class="operator">===</span> <span class="string">"yes"</span>) {
  <span class="console">console</span>.<span class="method">log</span>(<span class="string">"User said yes!"</span>);
}
            </div>
        </div>

        <div class="card">
            <h2>‚úÇÔ∏è Trimming Whitespace</h2>
            <div class="code-block">
<span class="keyword">let</span> <span class="variable">messy</span> <span class="operator">=</span> <span class="string">"   Hello World   "</span>;

<span class="variable">messy</span>.<span class="method">trim</span>();       <span class="comment">// "Hello World"</span>
<span class="variable">messy</span>.<span class="method">trimStart</span>();  <span class="comment">// "Hello World   "</span>
<span class="variable">messy</span>.<span class="method">trimEnd</span>();    <span class="comment">// "   Hello World"</span>

<span class="comment">// Super useful for form input cleaning!</span>
<span class="keyword">let</span> <span class="variable">email</span> <span class="operator">=</span> <span class="string">"  user@email.com  "</span>;
<span class="keyword">let</span> <span class="variable">clean</span> <span class="operator">=</span> <span class="variable">email</span>.<span class="method">trim</span>();  <span class="comment">// "user@email.com"</span>
            </div>
        </div>

        <div class="card">
            <h2>üîÅ Repeat & Concat</h2>
            <div class="code-block">
<span class="comment">// repeat(count)</span>
<span class="string">"Ha"</span>.<span class="method">repeat</span>(<span class="number">3</span>);        <span class="comment">// "HaHaHa"</span>
<span class="string">"üéâ"</span>.<span class="method">repeat</span>(<span class="number">5</span>);       <span class="comment">// "üéâüéâüéâüéâüéâ"</span>
<span class="string">"=-"</span>.<span class="method">repeat</span>(<span class="number">20</span>);       <span class="comment">// "=-=-=-=-=-=-=-..."</span>

<span class="comment">// concat() ‚Äî but + or template literals are preferred</span>
<span class="string">"Hello"</span>.<span class="method">concat</span>(<span class="string">" "</span>, <span class="string">"World"</span>);  <span class="comment">// "Hello World"</span>
            </div>
        </div>

        <div class="card">
            <h2>üé® String Transformation Playground</h2>
            <div class="visual-demo">
                <input type="text" id="transformInput" value="  Hello, World!  " style="width: 100%; padding: 10px; background: var(--code-bg); border: 1px solid rgba(108,92,231,0.3); border-radius: 8px; color: #abb2bf; font-family: 'Fira Code', monospace; font-size: 14px; outline: none;" oninput="updateTransformDemo()">
                <div id="transformResults" style="margin-top: 15px; font-family: 'Fira Code', monospace; font-size: 13px; line-height: 2.2;"></div>
            </div>
        </div>

        <div class="nav-arrows">
            <button class="btn btn-secondary" onclick="showSection('lesson5')">‚Üê Lesson 5</button>
            <button class="btn btn-primary" onclick="showSection('lesson7')">Lesson 7: Regex Basics ‚Üí</button>
        </div>
    </div>

    <!-- ========== LESSON 7: Regex Basics ========== -->
    <div class="section" id="section-lesson7">
        <h1 style="margin-bottom: 5px;">üéØ Lesson 7: Regular Expression Basics</h1>
        <span class="badge badge-advanced">Advanced</span>

        <div class="card" style="margin-top: 20px;">
            <h2>ü§î What are Regular Expressions?</h2>
            <p>Regular expressions (regex) are <strong>patterns</strong> used to match text. Think of them as "super-powered search queries"!</p>

            <div class="code-block">
<span class="comment">// Two ways to create regex:</span>
<span class="keyword">let</span> <span class="variable">regex1</span> <span class="operator">=</span> <span class="operator">/hello/</span>;                 <span class="comment">// Literal notation</span>
<span class="keyword">let</span> <span class="variable">regex2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">RegExp</span>(<span class="string">"hello"</span>);   <span class="comment">// Constructor</span>
            </div>
        </div>

        <div class="card">
            <h2>üè≥Ô∏è Common Flags</h2>
            <table class="method-table">
                <tr><th>Flag</th><th>Meaning</th><th>Example</th></tr>
                <tr><td><code>g</code></td><td>Global ‚Äî find ALL matches</td><td><code>/cat/g</code></td></tr>
                <tr><td><code>i</code></td><td>Case-insensitive</td><td><code>/cat/i</code></td></tr>
                <tr><td><code>m</code></td><td>Multi-line</td><td><code>/^cat/m</code></td></tr>
            </table>
        </div>

        <div class="card">
            <h2>üì¶ Special Characters</h2>
            <table class="method-table">
                <tr><th>Pattern</th><th>Matches</th><th>Example</th></tr>
                <tr><td><code>.</code></td><td>Any character (except newline)</td><td><code>/h.t/</code> ‚Üí "hat", "hot"</td></tr>
                <tr><td><code>\d</code></td><td>Any digit (0-9)</td><td><code>/\d+/</code> ‚Üí "42"</td></tr>
                <tr><td><code>\w</code></td><td>Word char (a-z, A-Z, 0-9, _)</td><td><code>/\w+/</code> ‚Üí "hello"</td></tr>
                <tr><td><code>\s</code></td><td>Whitespace (space, tab, newline)</td><td><code>/\s+/</code> ‚Üí " "</td></tr>
                <tr><td><code>^</code></td><td>Start of string</td><td><code>/^Hello/</code></td></tr>
                <tr><td><code>$</code></td><td>End of string</td><td><code>/world$/</code></td></tr>
                <tr><td><code>*</code></td><td>0 or more</td><td><code>/go*d/</code> ‚Üí "gd", "god", "good"</td></tr>
                <tr><td><code>+</code></td><td>1 or more</td><td><code>/go+d/</code> ‚Üí "god", "good"</td></tr>
                <tr><td><code>?</code></td><td>0 or 1</td><td><code>/colou?r/</code> ‚Üí "color", "colour"</td></tr>
                <tr><td><code>[abc]</code></td><td>Any char in set</td><td><code>/[aeiou]/</code> ‚Üí vowels</td></tr>
                <tr><td><code>[^abc]</code></td><td>Any char NOT in set</td><td><code>/[^0-9]/</code> ‚Üí non-digit</td></tr>
                <tr><td><code>{n}</code></td><td>Exactly n times</td><td><code>/\d{3}/</code> ‚Üí "123"</td></tr>
                <tr><td><code>{n,m}</code></td><td>Between n and m times</td><td><code>/\d{2,4}/</code></td></tr>
            </table>
        </div>

        <div class="card">
            <h2>üîß String Methods with Regex</h2>
            <div class="code-block">
<span class="keyword">let</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">"My phone: 123-456-7890, alt: 098-765-4321"</span>;

<span class="comment">// match() ‚Äî find matches</span>
<span class="variable">str</span>.<span class="method">match</span>(<span class="operator">/\d{3}-\d{3}-\d{4}/g</span>);
<span class="comment">// ["123-456-7890", "098-765-4321"]</span>

<span class="comment">// search() ‚Äî find position of first match</span>
<span class="variable">str</span>.<span class="method">search</span>(<span class="operator">/\d/</span>);  <span class="comment">// 10</span>

<span class="comment">// replace() with regex</span>
<span class="string">"Hello World"</span>.<span class="method">replace</span>(<span class="operator">/[aeiou]/gi</span>, <span class="string">"*"</span>);
<span class="comment">// "H*ll* W*rld"</span>

<span class="comment">// test() ‚Äî true/false</span>
<span class="operator">/^\d+$/</span>.<span class="method">test</span>(<span class="string">"12345"</span>);  <span class="comment">// true (all digits)</span>
<span class="operator">/^\d+$/</span>.<span class="method">test</span>(<span class="string">"123a5"</span>);  <span class="comment">// false</span>
            </div>
        </div>

        <div class="card">
            <h2>üéØ Common Regex Patterns</h2>
            <div class="code-block">
<span class="comment">// Email (simplified)</span>
<span class="keyword">let</span> <span class="variable">emailRegex</span> <span class="operator">=</span> <span class="operator">/^[\w.-]+@[\w.-]+\.\w{2,}$/</span>;
<span class="variable">emailRegex</span>.<span class="method">test</span>(<span class="string">"user@email.com"</span>);  <span class="comment">// true</span>

<span class="comment">// Phone number (US format)</span>
<span class="keyword">let</span> <span class="variable">phoneRegex</span> <span class="operator">=</span> <span class="operator">/^\d{3}-\d{3}-\d{4}$/</span>;
<span class="variable">phoneRegex</span>.<span class="method">test</span>(<span class="string">"123-456-7890"</span>);  <span class="comment">// true</span>

<span class="comment">// Only letters</span>
<span class="operator">/^[a-zA-Z]+$/</span>.<span class="method">test</span>(<span class="string">"Hello"</span>);  <span class="comment">// true</span>

<span class="comment">// URL (basic)</span>
<span class="operator">/^https?:\/\/.+/</span>.<span class="method">test</span>(<span class="string">"https://google.com"</span>);  <span class="comment">// true</span>

<span class="comment">// Remove extra spaces</span>
<span class="string">"too   many   spaces"</span>.<span class="method">replace</span>(<span class="operator">/\s+/g</span>, <span class="string">" "</span>);
<span class="comment">// "too many spaces"</span>
            </div>
        </div>

        <div class="card">
            <h2>üß™ Live Regex Tester</h2>
            <div class="regex-tester">
                <label style="font-size: 13px; color: #888;">Regex Pattern (without / /):</label>
                <input type="text" id="regexPattern" value="\d+" placeholder="e.g. \d+" oninput="testRegex()">
                <div style="display: flex; gap: 10px; align-items: center; margin: 5px 0;">
                    <label style="font-size: 13px; color: #888;"><input type="checkbox" id="regexG" checked onchange="testRegex()"> g</label>
                    <label style="font-size: 13px; color: #888;"><input type="checkbox" id="regexI" onchange="testRegex()"> i</label>
                </div>
                <label style="font-size: 13px; color: #888;">Test String:</label>
                <input type="text" id="regexTest" value="I have 3 cats and 12 dogs" placeholder="Text to test..." oninput="testRegex()">
                <div id="regexResults" class="regex-matches" style="margin-top: 15px;"></div>
            </div>
        </div>

        <div class="nav-arrows">
            <button class="btn btn-secondary" onclick="showSection('lesson6')">‚Üê Lesson 6</button>
            <button class="btn btn-primary" onclick="showSection('playground')">üéÆ Go to Playground ‚Üí</button>
        </div>
    </div>

    <!-- ========== PLAYGROUND ========== -->
    <div class="section" id="section-playground">
        <h1 style="margin-bottom: 20px;">üéÆ Interactive Playground</h1>
        <p style="color: #888; margin-bottom: 20px;">Write any JavaScript string code and see the results instantly!</p>

        <div class="playground">
            <div class="playground-header">
                <h4>‚ö° Live Code Editor</h4>
                <div>
                    <button class="btn btn-small btn-primary" onclick="runPlayground()">‚ñ∂ Run</button>
                    <button class="btn btn-small btn-secondary" onclick="clearPlayground()">üóë Clear</button>
                </div>
            </div>
            <div class="playground-body">
                <textarea id="playgroundCode" spellcheck="false">// üéÆ Try your string code here!

let name = "JavaScript";
console.log(`Hello, ${name}!`);
console.log("Length:", name.length);
console.log("Upper:", name.toUpperCase());
console.log("Slice:", name.slice(0, 4));
console.log("Includes 'Script':", name.includes("Script"));

// Try your own experiments! üöÄ
let reversed = name.split("").reverse().join("");
console.log("Reversed:", reversed);</textarea>
                <div class="playground-output" id="playgroundOutput">
                    <div style="color: #666; font-style: italic;">Click "Run" to see output...</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>üí° Code Snippets to Try</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <button class="btn btn-secondary btn-small" onclick="loadSnippet('reverse')">Reverse a String</button>
                <button class="btn btn-secondary btn-small" onclick="loadSnippet('capitalize')">Capitalize Words</button>
                <button class="btn btn-secondary btn-small" onclick="loadSnippet('count')">Count Vowels</button>
                <button class="btn btn-secondary btn-small" onclick="loadSnippet('palindrome')">Palindrome Check</button>
                <button class="btn btn-secondary btn-small" onclick="loadSnippet('truncate')">Truncate Text</button>
                <button class="btn btn-secondary btn-small" onclick="loadSnippet('camelCase')">camelCase Converter</button>
            </div>
        </div>
    </div>

    <!-- ========== MASTER QUIZ ========== -->
    <div class="section" id="section-quiz">
        <h1 style="margin-bottom: 20px;">üß† Master Quiz</h1>
        <p style="color: #888; margin-bottom: 20px;">Test your string knowledge! 15 questions covering everything you've learned.</p>

        <div id="quizArea"></div>

        <div style="text-align: center; margin: 20px 0;">
            <button class="btn btn-primary" id="submitQuiz" onclick="submitMasterQuiz()" style="display: none;">üìä Submit Quiz</button>
            <button class="btn btn-success" onclick="startMasterQuiz()">üéØ Start Quiz</button>
        </div>

        <div id="quizResults" style="display: none;"></div>
    </div>

    <!-- ========== EXERCISES ========== -->
    <div class="section" id="section-exercises">
        <h1 style="margin-bottom: 20px;">üí™ Coding Exercises</h1>
        <p style="color: #888; margin-bottom: 20px;">Practice makes perfect! Complete these challenges to solidify your skills.</p>

        <!-- Exercise 1 -->
        <div class="exercise">
            <h4>üí™ Exercise 1: Reverse a String <span class="badge badge-beginner">Beginner</span></h4>
            <div class="task">
                Write a function <code>reverseString(str)</code> that takes a string and returns it reversed.<br>
                Example: <code>reverseString("hello")</code> ‚Üí <code>"olleh"</code>
            </div>
            <textarea id="ex1Code" spellcheck="false">function reverseString(str) {
  // Your code here

}

// Test:
console.log(reverseString("hello")); // "olleh"
console.log(reverseString("JavaScript")); // "tpircSavaJ"</textarea>
            <button class="btn btn-success btn-small" onclick="runExercise(1)">‚ñ∂ Run & Check</button>
            <button class="btn btn-secondary btn-small" onclick="showHint(1)">üí° Hint</button>
            <button class="btn btn-secondary btn-small" onclick="showSolution(1)">üëÄ Solution</button>
            <div class="exercise-result" id="ex1Result"></div>
        </div>

        <!-- Exercise 2 -->
        <div class="exercise">
            <h4>üí™ Exercise 2: Count Vowels <span class="badge badge-beginner">Beginner</span></h4>
            <div class="task">
                Write a function <code>countVowels(str)</code> that returns the number of vowels (a, e, i, o, u) in a string. Case-insensitive!<br>
                Example: <code>countVowels("Hello World")</code> ‚Üí <code>3</code>
            </div>
            <textarea id="ex2Code" spellcheck="false">function countVowels(str) {
  // Your code here

}

// Test:
console.log(countVowels("Hello World")); // 3
console.log(countVowels("AEIOU")); // 5</textarea>
            <button class="btn btn-success btn-small" onclick="runExercise(2)">‚ñ∂ Run & Check</button>
            <button class="btn btn-secondary btn-small" onclick="showHint(2)">üí° Hint</button>
            <button class="btn btn-secondary btn-small" onclick="showSolution(2)">üëÄ Solution</button>
            <div class="exercise-result" id="ex2Result"></div>
        </div>

        <!-- Exercise 3 -->
        <div class="exercise">
            <h4>üí™ Exercise 3: Capitalize First Letter of Each Word <span class="badge badge-intermediate">Intermediate</span></h4>
            <div class="task">
                Write a function <code>capitalizeWords(str)</code> that capitalizes the first letter of each word.<br>
                Example: <code>capitalizeWords("hello world")</code> ‚Üí <code>"Hello World"</code>
            </div>
            <textarea id="ex3Code" spellcheck="false">function capitalizeWords(str) {
  // Your code here

}

// Test:
console.log(capitalizeWords("hello world")); // "Hello World"
console.log(capitalizeWords("javaScript is fun")); // "JavaScript Is Fun"</textarea>
            <button class="btn btn-success btn-small" onclick="runExercise(3)">‚ñ∂ Run & Check</button>
            <button class="btn btn-secondary btn-small" onclick="showHint(3)">üí° Hint</button>
            <button class="btn btn-secondary btn-small" onclick="showSolution(3)">üëÄ Solution</button>
            <div class="exercise-result" id="ex3Result"></div>
        </div>

        <!-- Exercise 4 -->
        <div class="exercise">
            <h4>üí™ Exercise 4: Check Palindrome <span class="badge badge-intermediate">Intermediate</span></h4>
            <div class="task">
                Write a function <code>isPalindrome(str)</code> that returns <code>true</code> if the string reads the same forwards and backwards (case-insensitive, ignoring spaces).<br>
                Example: <code>isPalindrome("racecar")</code> ‚Üí <code>true</code>
            </div>
            <textarea id="ex4Code" spellcheck="false">function isPalindrome(str) {
  // Your code here

}

// Test:
console.log(isPalindrome("racecar")); // true
console.log(isPalindrome("hello")); // false
console.log(isPalindrome("A man a plan a canal Panama")); // true</textarea>
            <button class="btn btn-success btn-small" onclick="runExercise(4)">‚ñ∂ Run & Check</button>
            <button class="btn btn-secondary btn-small" onclick="showHint(4)">üí° Hint</button>
            <button class="btn btn-secondary btn-small" onclick="showSolution(4)">üëÄ Solution</button>
            <div class="exercise-result" id="ex4Result"></div>
        </div>

        <!-- Exercise 5 -->
        <div class="exercise">
            <h4>üí™ Exercise 5: Validate Email (Regex) <span class="badge badge-advanced">Advanced</span></h4>
            <div class="task">
                Write a function <code>isValidEmail(email)</code> that uses regex to check if an email looks valid (has text, @, text, dot, text).<br>
                Example: <code>isValidEmail("user@example.com")</code> ‚Üí <code>true</code>
            </div>
            <textarea id="ex5Code" spellcheck="false">function isValidEmail(email) {
  // Your code here

}

// Test:
console.log(isValidEmail("user@example.com")); // true
console.log(isValidEmail("invalid-email")); // false
console.log(isValidEmail("test@test.co.uk")); // true</textarea>
            <button class="btn btn-success btn-small" onclick="runExercise(5)">‚ñ∂ Run & Check</button>
            <button class="btn btn-secondary btn-small" onclick="showHint(5)">üí° Hint</button>
            <button class="btn btn-secondary btn-small" onclick="showSolution(5)">üëÄ Solution</button>
            <div class="exercise-result" id="ex5Result"></div>
        </div>
    </div>

    <!-- ========== COMMON PITFALLS ========== -->
    <div class="section" id="section-pitfalls">
        <h1 style="margin-bottom: 20px;">‚ö†Ô∏è Common Mistakes & Pitfalls</h1>
        <p style="color: #888; margin-bottom: 20px;">Learn from common mistakes so you don't make them!</p>

        <div class="card">
            <h2>‚ö†Ô∏è Pitfall #1: Strings are Immutable</h2>
            <div class="comparison">
                <div class="dont">
                    <h4>‚ùå Wrong</h4>
                    <div class="code-block" style="margin: 10px 0;">
<span class="keyword">let</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">"hello"</span>;
<span class="variable">str</span>[<span class="number">0</span>] <span class="operator">=</span> <span class="string">"H"</span>; <span class="comment">// Silent fail!</span>
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">str</span>); <span class="comment">// "hello" üò±</span>
                    </div>
                </div>
                <div class="do">
                    <h4>‚úÖ Right</h4>
                    <div class="code-block" style="margin: 10px 0;">
<span class="keyword">let</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">"hello"</span>;
<span class="variable">str</span> <span class="operator">=</span> <span class="string">"H"</span> <span class="operator">+</span> <span class="variable">str</span>.<span class="method">slice</span>(<span class="number">1</span>);
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">str</span>); <span class="comment">// "Hello" ‚úÖ</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>‚ö†Ô∏è Pitfall #2: Case-Sensitivity</h2>
            <div class="comparison">
                <div class="dont">
                    <h4>‚ùå Wrong</h4>
                    <div class="code-block" style="margin: 10px 0;">
<span class="string">"Hello"</span>.<span class="method">includes</span>(<span class="string">"hello"</span>);
<span class="comment">// false! üò±</span>
                    </div>
                </div>
                <div class="do">
                    <h4>‚úÖ Right</h4>
                    <div class="code-block" style="margin: 10px 0;">
<span class="string">"Hello"</span>.<span class="method">toLowerCase</span>()
  .<span class="method">includes</span>(<span class="string">"hello"</span>);
<span class="comment">// true ‚úÖ</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>‚ö†Ô∏è Pitfall #3: String + Number Gotcha</h2>
            <div class="code-block">
<span class="console">console</span>.<span class="method">log</span>(<span class="string">"5"</span> <span class="operator">+</span> <span class="number">3</span>);    <span class="comment">// "53" ‚Äî string concatenation! üò±</span>
<span class="console">console</span>.<span class="method">log</span>(<span class="string">"5"</span> <span class="operator">-</span> <span class="number">3</span>);    <span class="comment">// 2  ‚Äî numeric subtraction (?!)</span>
<span class="console">console</span>.<span class="method">log</span>(<span class="string">"5"</span> <span class="operator">*</span> <span class="number">3</span>);    <span class="comment">// 15 ‚Äî numeric multiplication</span>

<span class="comment">// Fix: Convert string to number first</span>
<span class="console">console</span>.<span class="method">log</span>(<span class="function">Number</span>(<span class="string">"5"</span>) <span class="operator">+</span> <span class="number">3</span>);  <span class="comment">// 8 ‚úÖ</span>
<span class="console">console</span>.<span class="method">log</span>(<span class="operator">+</span><span class="string">"5"</span> <span class="operator">+</span> <span class="number">3</span>);         <span class="comment">// 8 ‚úÖ (unary +)</span>
            </div>
            <div class="pitfall">
                <h4>‚ö†Ô∏è The + operator has dual meaning!</h4>
                <p>When either side is a string, <code>+</code> concatenates. All other math operators (<code>- * / %</code>) convert strings to numbers automatically. This inconsistency trips up everyone!</p>
            </div>
        </div>

        <div class="card">
            <h2>‚ö†Ô∏è Pitfall #4: replace() Only Replaces First Match</h2>
            <div class="comparison">
                <div class="dont">
                    <h4>‚ùå Surprise!</h4>
                    <div class="code-block" style="margin: 10px 0;">
<span class="string">"aaa"</span>.<span class="method">replace</span>(<span class="string">"a"</span>, <span class="string">"b"</span>);
<span class="comment">// "baa" ‚Äî only first one! üò±</span>
                    </div>
                </div>
                <div class="do">
                    <h4>‚úÖ Replace All</h4>
                    <div class="code-block" style="margin: 10px 0;">
<span class="string">"aaa"</span>.<span class="method">replaceAll</span>(<span class="string">"a"</span>, <span class="string">"b"</span>);
<span class="comment">// "bbb" ‚úÖ</span>
<span class="comment">// or: "aaa".replace(/a/g, "b")</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>‚ö†Ô∏è Pitfall #5: Comparing Strings with == vs ===</h2>
            <div class="code-block">
<span class="comment">// == does type coercion</span>
<span class="string">"5"</span> <span class="operator">==</span> <span class="number">5</span>;     <span class="comment">// true üò±</span>
<span class="string">""</span> <span class="operator">==</span> <span class="number">0</span>;      <span class="comment">// true üò±</span>
<span class="string">"  "</span> <span class="operator">==</span> <span class="number">0</span>;    <span class="comment">// true üò±üò±</span>

<span class="comment">// === checks type AND value (always use this!)</span>
<span class="string">"5"</span> <span class="operator">===</span> <span class="number">5</span>;    <span class="comment">// false ‚úÖ</span>
<span class="string">""</span> <span class="operator">===</span> <span class="number">0</span>;     <span class="comment">// false ‚úÖ</span>
<span class="string">"5"</span> <span class="operator">===</span> <span class="string">"5"</span>;  <span class="comment">// true ‚úÖ</span>
            </div>
        </div>

        <div class="card">
            <h2>‚ö†Ô∏è Pitfall #6: Forgetting that Methods Return New Strings</h2>
            <div class="comparison">
                <div class="dont">
                    <h4>‚ùå Wrong</h4>
                    <div class="code-block" style="margin: 10px 0;">
<span class="keyword">let</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">"alice"</span>;
<span class="variable">name</span>.<span class="method">toUpperCase</span>();
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">name</span>);
<span class="comment">// "alice" ‚Äî unchanged! üò±</span>
                    </div>
                </div>
                <div class="do">
                    <h4>‚úÖ Right</h4>
                    <div class="code-block" style="margin: 10px 0;">
<span class="keyword">let</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">"alice"</span>;
<span class="variable">name</span> <span class="operator">=</span> <span class="variable">name</span>.<span class="method">toUpperCase</span>();
<span class="console">console</span>.<span class="method">log</span>(<span class="variable">name</span>);
<span class="comment">// "ALICE" ‚úÖ</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== CHEAT SHEET ========== -->
    <div class="section" id="section-cheatsheet">
        <h1 style="margin-bottom: 20px;">üìã String Methods Cheat Sheet</h1>
        <p style="color: #888; margin-bottom: 20px;">Your quick reference for all string methods!</p>

        <div class="card">
            <h2>üìè Properties & Access</h2>
            <div class="cheat-grid">
                <div class="cheat-item">
                    <div class="method-name">.length</div>
                    <div class="method-desc">Number of characters</div>
                    <div class="method-example">"Hello".length ‚Üí 5</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">[index]</div>
                    <div class="method-desc">Character at position</div>
                    <div class="method-example">"Hello"[0] ‚Üí "H"</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.at(index)</div>
                    <div class="method-desc">Supports negative index</div>
                    <div class="method-example">"Hello".at(-1) ‚Üí "o"</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.charAt(index)</div>
                    <div class="method-desc">Character at position</div>
                    <div class="method-example">"Hello".charAt(0) ‚Üí "H"</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.charCodeAt(index)</div>
                    <div class="method-desc">Unicode value</div>
                    <div class="method-example">"A".charCodeAt(0) ‚Üí 65</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>üîç Search Methods</h2>
            <div class="cheat-grid">
                <div class="cheat-item">
                    <div class="method-name">.indexOf(str)</div>
                    <div class="method-desc">First occurrence position (-1 if not found)</div>
                    <div class="method-example">"Hello".indexOf("l") ‚Üí 2</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.lastIndexOf(str)</div>
                    <div class="method-desc">Last occurrence position</div>
                    <div class="method-example">"Hello".lastIndexOf("l") ‚Üí 3</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.includes(str)</div>
                    <div class="method-desc">Contains substring?</div>
                    <div class="method-example">"Hello".includes("ell") ‚Üí true</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.startsWith(str)</div>
                    <div class="method-desc">Starts with?</div>
                    <div class="method-example">"Hello".startsWith("He") ‚Üí true</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.endsWith(str)</div>
                    <div class="method-desc">Ends with?</div>
                    <div class="method-example">"Hello".endsWith("lo") ‚Üí true</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.search(regex)</div>
                    <div class="method-desc">Search with regex</div>
                    <div class="method-example">"Hello123".search(/\d/) ‚Üí 5</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.match(regex)</div>
                    <div class="method-desc">Find regex matches</div>
                    <div class="method-example">"ab12".match(/\d/g) ‚Üí ["1","2"]</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.matchAll(regex)</div>
                    <div class="method-desc">Iterator of all matches</div>
                    <div class="method-example">Returns iterator with details</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>‚úÇÔ∏è Extract & Modify</h2>
            <div class="cheat-grid">
                <div class="cheat-item">
                    <div class="method-name">.slice(start, end)</div>
                    <div class="method-desc">Extract section (supports negative)</div>
                    <div class="method-example">"Hello".slice(1,4) ‚Üí "ell"</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.substring(start, end)</div>
                    <div class="method-desc">Extract section (no negative)</div>
                    <div class="method-example">"Hello".substring(1,4) ‚Üí "ell"</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.replace(old, new)</div>
                    <div class="method-desc">Replace first match</div>
                    <div class="method-example">"aaa".replace("a","b") ‚Üí "baa"</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.replaceAll(old, new)</div>
                    <div class="method-desc">Replace all matches</div>
                    <div class="method-example">"aaa".replaceAll("a","b") ‚Üí "bbb"</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.split(separator)</div>
                    <div class="method-desc">Split into array</div>
                    <div class="method-example">"a,b,c".split(",") ‚Üí ["a","b","c"]</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.concat(str)</div>
                    <div class="method-desc">Combine strings</div>
                    <div class="method-example">"Hi".concat(" ","there") ‚Üí "Hi there"</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>üîÑ Transform</h2>
            <div class="cheat-grid">
                <div class="cheat-item">
                    <div class="method-name">.toUpperCase()</div>
                    <div class="method-desc">All uppercase</div>
                    <div class="method-example">"hello".toUpperCase() ‚Üí "HELLO"</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.toLowerCase()</div>
                    <div class="method-desc">All lowercase</div>
                    <div class="method-example">"HELLO".toLowerCase() ‚Üí "hello"</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.trim()</div>
                    <div class="method-desc">Remove whitespace both sides</div>
                    <div class="method-example">"  hi  ".trim() ‚Üí "hi"</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.trimStart()</div>
                    <div class="method-desc">Remove leading whitespace</div>
                    <div class="method-example">"  hi  ".trimStart() ‚Üí "hi  "</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.trimEnd()</div>
                    <div class="method-desc">Remove trailing whitespace</div>
                    <div class="method-example">"  hi  ".trimEnd() ‚Üí "  hi"</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.repeat(n)</div>
                    <div class="method-desc">Repeat n times</div>
                    <div class="method-example">"Ha".repeat(3) ‚Üí "HaHaHa"</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.padStart(len, str)</div>
                    <div class="method-desc">Pad from start</div>
                    <div class="method-example">"5".padStart(3,"0") ‚Üí "005"</div>
                </div>
                <div class="cheat-item">
                    <div class="method-name">.padEnd(len, str)</div>
                    <div class="method-desc">Pad from end</div>
                    <div class="method-example">"hi".padEnd(5,".") ‚Üí "hi..."</div>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
// ==========================================
// APP STATE
// ==========================================
const state = {
    currentSection: 'welcome',
    lessonsVisited: new Set(),
    quizAnswers: {},
    quizScore: 0,
    exercisesDone: 0,
    totalLessons: 7
};

// ==========================================
// BACKGROUND ANIMATION
// ==========================================
function createParticles() {
    const bg = document.getElementById('bgAnimation');
    const colors = ['#6c5ce7', '#00cec9', '#fd79a8', '#fdcb6e'];
    for (let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        const size = Math.random() * 200 + 50;
        particle.style.width = size + 'px';
        particle.style.height = size + 'px';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.background = colors[Math.floor(Math.random() * colors.length)];
        particle.style.animationDelay = Math.random() * 15 + 's';
        particle.style.animationDuration = (Math.random() * 20 + 10) + 's';
        bg.appendChild(particle);
    }
}
createParticles();

// ==========================================
// NAVIGATION
// ==========================================
function showSection(sectionId) {
    // Track lesson visits
    if (sectionId.startsWith('lesson')) {
        state.lessonsVisited.add(sectionId);
    }

    state.currentSection = sectionId;

    // Hide all sections
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));

    // Show target
    const target = document.getElementById('section-' + sectionId);
    if (target) target.classList.add('active');

    // Update nav
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    const navItem = document.querySelector(`.nav-item[data-section="${sectionId}"]`);
    if (navItem) navItem.classList.add('active');

    // Update progress
    updateProgress();

    // Initialize section-specific content
    initSectionContent(sectionId);

    // Close mobile nav
    if (window.innerWidth <= 900) {
        document.getElementById('navContainer').classList.remove('open');
        document.getElementById('navToggle').classList.remove('shifted');
    }

    // Scroll to top
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

function toggleNav() {
    const nav = document.getElementById('navContainer');
    const btn = document.getElementById('navToggle');
    nav.classList.toggle('open');
    btn.classList.toggle('shifted');
}

function updateProgress() {
    const progress = (state.lessonsVisited.size / state.totalLessons) * 100;
    document.getElementById('progressFill').style.width = progress + '%';
    document.getElementById('progressText').textContent = Math.round(progress) + '% Complete';

    document.getElementById('lessonsCompleted').textContent = state.lessonsVisited.size;
    document.getElementById('quizScore').textContent = state.quizScore;
    document.getElementById('exercisesDone').textContent = state.exercisesDone;
}

// ==========================================
// SECTION INITIALIZATION
// ==========================================
function initSectionContent(sectionId) {
    switch (sectionId) {
        case 'lesson1':
            visualizeString('Hello!', 'stringVisual1');
            break;
        case 'lesson2':
            showLength();
            visualizeString('Hello', 'indexDemo', true);
            break;
        case 'lesson3':
            updateTemplateDemo();
            break;
        case 'lesson4':
            runSearchDemo();
            break;
        case 'lesson5':
            initSliceVisual();
            break;
        case 'lesson6':
            updateTransformDemo();
            break;
        case 'lesson7':
            testRegex();
            break;
    }
}

// ==========================================
// STRING VISUALIZER
// ==========================================
function visualizeString(str, containerId, showIndices = true) {
    const container = document.getElementById(containerId);
    if (!container) return;
    container.innerHTML = '';
    for (let i = 0; i < str.length; i++) {
        const box = document.createElement('div');
        box.className = 'char-box' + (str[i] === ' ' ? ' space' : '');
        box.textContent = str[i] === ' ' ? '‚ê£' : str[i];
        if (showIndices) {
            const index = document.createElement('span');
            index.className = 'index';
            index.textContent = i;
            box.appendChild(index);
        }
        container.appendChild(box);
    }
}

// ==========================================
// LENGTH VISUALIZER
// ==========================================
function showLength() {
    const input = document.getElementById('lengthInput');
    if (!input) return;
    const val = input.value;
    document.getElementById('lengthOutput').textContent = val.length;
    visualizeString(val, 'lengthVisual');
}

// ==========================================
// TEMPLATE LITERAL DEMO
// ==========================================
function updateTemplateDemo() {
    const name = document.getElementById('tlName')?.value || 'Alice';
    const age = parseInt(document.getElementById('tlAge')?.value) || 25;
    const city = document.getElementById('tlCity')?.value || 'London';
    const hobby = document.getElementById('tlHobby')?.value || 'coding';

    if (document.getElementById('tlNameShow')) {
        document.getElementById('tlNameShow').textContent = name;
        document.getElementById('tlAgeShow').textContent = age;
        document.getElementById('tlCityShow').textContent = city;
        document.getElementById('tlHobbyShow').textContent = hobby;
        document.getElementById('tlYearsShow').textContent = '5';
        document.getElementById('tlFutureAgeShow').textContent = age + 5;
    }

    const output = document.getElementById('tlOutput');
    if (output) {
        output.textContent = `My name is ${name}.\nI'm ${age} years old, living in ${city}.\nI love ${hobby}! In 5 years I'll be ${age + 5}.`;
    }
}

// ==========================================
// SEARCH DEMO
// ==========================================
function runSearchDemo() {
    const str = document.getElementById('searchStr')?.value || '';
    const term = document.getElementById('searchTerm')?.value || '';
    const results = document.getElementById('searchResults');
    if (!results) return;

    if (!term) {
        results.innerHTML = '<span style="color: #666;">Enter a search term...</span>';
        return;
    }

    let html = '';
    html += `<div><span style="color: #888;">.indexOf("${term}"):</span> <span style="color: ${str.indexOf(term) >= 0 ? 'var(--success)' : 'var(--danger)'};">${str.indexOf(term)}</span></div>`;
    html += `<div><span style="color: #888;">.lastIndexOf("${term}"):</span> <span style="color: ${str.lastIndexOf(term) >= 0 ? 'var(--success)' : 'var(--danger)'};">${str.lastIndexOf(term)}</span></div>`;
    html += `<div><span style="color: #888;">.includes("${term}"):</span> <span style="color: ${str.includes(term) ? 'var(--success)' : 'var(--danger)'};">${str.includes(term)}</span></div>`;
    html += `<div><span style="color: #888;">.startsWith("${term}"):</span> <span style="color: ${str.startsWith(term) ? 'var(--success)' : 'var(--danger)'};">${str.startsWith(term)}</span></div>`;
    html += `<div><span style="color: #888;">.endsWith("${term}"):</span> <span style="color: ${str.endsWith(term) ? 'var(--success)' : 'var(--danger)'};">${str.endsWith(term)}</span></div>`;

    results.innerHTML = html;
}

// ==========================================
// SLICE VISUALIZER
// ==========================================
function initSliceVisual() {
    updateSliceVisual();
}

function updateSliceVisual() {
    const str = "Hello, World!";
    const start = parseInt(document.getElementById('sliceStart')?.value) || 0;
    const end = parseInt(document.getElementById('sliceEnd')?.value);

    const container = document.getElementById('sliceVisual');
    if (!container) return;

    const result = isNaN(end) ? str.slice(start) : str.slice(start, end);
    const resultEl = document.getElementById('sliceResult');
    if (resultEl) resultEl.textContent = result;

    // Determine highlighted range
    let actualStart = start < 0 ? Math.max(0, str.length + start) : Math.min(start, str.length);
    let actualEnd = isNaN(end) ? str.length : (end < 0 ? Math.max(0, str.length + end) : Math.min(end, str.length));

    container.innerHTML = '';
    for (let i = 0; i < str.length; i++) {
        const box = document.createElement('div');
        const isHighlighted = i >= actualStart && i < actualEnd;
        box.className = 'char-box' + (isHighlighted ? ' highlight' : '') + (str[i] === ' ' ? ' space' : '');
        box.textContent = str[i] === ' ' ? '‚ê£' : str[i];
        const index = document.createElement('span');
        index.className = 'index';
        index.textContent = i;
        box.appendChild(index);
        container.appendChild(box);
    }
}

// ==========================================
// TRANSFORM DEMO
// ==========================================
function updateTransformDemo() {
    const str = document.getElementById('transformInput')?.value || '';
    const results = document.getElementById('transformResults');
    if (!results) return;

    const escStr = str.replace(/</g, '&lt;').replace(/>/g, '&gt;');
    const trimmed = str.trim().replace(/</g, '&lt;').replace(/>/g, '&gt;');

    let html = `
        <div><span style="color: #888;">.toUpperCase():</span> <span style="color: var(--secondary);">"${str.toUpperCase().replace(/</g, '&lt;')}"</span></div>
        <div><span style="color: #888;">.toLowerCase():</span> <span style="color: var(--secondary);">"${str.toLowerCase().replace(/</g, '&lt;')}"</span></div>
        <div><span style="color: #888;">.trim():</span> <span style="color: var(--secondary);">"${trimmed}"</span></div>
        <div><span style="color: #888;">.split(" "):</span> <span style="color: var(--secondary);">[${str.trim().split(" ").map(s => '"' + s.replace(/</g, '&lt;') + '"').join(", ")}]</span></div>
        <div><span style="color: #888;">.repeat(2):</span> <span style="color: var(--secondary);">"${str.trim().repeat(2).replace(/</g, '&lt;')}"</span></div>
        <div><span style="color: #888;">.length:</span> <span style="color: var(--secondary);">${str.length}</span></div>
        <div><span style="color: #888;">.replace(/\\s+/g, "-"):</span> <span style="color: var(--secondary);">"${str.trim().replace(/\s+/g, "-").replace(/</g, '&lt;')}"</span></div>
    `;
    results.innerHTML = html;
}

// ==========================================
// REGEX TESTER
// ==========================================
function testRegex() {
    const patternStr = document.getElementById('regexPattern')?.value || '';
    const testStr = document.getElementById('regexTest')?.value || '';
    const gFlag = document.getElementById('regexG')?.checked;
    const iFlag = document.getElementById('regexI')?.checked;
    const results = document.getElementById('regexResults');

    if (!results) return;

    if (!patternStr) {
        results.innerHTML = '<span style="color: #666;">Enter a regex pattern...</span>';
        return;
    }

    try {
        let flags = '';
        if (gFlag) flags += 'g';
        if (iFlag) flags += 'i';

        const regex = new RegExp(patternStr, flags);
        const matches = testStr.match(regex);

        let html = '';
        if (matches) {
            html += `<div style="color: var(--success);">‚úÖ ${matches.length} match(es) found: [${matches.map(m => '"' + m + '"').join(', ')}]</div>`;

            // Highlight matches in text
            let highlighted = testStr.replace(regex, match => `<span class="match">${match}</span>`);
            html += `<div style="margin-top: 10px;">Text: ${highlighted}</div>`;
        } else {
            html += `<div style="color: var(--danger);">‚ùå No matches found</div>`;
        }

        html += `<div style="margin-top: 10px; color: #666;">regex.test(): ${regex.test(testStr)}</div>`;
        results.innerHTML = html;
    } catch (e) {
        results.innerHTML = `<div style="color: var(--danger);">‚ùå Invalid regex: ${e.message}</div>`;
    }
}

// ==========================================
// PLAYGROUND
// ==========================================
function runPlayground() {
    const code = document.getElementById('playgroundCode').value;
    const output = document.getElementById('playgroundOutput');
    output.innerHTML = '';

    const originalLog = console.log;
    const logs = [];

    console.log = function(...args) {
        logs.push(args.map(a => {
            if (typeof a === 'object') return JSON.stringify(a, null, 2);
            return String(a);
        }).join(' '));
    };

    try {
        eval(code);
        logs.forEach(log => {
            const div = document.createElement('div');
            div.className = 'output-line';
            div.textContent = log;
            output.appendChild(div);
        });
        if (logs.length === 0) {
            output.innerHTML = '<div style="color: #666; font-style: italic;">No console.log output. Use console.log() to see results.</div>';
        }
    } catch (e) {
        const div = document.createElement('div');
        div.className = 'output-line error';
        div.textContent = '‚ùå Error: ' + e.message;
        output.appendChild(div);
    }

    console.log = originalLog;
}

function clearPlayground() {
    document.getElementById('playgroundOutput').innerHTML = '<div style="color: #666; font-style: italic;">Click "Run" to see output...</div>';
}

function loadSnippet(name) {
    const snippets = {
        reverse: `// üîÑ Reverse a String
function reverseString(str) {
  return str.split("").reverse().join("");
}

console.log(reverseString("Hello"));      // "olleH"
console.log(reverseString("JavaScript")); // "tpircSavaJ"
console.log(reverseString("12345"));      // "54321"`,

        capitalize: `// üìù Capitalize First Letter of Each Word
function capitalizeWords(str) {
  return str.split(" ")
    .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())
    .join(" ");
}

console.log(capitalizeWords("hello world"));       // "Hello World"
console.log(capitalizeWords("javaScript is FUN")); // "Javascript Is Fun"`,

        count: `// üî¢ Count Vowels
function countVowels(str) {
  const matches = str.match(/[aeiou]/gi);
  return matches ? matches.length : 0;
}

console.log(countVowels("Hello World"));     // 3
console.log(countVowels("AEIOU"));           // 5
console.log(countVowels("bcdfg"));           // 0
console.log(countVowels("Beautiful Day"));   // 6`,

        palindrome: `// üîÑ Palindrome Checker
function isPalindrome(str) {
  const clean = str.toLowerCase().replace(/[^a-z0-9]/g, "");
  return clean === clean.split("").reverse().join("");
}

console.log(isPalindrome("racecar"));    // true
console.log(isPalindrome("hello"));      // false
console.log(isPalindrome("A man a plan a canal Panama")); // true
console.log(isPalindrome("Was it a car or a cat I saw?")); // true`,

        truncate: `// ‚úÇÔ∏è Truncate Text
function truncate(str, maxLength) {
  if (str.length <= maxLength) return str;
  return str.slice(0, maxLength - 3) + "...";
}

console.log(truncate("Hello World", 20));  // "Hello World"
console.log(truncate("Hello World", 8));   // "Hello..."
console.log(truncate("This is a very long sentence", 15)); // "This is a ve..."`,

        camelCase: `// üê´ Convert to camelCase
function toCamelCase(str) {
  return str
    .toLowerCase()
    .replace(/[^a-zA-Z0-9]+(.)/g, (_, char) => char.toUpperCase());
}

console.log(toCamelCase("hello world"));         // "helloWorld"
console.log(toCamelCase("my-variable-name"));    // "myVariableName"
console.log(toCamelCase("some_function_name"));  // "someFunctionName"
console.log(toCamelCase("THE QUICK BROWN FOX")); // "theQuickBrownFox"`
    };

    document.getElementById('playgroundCode').value = snippets[name] || '';
    runPlayground();
}

// ==========================================
// QUICK QUIZ (inline in lessons)
// ==========================================
function checkQuickQuiz(element, isCorrect, quizId) {
    const options = document.querySelectorAll(`#${quizId} .quiz-option`);
    const feedback = document.getElementById(`${quizId}-feedback`);

    // Disable all options
    options.forEach(opt => {
        opt.style.pointerEvents = 'none';
    });

    if (isCorrect) {
        element.classList.add('correct');
        feedback.className = 'quiz-feedback show correct';
        feedback.textContent = 'üéâ Correct! Great job!';
    } else {
        element.classList.add('wrong');
        // Highlight correct one
        options.forEach(opt => {
            if (opt.onclick.toString().includes('true')) {
                opt.classList.add('correct');
            }
        });
        feedback.className = 'quiz-feedback show wrong';
        feedback.textContent = '‚ùå Not quite. The correct answer is highlighted above.';
    }
}

// ==========================================
// MASTER QUIZ
// ==========================================
const masterQuizQuestions = [
    {
        q: 'What does <code>"Hello".length</code> return?',
        options: ['4', '5', '6', 'undefined'],
        correct: 1,
        explanation: 'The string "Hello" has 5 characters: H, e, l, l, o.'
    },
    {
        q: 'What does <code>"JavaScript"[0]</code> return?',
        options: ['"J"', '"j"', '"JavaScript"', 'undefined'],
        correct: 0,
        explanation: 'Bracket notation returns the character at the given index. Index 0 is "J".'
    },
    {
        q: 'Which creates a multi-line string?',
        options: ['"line1\\nline2"', "'line1\\nline2'", '`line1\\nline2`', 'All of the above'],
        correct: 3,
        explanation: 'All three create multi-line output. But only backticks allow literal line breaks in the source code.'
    },
    {
        q: 'What does <code>"Hello World".slice(6)</code> return?',
        options: ['"Hello"', '"World"', '"World!"', '" World"'],
        correct: 1,
        explanation: 'slice(6) extracts from index 6 to the end. Index 6 is "W", so we get "World".'
    },
    {
        q: 'What does <code>"abc".repeat(3)</code> return?',
        options: ['"abc 3"', '"abcabcabc"', '["abc","abc","abc"]', '"aaa bbb ccc"'],
        correct: 1,
        explanation: 'repeat(3) duplicates the string 3 times: "abcabcabc".'
    },
    {
        q: 'What does <code>"Hello".includes("hello")</code> return?',
        options: ['true', 'false', '"Hello"', 'Error'],
        correct: 1,
        explanation: 'includes() is case-sensitive. "Hello" ‚â† "hello", so it returns false.'
    },
    {
        q: 'What does <code>"   hi   ".trim()</code> return?',
        options: ['"hi   "', '"   hi"', '"hi"', '"h i"'],
        correct: 2,
        explanation: 'trim() removes whitespace from both the beginning and end.'
    },
    {
        q: 'What does <code>"5" + 3</code> evaluate to?',
        options: ['8', '"53"', '"8"', 'Error'],
        correct: 1,
        explanation: 'When + is used with a string, it concatenates. "5" + 3 = "53".'
    },
    {
        q: 'What does <code>"cats,dogs,fish".split(",")</code> return?',
        options: ['"cats dogs fish"', '["cats","dogs","fish"]', '3', '["cats,dogs,fish"]'],
        correct: 1,
        explanation: 'split(",") divides the string at each comma, creating an array of 3 elements.'
    },
    {
        q: 'What does <code>/\\d+/.test("abc123")</code> return?',
        options: ['true', 'false', '"123"', '3'],
        correct: 0,
        explanation: '\\d+ matches one or more digits. "abc123" contains digits, so test() returns true.'
    },
    {
        q: 'What is the result of <code>"Hello".at(-1)</code>?',
        options: ['"H"', '"o"', 'undefined', 'Error'],
        correct: 1,
        explanation: '.at(-1) returns the last character. For "Hello", that\'s "o".'
    },
    {
        q: 'What does <code>"aaa".replace("a", "b")</code> return?',
        options: ['"bbb"', '"baa"', '"aab"', '"aba"'],
        correct: 1,
        explanation: 'replace() only replaces the FIRST match. Use replaceAll() or /a/g for all.'
    },
    {
        q: 'Which method checks if a string starts with a specific substring?',
        options: ['.beginsWith()', '.startsWith()', '.starts()', '.hasStart()'],
        correct: 1,
        explanation: 'The correct method name is .startsWith().'
    },
    {
        q: 'What does <code>`${2 + 3}`</code> produce?',
        options: ['"${2 + 3}"', '"2 + 3"', '"5"', '5'],
        correct: 2,
        explanation: 'Template literals evaluate expressions inside ${}. 2+3=5, converted to string "5".'
    },
    {
        q: 'Can you change a character in a string with <code>str[0] = "X"</code>?',
        options: ['Yes, it works', 'No, strings are immutable', 'Only with let', 'Only with var'],
        correct: 1,
        explanation: 'Strings are immutable in JavaScript. You must create a new string instead.'
    }
];

function startMasterQuiz() {
    state.quizAnswers = {};
    const area = document.getElementById('quizArea');
    document.getElementById('quizResults').style.display = 'none';

    let html = '';
    masterQuizQuestions.forEach((q, i) => {
        html += `
            <div class="quiz-container" style="border-color: rgba(108,92,231,0.3);">
                <div class="quiz-question">
                    <span class="question-number">Question ${i + 1}/${masterQuizQuestions.length}: </span>
                    ${q.q}
                </div>
                <div class="quiz-options" id="mq${i}">
                    ${q.options.map((opt, j) => `
                        <div class="quiz-option" onclick="selectMasterQuizAnswer(${i}, ${j}, this)">${opt}</div>
                    `).join('')}
                </div>
            </div>
        `;
    });

    area.innerHTML = html;
    document.getElementById('submitQuiz').style.display = 'inline-flex';
}

function selectMasterQuizAnswer(questionIndex, optionIndex, element) {
    state.quizAnswers[questionIndex] = optionIndex;

    // Visual feedback
    const options = document.querySelectorAll(`#mq${questionIndex} .quiz-option`);
    options.forEach(o => o.classList.remove('selected'));
    element.classList.add('selected');
}

function submitMasterQuiz() {
    let score = 0;
    let total = masterQuizQuestions.length;

    masterQuizQuestions.forEach((q, i) => {
        const options = document.querySelectorAll(`#mq${i} .quiz-option`);
        options.forEach((opt, j) => {
            opt.style.pointerEvents = 'none';
            if (j === q.correct) {
                opt.classList.add('correct');
            }
            if (state.quizAnswers[i] === j && j !== q.correct) {
                opt.classList.add('wrong');
            }
        });

        if (state.quizAnswers[i] === q.correct) {
            score++;
        }
    });

    state.quizScore = score;

    const resultsDiv = document.getElementById('quizResults');
    const percentage = Math.round((score / total) * 100);
    let message = '';
    let emoji = '';

    if (percentage >= 90) { message = 'Outstanding! You\'re a String Master! üèÜ'; emoji = 'üèÜ'; }
    else if (percentage >= 70) { message = 'Great job! You know your strings well! üí™'; emoji = 'üí™'; }
    else if (percentage >= 50) { message = 'Good start! Review the lessons for topics you missed. üìö'; emoji = 'üìö'; }
    else { message = 'Keep learning! Go through the lessons again and try once more. üå±'; emoji = 'üå±'; }

    resultsDiv.innerHTML = `
        <div class="scoreboard">
            <div class="score-number">${score}/${total}</div>
            <div class="score-label">${percentage}% ‚Äî ${message}</div>
        </div>
    `;
    resultsDiv.style.display = 'block';
    document.getElementById('submitQuiz').style.display = 'none';
    updateProgress();
}

// ==========================================
// EXERCISES
// ==========================================
const exerciseTests = {
    1: {
        tests: [
            { input: 'hello', expected: 'olleh' },
            { input: 'JavaScript', expected: 'tpircSavaJ' },
            { input: '', expected: '' }
        ],
        hint: 'Use .split("") to break into an array, .reverse() to reverse it, then .join("") to combine!',
        solution: `function reverseString(str) {
  return str.split("").reverse().join("");
}`
    },
    2: {
        tests: [
            { input: 'Hello World', expected: 3 },
            { input: 'AEIOU', expected: 5 },
            { input: 'bcdfg', expected: 0 }
        ],
        hint: 'Use .match(/[aeiou]/gi) to find all vowels with regex, or loop through and check each character!',
        solution: `function countVowels(str) {
  const matches = str.match(/[aeiou]/gi);
  return matches ? matches.length : 0;
}`
    },
    3: {
        tests: [
            { input: 'hello world', expected: 'Hello World' },
            { input: 'javaScript is fun', expected: 'Javascript Is Fun' }
        ],
        hint: 'Split into words, for each word: take charAt(0).toUpperCase() + slice(1).toLowerCase(), then join!',
        solution: `function capitalizeWords(str) {
  return str.split(" ")
    .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())
    .join(" ");
}`
    },
    4: {
        tests: [
            { input: 'racecar', expected: true },
            { input: 'hello', expected: false },
            { input: 'A man a plan a canal Panama', expected: true }
        ],
        hint: 'Clean the string: toLowerCase(), remove non-alphanumeric with .replace(/[^a-z0-9]/g, ""), then compare with its reverse.',
        solution: `function isPalindrome(str) {
  const clean = str.toLowerCase().replace(/[^a-z0-9]/g, "");
  return clean === clean.split("").reverse().join("");
}`
    },
    5: {
        tests: [
            { input: 'user@example.com', expected: true },
            { input: 'invalid-email', expected: false },
            { input: 'test@test.co.uk', expected: true }
        ],
        hint: 'Use a regex pattern like /^[\\w.-]+@[\\w.-]+\\.\\w{2,}$/ and the .test() method.',
        solution: `function isValidEmail(email) {
  const regex = /^[\\w.-]+@[\\w.-]+\\.\\w{2,}$/;
  return regex.test(email);
}`
    }
};

function runExercise(num) {
    const code = document.getElementById(`ex${num}Code`).value;
    const resultDiv = document.getElementById(`ex${num}Result`);
    const tests = exerciseTests[num].tests;

    const originalLog = console.log;
    const logs = [];
    console.log = function(...args) {
        logs.push(args.join(' '));
    };

    try {
        eval(code);

        // Determine function name
        const funcNames = ['reverseString', 'countVowels', 'capitalizeWords', 'isPalindrome', 'isValidEmail'];
        const funcName = funcNames[num - 1];

        let allPassed = true;
        let details = '';

        const func = eval(funcName);
        if (typeof func !== 'function') {
            throw new Error(`Function "${funcName}" not found!`);
        }

        tests.forEach((test, i) => {
            const result = func(test.input);
            const passed = result === test.expected;
            if (!passed) allPassed = false;
            details += `<div>${passed ? '‚úÖ' : '‚ùå'} ${funcName}("${test.input}") ‚Üí ${JSON.stringify(result)} ${passed ? '' : `(expected ${JSON.stringify(test.expected)})`}</div>`;
        });

        if (allPassed) {
            state.exercisesDone++;
            updateProgress();
        }

        resultDiv.className = `exercise-result show ${allPassed ? 'pass' : 'fail'}`;
        resultDiv.innerHTML = `<strong>${allPassed ? 'üéâ All tests passed!' : '‚ùå Some tests failed:'}</strong>${details}${logs.length ? '<div style="margin-top:10px;border-top:1px solid rgba(255,255,255,0.1);padding-top:10px;"><strong>Console output:</strong><br>' + logs.join('<br>') + '</div>' : ''}`;
    } catch (e) {
        resultDiv.className = 'exercise-result show fail';
        resultDiv.innerHTML = `<strong>‚ùå Error:</strong> ${e.message}`;
    }

    console.log = originalLog;
}

function showHint(num) {
    const resultDiv = document.getElementById(`ex${num}Result`);
    resultDiv.className = 'exercise-result show';
    resultDiv.style.background = 'rgba(0,206,201,0.1)';
    resultDiv.style.border = '1px solid rgba(0,206,201,0.3)';
    resultDiv.style.color = 'var(--secondary)';
    resultDiv.innerHTML = `üí° <strong>Hint:</strong> ${exerciseTests[num].hint}`;
}

function showSolution(num) {
    const resultDiv = document.getElementById(`ex${num}Result`);
    resultDiv.className = 'exercise-result show';
    resultDiv.style.background = 'rgba(108,92,231,0.1)';
    resultDiv.style.border = '1px solid rgba(108,92,231,0.3)';
    resultDiv.style.color = 'var(--primary-light)';
    resultDiv.innerHTML = `<strong>üëÄ Solution:</strong><pre style="margin-top: 10px; white-space: pre-wrap;">${exerciseTests[num].solution}</pre>`;
}

// ==========================================
// COPY CODE
// ==========================================
function copyCode(btn) {
    const block = btn.closest('.code-block');
    const text = block.textContent.replace('JavaScriptCopy', '').trim();
    navigator.clipboard.writeText(text).then(() => {
        btn.textContent = 'Copied!';
        setTimeout(() => btn.textContent = 'Copy', 2000);
    });
}

// ==========================================
// RESPONSIVE
// ==========================================
function handleResize() {
    if (window.innerWidth <= 900) {
        document.getElementById('navToggle').style.display = 'block';
    } else {
        document.getElementById('navToggle').style.display = 'none';
        document.getElementById('navContainer').classList.remove('open');
    }
}

window.addEventListener('resize', handleResize);
handleResize();

// ==========================================
// KEYBOARD SHORTCUTS
// ==========================================
document.addEventListener('keydown', function(e) {
    // Ctrl+Enter to run playground
    if (e.ctrlKey && e.key === 'Enter') {
        if (state.currentSection === 'playground') {
            runPlayground();
        }
    }
});

// ==========================================
// INITIALIZE
// ==========================================
updateProgress();
</script>

</body>
</html>