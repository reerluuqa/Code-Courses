<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Primitives Mastery</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0f0f1a;
            --bg-secondary: #1a1a2e;
            --bg-card: #16213e;
            --bg-code: #0d1117;
            --accent-1: #e94560;
            --accent-2: #0f3460;
            --accent-3: #533483;
            --accent-4: #00d2ff;
            --accent-5: #7c3aed;
            --text-primary: #e8e8e8;
            --text-secondary: #a0a0b8;
            --text-muted: #6b6b80;
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
            --string-color: #a5d6ff;
            --number-color: #79c0ff;
            --boolean-color: #ff7b72;
            --null-color: #ffa657;
            --undefined-color: #d2a8ff;
            --symbol-color: #7ee787;
            --bigint-color: #f2cc60;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
            pointer-events: none;
        }

        .bg-animation .particle {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
            animation: float linear infinite;
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.1; }
            90% { opacity: 0.1; }
            100% { transform: translateY(-10vh) rotate(720deg); opacity: 0; }
        }

        /* Header */
        .app-header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(15, 15, 26, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(233, 69, 96, 0.2);
            padding: 12px 24px;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 12px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 42px;
            height: 42px;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-5));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 18px;
            color: white;
        }

        .logo-text {
            font-size: 18px;
            font-weight: 700;
        }

        .logo-text span {
            color: var(--accent-1);
        }

        /* Progress Bar */
        .progress-container {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
            max-width: 400px;
            margin: 0 20px;
        }

        .progress-bar-bg {
            flex: 1;
            height: 8px;
            background: var(--bg-secondary);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-1), var(--accent-5), var(--accent-4));
            border-radius: 4px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .progress-text {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 600;
            white-space: nowrap;
        }

        /* XP and Streak */
        .stats {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .stat-badge {
            display: flex;
            align-items: center;
            gap: 6px;
            background: var(--bg-secondary);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }

        .stat-badge.xp { color: var(--warning); }
        .stat-badge.streak { color: var(--accent-4); }

        /* Main Content */
        .main-content {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
            padding: 30px 20px 100px;
        }

        /* Welcome Screen */
        .welcome-screen {
            text-align: center;
            padding: 60px 20px;
            animation: fadeInUp 0.8s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .welcome-screen h1 {
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 16px;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-4), var(--accent-5));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }

        .welcome-screen p {
            font-size: 18px;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 40px;
            line-height: 1.6;
        }

        .primitives-preview {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            margin-bottom: 40px;
        }

        .primitive-chip {
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            animation: popIn 0.5s ease backwards;
        }

        .primitive-chip:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .primitive-chip.string { background: rgba(165,214,255,0.15); color: var(--string-color); border-color: rgba(165,214,255,0.3); }
        .primitive-chip.number { background: rgba(121,192,255,0.15); color: var(--number-color); border-color: rgba(121,192,255,0.3); }
        .primitive-chip.boolean { background: rgba(255,123,114,0.15); color: var(--boolean-color); border-color: rgba(255,123,114,0.3); }
        .primitive-chip.null { background: rgba(255,166,87,0.15); color: var(--null-color); border-color: rgba(255,166,87,0.3); }
        .primitive-chip.undefined { background: rgba(210,168,255,0.15); color: var(--undefined-color); border-color: rgba(210,168,255,0.3); }
        .primitive-chip.symbol { background: rgba(126,231,135,0.15); color: var(--symbol-color); border-color: rgba(126,231,135,0.3); }
        .primitive-chip.bigint { background: rgba(242,204,96,0.15); color: var(--bigint-color); border-color: rgba(242,204,96,0.3); }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }

        .primitive-chip:nth-child(1) { animation-delay: 0.1s; }
        .primitive-chip:nth-child(2) { animation-delay: 0.2s; }
        .primitive-chip:nth-child(3) { animation-delay: 0.3s; }
        .primitive-chip:nth-child(4) { animation-delay: 0.4s; }
        .primitive-chip:nth-child(5) { animation-delay: 0.5s; }
        .primitive-chip:nth-child(6) { animation-delay: 0.6s; }
        .primitive-chip:nth-child(7) { animation-delay: 0.7s; }

        /* Buttons */
        .btn {
            padding: 14px 36px;
            border: none;
            border-radius: 12px;
            font-family: 'Inter', sans-serif;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-1), var(--accent-5));
            color: white;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(233, 69, 96, 0.4);
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid rgba(255,255,255,0.1);
        }

        .btn-secondary:hover {
            border-color: var(--accent-1);
            background: rgba(233, 69, 96, 0.1);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-small {
            padding: 8px 20px;
            font-size: 13px;
            border-radius: 8px;
        }

        /* Section Styles */
        .section {
            display: none;
            animation: fadeInUp 0.6s ease;
        }

        .section.active {
            display: block;
        }

        .section-header {
            margin-bottom: 30px;
        }

        .section-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        .section-badge.learn { background: rgba(0,210,255,0.15); color: var(--accent-4); }
        .section-badge.practice { background: rgba(124,58,237,0.15); color: var(--accent-5); }
        .section-badge.quiz { background: rgba(233,69,96,0.15); color: var(--accent-1); }

        .section-title {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 8px;
            line-height: 1.2;
        }

        .section-subtitle {
            font-size: 16px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Card */
        .card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.06);
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: rgba(255,255,255,0.12);
        }

        .card h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .card p {
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 16px;
        }

        /* Code Block */
        .code-block {
            background: var(--bg-code);
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            line-height: 1.8;
            overflow-x: auto;
            border: 1px solid rgba(255,255,255,0.06);
            position: relative;
        }

        .code-block .line-number {
            color: var(--text-muted);
            margin-right: 16px;
            user-select: none;
            display: inline-block;
            width: 20px;
            text-align: right;
        }

        .code-block .keyword { color: #ff7b72; }
        .code-block .string-val { color: #a5d6ff; }
        .code-block .number-val { color: #79c0ff; }
        .code-block .boolean-val { color: #ff7b72; }
        .code-block .null-val { color: #ffa657; }
        .code-block .undefined-val { color: #d2a8ff; }
        .code-block .comment { color: #6b6b80; font-style: italic; }
        .code-block .function { color: #d2a8ff; }
        .code-block .method { color: #7ee787; }
        .code-block .console { color: #79c0ff; }
        .code-block .operator { color: #ff7b72; }

        .code-run-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent-1);
            color: white;
            border: none;
            padding: 6px 14px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            transition: all 0.2s ease;
        }

        .code-run-btn:hover {
            background: #d63851;
        }

        .code-output {
            background: #0a0e14;
            border-radius: 8px;
            padding: 14px 18px;
            margin-top: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            color: var(--success);
            border: 1px solid rgba(16, 185, 129, 0.2);
            display: none;
        }

        .code-output.visible {
            display: block;
            animation: fadeInUp 0.3s ease;
        }

        .code-output .output-label {
            color: var(--text-muted);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            display: block;
        }

        /* Analogy Box */
        .analogy-box {
            background: linear-gradient(135deg, rgba(0,210,255,0.08), rgba(124,58,237,0.08));
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
            border-left: 4px solid var(--accent-4);
        }

        .analogy-box .analogy-label {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--accent-4);
            margin-bottom: 8px;
        }

        .analogy-box p {
            color: var(--text-primary) !important;
            margin-bottom: 0 !important;
        }

        /* Warning Box */
        .warning-box {
            background: rgba(245, 158, 11, 0.08);
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
            border-left: 4px solid var(--warning);
        }

        .warning-box .warning-label {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--warning);
            margin-bottom: 8px;
        }

        /* Interactive typeof checker */
        .typeof-checker {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 24px;
            margin: 20px 0;
        }

        .typeof-checker h4 {
            margin-bottom: 16px;
            font-size: 16px;
        }

        .typeof-input-group {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .typeof-input {
            flex: 1;
            min-width: 200px;
            background: var(--bg-code);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 12px 16px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 15px;
            outline: none;
            transition: border-color 0.3s;
        }

        .typeof-input:focus {
            border-color: var(--accent-4);
        }

        .typeof-result {
            padding: 14px 18px;
            background: var(--bg-code);
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            min-height: 48px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .typeof-result .type-tag {
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 700;
        }

        /* Exercise Area */
        .exercise-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 20px;
            border: 2px solid rgba(124,58,237,0.2);
        }

        .exercise-card h4 {
            color: var(--accent-5);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .exercise-card .exercise-question {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 16px;
            line-height: 1.5;
        }

        .exercise-input {
            width: 100%;
            background: var(--bg-code);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 14px 18px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 15px;
            outline: none;
            transition: border-color 0.3s;
            margin-bottom: 12px;
        }

        .exercise-input:focus {
            border-color: var(--accent-5);
        }

        .exercise-feedback {
            padding: 14px 18px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            display: none;
            align-items: center;
            gap: 10px;
            margin-top: 12px;
        }

        .exercise-feedback.correct {
            display: flex;
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .exercise-feedback.incorrect {
            display: flex;
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .exercise-feedback .explanation {
            font-weight: 400;
            color: var(--text-secondary);
            margin-top: 6px;
            font-size: 13px;
        }

        /* Quiz */
        .quiz-container {
            animation: fadeInUp 0.5s ease;
        }

        .quiz-progress {
            display: flex;
            gap: 6px;
            margin-bottom: 24px;
        }

        .quiz-dot {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--bg-secondary);
            transition: all 0.3s ease;
        }

        .quiz-dot.correct { background: var(--success); }
        .quiz-dot.incorrect { background: var(--error); }
        .quiz-dot.current { background: var(--accent-4); }

        .quiz-question-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 32px;
            border: 2px solid rgba(233, 69, 96, 0.2);
        }

        .quiz-question-number {
            font-size: 13px;
            color: var(--accent-1);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        .quiz-question-text {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 24px;
            line-height: 1.4;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            background: var(--bg-secondary);
            border: 2px solid rgba(255,255,255,0.08);
            border-radius: 12px;
            padding: 16px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 14px;
            font-size: 15px;
        }

        .quiz-option:hover:not(.disabled) {
            border-color: var(--accent-4);
            background: rgba(0,210,255,0.05);
        }

        .quiz-option .option-letter {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: var(--bg-code);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 13px;
            flex-shrink: 0;
        }

        .quiz-option.selected {
            border-color: var(--accent-4);
            background: rgba(0,210,255,0.1);
        }

        .quiz-option.correct-answer {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.1);
        }

        .quiz-option.correct-answer .option-letter {
            background: var(--success);
            color: white;
        }

        .quiz-option.wrong-answer {
            border-color: var(--error);
            background: rgba(239, 68, 68, 0.1);
        }

        .quiz-option.wrong-answer .option-letter {
            background: var(--error);
            color: white;
        }

        .quiz-option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .quiz-explanation {
            margin-top: 20px;
            padding: 18px;
            background: rgba(0,210,255,0.05);
            border-radius: 12px;
            border: 1px solid rgba(0,210,255,0.15);
            display: none;
            animation: fadeInUp 0.3s ease;
        }

        .quiz-explanation.visible {
            display: block;
        }

        .quiz-explanation h5 {
            color: var(--accent-4);
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .quiz-explanation p {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 14px;
        }

        /* Quiz Results */
        .quiz-results {
            text-align: center;
            padding: 40px 20px;
            animation: fadeInUp 0.6s ease;
        }

        .results-icon {
            font-size: 72px;
            margin-bottom: 20px;
        }

        .results-score {
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .results-score.pass { color: var(--success); }
        .results-score.fail { color: var(--error); }

        .results-message {
            font-size: 18px;
            color: var(--text-secondary);
            margin-bottom: 30px;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.06);
            flex-wrap: wrap;
            gap: 12px;
        }

        /* Sidebar / Topic Navigator */
        .topic-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 24px;
        }

        .topic-nav-item {
            padding: 8px 16px;
            border-radius: 8px;
            background: var(--bg-secondary);
            border: 2px solid transparent;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .topic-nav-item:hover {
            border-color: rgba(255,255,255,0.1);
        }

        .topic-nav-item.active {
            border-color: var(--accent-1);
            background: rgba(233, 69, 96, 0.1);
        }

        .topic-nav-item.completed {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.1);
        }

        .topic-nav-item .check {
            color: var(--success);
        }

        .topic-nav-item.locked {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* Phase tabs */
        .phase-tabs {
            display: flex;
            gap: 4px;
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 4px;
            margin-bottom: 24px;
        }

        .phase-tab {
            flex: 1;
            padding: 10px 16px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 13px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .phase-tab.active {
            background: var(--accent-1);
            color: white;
        }

        .phase-tab:hover:not(.active) {
            color: var(--text-primary);
            background: rgba(255,255,255,0.05);
        }

        .phase-tab:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        /* Confetti */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            animation: confetti-fall linear forwards;
        }

        @keyframes confetti-fall {
            0% { transform: translateY(-10px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* Responsive */
        @media (max-width: 640px) {
            .welcome-screen h1 { font-size: 32px; }
            .section-title { font-size: 24px; }
            .card { padding: 20px; }
            .code-block { padding: 14px; font-size: 12px; }
            .quiz-question-text { font-size: 17px; }
            .header-content { justify-content: center; }
            .progress-container { order: 3; max-width: 100%; margin: 0; }
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-primary); }
        ::-webkit-scrollbar-thumb { background: var(--bg-secondary); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent-2); }

        /* Tooltip styles for interactive elements */
        .highlight-text {
            cursor: help;
            border-bottom: 2px dotted;
            transition: all 0.2s ease;
        }

        .highlight-text:hover {
            opacity: 0.8;
        }

        .inline-code {
            background: var(--bg-code);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
        }

        /* Animation for correct/wrong answers */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .shake { animation: shake 0.4s ease; }
        .bounce { animation: bounce 0.4s ease; }

        /* Table styles for comparison */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
            border-radius: 12px;
            overflow: hidden;
        }

        .comparison-table th, .comparison-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.06);
            font-size: 14px;
        }

        .comparison-table th {
            background: var(--bg-secondary);
            font-weight: 700;
            color: var(--accent-4);
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .comparison-table td {
            background: var(--bg-code);
            font-family: 'JetBrains Mono', monospace;
        }

        .comparison-table td:first-child {
            font-family: 'Inter', sans-serif;
            color: var(--text-secondary);
        }

        /* Completion celebration */
        .celebration {
            text-align: center;
            padding: 60px 20px;
        }

        .trophy {
            font-size: 80px;
            margin-bottom: 24px;
            animation: bounce 1s ease infinite;
        }
    </style>
</head>
<body>

<div class="bg-animation" id="bgAnimation"></div>

<header class="app-header">
    <div class="header-content">
        <div class="logo">
            <div class="logo-icon">JS</div>
            <div class="logo-text">Primitive<span>Mastery</span></div>
        </div>
        <div class="progress-container">
            <div class="progress-bar-bg">
                <div class="progress-bar-fill" id="progressBar"></div>
            </div>
            <span class="progress-text" id="progressText">0%</span>
        </div>
        <div class="stats">
            <div class="stat-badge xp">‚ö° <span id="xpCount">0</span> XP</div>
            <div class="stat-badge streak">üî• <span id="streakCount">0</span></div>
        </div>
    </div>
</header>

<main class="main-content" id="mainContent">
    <!-- Content dynamically rendered here -->
</main>

<div class="confetti-container" id="confettiContainer"></div>

<script>
// ===== APP STATE =====
const state = {
    currentScreen: 'welcome',
    currentTopic: 0,
    currentPhase: 'learn', // learn, examples, exercises, quiz
    xp: 0,
    streak: 0,
    completedTopics: new Set(),
    quizScores: {},
    exerciseResults: {},
    currentQuizIndex: 0,
    currentQuizAnswers: [],
    topicPhaseCompletion: {} // tracks which phases are done per topic
};

// ===== TOPIC DATA =====
const topics = [
    {
        id: 'string',
        name: 'String',
        color: 'var(--string-color)',
        bgColor: 'rgba(165,214,255,0.15)',
        borderColor: 'rgba(165,214,255,0.3)',
        emoji: 'üìù',
        learn: {
            title: 'Strings ‚Äî Text in JavaScript',
            intro: 'A <strong>String</strong> is a sequence of characters used to represent text. It\'s one of the most commonly used types in JavaScript.',
            keyPoints: [
                'Strings are created using single quotes (\' \'), double quotes (" "), or backticks (` `)',
                'Strings are <strong>immutable</strong> ‚Äî once created, they cannot be changed',
                'Backtick strings (template literals) allow embedded expressions with <code>${...}</code>',
                'The <code>typeof</code> operator returns <code>"string"</code> for string values'
            ],
            analogy: 'Think of a string like a necklace of beads üìø ‚Äî each bead is a character. You can look at individual beads (characters) and count them, but you can\'t change a bead without making a whole new necklace.',
            codeExamples: [
                {
                    title: 'Creating Strings',
                    code: `<span class="keyword">let</span> greeting = <span class="string-val">"Hello, World!"</span>;\n<span class="keyword">let</span> name = <span class="string-val">'Alice'</span>;\n<span class="keyword">let</span> message = <span class="string-val">\`Hi, \${name}! Welcome!\`</span>;\n\n<span class="console">console</span>.<span class="method">log</span>(greeting);  <span class="comment">// "Hello, World!"</span>\n<span class="console">console</span>.<span class="method">log</span>(message);  <span class="comment">// "Hi, Alice! Welcome!"</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> name); <span class="comment">// "string"</span>`,
                    output: '"Hello, World!"\n"Hi, Alice! Welcome!"\n"string"'
                },
                {
                    title: 'String Properties & Methods',
                    code: `<span class="keyword">let</span> text = <span class="string-val">"JavaScript"</span>;\n\n<span class="console">console</span>.<span class="method">log</span>(text.<span class="method">length</span>);       <span class="comment">// 10</span>\n<span class="console">console</span>.<span class="method">log</span>(text[<span class="number-val">0</span>]);           <span class="comment">// "J"</span>\n<span class="console">console</span>.<span class="method">log</span>(text.<span class="method">toUpperCase</span>()); <span class="comment">// "JAVASCRIPT"</span>\n<span class="console">console</span>.<span class="method">log</span>(text.<span class="method">includes</span>(<span class="string-val">"Script"</span>)); <span class="comment">// true</span>`,
                    output: '10\n"J"\n"JAVASCRIPT"\ntrue'
                }
            ],
            warning: 'An empty string <code>""</code> is still a string! And it\'s a "falsy" value in JavaScript (we\'ll cover that later).'
        },
        examples: [
            { title: 'User Registration Form', description: 'Storing user input as strings', code: `<span class="keyword">let</span> username = <span class="string-val">"john_doe_42"</span>;\n<span class="keyword">let</span> email = <span class="string-val">"john@example.com"</span>;\n<span class="keyword">let</span> password = <span class="string-val">"s3cur3P@ss!"</span>;\n\n<span class="comment">// Validating the email</span>\n<span class="keyword">let</span> isValid = email.<span class="method">includes</span>(<span class="string-val">"@"</span>);\n<span class="console">console</span>.<span class="method">log</span>(isValid); <span class="comment">// true</span>`, output: 'true' },
            { title: 'Building a URL', description: 'Combining strings with template literals', code: `<span class="keyword">let</span> base = <span class="string-val">"https://api.example.com"</span>;\n<span class="keyword">let</span> endpoint = <span class="string-val">"users"</span>;\n<span class="keyword">let</span> id = <span class="number-val">42</span>;\n\n<span class="keyword">let</span> url = <span class="string-val">\`\${base}/\${endpoint}/\${id}\`</span>;\n<span class="console">console</span>.<span class="method">log</span>(url);`, output: '"https://api.example.com/users/42"' },
            { title: 'Chat Message Formatting', description: 'Working with string methods', code: `<span class="keyword">let</span> msg = <span class="string-val">"   hello everyone!   "</span>;\n\n<span class="keyword">let</span> clean = msg.<span class="method">trim</span>();\n<span class="keyword">let</span> formatted = clean[<span class="number-val">0</span>].<span class="method">toUpperCase</span>() + clean.<span class="method">slice</span>(<span class="number-val">1</span>);\n\n<span class="console">console</span>.<span class="method">log</span>(formatted);`, output: '"Hello everyone!"' }
        ],
        exercises: [
            { question: 'What does typeof "hello" return? (type exactly)', answer: 'string', explanation: 'The typeof operator returns "string" for any string value.' },
            { question: 'What symbol do you use inside backtick strings to embed a variable? (e.g., ???{name})', answer: '$', explanation: 'Template literals use ${} syntax to embed expressions.' },
            { question: 'What is "JavaScript".length? (type the number)', answer: '10', explanation: 'The string "JavaScript" has 10 characters: J-a-v-a-S-c-r-i-p-t.' },
            { question: 'What is "Hello"[0]? (type the character)', answer: 'H', explanation: 'String indexing starts at 0, so [0] gives us the first character "H".' }
        ],
        quiz: [
            { question: 'Which of the following is NOT a valid way to create a string?', options: ['let s = "hello"', "let s = 'hello'", 'let s = `hello`', 'let s = (hello)'], correct: 3, explanation: 'Parentheses don\'t create strings. You need quotes (\' or "), or backticks (`).' },
            { question: 'What does typeof "42" return?', options: ['"number"', '"string"', '"integer"', '"text"'], correct: 1, explanation: '"42" is wrapped in quotes, making it a string, not a number. typeof returns "string".' },
            { question: 'What is the value of `Hello ${2 + 3}`?', options: ['"Hello ${2 + 3}"', '"Hello 2 + 3"', '"Hello 5"', 'Error'], correct: 2, explanation: 'Template literals evaluate expressions inside ${}. 2 + 3 = 5, so the result is "Hello 5".' },
            { question: 'Strings in JavaScript are:', options: ['Mutable (can be changed)', 'Immutable (cannot be changed)', 'Only numbers', 'Only used for names'], correct: 1, explanation: 'Strings are immutable. Methods like toUpperCase() return NEW strings rather than modifying the original.' },
            { question: 'What does "cat".length return?', options: ['2', '3', '4', '"three"'], correct: 1, explanation: 'The string "cat" has 3 characters: c, a, t. So .length returns 3.' }
        ]
    },
    {
        id: 'number',
        name: 'Number',
        color: 'var(--number-color)',
        bgColor: 'rgba(121,192,255,0.15)',
        borderColor: 'rgba(121,192,255,0.3)',
        emoji: 'üî¢',
        learn: {
            title: 'Numbers ‚Äî Math in JavaScript',
            intro: 'The <strong>Number</strong> type represents both integers and floating-point (decimal) numbers. JavaScript doesn\'t distinguish between them!',
            keyPoints: [
                'Both <code>42</code> and <code>3.14</code> are the same "number" type',
                'Special number values: <code>Infinity</code>, <code>-Infinity</code>, and <code>NaN</code> (Not a Number)',
                'JavaScript uses 64-bit floating-point format (can sometimes cause precision issues)',
                'The <code>typeof</code> operator returns <code>"number"</code> ‚Äî even for <code>NaN</code>!'
            ],
            analogy: 'Think of JavaScript numbers like a calculator display üßÆ ‚Äî it can show whole numbers or decimals. But unlike a real calculator, it also has special "error" states like NaN when you try impossible math.',
            codeExamples: [
                {
                    title: 'Number Basics',
                    code: `<span class="keyword">let</span> age = <span class="number-val">25</span>;\n<span class="keyword">let</span> price = <span class="number-val">9.99</span>;\n<span class="keyword">let</span> negative = <span class="number-val">-10</span>;\n\n<span class="console">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> age);      <span class="comment">// "number"</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> price);    <span class="comment">// "number"</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> <span class="number-val">NaN</span>);      <span class="comment">// "number" ü§Ø</span>`,
                    output: '"number"\n"number"\n"number"'
                },
                {
                    title: 'Special Number Values',
                    code: `<span class="console">console</span>.<span class="method">log</span>(<span class="number-val">1</span> / <span class="number-val">0</span>);          <span class="comment">// Infinity</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="number-val">-1</span> / <span class="number-val">0</span>);         <span class="comment">// -Infinity</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="string-val">"hello"</span> * <span class="number-val">2</span>);    <span class="comment">// NaN</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="number-val">NaN</span> === <span class="number-val">NaN</span>);      <span class="comment">// false! üò±</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="number-val">0.1</span> + <span class="number-val">0.2</span>);       <span class="comment">// 0.30000000000000004</span>`,
                    output: 'Infinity\n-Infinity\nNaN\nfalse\n0.30000000000000004'
                }
            ],
            warning: '<code>NaN</code> is a number type! And <code>NaN === NaN</code> is <code>false</code>. Use <code>Number.isNaN()</code> to check for NaN. Also, <code>0.1 + 0.2 !== 0.3</code> due to floating-point precision.'
        },
        examples: [
            { title: 'Shopping Cart Total', description: 'Calculating prices', code: `<span class="keyword">let</span> item1 = <span class="number-val">29.99</span>;\n<span class="keyword">let</span> item2 = <span class="number-val">15.50</span>;\n<span class="keyword">let</span> taxRate = <span class="number-val">0.08</span>;\n\n<span class="keyword">let</span> subtotal = item1 + item2;\n<span class="keyword">let</span> tax = subtotal * taxRate;\n<span class="keyword">let</span> total = (subtotal + tax).<span class="method">toFixed</span>(<span class="number-val">2</span>);\n\n<span class="console">console</span>.<span class="method">log</span>(<span class="string-val">\`Total: $\${total}\`</span>);`, output: '"Total: $49.13"' },
            { title: 'Temperature Converter', description: 'Math operations', code: `<span class="keyword">let</span> celsius = <span class="number-val">100</span>;\n<span class="keyword">let</span> fahrenheit = (celsius * <span class="number-val">9</span>/<span class="number-val">5</span>) + <span class="number-val">32</span>;\n\n<span class="console">console</span>.<span class="method">log</span>(<span class="string-val">\`\${celsius}¬∞C = \${fahrenheit}¬∞F\`</span>);`, output: '"100¬∞C = 212¬∞F"' },
            { title: 'Random Game Score', description: 'Using Math methods', code: `<span class="keyword">let</span> score = <span class="method">Math</span>.<span class="method">floor</span>(<span class="method">Math</span>.<span class="method">random</span>() * <span class="number-val">100</span>);\n<span class="keyword">let</span> maxScore = <span class="method">Math</span>.<span class="method">max</span>(<span class="number-val">85</span>, <span class="number-val">92</span>, <span class="number-val">78</span>, <span class="number-val">95</span>);\n\n<span class="console">console</span>.<span class="method">log</span>(<span class="string-val">\`Your score: \${score}\`</span>);\n<span class="console">console</span>.<span class="method">log</span>(<span class="string-val">\`High score: \${maxScore}\`</span>);`, output: '"Your score: 47" (random)\n"High score: 95"' }
        ],
        exercises: [
            { question: 'What does typeof 3.14 return?', answer: 'number', explanation: 'Both integers and decimals are "number" type in JavaScript.' },
            { question: 'What is 1 / 0 in JavaScript? (one word)', answer: 'Infinity', explanation: 'Dividing by zero gives Infinity in JS, not an error!' },
            { question: 'What does typeof NaN return?', answer: 'number', explanation: 'Surprisingly, NaN (Not a Number) is still of type "number"!' },
            { question: 'Is NaN === NaN true or false?', answer: 'false', explanation: 'NaN is not equal to anything, including itself!' }
        ],
        quiz: [
            { question: 'Which of these is NOT a valid number in JavaScript?', options: ['42', '3.14', '-100', '"99"'], correct: 3, explanation: '"99" has quotes around it, making it a string, not a number.' },
            { question: 'What does "hello" * 2 produce?', options: ['hellohello', 'NaN', 'Error', 'undefined'], correct: 1, explanation: 'Trying to multiply a string that can\'t be converted to a number results in NaN.' },
            { question: 'What is typeof Infinity?', options: ['"infinity"', '"number"', '"Infinity"', '"undefined"'], correct: 1, explanation: 'Infinity is a special number value, so typeof returns "number".' },
            { question: 'What is 0.1 + 0.2 === 0.3?', options: ['true', 'false', 'NaN', 'Error'], correct: 1, explanation: 'Due to floating-point precision, 0.1 + 0.2 = 0.30000000000000004, which is not exactly 0.3.' },
            { question: 'How do you correctly check if a value is NaN?', options: ['value === NaN', 'value == NaN', 'Number.isNaN(value)', 'typeof value === "NaN"'], correct: 2, explanation: 'Number.isNaN() is the correct way. NaN === NaN is always false!' }
        ]
    },
    {
        id: 'boolean',
        name: 'Boolean',
        color: 'var(--boolean-color)',
        bgColor: 'rgba(255,123,114,0.15)',
        borderColor: 'rgba(255,123,114,0.3)',
        emoji: '‚úÖ',
        learn: {
            title: 'Booleans ‚Äî True or False',
            intro: 'A <strong>Boolean</strong> represents a logical value that can only be one of two things: <code>true</code> or <code>false</code>. They\'re the foundation of all decision-making in code!',
            keyPoints: [
                'Only two possible values: <code>true</code> and <code>false</code> (lowercase!)',
                'Result from comparison operators: <code>===</code>, <code>!==</code>, <code>></code>, <code><</code>, etc.',
                'Used in <code>if</code> statements, loops, and conditional logic',
                'Every value in JS can be converted to a boolean (truthy/falsy concept)'
            ],
            analogy: 'Booleans are like a light switch üí° ‚Äî it\'s either ON (true) or OFF (false). There\'s no "maybe" or "kind of on." Every decision your code makes boils down to this simple on/off choice.',
            codeExamples: [
                {
                    title: 'Boolean Basics',
                    code: `<span class="keyword">let</span> isLoggedIn = <span class="boolean-val">true</span>;\n<span class="keyword">let</span> isAdmin = <span class="boolean-val">false</span>;\n\n<span class="console">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> isLoggedIn); <span class="comment">// "boolean"</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="number-val">5</span> > <span class="number-val">3</span>);             <span class="comment">// true</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="number-val">10</span> === <span class="string-val">"10"</span>);        <span class="comment">// false (strict equality)</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="number-val">10</span> == <span class="string-val">"10"</span>);         <span class="comment">// true (loose equality)</span>`,
                    output: '"boolean"\ntrue\nfalse\ntrue'
                },
                {
                    title: 'Booleans in Decisions',
                    code: `<span class="keyword">let</span> age = <span class="number-val">20</span>;\n<span class="keyword">let</span> canVote = age >= <span class="number-val">18</span>;\n\n<span class="console">console</span>.<span class="method">log</span>(canVote); <span class="comment">// true</span>\n\n<span class="keyword">if</span> (canVote) {\n  <span class="console">console</span>.<span class="method">log</span>(<span class="string-val">"You can vote! üó≥Ô∏è"</span>);\n} <span class="keyword">else</span> {\n  <span class="console">console</span>.<span class="method">log</span>(<span class="string-val">"Too young to vote"</span>);\n}`,
                    output: 'true\n"You can vote! üó≥Ô∏è"'
                }
            ],
            warning: 'Don\'t confuse <code>true</code>/<code>false</code> (booleans) with <code>"true"</code>/<code>"false"</code> (strings)! <code>typeof "true"</code> returns <code>"string"</code>, not <code>"boolean"</code>.'
        },
        examples: [
            { title: 'Login Check', description: 'Authentication logic', code: `<span class="keyword">let</span> hasAccount = <span class="boolean-val">true</span>;\n<span class="keyword">let</span> correctPassword = <span class="boolean-val">true</span>;\n<span class="keyword">let</span> isBanned = <span class="boolean-val">false</span>;\n\n<span class="keyword">let</span> canLogin = hasAccount && correctPassword && !isBanned;\n<span class="console">console</span>.<span class="method">log</span>(canLogin); <span class="comment">// true</span>`, output: 'true' },
            { title: 'Age Verification', description: 'Comparison producing booleans', code: `<span class="keyword">let</span> userAge = <span class="number-val">15</span>;\n\n<span class="keyword">let</span> canDrive = userAge >= <span class="number-val">16</span>;   <span class="comment">// false</span>\n<span class="keyword">let</span> canVote = userAge >= <span class="number-val">18</span>;    <span class="comment">// false</span>\n<span class="keyword">let</span> canDrink = userAge >= <span class="number-val">21</span>;   <span class="comment">// false</span>\n<span class="keyword">let</span> isTeenager = userAge >= <span class="number-val">13</span> && userAge <= <span class="number-val">19</span>; <span class="comment">// true</span>\n\n<span class="console">console</span>.<span class="method">log</span>(isTeenager);`, output: 'true' },
            { title: 'Feature Toggle', description: 'Using booleans as flags', code: `<span class="keyword">let</span> darkMode = <span class="boolean-val">true</span>;\n<span class="keyword">let</span> notifications = <span class="boolean-val">false</span>;\n\n<span class="comment">// Toggle (flip) a boolean</span>\ndarkMode = !darkMode;\n<span class="console">console</span>.<span class="method">log</span>(darkMode); <span class="comment">// false</span>\n\nnotifications = !notifications;\n<span class="console">console</span>.<span class="method">log</span>(notifications); <span class="comment">// true</span>`, output: 'false\ntrue' }
        ],
        exercises: [
            { question: 'What does typeof false return?', answer: 'boolean', explanation: 'Both true and false have the type "boolean".' },
            { question: 'What does 10 > 5 evaluate to? (true or false)', answer: 'true', explanation: '10 is greater than 5, so the comparison returns true.' },
            { question: 'What does !true evaluate to?', answer: 'false', explanation: 'The ! operator (NOT) flips a boolean. !true becomes false.' },
            { question: 'What does 5 === "5" evaluate to?', answer: 'false', explanation: 'Triple equals (===) checks value AND type. Number 5 is not the same type as string "5".' }
        ],
        quiz: [
            { question: 'How many possible values can a boolean have?', options: ['1', '2', '3', 'Unlimited'], correct: 1, explanation: 'Boolean has exactly 2 values: true and false.' },
            { question: 'What is typeof true?', options: ['"true"', '"boolean"', '"Boolean"', '"bool"'], correct: 1, explanation: 'The typeof operator returns the lowercase string "boolean".' },
            { question: 'What does the ! operator do to a boolean?', options: ['Doubles it', 'Deletes it', 'Flips/negates it', 'Nothing'], correct: 2, explanation: 'The NOT operator (!) flips true to false and false to true.' },
            { question: 'What is typeof "false"?', options: ['"boolean"', '"string"', '"false"', '"object"'], correct: 1, explanation: '"false" with quotes is a string, not a boolean! typeof returns "string".' },
            { question: 'What does (true && false) evaluate to?', options: ['true', 'false', 'null', 'undefined'], correct: 1, explanation: 'AND (&&) returns true only if BOTH sides are true. Since one is false, the result is false.' }
        ]
    },
    {
        id: 'undefined',
        name: 'Undefined',
        color: 'var(--undefined-color)',
        bgColor: 'rgba(210,168,255,0.15)',
        borderColor: 'rgba(210,168,255,0.3)',
        emoji: '‚ùì',
        learn: {
            title: 'Undefined ‚Äî The "I Don\'t Know Yet" Value',
            intro: '<strong>undefined</strong> means a variable has been declared but has not been given a value yet. It\'s JavaScript\'s way of saying "this exists, but nothing has been put here."',
            keyPoints: [
                'Variables declared with <code>let</code> or <code>var</code> without a value are <code>undefined</code>',
                'Functions that don\'t return anything return <code>undefined</code>',
                'Accessing a non-existent object property gives <code>undefined</code>',
                '<code>typeof undefined</code> returns <code>"undefined"</code>'
            ],
            analogy: 'Imagine you label an empty box üì¶ with "Gift" but haven\'t put anything inside yet. The box exists (the variable is declared), but it\'s empty (undefined). It\'s not that there\'s nothing ‚Äî it\'s that you haven\'t decided what goes in there yet.',
            codeExamples: [
                {
                    title: 'How undefined Appears',
                    code: `<span class="keyword">let</span> myVariable;\n<span class="console">console</span>.<span class="method">log</span>(myVariable);        <span class="comment">// undefined</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> myVariable); <span class="comment">// "undefined"</span>\n\n<span class="comment">// Function with no return</span>\n<span class="keyword">function</span> <span class="function">sayHi</span>() {\n  <span class="console">console</span>.<span class="method">log</span>(<span class="string-val">"Hi!"</span>);\n}\n<span class="keyword">let</span> result = <span class="function">sayHi</span>();\n<span class="console">console</span>.<span class="method">log</span>(result); <span class="comment">// undefined</span>`,
                    output: 'undefined\n"undefined"\n"Hi!"\nundefined'
                },
                {
                    title: 'undefined vs Not Defined',
                    code: `<span class="keyword">let</span> x;\n<span class="console">console</span>.<span class="method">log</span>(x);           <span class="comment">// undefined (declared, no value)</span>\n<span class="comment">// console.log(y);       // ReferenceError! (never declared)</span>\n\n<span class="keyword">let</span> person = { name: <span class="string-val">"Alice"</span> };\n<span class="console">console</span>.<span class="method">log</span>(person.name); <span class="comment">// "Alice"</span>\n<span class="console">console</span>.<span class="method">log</span>(person.age);  <span class="comment">// undefined (property doesn't exist)</span>`,
                    output: 'undefined\n"Alice"\nundefined'
                }
            ],
            warning: '<code>undefined</code> and "not defined" (ReferenceError) are different! <code>undefined</code> means declared but empty. A ReferenceError means the variable was never declared at all.'
        },
        examples: [
            { title: 'Default Function Parameters', description: 'When arguments are not passed', code: `<span class="keyword">function</span> <span class="function">greet</span>(name) {\n  <span class="console">console</span>.<span class="method">log</span>(<span class="string-val">\`Hello, \${name}!\`</span>);\n}\n\n<span class="function">greet</span>(<span class="string-val">"Alice"</span>);  <span class="comment">// "Hello, Alice!"</span>\n<span class="function">greet</span>();         <span class="comment">// "Hello, undefined!"</span>`, output: '"Hello, Alice!"\n"Hello, undefined!"' },
            { title: 'Checking for Missing Data', description: 'Using undefined in conditionals', code: `<span class="keyword">let</span> userProfile = { name: <span class="string-val">"Bob"</span> };\n\n<span class="keyword">if</span> (userProfile.email === <span class="undefined-val">undefined</span>) {\n  <span class="console">console</span>.<span class="method">log</span>(<span class="string-val">"No email on file"</span>);\n} <span class="keyword">else</span> {\n  <span class="console">console</span>.<span class="method">log</span>(userProfile.email);\n}`, output: '"No email on file"' },
            { title: 'Array Out of Bounds', description: 'Accessing non-existent indices', code: `<span class="keyword">let</span> colors = [<span class="string-val">"red"</span>, <span class="string-val">"blue"</span>, <span class="string-val">"green"</span>];\n\n<span class="console">console</span>.<span class="method">log</span>(colors[<span class="number-val">0</span>]); <span class="comment">// "red"</span>\n<span class="console">console</span>.<span class="method">log</span>(colors[<span class="number-val">5</span>]); <span class="comment">// undefined (no index 5)</span>`, output: '"red"\nundefined' }
        ],
        exercises: [
            { question: 'What does typeof undefined return?', answer: 'undefined', explanation: 'typeof undefined returns the string "undefined".' },
            { question: 'let x; What is the value of x? (one word)', answer: 'undefined', explanation: 'A declared variable with no assigned value is automatically undefined.' },
            { question: 'A function with no return statement returns what? (one word)', answer: 'undefined', explanation: 'Functions without a return statement implicitly return undefined.' },
            { question: 'Is undefined a primitive type? (yes or no)', answer: 'yes', explanation: 'undefined is one of the 7 JavaScript primitive types.' }
        ],
        quiz: [
            { question: 'When is a variable undefined?', options: ['When it equals zero', 'When declared but not assigned a value', 'When it has an error', 'When it is deleted'], correct: 1, explanation: 'A variable is undefined when it\'s been declared (let x;) but not yet assigned a value.' },
            { question: 'What does typeof undefined return?', options: ['"null"', '"empty"', '"undefined"', '"void"'], correct: 2, explanation: 'typeof undefined returns the string "undefined".' },
            { question: 'What does a function return if it has no return statement?', options: ['null', '0', 'undefined', '"nothing"'], correct: 2, explanation: 'Functions without an explicit return statement return undefined by default.' },
            { question: 'let obj = {}; What is obj.name?', options: ['""', 'null', 'undefined', 'Error'], correct: 2, explanation: 'Accessing a non-existent property on an object returns undefined.' },
            { question: 'How can you check if a variable is undefined?', options: ['variable === undefined', 'typeof variable === "undefined"', 'Both A and B work', 'variable.isUndefined()'], correct: 2, explanation: 'Both direct comparison and typeof check work, though typeof is safer for undeclared variables.' }
        ]
    },
    {
        id: 'null',
        name: 'Null',
        color: 'var(--null-color)',
        bgColor: 'rgba(255,166,87,0.15)',
        borderColor: 'rgba(255,166,87,0.3)',
        emoji: 'üö´',
        learn: {
            title: 'Null ‚Äî The Intentional Empty',
            intro: '<strong>null</strong> represents an intentional absence of any value. Unlike undefined (accidentally empty), null means "I deliberately set this to nothing."',
            keyPoints: [
                '<code>null</code> is explicitly assigned by the programmer',
                'It means "no value on purpose" ‚Äî intentionally blank',
                '<code>typeof null</code> returns <code>"object"</code> ‚Äî this is a famous JavaScript bug!',
                '<code>null == undefined</code> is <code>true</code>, but <code>null === undefined</code> is <code>false</code>'
            ],
            analogy: 'Think about a parking spot üÖøÔ∏è. An <em>undefined</em> parking spot is one that hasn\'t been checked yet ‚Äî you don\'t know if a car is there. A <em>null</em> parking spot means someone specifically checked and confirmed: "This spot is intentionally empty."',
            codeExamples: [
                {
                    title: 'null Basics',
                    code: `<span class="keyword">let</span> selectedUser = <span class="null-val">null</span>; <span class="comment">// deliberately empty</span>\n\n<span class="console">console</span>.<span class="method">log</span>(selectedUser);        <span class="comment">// null</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> selectedUser); <span class="comment">// "object" (JS bug!)</span>\n<span class="console">console</span>.<span class="method">log</span>(selectedUser === <span class="null-val">null</span>); <span class="comment">// true</span>`,
                    output: 'null\n"object"\ntrue'
                },
                {
                    title: 'null vs undefined',
                    code: `<span class="keyword">let</span> a;             <span class="comment">// undefined (not assigned)</span>\n<span class="keyword">let</span> b = <span class="null-val">null</span>;       <span class="comment">// null (intentionally empty)</span>\n\n<span class="console">console</span>.<span class="method">log</span>(a == b);  <span class="comment">// true (loose equality)</span>\n<span class="console">console</span>.<span class="method">log</span>(a === b); <span class="comment">// false (strict equality)</span>\n\n<span class="console">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> a); <span class="comment">// "undefined"</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> b); <span class="comment">// "object" (the bug)</span>`,
                    output: 'true\nfalse\n"undefined"\n"object"'
                }
            ],
            warning: '<code>typeof null</code> returning <code>"object"</code> is a bug from JavaScript\'s early days (1995!) that was never fixed because too much code depends on it. Always check for null with <code>=== null</code>, not typeof.'
        },
        examples: [
            { title: 'Resetting a Value', description: 'Clearing user selection', code: `<span class="keyword">let</span> currentUser = { name: <span class="string-val">"Alice"</span> };\n<span class="console">console</span>.<span class="method">log</span>(currentUser); <span class="comment">// { name: "Alice" }</span>\n\n<span class="comment">// User logs out</span>\ncurrentUser = <span class="null-val">null</span>;\n<span class="console">console</span>.<span class="method">log</span>(currentUser); <span class="comment">// null</span>`, output: '{ name: "Alice" }\nnull' },
            { title: 'API Response Handling', description: 'When data doesn\'t exist', code: `<span class="keyword">function</span> <span class="function">findUser</span>(id) {\n  <span class="keyword">let</span> users = { <span class="number-val">1</span>: <span class="string-val">"Alice"</span>, <span class="number-val">2</span>: <span class="string-val">"Bob"</span> };\n  <span class="keyword">return</span> users[id] || <span class="null-val">null</span>; <span class="comment">// null if not found</span>\n}\n\n<span class="console">console</span>.<span class="method">log</span>(<span class="function">findUser</span>(<span class="number-val">1</span>)); <span class="comment">// "Alice"</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="function">findUser</span>(<span class="number-val">99</span>)); <span class="comment">// null</span>`, output: '"Alice"\nnull' },
            { title: 'Form Field Clearing', description: 'Intentionally blanking data', code: `<span class="keyword">let</span> formData = {\n  name: <span class="string-val">"John"</span>,\n  email: <span class="string-val">"john@mail.com"</span>,\n  avatar: <span class="null-val">null</span> <span class="comment">// no avatar uploaded yet</span>\n};\n\n<span class="keyword">if</span> (formData.avatar === <span class="null-val">null</span>) {\n  <span class="console">console</span>.<span class="method">log</span>(<span class="string-val">"Using default avatar üë§"</span>);\n}`, output: '"Using default avatar üë§"' }
        ],
        exercises: [
            { question: 'What does typeof null return? (the famous bug!)', answer: 'object', explanation: 'This is a well-known JavaScript bug ‚Äî typeof null returns "object" instead of "null".' },
            { question: 'null means the value is intentionally _____ (one word)', answer: 'empty', explanation: 'null represents an intentional absence of value ‚Äî deliberately empty.' },
            { question: 'Does null == undefined return true or false?', answer: 'true', explanation: 'With loose equality (==), null and undefined are considered equal.' },
            { question: 'Does null === undefined return true or false?', answer: 'false', explanation: 'With strict equality (===), null and undefined are different types and not equal.' }
        ],
        quiz: [
            { question: 'What is the main difference between null and undefined?', options: ['No difference', 'null is intentional, undefined is automatic', 'null is a number, undefined is a string', 'undefined is intentional, null is automatic'], correct: 1, explanation: 'null is explicitly assigned by the programmer. undefined means a variable was declared but never given a value.' },
            { question: 'What does typeof null return?', options: ['"null"', '"undefined"', '"object"', '"nothing"'], correct: 2, explanation: 'This is a famous bug! typeof null returns "object" due to a mistake in the original JavaScript implementation.' },
            { question: 'When should you use null?', options: ['Never', 'To crash the program', 'To intentionally represent "no value"', 'To declare variables'], correct: 2, explanation: 'Use null when you want to explicitly say "this variable intentionally has no value right now."' },
            { question: 'What does null == undefined evaluate to?', options: ['true', 'false', 'null', 'Error'], correct: 0, explanation: 'With loose equality (==), null and undefined are considered equal. This is a special rule in JavaScript.' },
            { question: 'How should you check if a value is null?', options: ['typeof value === "null"', 'value === null', 'value.isNull()', 'null(value)'], correct: 1, explanation: 'Use strict equality (===) to check for null. typeof won\'t work because of the "object" bug.' }
        ]
    },
    {
        id: 'symbol',
        name: 'Symbol',
        color: 'var(--symbol-color)',
        bgColor: 'rgba(126,231,135,0.15)',
        borderColor: 'rgba(126,231,135,0.3)',
        emoji: 'üîë',
        learn: {
            title: 'Symbol ‚Äî Unique Identifiers',
            intro: 'A <strong>Symbol</strong> is a unique and immutable value, added in ES6 (2015). Every symbol is guaranteed to be different from every other symbol, even if they have the same description.',
            keyPoints: [
                'Created with <code>Symbol()</code> ‚Äî NOT <code>new Symbol()</code>',
                'Every symbol is unique: <code>Symbol("a") !== Symbol("a")</code>',
                'Often used as unique property keys on objects',
                'The description is just a label for debugging ‚Äî it doesn\'t affect uniqueness'
            ],
            analogy: 'Think of symbols like Social Security Numbers ü™™ ‚Äî even if two people have the same name (description), their SSNs are always unique. A Symbol is a guaranteed-unique identifier that JavaScript generates for you.',
            codeExamples: [
                {
                    title: 'Creating Symbols',
                    code: `<span class="keyword">let</span> sym1 = <span class="method">Symbol</span>(<span class="string-val">"id"</span>);\n<span class="keyword">let</span> sym2 = <span class="method">Symbol</span>(<span class="string-val">"id"</span>);\n\n<span class="console">console</span>.<span class="method">log</span>(sym1 === sym2);     <span class="comment">// false (always unique!)</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> sym1);       <span class="comment">// "symbol"</span>\n<span class="console">console</span>.<span class="method">log</span>(sym1.<span class="method">description</span>); <span class="comment">// "id"</span>`,
                    output: 'false\n"symbol"\n"id"'
                },
                {
                    title: 'Symbols as Object Keys',
                    code: `<span class="keyword">let</span> SECRET_KEY = <span class="method">Symbol</span>(<span class="string-val">"secret"</span>);\n\n<span class="keyword">let</span> user = {\n  name: <span class="string-val">"Alice"</span>,\n  [SECRET_KEY]: <span class="string-val">"hidden-data-123"</span>\n};\n\n<span class="console">console</span>.<span class="method">log</span>(user.name);        <span class="comment">// "Alice"</span>\n<span class="console">console</span>.<span class="method">log</span>(user[SECRET_KEY]);  <span class="comment">// "hidden-data-123"</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="method">Object</span>.<span class="method">keys</span>(user)); <span class="comment">// ["name"] (symbol hidden!)</span>`,
                    output: '"Alice"\n"hidden-data-123"\n["name"]'
                }
            ],
            warning: 'Symbols are a more advanced feature. As a beginner, just know they exist and are unique. You\'ll use them more when working with libraries, frameworks, and advanced patterns.'
        },
        examples: [
            { title: 'Unique Constants', description: 'Creating guaranteed-unique values', code: `<span class="keyword">const</span> STATUS_OPEN = <span class="method">Symbol</span>(<span class="string-val">"open"</span>);\n<span class="keyword">const</span> STATUS_CLOSED = <span class="method">Symbol</span>(<span class="string-val">"closed"</span>);\n<span class="keyword">const</span> STATUS_PENDING = <span class="method">Symbol</span>(<span class="string-val">"pending"</span>);\n\n<span class="keyword">let</span> ticketStatus = STATUS_OPEN;\n\n<span class="keyword">if</span> (ticketStatus === STATUS_OPEN) {\n  <span class="console">console</span>.<span class="method">log</span>(<span class="string-val">"Ticket is open"</span>);\n}`, output: '"Ticket is open"' },
            { title: 'Hidden Object Properties', description: 'Properties invisible to normal iteration', code: `<span class="keyword">const</span> _private = <span class="method">Symbol</span>(<span class="string-val">"private"</span>);\n\n<span class="keyword">let</span> obj = {\n  publicProp: <span class="string-val">"visible"</span>,\n  [_private]: <span class="string-val">"hidden"</span>\n};\n\n<span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) {\n  <span class="console">console</span>.<span class="method">log</span>(key); <span class="comment">// only "publicProp"</span>\n}`, output: '"publicProp"' },
            { title: 'Global Symbol Registry', description: 'Shared symbols with Symbol.for()', code: `<span class="keyword">let</span> s1 = <span class="method">Symbol</span>.<span class="method">for</span>(<span class="string-val">"app.id"</span>);\n<span class="keyword">let</span> s2 = <span class="method">Symbol</span>.<span class="method">for</span>(<span class="string-val">"app.id"</span>);\n\n<span class="console">console</span>.<span class="method">log</span>(s1 === s2); <span class="comment">// true (same registry key!)</span>\n\n<span class="keyword">let</span> s3 = <span class="method">Symbol</span>(<span class="string-val">"app.id"</span>);\n<span class="console">console</span>.<span class="method">log</span>(s1 === s3); <span class="comment">// false (Symbol() always unique)</span>`, output: 'true\nfalse' }
        ],
        exercises: [
            { question: 'What does typeof Symbol("test") return?', answer: 'symbol', explanation: 'The typeof operator returns "symbol" for symbol values.' },
            { question: 'Does Symbol("a") === Symbol("a") return true or false?', answer: 'false', explanation: 'Every symbol is unique, even if they have the same description.' },
            { question: 'Are Symbols created with the new keyword? (yes or no)', answer: 'no', explanation: 'Symbols are created with Symbol(), NOT new Symbol(). Using new throws an error.' },
            { question: 'Are Symbol properties visible in Object.keys()? (yes or no)', answer: 'no', explanation: 'Symbol-keyed properties are hidden from Object.keys() and for...in loops.' }
        ],
        quiz: [
            { question: 'What makes Symbol special compared to other primitives?', options: ['It\'s faster', 'Every value is guaranteed unique', 'It can only store numbers', 'It can be changed'], correct: 1, explanation: 'The defining feature of Symbol is guaranteed uniqueness ‚Äî no two symbols are ever equal.' },
            { question: 'What does Symbol("hello") === Symbol("hello") return?', options: ['true', 'false', 'undefined', 'Error'], correct: 1, explanation: 'Every call to Symbol() creates a brand new, unique symbol. The description doesn\'t matter.' },
            { question: 'How do you create a symbol?', options: ['new Symbol()', '"Symbol"', 'Symbol()', 'symbol()'], correct: 2, explanation: 'Symbols are created with Symbol() ‚Äî no new keyword, and it\'s capital S.' },
            { question: 'What is typeof Symbol("x")?', options: ['"string"', '"object"', '"symbol"', '"Symbol"'], correct: 2, explanation: 'typeof returns "symbol" for symbol values (lowercase).' },
            { question: 'When were Symbols added to JavaScript?', options: ['1995 (ES1)', '2009 (ES5)', '2015 (ES6)', '2020 (ES11)'], correct: 2, explanation: 'Symbols were introduced in ECMAScript 2015 (ES6) along with many other modern features.' }
        ]
    },
    {
        id: 'bigint',
        name: 'BigInt',
        color: 'var(--bigint-color)',
        bgColor: 'rgba(242,204,96,0.15)',
        borderColor: 'rgba(242,204,96,0.3)',
        emoji: 'üî¢',
        learn: {
            title: 'BigInt ‚Äî Really Big Numbers',
            intro: '<strong>BigInt</strong> is the newest primitive type (ES2020). It allows you to work with integers larger than the safe limit for regular numbers (2‚Åµ¬≥ - 1).',
            keyPoints: [
                'Created by appending <code>n</code> to a number: <code>42n</code>, or using <code>BigInt(42)</code>',
                'Can represent arbitrarily large integers without precision loss',
                'Cannot be mixed with regular numbers in math operations',
                'Regular numbers lose precision above <code>Number.MAX_SAFE_INTEGER</code> (9,007,199,254,740,991)'
            ],
            analogy: 'Regular numbers are like a small calculator with a limited display üßÆ. BigInt is like having an infinitely long piece of paper ‚Äî you can write numbers as large as you want without running out of space.',
            codeExamples: [
                {
                    title: 'BigInt Basics',
                    code: `<span class="keyword">let</span> big = <span class="number-val">9007199254740991n</span>;\n<span class="keyword">let</span> bigger = big + <span class="number-val">1n</span>;\n\n<span class="console">console</span>.<span class="method">log</span>(bigger);         <span class="comment">// 9007199254740992n</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> big);      <span class="comment">// "bigint"</span>\n\n<span class="comment">// Compare: regular number fails!</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="number-val">9007199254740991</span> + <span class="number-val">1</span>); <span class="comment">// 9007199254740992</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="number-val">9007199254740991</span> + <span class="number-val">2</span>); <span class="comment">// 9007199254740992 (WRONG!)</span>`,
                    output: '9007199254740992n\n"bigint"\n9007199254740992\n9007199254740992'
                },
                {
                    title: 'BigInt Rules',
                    code: `<span class="keyword">let</span> a = <span class="number-val">10n</span>;\n<span class="keyword">let</span> b = <span class="number-val">3n</span>;\n\n<span class="console">console</span>.<span class="method">log</span>(a + b);   <span class="comment">// 13n</span>\n<span class="console">console</span>.<span class="method">log</span>(a * b);   <span class="comment">// 30n</span>\n<span class="console">console</span>.<span class="method">log</span>(a / b);   <span class="comment">// 3n (truncated, no decimals!)</span>\n\n<span class="comment">// Can't mix BigInt and Number!</span>\n<span class="comment">// console.log(10n + 5); // TypeError!</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="number-val">10n</span> + <span class="method">BigInt</span>(<span class="number-val">5</span>)); <span class="comment">// 15n ‚úÖ</span>`,
                    output: '13n\n30n\n3n\n15n'
                }
            ],
            warning: 'BigInt is the newest primitive and may not work in very old browsers. You can\'t mix BigInt and Number in operations ‚Äî you must convert one to match the other.'
        },
        examples: [
            { title: 'Working with Large IDs', description: 'Database IDs that exceed safe integers', code: `<span class="keyword">let</span> tweetId = <span class="number-val">1352674589204738048n</span>;\n<span class="keyword">let</span> nextId = tweetId + <span class="number-val">1n</span>;\n\n<span class="console">console</span>.<span class="method">log</span>(nextId); <span class="comment">// 1352674589204738049n ‚úÖ Precise!</span>\n\n<span class="comment">// Without BigInt, precision is lost:</span>\n<span class="keyword">let</span> badId = <span class="number-val">1352674589204738048</span>;\n<span class="console">console</span>.<span class="method">log</span>(badId); <span class="comment">// 1352674589204738000 ‚ùå Wrong!</span>`, output: '1352674589204738049n\n1352674589204738000' },
            { title: 'Crypto & Large Math', description: 'Calculations requiring precision', code: `<span class="keyword">let</span> prime1 = <span class="number-val">104729n</span>;\n<span class="keyword">let</span> prime2 = <span class="number-val">104723n</span>;\n\n<span class="keyword">let</span> product = prime1 * prime2;\n<span class="console">console</span>.<span class="method">log</span>(product); <span class="comment">// 10966882267n</span>`, output: '10966882267n' },
            { title: 'Comparing BigInt and Number', description: 'Loose vs strict equality', code: `<span class="console">console</span>.<span class="method">log</span>(<span class="number-val">42n</span> == <span class="number-val">42</span>);  <span class="comment">// true (loose: same value)</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="number-val">42n</span> === <span class="number-val">42</span>); <span class="comment">// false (strict: different types)</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> <span class="number-val">42n</span>);  <span class="comment">// "bigint"</span>\n<span class="console">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> <span class="number-val">42</span>);   <span class="comment">// "number"</span>`, output: 'true\nfalse\n"bigint"\n"number"' }
        ],
        exercises: [
            { question: 'What does typeof 42n return?', answer: 'bigint', explanation: 'The n suffix creates a BigInt, and typeof returns "bigint".' },
            { question: 'What character do you append to a number to make it a BigInt?', answer: 'n', explanation: 'Add n to the end of a number literal: 42n, 100n, etc.' },
            { question: 'Can you do 10n + 5 (mix BigInt and Number)? (yes or no)', answer: 'no', explanation: 'You cannot mix BigInt and Number in arithmetic ‚Äî it throws a TypeError.' },
            { question: 'Does 42n === 42 return true or false?', answer: 'false', explanation: 'Strict equality checks type too. BigInt and Number are different types.' }
        ],
        quiz: [
            { question: 'How do you create a BigInt literal?', options: ['big(42)', '42n', 'new BigInt(42)', '#42'], correct: 1, explanation: 'Add the letter n after a number to create a BigInt literal: 42n.' },
            { question: 'Why was BigInt introduced?', options: ['To make code faster', 'To handle numbers larger than Number can safely represent', 'To replace Number entirely', 'For decimal numbers'], correct: 1, explanation: 'Regular numbers lose precision above 2^53 - 1. BigInt handles arbitrarily large integers.' },
            { question: 'What happens with 10n + 5?', options: ['15n', '15', 'TypeError', 'NaN'], correct: 2, explanation: 'You cannot mix BigInt and Number in operations. Convert first: 10n + BigInt(5).' },
            { question: 'What is typeof 100n?', options: ['"number"', '"bigint"', '"BigInt"', '"big"'], correct: 1, explanation: 'typeof returns "bigint" (lowercase) for BigInt values.' },
            { question: 'What does 10n / 3n return?', options: ['3.33n', '3n', '3', 'Error'], correct: 1, explanation: 'BigInt division truncates decimals. 10n / 3n = 3n (not 3.33...).' }
        ]
    }
];

// ===== RENDER FUNCTIONS =====

function createParticles() {
    const bg = document.getElementById('bgAnimation');
    const colors = ['var(--accent-1)', 'var(--accent-4)', 'var(--accent-5)', 'var(--success)', 'var(--warning)'];
    for (let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        const size = Math.random() * 6 + 2;
        particle.style.cssText = `
            width: ${size}px; height: ${size}px;
            left: ${Math.random() * 100}%;
            background: ${colors[Math.floor(Math.random() * colors.length)]};
            animation-duration: ${Math.random() * 20 + 15}s;
            animation-delay: ${Math.random() * 20}s;
        `;
        bg.appendChild(particle);
    }
}

function updateProgress() {
    const totalPhases = topics.length * 4; // 4 phases per topic
    let completed = 0;
    for (let key in state.topicPhaseCompletion) {
        completed += Object.values(state.topicPhaseCompletion[key]).filter(v => v).length;
    }
    const pct = Math.round((completed / totalPhases) * 100);
    document.getElementById('progressBar').style.width = pct + '%';
    document.getElementById('progressText').textContent = pct + '%';
}

function updateStats() {
    document.getElementById('xpCount').textContent = state.xp;
    document.getElementById('streakCount').textContent = state.streak;
}

function addXP(amount) {
    state.xp += amount;
    updateStats();
}

function launchConfetti() {
    const container = document.getElementById('confettiContainer');
    const colors = ['#e94560', '#0f3460', '#00d2ff', '#7c3aed', '#10b981', '#f59e0b', '#ff7b72', '#a5d6ff'];
    for (let i = 0; i < 50; i++) {
        const c = document.createElement('div');
        c.className = 'confetti';
        c.style.cssText = `
            left: ${Math.random() * 100}%;
            top: -10px;
            width: ${Math.random() * 10 + 5}px;
            height: ${Math.random() * 10 + 5}px;
            background: ${colors[Math.floor(Math.random() * colors.length)]};
            border-radius: ${Math.random() > 0.5 ? '50%' : '0'};
            animation-duration: ${Math.random() * 2 + 1.5}s;
            animation-delay: ${Math.random() * 0.5}s;
        `;
        container.appendChild(c);
        setTimeout(() => c.remove(), 3000);
    }
}

function renderWelcome() {
    const main = document.getElementById('mainContent');
    main.innerHTML = `
        <div class="welcome-screen">
            <h1>Master JavaScript Primitives</h1>
            <p>Learn the 7 fundamental building blocks of JavaScript through interactive lessons, real-world examples, hands-on exercises, and quizzes. Each topic unlocks after you prove your mastery!</p>
            <div class="primitives-preview">
                <div class="primitive-chip string">üìù String</div>
                <div class="primitive-chip number">üî¢ Number</div>
                <div class="primitive-chip boolean">‚úÖ Boolean</div>
                <div class="primitive-chip undefined">‚ùì Undefined</div>
                <div class="primitive-chip null">üö´ Null</div>
                <div class="primitive-chip symbol">üîë Symbol</div>
                <div class="primitive-chip bigint">üî¢ BigInt</div>
            </div>
            <button class="btn btn-primary" onclick="startLearning()">
                üöÄ Start Learning
            </button>
        </div>
    `;
    state.currentScreen = 'welcome';
}

function startLearning() {
    state.currentScreen = 'topic';
    state.currentTopic = 0;
    state.currentPhase = 'learn';
    renderTopicView();
}

function renderTopicView() {
    const main = document.getElementById('mainContent');
    const topic = topics[state.currentTopic];

    if (!state.topicPhaseCompletion[topic.id]) {
        state.topicPhaseCompletion[topic.id] = { learn: false, examples: false, exercises: false, quiz: false };
    }

    const phaseDone = state.topicPhaseCompletion[topic.id];

    main.innerHTML = `
        <div class="topic-nav" id="topicNav"></div>
        <div class="phase-tabs">
            <button class="phase-tab ${state.currentPhase === 'learn' ? 'active' : ''}" onclick="switchPhase('learn')">üìñ Learn</button>
            <button class="phase-tab ${state.currentPhase === 'examples' ? 'active' : ''}" onclick="switchPhase('examples')" ${!phaseDone.learn ? 'disabled title="Complete Learn first"' : ''}>üí° Examples</button>
            <button class="phase-tab ${state.currentPhase === 'exercises' ? 'active' : ''}" onclick="switchPhase('exercises')" ${!phaseDone.examples ? 'disabled title="Complete Examples first"' : ''}>‚úèÔ∏è Exercises</button>
            <button class="phase-tab ${state.currentPhase === 'quiz' ? 'active' : ''}" onclick="switchPhase('quiz')" ${!phaseDone.exercises ? 'disabled title="Complete Exercises first"' : ''}>üéØ Quiz</button>
        </div>
        <div id="phaseContent"></div>
    `;

    renderTopicNav();
    renderPhase();
    updateProgress();
}

function renderTopicNav() {
    const nav = document.getElementById('topicNav');
    nav.innerHTML = topics.map((t, i) => {
        const isCompleted = state.completedTopics.has(t.id);
        const isCurrent = i === state.currentTopic;
        const isLocked = i > 0 && !state.completedTopics.has(topics[i-1].id) && i !== state.currentTopic;

        let cls = 'topic-nav-item';
        if (isCurrent) cls += ' active';
        if (isCompleted) cls += ' completed';
        if (isLocked) cls += ' locked';

        return `<div class="${cls}" onclick="${isLocked ? '' : `goToTopic(${i})`}" style="border-color: ${isCurrent ? t.color : ''}">
            ${t.emoji} ${t.name} ${isCompleted ? '<span class="check">‚úì</span>' : ''}
        </div>`;
    }).join('');
}

function goToTopic(index) {
    if (index > 0 && !state.completedTopics.has(topics[index-1].id) && index !== state.currentTopic) return;
    state.currentTopic = index;
    state.currentPhase = 'learn';
    renderTopicView();
}

function switchPhase(phase) {
    const topic = topics[state.currentTopic];
    const phaseDone = state.topicPhaseCompletion[topic.id] || {};

    if (phase === 'examples' && !phaseDone.learn) return;
    if (phase === 'exercises' && !phaseDone.examples) return;
    if (phase === 'quiz' && !phaseDone.exercises) return;

    state.currentPhase = phase;
    renderTopicView();
}

function renderPhase() {
    const content = document.getElementById('phaseContent');
    switch (state.currentPhase) {
        case 'learn': renderLearnPhase(content); break;
        case 'examples': renderExamplesPhase(content); break;
        case 'exercises': renderExercisesPhase(content); break;
        case 'quiz': renderQuizPhase(content); break;
    }
}

function renderLearnPhase(container) {
    const topic = topics[state.currentTopic];
    const learn = topic.learn;

    container.innerHTML = `
        <div class="section active">
            <div class="section-header">
                <div class="section-badge learn">üìñ Learning</div>
                <h2 class="section-title">${learn.title}</h2>
                <p class="section-subtitle">${learn.intro}</p>
            </div>

            <div class="card">
                <h3>üîë Key Points</h3>
                <ul style="list-style: none; padding: 0;">
                    ${learn.keyPoints.map(kp => `<li style="padding: 8px 0; color: var(--text-secondary); line-height: 1.6; display: flex; gap: 10px;">
                        <span style="color: ${topic.color};">‚ñ∏</span> <span>${kp}</span>
                    </li>`).join('')}
                </ul>
            </div>

            <div class="analogy-box">
                <div class="analogy-label">üí° Real-World Analogy</div>
                <p>${learn.analogy}</p>
            </div>

            ${learn.codeExamples.map((ex, i) => `
                <div class="card">
                    <h3>${ex.title}</h3>
                    <div class="code-block">
                        <button class="code-run-btn" onclick="runCode(${i})">‚ñ∂ Run</button>
                        ${ex.code}
                    </div>
                    <div class="code-output" id="codeOutput${i}">
                        <span class="output-label">Output</span>
                        ${ex.output.split('\n').map(l => `<div>${l}</div>`).join('')}
                    </div>
                </div>
            `).join('')}

            ${learn.warning ? `
                <div class="warning-box">
                    <div class="warning-label">‚ö†Ô∏è Watch Out!</div>
                    <p style="color: var(--text-secondary); line-height: 1.6;">${learn.warning}</p>
                </div>
            ` : ''}

            <div class="typeof-checker">
                <h4>üî¨ Interactive typeof Checker</h4>
                <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 16px;">Type any JavaScript value below and see its type!</p>
                <div class="typeof-input-group">
                    <input class="typeof-input" id="typeofInput" placeholder='Try: "hello", 42, true, null, undefined' onkeyup="checkTypeof(event)">
                    <button class="btn btn-primary btn-small" onclick="runTypeof()">Check Type</button>
                </div>
                <div class="typeof-result" id="typeofResult">
                    <span style="color: var(--text-muted);">Enter a value above and click "Check Type"</span>
                </div>
            </div>

            <div class="nav-buttons">
                <div></div>
                <button class="btn btn-success" onclick="completeLearn()">
                    Continue to Examples ‚Üí
                </button>
            </div>
        </div>
    `;
}

function runCode(index) {
    const output = document.getElementById(`codeOutput${index}`);
    output.classList.add('visible');
}

function checkTypeof(event) {
    if (event.key === 'Enter') runTypeof();
}

function runTypeof() {
    const input = document.getElementById('typeofInput').value.trim();
    const result = document.getElementById('typeofResult');

    if (!input) {
        result.innerHTML = '<span style="color: var(--text-muted);">Enter a value first!</span>';
        return;
    }

    try {
        let val = eval(`(${input})`);
        let type = typeof val;
        let display = val === null ? 'null' : val === undefined ? 'undefined' : String(val);
        if (typeof val === 'symbol') display = val.toString();

        const colorMap = {
            'string': 'var(--string-color)',
            'number': 'var(--number-color)',
            'boolean': 'var(--boolean-color)',
            'undefined': 'var(--undefined-color)',
            'object': 'var(--null-color)',
            'symbol': 'var(--symbol-color)',
            'bigint': 'var(--bigint-color)'
        };

        result.innerHTML = `
            <span style="font-family: 'JetBrains Mono', monospace;">${input}</span>
            <span style="color: var(--text-muted);">‚Üí</span>
            <span class="type-tag" style="background: ${colorMap[type] || 'var(--text-muted)'}20; color: ${colorMap[type] || 'var(--text-muted)'};">${type}</span>
            ${val === null ? '<span style="color: var(--warning); font-size: 12px;">(null is special ‚Äî typeof says "object" but it\'s actually null!)</span>' : ''}
        `;
    } catch (e) {
        result.innerHTML = `<span style="color: var(--error);">‚ùå ${e.message}</span>`;
    }
}

function completeLearn() {
    const topic = topics[state.currentTopic];
    if (!state.topicPhaseCompletion[topic.id]) state.topicPhaseCompletion[topic.id] = {};
    state.topicPhaseCompletion[topic.id].learn = true;
    addXP(10);
    state.currentPhase = 'examples';
    renderTopicView();
}

function renderExamplesPhase(container) {
    const topic = topics[state.currentTopic];

    container.innerHTML = `
        <div class="section active">
            <div class="section-header">
                <div class="section-badge learn" style="background: rgba(242,204,96,0.15); color: var(--warning);">üí° Real-World Examples</div>
                <h2 class="section-title">See ${topic.name} in Action</h2>
                <p class="section-subtitle">Here's how ${topic.name.toLowerCase()} values are used in real programming scenarios.</p>
            </div>

            ${topic.examples.map((ex, i) => `
                <div class="card">
                    <h3>${ex.title}</h3>
                    <p>${ex.description}</p>
                    <div class="code-block">
                        <button class="code-run-btn" onclick="runExample(${i})">‚ñ∂ Run</button>
                        ${ex.code}
                    </div>
                    <div class="code-output" id="exampleOutput${i}">
                        <span class="output-label">Output</span>
                        ${ex.output.split('\n').map(l => `<div>${l}</div>`).join('')}
                    </div>
                </div>
            `).join('')}

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="switchPhase('learn')">
                    ‚Üê Back to Learn
                </button>
                <button class="btn btn-success" onclick="completeExamples()">
                    Continue to Exercises ‚Üí
                </button>
            </div>
        </div>
    `;
}

function runExample(index) {
    document.getElementById(`exampleOutput${index}`).classList.add('visible');
}

function completeExamples() {
    const topic = topics[state.currentTopic];
    state.topicPhaseCompletion[topic.id].examples = true;
    addXP(10);
    state.currentPhase = 'exercises';
    renderTopicView();
}

function renderExercisesPhase(container) {
    const topic = topics[state.currentTopic];
    if (!state.exerciseResults[topic.id]) {
        state.exerciseResults[topic.id] = new Array(topic.exercises.length).fill(null);
    }

    const results = state.exerciseResults[topic.id];
    const allDone = results.every(r => r === true);

    container.innerHTML = `
        <div class="section active">
            <div class="section-header">
                <div class="section-badge practice">‚úèÔ∏è Exercises</div>
                <h2 class="section-title">Practice ${topic.name}</h2>
                <p class="section-subtitle">Answer these questions to test your understanding. Get them all right to unlock the quiz!</p>
            </div>

            ${topic.exercises.map((ex, i) => `
                <div class="exercise-card" id="exercise${i}">
                    <h4>Exercise ${i + 1}</h4>
                    <p class="exercise-question">${ex.question}</p>
                    <div style="display: flex; gap: 10px; align-items: start; flex-wrap: wrap;">
                        <input class="exercise-input" id="exerciseInput${i}" placeholder="Type your answer..."
                            style="margin-bottom: 0; flex: 1; min-width: 200px;"
                            onkeyup="if(event.key==='Enter') checkExercise(${i})"
                            ${results[i] === true ? 'disabled value="' + ex.answer + '"' : ''}>
                        <button class="btn btn-primary btn-small" onclick="checkExercise(${i})" ${results[i] === true ? 'disabled' : ''}>
                            ${results[i] === true ? '‚úì Correct' : 'Check'}
                        </button>
                    </div>
                    <div class="exercise-feedback ${results[i] === true ? 'correct' : results[i] === false ? 'incorrect' : ''}" id="exerciseFeedback${i}">
                        ${results[i] === true ? `‚úÖ Correct! <div class="explanation">${ex.explanation}</div>` :
                          results[i] === false ? `‚ùå Not quite. Try again! <div class="explanation">Hint: ${ex.explanation}</div>` : ''}
                    </div>
                </div>
            `).join('')}

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="switchPhase('examples')">
                    ‚Üê Back to Examples
                </button>
                <button class="btn btn-success" onclick="completeExercises()" ${!allDone ? 'disabled' : ''}>
                    ${allDone ? 'Continue to Quiz ‚Üí' : `Complete all exercises first (${results.filter(r=>r===true).length}/${results.length})`}
                </button>
            </div>
        </div>
    `;
}

function checkExercise(index) {
    const topic = topics[state.currentTopic];
    const exercise = topic.exercises[index];
    const input = document.getElementById(`exerciseInput${index}`);
    const feedback = document.getElementById(`exerciseFeedback${index}`);
    const userAnswer = input.value.trim().toLowerCase();
    const correctAnswer = exercise.answer.toLowerCase();

    if (userAnswer === correctAnswer) {
        state.exerciseResults[topic.id][index] = true;
        feedback.className = 'exercise-feedback correct';
        feedback.innerHTML = `‚úÖ Correct! <div class="explanation">${exercise.explanation}</div>`;
        input.disabled = true;
        addXP(5);
        state.streak++;
        updateStats();

        const card = document.getElementById(`exercise${index}`);
        card.classList.add('bounce');

        // Re-render to update the continue button
        setTimeout(() => renderExercisesPhase(document.getElementById('phaseContent')), 500);
    } else {
        state.exerciseResults[topic.id][index] = false;
        feedback.className = 'exercise-feedback incorrect';
        feedback.innerHTML = `‚ùå Not quite. Try again! <div class="explanation">Hint: ${exercise.explanation}</div>`;
        state.streak = 0;
        updateStats();

        const card = document.getElementById(`exercise${index}`);
        card.classList.add('shake');
        setTimeout(() => card.classList.remove('shake'), 500);
    }
}

function completeExercises() {
    const topic = topics[state.currentTopic];
    const results = state.exerciseResults[topic.id];
    if (!results.every(r => r === true)) return;

    state.topicPhaseCompletion[topic.id].exercises = true;
    addXP(15);
    state.currentPhase = 'quiz';
    state.currentQuizIndex = 0;
    state.currentQuizAnswers = [];
    renderTopicView();
}

function renderQuizPhase(container) {
    const topic = topics[state.currentTopic];

    if (state.currentQuizIndex >= topic.quiz.length) {
        renderQuizResults(container);
        return;
    }

    const q = topic.quiz[state.currentQuizIndex];
    const letters = ['A', 'B', 'C', 'D'];
    const answered = state.currentQuizAnswers[state.currentQuizIndex] !== undefined;

    container.innerHTML = `
        <div class="section active">
            <div class="section-header">
                <div class="section-badge quiz">üéØ Quiz</div>
                <h2 class="section-title">${topic.name} Quiz</h2>
                <p class="section-subtitle">Score 80% or higher to unlock the next topic!</p>
            </div>

            <div class="quiz-container">
                <div class="quiz-progress">
                    ${topic.quiz.map((_, i) => {
                        let cls = 'quiz-dot';
                        if (i < state.currentQuizIndex) {
                            cls += state.currentQuizAnswers[i] === topic.quiz[i].correct ? ' correct' : ' incorrect';
                        } else if (i === state.currentQuizIndex) {
                            cls += ' current';
                        }
                        return `<div class="${cls}"></div>`;
                    }).join('')}
                </div>

                <div class="quiz-question-card">
                    <div class="quiz-question-number">Question ${state.currentQuizIndex + 1} of ${topic.quiz.length}</div>
                    <div class="quiz-question-text">${q.question}</div>

                    <div class="quiz-options">
                        ${q.options.map((opt, i) => {
                            let cls = 'quiz-option';
                            if (answered) {
                                cls += ' disabled';
                                if (i === q.correct) cls += ' correct-answer';
                                if (i === state.currentQuizAnswers[state.currentQuizIndex] && i !== q.correct) cls += ' wrong-answer';
                            }
                            return `<div class="${cls}" onclick="${!answered ? `answerQuiz(${i})` : ''}">
                                <span class="option-letter">${letters[i]}</span>
                                <span>${opt}</span>
                            </div>`;
                        }).join('')}
                    </div>

                    <div class="quiz-explanation ${answered ? 'visible' : ''}" id="quizExplanation">
                        <h5>üí° Explanation</h5>
                        <p>${q.explanation}</p>
                    </div>
                </div>

                ${answered ? `
                    <div class="nav-buttons">
                        <div></div>
                        <button class="btn btn-primary" onclick="nextQuizQuestion()">
                            ${state.currentQuizIndex < topic.quiz.length - 1 ? 'Next Question ‚Üí' : 'See Results ‚Üí'}
                        </button>
                    </div>
                ` : ''}
            </div>
        </div>
    `;
}

function answerQuiz(optionIndex) {
    const topic = topics[state.currentTopic];
    const q = topic.quiz[state.currentQuizIndex];

    state.currentQuizAnswers[state.currentQuizIndex] = optionIndex;

    if (optionIndex === q.correct) {
        addXP(10);
        state.streak++;
    } else {
        state.streak = 0;
    }
    updateStats();

    renderQuizPhase(document.getElementById('phaseContent'));
}

function nextQuizQuestion() {
    state.currentQuizIndex++;
    renderQuizPhase(document.getElementById('phaseContent'));
}

function renderQuizResults(container) {
    const topic = topics[state.currentTopic];
    const correctCount = state.currentQuizAnswers.filter((a, i) => a === topic.quiz[i].correct).length;
    const total = topic.quiz.length;
    const percentage = Math.round((correctCount / total) * 100);
    const passed = percentage >= 80;

    if (passed) {
        state.topicPhaseCompletion[topic.id].quiz = true;
        state.completedTopics.add(topic.id);
        addXP(25);
        launchConfetti();
        updateProgress();
    }

    container.innerHTML = `
        <div class="section active">
            <div class="quiz-results">
                <div class="results-icon">${passed ? 'üèÜ' : 'üìö'}</div>
                <div class="results-score ${passed ? 'pass' : 'fail'}">${percentage}%</div>
                <p style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">
                    ${correctCount} out of ${total} correct
                </p>
                <p class="results-message">
                    ${passed ?
                        `üéâ Amazing! You've mastered ${topic.name}! ${state.currentTopic < topics.length - 1 ? `Ready for ${topics[state.currentTopic + 1].name}?` : 'You\'ve completed all topics!'}` :
                        `You need 80% to pass. Review the material and try again. You got this! üí™`
                    }
                </p>

                <div style="display: flex; flex-direction: column; gap: 12px; margin-bottom: 30px; max-width: 500px; margin-left: auto; margin-right: auto; text-align: left;">
                    ${topic.quiz.map((q, i) => {
                        const isCorrect = state.currentQuizAnswers[i] === q.correct;
                        return `<div style="display: flex; align-items: center; gap: 12px; padding: 10px 14px; background: var(--bg-card); border-radius: 8px;">
                            <span style="font-size: 18px;">${isCorrect ? '‚úÖ' : '‚ùå'}</span>
                            <span style="font-size: 14px; color: var(--text-secondary); flex: 1;">${q.question.substring(0, 50)}...</span>
                        </div>`;
                    }).join('')}
                </div>

                <div style="display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
                    ${!passed ? `<button class="btn btn-secondary" onclick="retryQuiz()">üîÑ Retry Quiz</button>` : ''}
                    ${!passed ? `<button class="btn btn-primary" onclick="switchPhase('learn')">üìñ Review Material</button>` : ''}
                    ${passed && state.currentTopic < topics.length - 1 ?
                        `<button class="btn btn-primary" onclick="nextTopic()">üöÄ Next Topic: ${topics[state.currentTopic + 1].name}</button>` : ''}
                    ${passed && state.currentTopic >= topics.length - 1 ?
                        `<button class="btn btn-primary" onclick="showFinalCelebration()">üéä See Final Results</button>` : ''}
                </div>
            </div>
        </div>
    `;
}

function retryQuiz() {
    state.currentQuizIndex = 0;
    state.currentQuizAnswers = [];
    renderQuizPhase(document.getElementById('phaseContent'));
}

function nextTopic() {
    state.currentTopic++;
    state.currentPhase = 'learn';
    state.currentQuizIndex = 0;
    state.currentQuizAnswers = [];
    renderTopicView();
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

function showFinalCelebration() {
    const main = document.getElementById('mainContent');
    launchConfetti();
    setTimeout(launchConfetti, 500);
    setTimeout(launchConfetti, 1000);

    main.innerHTML = `
        <div class="celebration">
            <div class="trophy">üèÜ</div>
            <h1 style="font-size: 42px; font-weight: 800; background: linear-gradient(135deg, var(--accent-1), var(--accent-4), var(--accent-5)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 16px;">
                Congratulations!
            </h1>
            <p style="font-size: 20px; color: var(--text-secondary); margin-bottom: 8px;">
                You've mastered all 7 JavaScript Primitives!
            </p>
            <p style="font-size: 16px; color: var(--text-muted); margin-bottom: 40px;">
                Total XP: ${state.xp} ‚ö° | Best Streak: ${state.streak} üî•
            </p>

            <div class="primitives-preview" style="margin-bottom: 40px;">
                ${topics.map(t => `
                    <div class="primitive-chip ${t.id}" style="opacity: 1;">
                        ${t.emoji} ${t.name} ‚úì
                    </div>
                `).join('')}
            </div>

            <div class="card" style="text-align: left; max-width: 600px; margin: 0 auto 30px;">
                <h3>üìã Quick Reference</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Primitive</th>
                            <th>Example</th>
                            <th>typeof</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>String</td><td><span style="color: var(--string-color)">"hello"</span></td><td>"string"</td></tr>
                        <tr><td>Number</td><td><span style="color: var(--number-color)">42</span></td><td>"number"</td></tr>
                        <tr><td>Boolean</td><td><span style="color: var(--boolean-color)">true</span></td><td>"boolean"</td></tr>
                        <tr><td>Undefined</td><td><span style="color: var(--undefined-color)">undefined</span></td><td>"undefined"</td></tr>
                        <tr><td>Null</td><td><span style="color: var(--null-color)">null</span></td><td>"object" ‚ö†Ô∏è</td></tr>
                        <tr><td>Symbol</td><td><span style="color: var(--symbol-color)">Symbol("id")</span></td><td>"symbol"</td></tr>
                        <tr><td>BigInt</td><td><span style="color: var(--bigint-color)">42n</span></td><td>"bigint"</td></tr>
                    </tbody>
                </table>
            </div>

            <div style="display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
                <button class="btn btn-secondary" onclick="renderWelcome()">üè† Back to Home</button>
                <button class="btn btn-primary" onclick="reviewAll()">üìñ Review Any Topic</button>
            </div>
        </div>
    `;
}

function reviewAll() {
    state.currentTopic = 0;
    state.currentPhase = 'learn';
    renderTopicView();
}

// ===== INIT =====
createParticles();
renderWelcome();
updateStats();
</script>
</body>
</html>