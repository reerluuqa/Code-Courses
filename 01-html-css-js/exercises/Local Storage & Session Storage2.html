<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ES6 Modules Mastery - Interactive Learning</title>
    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --accent-default: #f59e0b;
            --accent-named: #3b82f6;
            --accent-success: #10b981;
            --accent-error: #ef4444;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --code-bg: #020617;
            --border: #475569;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Navigation & Progress */
        .top-bar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            z-index: 1000;
            padding: 1rem 2rem;
        }

        .progress-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .progress-bar {
            flex: 1;
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-named), var(--accent-success));
            width: 0%;
            transition: width 0.5s ease;
        }

        .xp-counter {
            font-weight: bold;
            color: var(--accent-default);
            font-family: monospace;
            font-size: 1.2rem;
        }

        /* Hero Section */
        .hero {
            margin-top: 80px;
            padding: 4rem 2rem;
            text-align: center;
            background: radial-gradient(circle at center, var(--bg-secondary) 0%, var(--bg-primary) 100%);
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #fff, #94a3b8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        /* Section Styling */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .section {
            margin-bottom: 4rem;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.6s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .badge {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        .badge-default { background: var(--accent-default); color: #000; }
        .badge-named { background: var(--accent-named); color: #fff; }
        .badge-dynamic { background: #8b5cf6; color: #fff; }

        /* Visual Module Diagram */
        .module-visualizer {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        .file-tree {
            display: flex;
            justify-content: space-around;
            align-items: center;
            min-height: 300px;
            position: relative;
        }

        .module-box {
            background: var(--bg-tertiary);
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            min-width: 200px;
            position: relative;
            transition: all 0.3s;
            cursor: pointer;
        }

        .module-box:hover {
            transform: translateY(-5px);
            border-color: var(--accent-named);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.2);
        }

        .module-box.active {
            border-color: var(--accent-success);
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
        }

        .module-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            font-family: monospace;
            color: var(--accent-default);
        }

        .export-item {
            background: rgba(59, 130, 246, 0.2);
            border-left: 3px solid var(--accent-named);
            padding: 0.5rem;
            margin: 0.5rem 0;
            border-radius: 0 4px 4px 0;
            font-family: monospace;
            font-size: 0.9rem;
            position: relative;
            animation: slideIn 0.5s ease;
        }

        .export-item.default {
            background: rgba(245, 158, 11, 0.2);
            border-left-color: var(--accent-default);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* SVG Connections */
        .connections {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .connection-line {
            stroke: var(--border);
            stroke-width: 2;
            fill: none;
            stroke-dasharray: 5,5;
            animation: dash 20s linear infinite;
        }

        .connection-line.active {
            stroke: var(--accent-success);
            stroke-width: 3;
            stroke-dasharray: none;
            filter: drop-shadow(0 0 5px var(--accent-success));
        }

        @keyframes dash {
            to { stroke-dashoffset: -100; }
        }

        /* Code Blocks */
        .code-container {
            background: var(--code-bg);
            border-radius: 8px;
            overflow: hidden;
            margin: 1rem 0;
            border: 1px solid var(--border);
        }

        .code-header {
            background: var(--bg-tertiary);
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
        }

        .code-tabs {
            display: flex;
            gap: 0.5rem;
        }

        .code-tab {
            padding: 0.25rem 0.75rem;
            background: transparent;
            border: 1px solid transparent;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 4px;
            font-size: 0.875rem;
            transition: all 0.2s;
        }

        .code-tab:hover { color: var(--text-primary); }
        .code-tab.active {
            background: var(--bg-primary);
            border-color: var(--border);
            color: var(--text-primary);
        }

        pre {
            padding: 1.5rem;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        code {
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .keyword { color: #c678dd; }
        .function { color: #61afef; }
        .string { color: #98c379; }
        .comment { color: #5c6370; font-style: italic; }
        .operator { color: #56b6c2; }
        .default-export { color: #e5c07b; font-weight: bold; }

        /* Pitfall Cards */
        .pitfall-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .pitfall-card {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(239, 68, 68, 0.05));
            border: 1px solid var(--accent-error);
            border-radius: 12px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .pitfall-card::before {
            content: '‚ö†Ô∏è';
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 2rem;
            opacity: 0.3;
        }

        .pitfall-card h3 {
            color: var(--accent-error);
            margin-bottom: 0.5rem;
        }

        .pitfall-card .solution {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px dashed var(--accent-error);
            display: none;
        }

        .pitfall-card.solved .solution {
            display: block;
            animation: fadeIn 0.5s;
        }

        .reveal-btn {
            background: var(--accent-error);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 1rem;
            font-weight: bold;
            transition: transform 0.2s;
        }

        .reveal-btn:hover { transform: scale(1.05); }

        /* Interactive Playground */
        .playground {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 2rem;
            border: 2px solid var(--border);
        }

        .playground-editor {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 1.5rem;
        }

        .editor-pane {
            background: var(--code-bg);
            border-radius: 8px;
            border: 1px solid var(--border);
            overflow: hidden;
        }

        .pane-header {
            background: var(--bg-tertiary);
            padding: 0.75rem;
            font-family: monospace;
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-error);
            transition: background 0.3s;
        }

        .status-indicator.success { background: var(--accent-success); }

        textarea {
            width: 100%;
            min-height: 200px;
            background: transparent;
            border: none;
            padding: 1rem;
            color: var(--text-primary);
            font-family: monospace;
            font-size: 0.9rem;
            resize: vertical;
            outline: none;
        }

        .output-panel {
            grid-column: 1 / -1;
            background: var(--code-bg);
            border-radius: 8px;
            padding: 1rem;
            min-height: 100px;
            border: 1px solid var(--border);
            font-family: monospace;
        }

        .error-line {
            background: rgba(239, 68, 68, 0.2);
            border-left: 3px solid var(--accent-error);
            padding-left: 1rem;
        }

        /* Quiz Section */
        .quiz-container {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .question {
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .option {
            background: var(--bg-tertiary);
            border: 2px solid var(--border);
            padding: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .option:hover {
            border-color: var(--accent-named);
            transform: translateX(5px);
        }

        .option.correct {
            background: rgba(16, 185, 129, 0.2);
            border-color: var(--accent-success);
        }

        .option.wrong {
            background: rgba(239, 68, 68, 0.2);
            border-color: var(--accent-error);
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .option-marker {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.8rem;
        }

        .option.correct .option-marker {
            background: var(--accent-success);
            border-color: var(--accent-success);
            color: white;
            content: '‚úì';
        }

        /* Dynamic Import Demo */
        .dynamic-demo {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            padding: 2rem;
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 2px solid #8b5cf6;
        }

        .load-btn {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .load-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(139, 92, 246, 0.3); }
        .load-btn.loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            to { left: 100%; }
        }

        .module-cache {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            min-height: 60px;
        }

        .cached-module {
            background: var(--bg-tertiary);
            border: 2px solid #8b5cf6;
            padding: 0.75rem;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.9rem;
            animation: popIn 0.3s;
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            80% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .playground-editor { grid-template-columns: 1fr; }
            .file-tree { flex-direction: column; gap: 2rem; }
            .hero h1 { font-size: 2rem; }
        }

        /* Completion Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal.active { display: flex; }

        .modal-content {
            background: var(--bg-secondary);
            padding: 3rem;
            border-radius: 16px;
            text-align: center;
            max-width: 500px;
            border: 2px solid var(--accent-success);
            animation: slideUp 0.5s;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .trophy {
            font-size: 4rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>

    <!-- Progress Bar -->
    <div class="top-bar">
        <div class="progress-container">
            <span>Progress:</span>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <span class="xp-counter" id="xpCounter">XP: 0</span>
        </div>
    </div>

    <!-- Hero -->
    <section class="hero">
        <h1>üöÄ ES6 Modules Mastery</h1>
        <p>Master the art of modular JavaScript. From named exports to dynamic imports, become the architect of scalable applications.</p>
    </section>

    <div class="container">

        <!-- Visual Overview -->
        <section class="section" id="overview">
            <h2 class="section-title">Visual Module Architecture</h2>
            <p style="margin-bottom: 1rem; color: var(--text-secondary);">Hover over modules to see the flow of exports and imports. Click to highlight connections.</p>
            
            <div class="module-visualizer">
                <svg class="connections" id="connectionSvg">
                    <!-- Lines drawn by JS -->
                </svg>
                <div class="file-tree" id="fileTree">
                    <div class="module-box" id="mathModule" onclick="highlightModule('math')">
                        <div class="module-header">üìÑ math.js</div>
                        <div class="export-item">export const add</div>
                        <div class="export-item">export const subtract</div>
                        <div class="export-item default">export default multiply</div>
                    </div>

                    <div class="module-box" id="utilsModule" onclick="highlightModule('utils')">
                        <div class="module-header">üìÑ utils.js</div>
                        <div class="export-item">export { format }</div>
                        <div class="export-item">export { validate }</div>
                    </div>

                    <div class="module-box" id="mainModule" onclick="highlightModule('main')">
                        <div class="module-header">üìÑ main.js</div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            import multiply from './math'<br>
                            import { add } from './math'<br>
                            import { format } from './utils'
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Named Exports -->
        <section class="section" id="named">
            <h2 class="section-title">
                <span class="badge badge-named">Named Exports</span>
                Export Multiple Items
            </h2>
            
            <p>Named exports allow you to export multiple values from a module. You must use the same name when importing (or use aliases).</p>

            <div class="code-container">
                <div class="code-header">
                    <div class="code-tabs">
                        <button class="code-tab active" onclick="switchTab(this, 'named-inline')">Inline</button>
                        <button class="code-tab" onclick="switchTab(this, 'named-group')">Grouped</button>
                    </div>
                    <span style="color: var(--text-secondary); font-size: 0.875rem;">api.js</span>
                </div>
                <pre id="named-inline"><code><span class="comment">// Export individually (inline)</span>
<span class="keyword">export const</span> <span class="function">fetchUser</span> = <span class="keyword">async</span> (id) => {
    <span class="keyword">return</span> <span class="keyword">await</span> db.<span class="function">findById</span>(id);
};

<span class="keyword">export const</span> <span class="function">updateUser</span> = <span class="keyword">async</span> (id, data) => {
    <span class="keyword">return</span> <span class="keyword">await</span> db.<span class="function">update</span>(id, data);
};

<span class="keyword">export const</span> API_URL = <span class="string">'https://api.example.com'</span>;</code></pre>
                <pre id="named-group" style="display:none"><code><span class="comment">// Define first, export at bottom</span>
<span class="keyword">const</span> <span class="function">fetchUser</span> = <span class="keyword">async</span> (id) => { ... };
<span class="keyword">const</span> <span class="function">updateUser</span> = <span class="keyword">async</span> (id, data) => { ... };
<span class="keyword">const</span> API_URL = <span class="string">'https://api.example.com'</span>;

<span class="comment">// Grouped export - useful for refactoring!</span>
<span class="keyword">export</span> { fetchUser, updateUser, API_URL };</code></pre>
            </div>

            <div class="pitfall-grid">
                <div class="pitfall-card" id="pitfall1">
                    <h3>Common Mistake: Name Mismatch</h3>
                    <p>You cannot rename named exports on import unless you use the <code>as</code> keyword.</p>
                    <div class="code-container" style="margin-top: 1rem;">
                        <pre><code><span class="comment">// ‚ùå Wrong - fetchUsers doesn't exist in export</span>
<span class="keyword">import</span> { fetchUsers } <span class="keyword">from</span> <span class="string">'./api.js'</span>;

<span class="comment">// ‚úÖ Correct - must match export name exactly</span>
<span class="keyword">import</span> { fetchUser <span class="keyword">as</span> fetchUsers } <span class="keyword">from</span> <span class="string">'./api.js'</span>;</code></pre>
                    </div>
                    <button class="reveal-btn" onclick="solvePitfall('pitfall1')">Mark as Understood (+50 XP)</button>
                    <div class="solution">
                        <strong>üí° Remember:</strong> Named exports create a strict contract. The import name must match the export name, or you must explicitly alias it.
                    </div>
                </div>

                <div class="pitfall-card" id="pitfall2">
                    <h3>Destructuring Confusion</h3>
                    <p>Named imports use destructuring syntax, but it's not the same as object destructuring!</p>
                    <div class="code-container" style="margin-top: 1rem;">
                        <pre><code><span class="comment">// ‚ùå Wrong - this looks like object destructuring</span>
<span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">'./api.js'</span>;
<span class="keyword">const</span> { fetchUser } = api; <span class="comment">// Extra step, not tree-shakeable</span>

<span class="comment">// ‚úÖ Correct - direct named import</span>
<span class="keyword">import</span> { fetchUser } <span class="keyword">from</span> <span class="string">'./api.js'</span>;</code></pre>
                    </div>
                    <button class="reveal-btn" onclick="solvePitfall('pitfall2')">Mark as Understood (+50 XP)</button>
                    <div class="solution">
                        <strong>üí° Pro Tip:</strong> Direct named imports enable tree-shaking (removing unused code). The first example imports everything then extracts, losing optimization benefits.
                    </div>
                </div>
            </div>
        </section>

        <!-- Default Exports -->
        <section class="section" id="default">
            <h2 class="section-title">
                <span class="badge badge-default">Default Exports</span>
                One Export to Rule Them All
            </h2>

            <p>Each module can have <strong>one</strong> default export. This is typically used when a module has a primary purpose or single class/function.</p>

            <div class="code-container">
                <div class="code-header">
                    <div class="code-tabs">
                        <button class="code-tab active" onclick="switchTab(this, 'default-func')">Function</button>
                        <button class="code-tab" onclick="switchTab(this, 'default-class')">Class</button>
                        <button class="code-tab" onclick="switchTab(this, 'default-anon')">Anonymous</button>
                    </div>
                </div>
                <pre id="default-func"><code><span class="comment">// Default export with named function</span>
<span class="keyword">export default function</span> <span class="function">Calculator</span>() {
    <span class="keyword">this</span>.value = 0;
}

<span class="comment">// Import: Can use any name!</span>
<span class="keyword">import</span> Calc <span class="keyword">from</span> <span class="string">'./Calculator.js'</span>;
<span class="keyword">import</span> MyCalculator <span class="keyword">from</span> <span class="string">'./Calculator.js'</span>; <span class="comment">// Also valid!</span></code></pre>
                
                <pre id="default-class" style="display:none"><code><span class="keyword">class</span> <span class="function">Logger</span> {
    <span class="function">log</span>(msg) { console.<span class="function">log</span>(msg); }
}

<span class="keyword">export default</span> Logger;

<span class="comment">// Alternative syntax (exporting existing variable)</span>
<span class="keyword">export</span> { Logger <span class="keyword">as default</span> };</code></pre>

                <pre id="default-anon" style="display:none"><code><span class="comment">// Arrow function default export</span>
<span class="keyword">export default</span> () => {
    console.<span class="function">log</span>(<span class="string">'App initialized!'</span>);
};

<span class="comment">// Object default export (common for configs)</span>
<span class="keyword">export default</span> {
    apiUrl: <span class="string">'https://api.com'</span>,
    timeout: 5000,
    retries: 3
};</code></pre>
            </div>

            <div class="pitfall-grid">
                <div class="pitfall-card" id="pitfall3">
                    <h3>The Curly Brace Trap</h3>
                    <p>The most common beginner mistake: mixing up default and named import syntax.</p>
                    <div class="code-container" style="margin-top: 1rem;">
                        <pre><code><span class="comment">// Calculator.js has: export default class Calculator</span>

<span class="comment">// ‚ùå Wrong - default exports don't use curly braces</span>
<span class="keyword">import</span> { Calculator } <span class="keyword">from</span> <span class="string">'./Calculator.js'</span>;

<span class="comment">// ‚úÖ Correct - no braces for default</span>
<span class="keyword">import</span> Calculator <span class="keyword">from</span> <span class="string">'./Calculator.js'</span>;</code></pre>
                    </div>
                    <button class="reveal-btn" onclick="solvePitfall('pitfall3')">Mark as Understood (+50 XP)</button>
                    <div class="solution">
                        <strong>üí° Memory Trick:</strong> Default = Direct (no braces). Named = Destructured (with braces).
                    </div>
                </div>
            </div>
        </section>

        <!-- Import Patterns -->
        <section class="section" id="patterns">
            <h2 class="section-title">Advanced Import Patterns</h2>

            <div class="code-container">
                <div class="code-header">
                    <span>Import Patterns Cheatsheet</span>
                </div>
                <pre><code><span class="comment">// 1. Namespace import (import everything as an object)</span>
<span class="keyword">import</span> * <span class="keyword">as</span> Utils <span class="keyword">from</span> <span class="string">'./utils.js'</span>;
Utils.<span class="function">formatDate</span>();
Utils.<span class="function">calculateTax</span>();

<span class="comment">// 2. Aliasing (resolve naming conflicts)</span>
<span class="keyword">import</span> { fetch <span class="keyword">as</span> fetchUser } <span class="keyword">from</span> <span class="string">'./userApi.js'</span>;
<span class="keyword">import</span> { fetch <span class="keyword">as</span> fetchProduct } <span class="keyword">from</span> <span class="string">'./productApi.js'</span>;

<span class="comment">// 3. Side effects only (runs code, imports nothing)</span>
<span class="keyword">import</span> <span class="string">'./styles.css'</span>;
<span class="keyword">import</span> <span class="string">'./polyfills.js'</span>; <span class="comment">// Modifies global prototypes</span>

<span class="comment">// 4. Mixed imports (default + named)</span>
<span class="keyword">import</span> React, { useState, useEffect } <span class="keyword">from</span> <span class="string">'react'</span>;</code></pre>
            </div>

            <div class="module-visualizer" style="margin-top: 2rem;">
                <h3 style="margin-bottom: 1rem;">Module Pattern: Barrel Exports</h3>
                <p style="margin-bottom: 1rem; color: var(--text-secondary);">Clean up your imports by re-exporting from an index.js (barrel file):</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                    <div>
                        <div class="code-container">
                            <div class="code-header">components/index.js</div>
                            <pre><code><span class="comment">// Re-export everything</span>
<span class="keyword">export</span> { <span class="keyword">default</span> <span class="keyword">as</span> Button } <span class="keyword">from</span> <span class="string">'./Button.js'</span>;
<span class="keyword">export</span> { <span class="keyword">default</span> <span class="keyword">as</span> Input } <span class="keyword">from</span> <span class="string">'./Input.js'</span>;
<span class="keyword">export</span> { <span class="keyword">default</span> <span class="keyword">as</span> Card } <span class="keyword">from</span> <span class="string">'./Card.js'</span>;

<span class="comment">// Or shorter for named exports</span>
<span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">'./helpers.js'</span>;</code></pre>
                        </div>
                    </div>
                    <div>
                        <div class="code-container">
                            <div class="code-header">app.js (Clean imports!)</div>
                            <pre><code><span class="comment">// Before: Messy deep imports</span>
<span class="keyword">import</span> Button <span class="keyword">from</span> <span class="string">'./components/Button/Button.js'</span>;
<span class="keyword">import</span> Input <span class="keyword">from</span> <span class="string">'./components/Input/Input.js'</span>;

<span class="comment">// After: Clean barrel import</span>
<span class="keyword">import</span> { Button, Input, Card } <span class="keyword">from</span> <span class="string">'./components'</span>;</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dynamic Imports -->
        <section class="section" id="dynamic">
            <h2 class="section-title">
                <span class="badge badge-dynamic">Dynamic Imports</span>
                Code Splitting & Lazy Loading
            </h2>

            <p>Dynamic imports allow you to load modules on-demand, improving initial page load performance.</p>

            <div class="dynamic-demo">
                <p>Click the button to simulate lazy-loading a heavy charting library:</p>
                <button class="load-btn" id="loadChartBtn" onclick="loadChartModule()">
                    üìä Load Chart Module (Dynamic)
                </button>
                
                <div class="module-cache" id="moduleCache">
                    <div style="color: var(--text-secondary); font-size: 0.9rem; padding: 0.75rem;">
                        Module Cache: Empty (click button to load)
                    </div>
                </div>

                <div class="code-container" style="margin-top: 1rem;">
                    <div class="code-header">Implementation</div>
                    <pre><code><span class="comment">// Dynamic import returns a Promise</span>
<span class="keyword">const</span> <span class="function">loadChart</span> = <span class="keyword">async</span> () => {
    <span class="keyword">try</span> {
        <span class="comment">// Only loads when function is called!</span>
        <span class="keyword">const</span> { <span class="function">createChart</span> } = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">'./heavyChartLib.js'</span>);
        
        <span class="function">createChart</span>(data);
    } <span class="keyword">catch</span> (err) {
        console.<span class="function">error</span>(<span class="string">'Failed to load chart module'</span>, err);
    }
};

<span class="comment">// Conditional loading based on user interaction</span>
button.<span class="function">addEventListener</span>(<span class="string">'click'</span>, () => {
    <span class="function">loadChart</span>();
});</code></pre>
                </div>

                <div class="pitfall-card" id="pitfall4" style="margin-top: 1.5rem;">
                    <h3>Dynamic Import Pitfalls</h3>
                    <ul style="margin-left: 1.5rem; color: var(--text-secondary);">
                        <li>Must use <code>await</code> or <code>.then()</code> - it returns a Promise!</li>
                        <li>Cannot use variables directly: <code>import(foo)</code> is limited. Use <code>import(`./${foo}.js`)</code> instead.</li>
                        <li>In Webpack/Vite, dynamic imports create separate chunks automatically.</li>
                    </ul>
                    <button class="reveal-btn" onclick="solvePitfall('pitfall4')">Mark as Understood (+50 XP)</button>
                </div>
            </div>
        </section>

        <!-- Interactive Playground -->
        <section class="section" id="playground">
            <h2 class="section-title">üéÆ Module Repair Shop</h2>
            <p>Fix the broken imports! Edit the code in main.js to make all tests pass.</p>

            <div class="playground">
                <div class="playground-editor">
                    <div class="editor-pane">
                        <div class="pane-header">
                            <span>math.js (Read-only)</span>
                            <div class="status-indicator success"></div>
                        </div>
                        <pre style="padding: 1rem; color: var(--text-secondary); font-size: 0.9rem;"><code>export const add = (a, b) => a + b;
export const subtract = (a, b) => a - b;
export default function multiply(a, b) {
    return a * b;
}</code></pre>
                    </div>

                    <div class="editor-pane">
                        <div class="pane-header">
                            <span>main.js (Edit me!)</span>
                            <div class="status-indicator" id="editorStatus"></div>
                        </div>
                        <textarea id="userCode" spellcheck="false">// Fix these imports:
import { add } from './math';
import mult from './math';
import { subtract as sub } from './math';

// Test cases (don't edit):
console.log(add(2, 3));      // Should output: 5
console.log(mult(4, 5));     // Should output: 20
console.log(sub(10, 4));     // Should output: 6</textarea>
                    </div>

                    <div class="output-panel" id="outputPanel">
                        <div style="color: var(--text-secondary); margin-bottom: 0.5rem;">// Console Output:</div>
                        <div id="consoleOutput">Click "Run Code" to test...</div>
                    </div>
                </div>

                <div style="margin-top: 1rem; display: flex; gap: 1rem;">
                    <button class="load-btn" onclick="runCode()" style="padding: 0.75rem 1.5rem; font-size: 1rem;">
                        ‚ñ∂ Run Code
                    </button>
                    <button onclick="resetCode()" style="padding: 0.75rem 1.5rem; font-size: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); color: var(--text-primary); border-radius: 6px; cursor: pointer;">
                        Reset
                    </button>
                    <div id="testResults" style="flex: 1; display: flex; align-items: center; gap: 0.5rem; padding: 0 1rem;"></div>
                </div>
            </div>
        </section>

        <!-- Quiz Section -->
        <section class="section" id="quiz">
            <h2 class="section-title">üß† Knowledge Check</h2>
            
            <div class="quiz-container" id="quizContainer">
                <div class="question" id="questionText">
                    What is the correct syntax to import the default export from a module called "config.js"?
                </div>
                <div class="options" id="quizOptions">
                    <!-- Populated by JS -->
                </div>
                <div id="quizFeedback" style="margin-top: 1rem; font-weight: bold;"></div>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button class="load-btn" onclick="nextQuestion()" id="nextBtn" style="display: none;">
                    Next Question ‚Üí
                </button>
            </div>
        </section>

    </div>

    <!-- Completion Modal -->
    <div class="modal" id="completionModal">
        <div class="modal-content">
            <div class="trophy">üèÜ</div>
            <h2>Module Master Unlocked!</h2>
            <p style="margin: 1rem 0; color: var(--text-secondary);">
                You've mastered ES6 Modules! You now understand:
            </p>
            <ul style="text-align: left; margin: 1rem 0; color: var(--text-secondary);">
                <li>‚úÖ Named vs Default exports</li>
                <li>‚úÖ Import patterns and aliasing</li>
                <li>‚úÖ Barrel exports for clean architecture</li>
                <li>‚úÖ Dynamic imports for performance</li>
            </ul>
            <p style="font-size: 1.25rem; margin-top: 1rem;">
                Final Score: <span id="finalScore" style="color: var(--accent-success); font-weight: bold;"></span> XP
            </p>
            <button class="load-btn" onclick="location.reload()" style="margin-top: 1.5rem;">
                Start Over
            </button>
        </div>
    </div>

    <script>
        // Game State
        let xp = 0;
        let currentQuestion = 0;
        const solvedPitfalls = new Set();

        const questions = [
            {
                q: "Which import syntax is correct for a default export?",
                options: [
                    "import { myFunc } from './module.js'",
                    "import myFunc from './module.js'",
                    "import * as myFunc from './module.js'",
                    "require('myFunc')"
                ],
                correct: 1,
                explanation: "Default imports don't use curly braces. They import the 'default' binding directly."
            },
            {
                q: "How do you import multiple named exports from a module?",
                options: [
                    "import func1, func2 from './module.js'",
                    "import [func1, func2] from './module.js'",
                    "import { func1, func2 } from './module.js'",
                    "import './module.js' as { func1, func2 }"
                ],
                correct: 2,
                explanation: "Named exports use destructuring syntax with curly braces."
            },
            {
                q: "What does dynamic import return?",
                options: [
                    "The module object directly",
                    "A Promise that resolves to the module",
                    "undefined",
                    "A callback function"
                ],
                correct: 1,
                explanation: "import() returns a Promise, allowing you to use await or .then() to access the module."
            },
            {
                q: "In a barrel file (index.js), how do you re-export a default export with a new name?",
                options: [
                    "export { default } from './Component.js'",
                    "export { default as Component } from './Component.js'",
                    "export Component from './Component.js'",
                    "export * from './Component.js'"
                ],
                correct: 1,
                explanation: "Use 'export { default as NewName }' to re-export a default export with a specific name."
            }
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            drawConnections();
            loadQuestion();
            updateProgress();
        });

        // XP System
        function addXP(amount) {
            xp += amount;
            document.getElementById('xpCounter').textContent = `XP: ${xp}`;
            
            // Visual feedback
            const counter = document.getElementById('xpCounter');
            counter.style.transform = 'scale(1.3)';
            counter.style.color = '#10b981';
            setTimeout(() => {
                counter.style.transform = 'scale(1)';
                counter.style.color = 'var(--accent-default)';
            }, 300);
            
            checkCompletion();
        }

        function updateProgress() {
            const totalSections = 6;
            const pitfallBonus = solvedPitfalls.size;
            const quizBonus = currentQuestion;
            const progress = ((pitfallBonus + quizBonus) / (4 + 4 + questions.length)) * 100;
            document.getElementById('progressFill').style.width = `${Math.min(progress, 100)}%`;
        }

        // Visual Connections
        function drawConnections() {
            const svg = document.getElementById('connectionSvg');
            const math = document.getElementById('mathModule');
            const utils = document.getElementById('utilsModule');
            const main = document.getElementById('mainModule');
            
            // Simple SVG line drawing between elements
            function connect(el1, el2, type = 'named') {
                const rect1 = el1.getBoundingClientRect();
                const rect2 = el2.getBoundingClientRect();
                const container = svg.getBoundingClientRect();
                
                const x1 = rect1.left + rect1.width / 2 - container.left;
                const y1 = rect1.top + rect1.height / 2 - container.top;
                const x2 = rect2.left + rect2.width / 2 - container.left;
                const y2 = rect2.top + rect2.height / 2 - container.top;
                
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                const midX = (x1 + x2) / 2;
                const d = `M ${x1} ${y1} Q ${midX} ${y1} ${midX} ${(y1+y2)/2} T ${x2} ${y2}`;
                
                path.setAttribute('d', d);
                path.setAttribute('class', 'connection-line');
                path.setAttribute('id', `line-${el1.id}-${el2.id}`);
                path.setAttribute('stroke', type === 'default' ? '#f59e0b' : '#3b82f6');
                svg.appendChild(path);
            }
            
            // Clear existing
            svg.innerHTML = '';
            
            // Draw connections
            connect(math, main, 'default');
            connect(utils, main, 'named');
        }

        function highlightModule(name) {
            // Reset
            document.querySelectorAll('.module-box').forEach(box => box.classList.remove('active'));
            document.querySelectorAll('.connection-line').forEach(line => line.classList.remove('active'));
            
            // Highlight specific
            if (name === 'math') {
                document.getElementById('mathModule').classList.add('active');
                document.getElementById('mainModule').classList.add('active');
            } else if (name === 'utils') {
                document.getElementById('utilsModule').classList.add('active');
                document.getElementById('mainModule').classList.add('active');
            }
        }

        // Tab Switching
        function switchTab(btn, contentId) {
            const container = btn.closest('.code-container');
            container.querySelectorAll('.code-tab').forEach(t => t.classList.remove('active'));
            btn.classList.add('active');
            
            container.querySelectorAll('pre').forEach(pre => pre.style.display = 'none');
            document.getElementById(contentId).style.display = 'block';
        }

        // Pitfalls
        function solvePitfall(id) {
            if (solvedPitfalls.has(id)) return;
            
            solvedPitfalls.add(id);
            document.getElementById(id).classList.add('solved');
            addXP(50);
            updateProgress();
        }

        // Dynamic Import Demo
        async function loadChartModule() {
            const btn = document.getElementById('loadChartBtn');
            const cache = document.getElementById('moduleCache');
            
            btn.classList.add('loading');
            btn.disabled = true;
            
            // Simulate network delay
            await new Promise(r => setTimeout(r, 1500));
            
            btn.classList.remove('loading');
            btn.innerHTML = '‚úÖ Module Loaded!';
            btn.style.background = 'var(--accent-success)';
            
            const module = document.createElement('div');
            module.className = 'cached-module';
            module.innerHTML = `
                <div style="color: #8b5cf6; font-weight: bold;">chartLib.js</div>
                <div style="font-size: 0.8rem; color: var(--text-secondary);">
                    exports: createChart, destroyChart<br>
                    size: 245KB | cached: true
                </div>
            `;
            cache.innerHTML = '';
            cache.appendChild(module);
            
            addXP(30);
        }

        // Code Playground
        function runCode() {
            const code = document.getElementById('userCode').value;
            const output = document.getElementById('consoleOutput');
            const status = document.getElementById('editorStatus');
            const results = document.getElementById('testResults');
            
            let logs = [];
            let success = true;
            
            // Mock console
            const mockConsole = {
                log: (...args) => {
                    logs.push(args.join(' '));
                }
            };
            
            try {
                // Simulate the module system
                const math = {
                    add: (a, b) => a + b,
                    subtract: (a, b) => a - b,
                    default: function multiply(a, b) { return a * b; }
                };
                
                // Extract imports from user code (simplified parsing)
                let add, mult, sub;
                
                // Check for correct imports in code
                const hasAdd = code.includes("import { add }") || code.includes("import {add}");
                const hasMult = code.match(/import\s+(\w+)\s+from/) && code.includes("multiply") === false; // Should not reference multiply directly
                const hasSub = code.includes("subtract as sub") || code.includes("as sub");
                
                // Execute user code logic simulation
                if (code.includes("add(2, 3)")) {
                    if (hasAdd) mockConsole.log(math.add(2, 3));
                    else { success = false; mockConsole.log("Error: add is not defined"); }
                }
                
                if (code.includes("mult(4, 5)")) {
                    if (code.match(/import\s+(\w+)\s+from/)) {
                        const match = code.match(/import\s+(\w+)\s+from/);
                        if (match && match[1] === 'mult') {
                            mockConsole.log(math.default(4, 5));
                        } else {
                            success = false; mockConsole.log("Error: mult is not defined");
                        }
                    }
                }
                
                if (code.includes("sub(10, 4)")) {
                    if (hasSub) mockConsole.log(math.subtract(10, 4));
                    else { success = false; mockConsole.log("Error: sub is not defined"); }
                }
                
                output.innerHTML = logs.map(l => `<div>${l}</div>`).join('');
                
                // Check results
                const expected = ['5', '20', '6'];
                const actual = logs;
                const allPass = expected.every((exp, i) => actual[i] == exp);
                
                if (allPass && logs.length === 3) {
                    status.classList.add('success');
                    results.innerHTML = '<span style="color: var(--accent-success);">‚úÖ All tests passing! +100 XP</span>';
                    if (!window.playgroundSolved) {
                        addXP(100);
                        window.playgroundSolved = true;
                    }
                } else {
                    status.classList.remove('success');
                    results.innerHTML = '<span style="color: var(--accent-error);">‚ùå Some tests failed. Check your import syntax.</span>';
                }
                
            } catch (err) {
                output.innerHTML = `<span style="color: var(--accent-error)">Error: ${err.message}</span>`;
                status.classList.remove('success');
            }
        }

        function resetCode() {
            document.getElementById('userCode').value = `// Fix these imports:
import { add } from './math';
import mult from './math';
import { subtract as sub } from './math';

// Test cases (don't edit):
console.log(add(2, 3));      // Should output: 5
console.log(mult(4, 5));     // Should output: 20
console.log(sub(10, 4));     // Should output: 6`;
            document.getElementById('consoleOutput').innerHTML = 'Click "Run Code" to test...';
            document.getElementById('testResults').innerHTML = '';
            document.getElementById('editorStatus').classList.remove('success');
        }

        // Quiz System
        function loadQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('questionText').textContent = `${currentQuestion + 1}. ${q.q}`;
            
            const optionsDiv = document.getElementById('quizOptions');
            optionsDiv.innerHTML = '';
            
            q.options.forEach((opt, idx) => {
                const div = document.createElement('div');
                div.className = 'option';
                div.innerHTML = `
                    <div class="option-marker">${String.fromCharCode(65 + idx)}</div>
                    <code style="font-size: 0.95rem;">${opt}</code>
                `;
                div.onclick = () => selectOption(idx);
                optionsDiv.appendChild(div);
            });
            
            document.getElementById('quizFeedback').innerHTML = '';
            document.getElementById('nextBtn').style.display = 'none';
        }

        function selectOption(index) {
            const options = document.querySelectorAll('.option');
            const q = questions[currentQuestion];
            
            options.forEach(opt => opt.style.pointerEvents = 'none');
            
            if (index === q.correct) {
                options[index].classList.add('correct');
                document.getElementById('quizFeedback').innerHTML = 
                    `<span style="color: var(--accent-success)">Correct! ${q.explanation}</span>`;
                addXP(25);
                updateProgress();
            } else {
                options[index].classList.add('wrong');
                options[q.correct].classList.add('correct');
                document.getElementById('quizFeedback').innerHTML = 
                    `<span style="color: var(--accent-error)">Incorrect. ${q.explanation}</span>`;
            }
            
            if (currentQuestion < questions.length - 1) {
                document.getElementById('nextBtn').style.display = 'inline-block';
            } else {
                setTimeout(checkCompletion, 1000);
            }
        }

        function nextQuestion() {
            currentQuestion++;
            loadQuestion();
        }

        function checkCompletion() {
            const totalPossible = 200 + 100 + (questions.length * 25); // pitfalls + playground + quiz
            if (xp >= 300 || (solvedPitfalls.size >= 3 && currentQuestion >= questions.length - 1)) {
                document.getElementById('finalScore').textContent = xp;
                document.getElementById('completionModal').classList.add('active');
            }
        }

        // Handle resize for SVG lines
        window.addEventListener('resize', drawConnections);
    </script>
</body>
</html>