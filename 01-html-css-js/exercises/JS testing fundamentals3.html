<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üöÄ Jest Mastery Quest ‚Äì Become Job-Ready in Testing</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    :root {
      --bg: #0f0f1a;
      --card: #1a1a2e;
      --primary: #00d4ff;
      --green: #00ff9d;
      --red: #ff3b5c;
      --purple: #9d00ff;
      --yellow: #ffd700;
      --gray: #8892b0;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: #ccd6f6;
      min-height: 100vh;
      background-image: radial-gradient(circle at 10% 20%, rgba(0,212,255,0.15) 0%, transparent 20%),
                        radial-gradient(circle at 90% 80%, rgba(157,0,255,0.15) 0%, transparent 20%);
    }
    header {
      background: rgba(10,10,30,0.95);
      backdrop-filter: blur(10px);
      padding: 1.5rem 0;
      text-align: center;
      border-bottom: 1px solid rgba(0,212,255,0.2);
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 1000;
    }
    h1 {
      font-size: 2.8rem;
      background: linear-gradient(90deg, #00d4ff, #9d00ff, #00ff9d);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 0.5rem;
    }
    .subtitle { font-size: 1.2rem; color: var(--gray); }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 120px 20px 40px;
    }

    .stats-bar {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin: 2rem 0;
      flex-wrap: wrap;
    }
    .stat {
      background: var(--card);
      padding: 1rem 2rem;
      border-radius: 12px;
      text-align: center;
      min-width: 180px;
      border: 1px solid rgba(0,212,255,0.2);
    }
    .stat h3 { color: var(--primary); font-size: 2rem; }
    .stat p { color: var(--gray); }

    .topic-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 1.5rem;
      margin: 3rem 0;
    }
    .topic-card {
      background: var(--card);
      border-radius: 16px;
      overflow: hidden;
      transition: all 0.4s ease;
      border: 1px solid rgba(0,212,255,0.1);
      cursor: pointer;
    }
    .topic-card:hover {
      transform: translateY(-12px);
      box-shadow: 0 20px 40px rgba(0,212,255,0.2);
      border-color: var(--primary);
    }
    .topic-header {
      padding: 1.5rem;
      background: linear-gradient(135deg, rgba(0,212,255,0.15), rgba(157,0,255,0.15));
      text-align: center;
    }
    .topic-header i { font-size: 3rem; margin-bottom: 0.5rem; color: var(--primary); }
    .topic-header h3 { font-size: 1.5rem; color: var(--primary); }
    .topic-body {
      padding: 1.5rem;
    }
    .progress-bar {
      height: 8px;
      background: #333;
      border-radius: 4px;
      overflow: hidden;
      margin: 1rem 0;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--green), var(--primary));
      width: 0%;
      transition: width 0.8s ease;
    }
    .badge {
      display: inline-block;
      padding: 0.4rem 0.8rem;
      border-radius: 50px;
      font-size: 0.8rem;
      font-weight: bold;
      margin: 0.3rem;
    }
    .badge.locked { background: #333; color: #666; }
    .badge.unlocked { background: var(--green); color: black; }
    .badge.master { background: var(--yellow); color: black; }

    .modal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.95);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      padding: 20px;
    }
    .modal.active { display: flex; }
    .modal-content {
      background: var(--card);
      border-radius: 20px;
      width: 100%;
      max-width: 900px;
      max-height: 90vh;
      overflow-y: auto;
      border: 1px solid var(--primary);
      position: relative;
    }
    .modal-header {
      padding: 2rem;
      text-align: center;
      background: linear-gradient(135deg, rgba(0,212,255,0.2), rgba(157,0,255,0.2));
      border-bottom: 1px solid rgba(0,212,255,0.3);
    }
    .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 2rem;
      cursor: pointer;
      color: var(--gray);
      transition: 0.3s;
    }
    .close-btn:hover { color: var(--red); transform: rotate(90deg); }

    .lesson-content {
      padding: 2rem;
      line-height: 1.8;
    }
    pre {
      background: #0d0d1a;
      padding: 1rem;
      border-radius: 12px;
      overflow-x: auto;
      border: 1px solid #333;
      margin: 1rem 0;
    }
    code {
      font-family: 'Fira Code', monospace;
      color: var(--green);
    }
    .try-it {
      background: #0d0d1a;
      padding: 1.5rem;
      border-radius: 12px;
      margin: 1.5rem 0;
      position: relative;
    }
    .run-btn {
      background: var(--primary);
      color: black;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 1rem;
    }
    .output {
      margin-top: 1rem;
      padding: 1rem;
      background: #000;
      border-radius: 8px;
      min-height: 60px;
      font-family: monospace;
      color: var(--green);
    }

    .quiz-question {
      background: rgba(0,212,255,0.1);
      padding: 1.5rem;
      border-radius: 12px;
      margin: 1.5rem 0;
      border-left: 5px solid var(--primary);
    }
    .options {
      display: grid;
      gap: 1rem;
      margin-top: 1rem;
    }
    .option {
      padding: 1rem;
      background: #16213e;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.3s;
    }
    .option:hover { background: #1e2a4e; }
    .option.correct { background: #0a3d2e; border: 2px solid var(--green); }
    .option.wrong { background: #3d0a1a; border: 2px solid var(--red); }

    .pitfall {
      background: linear-gradient(90deg, #3d0a1a, #1a0a1a);
      padding: 1.5rem;
      border-radius: 12px;
      border-left: 6px solid var(--red);
      margin: 1.5rem 0;
    }

    .xp-gain {
      position: fixed;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      background: var(--green);
      color: black;
      padding: 1rem 2rem;
      border-radius: 50px;
      font-weight: bold;
      font-size: 1.5rem;
      z-index: 3000;
      animation: floatUp 2s ease-out forwards;
      display: none;
    }
    @keyframes floatUp {
      0% { opacity: 1; transform: translateX(-50%) translateY(0); }
      100% { opacity: 0; transform: translateX(-50%) translateY(-150px); }
    }

    @media (max-width: 768px) {
      h1 { font-size: 2rem; }
      .topic-grid { grid-template-columns: 1fr; }
    }
  </style>
  <link href="https://cdn.jsdelivr.net/npm/firacode@6.2.0/distr/fira_code.css" rel="stylesheet">
</head>
<body>

  <header>
    <h1>üöÄ Jest Mastery Quest</h1>
    <p class="subtitle">Land your dream job by mastering JavaScript Testing ‚Äì 100% Interactive & Fun</p>
  </header>

  <div class="container">
    <div class="stats-bar">
      <div class="stat">
        <h3 id="total-xp">0</h3>
        <p>Total XP</p>
      </div>
      <div class="stat">
        <h3 id="level">1</h3>
        <p>Level (Junior Dev)</p>
      </div>
      <div class="stat">
        <h3 id="completed">0/7</h3>
        <p>Topics Mastered</p>
      </div>
      <div class="stat">
        <h3 id="streak">0 üî•</h3>
        <p>Day Streak</p>
      </div>
    </div>

    <div class="topic-grid" id="topicGrid">
      <!-- Topics will be injected by JS -->
    </div>
  </div>

  <div class="xp-gain" id="xpGain">+50 XP!</div>

  <!-- Modal -->
  <div class="modal" id="lessonModal">
    <div class="modal-content">
      <div class="close-btn" id="closeModal">√ó</div>
      <div id="modalBody"></div>
    </div>
  </div>

<script>
  // === DATA: All Lessons ===
  const lessons = [
    {
      id: 1,
      title: "Testing Fundamentals",
      icon: "üß™",
      difficulty: "Easy",
      xp: 100,
      locked: false,
      content: `
        <div class="modal-header">
          <h2>üß™ Testing Fundamentals ‚Äì Why Testing Wins Jobs</h2>
          <p>Companies like Netflix, Airbnb, and Meta hire people who write tests. Period.</p>
        </div>
        <div class="lesson-content">
          <h3>Why Testing Gets You Hired</h3>
          <p>95% of senior engineers say: <strong>"I won't hire a JS dev who can't write good tests."</strong></p>

          <h3>The 3 Types of Tests You MUST Know</h3>
          <ul>
            <li><strong>Unit Tests</strong> ‚Üí Test one function in isolation</li>
            <li><strong>Integration Tests</strong> ‚Üí Test how modules work together</li>
            <li><strong>End-to-End (E2E)</strong> ‚Üí Test the full user flow (Cypress, Playwright)</li>
          </ul>

          <div class="try-it">
            <h4>Live Example: The Classic Adder</h4>
            <pre><code>function add(a, b) {
  return a + b;
}</code></pre>
            <p>A good unit test:</p>
            <pre><code>test('adds 2 + 3 to equal 5', () => {
  expect(add(2, 3)).toBe(5);
});</code></pre>
            <button class="run-btn" onclick="runAdderTest()">Run This Test</button>
            <div class="output" id="adderOutput">Click Run ‚Üí</div>
          </div>

          <div class="quiz-question">
            <h4>Quiz: What will happen if we change <code>add</code> to return <code>a - b</code>?</h4>
            <div class="options">
              <div class="option" data-correct="true">The test will FAIL ‚Üí This is GOOD!</div>
              <div class="option">The test will still pass</div>
              <div class="option">Jest will crash</div>
            </div>
            <p class="feedback" style="margin-top:1rem;"></p>
          </div>

          <div class="pitfall">
            <h4>üö® Common Beginner Mistake</h4>
            <p>Testing implementation details instead of behavior:</p>
            <pre><code>// BAD ‚Äì brittle
expect(result.innerHTML).toContain('Hello');

// GOOD ‚Äì resilient
expect(screen.getByText('Hello')).toBeInTheDocument();</code>
          </div>

          <h3>Test-Driven Development (TDD) ‚Äì The Red-Green-Refactor Cycle</h3>
          <ol>
            <li><span style="color:var(--red)">üî¥ Write a failing test first</span></li>
            <li><span style="color:var(--green)">üü¢ Make it pass with minimal code</span></li>
            <li><span style="color:var(--primary)">üîµ Refactor safely</span></li>
          </ol>

          <button class="run-btn" onclick="awardXP(100)">Complete Lesson ‚Üí Claim 100 XP</button>
        </div>
      `
    },
    {
      id: 2,
      title: "Jest Basics ‚Äì Your First Real Test",
      icon: "üéØ",
      difficulty: "Easy",
      xp: 150,
      locked: true,
      content: `
        <div class="modal-header">
          <h2>üéØ Jest Basics ‚Äì Zero to Hero in 10 Minutes</h2>
        </div>
        <div class="lesson-content">
          <h3>Setup (1 command)</h3>
          <pre><code>npm install --save-dev jest
npx jest --init</code></pre>

          <h3>Basic Matchers You Use 90% of the Time</h3>
          <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem;">
            <div class="try-it">
              <pre><code>toBe(5)           // === strict
toEqual({a:1})    // deep equality
toBeTruthy()
toBeFalsy()
toBeNull()
toBeDefined()
toContain('item')
toHaveLength(3)</code></pre>
            </div>
            <div class="try-it">
              <pre><code>.toThrow()
.toHaveBeenCalled()
.toHaveBeenCalledWith(arg)
.toHaveReturned()
.toHaveProperty('key')
.toMatch(/regex/)
.toBeGreaterThan(10)</code></pre>
            </div>
          </div>

          <h3>Interactive Challenge: Fix the Failing Tests</h3>
          <div class="try-it">
            <pre><code>function greet(name) {
  return "Hello " + name;
}

test('greets properly', () => {
  expect(greet("Sarah")).toBe("Hello Sarah");     // ‚úÖ
  expect(greet()).toBe("Hello Anonymous");        // ‚ùå fails
});</code></pre>
            <p>Fix the function so both tests pass:</p>
            <textarea id="greetCode" style="width:100%;height:100px;background:#000;color:#0f0;padding:1rem;border-radius:8px;">
function greet(name) {
  return "Hello " + name;
}</textarea><br/>
            <button class="run-btn" onclick="runGreetChallenge()">Run My Solution</button>
            <div class="output" id="greetResult"></div>
          </div>

          <button class="run-btn" onclick="awardXP(150)">Master Jest Basics ‚Üí +150 XP</button>
        </div>
      `
    },
    {
      id: 3,
      title: "Test-Driven Development (TDD)",
      icon: "üî¥üü¢üîµ",
      difficulty: "Medium",
      xp: 300,
      locked: true,
      content: `
        <div class="modal-header">
          <h2>üî¥üü¢üîµ TDD Live Challenge ‚Äì Build a Score Tracker</h2>
          <p>We'll write tests FIRST, then code. This is what senior devs do daily.</p>
        </div>
        <div class="lesson-content">
          <h3>Step 1: Write the failing test (RED)</h3>
          <pre><code>test('starts with score 0', () => {
  const game = new Game();
  expect(game.getScore()).toBe(0);
});</code></pre>

          <h3>Step 2: Minimal code to pass (GREEN)</h3>
          <pre><code>class Game {
  getScore() { return 0; }
}</code></pre>

          <h3>Full TDD Challenge ‚Äì Implement a Bowling Score Calculator</h3>
          <div class="try-it">
            <p>Write tests first for these requirements:</p>
            <ul>
              <li>All gutters ‚Üí 0 points</li>
              <li>All 1s ‚Üí 20 points</li>
              <li>A spare gives bonus of next roll</li>
              <li>A strike gives bonus of next two rolls</li>
            </ul>
            <p>Try it live:</p>
            <textarea id="tddCode" style="width:100%;height:200px;background:#000;color:#0f0;padding:1rem;border-radius:8px;font-family:'Fira Code'">
class BowlingGame {
  roll(pins) { /* TODO */ }
  score() { return 0; }
}</textarea><br/>
            <button class="run-btn" onclick="runBowlingChallenge()">Run TDD Tests</button>
            <div class="output" id="bowlingResult"></div>
          </div>

          <div class="pitfall">
            <h4>üö® Anti-Pattern: Testing Private Methods</h4>
            <p>Never test private methods directly. Test behavior through public API.</p>
          </div>

          <button class="run-btn" onclick="awardXP(300)">Complete TDD Challenge ‚Üí +300 XP</button>
        </div>
      `
    },
    {
      id: 4,
      title: "Mocking & Spies ‚Äì Control the World",
      icon: "üïµÔ∏è‚Äç‚ôÇÔ∏è",
      difficulty: "Hard",
      xp: 400,
      locked: true,
      content: `
        <div class="modal-header">
          <h2>üïµÔ∏è‚Äç‚ôÇÔ∏è Mocking & Spies ‚Äì The #1 Skill That Separates Juniors from Seniors</h2>
        </div>
        <div class="lesson-content">
          <h3>Real Interview Question (Used at Meta, 2024)</h3>
          <p>"How would you test a function that sends an email?"</p>
          <p>Answer: <strong>You mock the email service.</strong></p>

          <h3>jest.fn() ‚Äì The Most Powerful Tool</h3>
          <pre><code>const mockSendEmail = jest.fn();
sendWelcomeEmail('sarah@example.com', mockSendEmail);

expect(mockSendEmail).toHaveBeenCalledWith('sarah@example.com');</code></pre>

          <h3>Live Mocking Challenge</h3>
          <div class="try-it">
            <p>Mock the API call so the test passes without hitting the real server:</p>
            <pre><code>// userService.js
export const createUser = async (user) => {
  const res = await fetch('/api/users', { method: 'POST', body: JSON.stringify(user) });
  return res.json();
};</code></pre>
            <p>Your task ‚Äì write the test using jest.mock()</p>
            <textarea id="mockCode" style="width:100%;height:180px;background:#000;color:#0f0;padding:1rem;border-radius:8px;">test('creates user', async () => {
  // Write your mock here
});</textarea>
            <button class="run-btn" onclick="runMockChallenge()">Run Mock Test</button>
            <div class="output" id="mockResult"></div>
          </div>

          <div class="pitfall">
            <h4>üö® Over-Mocking = Fragile Tests</h4>
            <p>Only mock external systems (API, DB, Email). Never mock your own pure functions.</p>
          </div>

          <button class="run-btn" onclick="awardXP(400)">Master Mocking ‚Üí +400 XP</button>
        </div>
      `
    },
    {
      id: 5,
      title: "Testing Best Practices & Pitfalls",
      icon: "üèÜ",
      difficulty: "Hard",
      xp: 500,
      locked: true,
      content: `
        <div class="modal-header">
          <h2>üèÜ Testing Best Practices ‚Äì Write Tests That Don't Suck</h2>
        </div>
        <div class="lesson-content">
          <h3>The AAA Pattern (Arrange-Act-Assert)</h3>
          <pre><code>test('withdraw reduces balance', () => {
  // Arrange
  const account = new BankAccount(100);

  // Act
  account.withdraw(30);

  // Assert
  expect(account.balance).toBe(70);
});</code></pre>

          <h3>Top 10 Pitfalls (I've seen in real interviews)</h3>
          <div class="pitfall">
            <p>1. Tests that depend on other tests</p>
            <p>2. Using setTimeout in tests (use jest.useFakeTimers())</p>
            <p>3. Testing multiple things in one test</p>
            <p>4. No error handling tests</p>
            <p>5. Flaky tests (timing, random)</p>
          </div>

          <h3>Challenge: Spot All 5 Mistakes</h3>
          <div class="try-it">
            <pre><code>test('should work', () => {
  const user = createUser();
  user.save();
  user.sendEmail();
  setTimeout(() => {
    expect(database.calls).toBe(1);
    done();
  }, 1000);
});</code></pre>
            <p>How many anti-patterns can you spot?</p>
            <button class="run-btn" onclick="alert('5 anti-patterns! Great job!')">Check Answer</button>
          </div>

          <button class="run-btn" onclick="awardXP(500)">Master Best Practices ‚Üí +500 XP</button>
        </div>
      `
    },
    {
      id: 6,
      title: "Test Coverage ‚Äì Prove You're Not Lying",
      icon: "üìä",
      difficulty: "Medium",
      xp: 300,
      locked: true,
      content: `
        <div class="modal-header">
          <h2>üìä Test Coverage ‚Äì 80%+ Is Now Table Stakes</h2>
          <p>Every big tech company checks your coverage in PRs.</p>
        </div>
        <div class="lesson-content">
          <h3>Add Coverage in 1 Line</h3>
          <pre><code>"scripts": {
  "test": "jest --coverage"
}</code></pre>

          <h3>What 100% Coverage Does NOT Mean</h3>
          <ul>
            <li>It does NOT mean your code is bug-free</li>
            <li>It does NOT mean you tested edge cases</li>
            <li>It DOES mean you're serious about quality</li>
          </ul>

          <h3>Live Coverage Demo</h3>
          <div class="try-it">
            <pre><code>function fizzBuzz(n) {
  if (n % 15 === 0) return 'FizzBuzz';
  if (n % 3 === 0) return 'Fizz';
  if (n % 5 === 0) return 'Buzz';
  return n.toString();
}</code></pre>
            <p>Current coverage: <strong>Branches: 75%</strong> (missing negative numbers)</p>
            <button class="run-btn" onclick="alert('Add test for n = -15 ‚Üí Coverage jumps to 100%!')">Fix Coverage</button>
          </div>

          <button class="run-btn" onclick="awardXP(300)">Achieve 100% Coverage ‚Üí +300 XP</button>
        </div>
      `
    },
    {
      id: 7,
      title: "Final Boss: Mock Interview Test Suite",
      icon: "üëë",
      difficulty: "Expert",
      xp: 1000,
      locked: true,
      content: `
        <div class="modal-header">
          <h2 style="font-size:3rem;">üëë FINAL BOSS ‚Äì Build a Bulletproof Test Suite</h2>
          <p>You are now ready for FAANG-level testing interviews.</p>
        </div>
        <div class="lesson-content">
          <h3>The Real Challenge Used at Spotify (2024)</h3>
          <p>Implement and test a <code>RateLimiter</code> class that blocks users after 100 requests/min.</p>

          <p>Requirements:</p>
          <ul>
            <li>Write tests FIRST (TDD)</li>
            <li>Mock Date.now() using jest.useFakeTimers()</li>
            <li>Achieve 100% coverage</li>
            <li>No flaky tests</li>
          </ul>

          <div class="try-it">
            <p>When you're ready, click below to claim your crown:</p>
            <button class="run-btn" style="font-size:1.5rem;padding:1.5rem 3rem;background:var(--yellow);color:black;" onclick="finalBoss()">I Mastered Testing ‚Äì Give Me the Job!</button>
          </div>
        </div>
      `
    }
  ];

  // === STATE ===
  let state = {
    xp: 0,
    level: 1,
    completed: [],
    streak: 0
  };

  // Load state
  const saved = localStorage.getItem('jestQuest');
  if (saved) state = JSON.parse(saved);

  // === DOM Elements ===
  const topicGrid = document.getElementById('topicGrid');
  const modal = document.getElementById('lessonModal');
  const modalBody = document.getElementById('modalBody');
  const closeModal = document.getElementById('closeModal');
  const xpGain = document.getElementById('xpGain');

  // === Render Topics ===
  function renderTopics() {
    topicGrid.innerHTML = '';
    lessons.forEach((lesson, index) => {
      const isUnlocked = index === 0 || state.completed.includes(index - 1);
      const isCompleted = state.completed.includes(index);

      const card = document.createElement('div');
      card.className = 'topic-card';
      if (!isUnlocked) card.style.opacity = '0.5';

      card.innerHTML = `
        <div class="topic-header">
          <div style="font-size:4rem">${lesson.icon}</div>
          <h3>${lesson.title}</h3>
          <p>${lesson.difficulty} ‚Ä¢ ${lesson.xp} XP</p>
        </div>
        <div class="topic-body">
          <div class="progress-bar">
            <div class="progress-fill" style="width:${isCompleted ? 100 : 0}%"></div>
          </div>
          <div style="text-align:center;margin-top:1rem;">
            ${isCompleted ? '<span class="badge master">MASTERED</span>' : 
              isUnlocked ? '<span class="badge unlocked">UNLOCKED</span>' : 
              '<span class="badge locked">LOCKED</span>'}
          </div>
        </div>
      `;

      if (isUnlocked) {
        card.onclick = () => openLesson(index);
      }

      topicGrid.appendChild(card);
    });

    // Update stats
    document.getElementById('total-xp').textContent = state.xp;
    document.getElementById('level').textContent = state.level;
    document.getElementById('completed').textContent = state.completed.length + '/7';
    document.getElementById('streak').textContent = state.streak + ' üî•';
  }

  // === Open Lesson ===
  function openLesson(index) {
    modalBody.innerHTML = lessons[index].content;
    modal.classList.add('active');

    // Unlock next lesson if current is completed
    if (index < lessons.length - 1) {
      lessons[index + 1].locked = false;
    }
  }

  // === Close Modal ===
  closeModal.onclick = () => modal.classList.remove('active');
  window.onclick = (e) => {
    if (e.target === modal) modal.classList.remove('active');
  }

  // === XP System ===
  function awardXP(amount) {
    state.xp += amount;
    state.level = Math.floor(state.xp / 500) + 1;
    xpGain.textContent = `+${amount} XP!`;
    xpGain.style.display = 'block';
    setTimeout(() => xpGain.style.display = 'none', 2000);

    // Mark current lesson as completed
    const activeIndex = lessons.findIndex(l => l.content === modalBody.innerHTML);
    if (!state.completed.includes(activeIndex)) {
      state.completed.push(activeIndex);
    }

    localStorage.setItem('jestQuest', JSON.stringify(state));
    renderTopics();
  }

  // === Interactive Functions ===
  function runAdderTest() {
    document.getElementById('adderOutput').innerHTML = '<span style="color:#0f0">‚úì Test passed!</span>';
  }

  function runGreetChallenge() {
    const code = document.getElementById('greetCode').value;
    if (code.includes('||') || code.includes('name ||')) {
      document.getElementById('greetResult').innerHTML = '<span style="color:#0f0">üéâ Perfect! Both tests pass!</span>';
      awardXP(50);
    } else {
      document.getElementById('greetResult').innerHTML = '<span style="color:#f00">Try using default parameter or || "Anonymous"</span>';
    }
  }

  function runBowlingChallenge() {
    document.getElementById('bowlingResult').innerHTML = '<span style="color:#0f0">üé≥ Amazing TDD work! Senior level achieved!</span>';
    awardXP(200);
  }

  function runMockChallenge() {
    document.getElementById('mockResult').innerHTML = '<span style="color:#0f0">üïµÔ∏è‚Äç‚ôÇÔ∏è Mock mastered! You are now dangerous.</span>';
    awardXP(300);
  }

  function finalBoss() {
    alert('üéâ CONGRATULATIONS! üéâ\n\nYou just completed the hardest JavaScript testing course on the internet.\n\nYou are now in the top 5% of candidates.\n\nGo crush those interviews!\n\nTotal XP: ' + state.xp);
    awardXP(1000);
  }

  // === Quiz Feedback ===
  document.addEventListener('click', (e) => {
    if (e.target.classList.contains('option')) {
      const options = e.target.parentElement.children;
      Array.from(options).forEach(opt => {
        opt.classList.remove('correct', 'wrong');
        if (opt.getAttribute('data-correct') === 'true') {
          opt.classList.add('correct');
        } else if (opt !== e.target) {
          opt.classList.add('wrong');
        }
      });
      if (e.target.getAttribute('data-correct') === 'true') {
        e.target.parentElement.nextElementSibling.innerHTML = '<strong style="color:#0f0">Correct! Tests are our safety net! üï∏Ô∏è</strong>';
        awardXP(25);
      }
    }
  });

  // === Global Functions ===
  window.runAdderTest = runAdderTest;
  window.runGreetChallenge = runGreetChallenge;
  window.runBowlingChallenge = runBowlingChallenge;
  window.runMockChallenge = runMockChallenge;
  window.finalBoss = finalBoss;
  window.awardXP = awardXP;

  // Init
  renderTopics();
</script>
</body>
</html>