<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ JS Fundamentals - Interactive Learning</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Inter:wght@400;500;600;700;800;900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a1a;
            --bg-secondary: #12122a;
            --bg-card: #1a1a3e;
            --bg-code: #0d0d25;
            --accent-blue: #4f8fff;
            --accent-purple: #a855f7;
            --accent-green: #22c55e;
            --accent-orange: #f97316;
            --accent-red: #ef4444;
            --accent-yellow: #eab308;
            --accent-cyan: #06b6d4;
            --accent-pink: #ec4899;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border: #2a2a5a;
            --glow-blue: rgba(79, 143, 255, 0.3);
            --glow-purple: rgba(168, 85, 247, 0.3);
            --glow-green: rgba(34, 197, 94, 0.3);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(ellipse at 20% 50%, rgba(79, 143, 255, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(168, 85, 247, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 80%, rgba(34, 197, 94, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        /* Floating particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            animation: float-up linear infinite;
            opacity: 0.3;
        }

        @keyframes float-up {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.3; }
            90% { opacity: 0.3; }
            100% { transform: translateY(-10vh) rotate(720deg); opacity: 0; }
        }

        /* Navigation */
        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 64px;
            background: rgba(10, 10, 26, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            z-index: 1000;
        }

        .nav-logo {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-logo span {
            font-size: 1.5rem;
        }

        .nav-progress-container {
            flex: 1;
            max-width: 300px;
            margin: 0 30px;
        }

        .nav-progress-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-progress-bar {
            height: 6px;
            background: var(--bg-card);
            border-radius: 3px;
            overflow: hidden;
        }

        .nav-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple), var(--accent-green));
            border-radius: 3px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .nav-xp {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            color: var(--accent-yellow);
            font-size: 0.95rem;
        }

        .nav-xp .xp-icon {
            font-size: 1.2rem;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 64px;
            bottom: 0;
            width: 280px;
            background: rgba(18, 18, 42, 0.95);
            backdrop-filter: blur(10px);
            border-right: 1px solid var(--border);
            overflow-y: auto;
            z-index: 999;
            padding: 20px 0;
            transition: transform 0.3s ease;
        }

        .sidebar::-webkit-scrollbar {
            width: 4px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: transparent;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 2px;
        }

        .sidebar-section {
            padding: 0 16px;
            margin-bottom: 24px;
        }

        .sidebar-section-title {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--text-muted);
            padding: 0 12px;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-weight: 500;
            position: relative;
        }

        .sidebar-item:hover {
            background: rgba(79, 143, 255, 0.1);
            color: var(--text-primary);
        }

        .sidebar-item.active {
            background: linear-gradient(135deg, rgba(79, 143, 255, 0.2), rgba(168, 85, 247, 0.2));
            color: var(--accent-blue);
            font-weight: 600;
            box-shadow: inset 0 0 0 1px rgba(79, 143, 255, 0.3);
        }

        .sidebar-item.completed {
            color: var(--accent-green);
        }

        .sidebar-item .item-icon {
            font-size: 1.1rem;
            width: 28px;
            text-align: center;
        }

        .sidebar-item .check-mark {
            position: absolute;
            right: 12px;
            font-size: 0.85rem;
            color: var(--accent-green);
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            margin-top: 64px;
            padding: 40px 50px;
            max-width: 1100px;
            position: relative;
            z-index: 1;
        }

        /* Section styles */
        .section {
            display: none;
            animation: fadeInUp 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Hero section */
        .hero {
            text-align: center;
            padding: 60px 0 40px;
        }

        .hero-emoji {
            font-size: 4rem;
            margin-bottom: 20px;
            animation: bounce-slow 3s ease-in-out infinite;
        }

        @keyframes bounce-slow {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .hero h1 {
            font-size: 2.8rem;
            font-weight: 900;
            line-height: 1.2;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #fff, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 1.15rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 30px;
            line-height: 1.7;
        }

        .hero-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 36px;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            border: none;
            border-radius: 14px;
            color: white;
            font-size: 1.05rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            box-shadow: 0 4px 20px rgba(79, 143, 255, 0.4);
        }

        .hero-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 30px rgba(79, 143, 255, 0.5);
        }

        /* Section headers */
        .section-header {
            margin-bottom: 35px;
        }

        .section-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 14px;
            background: rgba(79, 143, 255, 0.15);
            border: 1px solid rgba(79, 143, 255, 0.3);
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--accent-blue);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        .section-header h2 {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 10px;
            line-height: 1.3;
        }

        .section-header p {
            font-size: 1.05rem;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 24px;
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: rgba(79, 143, 255, 0.3);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .card-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
        }

        .card-icon.blue { background: rgba(79, 143, 255, 0.2); }
        .card-icon.purple { background: rgba(168, 85, 247, 0.2); }
        .card-icon.green { background: rgba(34, 197, 94, 0.2); }
        .card-icon.orange { background: rgba(249, 115, 22, 0.2); }
        .card-icon.red { background: rgba(239, 68, 68, 0.2); }
        .card-icon.cyan { background: rgba(6, 182, 212, 0.2); }

        .card-title {
            font-size: 1.15rem;
            font-weight: 700;
        }

        .card-subtitle {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .card-body {
            color: var(--text-secondary);
            line-height: 1.7;
            font-size: 0.95rem;
        }

        .card-body p {
            margin-bottom: 12px;
        }

        /* Code blocks */
        .code-block {
            background: var(--bg-code);
            border: 1px solid var(--border);
            border-radius: 12px;
            margin: 16px 0;
            overflow: hidden;
            position: relative;
        }

        .code-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 16px;
            background: rgba(255, 255, 255, 0.03);
            border-bottom: 1px solid var(--border);
        }

        .code-dots {
            display: flex;
            gap: 6px;
        }

        .code-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .code-dot.red { background: #ff5f57; }
        .code-dot.yellow { background: #febc2e; }
        .code-dot.green { background: #28c840; }

        .code-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: 'JetBrains Mono', monospace;
        }

        .code-copy-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-muted);
            padding: 4px 10px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.7rem;
            font-family: inherit;
            transition: all 0.2s;
        }

        .code-copy-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
        }

        .code-content {
            padding: 16px 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.8;
            overflow-x: auto;
            white-space: pre;
        }

        .code-content::-webkit-scrollbar {
            height: 4px;
        }

        .code-content::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 2px;
        }

        /* Syntax highlighting */
        .kw { color: #c678dd; } /* keyword */
        .fn { color: #61afef; } /* function */
        .str { color: #98c379; } /* string */
        .num { color: #d19a66; } /* number */
        .cm { color: #5c6370; font-style: italic; } /* comment */
        .op { color: #56b6c2; } /* operator */
        .br { color: #e5c07b; } /* bracket */
        .prop { color: #e06c75; } /* property */
        .log { color: #61afef; } /* console.log */
        .bool { color: #d19a66; } /* boolean */
        .undef { color: #e06c75; } /* undefined */
        .param { color: #e5c07b; } /* parameter */

        /* Visual diagrams */
        .visual-box {
            background: linear-gradient(135deg, rgba(79, 143, 255, 0.1), rgba(168, 85, 247, 0.1));
            border: 1px solid rgba(79, 143, 255, 0.2);
            border-radius: 14px;
            padding: 24px;
            margin: 20px 0;
        }

        .visual-title {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--accent-blue);
            font-weight: 700;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .visual-title::before {
            content: 'üëÅ';
            font-size: 1rem;
        }

        /* Array visualization */
        .array-visual {
            display: flex;
            align-items: center;
            gap: 4px;
            flex-wrap: wrap;
            margin: 12px 0;
            padding: 12px;
        }

        .array-bracket {
            font-size: 2rem;
            color: var(--accent-yellow);
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
        }

        .array-element {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            color: white;
            padding: 10px 18px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            font-size: 0.9rem;
            position: relative;
            transition: all 0.3s ease;
            cursor: default;
        }

        .array-element:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 15px rgba(79, 143, 255, 0.4);
        }

        .array-element .index-label {
            position: absolute;
            top: -22px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.6rem;
            color: var(--text-muted);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .array-element.green {
            background: linear-gradient(135deg, var(--accent-green), #16a34a);
        }

        .array-element.orange {
            background: linear-gradient(135deg, var(--accent-orange), #ea580c);
        }

        .array-element.red {
            background: linear-gradient(135deg, var(--accent-red), #dc2626);
        }

        .array-element.cyan {
            background: linear-gradient(135deg, var(--accent-cyan), #0891b2);
        }

        .array-element.pink {
            background: linear-gradient(135deg, var(--accent-pink), #db2777);
        }

        .array-comma {
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
        }

        /* Function visualization */
        .function-visual {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
            justify-content: center;
            padding: 16px;
        }

        .func-box {
            background: var(--bg-code);
            border: 2px solid var(--accent-purple);
            border-radius: 14px;
            padding: 20px 24px;
            text-align: center;
            min-width: 140px;
            position: relative;
        }

        .func-box-label {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--accent-purple);
            font-weight: 700;
            margin-bottom: 8px;
        }

        .func-box-content {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--text-primary);
            font-weight: 600;
        }

        .func-arrow {
            font-size: 1.5rem;
            color: var(--accent-green);
            animation: pulse-arrow 1.5s ease-in-out infinite;
        }

        @keyframes pulse-arrow {
            0%, 100% { opacity: 1; transform: translateX(0); }
            50% { opacity: 0.5; transform: translateX(5px); }
        }

        .input-box {
            border-color: var(--accent-blue);
        }

        .input-box .func-box-label {
            color: var(--accent-blue);
        }

        .output-box {
            border-color: var(--accent-green);
        }

        .output-box .func-box-label {
            color: var(--accent-green);
        }

        /* Pitfall / Warning boxes */
        .pitfall-box {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-left: 4px solid var(--accent-red);
            border-radius: 12px;
            padding: 20px 24px;
            margin: 20px 0;
        }

        .pitfall-header {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            color: var(--accent-red);
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .pitfall-body {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.7;
        }

        /* Tip boxes */
        .tip-box {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-left: 4px solid var(--accent-green);
            border-radius: 12px;
            padding: 20px 24px;
            margin: 20px 0;
        }

        .tip-header {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            color: var(--accent-green);
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .tip-body {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.7;
        }

        /* Info box */
        .info-box {
            background: rgba(79, 143, 255, 0.1);
            border: 1px solid rgba(79, 143, 255, 0.3);
            border-left: 4px solid var(--accent-blue);
            border-radius: 12px;
            padding: 20px 24px;
            margin: 20px 0;
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            color: var(--accent-blue);
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .info-body {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.7;
        }

        /* Interactive playground */
        .playground {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
            margin: 24px 0;
        }

        .playground-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 20px;
            background: rgba(255, 255, 255, 0.03);
            border-bottom: 1px solid var(--border);
        }

        .playground-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            font-size: 0.9rem;
            color: var(--accent-green);
        }

        .playground-run-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 18px;
            background: var(--accent-green);
            border: none;
            border-radius: 8px;
            color: #000;
            font-weight: 700;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .playground-run-btn:hover {
            background: #16a34a;
            transform: translateY(-1px);
        }

        .playground-editor {
            width: 100%;
            min-height: 120px;
            padding: 16px 20px;
            background: var(--bg-code);
            border: none;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            resize: vertical;
            outline: none;
        }

        .playground-output {
            padding: 14px 20px;
            background: rgba(0, 0, 0, 0.3);
            border-top: 1px solid var(--border);
            min-height: 50px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.83rem;
            line-height: 1.7;
        }

        .playground-output .output-label {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--text-muted);
            margin-bottom: 6px;
        }

        .output-line {
            color: var(--accent-green);
            padding: 2px 0;
        }

        .output-error {
            color: var(--accent-red);
        }

        /* Quiz Section */
        .quiz-container {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 28px;
            margin: 24px 0;
        }

        .quiz-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .quiz-icon {
            width: 40px;
            height: 40px;
            background: rgba(234, 179, 8, 0.2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .quiz-title {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .quiz-question {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 16px;
            line-height: 1.6;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 16px;
        }

        .quiz-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 18px;
            background: var(--bg-code);
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
            font-family: 'JetBrains Mono', monospace;
        }

        .quiz-option:hover {
            border-color: var(--accent-blue);
            background: rgba(79, 143, 255, 0.1);
        }

        .quiz-option.selected {
            border-color: var(--accent-blue);
            background: rgba(79, 143, 255, 0.15);
        }

        .quiz-option.correct {
            border-color: var(--accent-green) !important;
            background: rgba(34, 197, 94, 0.15) !important;
        }

        .quiz-option.incorrect {
            border-color: var(--accent-red) !important;
            background: rgba(239, 68, 68, 0.15) !important;
        }

        .quiz-option .option-letter {
            width: 28px;
            height: 28px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.8rem;
            font-family: 'Inter', sans-serif;
        }

        .quiz-check-btn {
            padding: 10px 24px;
            background: var(--accent-blue);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 700;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .quiz-check-btn:hover {
            background: #3b7fef;
        }

        .quiz-check-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .quiz-feedback {
            margin-top: 16px;
            padding: 14px 18px;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
            animation: fadeInUp 0.3s ease;
        }

        .quiz-feedback.correct {
            background: rgba(34, 197, 94, 0.15);
            border: 1px solid rgba(34, 197, 94, 0.3);
            color: var(--accent-green);
        }

        .quiz-feedback.incorrect {
            background: rgba(239, 68, 68, 0.15);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: var(--accent-red);
        }

        .quiz-explanation {
            margin-top: 10px;
            font-weight: 400;
            color: var(--text-secondary);
            font-size: 0.85rem;
            line-height: 1.6;
        }

        /* Method grid */
        .method-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 14px;
            margin: 16px 0;
        }

        .method-card {
            background: var(--bg-code);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 18px;
            transition: all 0.3s;
            cursor: default;
        }

        .method-card:hover {
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .method-name {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            color: var(--accent-purple);
            margin-bottom: 6px;
            font-size: 0.9rem;
        }

        .method-desc {
            font-size: 0.8rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .method-tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 8px;
        }

        .method-tag.mutates {
            background: rgba(239, 68, 68, 0.2);
            color: var(--accent-red);
        }

        .method-tag.returns {
            background: rgba(34, 197, 94, 0.2);
            color: var(--accent-green);
        }

        /* Interactive animation area */
        .animation-area {
            background: var(--bg-code);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 24px;
            margin: 16px 0;
            text-align: center;
        }

        .animation-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        .anim-btn {
            padding: 8px 18px;
            border: 2px solid var(--border);
            background: var(--bg-card);
            color: var(--text-primary);
            border-radius: 10px;
            cursor: pointer;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.2s;
        }

        .anim-btn:hover {
            border-color: var(--accent-blue);
            background: rgba(79, 143, 255, 0.1);
        }

        .anim-btn.push { border-color: var(--accent-green); color: var(--accent-green); }
        .anim-btn.pop { border-color: var(--accent-red); color: var(--accent-red); }
        .anim-btn.shift { border-color: var(--accent-orange); color: var(--accent-orange); }
        .anim-btn.unshift { border-color: var(--accent-cyan); color: var(--accent-cyan); }
        .anim-btn.reset { border-color: var(--text-muted); color: var(--text-muted); }

        /* Comparison table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
            font-size: 0.85rem;
        }

        .comparison-table th {
            background: rgba(79, 143, 255, 0.15);
            padding: 12px 16px;
            text-align: left;
            font-weight: 700;
            color: var(--accent-blue);
            border-bottom: 2px solid var(--border);
        }

        .comparison-table td {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border);
            color: var(--text-secondary);
        }

        .comparison-table tr:hover td {
            background: rgba(255, 255, 255, 0.02);
        }

        .comparison-table code {
            font-family: 'JetBrains Mono', monospace;
            background: var(--bg-code);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            color: var(--accent-purple);
        }

        /* Navigation buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
        }

        .nav-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .nav-btn:hover {
            border-color: var(--accent-blue);
            background: rgba(79, 143, 255, 0.1);
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        /* XP toast notification */
        .xp-toast {
            position: fixed;
            top: 80px;
            right: 30px;
            background: linear-gradient(135deg, rgba(234, 179, 8, 0.2), rgba(249, 115, 22, 0.2));
            border: 1px solid rgba(234, 179, 8, 0.3);
            border-radius: 12px;
            padding: 14px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            color: var(--accent-yellow);
            z-index: 10000;
            transform: translateX(120%);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        .xp-toast.show {
            transform: translateX(0);
        }

        .xp-toast .xp-amount {
            font-size: 1.2rem;
        }

        /* Achievement badges */
        .achievements {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin: 16px 0;
        }

        .achievement {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            background: var(--bg-code);
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-muted);
            transition: all 0.3s;
        }

        .achievement.earned {
            border-color: var(--accent-yellow);
            color: var(--accent-yellow);
            background: rgba(234, 179, 8, 0.1);
        }

        .achievement .badge-icon {
            font-size: 1.2rem;
        }

        /* Inline code */
        .inline-code {
            font-family: 'JetBrains Mono', monospace;
            background: var(--bg-code);
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 0.85em;
            color: var(--accent-purple);
            border: 1px solid var(--border);
        }

        /* Accordion */
        .accordion {
            margin: 12px 0;
        }

        .accordion-item {
            background: var(--bg-code);
            border: 1px solid var(--border);
            border-radius: 12px;
            margin-bottom: 8px;
            overflow: hidden;
        }

        .accordion-header {
            padding: 14px 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: 600;
            font-size: 0.9rem;
            transition: background 0.2s;
        }

        .accordion-header:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .accordion-arrow {
            transition: transform 0.3s;
            font-size: 0.8rem;
        }

        .accordion-item.open .accordion-arrow {
            transform: rotate(180deg);
        }

        .accordion-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
        }

        .accordion-item.open .accordion-body {
            max-height: 1000px;
        }

        .accordion-content {
            padding: 0 18px 18px;
        }

        /* Step counter */
        .step-list {
            counter-reset: step;
            list-style: none;
            padding: 0;
        }

        .step-list li {
            counter-increment: step;
            display: flex;
            gap: 14px;
            margin-bottom: 16px;
            align-items: flex-start;
        }

        .step-list li::before {
            content: counter(step);
            min-width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
        }

        .step-content {
            flex: 1;
            padding-top: 4px;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        /* Highlight text */
        .highlight {
            background: linear-gradient(135deg, rgba(79, 143, 255, 0.2), rgba(168, 85, 247, 0.2));
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Live array display */
        .live-array-display {
            margin: 16px 0;
            text-align: center;
        }

        .live-array-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .live-array-items {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            min-height: 60px;
            flex-wrap: wrap;
            transition: all 0.3s;
        }

        .live-element {
            padding: 10px 16px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            font-size: 0.9rem;
            color: white;
            animation: pop-in 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            position: relative;
        }

        @keyframes pop-in {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes pop-out {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0); opacity: 0; }
        }

        .live-element .idx {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.55rem;
            color: var(--text-muted);
        }

        .live-result {
            margin-top: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--accent-green);
            min-height: 20px;
        }

        /* Destructure animation */
        .destructure-visual {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            padding: 20px;
        }

        .destruct-row {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .destruct-arrow {
            font-size: 1.5rem;
            color: var(--accent-green);
        }

        .var-box {
            background: rgba(168, 85, 247, 0.2);
            border: 2px solid var(--accent-purple);
            border-radius: 10px;
            padding: 10px 18px;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            font-size: 0.85rem;
            text-align: center;
        }

        .var-label {
            font-size: 0.6rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 4px;
        }

        /* Mobile toggle */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.3rem;
            cursor: pointer;
            padding: 5px;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 30px 20px;
            }

            .mobile-menu-btn {
                display: block;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .function-visual {
                flex-direction: column;
            }

            .nav-progress-container {
                display: none;
            }
        }

        /* Smooth scroll */
        html {
            scroll-behavior: smooth;
        }

        /* Summary cards row */
        .summary-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }

        .summary-card {
            background: var(--bg-code);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 20px;
            text-align: center;
        }

        .summary-card .big-num {
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 6px;
        }

        .summary-card .label {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 600;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 16px;
            background: var(--bg-code);
            padding: 4px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .tab-btn {
            flex: 1;
            padding: 10px 16px;
            background: transparent;
            border: none;
            border-radius: 10px;
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .tab-btn.active {
            background: var(--accent-blue);
            color: white;
        }

        .tab-btn:hover:not(.active) {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.05);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeInUp 0.3s ease;
        }
    </style>
</head>
<body>

<!-- Floating particles -->
<div class="particles" id="particles"></div>

<!-- XP Toast -->
<div class="xp-toast" id="xpToast">
    <span>‚≠ê</span>
    <span>+<span class="xp-amount" id="xpAmount">10</span> XP</span>
</div>

<!-- Top Navigation -->
<nav class="top-nav">
    <button class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</button>
    <div class="nav-logo">
        <span>‚ö°</span> JS Fundamentals
    </div>
    <div class="nav-progress-container">
        <div class="nav-progress-label">Course Progress</div>
        <div class="nav-progress-bar">
            <div class="nav-progress-fill" id="progressFill"></div>
        </div>
    </div>
    <div class="nav-xp">
        <span class="xp-icon">‚≠ê</span>
        <span id="totalXP">0</span> XP
    </div>
</nav>

<!-- Sidebar -->
<aside class="sidebar" id="sidebar">
    <div class="sidebar-section">
        <div class="sidebar-section-title">Getting Started</div>
        <div class="sidebar-item active" data-section="welcome" onclick="navigateTo('welcome')">
            <span class="item-icon">üè†</span> Welcome
        </div>
    </div>
    <div class="sidebar-section">
        <div class="sidebar-section-title">Functions</div>
        <div class="sidebar-item" data-section="func-basics" onclick="navigateTo('func-basics')">
            <span class="item-icon">üì¶</span> What is a Function?
        </div>
        <div class="sidebar-item" data-section="func-types" onclick="navigateTo('func-types')">
            <span class="item-icon">üîß</span> Function Types
        </div>
        <div class="sidebar-item" data-section="func-params" onclick="navigateTo('func-params')">
            <span class="item-icon">üì•</span> Parameters & Returns
        </div>
        <div class="sidebar-item" data-section="func-scope" onclick="navigateTo('func-scope')">
            <span class="item-icon">üî≠</span> Scope & Closures
        </div>
        <div class="sidebar-item" data-section="func-pitfalls" onclick="navigateTo('func-pitfalls')">
            <span class="item-icon">‚ö†Ô∏è</span> Pitfalls & Quiz
        </div>
    </div>
    <div class="sidebar-section">
        <div class="sidebar-section-title">Arrays</div>
        <div class="sidebar-item" data-section="arr-basics" onclick="navigateTo('arr-basics')">
            <span class="item-icon">üìã</span> Array Basics
        </div>
        <div class="sidebar-item" data-section="arr-crud" onclick="navigateTo('arr-crud')">
            <span class="item-icon">üîÑ</span> Add & Remove (CRUD)
        </div>
        <div class="sidebar-item" data-section="arr-iterate" onclick="navigateTo('arr-iterate')">
            <span class="item-icon">üîÅ</span> Iteration Methods
        </div>
        <div class="sidebar-item" data-section="arr-transform" onclick="navigateTo('arr-transform')">
            <span class="item-icon">‚ú®</span> map, filter, reduce
        </div>
        <div class="sidebar-item" data-section="arr-destruct" onclick="navigateTo('arr-destruct')">
            <span class="item-icon">üì§</span> Destructuring
        </div>
        <div class="sidebar-item" data-section="arr-pitfalls" onclick="navigateTo('arr-pitfalls')">
            <span class="item-icon">‚ö†Ô∏è</span> Pitfalls & Quiz
        </div>
    </div>
    <div class="sidebar-section">
        <div class="sidebar-section-title">Practice</div>
        <div class="sidebar-item" data-section="final-challenge" onclick="navigateTo('final-challenge')">
            <span class="item-icon">üèÜ</span> Final Challenge
        </div>
    </div>
</aside>

<!-- Main Content -->
<main class="main-content" id="mainContent">

    <!-- ==================== WELCOME ==================== -->
    <div class="section active" id="section-welcome">
        <div class="hero">
            <div class="hero-emoji">üöÄ</div>
            <h1>Master JavaScript<br>Functions & Arrays</h1>
            <p>An interactive, visual guide to the two most important building blocks in JavaScript. Learn by doing, not just reading!</p>
            <button class="hero-btn" onclick="navigateTo('func-basics')">
                Start Learning <span>‚Üí</span>
            </button>
        </div>

        <div class="summary-row">
            <div class="summary-card">
                <div class="big-num">12</div>
                <div class="label">Interactive Lessons</div>
            </div>
            <div class="summary-card">
                <div class="big-num">20+</div>
                <div class="label">Code Examples</div>
            </div>
            <div class="summary-card">
                <div class="big-num">6</div>
                <div class="label">Quizzes</div>
            </div>
            <div class="summary-card">
                <div class="big-num">‚àû</div>
                <div class="label">Playgrounds</div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon blue">üó∫Ô∏è</div>
                <div>
                    <div class="card-title">What You'll Learn</div>
                    <div class="card-subtitle">A roadmap of your journey</div>
                </div>
            </div>
            <div class="card-body">
                <ol class="step-list">
                    <li><div class="step-content"><strong>Functions:</strong> How to create reusable blocks of code ‚Äì declarations, expressions, arrow functions, parameters, return values, and scope.</div></li>
                    <li><div class="step-content"><strong>Arrays:</strong> How to store and manage lists of data ‚Äì creation, access, and all the essential methods.</div></li>
                    <li><div class="step-content"><strong>Array Methods:</strong> Master push, pop, shift, unshift, map, filter, reduce, forEach, and more.</div></li>
                    <li><div class="step-content"><strong>Destructuring:</strong> The modern way to pull values out of arrays cleanly.</div></li>
                    <li><div class="step-content"><strong>Pitfalls:</strong> Common mistakes every beginner makes (and how to avoid them!).</div></li>
                </ol>
            </div>
        </div>
    </div>

    <!-- ==================== FUNCTION BASICS ==================== -->
    <div class="section" id="section-func-basics">
        <div class="section-header">
            <div class="section-badge">üì¶ Chapter 1</div>
            <h2>What is a Function?</h2>
            <p>A function is a <span class="highlight">reusable block of code</span> that performs a specific task. Think of it like a recipe ‚Äî you define the steps once, then use it whenever you need.</p>
        </div>

        <div class="visual-box">
            <div class="visual-title">How a Function Works</div>
            <div class="function-visual">
                <div class="func-box input-box">
                    <div class="func-box-label">Input</div>
                    <div class="func-box-content">5, 3</div>
                </div>
                <div class="func-arrow">‚Üí</div>
                <div class="func-box">
                    <div class="func-box-label">Function</div>
                    <div class="func-box-content">add(a, b)</div>
                </div>
                <div class="func-arrow">‚Üí</div>
                <div class="func-box output-box">
                    <div class="func-box-label">Output</div>
                    <div class="func-box-content">8</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon purple">üéØ</div>
                <div>
                    <div class="card-title">Real-World Analogy</div>
                </div>
            </div>
            <div class="card-body">
                <p>Imagine a <strong>coffee machine</strong>: ‚òï</p>
                <ul class="step-list">
                    <li><div class="step-content"><strong>Input (Parameters):</strong> You put in water and coffee beans</div></li>
                    <li><div class="step-content"><strong>Process (Function Body):</strong> The machine heats water, grinds beans, brews</div></li>
                    <li><div class="step-content"><strong>Output (Return Value):</strong> You get a cup of coffee!</div></li>
                </ul>
                <p>You don't need to know exactly how the machine works internally ‚Äî you just use it. That's <strong>abstraction</strong>, and functions work the same way!</p>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon blue">üìù</div>
                <div>
                    <div class="card-title">Your First Function</div>
                    <div class="card-subtitle">Function Declaration</div>
                </div>
            </div>
            <div class="card-body">
                <p>Here's the simplest way to create a function:</p>
                <div class="code-block">
                    <div class="code-header">
                        <div class="code-dots">
                            <div class="code-dot red"></div>
                            <div class="code-dot yellow"></div>
                            <div class="code-dot green"></div>
                        </div>
                        <div class="code-label">JavaScript</div>
                    </div>
                    <div class="code-content"><span class="cm">// 1. DEFINE the function</span>
<span class="kw">function</span> <span class="fn">greet</span>(<span class="param">name</span>) {
    <span class="kw">return</span> <span class="str">"Hello, "</span> + <span class="param">name</span> + <span class="str">"!"</span>;
}

<span class="cm">// 2. CALL (use) the function</span>
<span class="kw">let</span> message = <span class="fn">greet</span>(<span class="str">"Alex"</span>);
<span class="log">console</span>.<span class="fn">log</span>(message); <span class="cm">// "Hello, Alex!"</span>

<span class="cm">// You can call it as many times as you want!</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">greet</span>(<span class="str">"Sam"</span>));   <span class="cm">// "Hello, Sam!"</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">greet</span>(<span class="str">"Jordan"</span>)); <span class="cm">// "Hello, Jordan!"</span></div>
                </div>
            </div>
        </div>

        <div class="info-box">
            <div class="info-header">üí° Key Insight</div>
            <div class="info-body">
                The word <span class="inline-code">function</span> is a <strong>keyword</strong> ‚Äî it tells JavaScript "hey, I'm creating a function here." The name after it (<span class="inline-code">greet</span>) is what you'll use to call it later. The parentheses <span class="inline-code">(name)</span> hold the parameters (inputs).
            </div>
        </div>

        <div class="playground">
            <div class="playground-header">
                <div class="playground-title">üéÆ Try It Yourself!</div>
                <button class="playground-run-btn" onclick="runPlayground('pg-func-1')">‚ñ∂ Run</button>
            </div>
            <textarea class="playground-editor" id="pg-func-1">// Create a function that adds two numbers
function add(a, b) {
    return a + b;
}

// Try calling it with different numbers!
console.log(add(5, 3));
console.log(add(10, 20));
console.log(add(100, -50));</textarea>
            <div class="playground-output" id="output-pg-func-1">
                <div class="output-label">Output</div>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" onclick="navigateTo('welcome')">‚Üê Welcome</button>
            <button class="nav-btn" onclick="navigateTo('func-types')">Function Types ‚Üí</button>
        </div>
    </div>

    <!-- ==================== FUNCTION TYPES ==================== -->
    <div class="section" id="section-func-types">
        <div class="section-header">
            <div class="section-badge">üîß Chapter 2</div>
            <h2>3 Ways to Create Functions</h2>
            <p>JavaScript gives you three different syntaxes for creating functions. Each has its own personality!</p>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon blue">1Ô∏è‚É£</div>
                <div>
                    <div class="card-title">Function Declaration</div>
                    <div class="card-subtitle">The classic way ‚Äî hoisted to the top</div>
                </div>
            </div>
            <div class="card-body">
                <div class="code-block">
                    <div class="code-header">
                        <div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div>
                        <div class="code-label">Declaration</div>
                    </div>
                    <div class="code-content"><span class="kw">function</span> <span class="fn">multiply</span>(<span class="param">a</span>, <span class="param">b</span>) {
    <span class="kw">return</span> <span class="param">a</span> * <span class="param">b</span>;
}

<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">multiply</span>(<span class="num">4</span>, <span class="num">5</span>)); <span class="cm">// 20</span></div>
                </div>
                <div class="tip-box">
                    <div class="tip-header">‚úÖ Superpower: Hoisting</div>
                    <div class="tip-body">You can call a function declaration <strong>before</strong> it appears in your code! JavaScript "hoists" it to the top during compilation.</div>
                </div>
                <div class="code-block">
                    <div class="code-header">
                        <div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div>
                        <div class="code-label">Hoisting Example</div>
                    </div>
                    <div class="code-content"><span class="cm">// This works! Even though sayHi is defined below ü§Ø</span>
<span class="fn">sayHi</span>(); <span class="cm">// "Hi there!"</span>

<span class="kw">function</span> <span class="fn">sayHi</span>() {
    <span class="log">console</span>.<span class="fn">log</span>(<span class="str">"Hi there!"</span>);
}</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon purple">2Ô∏è‚É£</div>
                <div>
                    <div class="card-title">Function Expression</div>
                    <div class="card-subtitle">Stored in a variable ‚Äî NOT hoisted</div>
                </div>
            </div>
            <div class="card-body">
                <div class="code-block">
                    <div class="code-header">
                        <div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div>
                        <div class="code-label">Expression</div>
                    </div>
                    <div class="code-content"><span class="kw">const</span> <span class="fn">divide</span> = <span class="kw">function</span>(<span class="param">a</span>, <span class="param">b</span>) {
    <span class="kw">return</span> <span class="param">a</span> / <span class="param">b</span>;
};

<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">divide</span>(<span class="num">20</span>, <span class="num">4</span>)); <span class="cm">// 5</span></div>
                </div>
                <div class="pitfall-box">
                    <div class="pitfall-header">‚ö†Ô∏è Not Hoisted!</div>
                    <div class="pitfall-body">
                        <div class="code-block">
                            <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Error!</div></div>
                            <div class="code-content"><span class="fn">divide</span>(<span class="num">10</span>, <span class="num">2</span>); <span class="cm">// ‚ùå ReferenceError!</span>

<span class="kw">const</span> <span class="fn">divide</span> = <span class="kw">function</span>(<span class="param">a</span>, <span class="param">b</span>) {
    <span class="kw">return</span> <span class="param">a</span> / <span class="param">b</span>;
};</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon green">3Ô∏è‚É£</div>
                <div>
                    <div class="card-title">Arrow Function (ES6+)</div>
                    <div class="card-subtitle">Modern, concise syntax ‚Äî the cool kid üòé</div>
                </div>
            </div>
            <div class="card-body">
                <div class="code-block">
                    <div class="code-header">
                        <div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div>
                        <div class="code-label">Arrow Functions</div>
                    </div>
                    <div class="code-content"><span class="cm">// Full syntax</span>
<span class="kw">const</span> <span class="fn">add</span> = (<span class="param">a</span>, <span class="param">b</span>) <span class="op">=></span> {
    <span class="kw">return</span> <span class="param">a</span> + <span class="param">b</span>;
};

<span class="cm">// Short syntax (one-liner = implicit return!)</span>
<span class="kw">const</span> <span class="fn">addShort</span> = (<span class="param">a</span>, <span class="param">b</span>) <span class="op">=></span> <span class="param">a</span> + <span class="param">b</span>;

<span class="cm">// Single parameter? No parentheses needed!</span>
<span class="kw">const</span> <span class="fn">double</span> = <span class="param">x</span> <span class="op">=></span> <span class="param">x</span> * <span class="num">2</span>;

<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">addShort</span>(<span class="num">3</span>, <span class="num">7</span>));  <span class="cm">// 10</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">double</span>(<span class="num">5</span>));       <span class="cm">// 10</span></div>
                </div>

                <div class="tip-box">
                    <div class="tip-header">üí° When to use arrow functions</div>
                    <div class="tip-body">Arrow functions are <strong>perfect</strong> for short callbacks (like with <span class="inline-code">map</span>, <span class="inline-code">filter</span>, <span class="inline-code">forEach</span>). You'll see them a LOT with arrays!</div>
                </div>
            </div>
        </div>

        <div class="visual-box">
            <div class="visual-title">Comparison Cheat Sheet</div>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>Declaration</th>
                        <th>Expression</th>
                        <th>Arrow</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Syntax</td>
                        <td><code>function name() {}</code></td>
                        <td><code>const name = function() {}</code></td>
                        <td><code>const name = () => {}</code></td>
                    </tr>
                    <tr>
                        <td>Hoisted?</td>
                        <td>‚úÖ Yes</td>
                        <td>‚ùå No</td>
                        <td>‚ùå No</td>
                    </tr>
                    <tr>
                        <td>Has <code>this</code>?</td>
                        <td>‚úÖ Own <code>this</code></td>
                        <td>‚úÖ Own <code>this</code></td>
                        <td>‚ùå Inherits <code>this</code></td>
                    </tr>
                    <tr>
                        <td>Best for</td>
                        <td>Main functions</td>
                        <td>Callbacks, flexibility</td>
                        <td>Short callbacks</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="playground">
            <div class="playground-header">
                <div class="playground-title">üéÆ Practice All Three</div>
                <button class="playground-run-btn" onclick="runPlayground('pg-func-types')">‚ñ∂ Run</button>
            </div>
            <textarea class="playground-editor" id="pg-func-types">// Try all 3 types!
// 1. Declaration
function square(n) {
    return n * n;
}

// 2. Expression
const cube = function(n) {
    return n * n * n;
};

// 3. Arrow
const half = n => n / 2;

console.log("square(4):", square(4));
console.log("cube(3):", cube(3));
console.log("half(10):", half(10));</textarea>
            <div class="playground-output" id="output-pg-func-types">
                <div class="output-label">Output</div>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" onclick="navigateTo('func-basics')">‚Üê What is a Function?</button>
            <button class="nav-btn" onclick="navigateTo('func-params')">Parameters & Returns ‚Üí</button>
        </div>
    </div>

    <!-- ==================== PARAMETERS & RETURNS ==================== -->
    <div class="section" id="section-func-params">
        <div class="section-header">
            <div class="section-badge">üì• Chapter 3</div>
            <h2>Parameters & Return Values</h2>
            <p>Parameters are the inputs your function receives. Return values are what it sends back. Let's master both!</p>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon blue">üì•</div>
                <div><div class="card-title">Parameters vs Arguments</div></div>
            </div>
            <div class="card-body">
                <p>People mix these up all the time. Here's the difference:</p>
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Parameters vs Arguments</div></div>
                    <div class="code-content"><span class="cm">//              ‚Üì parameters (placeholders in definition)</span>
<span class="kw">function</span> <span class="fn">greet</span>(<span class="param">name</span>, <span class="param">age</span>) {
    <span class="kw">return</span> <span class="str">`Hi </span><span class="op">${</span><span class="param">name</span><span class="op">}</span><span class="str">, you are </span><span class="op">${</span><span class="param">age</span><span class="op">}</span><span class="str">!`</span>;
}

<span class="cm">//          ‚Üì arguments (actual values when calling)</span>
<span class="fn">greet</span>(<span class="str">"Alex"</span>, <span class="num">25</span>);</div>
                </div>
                <div class="info-box">
                    <div class="info-header">üìå Remember</div>
                    <div class="info-body"><strong>Parameters</strong> = variables in the function definition (like labels on boxes)<br><strong>Arguments</strong> = actual values you pass in when calling (the stuff you put in the boxes)</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon green">üéÅ</div>
                <div><div class="card-title">Default Parameters</div></div>
            </div>
            <div class="card-body">
                <p>What if someone forgets to pass an argument? You can set <strong>default values</strong>:</p>
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Default Parameters</div></div>
                    <div class="code-content"><span class="kw">function</span> <span class="fn">greet</span>(<span class="param">name</span> = <span class="str">"stranger"</span>, <span class="param">greeting</span> = <span class="str">"Hello"</span>) {
    <span class="kw">return</span> <span class="str">`</span><span class="op">${</span><span class="param">greeting</span><span class="op">}</span><span class="str">, </span><span class="op">${</span><span class="param">name</span><span class="op">}</span><span class="str">!`</span>;
}

<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">greet</span>());                <span class="cm">// "Hello, stranger!"</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">greet</span>(<span class="str">"Alex"</span>));          <span class="cm">// "Hello, Alex!"</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">greet</span>(<span class="str">"Alex"</span>, <span class="str">"Hey"</span>)); <span class="cm">// "Hey, Alex!"</span></div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon orange">üì§</div>
                <div><div class="card-title">Return Values</div></div>
            </div>
            <div class="card-body">
                <p><span class="inline-code">return</span> sends a value back to whoever called the function. Without it, the function returns <span class="inline-code">undefined</span>.</p>
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Return</div></div>
                    <div class="code-content"><span class="cm">// ‚úÖ WITH return - value comes back</span>
<span class="kw">function</span> <span class="fn">add</span>(<span class="param">a</span>, <span class="param">b</span>) {
    <span class="kw">return</span> <span class="param">a</span> + <span class="param">b</span>;  <span class="cm">// sends value back</span>
}
<span class="kw">let</span> result = <span class="fn">add</span>(<span class="num">3</span>, <span class="num">4</span>); <span class="cm">// result = 7</span>

<span class="cm">// ‚ùå WITHOUT return - you get undefined</span>
<span class="kw">function</span> <span class="fn">addBroken</span>(<span class="param">a</span>, <span class="param">b</span>) {
    <span class="param">a</span> + <span class="param">b</span>;  <span class="cm">// calculated but never returned!</span>
}
<span class="kw">let</span> oops = <span class="fn">addBroken</span>(<span class="num">3</span>, <span class="num">4</span>); <span class="cm">// oops = undefined üò±</span></div>
                </div>

                <div class="pitfall-box">
                    <div class="pitfall-header">‚ö†Ô∏è Common Mistake #1</div>
                    <div class="pitfall-body">Forgetting <span class="inline-code">return</span>! Without it, your function does the work but throws away the result. Always ask yourself: "Does this function need to give something back?"</div>
                </div>

                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Return Stops Execution</div></div>
                    <div class="code-content"><span class="kw">function</span> <span class="fn">checkAge</span>(<span class="param">age</span>) {
    <span class="kw">if</span> (<span class="param">age</span> < <span class="num">0</span>) {
        <span class="kw">return</span> <span class="str">"Invalid age!"</span>;  <span class="cm">// exits here if true</span>
    }
    <span class="kw">if</span> (<span class="param">age</span> >= <span class="num">18</span>) {
        <span class="kw">return</span> <span class="str">"Adult"</span>;    <span class="cm">// nothing below runs</span>
    }
    <span class="kw">return</span> <span class="str">"Minor"</span>;        <span class="cm">// only reaches here if age is 0-17</span>
}

<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">checkAge</span>(<span class="num">25</span>));  <span class="cm">// "Adult"</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">checkAge</span>(<span class="num">10</span>));  <span class="cm">// "Minor"</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">checkAge</span>(-<span class="num">5</span>)); <span class="cm">// "Invalid age!"</span></div>
                </div>
            </div>
        </div>

        <div class="playground">
            <div class="playground-header">
                <div class="playground-title">üéÆ Build a Calculator Function</div>
                <button class="playground-run-btn" onclick="runPlayground('pg-params')">‚ñ∂ Run</button>
            </div>
            <textarea class="playground-editor" id="pg-params">// Build a calculator function!
function calculate(a, b, operation = "add") {
    if (operation === "add") return a + b;
    if (operation === "subtract") return a - b;
    if (operation === "multiply") return a * b;
    if (operation === "divide") return a / b;
    return "Unknown operation!";
}

console.log(calculate(10, 5));             // default: add
console.log(calculate(10, 5, "subtract")); 
console.log(calculate(10, 5, "multiply")); 
console.log(calculate(10, 5, "divide"));</textarea>
            <div class="playground-output" id="output-pg-params">
                <div class="output-label">Output</div>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" onclick="navigateTo('func-types')">‚Üê Function Types</button>
            <button class="nav-btn" onclick="navigateTo('func-scope')">Scope & Closures ‚Üí</button>
        </div>
    </div>

    <!-- ==================== SCOPE & CLOSURES ==================== -->
    <div class="section" id="section-func-scope">
        <div class="section-header">
            <div class="section-badge">üî≠ Chapter 4</div>
            <h2>Scope & Closures</h2>
            <p>Scope determines <strong>where</strong> variables are accessible. It's like rooms in a house ‚Äî each room has its own stuff, and some stuff is shared.</p>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon blue">üåç</div>
                <div><div class="card-title">Global vs Local Scope</div></div>
            </div>
            <div class="card-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Scope</div></div>
                    <div class="code-content"><span class="kw">let</span> globalVar = <span class="str">"I'm global! üåç"</span>;  <span class="cm">// accessible everywhere</span>

<span class="kw">function</span> <span class="fn">myFunction</span>() {
    <span class="kw">let</span> localVar = <span class="str">"I'm local! üè†"</span>;  <span class="cm">// only inside this function</span>
    
    <span class="log">console</span>.<span class="fn">log</span>(globalVar);  <span class="cm">// ‚úÖ Works! Can see global</span>
    <span class="log">console</span>.<span class="fn">log</span>(localVar);   <span class="cm">// ‚úÖ Works! Inside own scope</span>
}

<span class="fn">myFunction</span>();

<span class="log">console</span>.<span class="fn">log</span>(globalVar);  <span class="cm">// ‚úÖ Works!</span>
<span class="log">console</span>.<span class="fn">log</span>(localVar);   <span class="cm">// ‚ùå ReferenceError! Can't see inside</span></div>
                </div>

                <div class="visual-box">
                    <div class="visual-title">Scope Visualized</div>
                    <div style="text-align: center; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;">
                        <div style="border: 2px solid var(--accent-blue); border-radius: 14px; padding: 20px; margin: 10px auto; max-width: 400px;">
                            <div style="color: var(--accent-blue); font-weight: 700; margin-bottom: 10px;">üåç Global Scope</div>
                            <div style="color: var(--text-secondary); margin-bottom: 10px;">globalVar = "I'm global!"</div>
                            <div style="border: 2px solid var(--accent-purple); border-radius: 12px; padding: 16px;">
                                <div style="color: var(--accent-purple); font-weight: 700; margin-bottom: 8px;">üè† myFunction Scope</div>
                                <div style="color: var(--text-secondary);">localVar = "I'm local!"</div>
                                <div style="color: var(--accent-green); margin-top: 8px; font-size: 0.75rem;">‚úÖ Can see globalVar</div>
                            </div>
                            <div style="color: var(--accent-red); margin-top: 10px; font-size: 0.75rem;">‚ùå Cannot see localVar</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon purple">üîí</div>
                <div><div class="card-title">Closures (Simplified)</div></div>
            </div>
            <div class="card-body">
                <p>A <strong>closure</strong> is when a function "remembers" variables from its parent scope even after the parent has finished running. Think of it as a backpack ‚Äî the inner function carries the variables with it!</p>
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Closure = Function with Memory</div></div>
                    <div class="code-content"><span class="kw">function</span> <span class="fn">createCounter</span>() {
    <span class="kw">let</span> count = <span class="num">0</span>;  <span class="cm">// this variable is "enclosed"</span>
    
    <span class="kw">return</span> <span class="kw">function</span>() {
        count++;          <span class="cm">// inner function remembers count!</span>
        <span class="kw">return</span> count;
    };
}

<span class="kw">const</span> counter = <span class="fn">createCounter</span>();
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">counter</span>()); <span class="cm">// 1</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">counter</span>()); <span class="cm">// 2</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">counter</span>()); <span class="cm">// 3 ‚Äî it remembers! üß†</span></div>
                </div>
            </div>
        </div>

        <div class="playground">
            <div class="playground-header">
                <div class="playground-title">üéÆ Experiment with Scope</div>
                <button class="playground-run-btn" onclick="runPlayground('pg-scope')">‚ñ∂ Run</button>
            </div>
            <textarea class="playground-editor" id="pg-scope">// Closure example: a greeting factory
function makeGreeter(greeting) {
    return function(name) {
        return greeting + ", " + name + "!";
    };
}

const sayHello = makeGreeter("Hello");
const sayHowdy = makeGreeter("Howdy");

console.log(sayHello("Alex"));   // Uses "Hello"
console.log(sayHowdy("Alex"));   // Uses "Howdy"
console.log(sayHello("Sam"));    // Still uses "Hello"</textarea>
            <div class="playground-output" id="output-pg-scope">
                <div class="output-label">Output</div>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" onclick="navigateTo('func-params')">‚Üê Parameters & Returns</button>
            <button class="nav-btn" onclick="navigateTo('func-pitfalls')">Pitfalls & Quiz ‚Üí</button>
        </div>
    </div>

    <!-- ==================== FUNCTION PITFALLS & QUIZ ==================== -->
    <div class="section" id="section-func-pitfalls">
        <div class="section-header">
            <div class="section-badge">‚ö†Ô∏è Chapter 5</div>
            <h2>Function Pitfalls & Quiz</h2>
            <p>Let's review common mistakes beginners make with functions, then test your knowledge!</p>
        </div>

        <div class="pitfall-box">
            <div class="pitfall-header">‚ùå Pitfall #1: Calling vs Referencing</div>
            <div class="pitfall-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Common Mistake</div></div>
                    <div class="code-content"><span class="kw">function</span> <span class="fn">sayHi</span>() { <span class="kw">return</span> <span class="str">"Hi!"</span>; }

<span class="cm">// ‚úÖ Calling the function (with parentheses)</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">sayHi</span>());   <span class="cm">// "Hi!"</span>

<span class="cm">// ‚ùå Referencing the function (without parentheses)</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">sayHi</span>);    <span class="cm">// [Function: sayHi] ‚Äî the function itself!</span></div>
                </div>
                <strong>Fix:</strong> Always use <span class="inline-code">()</span> to call a function. Without them, you're just pointing to the function object.
            </div>
        </div>

        <div class="pitfall-box">
            <div class="pitfall-header">‚ùå Pitfall #2: Forgetting Return</div>
            <div class="pitfall-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Missing Return</div></div>
                    <div class="code-content"><span class="cm">// ‚ùå No return = undefined</span>
<span class="kw">const</span> <span class="fn">double</span> = (<span class="param">x</span>) <span class="op">=></span> { <span class="param">x</span> * <span class="num">2</span>; };     <span class="cm">// undefined!</span>

<span class="cm">// ‚úÖ With curly braces, you NEED return</span>
<span class="kw">const</span> <span class="fn">double</span> = (<span class="param">x</span>) <span class="op">=></span> { <span class="kw">return</span> <span class="param">x</span> * <span class="num">2</span>; }; <span class="cm">// üëç</span>

<span class="cm">// ‚úÖ Without curly braces = implicit return</span>
<span class="kw">const</span> <span class="fn">double</span> = (<span class="param">x</span>) <span class="op">=></span> <span class="param">x</span> * <span class="num">2</span>;         <span class="cm">// üëç</span></div>
                </div>
            </div>
        </div>

        <div class="pitfall-box">
            <div class="pitfall-header">‚ùå Pitfall #3: Modifying Parameters</div>
            <div class="pitfall-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Primitive vs Reference</div></div>
                    <div class="code-content"><span class="cm">// Primitives are COPIED</span>
<span class="kw">function</span> <span class="fn">tryChange</span>(<span class="param">x</span>) { <span class="param">x</span> = <span class="num">100</span>; }
<span class="kw">let</span> num = <span class="num">5</span>;
<span class="fn">tryChange</span>(num);
<span class="log">console</span>.<span class="fn">log</span>(num); <span class="cm">// Still 5! (primitives are copied)</span>

<span class="cm">// Objects/Arrays are SHARED by reference!</span>
<span class="kw">function</span> <span class="fn">addItem</span>(<span class="param">arr</span>) { <span class="param">arr</span>.<span class="fn">push</span>(<span class="str">"new!"</span>); }
<span class="kw">let</span> myArr = [<span class="num">1</span>, <span class="num">2</span>];
<span class="fn">addItem</span>(myArr);
<span class="log">console</span>.<span class="fn">log</span>(myArr); <span class="cm">// [1, 2, "new!"] ‚Äî changed! üò±</span></div>
                </div>
            </div>
        </div>

        <!-- QUIZ -->
        <div class="quiz-container" id="quiz-func-1">
            <div class="quiz-header">
                <div class="quiz-icon">üß†</div>
                <div class="quiz-title">Quiz: Functions</div>
            </div>
            <div class="quiz-question">What does this code output?<br><br><span class="inline-code">const greet = (name) => { `Hello, ${name}!` }; console.log(greet("Alex"));</span></div>
            <div class="quiz-options">
                <div class="quiz-option" data-quiz="quiz-func-1" data-value="a" onclick="selectOption(this)">
                    <span class="option-letter">A</span> "Hello, Alex!"
                </div>
                <div class="quiz-option" data-quiz="quiz-func-1" data-value="b" onclick="selectOption(this)">
                    <span class="option-letter">B</span> undefined
                </div>
                <div class="quiz-option" data-quiz="quiz-func-1" data-value="c" onclick="selectOption(this)">
                    <span class="option-letter">C</span> Error
                </div>
                <div class="quiz-option" data-quiz="quiz-func-1" data-value="d" onclick="selectOption(this)">
                    <span class="option-letter">D</span> null
                </div>
            </div>
            <button class="quiz-check-btn" onclick="checkQuiz('quiz-func-1', 'b')" disabled>Check Answer</button>
            <div class="quiz-feedback" id="feedback-quiz-func-1"></div>
        </div>

        <div class="quiz-container" id="quiz-func-2">
            <div class="quiz-header">
                <div class="quiz-icon">üß†</div>
                <div class="quiz-title">Quiz: Hoisting</div>
            </div>
            <div class="quiz-question">Which one can you call BEFORE its definition in the code?</div>
            <div class="quiz-options">
                <div class="quiz-option" data-quiz="quiz-func-2" data-value="a" onclick="selectOption(this)">
                    <span class="option-letter">A</span> const fn = function() {}
                </div>
                <div class="quiz-option" data-quiz="quiz-func-2" data-value="b" onclick="selectOption(this)">
                    <span class="option-letter">B</span> const fn = () => {}
                </div>
                <div class="quiz-option" data-quiz="quiz-func-2" data-value="c" onclick="selectOption(this)">
                    <span class="option-letter">C</span> function fn() {}
                </div>
                <div class="quiz-option" data-quiz="quiz-func-2" data-value="d" onclick="selectOption(this)">
                    <span class="option-letter">D</span> All of them
                </div>
            </div>
            <button class="quiz-check-btn" onclick="checkQuiz('quiz-func-2', 'c')" disabled>Check Answer</button>
            <div class="quiz-feedback" id="feedback-quiz-func-2"></div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" onclick="navigateTo('func-scope')">‚Üê Scope & Closures</button>
            <button class="nav-btn" onclick="navigateTo('arr-basics')">Array Basics ‚Üí</button>
        </div>
    </div>

    <!-- ==================== ARRAY BASICS ==================== -->
    <div class="section" id="section-arr-basics">
        <div class="section-header">
            <div class="section-badge">üìã Chapter 6</div>
            <h2>Array Basics</h2>
            <p>An array is an <span class="highlight">ordered list of values</span>. Think of it like a train with numbered cars ‚Äî each car holds a piece of data, and they all have a position number.</p>
        </div>

        <div class="visual-box">
            <div class="visual-title">What an Array Looks Like</div>
            <div class="array-visual">
                <div class="array-bracket">[</div>
                <div class="array-element">
                    <div class="index-label">index 0</div>
                    "apple"
                </div>
                <div class="array-comma">,</div>
                <div class="array-element green">
                    <div class="index-label">index 1</div>
                    "banana"
                </div>
                <div class="array-comma">,</div>
                <div class="array-element orange">
                    <div class="index-label">index 2</div>
                    "cherry"
                </div>
                <div class="array-comma">,</div>
                <div class="array-element pink">
                    <div class="index-label">index 3</div>
                    "date"
                </div>
                <div class="array-bracket">]</div>
            </div>
            <div style="text-align: center; color: var(--text-muted); font-size: 0.8rem; margin-top: 8px;">
                ‚òùÔ∏è Indices start at <strong>0</strong>, not 1! This trips up EVERYONE at first.
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon blue">üèóÔ∏è</div>
                <div><div class="card-title">Creating Arrays</div></div>
            </div>
            <div class="card-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Creating Arrays</div></div>
                    <div class="code-content"><span class="cm">// Most common way: Array literal</span>
<span class="kw">const</span> fruits = [<span class="str">"apple"</span>, <span class="str">"banana"</span>, <span class="str">"cherry"</span>];

<span class="cm">// Empty array (you'll fill it later)</span>
<span class="kw">const</span> emptyList = [];

<span class="cm">// Mixed types (JS allows this!)</span>
<span class="kw">const</span> mixed = [<span class="num">42</span>, <span class="str">"hello"</span>, <span class="bool">true</span>, <span class="undef">null</span>, [<span class="num">1</span>, <span class="num">2</span>]];

<span class="cm">// Array constructor (rarely used)</span>
<span class="kw">const</span> nums = <span class="kw">new</span> <span class="fn">Array</span>(<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>);

<span class="cm">// Array.from (convert something to array)</span>
<span class="kw">const</span> letters = <span class="fn">Array</span>.<span class="fn">from</span>(<span class="str">"hello"</span>); <span class="cm">// ["h","e","l","l","o"]</span></div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon green">üîç</div>
                <div><div class="card-title">Accessing Elements</div></div>
            </div>
            <div class="card-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Accessing Elements</div></div>
                    <div class="code-content"><span class="kw">const</span> colors = [<span class="str">"red"</span>, <span class="str">"green"</span>, <span class="str">"blue"</span>, <span class="str">"yellow"</span>];

<span class="cm">// Access by index (starts at 0!)</span>
<span class="log">console</span>.<span class="fn">log</span>(colors[<span class="num">0</span>]);  <span class="cm">// "red"</span>
<span class="log">console</span>.<span class="fn">log</span>(colors[<span class="num">2</span>]);  <span class="cm">// "blue"</span>

<span class="cm">// Last element</span>
<span class="log">console</span>.<span class="fn">log</span>(colors[colors.<span class="prop">length</span> - <span class="num">1</span>]); <span class="cm">// "yellow"</span>

<span class="cm">// Modern way: .at() method</span>
<span class="log">console</span>.<span class="fn">log</span>(colors.<span class="fn">at</span>(-<span class="num">1</span>));  <span class="cm">// "yellow" (negative = from end!)</span>
<span class="log">console</span>.<span class="fn">log</span>(colors.<span class="fn">at</span>(-<span class="num">2</span>));  <span class="cm">// "blue"</span>

<span class="cm">// Length property</span>
<span class="log">console</span>.<span class="fn">log</span>(colors.<span class="prop">length</span>); <span class="cm">// 4</span>

<span class="cm">// Out of bounds = undefined (no error!)</span>
<span class="log">console</span>.<span class="fn">log</span>(colors[<span class="num">99</span>]); <span class="cm">// undefined</span></div>
                </div>

                <div class="pitfall-box">
                    <div class="pitfall-header">‚ö†Ô∏è Zero-Based Indexing</div>
                    <div class="pitfall-body">Arrays start at index <strong>0</strong>, not 1. So the 3rd element is at index 2. This is the #1 source of bugs for beginners! <br><br>
                    <strong>Rule:</strong> The last index is always <span class="inline-code">array.length - 1</span></div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon orange">‚úèÔ∏è</div>
                <div><div class="card-title">Modifying Elements</div></div>
            </div>
            <div class="card-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Modify in Place</div></div>
                    <div class="code-content"><span class="kw">const</span> pets = [<span class="str">"cat"</span>, <span class="str">"dog"</span>, <span class="str">"fish"</span>];

<span class="cm">// Change an element directly</span>
pets[<span class="num">1</span>] = <span class="str">"hamster"</span>;
<span class="log">console</span>.<span class="fn">log</span>(pets); <span class="cm">// ["cat", "hamster", "fish"]</span>

<span class="cm">// Wait... const but we can modify?! ü§î</span>
<span class="cm">// YES! const means the variable can't be reassigned,</span>
<span class="cm">// but the array's CONTENTS can still change!</span>

<span class="cm">// ‚ùå This would fail:</span>
<span class="cm">// pets = ["new", "array"];  // TypeError!</span>

<span class="cm">// ‚úÖ This is fine:</span>
pets[<span class="num">0</span>] = <span class="str">"parrot"</span>; <span class="cm">// modifying contents, not the variable</span></div>
                </div>
            </div>
        </div>

        <div class="playground">
            <div class="playground-header">
                <div class="playground-title">üéÆ Play with Arrays</div>
                <button class="playground-run-btn" onclick="runPlayground('pg-arr-basics')">‚ñ∂ Run</button>
            </div>
            <textarea class="playground-editor" id="pg-arr-basics">const heroes = ["Batman", "Spider-Man", "Wonder Woman"];

console.log("First:", heroes[0]);
console.log("Last:", heroes[heroes.length - 1]);
console.log("Last (.at):", heroes.at(-1));
console.log("Length:", heroes.length);

// Change one
heroes[1] = "Iron Man";
console.log("After change:", heroes);

// Check if it's an array
console.log("Is array?", Array.isArray(heroes));</textarea>
            <div class="playground-output" id="output-pg-arr-basics">
                <div class="output-label">Output</div>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" onclick="navigateTo('func-pitfalls')">‚Üê Function Pitfalls</button>
            <button class="nav-btn" onclick="navigateTo('arr-crud')">Add & Remove ‚Üí</button>
        </div>
    </div>

    <!-- ==================== ARRAY CRUD ==================== -->
    <div class="section" id="section-arr-crud">
        <div class="section-header">
            <div class="section-badge">üîÑ Chapter 7</div>
            <h2>Add & Remove Elements</h2>
            <p>Meet the four musketeers of array manipulation: <span class="inline-code">push</span>, <span class="inline-code">pop</span>, <span class="inline-code">shift</span>, and <span class="inline-code">unshift</span>!</p>
        </div>

        <div class="visual-box">
            <div class="visual-title">The Big Picture</div>
            <div style="text-align:center;font-family:'JetBrains Mono',monospace;font-size:0.8rem;padding:10px;">
                <div style="display:flex;align-items:center;justify-content:center;gap:8px;margin-bottom:20px;flex-wrap:wrap;">
                    <div style="color:var(--accent-cyan);font-weight:700;">unshift()</div>
                    <div style="color:var(--accent-cyan);">‚Üí</div>
                    <div style="display:flex;gap:4px;">
                        <div style="background:var(--accent-blue);color:white;padding:8px 14px;border-radius:8px;font-weight:700;">A</div>
                        <div style="background:var(--accent-purple);color:white;padding:8px 14px;border-radius:8px;font-weight:700;">B</div>
                        <div style="background:var(--accent-green);color:white;padding:8px 14px;border-radius:8px;font-weight:700;">C</div>
                    </div>
                    <div style="color:var(--accent-green);">‚Üê</div>
                    <div style="color:var(--accent-green);font-weight:700;">push()</div>
                </div>
                <div style="display:flex;align-items:center;justify-content:center;gap:8px;flex-wrap:wrap;">
                    <div style="color:var(--accent-orange);font-weight:700;">shift()</div>
                    <div style="color:var(--accent-orange);">‚Üê</div>
                    <div style="display:flex;gap:4px;">
                        <div style="background:var(--accent-blue);color:white;padding:8px 14px;border-radius:8px;font-weight:700;">A</div>
                        <div style="background:var(--accent-purple);color:white;padding:8px 14px;border-radius:8px;font-weight:700;">B</div>
                        <div style="background:var(--accent-green);color:white;padding:8px 14px;border-radius:8px;font-weight:700;">C</div>
                    </div>
                    <div style="color:var(--accent-red);">‚Üí</div>
                    <div style="color:var(--accent-red);font-weight:700;">pop()</div>
                </div>
            </div>
        </div>

        <div class="method-grid">
            <div class="method-card">
                <div class="method-name">.push(item)</div>
                <div class="method-desc">Adds to the <strong>END</strong></div>
                <div class="method-tag mutates">Mutates Array</div>
            </div>
            <div class="method-card">
                <div class="method-name">.pop()</div>
                <div class="method-desc">Removes from the <strong>END</strong></div>
                <div class="method-tag mutates">Mutates Array</div>
            </div>
            <div class="method-card">
                <div class="method-name">.unshift(item)</div>
                <div class="method-desc">Adds to the <strong>START</strong></div>
                <div class="method-tag mutates">Mutates Array</div>
            </div>
            <div class="method-card">
                <div class="method-name">.shift()</div>
                <div class="method-desc">Removes from the <strong>START</strong></div>
                <div class="method-tag mutates">Mutates Array</div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon green">üìù</div>
                <div><div class="card-title">Code Examples</div></div>
            </div>
            <div class="card-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">push, pop, shift, unshift</div></div>
                    <div class="code-content"><span class="kw">const</span> queue = [<span class="str">"Alice"</span>, <span class="str">"Bob"</span>];

<span class="cm">// push ‚Äî add to END</span>
queue.<span class="fn">push</span>(<span class="str">"Charlie"</span>);
<span class="log">console</span>.<span class="fn">log</span>(queue); <span class="cm">// ["Alice", "Bob", "Charlie"]</span>

<span class="cm">// pop ‚Äî remove from END (returns removed item)</span>
<span class="kw">const</span> last = queue.<span class="fn">pop</span>();
<span class="log">console</span>.<span class="fn">log</span>(last);  <span class="cm">// "Charlie"</span>
<span class="log">console</span>.<span class="fn">log</span>(queue); <span class="cm">// ["Alice", "Bob"]</span>

<span class="cm">// unshift ‚Äî add to START</span>
queue.<span class="fn">unshift</span>(<span class="str">"Zara"</span>);
<span class="log">console</span>.<span class="fn">log</span>(queue); <span class="cm">// ["Zara", "Alice", "Bob"]</span>

<span class="cm">// shift ‚Äî remove from START (returns removed item)</span>
<span class="kw">const</span> first = queue.<span class="fn">shift</span>();
<span class="log">console</span>.<span class="fn">log</span>(first); <span class="cm">// "Zara"</span>
<span class="log">console</span>.<span class="fn">log</span>(queue);  <span class="cm">// ["Alice", "Bob"]</span></div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon purple">üîß</div>
                <div><div class="card-title">More Useful Methods</div></div>
            </div>
            <div class="card-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">splice, slice, concat</div></div>
                    <div class="code-content"><span class="kw">const</span> nums = [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>, <span class="num">5</span>];

<span class="cm">// splice(start, deleteCount, ...items) ‚Äî mutates!</span>
nums.<span class="fn">splice</span>(<span class="num">2</span>, <span class="num">1</span>);  <span class="cm">// Remove 1 item at index 2</span>
<span class="log">console</span>.<span class="fn">log</span>(nums);    <span class="cm">// [1, 2, 4, 5]</span>

nums.<span class="fn">splice</span>(<span class="num">1</span>, <span class="num">0</span>, <span class="num">99</span>); <span class="cm">// Insert 99 at index 1</span>
<span class="log">console</span>.<span class="fn">log</span>(nums);    <span class="cm">// [1, 99, 2, 4, 5]</span>

<span class="cm">// slice(start, end) ‚Äî does NOT mutate! Returns new array</span>
<span class="kw">const</span> colors = [<span class="str">"red"</span>, <span class="str">"green"</span>, <span class="str">"blue"</span>, <span class="str">"yellow"</span>];
<span class="kw">const</span> subset = colors.<span class="fn">slice</span>(<span class="num">1</span>, <span class="num">3</span>);
<span class="log">console</span>.<span class="fn">log</span>(subset); <span class="cm">// ["green", "blue"]</span>
<span class="log">console</span>.<span class="fn">log</span>(colors); <span class="cm">// original unchanged! ‚úÖ</span>

<span class="cm">// concat ‚Äî merge arrays (returns new)</span>
<span class="kw">const</span> merged = [<span class="num">1</span>, <span class="num">2</span>].<span class="fn">concat</span>([<span class="num">3</span>, <span class="num">4</span>]);
<span class="log">console</span>.<span class="fn">log</span>(merged); <span class="cm">// [1, 2, 3, 4]</span>

<span class="cm">// Spread operator (modern way to merge)</span>
<span class="kw">const</span> merged2 = [...[<span class="num">1</span>, <span class="num">2</span>], ...[<span class="num">3</span>, <span class="num">4</span>]];
<span class="log">console</span>.<span class="fn">log</span>(merged2); <span class="cm">// [1, 2, 3, 4]</span></div>
                </div>
            </div>
        </div>

        <!-- Interactive Array Playground -->
        <div class="animation-area">
            <div style="font-weight:700;margin-bottom:10px;color:var(--accent-blue);">üéÆ Interactive Array ‚Äî Click buttons to modify!</div>
            <div class="live-array-display">
                <div class="live-array-label">myArray =</div>
                <div class="live-array-items" id="liveArray"></div>
            </div>
            <div class="live-result" id="liveResult"></div>
            <div class="animation-controls">
                <button class="anim-btn push" onclick="liveArrayAction('push')">push("üçï")</button>
                <button class="anim-btn pop" onclick="liveArrayAction('pop')">pop()</button>
                <button class="anim-btn unshift" onclick="liveArrayAction('unshift')">unshift("‚≠ê")</button>
                <button class="anim-btn shift" onclick="liveArrayAction('shift')">shift()</button>
                <button class="anim-btn reset" onclick="liveArrayAction('reset')">Reset</button>
            </div>
        </div>

        <div class="playground">
            <div class="playground-header">
                <div class="playground-title">üéÆ Practice CRUD Operations</div>
                <button class="playground-run-btn" onclick="runPlayground('pg-crud')">‚ñ∂ Run</button>
            </div>
            <textarea class="playground-editor" id="pg-crud">const tasks = ["eat", "sleep", "code"];

// Add "learn" at the end
tasks.push("learn");
console.log("After push:", tasks);

// Remove first item
const done = tasks.shift();
console.log("Done:", done);
console.log("After shift:", tasks);

// Insert "exercise" at index 1
tasks.splice(1, 0, "exercise");
console.log("After splice:", tasks);

// Get a copy of first 2 items
const topTwo = tasks.slice(0, 2);
console.log("Top two:", topTwo);</textarea>
            <div class="playground-output" id="output-pg-crud">
                <div class="output-label">Output</div>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" onclick="navigateTo('arr-basics')">‚Üê Array Basics</button>
            <button class="nav-btn" onclick="navigateTo('arr-iterate')">Iteration Methods ‚Üí</button>
        </div>
    </div>

    <!-- ==================== ITERATION METHODS ==================== -->
    <div class="section" id="section-arr-iterate">
        <div class="section-header">
            <div class="section-badge">üîÅ Chapter 8</div>
            <h2>Iteration Methods</h2>
            <p>Looping through arrays is something you'll do <em>constantly</em>. Let's learn every way to do it!</p>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon blue">1Ô∏è‚É£</div>
                <div><div class="card-title">for loop (Classic)</div></div>
            </div>
            <div class="card-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Classic For Loop</div></div>
                    <div class="code-content"><span class="kw">const</span> fruits = [<span class="str">"apple"</span>, <span class="str">"banana"</span>, <span class="str">"cherry"</span>];

<span class="kw">for</span> (<span class="kw">let</span> i = <span class="num">0</span>; i < fruits.<span class="prop">length</span>; i++) {
    <span class="log">console</span>.<span class="fn">log</span>(i, fruits[i]);
}
<span class="cm">// 0 "apple"</span>
<span class="cm">// 1 "banana"</span>
<span class="cm">// 2 "cherry"</span></div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon purple">2Ô∏è‚É£</div>
                <div><div class="card-title">for...of (Modern & Clean)</div></div>
            </div>
            <div class="card-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">for...of</div></div>
                    <div class="code-content"><span class="kw">const</span> fruits = [<span class="str">"apple"</span>, <span class="str">"banana"</span>, <span class="str">"cherry"</span>];

<span class="kw">for</span> (<span class="kw">const</span> fruit <span class="kw">of</span> fruits) {
    <span class="log">console</span>.<span class="fn">log</span>(fruit);
}
<span class="cm">// "apple"</span>
<span class="cm">// "banana"</span>
<span class="cm">// "cherry"</span>

<span class="cm">// Want the index too?</span>
<span class="kw">for</span> (<span class="kw">const</span> [index, fruit] <span class="kw">of</span> fruits.<span class="fn">entries</span>()) {
    <span class="log">console</span>.<span class="fn">log</span>(<span class="str">`</span><span class="op">${</span>index<span class="op">}</span><span class="str">: </span><span class="op">${</span>fruit<span class="op">}</span><span class="str">`</span>);
}</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon green">3Ô∏è‚É£</div>
                <div>
                    <div class="card-title">.forEach() ‚Äî The Array Method Way</div>
                    <div class="card-subtitle">Calls a function for each element</div>
                </div>
            </div>
            <div class="card-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">forEach</div></div>
                    <div class="code-content"><span class="kw">const</span> fruits = [<span class="str">"apple"</span>, <span class="str">"banana"</span>, <span class="str">"cherry"</span>];

<span class="cm">// forEach takes a callback function</span>
fruits.<span class="fn">forEach</span>((<span class="param">fruit</span>, <span class="param">index</span>) <span class="op">=></span> {
    <span class="log">console</span>.<span class="fn">log</span>(<span class="str">`</span><span class="op">${</span><span class="param">index</span><span class="op">}</span><span class="str">: </span><span class="op">${</span><span class="param">fruit</span><span class="op">}</span><span class="str">`</span>);
});
<span class="cm">// 0: apple</span>
<span class="cm">// 1: banana</span>
<span class="cm">// 2: cherry</span>

<span class="cm">// forEach callback gets 3 things:</span>
<span class="cm">// 1. element  2. index  3. the whole array</span>
fruits.<span class="fn">forEach</span>((<span class="param">item</span>, <span class="param">i</span>, <span class="param">arr</span>) <span class="op">=></span> {
    <span class="log">console</span>.<span class="fn">log</span>(item, <span class="str">"is at position"</span>, i, <span class="str">"of"</span>, arr);
});</div>
                </div>

                <div class="pitfall-box">
                    <div class="pitfall-header">‚ö†Ô∏è forEach Returns Nothing!</div>
                    <div class="pitfall-body">
                        <span class="inline-code">forEach</span> always returns <span class="inline-code">undefined</span>. You can't chain it or save its result. If you need a new array, use <span class="inline-code">map</span> instead!<br><br>
                        <span class="inline-code">const result = [1,2,3].forEach(x => x * 2); // undefined! ‚ùå</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="visual-box">
            <div class="visual-title">Which Loop Should I Use?</div>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Best For</th>
                        <th>Can Break?</th>
                        <th>Returns</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>for</code></td>
                        <td>Need full control, index</td>
                        <td>‚úÖ Yes</td>
                        <td>‚Äî</td>
                    </tr>
                    <tr>
                        <td><code>for...of</code></td>
                        <td>Clean iteration, readability</td>
                        <td>‚úÖ Yes</td>
                        <td>‚Äî</td>
                    </tr>
                    <tr>
                        <td><code>.forEach()</code></td>
                        <td>Running side effects on each item</td>
                        <td>‚ùå No</td>
                        <td>undefined</td>
                    </tr>
                    <tr>
                        <td><code>.map()</code></td>
                        <td>Transforming into new array</td>
                        <td>‚ùå No</td>
                        <td>New array</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="playground">
            <div class="playground-header">
                <div class="playground-title">üéÆ Try All Loop Types</div>
                <button class="playground-run-btn" onclick="runPlayground('pg-iterate')">‚ñ∂ Run</button>
            </div>
            <textarea class="playground-editor" id="pg-iterate">const animals = ["üê± Cat", "üê∂ Dog", "üê∞ Rabbit"];

console.log("--- for loop ---");
for (let i = 0; i < animals.length; i++) {
    console.log(animals[i]);
}

console.log("--- for...of ---");
for (const animal of animals) {
    console.log(animal);
}

console.log("--- forEach ---");
animals.forEach((animal, i) => {
    console.log(`#${i + 1}: ${animal}`);
});</textarea>
            <div class="playground-output" id="output-pg-iterate">
                <div class="output-label">Output</div>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" onclick="navigateTo('arr-crud')">‚Üê Add & Remove</button>
            <button class="nav-btn" onclick="navigateTo('arr-transform')">map, filter, reduce ‚Üí</button>
        </div>
    </div>

    <!-- ==================== MAP, FILTER, REDUCE ==================== -->
    <div class="section" id="section-arr-transform">
        <div class="section-header">
            <div class="section-badge">‚ú® Chapter 9</div>
            <h2>map, filter, reduce</h2>
            <p>These are the <span class="highlight">holy trinity</span> of array methods. Master these and you'll feel like a JavaScript wizard! üßô‚Äç‚ôÇÔ∏è</p>
        </div>

        <!-- MAP -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon blue">üó∫Ô∏è</div>
                <div>
                    <div class="card-title">.map() ‚Äî Transform Every Element</div>
                    <div class="card-subtitle">Creates a NEW array with each element transformed</div>
                </div>
            </div>
            <div class="card-body">
                <div class="visual-box">
                    <div class="visual-title">How .map() Works</div>
                    <div class="function-visual">
                        <div class="func-box input-box">
                            <div class="func-box-label">Original</div>
                            <div class="func-box-content">[1, 2, 3]</div>
                        </div>
                        <div class="func-arrow">‚Üí</div>
                        <div class="func-box">
                            <div class="func-box-label">map(x => x * 2)</div>
                            <div class="func-box-content">√ó2 each</div>
                        </div>
                        <div class="func-arrow">‚Üí</div>
                        <div class="func-box output-box">
                            <div class="func-box-label">New Array</div>
                            <div class="func-box-content">[2, 4, 6]</div>
                        </div>
                    </div>
                </div>
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">.map()</div></div>
                    <div class="code-content"><span class="kw">const</span> numbers = [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>, <span class="num">5</span>];

<span class="cm">// Double every number</span>
<span class="kw">const</span> doubled = numbers.<span class="fn">map</span>(<span class="param">num</span> <span class="op">=></span> <span class="param">num</span> * <span class="num">2</span>);
<span class="log">console</span>.<span class="fn">log</span>(doubled); <span class="cm">// [2, 4, 6, 8, 10]</span>

<span class="cm">// Convert to strings</span>
<span class="kw">const</span> labels = numbers.<span class="fn">map</span>(<span class="param">n</span> <span class="op">=></span> <span class="str">`Item </span><span class="op">${</span><span class="param">n</span><span class="op">}</span><span class="str">`</span>);
<span class="log">console</span>.<span class="fn">log</span>(labels); <span class="cm">// ["Item 1", "Item 2", ...]</span>

<span class="cm">// Extract property from objects</span>
<span class="kw">const</span> users = [
    { <span class="prop">name</span>: <span class="str">"Alex"</span>, <span class="prop">age</span>: <span class="num">25</span> },
    { <span class="prop">name</span>: <span class="str">"Sam"</span>,  <span class="prop">age</span>: <span class="num">30</span> },
];
<span class="kw">const</span> names = users.<span class="fn">map</span>(<span class="param">user</span> <span class="op">=></span> <span class="param">user</span>.<span class="prop">name</span>);
<span class="log">console</span>.<span class="fn">log</span>(names); <span class="cm">// ["Alex", "Sam"]</span>

<span class="cm">// Original array is UNCHANGED ‚úÖ</span>
<span class="log">console</span>.<span class="fn">log</span>(numbers); <span class="cm">// [1, 2, 3, 4, 5]</span></div>
                </div>
                <div class="tip-box">
                    <div class="tip-header">üí° Rule of Thumb</div>
                    <div class="tip-body">Use <span class="inline-code">.map()</span> when you want to <strong>transform</strong> each item into something new. The new array always has the <strong>same length</strong> as the original.</div>
                </div>
            </div>
        </div>

        <!-- FILTER -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon green">üîç</div>
                <div>
                    <div class="card-title">.filter() ‚Äî Keep Only What Matches</div>
                    <div class="card-subtitle">Creates a NEW array with elements that pass a test</div>
                </div>
            </div>
            <div class="card-body">
                <div class="visual-box">
                    <div class="visual-title">How .filter() Works</div>
                    <div class="function-visual">
                        <div class="func-box input-box">
                            <div class="func-box-label">Original</div>
                            <div class="func-box-content">[1, 2, 3, 4, 5]</div>
                        </div>
                        <div class="func-arrow">‚Üí</div>
                        <div class="func-box">
                            <div class="func-box-label">filter(x => x > 2)</div>
                            <div class="func-box-content">keep if > 2</div>
                        </div>
                        <div class="func-arrow">‚Üí</div>
                        <div class="func-box output-box">
                            <div class="func-box-label">New Array</div>
                            <div class="func-box-content">[3, 4, 5]</div>
                        </div>
                    </div>
                </div>
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">.filter()</div></div>
                    <div class="code-content"><span class="kw">const</span> numbers = [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>, <span class="num">5</span>, <span class="num">6</span>, <span class="num">7</span>, <span class="num">8</span>];

<span class="cm">// Keep only even numbers</span>
<span class="kw">const</span> evens = numbers.<span class="fn">filter</span>(<span class="param">n</span> <span class="op">=></span> <span class="param">n</span> % <span class="num">2</span> === <span class="num">0</span>);
<span class="log">console</span>.<span class="fn">log</span>(evens); <span class="cm">// [2, 4, 6, 8]</span>

<span class="cm">// Keep numbers greater than 5</span>
<span class="kw">const</span> big = numbers.<span class="fn">filter</span>(<span class="param">n</span> <span class="op">=></span> <span class="param">n</span> > <span class="num">5</span>);
<span class="log">console</span>.<span class="fn">log</span>(big); <span class="cm">// [6, 7, 8]</span>

<span class="cm">// Filter objects</span>
<span class="kw">const</span> products = [
    { <span class="prop">name</span>: <span class="str">"Laptop"</span>,  <span class="prop">price</span>: <span class="num">999</span> },
    { <span class="prop">name</span>: <span class="str">"Mouse"</span>,   <span class="prop">price</span>: <span class="num">29</span> },
    { <span class="prop">name</span>: <span class="str">"Monitor"</span>, <span class="prop">price</span>: <span class="num">349</span> },
];
<span class="kw">const</span> affordable = products.<span class="fn">filter</span>(<span class="param">p</span> <span class="op">=></span> <span class="param">p</span>.<span class="prop">price</span> < <span class="num">500</span>);
<span class="log">console</span>.<span class="fn">log</span>(affordable);
<span class="cm">// [{name: "Mouse", price: 29}, {name: "Monitor", price: 349}]</span></div>
                </div>
            </div>
        </div>

        <!-- REDUCE -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon orange">üî•</div>
                <div>
                    <div class="card-title">.reduce() ‚Äî Boil Down to One Value</div>
                    <div class="card-subtitle">Combines all elements into a single value</div>
                </div>
            </div>
            <div class="card-body">
                <div class="visual-box">
                    <div class="visual-title">How .reduce() Works ‚Äî Step by Step</div>
                    <div style="font-family:'JetBrains Mono',monospace;font-size:0.8rem;padding:10px;">
                        <div style="color:var(--text-muted);margin-bottom:10px;">reduce((accumulator, current) => accumulator + current, 0)</div>
                        <div style="color:var(--text-secondary);line-height:2;">
                            <div>Step 1: acc = <span style="color:var(--accent-yellow)">0</span> + <span style="color:var(--accent-blue)">1</span> ‚Üí <span style="color:var(--accent-green)">1</span></div>
                            <div>Step 2: acc = <span style="color:var(--accent-yellow)">1</span> + <span style="color:var(--accent-blue)">2</span> ‚Üí <span style="color:var(--accent-green)">3</span></div>
                            <div>Step 3: acc = <span style="color:var(--accent-yellow)">3</span> + <span style="color:var(--accent-blue)">3</span> ‚Üí <span style="color:var(--accent-green)">6</span></div>
                            <div>Step 4: acc = <span style="color:var(--accent-yellow)">6</span> + <span style="color:var(--accent-blue)">4</span> ‚Üí <span style="color:var(--accent-green);font-weight:700;">10 ‚úÖ Final result</span></div>
                        </div>
                    </div>
                </div>
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">.reduce()</div></div>
                    <div class="code-content"><span class="kw">const</span> numbers = [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>];

<span class="cm">// Sum all numbers</span>
<span class="kw">const</span> sum = numbers.<span class="fn">reduce</span>((<span class="param">acc</span>, <span class="param">curr</span>) <span class="op">=></span> <span class="param">acc</span> + <span class="param">curr</span>, <span class="num">0</span>);
<span class="log">console</span>.<span class="fn">log</span>(sum); <span class="cm">// 10</span>

<span class="cm">// Find max value</span>
<span class="kw">const</span> max = numbers.<span class="fn">reduce</span>((<span class="param">a</span>, <span class="param">b</span>) <span class="op">=></span> <span class="param">a</span> > <span class="param">b</span> ? <span class="param">a</span> : <span class="param">b</span>);
<span class="log">console</span>.<span class="fn">log</span>(max); <span class="cm">// 4</span>

<span class="cm">// Count occurrences</span>
<span class="kw">const</span> votes = [<span class="str">"yes"</span>, <span class="str">"no"</span>, <span class="str">"yes"</span>, <span class="str">"yes"</span>, <span class="str">"no"</span>];
<span class="kw">const</span> tally = votes.<span class="fn">reduce</span>((<span class="param">acc</span>, <span class="param">vote</span>) <span class="op">=></span> {
    <span class="param">acc</span>[<span class="param">vote</span>] = (<span class="param">acc</span>[<span class="param">vote</span>] || <span class="num">0</span>) + <span class="num">1</span>;
    <span class="kw">return</span> <span class="param">acc</span>;
}, {});
<span class="log">console</span>.<span class="fn">log</span>(tally); <span class="cm">// { yes: 3, no: 2 }</span></div>
                </div>

                <div class="info-box">
                    <div class="info-header">üîë Understanding reduce()</div>
                    <div class="info-body">
                        <span class="inline-code">reduce(callback, initialValue)</span> takes two arguments:
                        <br>1. <strong>callback(accumulator, currentItem)</strong> ‚Äî runs for each element
                        <br>2. <strong>initialValue</strong> ‚Äî the starting value of the accumulator
                        <br><br>Think of the accumulator as a "running total" that carries forward through each step.
                    </div>
                </div>
            </div>
        </div>

        <!-- CHAINING -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon cyan">‚õìÔ∏è</div>
                <div><div class="card-title">Chaining Methods Together</div></div>
            </div>
            <div class="card-body">
                <p>The real power comes from <strong>chaining</strong> these methods:</p>
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Method Chaining üî•</div></div>
                    <div class="code-content"><span class="kw">const</span> products = [
    { <span class="prop">name</span>: <span class="str">"Laptop"</span>,    <span class="prop">price</span>: <span class="num">999</span>,  <span class="prop">inStock</span>: <span class="bool">true</span> },
    { <span class="prop">name</span>: <span class="str">"Phone"</span>,     <span class="prop">price</span>: <span class="num">699</span>,  <span class="prop">inStock</span>: <span class="bool">false</span> },
    { <span class="prop">name</span>: <span class="str">"Tablet"</span>,    <span class="prop">price</span>: <span class="num">499</span>,  <span class="prop">inStock</span>: <span class="bool">true</span> },
    { <span class="prop">name</span>: <span class="str">"Headphones"</span>, <span class="prop">price</span>: <span class="num">199</span>,  <span class="prop">inStock</span>: <span class="bool">true</span> },
];

<span class="cm">// Get total cost of in-stock items with 10% discount</span>
<span class="kw">const</span> total = products
    .<span class="fn">filter</span>(<span class="param">p</span> <span class="op">=></span> <span class="param">p</span>.<span class="prop">inStock</span>)              <span class="cm">// only in-stock</span>
    .<span class="fn">map</span>(<span class="param">p</span> <span class="op">=></span> <span class="param">p</span>.<span class="prop">price</span> * <span class="num">0.9</span>)           <span class="cm">// apply 10% discount</span>
    .<span class="fn">reduce</span>((<span class="param">sum</span>, <span class="param">price</span>) <span class="op">=></span> <span class="param">sum</span> + <span class="param">price</span>, <span class="num">0</span>); <span class="cm">// sum up</span>

<span class="log">console</span>.<span class="fn">log</span>(total); <span class="cm">// 1527.3</span></div>
                </div>
            </div>
        </div>

        <div class="playground">
            <div class="playground-header">
                <div class="playground-title">üéÆ Practice map, filter, reduce</div>
                <button class="playground-run-btn" onclick="runPlayground('pg-transform')">‚ñ∂ Run</button>
            </div>
            <textarea class="playground-editor" id="pg-transform">const scores = [85, 92, 45, 78, 95, 60, 88, 33];

// 1. Filter: only passing scores (>= 60)
const passing = scores.filter(s => s >= 60);
console.log("Passing:", passing);

// 2. Map: convert to letter grades
const grades = passing.map(s => {
    if (s >= 90) return "A";
    if (s >= 80) return "B";
    if (s >= 70) return "C";
    return "D";
});
console.log("Grades:", grades);

// 3. Reduce: average score
const avg = scores.reduce((sum, s) => sum + s, 0) / scores.length;
console.log("Average:", avg.toFixed(1));

// Chain it all!
const summary = scores
    .filter(s => s >= 60)
    .map(s => ({ score: s, passed: true }));
console.log("Summary:", summary);</textarea>
            <div class="playground-output" id="output-pg-transform">
                <div class="output-label">Output</div>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" onclick="navigateTo('arr-iterate')">‚Üê Iteration Methods</button>
            <button class="nav-btn" onclick="navigateTo('arr-destruct')">Destructuring ‚Üí</button>
        </div>
    </div>

    <!-- ==================== DESTRUCTURING ==================== -->
    <div class="section" id="section-arr-destruct">
        <div class="section-header">
            <div class="section-badge">üì§ Chapter 10</div>
            <h2>Array Destructuring</h2>
            <p>Destructuring lets you <span class="highlight">unpack values</span> from arrays into individual variables in one clean line. No more <span class="inline-code">arr[0]</span>, <span class="inline-code">arr[1]</span>!</p>
        </div>

        <div class="visual-box">
            <div class="visual-title">Destructuring Visualized</div>
            <div class="destructure-visual">
                <div class="destruct-row">
                    <div class="array-visual" style="padding:0;">
                        <div class="array-bracket">[</div>
                        <div class="array-element">"Alex"</div>
                        <div class="array-comma">,</div>
                        <div class="array-element green">25</div>
                        <div class="array-comma">,</div>
                        <div class="array-element orange">"dev"</div>
                        <div class="array-bracket">]</div>
                    </div>
                </div>
                <div style="font-size:2rem;color:var(--accent-green);">‚Üì</div>
                <div class="destruct-row" style="gap:20px;">
                    <div class="var-box">
                        <div class="var-label">name</div>
                        "Alex"
                    </div>
                    <div class="var-box">
                        <div class="var-label">age</div>
                        25
                    </div>
                    <div class="var-box">
                        <div class="var-label">job</div>
                        "dev"
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon blue">üìù</div>
                <div><div class="card-title">Basic Destructuring</div></div>
            </div>
            <div class="card-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Array Destructuring</div></div>
                    <div class="code-content"><span class="cm">// ‚ùå The old way</span>
<span class="kw">const</span> colors = [<span class="str">"red"</span>, <span class="str">"green"</span>, <span class="str">"blue"</span>];
<span class="kw">const</span> first = colors[<span class="num">0</span>];   <span class="cm">// "red"</span>
<span class="kw">const</span> second = colors[<span class="num">1</span>];  <span class="cm">// "green"</span>
<span class="kw">const</span> third = colors[<span class="num">2</span>];   <span class="cm">// "blue"</span>

<span class="cm">// ‚úÖ The new way ‚Äî destructuring!</span>
<span class="kw">const</span> [first, second, third] = [<span class="str">"red"</span>, <span class="str">"green"</span>, <span class="str">"blue"</span>];
<span class="log">console</span>.<span class="fn">log</span>(first);  <span class="cm">// "red"</span>
<span class="log">console</span>.<span class="fn">log</span>(second); <span class="cm">// "green"</span>
<span class="log">console</span>.<span class="fn">log</span>(third);  <span class="cm">// "blue"</span></div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon green">üéØ</div>
                <div><div class="card-title">Advanced Patterns</div></div>
            </div>
            <div class="card-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Advanced Destructuring</div></div>
                    <div class="code-content"><span class="cm">// Skip elements with commas</span>
<span class="kw">const</span> [, , third] = [<span class="str">"a"</span>, <span class="str">"b"</span>, <span class="str">"c"</span>];
<span class="log">console</span>.<span class="fn">log</span>(third); <span class="cm">// "c"</span>

<span class="cm">// Rest operator (...) ‚Äî collect the remaining</span>
<span class="kw">const</span> [head, ...tail] = [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>, <span class="num">5</span>];
<span class="log">console</span>.<span class="fn">log</span>(head); <span class="cm">// 1</span>
<span class="log">console</span>.<span class="fn">log</span>(tail); <span class="cm">// [2, 3, 4, 5]</span>

<span class="cm">// Default values</span>
<span class="kw">const</span> [a = <span class="num">10</span>, b = <span class="num">20</span>, c = <span class="num">30</span>] = [<span class="num">1</span>, <span class="num">2</span>];
<span class="log">console</span>.<span class="fn">log</span>(a, b, c); <span class="cm">// 1, 2, 30 (c uses default!)</span>

<span class="cm">// Swap variables ‚Äî SO elegant! ü§©</span>
<span class="kw">let</span> x = <span class="num">1</span>, y = <span class="num">2</span>;
[x, y] = [y, x];
<span class="log">console</span>.<span class="fn">log</span>(x, y); <span class="cm">// 2, 1</span>

<span class="cm">// From function return values</span>
<span class="kw">function</span> <span class="fn">getCoords</span>() {
    <span class="kw">return</span> [<span class="num">42.3</span>, -<span class="num">71.1</span>];
}
<span class="kw">const</span> [lat, lng] = <span class="fn">getCoords</span>();
<span class="log">console</span>.<span class="fn">log</span>(lat, lng); <span class="cm">// 42.3, -71.1</span></div>
                </div>
            </div>
        </div>

        <div class="tip-box">
            <div class="tip-header">‚ú® Real-World Use Cases</div>
            <div class="tip-body">
                <strong>1.</strong> React's <span class="inline-code">useState</span>: <span class="inline-code">const [count, setCount] = useState(0);</span><br>
                <strong>2.</strong> Getting parts of a date: <span class="inline-code">const [year, month, day] = "2024-01-15".split("-");</span><br>
                <strong>3.</strong> Multiple return values from functions<br>
                <strong>4.</strong> Swapping variables without a temp variable
            </div>
        </div>

        <div class="playground">
            <div class="playground-header">
                <div class="playground-title">üéÆ Destructuring Practice</div>
                <button class="playground-run-btn" onclick="runPlayground('pg-destruct')">‚ñ∂ Run</button>
            </div>
            <textarea class="playground-editor" id="pg-destruct">// Basic destructuring
const [name, age, city] = ["Alex", 25, "NYC"];
console.log(name, age, city);

// Rest operator
const [winner, ...losers] = ["Gold", "Silver", "Bronze", "4th"];
console.log("Winner:", winner);
console.log("Others:", losers);

// Swap!
let a = "üçé", b = "üçä";
console.log("Before:", a, b);
[a, b] = [b, a];
console.log("After:", a, b);

// From a function
function minMax(arr) {
    return [Math.min(...arr), Math.max(...arr)];
}
const [min, max] = minMax([5, 2, 8, 1, 9]);
console.log("Min:", min, "Max:", max);</textarea>
            <div class="playground-output" id="output-pg-destruct">
                <div class="output-label">Output</div>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" onclick="navigateTo('arr-transform')">‚Üê map, filter, reduce</button>
            <button class="nav-btn" onclick="navigateTo('arr-pitfalls')">Array Pitfalls & Quiz ‚Üí</button>
        </div>
    </div>

    <!-- ==================== ARRAY PITFALLS & QUIZ ==================== -->
    <div class="section" id="section-arr-pitfalls">
        <div class="section-header">
            <div class="section-badge">‚ö†Ô∏è Chapter 11</div>
            <h2>Array Pitfalls & Quiz</h2>
            <p>Common mistakes that even experienced developers make. Let's learn them so you can avoid them!</p>
        </div>

        <div class="pitfall-box">
            <div class="pitfall-header">‚ùå Pitfall #1: Mutating vs Non-Mutating</div>
            <div class="pitfall-body">
                Some methods <strong>change</strong> the original array, others create a <strong>new one</strong>. Mixing them up = bugs!
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Mutating vs Non-Mutating</div></div>
                    <div class="code-content"><span class="cm">// ‚ö†Ô∏è MUTATING methods (change original)</span>
<span class="cm">// push, pop, shift, unshift, splice, sort, reverse</span>

<span class="kw">const</span> arr = [<span class="num">3</span>, <span class="num">1</span>, <span class="num">2</span>];
arr.<span class="fn">sort</span>(); <span class="cm">// arr is now [1, 2, 3] ‚Äî changed! üò±</span>

<span class="cm">// ‚úÖ NON-MUTATING methods (return new array)</span>
<span class="cm">// map, filter, slice, concat, flat, toSorted</span>

<span class="kw">const</span> arr2 = [<span class="num">3</span>, <span class="num">1</span>, <span class="num">2</span>];
<span class="kw">const</span> sorted = [...arr2].<span class="fn">sort</span>(); <span class="cm">// spread first to not mutate!</span>
<span class="log">console</span>.<span class="fn">log</span>(arr2);   <span class="cm">// [3, 1, 2] ‚Äî unchanged! ‚úÖ</span>
<span class="log">console</span>.<span class="fn">log</span>(sorted); <span class="cm">// [1, 2, 3]</span></div>
                </div>
            </div>
        </div>

        <div class="pitfall-box">
            <div class="pitfall-header">‚ùå Pitfall #2: sort() With Numbers</div>
            <div class="pitfall-body">
                <span class="inline-code">sort()</span> converts to <strong>strings</strong> by default. This leads to hilarious/terrible results with numbers:
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Sorting Numbers Wrong</div></div>
                    <div class="code-content"><span class="cm">// ‚ùå WRONG ‚Äî sorts as strings!</span>
[<span class="num">10</span>, <span class="num">9</span>, <span class="num">80</span>, <span class="num">1</span>].<span class="fn">sort</span>()  <span class="cm">// [1, 10, 80, 9] ‚Äî WAT?! ü§¶</span>
<span class="cm">// "10" < "9" because "1" < "9" in string comparison!</span>

<span class="cm">// ‚úÖ CORRECT ‚Äî provide a compare function</span>
[<span class="num">10</span>, <span class="num">9</span>, <span class="num">80</span>, <span class="num">1</span>].<span class="fn">sort</span>((<span class="param">a</span>, <span class="param">b</span>) <span class="op">=></span> <span class="param">a</span> - <span class="param">b</span>)  <span class="cm">// [1, 9, 10, 80] ‚úÖ</span></div>
                </div>
            </div>
        </div>

        <div class="pitfall-box">
            <div class="pitfall-header">‚ùå Pitfall #3: Comparing Arrays</div>
            <div class="pitfall-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">Array Comparison</div></div>
                    <div class="code-content"><span class="cm">// ‚ùå This does NOT work!</span>
[<span class="num">1</span>, <span class="num">2</span>] === [<span class="num">1</span>, <span class="num">2</span>]  <span class="cm">// false! üò±</span>
<span class="cm">// Arrays are objects ‚Äî compared by reference, not value</span>

<span class="cm">// ‚úÖ Compare contents instead</span>
<span class="fn">JSON</span>.<span class="fn">stringify</span>([<span class="num">1</span>,<span class="num">2</span>]) === <span class="fn">JSON</span>.<span class="fn">stringify</span>([<span class="num">1</span>,<span class="num">2</span>]) <span class="cm">// true</span></div>
                </div>
            </div>
        </div>

        <div class="pitfall-box">
            <div class="pitfall-header">‚ùå Pitfall #4: forEach Can't Break</div>
            <div class="pitfall-body">
                <div class="code-block">
                    <div class="code-header"><div class="code-dots"><div class="code-dot red"></div><div class="code-dot yellow"></div><div class="code-dot green"></div></div><div class="code-label">forEach vs for...of</div></div>
                    <div class="code-content"><span class="cm">// ‚ùå break doesn't work in forEach!</span>
[<span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>].<span class="fn">forEach</span>(<span class="param">n</span> <span class="op">=></span> {
    <span class="kw">if</span> (<span class="param">n</span> === <span class="num">2</span>) <span class="kw">break</span>; <span class="cm">// SyntaxError! ‚ùå</span>
});

<span class="cm">// ‚úÖ Use for...of or .find() / .some() instead</span>
<span class="kw">for</span> (<span class="kw">const</span> <span class="param">n</span> <span class="kw">of</span> [<span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>]) {
    <span class="kw">if</span> (<span class="param">n</span> === <span class="num">2</span>) <span class="kw">break</span>; <span class="cm">// works! ‚úÖ</span>
}</div>
                </div>
            </div>
        </div>

        <!-- QUIZZES -->
        <div class="quiz-container" id="quiz-arr-1">
            <div class="quiz-header">
                <div class="quiz-icon">üß†</div>
                <div class="quiz-title">Quiz: What does .map() return?</div>
            </div>
            <div class="quiz-question">What is the result of: <span class="inline-code">[1, 2, 3].map(x => x > 1)</span></div>
            <div class="quiz-options">
                <div class="quiz-option" data-quiz="quiz-arr-1" data-value="a" onclick="selectOption(this)">
                    <span class="option-letter">A</span> [2, 3]
                </div>
                <div class="quiz-option" data-quiz="quiz-arr-1" data-value="b" onclick="selectOption(this)">
                    <span class="option-letter">B</span> [false, true, true]
                </div>
                <div class="quiz-option" data-quiz="quiz-arr-1" data-value="c" onclick="selectOption(this)">
                    <span class="option-letter">C</span> [1, 2, 3]
                </div>
                <div class="quiz-option" data-quiz="quiz-arr-1" data-value="d" onclick="selectOption(this)">
                    <span class="option-letter">D</span> true
                </div>
            </div>
            <button class="quiz-check-btn" onclick="checkQuiz('quiz-arr-1', 'b')" disabled>Check Answer</button>
            <div class="quiz-feedback" id="feedback-quiz-arr-1"></div>
        </div>

        <div class="quiz-container" id="quiz-arr-2">
            <div class="quiz-header">
                <div class="quiz-icon">üß†</div>
                <div class="quiz-title">Quiz: Mutating Methods</div>
            </div>
            <div class="quiz-question">Which method does NOT mutate the original array?</div>
            <div class="quiz-options">
                <div class="quiz-option" data-quiz="quiz-arr-2" data-value="a" onclick="selectOption(this)">
                    <span class="option-letter">A</span> .push()
                </div>
                <div class="quiz-option" data-quiz="quiz-arr-2" data-value="b" onclick="selectOption(this)">
                    <span class="option-letter">B</span> .splice()
                </div>
                <div class="quiz-option" data-quiz="quiz-arr-2" data-value="c" onclick="selectOption(this)">
                    <span class="option-letter">C</span> .filter()
                </div>
                <div class="quiz-option" data-quiz="quiz-arr-2" data-value="d" onclick="selectOption(this)">
                    <span class="option-letter">D</span> .sort()
                </div>
            </div>
            <button class="quiz-check-btn" onclick="checkQuiz('quiz-arr-2', 'c')" disabled>Check Answer</button>
            <div class="quiz-feedback" id="feedback-quiz-arr-2"></div>
        </div>

        <div class="quiz-container" id="quiz-arr-3">
            <div class="quiz-header">
                <div class="quiz-icon">üß†</div>
                <div class="quiz-title">Quiz: Destructuring</div>
            </div>
            <div class="quiz-question">What does <span class="inline-code">const [a, , b] = [1, 2, 3]</span> give for <span class="inline-code">b</span>?</div>
            <div class="quiz-options">
                <div class="quiz-option" data-quiz="quiz-arr-3" data-value="a" onclick="selectOption(this)">
                    <span class="option-letter">A</span> 1
                </div>
                <div class="quiz-option" data-quiz="quiz-arr-3" data-value="b" onclick="selectOption(this)">
                    <span class="option-letter">B</span> 2
                </div>
                <div class="quiz-option" data-quiz="quiz-arr-3" data-value="c" onclick="selectOption(this)">
                    <span class="option-letter">C</span> 3
                </div>
                <div class="quiz-option" data-quiz="quiz-arr-3" data-value="d" onclick="selectOption(this)">
                    <span class="option-letter">D</span> undefined
                </div>
            </div>
            <button class="quiz-check-btn" onclick="checkQuiz('quiz-arr-3', 'c')" disabled>Check Answer</button>
            <div class="quiz-feedback" id="feedback-quiz-arr-3"></div>
        </div>

        <div class="quiz-container" id="quiz-arr-4">
            <div class="quiz-header">
                <div class="quiz-icon">üß†</div>
                <div class="quiz-title">Quiz: reduce()</div>
            </div>
            <div class="quiz-question">What does <span class="inline-code">[1, 2, 3].reduce((acc, n) => acc + n, 10)</span> return?</div>
            <div class="quiz-options">
                <div class="quiz-option" data-quiz="quiz-arr-4" data-value="a" onclick="selectOption(this)">
                    <span class="option-letter">A</span> 6
                </div>
                <div class="quiz-option" data-quiz="quiz-arr-4" data-value="b" onclick="selectOption(this)">
                    <span class="option-letter">B</span> 16
                </div>
                <div class="quiz-option" data-quiz="quiz-arr-4" data-value="c" onclick="selectOption(this)">
                    <span class="option-letter">C</span> 10
                </div>
                <div class="quiz-option" data-quiz="quiz-arr-4" data-value="d" onclick="selectOption(this)">
                    <span class="option-letter">D</span> [10, 1, 2, 3]
                </div>
            </div>
            <button class="quiz-check-btn" onclick="checkQuiz('quiz-arr-4', 'b')" disabled>Check Answer</button>
            <div class="quiz-feedback" id="feedback-quiz-arr-4"></div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" onclick="navigateTo('arr-destruct')">‚Üê Destructuring</button>
            <button class="nav-btn" onclick="navigateTo('final-challenge')">Final Challenge ‚Üí</button>
        </div>
    </div>

    <!-- ==================== FINAL CHALLENGE ==================== -->
    <div class="section" id="section-final-challenge">
        <div class="section-header">
            <div class="section-badge">üèÜ Final Challenge</div>
            <h2>Put It All Together!</h2>
            <p>Time to combine everything you've learned. Complete these challenges to earn your badge!</p>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon green">üèÖ</div>
                <div><div class="card-title">Challenge 1: Student Grade System</div></div>
            </div>
            <div class="card-body">
                <p>Build a grade system using functions AND array methods:</p>
            </div>
        </div>

        <div class="playground">
            <div class="playground-header">
                <div class="playground-title">üèÖ Challenge 1: Student Grades</div>
                <button class="playground-run-btn" onclick="runPlayground('pg-challenge-1')">‚ñ∂ Run</button>
            </div>
            <textarea class="playground-editor" id="pg-challenge-1" style="min-height:220px;">const students = [
    { name: "Alice", scores: [85, 92, 78] },
    { name: "Bob",   scores: [65, 70, 60] },
    { name: "Carol", scores: [95, 98, 100] },
    { name: "Dave",  scores: [40, 55, 45] },
];

// 1. Create a function to calculate average
const average = (arr) => arr.reduce((sum, n) => sum + n, 0) / arr.length;

// 2. Create a function to get letter grade
const getGrade = (avg) => {
    if (avg >= 90) return "A";
    if (avg >= 80) return "B";
    if (avg >= 70) return "C";
    if (avg >= 60) return "D";
    return "F";
};

// 3. Use map to create report cards
const reports = students.map(s => {
    const avg = average(s.scores);
    return {
        name: s.name,
        average: avg.toFixed(1),
        grade: getGrade(avg),
    };
});

console.log("üìã Report Cards:");
reports.forEach(r => {
    console.log(`  ${r.name}: ${r.average} (${r.grade})`);
});

// 4. Filter only passing students (D or above)
const passing = reports.filter(r => r.grade !== "F");
console.log("\n‚úÖ Passing:", passing.map(r => r.name));

// 5. Find the class average using reduce
const classAvg = reports.reduce((sum, r) => sum + Number(r.average), 0) / reports.length;
console.log("üìä Class average:", classAvg.toFixed(1));</textarea>
            <div class="playground-output" id="output-pg-challenge-1">
                <div class="output-label">Output</div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon orange">üèÖ</div>
                <div><div class="card-title">Challenge 2: Shopping Cart</div></div>
            </div>
            <div class="card-body">
                <p>Build a shopping cart using functions, arrays, and destructuring:</p>
            </div>
        </div>

        <div class="playground">
            <div class="playground-header">
                <div class="playground-title">üèÖ Challenge 2: Shopping Cart</div>
                <button class="playground-run-btn" onclick="runPlayground('pg-challenge-2')">‚ñ∂ Run</button>
            </div>
            <textarea class="playground-editor" id="pg-challenge-2" style="min-height:240px;">// Shopping Cart System
const cart = [];

// Add item function
const addItem = (name, price, qty = 1) => {
    cart.push({ name, price, qty });
};

// Add some items
addItem("Laptop", 999, 1);
addItem("Mouse", 29, 2);
addItem("USB Cable", 9, 3);
addItem("Monitor", 349, 1);

console.log("üõí Cart Items:");
cart.forEach(({ name, price, qty }) => {
    console.log(`  ${name} x${qty} = $${(price * qty).toFixed(2)}`);
});

// Calculate total using reduce
const total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
console.log(`\nüí∞ Total: $${total.toFixed(2)}`);

// Find most expensive item
const [mostExpensive] = [...cart].sort((a, b) => b.price - a.price);
console.log(`üíé Most expensive: ${mostExpensive.name}`);

// Items under $50
const cheap = cart.filter(item => item.price < 50);
console.log(`üè∑Ô∏è Budget items: ${cheap.map(i => i.name).join(", ")}`);

// Apply 10% discount
const discounted = cart.map(item => ({
    ...item,
    price: +(item.price * 0.9).toFixed(2)
}));
const newTotal = discounted.reduce((s, i) => s + i.price * i.qty, 0);
console.log(`\nüéâ After 10% discount: $${newTotal.toFixed(2)}`);</textarea>
            <div class="playground-output" id="output-pg-challenge-2">
                <div class="output-label">Output</div>
            </div>
        </div>

        <div class="card" style="text-align:center;padding:40px;">
            <div style="font-size:3rem;margin-bottom:16px;">üéâüèÜüéâ</div>
            <h2 style="margin-bottom:12px;">Congratulations!</h2>
            <p style="color:var(--text-secondary);font-size:1.1rem;max-width:500px;margin:0 auto 24px;">
                You've completed the JavaScript Functions & Arrays course! You now understand:
            </p>
            <div class="achievements" style="justify-content:center;">
                <div class="achievement earned"><span class="badge-icon">üì¶</span> Functions</div>
                <div class="achievement earned"><span class="badge-icon">üîß</span> Arrow Functions</div>
                <div class="achievement earned"><span class="badge-icon">üìã</span> Arrays</div>
                <div class="achievement earned"><span class="badge-icon">üîÑ</span> CRUD Methods</div>
                <div class="achievement earned"><span class="badge-icon">‚ú®</span> map/filter/reduce</div>
                <div class="achievement earned"><span class="badge-icon">üì§</span> Destructuring</div>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" onclick="navigateTo('arr-pitfalls')">‚Üê Array Pitfalls</button>
            <button class="nav-btn" onclick="navigateTo('welcome')">üè† Back to Home</button>
        </div>
    </div>

</main>

<script>
    // ==================== APP STATE ====================
    const state = {
        currentSection: 'welcome',
        xp: 0,
        completedSections: new Set(),
        quizAnswered: new Set(),
    };

    const sections = [
        'welcome', 'func-basics', 'func-types', 'func-params', 'func-scope',
        'func-pitfalls', 'arr-basics', 'arr-crud', 'arr-iterate',
        'arr-transform', 'arr-destruct', 'arr-pitfalls', 'final-challenge'
    ];

    // ==================== PARTICLES ====================
    function createParticles() {
        const container = document.getElementById('particles');
        const colors = ['#4f8fff', '#a855f7', '#22c55e', '#eab308', '#06b6d4'];
        for (let i = 0; i < 30; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            particle.style.animationDuration = (15 + Math.random() * 20) + 's';
            particle.style.animationDelay = (Math.random() * 20) + 's';
            container.appendChild(particle);
        }
    }
    createParticles();

    // ==================== NAVIGATION ====================
    function navigateTo(sectionId) {
        // Mark current section as completed
        if (state.currentSection !== 'welcome') {
            state.completedSections.add(state.currentSection);
        }

        state.currentSection = sectionId;

        // Hide all sections
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));

        // Show target section
        const target = document.getElementById('section-' + sectionId);
        if (target) {
            target.classList.add('active');
        }

        // Update sidebar
        document.querySelectorAll('.sidebar-item').forEach(item => {
            item.classList.remove('active');
            const section = item.getAttribute('data-section');
            if (section === sectionId) {
                item.classList.add('active');
            }
            if (state.completedSections.has(section)) {
                item.classList.add('completed');
                if (!item.querySelector('.check-mark')) {
                    const check = document.createElement('span');
                    check.className = 'check-mark';
                    check.textContent = '‚úì';
                    item.appendChild(check);
                }
            }
        });

        // Update progress
        updateProgress();

        // Award XP for visiting new sections
        if (!state.completedSections.has(sectionId) && sectionId !== 'welcome') {
            awardXP(10);
        }

        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });

        // Close mobile sidebar
        document.getElementById('sidebar').classList.remove('open');
    }

    function updateProgress() {
        const total = sections.length - 1; // exclude welcome
        const completed = state.completedSections.size;
        const percent = (completed / total) * 100;
        document.getElementById('progressFill').style.width = percent + '%';
    }

    // ==================== XP SYSTEM ====================
    function awardXP(amount) {
        state.xp += amount;
        document.getElementById('totalXP').textContent = state.xp;

        // Show toast
        const toast = document.getElementById('xpToast');
        document.getElementById('xpAmount').textContent = amount;
        toast.classList.add('show');
        setTimeout(() => toast.classList.remove('show'), 2000);
    }

    // ==================== PLAYGROUND ====================
    function runPlayground(id) {
        const editor = document.getElementById(id);
        const outputDiv = document.getElementById('output-' + id);
        const code = editor.value;

        // Clear previous output
        outputDiv.innerHTML = '<div class="output-label">Output</div>';

        // Capture console.log
        const logs = [];
        const origLog = console.log;

        try {
            console.log = (...args) => {
                const formatted = args.map(arg => {
                    if (typeof arg === 'object') {
                        try { return JSON.stringify(arg); }
                        catch { return String(arg); }
                    }
                    return String(arg);
                }).join(' ');
                logs.push(formatted);
            };

            // Execute
            const fn = new Function(code);
            fn();

            // Restore
            console.log = origLog;

            // Display output
            if (logs.length > 0) {
                logs.forEach(log => {
                    const line = document.createElement('div');
                    line.className = 'output-line';
                    line.textContent = log;
                    outputDiv.appendChild(line);
                });
            } else {
                const line = document.createElement('div');
                line.className = 'output-line';
                line.textContent = '(no output)';
                line.style.color = 'var(--text-muted)';
                outputDiv.appendChild(line);
            }

            awardXP(5);
        } catch (err) {
            console.log = origLog;
            const errorLine = document.createElement('div');
            errorLine.className = 'output-error';
            errorLine.textContent = '‚ùå Error: ' + err.message;
            outputDiv.appendChild(errorLine);
        }
    }

    // ==================== QUIZ SYSTEM ====================
    function selectOption(el) {
        const quizId = el.getAttribute('data-quiz');
        const options = document.querySelectorAll(`.quiz-option[data-quiz="${quizId}"]`);
        options.forEach(o => o.classList.remove('selected'));
        el.classList.add('selected');

        // Enable check button
        const btn = el.closest('.quiz-container').querySelector('.quiz-check-btn');
        btn.disabled = false;
    }

    function checkQuiz(quizId, correctAnswer) {
        if (state.quizAnswered.has(quizId)) return;

        const selected = document.querySelector(`.quiz-option[data-quiz="${quizId}"].selected`);
        if (!selected) return;

        const userAnswer = selected.getAttribute('data-value');
        const feedback = document.getElementById('feedback-' + quizId);
        const options = document.querySelectorAll(`.quiz-option[data-quiz="${quizId}"]`);

        state.quizAnswered.add(quizId);

        // Highlight correct/incorrect
        options.forEach(o => {
            o.style.pointerEvents = 'none';
            if (o.getAttribute('data-value') === correctAnswer) {
                o.classList.add('correct');
            } else if (o.classList.contains('selected') && o.getAttribute('data-value') !== correctAnswer) {
                o.classList.add('incorrect');
            }
        });

        // Explanations
        const explanations = {
            'quiz-func-1': 'With curly braces <code>{}</code> in an arrow function, you must explicitly use <code>return</code>. Without it, the function returns <code>undefined</code>. The template literal is created but never returned!',
            'quiz-func-2': 'Only function declarations are hoisted. Function expressions and arrow functions stored in <code>const</code>/<code>let</code> cannot be used before their definition.',
            'quiz-arr-1': '<code>.map()</code> transforms each element. <code>x > 1</code> returns a boolean, so map returns an array of booleans. To get <code>[2, 3]</code>, you would use <code>.filter()</code>!',
            'quiz-arr-2': '<code>.filter()</code> always returns a NEW array and never modifies the original. <code>push</code>, <code>splice</code>, and <code>sort</code> all mutate the original array.',
            'quiz-arr-3': 'The empty slot (comma with nothing) skips index 1 (value 2). So <code>a = 1</code> (index 0) and <code>b = 3</code> (index 2).',
            'quiz-arr-4': 'The initial value is 10. Then: 10+1=11, 11+2=13, 13+3=16. The second argument to reduce sets the starting accumulator value!',
        };

        if (userAnswer === correctAnswer) {
            feedback.className = 'quiz-feedback show correct';
            feedback.innerHTML = `‚úÖ Correct! +20 XP<div class="quiz-explanation">${explanations[quizId] || ''}</div>`;
            awardXP(20);
        } else {
            feedback.className = 'quiz-feedback show incorrect';
            feedback.innerHTML = `‚ùå Not quite!<div class="quiz-explanation">${explanations[quizId] || ''}</div>`;
            awardXP(5); // participation XP
        }

        // Disable button
        const btn = document.querySelector(`#${quizId} .quiz-check-btn`);
        btn.disabled = true;
        btn.textContent = 'Answered';
    }

    // ==================== LIVE ARRAY INTERACTIVE ====================
    let liveArrayData = ['üçé', 'üçå', 'üçá'];
    const emojis = ['üçï', 'üåÆ', 'üç©', 'üçî', 'üé∏', 'üöÄ', 'üíé', 'üéÆ', '‚ö°', 'üåà'];
    const starEmojis = ['‚≠ê', 'üåü', 'üí´', '‚ú®', 'üåô', '‚òÄÔ∏è'];

    const bgColors = [
        'linear-gradient(135deg, #4f8fff, #3b6fdf)',
        'linear-gradient(135deg, #a855f7, #8b3fd4)',
        'linear-gradient(135deg, #22c55e, #16a34a)',
        'linear-gradient(135deg, #f97316, #ea580c)',
        'linear-gradient(135deg, #ef4444, #dc2626)',
        'linear-gradient(135deg, #06b6d4, #0891b2)',
        'linear-gradient(135deg, #ec4899, #db2777)',
        'linear-gradient(135deg, #eab308, #ca8a04)',
    ];

    function renderLiveArray() {
        const container = document.getElementById('liveArray');
        if (!container) return;
        container.innerHTML = '';

        if (liveArrayData.length === 0) {
            container.innerHTML = '<span style="color:var(--text-muted);font-style:italic;">[ empty array ]</span>';
            return;
        }

        const bracket1 = document.createElement('span');
        bracket1.className = 'array-bracket';
        bracket1.textContent = '[';
        bracket1.style.fontSize = '1.5rem';
        container.appendChild(bracket1);

        liveArrayData.forEach((item, i) => {
            const el = document.createElement('div');
            el.className = 'live-element';
            el.style.background = bgColors[i % bgColors.length];
            el.innerHTML = `<span class="idx">[${i}]</span>${item}`;
            container.appendChild(el);

            if (i < liveArrayData.length - 1) {
                const comma = document.createElement('span');
                comma.className = 'array-comma';
                comma.textContent = ',';
                container.appendChild(comma);
            }
        });

        const bracket2 = document.createElement('span');
        bracket2.className = 'array-bracket';
        bracket2.textContent = ']';
        bracket2.style.fontSize = '1.5rem';
        container.appendChild(bracket2);
    }

    function liveArrayAction(action) {
        const result = document.getElementById('liveResult');
        let msg = '';

        switch (action) {
            case 'push':
                const pushItem = emojis[Math.floor(Math.random() * emojis.length)];
                liveArrayData.push(pushItem);
                msg = `push("${pushItem}") ‚Üí length is now ${liveArrayData.length}`;
                break;
            case 'pop':
                if (liveArrayData.length > 0) {
                    const popped = liveArrayData.pop();
                    msg = `pop() ‚Üí removed "${popped}"`;
                } else {
                    msg = 'pop() ‚Üí array is empty! Returns undefined';
                }
                break;
            case 'unshift':
                const unshiftItem = starEmojis[Math.floor(Math.random() * starEmojis.length)];
                liveArrayData.unshift(unshiftItem);
                msg = `unshift("${unshiftItem}") ‚Üí length is now ${liveArrayData.length}`;
                break;
            case 'shift':
                if (liveArrayData.length > 0) {
                    const shifted = liveArrayData.shift();
                    msg = `shift() ‚Üí removed "${shifted}"`;
                } else {
                    msg = 'shift() ‚Üí array is empty! Returns undefined';
                }
                break;
            case 'reset':
                liveArrayData = ['üçé', 'üçå', 'üçá'];
                msg = 'Reset to original!';
                break;
        }

        renderLiveArray();
        if (result) {
            result.textContent = msg;
        }
    }

    // Initial render
    setTimeout(renderLiveArray, 100);

    // ==================== MOBILE MENU ====================
    document.getElementById('mobileMenuBtn').addEventListener('click', () => {
        document.getElementById('sidebar').classList.toggle('open');
    });

    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', (e) => {
        const sidebar = document.getElementById('sidebar');
        const menuBtn = document.getElementById('mobileMenuBtn');
        if (!sidebar.contains(e.target) && !menuBtn.contains(e.target)) {
            sidebar.classList.remove('open');
        }
    });

    // ==================== COPY CODE ====================
    document.querySelectorAll('.code-copy-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const codeBlock = btn.closest('.code-block').querySelector('.code-content');
            navigator.clipboard.writeText(codeBlock.textContent);
            btn.textContent = 'Copied!';
            setTimeout(() => btn.textContent = 'Copy', 1500);
        });
    });

    // ==================== KEYBOARD SHORTCUTS ====================
    document.addEventListener('keydown', (e) => {
        if (e.target.tagName === 'TEXTAREA') {
            // Ctrl/Cmd + Enter to run playground
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                e.preventDefault();
                const playgroundId = e.target.id;
                if (playgroundId) {
                    runPlayground(playgroundId);
                }
            }
            // Tab for indentation
            if (e.key === 'Tab') {
                e.preventDefault();
                const start = e.target.selectionStart;
                const end = e.target.selectionEnd;
                e.target.value = e.target.value.substring(0, start) + '    ' + e.target.value.substring(end);
                e.target.selectionStart = e.target.selectionEnd = start + 4;
            }
        }
    });

    // Initialize
    updateProgress();
</script>
</body>
</html>