<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîÑ JS Loops Master - Interactive Learning</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Poppins:wght@400;600;800&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-dark: #0f0f23;
            --bg-card: #1a1a2e;
            --bg-code: #16213e;
            --accent-blue: #4fc3f7;
            --accent-green: #66bb6a;
            --accent-orange: #ffa726;
            --accent-pink: #f06292;
            --accent-purple: #ab47bc;
            --accent-red: #ef5350;
            --accent-yellow: #ffee58;
            --text-primary: #e0e0e0;
            --text-secondary: #9e9e9e;
            --border-color: #2a2a4a;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-dark); }
        ::-webkit-scrollbar-thumb { background: var(--accent-blue); border-radius: 4px; }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            padding: 30px 20px;
            text-align: center;
            border-bottom: 3px solid var(--accent-blue);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%234fc3f7' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .header h1 {
            font-size: 2.5em;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.1em;
            margin-top: 10px;
            position: relative;
        }

        /* Progress Bar */
        .progress-container {
            background: var(--bg-card);
            padding: 15px 30px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--border-color);
        }

        .progress-bar {
            height: 8px;
            background: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));
            border-radius: 4px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .xp-badge {
            background: linear-gradient(135deg, var(--accent-orange), var(--accent-pink));
            padding: 3px 12px;
            border-radius: 20px;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            overflow-x: auto;
            background: var(--bg-card);
            padding: 10px 20px;
            gap: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .nav-tab {
            padding: 10px 20px;
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 25px;
            color: var(--text-secondary);
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-size: 0.9em;
            white-space: nowrap;
            transition: all 0.3s;
        }

        .nav-tab:hover {
            border-color: var(--accent-blue);
            color: var(--accent-blue);
        }

        .nav-tab.active {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            color: #000;
            font-weight: 600;
        }

        .nav-tab .tab-icon {
            margin-right: 6px;
        }

        /* Main Content */
        .main-content {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(79, 195, 247, 0.1);
        }

        .card h2 {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: var(--accent-blue);
        }

        .card h3 {
            font-size: 1.2em;
            margin: 20px 0 10px;
            color: var(--accent-orange);
        }

        /* Analogy Box */
        .analogy-box {
            background: linear-gradient(135deg, rgba(171, 71, 188, 0.1), rgba(79, 195, 247, 0.1));
            border-left: 4px solid var(--accent-purple);
            padding: 20px;
            border-radius: 0 12px 12px 0;
            margin: 15px 0;
        }

        .analogy-box .emoji {
            font-size: 2em;
            margin-bottom: 10px;
            display: block;
        }

        /* Code Block */
        .code-block {
            background: var(--bg-code);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Fira Code', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            border: 1px solid var(--border-color);
            position: relative;
        }

        .code-block .code-label {
            position: absolute;
            top: 8px;
            right: 12px;
            font-size: 0.7em;
            color: var(--text-secondary);
            font-family: 'Poppins', sans-serif;
            background: var(--bg-dark);
            padding: 2px 10px;
            border-radius: 10px;
        }

        .code-block .line {
            display: block;
            padding: 2px 0;
        }

        .keyword { color: var(--accent-pink); }
        .string { color: var(--accent-green); }
        .number { color: var(--accent-orange); }
        .comment { color: #6a737d; font-style: italic; }
        .function { color: var(--accent-yellow); }
        .variable { color: var(--accent-blue); }
        .operator { color: var(--accent-pink); }
        .bracket { color: var(--text-secondary); }
        .method { color: #82aaff; }
        .property { color: var(--accent-orange); }

        /* Visual Diagram */
        .visual-diagram {
            background: var(--bg-code);
            border-radius: 12px;
            padding: 25px;
            margin: 15px 0;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .flow-steps {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .flow-step {
            background: var(--bg-dark);
            padding: 12px 20px;
            border-radius: 10px;
            border: 2px solid var(--accent-blue);
            font-size: 0.9em;
            min-width: 100px;
            transition: all 0.3s;
        }

        .flow-step.active-step {
            background: var(--accent-blue);
            color: #000;
            font-weight: 600;
            transform: scale(1.05);
        }

        .flow-arrow {
            color: var(--accent-blue);
            font-size: 1.5em;
        }

        /* Loop Animation */
        .loop-animation {
            background: var(--bg-code);
            border-radius: 12px;
            padding: 25px;
            margin: 15px 0;
            border: 1px solid var(--border-color);
        }

        .animation-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .anim-btn {
            padding: 8px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 0.85em;
            transition: all 0.3s;
        }

        .anim-btn.play { background: var(--accent-green); color: #000; }
        .anim-btn.reset { background: var(--accent-orange); color: #000; }
        .anim-btn.step { background: var(--accent-blue); color: #000; }

        .anim-btn:hover { transform: scale(1.05); }

        .animation-display {
            display: flex;
            gap: 15px;
            align-items: flex-start;
            flex-wrap: wrap;
        }

        .anim-code-panel {
            flex: 1;
            min-width: 250px;
            background: var(--bg-dark);
            border-radius: 8px;
            padding: 15px;
            font-family: 'Fira Code', monospace;
            font-size: 0.85em;
        }

        .anim-code-line {
            padding: 4px 8px;
            border-radius: 4px;
            transition: background 0.3s;
        }

        .anim-code-line.highlight {
            background: rgba(79, 195, 247, 0.2);
            border-left: 3px solid var(--accent-blue);
        }

        .anim-output-panel {
            flex: 1;
            min-width: 200px;
        }

        .anim-variables {
            background: var(--bg-dark);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .anim-variables h4 {
            color: var(--accent-orange);
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .var-display {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 5px 0;
            font-family: 'Fira Code', monospace;
            font-size: 0.9em;
        }

        .var-name {
            color: var(--accent-blue);
        }

        .var-value {
            background: var(--accent-blue);
            color: #000;
            padding: 2px 12px;
            border-radius: 6px;
            font-weight: 600;
            min-width: 30px;
            text-align: center;
        }

        .anim-console {
            background: var(--bg-dark);
            border-radius: 8px;
            padding: 15px;
            min-height: 100px;
            max-height: 200px;
            overflow-y: auto;
        }

        .anim-console h4 {
            color: var(--accent-green);
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .console-line {
            font-family: 'Fira Code', monospace;
            font-size: 0.85em;
            color: var(--accent-green);
            padding: 2px 0;
        }

        /* Interactive Code Editor */
        .code-editor {
            margin: 15px 0;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .editor-header {
            background: var(--bg-dark);
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .editor-dots {
            display: flex;
            gap: 6px;
        }

        .editor-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .editor-dot.red { background: var(--accent-red); }
        .editor-dot.yellow { background: var(--accent-yellow); }
        .editor-dot.green { background: var(--accent-green); }

        .editor-title {
            color: var(--text-secondary);
            font-size: 0.85em;
        }

        .code-textarea {
            width: 100%;
            min-height: 150px;
            background: var(--bg-code);
            color: var(--text-primary);
            border: none;
            padding: 15px;
            font-family: 'Fira Code', monospace;
            font-size: 0.9em;
            resize: vertical;
            outline: none;
            line-height: 1.6;
        }

        .editor-footer {
            background: var(--bg-dark);
            padding: 10px 15px;
            display: flex;
            gap: 10px;
        }

        .run-btn {
            padding: 8px 25px;
            background: var(--accent-green);
            border: none;
            border-radius: 8px;
            color: #000;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s;
        }

        .run-btn:hover { transform: scale(1.05); }

        .clear-btn {
            padding: 8px 25px;
            background: var(--accent-red);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s;
        }

        .output-area {
            background: var(--bg-code);
            padding: 15px;
            min-height: 60px;
            font-family: 'Fira Code', monospace;
            font-size: 0.85em;
            border-top: 1px solid var(--border-color);
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }

        .output-area .output-line {
            color: var(--accent-green);
        }

        .output-area .error-line {
            color: var(--accent-red);
        }

        /* Quiz */
        .quiz-container {
            background: var(--bg-code);
            border-radius: 12px;
            padding: 25px;
            margin: 15px 0;
            border: 2px solid var(--accent-purple);
        }

        .quiz-question {
            font-size: 1.1em;
            margin-bottom: 15px;
            color: var(--accent-yellow);
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            padding: 12px 20px;
            background: var(--bg-dark);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Fira Code', monospace;
            font-size: 0.9em;
            color: var(--text-primary);
        }

        .quiz-option:hover {
            border-color: var(--accent-blue);
            background: rgba(79, 195, 247, 0.1);
        }

        .quiz-option.correct {
            border-color: var(--accent-green);
            background: rgba(102, 187, 106, 0.2);
        }

        .quiz-option.wrong {
            border-color: var(--accent-red);
            background: rgba(239, 83, 80, 0.2);
        }

        .quiz-option.disabled {
            pointer-events: none;
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            display: none;
        }

        .quiz-feedback.show { display: block; }
        .quiz-feedback.correct {
            background: rgba(102, 187, 106, 0.15);
            border-left: 4px solid var(--accent-green);
        }
        .quiz-feedback.wrong {
            background: rgba(239, 83, 80, 0.15);
            border-left: 4px solid var(--accent-red);
        }

        /* Pitfall Box */
        .pitfall-box {
            background: rgba(239, 83, 80, 0.1);
            border-left: 4px solid var(--accent-red);
            padding: 20px;
            border-radius: 0 12px 12px 0;
            margin: 15px 0;
        }

        .pitfall-box h4 {
            color: var(--accent-red);
            margin-bottom: 8px;
        }

        /* Tip Box */
        .tip-box {
            background: rgba(102, 187, 106, 0.1);
            border-left: 4px solid var(--accent-green);
            padding: 20px;
            border-radius: 0 12px 12px 0;
            margin: 15px 0;
        }

        .tip-box h4 {
            color: var(--accent-green);
            margin-bottom: 8px;
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.9em;
        }

        .comparison-table th {
            background: var(--bg-code);
            color: var(--accent-blue);
            padding: 12px 15px;
            text-align: left;
            border-bottom: 2px solid var(--accent-blue);
        }

        .comparison-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .comparison-table tr:hover td {
            background: rgba(79, 195, 247, 0.05);
        }

        /* Exercise */
        .exercise-box {
            background: linear-gradient(135deg, rgba(79, 195, 247, 0.1), rgba(171, 71, 188, 0.1));
            border: 2px solid var(--accent-blue);
            border-radius: 12px;
            padding: 25px;
            margin: 15px 0;
        }

        .exercise-box h3 {
            color: var(--accent-blue);
            margin-bottom: 10px;
        }

        .exercise-box .difficulty {
            display: inline-block;
            padding: 3px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .difficulty.easy { background: var(--accent-green); color: #000; }
        .difficulty.medium { background: var(--accent-orange); color: #000; }
        .difficulty.hard { background: var(--accent-red); color: #fff; }

        /* Badge */
        .badge-earned {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, var(--accent-orange), var(--accent-pink));
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: 600;
            color: #fff;
            font-size: 0.9em;
            animation: badgePop 0.5s ease;
        }

        @keyframes badgePop {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* Iteration Visual */
        .iteration-visual {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin: 15px 0;
            justify-content: center;
        }

        .iter-item {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-dark);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-family: 'Fira Code', monospace;
            font-weight: 600;
            transition: all 0.3s;
        }

        .iter-item.visited {
            border-color: var(--accent-green);
            background: rgba(102, 187, 106, 0.2);
            color: var(--accent-green);
        }

        .iter-item.current {
            border-color: var(--accent-blue);
            background: var(--accent-blue);
            color: #000;
            transform: scale(1.15);
        }

        .iter-item.skipped {
            border-color: var(--accent-red);
            background: rgba(239, 83, 80, 0.2);
            color: var(--accent-red);
            text-decoration: line-through;
        }

        /* Checklist */
        .checklist {
            list-style: none;
            padding: 0;
        }

        .checklist li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checklist li::before {
            content: '‚úÖ';
        }

        /* Responsive */
        @media (max-width: 600px) {
            .header h1 { font-size: 1.8em; }
            .card { padding: 20px; }
            .animation-display { flex-direction: column; }
            .nav-tabs { padding: 8px 10px; }
            .nav-tab { padding: 8px 14px; font-size: 0.8em; }
        }

        /* Animation for sections */
        .section.active {
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Confetti */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 10px;
            top: -10px;
            animation: confettiFall 3s ease-in forwards;
        }

        @keyframes confettiFall {
            to {
                top: 110%;
                transform: rotate(720deg);
            }
        }

        .section-badge {
            float: right;
            font-size: 0.7em;
            padding: 4px 12px;
            background: var(--accent-purple);
            color: white;
            border-radius: 20px;
        }

        /* Array visual boxes */
        .array-visual {
            display: flex;
            gap: 3px;
            margin: 10px 0;
            flex-wrap: wrap;
        }

        .array-cell {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .array-cell .index {
            font-size: 0.7em;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .array-cell .value {
            width: 55px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-dark);
            border: 2px solid var(--accent-blue);
            border-radius: 8px;
            font-family: 'Fira Code', monospace;
            font-size: 0.85em;
        }

        /* Score popup */
        .score-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--bg-card);
            padding: 40px;
            border-radius: 20px;
            border: 2px solid var(--accent-blue);
            text-align: center;
            z-index: 1001;
            display: none;
            box-shadow: 0 0 60px rgba(79, 195, 247, 0.3);
        }

        .score-popup.show { display: block; animation: badgePop 0.5s ease; }
        .score-popup .close-popup {
            margin-top: 20px;
            padding: 10px 30px;
            background: var(--accent-blue);
            border: none;
            border-radius: 10px;
            color: #000;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
        }

        .overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            display: none;
        }

        .overlay.show { display: block; }

        /* Speed control */
        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .speed-control input[type="range"] {
            width: 100px;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="header">
        <h1>üîÑ JavaScript Loops Master</h1>
        <p>Learn loops through visual examples, animations & interactive exercises</p>
    </header>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text">
            <span id="progressLabel">Section 0 of 7</span>
            <span class="xp-badge" id="xpBadge">‚≠ê 0 XP</span>
        </div>
    </div>

    <!-- Navigation Tabs -->
    <nav class="nav-tabs" id="navTabs">
        <button class="nav-tab active" data-section="intro" onclick="showSection('intro')">
            <span class="tab-icon">üìñ</span>Intro
        </button>
        <button class="nav-tab" data-section="for-loop" onclick="showSection('for-loop')">
            <span class="tab-icon">üîÅ</span>For Loop
        </button>
        <button class="nav-tab" data-section="while-loop" onclick="showSection('while-loop')">
            <span class="tab-icon">‚è≥</span>While/Do-While
        </button>
        <button class="nav-tab" data-section="forin-forof" onclick="showSection('forin-forof')">
            <span class="tab-icon">üîç</span>For...in/of
        </button>
        <button class="nav-tab" data-section="break-continue" onclick="showSection('break-continue')">
            <span class="tab-icon">‚õî</span>Break/Continue
        </button>
        <button class="nav-tab" data-section="best-practices" onclick="showSection('best-practices')">
            <span class="tab-icon">‚ú®</span>Best Practices
        </button>
        <button class="nav-tab" data-section="final-quiz" onclick="showSection('final-quiz')">
            <span class="tab-icon">üèÜ</span>Final Quiz
        </button>
    </nav>

    <!-- Main Content -->
    <main class="main-content">

        <!-- SECTION 1: INTRO -->
        <div class="section active" id="section-intro">
            <div class="card">
                <h2>ü§î What Are Loops?</h2>
                <p>Loops let you <strong>repeat code</strong> multiple times without writing it over and over. They're one of the most powerful tools in programming!</p>

                <div class="analogy-box">
                    <span class="emoji">üèÉ‚Äç‚ôÇÔ∏è</span>
                    <strong>Real-Life Analogy:</strong> Imagine you're a coach telling a runner to lap the track. Instead of saying "Run lap 1, run lap 2, run lap 3..." you simply say: <strong>"Run 10 laps!"</strong> ‚Äî That's a loop!
                </div>

                <h3>Without Loops (Repetitive üò©)</h3>
                <div class="code-block">
                    <span class="code-label">JavaScript</span>
                    <span class="line"><span class="variable">console</span>.<span class="method">log</span>(<span class="string">"Hello Student 1"</span>);</span>
                    <span class="line"><span class="variable">console</span>.<span class="method">log</span>(<span class="string">"Hello Student 2"</span>);</span>
                    <span class="line"><span class="variable">console</span>.<span class="method">log</span>(<span class="string">"Hello Student 3"</span>);</span>
                    <span class="line"><span class="variable">console</span>.<span class="method">log</span>(<span class="string">"Hello Student 4"</span>);</span>
                    <span class="line"><span class="variable">console</span>.<span class="method">log</span>(<span class="string">"Hello Student 5"</span>);</span>
                    <span class="line"><span class="comment">// Imagine 1000 students... üò±</span></span>
                </div>

                <h3>With a Loop (Clean üòé)</h3>
                <div class="code-block">
                    <span class="code-label">JavaScript</span>
                    <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">1</span>; <span class="variable">i</span> <span class="operator">&lt;=</span> <span class="number">1000</span>; <span class="variable">i</span><span class="operator">++</span>) {</span>
                    <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="string">"Hello Student "</span> + <span class="variable">i</span>);</span>
                    <span class="line">}</span>
                    <span class="line"><span class="comment">// Just 3 lines! üéâ</span></span>
                </div>

                <h3>Types of Loops in JavaScript</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Loop Type</th>
                            <th>Best For</th>
                            <th>Know Count?</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>for</code></td>
                            <td>When you know how many times</td>
                            <td>‚úÖ Yes</td>
                        </tr>
                        <tr>
                            <td><code>while</code></td>
                            <td>When you don't know how many times</td>
                            <td>‚ùå No</td>
                        </tr>
                        <tr>
                            <td><code>do...while</code></td>
                            <td>Must run at least once</td>
                            <td>‚ùå No</td>
                        </tr>
                        <tr>
                            <td><code>for...in</code></td>
                            <td>Object properties (keys)</td>
                            <td>Auto</td>
                        </tr>
                        <tr>
                            <td><code>for...of</code></td>
                            <td>Iterable values (arrays, strings)</td>
                            <td>Auto</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Quick Quiz -->
            <div class="card">
                <h2>üß† Quick Check</h2>
                <div class="quiz-container" id="quiz-intro-1">
                    <div class="quiz-question">What is the main purpose of a loop?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkQuiz('quiz-intro-1', this, false)">To make code run slower</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-intro-1', this, true)">To repeat code without writing it multiple times</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-intro-1', this, false)">To delete variables</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-intro-1', this, false)">To create functions</div>
                    </div>
                    <div class="quiz-feedback" id="quiz-intro-1-feedback"></div>
                </div>
            </div>
        </div>

        <!-- SECTION 2: FOR LOOP -->
        <div class="section" id="section-for-loop">
            <div class="card">
                <h2>üîÅ The <code>for</code> Loop</h2>
                <p>The <code>for</code> loop is the most common loop. Use it when you <strong>know exactly how many times</strong> you want to repeat.</p>

                <h3>Anatomy of a For Loop</h3>
                <div class="visual-diagram">
                    <div class="code-block" style="text-align: left;">
                        <span class="line"><span class="keyword">for</span> (<span class="variable" style="border-bottom: 2px solid var(--accent-green)">let i = 0</span>; <span class="variable" style="border-bottom: 2px solid var(--accent-orange)">i &lt; 5</span>; <span class="variable" style="border-bottom: 2px solid var(--accent-pink)">i++</span>) {</span>
                        <span class="line">  <span class="comment">// code to repeat</span></span>
                        <span class="line">}</span>
                    </div>
                    <div style="text-align: left; margin-top: 15px; font-size: 0.9em;">
                        <p><span style="color: var(--accent-green)">‚ñ†</span> <strong>Initialization:</strong> Where does the counter start? (<code>let i = 0</code>)</p>
                        <p><span style="color: var(--accent-orange)">‚ñ†</span> <strong>Condition:</strong> Keep going while this is true (<code>i &lt; 5</code>)</p>
                        <p><span style="color: var(--accent-pink)">‚ñ†</span> <strong>Update:</strong> Change counter after each loop (<code>i++</code>)</p>
                    </div>
                </div>

                <h3>üîÑ How It Flows</h3>
                <div class="flow-steps" id="forLoopFlow">
                    <div class="flow-step" id="flow-init">1Ô∏è‚É£ Initialize<br><small>let i = 0</small></div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-step" id="flow-check">2Ô∏è‚É£ Check Condition<br><small>i &lt; 5 ?</small></div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-step" id="flow-body">3Ô∏è‚É£ Run Body<br><small>console.log(i)</small></div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-step" id="flow-update">4Ô∏è‚É£ Update<br><small>i++</small></div>
                    <span class="flow-arrow">‚Ü©Ô∏è</span>
                    <div class="flow-step" style="border-color: var(--accent-red);">5Ô∏è‚É£ Condition false?<br><small>EXIT ‚úã</small></div>
                </div>

                <h3>üé¨ Live Animation ‚Äî Watch the Loop Run!</h3>
                <div class="loop-animation">
                    <div class="speed-control">
                        <label>Speed:</label>
                        <input type="range" min="200" max="2000" value="800" id="forLoopSpeed">
                        <span id="forSpeedLabel">800ms</span>
                    </div>
                    <div class="animation-controls">
                        <button class="anim-btn play" onclick="runForLoopAnimation()">‚ñ∂ Play</button>
                        <button class="anim-btn step" onclick="stepForLoopAnimation()">‚è≠ Step</button>
                        <button class="anim-btn reset" onclick="resetForLoopAnimation()">üîÑ Reset</button>
                    </div>
                    <div class="animation-display">
                        <div class="anim-code-panel" id="forAnimCode">
                            <div class="anim-code-line" id="for-line-0"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> &lt; <span class="number">5</span>; <span class="variable">i</span>++) {</div>
                            <div class="anim-code-line" id="for-line-1">&nbsp;&nbsp;<span class="variable">console</span>.<span class="method">log</span>(<span class="string">"Count:"</span>, <span class="variable">i</span>);</div>
                            <div class="anim-code-line" id="for-line-2">}</div>
                        </div>
                        <div class="anim-output-panel">
                            <div class="anim-variables">
                                <h4>üìä Variables</h4>
                                <div class="var-display">
                                    <span class="var-name">i =</span>
                                    <span class="var-value" id="forVarI">-</span>
                                </div>
                                <div class="var-display">
                                    <span class="var-name">i &lt; 5 =</span>
                                    <span class="var-value" id="forCondition" style="background: var(--text-secondary)">-</span>
                                </div>
                            </div>
                            <div class="anim-console">
                                <h4>üì∫ Console Output</h4>
                                <div id="forConsoleOutput"></div>
                            </div>
                        </div>
                    </div>
                    <div class="iteration-visual" id="forIterVisual">
                        <div class="iter-item" data-i="0">0</div>
                        <div class="iter-item" data-i="1">1</div>
                        <div class="iter-item" data-i="2">2</div>
                        <div class="iter-item" data-i="3">3</div>
                        <div class="iter-item" data-i="4">4</div>
                    </div>
                </div>
            </div>

            <!-- More For Loop Examples -->
            <div class="card">
                <h2>üìù More For Loop Examples</h2>

                <h3>Counting Backwards</h3>
                <div class="code-block">
                    <span class="code-label">Countdown</span>
                    <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">10</span>; <span class="variable">i</span> <span class="operator">>=</span> <span class="number">1</span>; <span class="variable">i</span><span class="operator">--</span>) {</span>
                    <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">i</span>);</span>
                    <span class="line">}</span>
                    <span class="line"><span class="variable">console</span>.<span class="method">log</span>(<span class="string">"üöÄ Liftoff!"</span>);</span>
                    <span class="line"><span class="comment">// 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, üöÄ Liftoff!</span></span>
                </div>

                <h3>Skip by 2 (Even Numbers)</h3>
                <div class="code-block">
                    <span class="code-label">Step by 2</span>
                    <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> <span class="operator">&lt;=</span> <span class="number">20</span>; <span class="variable">i</span> <span class="operator">+=</span> <span class="number">2</span>) {</span>
                    <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">i</span>); <span class="comment">// 0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20</span></span>
                    <span class="line">}</span>
                </div>

                <h3>Looping Through an Array</h3>
                <div class="code-block">
                    <span class="code-label">Array Loop</span>
                    <span class="line"><span class="keyword">const</span> <span class="variable">fruits</span> = [<span class="string">"üçé"</span>, <span class="string">"üçå"</span>, <span class="string">"üçá"</span>, <span class="string">"üçä"</span>];</span>
                    <span class="line"></span>
                    <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> <span class="operator">&lt;</span> <span class="variable">fruits</span>.<span class="property">length</span>; <span class="variable">i</span><span class="operator">++</span>) {</span>
                    <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">fruits</span>[<span class="variable">i</span>]);</span>
                    <span class="line">}</span>
                </div>

                <div class="array-visual">
                    <div class="array-cell"><span class="index">[0]</span><span class="value">üçé</span></div>
                    <div class="array-cell"><span class="index">[1]</span><span class="value">üçå</span></div>
                    <div class="array-cell"><span class="index">[2]</span><span class="value">üçá</span></div>
                    <div class="array-cell"><span class="index">[3]</span><span class="value">üçä</span></div>
                </div>

                <h3>Nested Loops (Loop inside a Loop)</h3>
                <div class="code-block">
                    <span class="code-label">Multiplication Table</span>
                    <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">row</span> = <span class="number">1</span>; <span class="variable">row</span> <span class="operator">&lt;=</span> <span class="number">3</span>; <span class="variable">row</span><span class="operator">++</span>) {</span>
                    <span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">col</span> = <span class="number">1</span>; <span class="variable">col</span> <span class="operator">&lt;=</span> <span class="number">3</span>; <span class="variable">col</span><span class="operator">++</span>) {</span>
                    <span class="line">    <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">row</span> + <span class="string">" √ó "</span> + <span class="variable">col</span> + <span class="string">" = "</span> + (<span class="variable">row</span> * <span class="variable">col</span>));</span>
                    <span class="line">  }</span>
                    <span class="line">}</span>
                </div>

                <div class="analogy-box">
                    <span class="emoji">üè¢</span>
                    <strong>Nested Loop Analogy:</strong> It's like checking every room on every floor of a building. The outer loop is each floor, and the inner loop checks every room on that floor.
                </div>
            </div>

            <!-- Exercise -->
            <div class="card">
                <h2>üí™ Try It Yourself!</h2>
                <div class="exercise-box">
                    <h3>üéØ Exercise 1: Sum Numbers</h3>
                    <span class="difficulty easy">Easy</span>
                    <p>Write a for loop that adds up all numbers from 1 to 10 and logs the total. (Answer: 55)</p>
                </div>
                <div class="code-editor">
                    <div class="editor-header">
                        <div class="editor-dots">
                            <span class="editor-dot red"></span>
                            <span class="editor-dot yellow"></span>
                            <span class="editor-dot green"></span>
                        </div>
                        <span class="editor-title">exercise1.js</span>
                    </div>
                    <textarea class="code-textarea" id="exercise1">// Sum numbers 1 to 10
let total = 0;

for (let i = 1; i <= 10; i++) {
  // Add i to total here
  
}

console.log("Total:", total);</textarea>
                    <div class="editor-footer">
                        <button class="run-btn" onclick="runCode('exercise1')">‚ñ∂ Run Code</button>
                        <button class="clear-btn" onclick="clearOutput('exercise1')">üóë Clear</button>
                    </div>
                    <div class="output-area" id="exercise1-output"></div>
                </div>

                <div class="exercise-box">
                    <h3>üéØ Exercise 2: FizzBuzz</h3>
                    <span class="difficulty medium">Medium</span>
                    <p>Loop from 1 to 20. Print "Fizz" for multiples of 3, "Buzz" for multiples of 5, "FizzBuzz" for both, otherwise the number.</p>
                </div>
                <div class="code-editor">
                    <div class="editor-header">
                        <div class="editor-dots">
                            <span class="editor-dot red"></span>
                            <span class="editor-dot yellow"></span>
                            <span class="editor-dot green"></span>
                        </div>
                        <span class="editor-title">fizzbuzz.js</span>
                    </div>
                    <textarea class="code-textarea" id="exercise2">// FizzBuzz Challenge!
for (let i = 1; i <= 20; i++) {
  // Your code here
  
}</textarea>
                    <div class="editor-footer">
                        <button class="run-btn" onclick="runCode('exercise2')">‚ñ∂ Run Code</button>
                        <button class="clear-btn" onclick="clearOutput('exercise2')">üóë Clear</button>
                    </div>
                    <div class="output-area" id="exercise2-output"></div>
                </div>
            </div>

            <!-- Quiz -->
            <div class="card">
                <h2>üß† For Loop Quiz</h2>
                <div class="quiz-container" id="quiz-for-1">
                    <div class="quiz-question">What will this output?<br>
                    <code style="color: var(--accent-blue);">for (let i = 0; i < 3; i++) { console.log(i); }</code></div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkQuiz('quiz-for-1', this, false)">1, 2, 3</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-for-1', this, true)">0, 1, 2</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-for-1', this, false)">0, 1, 2, 3</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-for-1', this, false)">1, 2</div>
                    </div>
                    <div class="quiz-feedback" id="quiz-for-1-feedback"></div>
                </div>

                <div class="quiz-container" id="quiz-for-2" style="margin-top: 20px;">
                    <div class="quiz-question">How many times does this loop run?<br>
                    <code style="color: var(--accent-blue);">for (let i = 5; i >= 0; i--) { }</code></div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkQuiz('quiz-for-2', this, false)">5 times</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-for-2', this, true)">6 times</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-for-2', this, false)">4 times</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-for-2', this, false)">Infinite loop</div>
                    </div>
                    <div class="quiz-feedback" id="quiz-for-2-feedback"></div>
                </div>
            </div>
        </div>

        <!-- SECTION 3: WHILE & DO-WHILE -->
        <div class="section" id="section-while-loop">
            <div class="card">
                <h2>‚è≥ The <code>while</code> Loop</h2>
                <p>Use <code>while</code> when you <strong>don't know in advance</strong> how many times you need to repeat.</p>

                <div class="analogy-box">
                    <span class="emoji">üé∞</span>
                    <strong>Analogy:</strong> "Keep pulling the slot machine lever <em>while</em> you still have coins." You don't know how many times that will be!
                </div>

                <h3>Syntax</h3>
                <div class="code-block">
                    <span class="line"><span class="keyword">while</span> (<span class="variable">condition</span>) {</span>
                    <span class="line">  <span class="comment">// code runs while condition is TRUE</span></span>
                    <span class="line">  <span class="comment">// ‚ö†Ô∏è MUST update condition or infinite loop!</span></span>
                    <span class="line">}</span>
                </div>

                <h3>Example: Countdown</h3>
                <div class="code-block">
                    <span class="code-label">while loop</span>
                    <span class="line"><span class="keyword">let</span> <span class="variable">fuel</span> = <span class="number">5</span>;</span>
                    <span class="line"></span>
                    <span class="line"><span class="keyword">while</span> (<span class="variable">fuel</span> <span class="operator">></span> <span class="number">0</span>) {</span>
                    <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="string">"üöó Driving... Fuel:"</span>, <span class="variable">fuel</span>);</span>
                    <span class="line">  <span class="variable">fuel</span><span class="operator">--</span>; <span class="comment">// ‚Üê Essential! Decreases fuel</span></span>
                    <span class="line">}</span>
                    <span class="line"><span class="variable">console</span>.<span class="method">log</span>(<span class="string">"‚õΩ Out of fuel!"</span>);</span>
                </div>

                <h3>üé¨ While Loop Animation</h3>
                <div class="loop-animation">
                    <div class="animation-controls">
                        <button class="anim-btn play" onclick="runWhileLoopAnimation()">‚ñ∂ Play</button>
                        <button class="anim-btn reset" onclick="resetWhileLoopAnimation()">üîÑ Reset</button>
                    </div>
                    <div class="animation-display">
                        <div class="anim-code-panel" id="whileAnimCode">
                            <div class="anim-code-line" id="while-line-0"><span class="keyword">let</span> <span class="variable">fuel</span> = <span class="number">5</span>;</div>
                            <div class="anim-code-line" id="while-line-1"><span class="keyword">while</span> (<span class="variable">fuel</span> > <span class="number">0</span>) {</div>
                            <div class="anim-code-line" id="while-line-2">&nbsp;&nbsp;console.log(fuel);</div>
                            <div class="anim-code-line" id="while-line-3">&nbsp;&nbsp;fuel--;</div>
                            <div class="anim-code-line" id="while-line-4">}</div>
                        </div>
                        <div class="anim-output-panel">
                            <div class="anim-variables">
                                <h4>üìä Variables</h4>
                                <div class="var-display">
                                    <span class="var-name">fuel =</span>
                                    <span class="var-value" id="whileVarFuel">-</span>
                                </div>
                                <div class="var-display">
                                    <span class="var-name">fuel > 0 =</span>
                                    <span class="var-value" id="whileCondition" style="background: var(--text-secondary)">-</span>
                                </div>
                            </div>
                            <div class="anim-console">
                                <h4>üì∫ Console Output</h4>
                                <div id="whileConsoleOutput"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="pitfall-box">
                    <h4>‚ö†Ô∏è DANGER: Infinite Loop!</h4>
                    <p>If you forget to update the variable, the condition <em>never</em> becomes false and your browser will freeze!</p>
                    <div class="code-block">
                        <span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;</span>
                        <span class="line"><span class="keyword">while</span> (<span class="variable">x</span> <span class="operator">></span> <span class="number">0</span>) {</span>
                        <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">x</span>);</span>
                        <span class="line">  <span class="comment">// üò± FORGOT x-- ‚Üí INFINITE LOOP!</span></span>
                        <span class="line">}</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>üîÑ The <code>do...while</code> Loop</h2>
                <p>Like <code>while</code>, but the body runs <strong>at least once</strong> ‚Äî it checks the condition <em>after</em>.</p>

                <div class="analogy-box">
                    <span class="emoji">üçΩÔ∏è</span>
                    <strong>Analogy:</strong> "Try the food first, <em>then</em> decide if you want more." You always try at least one bite!
                </div>

                <div class="code-block">
                    <span class="code-label">do...while</span>
                    <span class="line"><span class="keyword">let</span> <span class="variable">answer</span>;</span>
                    <span class="line"></span>
                    <span class="line"><span class="keyword">do</span> {</span>
                    <span class="line">  <span class="variable">answer</span> = <span class="function">prompt</span>(<span class="string">"Guess the number (1-10):"</span>);</span>
                    <span class="line">} <span class="keyword">while</span> (<span class="variable">answer</span> <span class="operator">!=</span> <span class="string">"7"</span>);</span>
                    <span class="line"></span>
                    <span class="line"><span class="variable">console</span>.<span class="method">log</span>(<span class="string">"üéâ Correct!"</span>);</span>
                </div>

                <h3>While vs Do-While Comparison</h3>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <div class="code-block" style="flex: 1; min-width: 200px;">
                        <span class="code-label">while ‚Äî runs 0 times</span>
                        <span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">10</span>;</span>
                        <span class="line"><span class="keyword">while</span> (<span class="variable">x</span> <span class="operator">&lt;</span> <span class="number">5</span>) {</span>
                        <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">x</span>);</span>
                        <span class="line">  <span class="variable">x</span><span class="operator">++</span>;</span>
                        <span class="line">}</span>
                        <span class="line"><span class="comment">// Nothing prints! ‚ùå</span></span>
                    </div>
                    <div class="code-block" style="flex: 1; min-width: 200px;">
                        <span class="code-label">do-while ‚Äî runs 1 time</span>
                        <span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">10</span>;</span>
                        <span class="line"><span class="keyword">do</span> {</span>
                        <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">x</span>);</span>
                        <span class="line">  <span class="variable">x</span><span class="operator">++</span>;</span>
                        <span class="line">} <span class="keyword">while</span> (<span class="variable">x</span> <span class="operator">&lt;</span> <span class="number">5</span>);</span>
                        <span class="line"><span class="comment">// Prints: 10 ‚úÖ</span></span>
                    </div>
                </div>
            </div>

            <!-- Exercise -->
            <div class="card">
                <h2>üí™ Try It!</h2>
                <div class="exercise-box">
                    <h3>üéØ Exercise: Guessing Game</h3>
                    <span class="difficulty easy">Easy</span>
                    <p>Use a while loop to keep halving a number until it's less than 1. Count how many halvings it takes.</p>
                </div>
                <div class="code-editor">
                    <div class="editor-header">
                        <div class="editor-dots">
                            <span class="editor-dot red"></span>
                            <span class="editor-dot yellow"></span>
                            <span class="editor-dot green"></span>
                        </div>
                        <span class="editor-title">halving.js</span>
                    </div>
                    <textarea class="code-textarea" id="exercise3">let number = 100;
let steps = 0;

while (number >= 1) {
  console.log("Step " + steps + ": " + number);
  number = number / 2;
  steps++;
}

console.log("It took " + steps + " halvings!");</textarea>
                    <div class="editor-footer">
                        <button class="run-btn" onclick="runCode('exercise3')">‚ñ∂ Run Code</button>
                        <button class="clear-btn" onclick="clearOutput('exercise3')">üóë Clear</button>
                    </div>
                    <div class="output-area" id="exercise3-output"></div>
                </div>
            </div>

            <!-- Quiz -->
            <div class="card">
                <h2>üß† While Loop Quiz</h2>
                <div class="quiz-container" id="quiz-while-1">
                    <div class="quiz-question">What's the key difference between <code>while</code> and <code>do...while</code>?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkQuiz('quiz-while-1', this, false)">while is faster</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-while-1', this, false)">do...while can only run once</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-while-1', this, true)">do...while always runs at least once</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-while-1', this, false)">They are exactly the same</div>
                    </div>
                    <div class="quiz-feedback" id="quiz-while-1-feedback"></div>
                </div>

                <div class="quiz-container" id="quiz-while-2" style="margin-top: 20px;">
                    <div class="quiz-question">What causes an infinite loop?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkQuiz('quiz-while-2', this, false)">Using console.log inside a loop</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-while-2', this, true)">The condition never becomes false</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-while-2', this, false)">Using let instead of const</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-while-2', this, false)">Having too much code in the loop body</div>
                    </div>
                    <div class="quiz-feedback" id="quiz-while-2-feedback"></div>
                </div>
            </div>
        </div>

        <!-- SECTION 4: FOR...IN & FOR...OF -->
        <div class="section" id="section-forin-forof">
            <div class="card">
                <h2>üîç <code>for...in</code> ‚Äî Loop Over Object Keys</h2>
                <p>The <code>for...in</code> loop iterates over the <strong>keys (property names)</strong> of an object.</p>

                <div class="analogy-box">
                    <span class="emoji">üè∑Ô∏è</span>
                    <strong>Analogy:</strong> Imagine reading name tags on lockers. <code>for...in</code> reads each <em>label</em> (key), not what's <em>inside</em> (value).
                </div>

                <div class="code-block">
                    <span class="code-label">for...in</span>
                    <span class="line"><span class="keyword">const</span> <span class="variable">student</span> = {</span>
                    <span class="line">  <span class="property">name</span>: <span class="string">"Alice"</span>,</span>
                    <span class="line">  <span class="property">age</span>: <span class="number">22</span>,</span>
                    <span class="line">  <span class="property">grade</span>: <span class="string">"A"</span></span>
                    <span class="line">};</span>
                    <span class="line"></span>
                    <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">key</span> <span class="keyword">in</span> <span class="variable">student</span>) {</span>
                    <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">key</span> + <span class="string">": "</span> + <span class="variable">student</span>[<span class="variable">key</span>]);</span>
                    <span class="line">}</span>
                    <span class="line"><span class="comment">// name: Alice</span></span>
                    <span class="line"><span class="comment">// age: 22</span></span>
                    <span class="line"><span class="comment">// grade: A</span></span>
                </div>

                <div class="pitfall-box">
                    <h4>‚ö†Ô∏è Don't use <code>for...in</code> with arrays!</h4>
                    <p>It iterates over <em>indices as strings</em> and can include inherited properties. Use <code>for...of</code> for arrays instead.</p>
                    <div class="code-block">
                        <span class="line"><span class="keyword">const</span> <span class="variable">arr</span> = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>];</span>
                        <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">index</span> <span class="keyword">in</span> <span class="variable">arr</span>) {</span>
                        <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> <span class="variable">index</span>); <span class="comment">// "string" ‚Üê NOT a number!</span></span>
                        <span class="line">}</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>üîç <code>for...of</code> ‚Äî Loop Over Values</h2>
                <p>The <code>for...of</code> loop iterates over <strong>values</strong> of iterable objects (arrays, strings, Maps, Sets).</p>

                <div class="analogy-box">
                    <span class="emoji">üì¶</span>
                    <strong>Analogy:</strong> <code>for...of</code> opens each box and gives you what's inside ‚Äî the actual <em>value</em>.
                </div>

                <h3>With Arrays</h3>
                <div class="code-block">
                    <span class="code-label">for...of with array</span>
                    <span class="line"><span class="keyword">const</span> <span class="variable">colors</span> = [<span class="string">"üî¥"</span>, <span class="string">"üü¢"</span>, <span class="string">"üîµ"</span>];</span>
                    <span class="line"></span>
                    <span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> <span class="variable">color</span> <span class="keyword">of</span> <span class="variable">colors</span>) {</span>
                    <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">color</span>);</span>
                    <span class="line">}</span>
                    <span class="line"><span class="comment">// üî¥  üü¢  üîµ</span></span>
                </div>

                <h3>With Strings</h3>
                <div class="code-block">
                    <span class="code-label">for...of with string</span>
                    <span class="line"><span class="keyword">const</span> <span class="variable">word</span> = <span class="string">"LOOP"</span>;</span>
                    <span class="line"></span>
                    <span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> <span class="variable">char</span> <span class="keyword">of</span> <span class="variable">word</span>) {</span>
                    <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">char</span>);</span>
                    <span class="line">}</span>
                    <span class="line"><span class="comment">// L  O  O  P</span></span>
                </div>

                <h3>üÜö for...in vs for...of Comparison</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>for...in</th>
                            <th>for...of</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Iterates over</td>
                            <td>Keys (property names)</td>
                            <td>Values</td>
                        </tr>
                        <tr>
                            <td>Best for</td>
                            <td>Objects</td>
                            <td>Arrays, Strings, Maps, Sets</td>
                        </tr>
                        <tr>
                            <td>Works on Objects?</td>
                            <td>‚úÖ Yes</td>
                            <td>‚ùå No (not iterable)</td>
                        </tr>
                        <tr>
                            <td>Works on Arrays?</td>
                            <td>‚ö†Ô∏è Can, but don't</td>
                            <td>‚úÖ Yes ‚Äî preferred</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Interactive Try -->
            <div class="card">
                <h2>üí™ Practice: for...in & for...of</h2>
                <div class="exercise-box">
                    <h3>üéØ Exercise: Explore Both</h3>
                    <span class="difficulty easy">Easy</span>
                    <p>Run the code below to see the difference between for...in and for...of. Then modify it!</p>
                </div>
                <div class="code-editor">
                    <div class="editor-header">
                        <div class="editor-dots">
                            <span class="editor-dot red"></span>
                            <span class="editor-dot yellow"></span>
                            <span class="editor-dot green"></span>
                        </div>
                        <span class="editor-title">forin_forof.js</span>
                    </div>
                    <textarea class="code-textarea" id="exercise4">// for...in with an object
const car = { brand: "Tesla", model: "Model 3", year: 2024 };

console.log("=== for...in (Object Keys) ===");
for (let key in car) {
  console.log(key + " ‚Üí " + car[key]);
}

// for...of with an array
const animals = ["üêï", "üêà", "üê∞", "üê¶"];

console.log("\n=== for...of (Array Values) ===");
for (const animal of animals) {
  console.log("Animal:", animal);
}

// for...of with a string
console.log("\n=== for...of (String Chars) ===");
for (const ch of "Hello!") {
  console.log(ch);
}</textarea>
                    <div class="editor-footer">
                        <button class="run-btn" onclick="runCode('exercise4')">‚ñ∂ Run Code</button>
                        <button class="clear-btn" onclick="clearOutput('exercise4')">üóë Clear</button>
                    </div>
                    <div class="output-area" id="exercise4-output"></div>
                </div>
            </div>

            <!-- Quiz -->
            <div class="card">
                <h2>üß† for...in / for...of Quiz</h2>
                <div class="quiz-container" id="quiz-forin-1">
                    <div class="quiz-question">Which loop should you use to iterate over array VALUES?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkQuiz('quiz-forin-1', this, false)">for...in</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-forin-1', this, true)">for...of</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-forin-1', this, false)">Both work equally well</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-forin-1', this, false)">Neither ‚Äî use a regular for loop</div>
                    </div>
                    <div class="quiz-feedback" id="quiz-forin-1-feedback"></div>
                </div>

                <div class="quiz-container" id="quiz-forin-2" style="margin-top: 20px;">
                    <div class="quiz-question">What does <code>for (let key in obj)</code> give you?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkQuiz('quiz-forin-2', this, true)">The property names (keys)</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-forin-2', this, false)">The property values</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-forin-2', this, false)">Both keys and values</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-forin-2', this, false)">The object itself</div>
                    </div>
                    <div class="quiz-feedback" id="quiz-forin-2-feedback"></div>
                </div>
            </div>
        </div>

        <!-- SECTION 5: BREAK & CONTINUE -->
        <div class="section" id="section-break-continue">
            <div class="card">
                <h2>‚õî <code>break</code> ‚Äî Exit the Loop Early</h2>
                <p><code>break</code> immediately <strong>stops</strong> the loop and jumps to the code after it.</p>

                <div class="analogy-box">
                    <span class="emoji">üö™</span>
                    <strong>Analogy:</strong> You're searching through a stack of papers for a specific document. Once you FIND it, you <em>stop searching</em>. That's <code>break</code>.
                </div>

                <div class="code-block">
                    <span class="code-label">break example</span>
                    <span class="line"><span class="keyword">const</span> <span class="variable">numbers</span> = [<span class="number">3</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">5</span>];</span>
                    <span class="line"></span>
                    <span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> <span class="variable">num</span> <span class="keyword">of</span> <span class="variable">numbers</span>) {</span>
                    <span class="line">  <span class="keyword">if</span> (<span class="variable">num</span> <span class="operator">===</span> <span class="number">9</span>) {</span>
                    <span class="line">    <span class="variable">console</span>.<span class="method">log</span>(<span class="string">"Found 9! Stopping."</span>);</span>
                    <span class="line">    <span class="keyword">break</span>; <span class="comment">// ‚Üê EXIT loop immediately</span></span>
                    <span class="line">  }</span>
                    <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="string">"Checking:"</span>, <span class="variable">num</span>);</span>
                    <span class="line">}</span>
                    <span class="line"><span class="comment">// Checking: 3</span></span>
                    <span class="line"><span class="comment">// Checking: 7</span></span>
                    <span class="line"><span class="comment">// Checking: 2</span></span>
                    <span class="line"><span class="comment">// Found 9! Stopping.</span></span>
                </div>

                <h3>üé¨ Break Animation</h3>
                <div class="loop-animation">
                    <div class="animation-controls">
                        <button class="anim-btn play" onclick="runBreakAnimation()">‚ñ∂ Play</button>
                        <button class="anim-btn reset" onclick="resetBreakAnimation()">üîÑ Reset</button>
                    </div>
                    <div class="iteration-visual" id="breakIterVisual">
                        <div class="iter-item" data-val="3">3</div>
                        <div class="iter-item" data-val="7">7</div>
                        <div class="iter-item" data-val="2">2</div>
                        <div class="iter-item" data-val="9">9‚õî</div>
                        <div class="iter-item" data-val="1">1</div>
                        <div class="iter-item" data-val="5">5</div>
                    </div>
                    <div class="anim-console" style="margin-top: 10px;">
                        <h4>üì∫ Output</h4>
                        <div id="breakConsoleOutput"></div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>‚è≠ <code>continue</code> ‚Äî Skip This Iteration</h2>
                <p><code>continue</code> <strong>skips the rest of the current iteration</strong> and jumps to the next one.</p>

                <div class="analogy-box">
                    <span class="emoji">üçΩÔ∏è</span>
                    <strong>Analogy:</strong> You're at a buffet and you skip the dishes you don't like, but you keep going through the line. That's <code>continue</code>.
                </div>

                <div class="code-block">
                    <span class="code-label">continue example</span>
                    <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">1</span>; <span class="variable">i</span> <span class="operator">&lt;=</span> <span class="number">10</span>; <span class="variable">i</span><span class="operator">++</span>) {</span>
                    <span class="line">  <span class="keyword">if</span> (<span class="variable">i</span> <span class="operator">%</span> <span class="number">2</span> <span class="operator">===</span> <span class="number">0</span>) {</span>
                    <span class="line">    <span class="keyword">continue</span>; <span class="comment">// ‚Üê Skip even numbers</span></span>
                    <span class="line">  }</span>
                    <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">i</span>); <span class="comment">// Only odd numbers printed</span></span>
                    <span class="line">}</span>
                    <span class="line"><span class="comment">// 1, 3, 5, 7, 9</span></span>
                </div>

                <h3>üé¨ Continue Animation</h3>
                <div class="loop-animation">
                    <div class="animation-controls">
                        <button class="anim-btn play" onclick="runContinueAnimation()">‚ñ∂ Play</button>
                        <button class="anim-btn reset" onclick="resetContinueAnimation()">üîÑ Reset</button>
                    </div>
                    <div class="iteration-visual" id="continueIterVisual">
                        <div class="iter-item" data-val="1">1</div>
                        <div class="iter-item" data-val="2">2</div>
                        <div class="iter-item" data-val="3">3</div>
                        <div class="iter-item" data-val="4">4</div>
                        <div class="iter-item" data-val="5">5</div>
                        <div class="iter-item" data-val="6">6</div>
                        <div class="iter-item" data-val="7">7</div>
                        <div class="iter-item" data-val="8">8</div>
                        <div class="iter-item" data-val="9">9</div>
                        <div class="iter-item" data-val="10">10</div>
                    </div>
                    <p style="text-align: center; margin-top: 5px; font-size: 0.85em; color: var(--text-secondary);">
                        üü¢ = printed (odd) | üî¥ = skipped (even)
                    </p>
                    <div class="anim-console" style="margin-top: 10px;">
                        <h4>üì∫ Output</h4>
                        <div id="continueConsoleOutput"></div>
                    </div>
                </div>
            </div>

            <!-- Exercise -->
            <div class="card">
                <h2>üí™ Practice!</h2>
                <div class="exercise-box">
                    <h3>üéØ Exercise: Find the First Negative</h3>
                    <span class="difficulty medium">Medium</span>
                    <p>Loop through the array and use <code>break</code> to stop at the first negative number. Use <code>continue</code> to skip zeros.</p>
                </div>
                <div class="code-editor">
                    <div class="editor-header">
                        <div class="editor-dots">
                            <span class="editor-dot red"></span>
                            <span class="editor-dot yellow"></span>
                            <span class="editor-dot green"></span>
                        </div>
                        <span class="editor-title">break_continue.js</span>
                    </div>
                    <textarea class="code-textarea" id="exercise5">const data = [5, 0, 12, 0, 8, -3, 7, -1];

for (const num of data) {
  if (num === 0) {
    console.log("Skipping zero...");
    continue; // Skip zeros
  }
  
  if (num < 0) {
    console.log("Found negative:", num, "‚Äî stopping!");
    break; // Stop at first negative
  }
  
  console.log("Processing:", num);
}</textarea>
                    <div class="editor-footer">
                        <button class="run-btn" onclick="runCode('exercise5')">‚ñ∂ Run Code</button>
                        <button class="clear-btn" onclick="clearOutput('exercise5')">üóë Clear</button>
                    </div>
                    <div class="output-area" id="exercise5-output"></div>
                </div>
            </div>

            <!-- Quiz -->
            <div class="card">
                <h2>üß† Break & Continue Quiz</h2>
                <div class="quiz-container" id="quiz-break-1">
                    <div class="quiz-question">What does <code>break</code> do inside a loop?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkQuiz('quiz-break-1', this, false)">Skips to the next iteration</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-break-1', this, true)">Completely exits the loop</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-break-1', this, false)">Pauses the loop temporarily</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-break-1', this, false)">Restarts the loop from the beginning</div>
                    </div>
                    <div class="quiz-feedback" id="quiz-break-1-feedback"></div>
                </div>

                <div class="quiz-container" id="quiz-break-2" style="margin-top: 20px;">
                    <div class="quiz-question">What will this print?<br>
                    <code style="color: var(--accent-blue);">for (let i = 0; i < 5; i++) { if (i === 3) continue; console.log(i); }</code></div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkQuiz('quiz-break-2', this, false)">0, 1, 2</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-break-2', this, true)">0, 1, 2, 4</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-break-2', this, false)">0, 1, 2, 3, 4</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz-break-2', this, false)">3, 4</div>
                    </div>
                    <div class="quiz-feedback" id="quiz-break-2-feedback"></div>
                </div>
            </div>
        </div>

        <!-- SECTION 6: BEST PRACTICES -->
        <div class="section" id="section-best-practices">
            <div class="card">
                <h2>‚ú® Loop Best Practices</h2>
                <p>Write better loops by following these professional guidelines.</p>

                <h3>1Ô∏è‚É£ Use <code>const</code> in for...of when you don't reassign</h3>
                <div class="code-block">
                    <span class="line"><span class="comment">// ‚úÖ Good ‚Äî const because we never reassign `item`</span></span>
                    <span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> <span class="variable">item</span> <span class="keyword">of</span> <span class="variable">array</span>) {</span>
                    <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">item</span>);</span>
                    <span class="line">}</span>
                    <span class="line"></span>
                    <span class="line"><span class="comment">// ‚úÖ Good ‚Äî let because i changes each iteration</span></span>
                    <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> &lt; <span class="number">10</span>; <span class="variable">i</span>++) { }</span>
                </div>

                <h3>2Ô∏è‚É£ Cache Array Length for Performance</h3>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <div class="code-block" style="flex: 1; min-width: 200px;">
                        <span class="code-label">‚ùå Slower</span>
                        <span class="line"><span class="comment">// .length recalculated each time</span></span>
                        <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> &lt; <span class="variable">arr</span>.<span class="property">length</span>; <span class="variable">i</span>++) {</span>
                        <span class="line">}</span>
                    </div>
                    <div class="code-block" style="flex: 1; min-width: 200px;">
                        <span class="code-label">‚úÖ Faster</span>
                        <span class="line"><span class="comment">// Length cached</span></span>
                        <span class="line"><span class="keyword">const</span> <span class="variable">len</span> = <span class="variable">arr</span>.<span class="property">length</span>;</span>
                        <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> &lt; <span class="variable">len</span>; <span class="variable">i</span>++) {</span>
                        <span class="line">}</span>
                    </div>
                </div>

                <h3>3Ô∏è‚É£ Prefer Modern Loops Over Traditional for</h3>
                <div class="code-block">
                    <span class="code-label">Modern Approach</span>
                    <span class="line"><span class="keyword">const</span> <span class="variable">fruits</span> = [<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"cherry"</span>];</span>
                    <span class="line"></span>
                    <span class="line"><span class="comment">// ‚ùå Old school ‚Äî more code, more error-prone</span></span>
                    <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> &lt; <span class="variable">fruits</span>.<span class="property">length</span>; <span class="variable">i</span>++) {</span>
                    <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">fruits</span>[<span class="variable">i</span>]);</span>
                    <span class="line">}</span>
                    <span class="line"></span>
                    <span class="line"><span class="comment">// ‚úÖ Modern ‚Äî cleaner, no index errors</span></span>
                    <span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> <span class="variable">fruit</span> <span class="keyword">of</span> <span class="variable">fruits</span>) {</span>
                    <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">fruit</span>);</span>
                    <span class="line">}</span>
                    <span class="line"></span>
                    <span class="line"><span class="comment">// ‚úÖ Need index too? Use forEach or entries()</span></span>
                    <span class="line"><span class="variable">fruits</span>.<span class="method">forEach</span>((<span class="variable">fruit</span>, <span class="variable">index</span>) <span class="operator">=></span> {</span>
                    <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">index</span>, <span class="variable">fruit</span>);</span>
                    <span class="line">});</span>
                </div>

                <h3>4Ô∏è‚É£ Use Meaningful Variable Names</h3>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <div class="code-block" style="flex: 1; min-width: 200px;">
                        <span class="code-label">‚ùå Unclear</span>
                        <span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> <span class="variable">x</span> <span class="keyword">of</span> <span class="variable">arr</span>) {</span>
                        <span class="line">  <span class="function">doStuff</span>(<span class="variable">x</span>);</span>
                        <span class="line">}</span>
                    </div>
                    <div class="code-block" style="flex: 1; min-width: 200px;">
                        <span class="code-label">‚úÖ Clear</span>
                        <span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> <span class="variable">user</span> <span class="keyword">of</span> <span class="variable">users</span>) {</span>
                        <span class="line">  <span class="function">sendEmail</span>(<span class="variable">user</span>);</span>
                        <span class="line">}</span>
                    </div>
                </div>

                <h3>5Ô∏è‚É£ Avoid Modifying Arrays While Looping</h3>
                <div class="pitfall-box">
                    <h4>‚ö†Ô∏è Common Pitfall</h4>
                    <div class="code-block">
                        <span class="line"><span class="keyword">const</span> <span class="variable">items</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span>
                        <span class="line"><span class="comment">// ‚ùå BAD ‚Äî modifying array during loop</span></span>
                        <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> &lt; <span class="variable">items</span>.<span class="property">length</span>; <span class="variable">i</span>++) {</span>
                        <span class="line">  <span class="variable">items</span>.<span class="method">splice</span>(<span class="variable">i</span>, <span class="number">1</span>); <span class="comment">// Skips elements!</span></span>
                        <span class="line">}</span>
                        <span class="line"></span>
                        <span class="line"><span class="comment">// ‚úÖ GOOD ‚Äî use filter to create a new array</span></span>
                        <span class="line"><span class="keyword">const</span> <span class="variable">filtered</span> = <span class="variable">items</span>.<span class="method">filter</span>(<span class="variable">item</span> <span class="operator">=></span> <span class="variable">item</span> > <span class="number">2</span>);</span>
                    </div>
                </div>
            </div>

            <!-- When to Use Which Loop -->
            <div class="card">
                <h2>üó∫Ô∏è Decision Guide: Which Loop to Use?</h2>
                <div class="visual-diagram" style="text-align: left;">
                    <p><strong>‚ùì Do you know how many times to loop?</strong></p>
                    <p style="margin-left: 20px;">‚úÖ YES ‚Üí Use <code style="color: var(--accent-blue)">for</code> loop</p>
                    <p style="margin-left: 20px;">‚ùå NO ‚Üí <strong>Must run at least once?</strong></p>
                    <p style="margin-left: 40px;">‚úÖ YES ‚Üí Use <code style="color: var(--accent-green)">do...while</code></p>
                    <p style="margin-left: 40px;">‚ùå NO ‚Üí Use <code style="color: var(--accent-orange)">while</code></p>
                    <br>
                    <p><strong>‚ùì Iterating over a collection?</strong></p>
                    <p style="margin-left: 20px;">üì¶ Object keys ‚Üí <code style="color: var(--accent-pink)">for...in</code></p>
                    <p style="margin-left: 20px;">üìã Array/String values ‚Üí <code style="color: var(--accent-purple)">for...of</code></p>
                    <p style="margin-left: 20px;">üîÑ Need index + value ‚Üí <code style="color: var(--accent-yellow)">.forEach()</code> or <code style="color: var(--accent-yellow)">for...of</code> with <code>.entries()</code></p>
                </div>
            </div>

            <!-- Common Mistakes -->
            <div class="card">
                <h2>üíÄ Common Mistakes & Pitfalls</h2>

                <div class="pitfall-box">
                    <h4>‚ùå Mistake 1: Off-By-One Error</h4>
                    <div class="code-block">
                        <span class="line"><span class="keyword">const</span> <span class="variable">arr</span> = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>]; <span class="comment">// length = 3, indices: 0, 1, 2</span></span>
                        <span class="line"></span>
                        <span class="line"><span class="comment">// ‚ùå Uses <= which tries to access arr[3] (undefined!)</span></span>
                        <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> <span class="operator">&lt;=</span> <span class="variable">arr</span>.<span class="property">length</span>; <span class="variable">i</span>++) { }</span>
                        <span class="line"></span>
                        <span class="line"><span class="comment">// ‚úÖ Uses < (correct ‚Äî stops at index 2)</span></span>
                        <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> <span class="operator">&lt;</span> <span class="variable">arr</span>.<span class="property">length</span>; <span class="variable">i</span>++) { }</span>
                    </div>
                </div>

                <div class="pitfall-box">
                    <h4>‚ùå Mistake 2: Using var Instead of let</h4>
                    <div class="code-block">
                        <span class="line"><span class="comment">// ‚ùå var is function-scoped ‚Äî leaks out!</span></span>
                        <span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> &lt; <span class="number">3</span>; <span class="variable">i</span>++) { }</span>
                        <span class="line"><span class="variable">console</span>.<span class="method">log</span>(<span class="variable">i</span>); <span class="comment">// 3 ‚Äî still accessible! üò±</span></span>
                        <span class="line"></span>
                        <span class="line"><span class="comment">// ‚úÖ let is block-scoped ‚Äî stays in loop</span></span>
                        <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">j</span> = <span class="number">0</span>; <span class="variable">j</span> &lt; <span class="number">3</span>; <span class="variable">j</span>++) { }</span>
                        <span class="line"><span class="variable">console</span>.<span class="method">log</span>(<span class="variable">j</span>); <span class="comment">// ReferenceError ‚úÖ</span></span>
                    </div>
                </div>

                <div class="pitfall-box">
                    <h4>‚ùå Mistake 3: Semicolons in for Loop</h4>
                    <div class="code-block">
                        <span class="line"><span class="comment">// ‚ùå Semicolon after for() ‚Äî empty loop body!</span></span>
                        <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> &lt; <span class="number">5</span>; <span class="variable">i</span>++)<span style="color: var(--accent-red); font-weight: bold;">;</span> {</span>
                        <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">i</span>); <span class="comment">// Only runs once! (after loop)</span></span>
                        <span class="line">}</span>
                        <span class="line"></span>
                        <span class="line"><span class="comment">// ‚úÖ No semicolon</span></span>
                        <span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> &lt; <span class="number">5</span>; <span class="variable">i</span>++) {</span>
                        <span class="line">  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">i</span>);</span>
                        <span class="line">}</span>
                    </div>
                </div>

                <div class="tip-box">
                    <h4>üí° Pro Tips</h4>
                    <ul class="checklist">
                        <li>Always use <code>let</code> (not <code>var</code>) for loop counters</li>
                        <li>Use <code>for...of</code> for arrays ‚Äî cleaner and safer</li>
                        <li>Add a safety counter to while loops during development</li>
                        <li>Keep loop bodies small ‚Äî extract to functions if complex</li>
                        <li>Consider <code>.map()</code>, <code>.filter()</code>, <code>.reduce()</code> for data transformations</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- SECTION 7: FINAL QUIZ -->
        <div class="section" id="section-final-quiz">
            <div class="card">
                <h2>üèÜ Final Challenge Quiz</h2>
                <p>Test everything you've learned! Get 8+ correct for a perfect score!</p>

                <div class="quiz-container" id="final-q1">
                    <div class="quiz-question">1. What are the three parts of a <code>for</code> loop header?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q1', this, 0)">start, end, step</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q1', this, 1)">initialization, condition, update</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q1', this, 0)">input, process, output</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q1', this, 0)">begin, check, increment</div>
                    </div>
                    <div class="quiz-feedback" id="final-q1-feedback"></div>
                </div>

                <div class="quiz-container" id="final-q2" style="margin-top: 15px;">
                    <div class="quiz-question">2. What does this loop output?<br><code style="color: var(--accent-blue);">for (let i = 2; i <= 10; i += 3) { console.log(i); }</code></div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q2', this, 1)">2, 5, 8</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q2', this, 0)">2, 5, 8, 11</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q2', this, 0)">3, 6, 9</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q2', this, 0)">2, 4, 6, 8, 10</div>
                    </div>
                    <div class="quiz-feedback" id="final-q2-feedback"></div>
                </div>

                <div class="quiz-container" id="final-q3" style="margin-top: 15px;">
                    <div class="quiz-question">3. Which loop always runs at least once?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q3', this, 0)">for</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q3', this, 0)">while</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q3', this, 1)">do...while</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q3', this, 0)">for...of</div>
                    </div>
                    <div class="quiz-feedback" id="final-q3-feedback"></div>
                </div>

                <div class="quiz-container" id="final-q4" style="margin-top: 15px;">
                    <div class="quiz-question">4. <code>for...of</code> iterates over _____, while <code>for...in</code> iterates over _____.</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q4', this, 0)">keys, values</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q4', this, 1)">values, keys</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q4', this, 0)">objects, arrays</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q4', this, 0)">arrays, strings</div>
                    </div>
                    <div class="quiz-feedback" id="final-q4-feedback"></div>
                </div>

                <div class="quiz-container" id="final-q5" style="margin-top: 15px;">
                    <div class="quiz-question">5. What does <code>continue</code> do?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q5', this, 0)">Exits the loop completely</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q5', this, 1)">Skips to the next iteration</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q5', this, 0)">Pauses the loop</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q5', this, 0)">Runs the loop again from start</div>
                    </div>
                    <div class="quiz-feedback" id="final-q5-feedback"></div>
                </div>

                <div class="quiz-container" id="final-q6" style="margin-top: 15px;">
                    <div class="quiz-question">6. What causes an infinite loop in a <code>while</code> loop?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q6', this, 0)">Using break</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q6', this, 0)">Having too much code inside</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q6', this, 1)">The condition never becomes false</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q6', this, 0)">Using console.log</div>
                    </div>
                    <div class="quiz-feedback" id="final-q6-feedback"></div>
                </div>

                <div class="quiz-container" id="final-q7" style="margin-top: 15px;">
                    <div class="quiz-question">7. Which should you use to loop over an array's values?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q7', this, 0)">for...in</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q7', this, 1)">for...of</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q7', this, 0)">for...at</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q7', this, 0)">for...each</div>
                    </div>
                    <div class="quiz-feedback" id="final-q7-feedback"></div>
                </div>

                <div class="quiz-container" id="final-q8" style="margin-top: 15px;">
                    <div class="quiz-question">8. What's wrong with: <code style="color: var(--accent-blue);">for (let i = 0; i < 5; i++);</code> ?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q8', this, 0)">Nothing ‚Äî it's correct</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q8', this, 1)">The semicolon creates an empty loop body</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q8', this, 0)">It creates an infinite loop</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q8', this, 0)">let is not allowed here</div>
                    </div>
                    <div class="quiz-feedback" id="final-q8-feedback"></div>
                </div>

                <div class="quiz-container" id="final-q9" style="margin-top: 15px;">
                    <div class="quiz-question">9. Why should you use <code>let</code> instead of <code>var</code> in loops?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q9', this, 0)">let is faster</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q9', this, 1)">let is block-scoped, preventing variable leaking</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q9', this, 0)">var doesn't work in loops</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q9', this, 0)">There's no difference</div>
                    </div>
                    <div class="quiz-feedback" id="final-q9-feedback"></div>
                </div>

                <div class="quiz-container" id="final-q10" style="margin-top: 15px;">
                    <div class="quiz-question">10. How many times does this run?<br><code style="color: var(--accent-blue);">let x = 10; do { x += 5; } while (x < 10);</code></div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q10', this, 0)">0 times</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q10', this, 1)">1 time (x becomes 15, then condition is false)</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q10', this, 0)">10 times</div>
                        <div class="quiz-option" onclick="checkFinalQuiz('final-q10', this, 0)">Infinite loop</div>
                    </div>
                    <div class="quiz-feedback" id="final-q10-feedback"></div>
                </div>

                <div style="text-align: center; margin-top: 25px;">
                    <button class="run-btn" onclick="showFinalScore()" style="font-size: 1.1em; padding: 12px 40px;">
                        üìä See My Score
                    </button>
                </div>
            </div>

            <!-- Final Exercise -->
            <div class="card">
                <h2>üéØ Final Boss Exercise</h2>
                <div class="exercise-box">
                    <h3>Build a Pattern Printer</h3>
                    <span class="difficulty hard">Hard</span>
                    <p>Use nested loops to print this star pattern:</p>
                    <pre style="color: var(--accent-yellow); margin: 10px 0;">
*
**
***
****
*****</pre>
                </div>
                <div class="code-editor">
                    <div class="editor-header">
                        <div class="editor-dots">
                            <span class="editor-dot red"></span>
                            <span class="editor-dot yellow"></span>
                            <span class="editor-dot green"></span>
                        </div>
                        <span class="editor-title">pattern.js</span>
                    </div>
                    <textarea class="code-textarea" id="exercise6">// Print a star triangle pattern
// Hint: outer loop = rows, inner loop = stars per row

for (let row = 1; row <= 5; row++) {
  let line = "";
  for (let star = 0; star < row; star++) {
    line += "‚≠ê";
  }
  console.log(line);
}</textarea>
                    <div class="editor-footer">
                        <button class="run-btn" onclick="runCode('exercise6')">‚ñ∂ Run Code</button>
                        <button class="clear-btn" onclick="clearOutput('exercise6')">üóë Clear</button>
                    </div>
                    <div class="output-area" id="exercise6-output"></div>
                </div>
            </div>
        </div>

    </main>

    <!-- Score Popup -->
    <div class="overlay" id="overlay"></div>
    <div class="score-popup" id="scorePopup">
        <h2 id="scoreTitle" style="font-size: 2em;"></h2>
        <p id="scoreText" style="font-size: 1.2em; margin: 15px 0;"></p>
        <div id="scoreEmoji" style="font-size: 3em; margin: 10px 0;"></div>
        <p id="scoreMessage" style="color: var(--text-secondary);"></p>
        <button class="close-popup" onclick="closePopup()">Close</button>
    </div>

    <!-- Confetti Container -->
    <div class="confetti-container" id="confettiContainer"></div>

    <script>
        // ==================== STATE ====================
        let totalXP = 0;
        let sectionsVisited = new Set(['intro']);
        let finalQuizAnswers = {};
        const totalSections = 7;
        const sectionNames = ['intro', 'for-loop', 'while-loop', 'forin-forof', 'break-continue', 'best-practices', 'final-quiz'];

        // ==================== NAVIGATION ====================
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));

            // Show selected
            document.getElementById('section-' + sectionId).classList.add('active');
            document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');

            // Track progress
            sectionsVisited.add(sectionId);
            updateProgress();

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateProgress() {
            const progress = (sectionsVisited.size / totalSections) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressLabel').textContent = `Section ${sectionsVisited.size} of ${totalSections}`;
            document.getElementById('xpBadge').textContent = `‚≠ê ${totalXP} XP`;
        }

        // ==================== XP SYSTEM ====================
        function addXP(amount) {
            totalXP += amount;
            updateProgress();
        }

        // ==================== QUIZ SYSTEM ====================
        function checkQuiz(quizId, element, isCorrect) {
            const container = document.getElementById(quizId);
            const options = container.querySelectorAll('.quiz-option');
            const feedback = document.getElementById(quizId + '-feedback');

            // Disable all options
            options.forEach(opt => {
                opt.classList.add('disabled');
                if (opt === element) {
                    opt.classList.add(isCorrect ? 'correct' : 'wrong');
                }
            });

            // Find and highlight correct answer if wrong
            if (!isCorrect) {
                options.forEach(opt => {
                    if (!opt.classList.contains('wrong') && opt.onclick.toString().includes('true')) {
                        opt.classList.add('correct');
                    }
                });
            }

            // Show feedback
            feedback.className = 'quiz-feedback show ' + (isCorrect ? 'correct' : 'wrong');
            if (isCorrect) {
                feedback.innerHTML = 'üéâ <strong>Correct!</strong> Great job!';
                addXP(10);
            } else {
                feedback.innerHTML = '‚ùå <strong>Not quite.</strong> The correct answer is highlighted in green.';
            }
        }

        // ==================== FINAL QUIZ ====================
        function checkFinalQuiz(questionId, element, isCorrect) {
            if (finalQuizAnswers[questionId] !== undefined) return;

            finalQuizAnswers[questionId] = isCorrect;

            const container = document.getElementById(questionId);
            const options = container.querySelectorAll('.quiz-option');
            const feedback = document.getElementById(questionId + '-feedback');

            options.forEach(opt => {
                opt.classList.add('disabled');
            });

            element.classList.add(isCorrect ? 'correct' : 'wrong');

            // Highlight correct if wrong
            if (!isCorrect) {
                const correctIndex = isCorrect ? -1 : 1; // All correct answers are at index 1
                // Find the correct option
                options.forEach((opt, idx) => {
                    // Check if this option's click handler has isCorrect=1
                    const onclickStr = opt.getAttribute('onclick') || '';
                    if (onclickStr.includes(', 1)')) {
                        opt.classList.add('correct');
                    }
                });
            }

            feedback.className = 'quiz-feedback show ' + (isCorrect ? 'correct' : 'wrong');
            feedback.innerHTML = isCorrect 
                ? 'üéâ Correct! +15 XP' 
                : '‚ùå Incorrect. See the green answer.';

            if (isCorrect) addXP(15);
        }

        function showFinalScore() {
            const total = Object.keys(finalQuizAnswers).length;
            const correct = Object.values(finalQuizAnswers).filter(v => v === true).length;

            const scoreTitle = document.getElementById('scoreTitle');
            const scoreText = document.getElementById('scoreText');
            const scoreEmoji = document.getElementById('scoreEmoji');
            const scoreMessage = document.getElementById('scoreMessage');

            scoreText.textContent = `${correct} / 10 Correct`;

            if (correct >= 9) {
                scoreTitle.textContent = 'üèÜ LOOP MASTER!';
                scoreEmoji.textContent = 'üéâü•áüéâ';
                scoreMessage.textContent = 'Incredible! You truly understand JavaScript loops!';
                launchConfetti();
            } else if (correct >= 7) {
                scoreTitle.textContent = 'üåü Great Job!';
                scoreEmoji.textContent = 'üëèü•à';
                scoreMessage.textContent = 'Almost perfect! Review the ones you missed.';
                launchConfetti();
            } else if (correct >= 5) {
                scoreTitle.textContent = 'üëç Good Effort!';
                scoreEmoji.textContent = 'üìö';
                scoreMessage.textContent = 'Review the earlier sections and try again!';
            } else {
                scoreTitle.textContent = 'üí™ Keep Learning!';
                scoreEmoji.textContent = 'üìñ';
                scoreMessage.textContent = 'Go through each section again ‚Äî you\'ll get it!';
            }

            if (total < 10) {
                scoreMessage.textContent += ` (You answered ${total}/10 questions)`;
            }

            document.getElementById('overlay').classList.add('show');
            document.getElementById('scorePopup').classList.add('show');
        }

        function closePopup() {
            document.getElementById('overlay').classList.remove('show');
            document.getElementById('scorePopup').classList.remove('show');
        }

        // ==================== CONFETTI ====================
        function launchConfetti() {
            const container = document.getElementById('confettiContainer');
            const colors = ['#4fc3f7', '#66bb6a', '#ffa726', '#f06292', '#ab47bc', '#ffee58', '#ef5350'];
            
            for (let i = 0; i < 80; i++) {
                const piece = document.createElement('div');
                piece.className = 'confetti-piece';
                piece.style.left = Math.random() * 100 + '%';
                piece.style.background = colors[Math.floor(Math.random() * colors.length)];
                piece.style.animationDelay = Math.random() * 2 + 's';
                piece.style.animationDuration = (Math.random() * 2 + 2) + 's';
                piece.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                piece.style.width = (Math.random() * 8 + 5) + 'px';
                piece.style.height = (Math.random() * 8 + 5) + 'px';
                container.appendChild(piece);

                setTimeout(() => piece.remove(), 4000);
            }
        }

        // ==================== CODE EDITOR ====================
        function runCode(editorId) {
            const code = document.getElementById(editorId).value;
            const outputArea = document.getElementById(editorId + '-output');

            outputArea.innerHTML = '';

            // Create a safe console.log replacement
            const outputs = [];
            const fakeConsole = {
                log: function(...args) {
                    outputs.push(args.map(a => {
                        if (typeof a === 'object') return JSON.stringify(a);
                        return String(a);
                    }).join(' '));
                }
            };

            try {
                // Replace console.log calls
                const wrappedCode = `
                    const console = arguments[0];
                    ${code}
                `;
                const fn = new Function(wrappedCode);

                // Safety: prevent infinite loops
                let safeCode = code;
                let loopCount = 0;
                const maxIterations = 10000;

                const safeWrappedCode = `
                    const console = arguments[0];
                    let __loopGuard = 0;
                    const __maxLoops = ${maxIterations};
                    ${code.replace(/(while\s*\(|for\s*\()/g, (match) => {
                        return match;
                    })}
                `;

                // Create timeout
                const timeoutPromise = new Promise((_, reject) => {
                    setTimeout(() => reject(new Error('Code took too long ‚Äî possible infinite loop!')), 5000);
                });

                fn(fakeConsole);

                outputs.forEach(line => {
                    const div = document.createElement('div');
                    div.className = 'output-line';
                    div.textContent = '> ' + line;
                    outputArea.appendChild(div);
                });

                if (outputs.length === 0) {
                    const div = document.createElement('div');
                    div.className = 'output-line';
                    div.textContent = '(No output ‚Äî add console.log() statements)';
                    div.style.color = 'var(--text-secondary)';
                    outputArea.appendChild(div);
                }

                addXP(5);

            } catch (error) {
                const div = document.createElement('div');
                div.className = 'error-line';
                div.textContent = '‚ùå Error: ' + error.message;
                outputArea.appendChild(div);
            }
        }

        function clearOutput(editorId) {
            document.getElementById(editorId + '-output').innerHTML = '';
        }

        // ==================== FOR LOOP ANIMATION ====================
        let forAnimState = { i: 0, running: false, step: 0, intervalId: null };

        function resetForLoopAnimation() {
            if (forAnimState.intervalId) clearInterval(forAnimState.intervalId);
            forAnimState = { i: 0, running: false, step: 0, intervalId: null };

            document.querySelectorAll('#forAnimCode .anim-code-line').forEach(l => l.classList.remove('highlight'));
            document.getElementById('forVarI').textContent = '-';
            document.getElementById('forCondition').textContent = '-';
            document.getElementById('forCondition').style.background = 'var(--text-secondary)';
            document.getElementById('forConsoleOutput').innerHTML = '';
            document.querySelectorAll('#forIterVisual .iter-item').forEach(item => {
                item.className = 'iter-item';
            });
        }

        function forLoopStep() {
            const state = forAnimState;

            // Clear highlights
            document.querySelectorAll('#forAnimCode .anim-code-line').forEach(l => l.classList.remove('highlight'));

            if (state.step === 0) {
                // Initialize
                document.getElementById('for-line-0').classList.add('highlight');
                state.i = 0;
                document.getElementById('forVarI').textContent = state.i;
                state.step = 1;
            } else if (state.step === 1) {
                // Check condition
                document.getElementById('for-line-0').classList.add('highlight');
                const condResult = state.i < 5;
                document.getElementById('forCondition').textContent = condResult ? 'true' : 'false';
                document.getElementById('forCondition').style.background = condResult ? 'var(--accent-green)' : 'var(--accent-red)';

                if (!condResult) {
                    // Loop done
                    state.step = -1;
                    if (state.intervalId) clearInterval(state.intervalId);
                    state.running = false;
                    return;
                }
                state.step = 2;
            } else if (state.step === 2) {
                // Body
                document.getElementById('for-line-1').classList.add('highlight');
                const output = document.getElementById('forConsoleOutput');
                const line = document.createElement('div');
                line.className = 'console-line';
                line.textContent = 'Count: ' + state.i;
                output.appendChild(line);

                // Update visual
                const items = document.querySelectorAll('#forIterVisual .iter-item');
                items.forEach(item => item.classList.remove('current'));
                items[state.i].classList.add('current');
                items[state.i].classList.add('visited');

                state.step = 3;
            } else if (state.step === 3) {
                // Update
                document.getElementById('for-line-2').classList.add('highlight');
                const items = document.querySelectorAll('#forIterVisual .iter-item');
                items[state.i].classList.remove('current');
                state.i++;
                document.getElementById('forVarI').textContent = state.i;
                state.step = 1;
            }
        }

        function stepForLoopAnimation() {
            if (forAnimState.step === -1) resetForLoopAnimation();
            forLoopStep();
        }

        function runForLoopAnimation() {
            resetForLoopAnimation();
            forAnimState.running = true;
            const speed = document.getElementById('forLoopSpeed').value;
            forAnimState.intervalId = setInterval(() => {
                if (forAnimState.step === -1) {
                    clearInterval(forAnimState.intervalId);
                    return;
                }
                forLoopStep();
            }, parseInt(speed));
        }

        document.getElementById('forLoopSpeed').addEventListener('input', function() {
            document.getElementById('forSpeedLabel').textContent = this.value + 'ms';
        });

        // ==================== WHILE LOOP ANIMATION ====================
        let whileAnimState = { fuel: 5, step: 0, running: false, intervalId: null };

        function resetWhileLoopAnimation() {
            if (whileAnimState.intervalId) clearInterval(whileAnimState.intervalId);
            whileAnimState = { fuel: 5, step: 0, running: false, intervalId: null };

            document.querySelectorAll('#whileAnimCode .anim-code-line').forEach(l => l.classList.remove('highlight'));
            document.getElementById('whileVarFuel').textContent = '-';
            document.getElementById('whileCondition').textContent = '-';
            document.getElementById('whileCondition').style.background = 'var(--text-secondary)';
            document.getElementById('whileConsoleOutput').innerHTML = '';
        }

        function whileLoopStep() {
            const state = whileAnimState;
            document.querySelectorAll('#whileAnimCode .anim-code-line').forEach(l => l.classList.remove('highlight'));

            if (state.step === 0) {
                document.getElementById('while-line-0').classList.add('highlight');
                document.getElementById('whileVarFuel').textContent = state.fuel;
                state.step = 1;
            } else if (state.step === 1) {
                document.getElementById('while-line-1').classList.add('highlight');
                const condResult = state.fuel > 0;
                document.getElementById('whileCondition').textContent = condResult ? 'true' : 'false';
                document.getElementById('whileCondition').style.background = condResult ? 'var(--accent-green)' : 'var(--accent-red)';
                if (!condResult) {
                    state.step = -1;
                    if (state.intervalId) clearInterval(state.intervalId);
                    return;
                }
                state.step = 2;
            } else if (state.step === 2) {
                document.getElementById('while-line-2').classList.add('highlight');
                const output = document.getElementById('whileConsoleOutput');
                const line = document.createElement('div');
                line.className = 'console-line';
                line.textContent = 'üöó Fuel: ' + state.fuel;
                output.appendChild(line);
                state.step = 3;
            } else if (state.step === 3) {
                document.getElementById('while-line-3').classList.add('highlight');
                state.fuel--;
                document.getElementById('whileVarFuel').textContent = state.fuel;
                state.step = 1;
            }
        }

        function runWhileLoopAnimation() {
            resetWhileLoopAnimation();
            whileAnimState.running = true;
            whileAnimState.intervalId = setInterval(() => {
                if (whileAnimState.step === -1) {
                    clearInterval(whileAnimState.intervalId);
                    const output = document.getElementById('whileConsoleOutput');
                    const line = document.createElement('div');
                    line.className = 'console-line';
                    line.textContent = '‚õΩ Out of fuel!';
                    line.style.color = 'var(--accent-orange)';
                    output.appendChild(line);
                    return;
                }
                whileLoopStep();
            }, 700);
        }

        // ==================== BREAK ANIMATION ====================
        let breakAnimState = { index: 0, running: false, intervalId: null };
        const breakData = [3, 7, 2, 9, 1, 5];

        function resetBreakAnimation() {
            if (breakAnimState.intervalId) clearInterval(breakAnimState.intervalId);
            breakAnimState = { index: 0, running: false, intervalId: null };
            document.querySelectorAll('#breakIterVisual .iter-item').forEach(item => {
                item.className = 'iter-item';
            });
            document.getElementById('breakConsoleOutput').innerHTML = '';
        }

        function runBreakAnimation() {
            resetBreakAnimation();
            const items = document.querySelectorAll('#breakIterVisual .iter-item');
            const output = document.getElementById('breakConsoleOutput');
            let idx = 0;

            breakAnimState.intervalId = setInterval(() => {
                if (idx >= breakData.length) {
                    clearInterval(breakAnimState.intervalId);
                    return;
                }

                items.forEach(it => it.classList.remove('current'));
                items[idx].classList.add('current');

                if (breakData[idx] === 9) {
                    items[idx].classList.add('visited');
                    const line = document.createElement('div');
                    line.className = 'console-line';
                    line.textContent = '‚õî Found 9! BREAK!';
                    line.style.color = 'var(--accent-red)';
                    output.appendChild(line);
                    clearInterval(breakAnimState.intervalId);

                    // Mark remaining as not visited
                    for (let i = idx + 1; i < items.length; i++) {
                        items[i].style.opacity = '0.3';
                    }
                    return;
                }

                items[idx].classList.add('visited');
                const line = document.createElement('div');
                line.className = 'console-line';
                line.textContent = 'Checking: ' + breakData[idx];
                output.appendChild(line);
                idx++;
            }, 800);
        }

        // ==================== CONTINUE ANIMATION ====================
        function resetContinueAnimation() {
            document.querySelectorAll('#continueIterVisual .iter-item').forEach(item => {
                item.className = 'iter-item';
            });
            document.getElementById('continueConsoleOutput').innerHTML = '';
        }

        function runContinueAnimation() {
            resetContinueAnimation();
            const items = document.querySelectorAll('#continueIterVisual .iter-item');
            const output = document.getElementById('continueConsoleOutput');
            let idx = 0;

            const interval = setInterval(() => {
                if (idx >= 10) {
                    clearInterval(interval);
                    return;
                }

                items.forEach(it => it.classList.remove('current'));
                items[idx].classList.add('current');

                const num = idx + 1; // 1-indexed
                if (num % 2 === 0) {
                    items[idx].classList.add('skipped');
                    const line = document.createElement('div');
                    line.className = 'console-line';
                    line.textContent = `  ‚è≠ Skip ${num} (even)`;
                    line.style.color = 'var(--accent-red)';
                    output.appendChild(line);
                } else {
                    items[idx].classList.add('visited');
                    const line = document.createElement('div');
                    line.className = 'console-line';
                    line.textContent = `‚úÖ Print: ${num}`;
                    output.appendChild(line);
                }

                idx++;
            }, 600);
        }

        // ==================== FLOW STEP ANIMATION ====================
        function animateFlowSteps() {
            const steps = document.querySelectorAll('#forLoopFlow .flow-step');
            let current = 0;
            setInterval(() => {
                steps.forEach(s => s.classList.remove('active-step'));
                steps[current % steps.length].classList.add('active-step');
                current++;
            }, 1500);
        }

        // Initialize
        updateProgress();

        // Quick fix for quiz correct answer highlighting
        document.querySelectorAll('.quiz-option').forEach(opt => {
            const onclickAttr = opt.getAttribute('onclick');
            if (onclickAttr && onclickAttr.includes('true')) {
                opt.dataset.correct = 'true';
            }
        });

        // Override checkQuiz to properly find correct answers
        function checkQuiz(quizId, element, isCorrect) {
            const container = document.getElementById(quizId);
            const options = container.querySelectorAll('.quiz-option');
            const feedback = document.getElementById(quizId + '-feedback');

            // Check if already answered
            if (container.dataset.answered) return;
            container.dataset.answered = 'true';

            // Disable all options
            options.forEach(opt => {
                opt.classList.add('disabled');
            });

            element.classList.add(isCorrect ? 'correct' : 'wrong');

            // If wrong, find and highlight correct
            if (!isCorrect) {
                options.forEach(opt => {
                    if (opt.dataset.correct === 'true') {
                        opt.classList.add('correct');
                    }
                });
            }

            feedback.className = 'quiz-feedback show ' + (isCorrect ? 'correct' : 'wrong');
            if (isCorrect) {
                feedback.innerHTML = 'üéâ <strong>Correct!</strong> +10 XP';
                addXP(10);
            } else {
                feedback.innerHTML = '‚ùå <strong>Not quite.</strong> The correct answer is highlighted in green. Study this topic more!';
            }
        }
    </script>
</body>
</html>