<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ JS Functions Fun Academy</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&family=Fira+Code:wght@400;500&display=swap');

        :root {
            --bg-dark: #0a0e27;
            --bg-card: #131842;
            --bg-card-alt: #1a1f4e;
            --accent-blue: #4fc3f7;
            --accent-purple: #b388ff;
            --accent-green: #69f0ae;
            --accent-orange: #ffab40;
            --accent-red: #ff5252;
            --accent-pink: #ff80ab;
            --accent-yellow: #ffd740;
            --text-primary: #e8eaf6;
            --text-secondary: #9fa8da;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-4: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --gradient-5: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.7;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-dark); }
        ::-webkit-scrollbar-thumb {
            background: var(--gradient-1);
            border-radius: 10px;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .bg-animation .particle {
            position: absolute;
            border-radius: 50%;
            animation: floatUp linear infinite;
            opacity: 0.15;
        }

        @keyframes floatUp {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.15; }
            90% { opacity: 0.15; }
            100% { transform: translateY(-10vh) rotate(720deg); opacity: 0; }
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0; left: 0;
            width: 100%;
            z-index: 1000;
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(79, 195, 247, 0.15);
            padding: 12px 0;
        }

        .navbar-inner {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            font-size: 1.4rem;
            font-weight: 800;
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo span { font-size: 1.6rem; }

        .progress-container {
            flex: 1;
            max-width: 300px;
            margin: 0 30px;
        }

        .progress-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-bottom: 4px;
            display: flex;
            justify-content: space-between;
        }

        .progress-bar {
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-4);
            border-radius: 10px;
            width: 0%;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .xp-badge {
            background: var(--gradient-5);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: #1a1a2e;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Sidebar Navigation */
        .sidebar {
            position: fixed;
            left: 0;
            top: 70px;
            width: 280px;
            height: calc(100vh - 70px);
            background: rgba(19, 24, 66, 0.95);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(79, 195, 247, 0.1);
            overflow-y: auto;
            z-index: 999;
            padding: 20px 0;
            transform: translateX(0);
            transition: transform 0.3s ease;
        }

        .sidebar-toggle {
            display: none;
            position: fixed;
            top: 80px;
            left: 10px;
            z-index: 1001;
            background: var(--gradient-1);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            font-size: 1.2rem;
            cursor: pointer;
        }

        .nav-section-title {
            padding: 10px 25px 5px;
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--accent-purple);
            font-weight: 700;
        }

        .nav-item {
            padding: 10px 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            position: relative;
        }

        .nav-item:hover {
            background: rgba(79, 195, 247, 0.05);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: rgba(79, 195, 247, 0.1);
            color: var(--accent-blue);
            border-left-color: var(--accent-blue);
        }

        .nav-item.completed::after {
            content: '‚úì';
            position: absolute;
            right: 15px;
            color: var(--accent-green);
            font-weight: bold;
        }

        .nav-icon {
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            margin-top: 70px;
            padding: 40px;
            max-width: 1100px;
            position: relative;
            z-index: 1;
        }

        /* Section Styles */
        .section {
            display: none;
            animation: fadeInUp 0.6s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 60px 0;
        }

        .hero-emoji {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: bounce 2s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .hero h1 {
            font-size: 3rem;
            font-weight: 800;
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.15rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .start-btn {
            background: var(--gradient-1);
            border: none;
            color: white;
            padding: 16px 50px;
            font-size: 1.1rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
            box-shadow: 0 10px 40px rgba(102, 126, 234, 0.4);
        }

        .start-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 50px rgba(102, 126, 234, 0.6);
        }

        /* Road Map */
        .roadmap {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 50px;
        }

        .roadmap-item {
            background: var(--bg-card);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .roadmap-item:hover {
            transform: translateY(-5px);
            border-color: rgba(79, 195, 247, 0.3);
        }

        .roadmap-item .rm-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
        }

        .roadmap-item h3 {
            font-size: 0.95rem;
            margin-bottom: 5px;
        }

        .roadmap-item p {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        /* Section Headers */
        .section-header {
            margin-bottom: 40px;
        }

        .section-header .breadcrumb {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .section-header .breadcrumb span {
            color: var(--accent-blue);
        }

        .section-header h2 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-header p {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Content Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: rgba(79, 195, 247, 0.15);
        }

        .card h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card p, .card li {
            color: var(--text-secondary);
            line-height: 1.8;
        }

        /* Definition Box */
        .definition-box {
            background: linear-gradient(135deg, rgba(79, 195, 247, 0.1), rgba(179, 136, 255, 0.1));
            border-left: 4px solid var(--accent-blue);
            border-radius: 0 16px 16px 0;
            padding: 25px 30px;
            margin: 20px 0;
        }

        .definition-box .def-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--accent-blue);
            font-weight: 700;
            margin-bottom: 8px;
        }

        .definition-box p {
            color: var(--text-primary) !important;
            font-size: 1.05rem;
        }

        /* Code Block */
        .code-block {
            background: #0d1117;
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 16px;
            margin: 20px 0;
            overflow: hidden;
        }

        .code-header {
            background: rgba(255,255,255,0.03);
            padding: 10px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }

        .code-header .dots {
            display: flex;
            gap: 6px;
        }

        .code-header .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .code-header .dot:nth-child(1) { background: #ff5f56; }
        .code-header .dot:nth-child(2) { background: #ffbd2e; }
        .code-header .dot:nth-child(3) { background: #27ca40; }

        .code-header .code-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
            font-family: 'Fira Code', monospace;
        }

        .code-header .copy-btn {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            color: var(--text-secondary);
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 0.7rem;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            transition: all 0.2s;
        }

        .code-header .copy-btn:hover {
            background: rgba(255,255,255,0.1);
            color: var(--text-primary);
        }

        .code-body {
            padding: 20px 25px;
            overflow-x: auto;
        }

        .code-body pre {
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            line-height: 1.8;
            color: #c9d1d9;
        }

        /* Syntax Highlighting */
        .kw { color: #ff7b72; }
        .fn { color: #d2a8ff; }
        .str { color: #a5d6ff; }
        .num { color: #79c0ff; }
        .cm { color: #8b949e; font-style: italic; }
        .par { color: #ffa657; }
        .op { color: #ff7b72; }
        .ret { color: #ff7b72; }
        .log { color: #79c0ff; }
        .prop { color: #79c0ff; }

        /* Visual Diagram */
        .visual-diagram {
            background: linear-gradient(135deg, rgba(26, 31, 78, 0.8), rgba(19, 24, 66, 0.8));
            border: 1px solid rgba(179, 136, 255, 0.2);
            border-radius: 20px;
            padding: 35px;
            margin: 25px 0;
            text-align: center;
        }

        .visual-diagram h4 {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--accent-purple);
            margin-bottom: 25px;
        }

        .flow-container {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .flow-box {
            padding: 15px 25px;
            border-radius: 14px;
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            font-weight: 600;
            min-width: 120px;
            position: relative;
        }

        .flow-box.keyword {
            background: rgba(255, 123, 114, 0.15);
            border: 2px solid rgba(255, 123, 114, 0.4);
            color: #ff7b72;
        }

        .flow-box.name {
            background: rgba(210, 168, 255, 0.15);
            border: 2px solid rgba(210, 168, 255, 0.4);
            color: #d2a8ff;
        }

        .flow-box.params {
            background: rgba(255, 166, 87, 0.15);
            border: 2px solid rgba(255, 166, 87, 0.4);
            color: #ffa657;
        }

        .flow-box.body {
            background: rgba(105, 240, 174, 0.15);
            border: 2px solid rgba(105, 240, 174, 0.4);
            color: #69f0ae;
        }

        .flow-box.return-box {
            background: rgba(79, 195, 247, 0.15);
            border: 2px solid rgba(79, 195, 247, 0.4);
            color: #4fc3f7;
        }

        .flow-box .flow-label {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.55rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            background: var(--bg-dark);
            padding: 0 8px;
            white-space: nowrap;
        }

        .flow-arrow {
            font-size: 1.5rem;
            color: var(--text-secondary);
        }

        /* Analogy Box */
        .analogy-box {
            background: linear-gradient(135deg, rgba(255, 171, 64, 0.08), rgba(255, 128, 171, 0.08));
            border: 1px solid rgba(255, 171, 64, 0.2);
            border-radius: 16px;
            padding: 25px 30px;
            margin: 20px 0;
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }

        .analogy-box .analogy-icon {
            font-size: 2.5rem;
            flex-shrink: 0;
        }

        .analogy-box h4 {
            color: var(--accent-orange);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .analogy-box p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Pitfall/Warning Box */
        .pitfall-box {
            background: linear-gradient(135deg, rgba(255, 82, 82, 0.08), rgba(255, 82, 82, 0.03));
            border: 1px solid rgba(255, 82, 82, 0.2);
            border-radius: 16px;
            padding: 25px 30px;
            margin: 20px 0;
        }

        .pitfall-box .pitfall-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            color: var(--accent-red);
            font-weight: 700;
            font-size: 1rem;
        }

        .pitfall-box p, .pitfall-box li {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .pitfall-box ul {
            padding-left: 20px;
            margin-top: 8px;
        }

        .pitfall-box li {
            margin-bottom: 5px;
        }

        /* Tip Box */
        .tip-box {
            background: linear-gradient(135deg, rgba(105, 240, 174, 0.08), rgba(56, 249, 215, 0.03));
            border: 1px solid rgba(105, 240, 174, 0.2);
            border-radius: 16px;
            padding: 25px 30px;
            margin: 20px 0;
        }

        .tip-box .tip-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            color: var(--accent-green);
            font-weight: 700;
            font-size: 1rem;
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 20px 0;
            overflow: hidden;
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.08);
        }

        .comparison-table th {
            background: rgba(79, 195, 247, 0.1);
            padding: 15px 20px;
            text-align: left;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--accent-blue);
        }

        .comparison-table td {
            padding: 14px 20px;
            border-top: 1px solid rgba(255,255,255,0.04);
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .comparison-table tr:nth-child(even) td {
            background: rgba(255,255,255,0.02);
        }

        .comparison-table code {
            font-family: 'Fira Code', monospace;
            background: rgba(255,255,255,0.05);
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            color: var(--accent-purple);
        }

        /* Interactive Runner */
        .code-runner {
            background: var(--bg-card);
            border: 2px solid rgba(79, 195, 247, 0.2);
            border-radius: 20px;
            overflow: hidden;
            margin: 25px 0;
        }

        .runner-header {
            background: rgba(79, 195, 247, 0.1);
            padding: 12px 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .runner-header h4 {
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--accent-blue);
        }

        .run-btn {
            background: var(--gradient-4);
            border: none;
            color: #1a1a2e;
            padding: 8px 24px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.8rem;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .run-btn:hover {
            transform: scale(1.05);
        }

        .runner-editor {
            padding: 20px;
        }

        .runner-editor textarea {
            width: 100%;
            min-height: 150px;
            background: #0d1117;
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 12px;
            color: #c9d1d9;
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            padding: 20px;
            resize: vertical;
            line-height: 1.8;
        }

        .runner-editor textarea:focus {
            outline: none;
            border-color: rgba(79, 195, 247, 0.4);
        }

        .runner-output {
            border-top: 1px solid rgba(255,255,255,0.06);
            padding: 15px 25px;
            min-height: 60px;
        }

        .runner-output .output-label {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--accent-green);
            margin-bottom: 8px;
        }

        .runner-output .output-content {
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            color: var(--accent-green);
            white-space: pre-wrap;
        }

        .runner-output .output-error {
            color: var(--accent-red);
        }

        /* Quiz Styles */
        .quiz-container {
            background: var(--bg-card);
            border: 2px solid rgba(179, 136, 255, 0.2);
            border-radius: 20px;
            overflow: hidden;
            margin: 25px 0;
        }

        .quiz-header {
            background: rgba(179, 136, 255, 0.1);
            padding: 15px 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .quiz-header h4 {
            color: var(--accent-purple);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quiz-score {
            font-size: 0.8rem;
            color: var(--accent-yellow);
            font-weight: 700;
        }

        .quiz-body {
            padding: 30px;
        }

        .quiz-question {
            font-size: 1.05rem;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .quiz-question code {
            font-family: 'Fira Code', monospace;
            background: rgba(255,255,255,0.05);
            padding: 2px 8px;
            border-radius: 4px;
            color: var(--accent-purple);
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .quiz-option {
            background: rgba(255,255,255,0.03);
            border: 2px solid rgba(255,255,255,0.08);
            border-radius: 14px;
            padding: 14px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.9rem;
        }

        .quiz-option:hover {
            border-color: rgba(179, 136, 255, 0.3);
            background: rgba(179, 136, 255, 0.05);
        }

        .quiz-option.correct {
            border-color: var(--accent-green) !important;
            background: rgba(105, 240, 174, 0.1) !important;
        }

        .quiz-option.wrong {
            border-color: var(--accent-red) !important;
            background: rgba(255, 82, 82, 0.1) !important;
        }

        .quiz-option .option-letter {
            width: 30px;
            height: 30px;
            border-radius: 8px;
            background: rgba(255,255,255,0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.8rem;
            flex-shrink: 0;
        }

        .quiz-option code {
            font-family: 'Fira Code', monospace;
            color: var(--accent-purple);
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 15px 20px;
            border-radius: 12px;
            font-size: 0.85rem;
            display: none;
        }

        .quiz-feedback.show { display: block; }

        .quiz-feedback.correct-feedback {
            background: rgba(105, 240, 174, 0.1);
            border: 1px solid rgba(105, 240, 174, 0.2);
            color: var(--accent-green);
        }

        .quiz-feedback.wrong-feedback {
            background: rgba(255, 82, 82, 0.1);
            border: 1px solid rgba(255, 82, 82, 0.2);
            color: var(--accent-red);
        }

        .quiz-next-btn {
            margin-top: 15px;
            background: var(--gradient-1);
            border: none;
            color: white;
            padding: 10px 24px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            display: none;
        }

        .quiz-next-btn.show { display: inline-block; }

        /* Scope Visualizer */
        .scope-visualizer {
            margin: 25px 0;
        }

        .scope-box {
            border: 2px dashed;
            border-radius: 16px;
            padding: 20px;
            margin: 10px 0;
            position: relative;
        }

        .scope-box.global {
            border-color: rgba(79, 195, 247, 0.4);
            background: rgba(79, 195, 247, 0.03);
        }

        .scope-box.function-scope {
            border-color: rgba(179, 136, 255, 0.4);
            background: rgba(179, 136, 255, 0.03);
            margin: 15px 10px;
        }

        .scope-box.block-scope {
            border-color: rgba(255, 171, 64, 0.4);
            background: rgba(255, 171, 64, 0.03);
            margin: 15px 10px;
        }

        .scope-label {
            position: absolute;
            top: -12px;
            left: 20px;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: 700;
            padding: 2px 10px;
            border-radius: 4px;
        }

        .scope-box.global .scope-label {
            background: var(--bg-dark);
            color: var(--accent-blue);
        }

        .scope-box.function-scope .scope-label {
            background: var(--bg-dark);
            color: var(--accent-purple);
        }

        .scope-box.block-scope .scope-label {
            background: var(--bg-dark);
            color: var(--accent-orange);
        }

        .scope-var {
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            padding: 6px 12px;
            margin: 5px 0;
            border-radius: 6px;
            display: inline-block;
        }

        .scope-var.accessible {
            background: rgba(105, 240, 174, 0.1);
            color: var(--accent-green);
        }

        .scope-var.blocked {
            background: rgba(255, 82, 82, 0.1);
            color: var(--accent-red);
            text-decoration: line-through;
        }

        /* Navigation Buttons */
        .section-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid rgba(255,255,255,0.05);
        }

        .nav-btn {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.1);
            color: var(--text-secondary);
            padding: 14px 28px;
            border-radius: 14px;
            font-size: 0.9rem;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn:hover {
            border-color: rgba(79, 195, 247, 0.3);
            color: var(--text-primary);
            background: rgba(79, 195, 247, 0.05);
        }

        .nav-btn.primary {
            background: var(--gradient-1);
            border: none;
            color: white;
        }

        .nav-btn.primary:hover {
            transform: translateY(-2px);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 5px;
            margin: 20px 0;
            background: rgba(255,255,255,0.03);
            padding: 5px;
            border-radius: 14px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 0.85rem;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.3s;
            border: none;
            background: none;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
        }

        .tab.active {
            background: var(--gradient-1);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeInUp 0.4s ease;
        }

        /* Achievement */
        .achievement-popup {
            position: fixed;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gradient-4);
            color: #1a1a2e;
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: 700;
            z-index: 9999;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 10px 40px rgba(67, 233, 123, 0.4);
            transition: top 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .achievement-popup.show {
            top: 90px;
        }

        /* Highlight animation */
        .highlight-anim {
            animation: highlightPulse 2s ease infinite;
        }

        @keyframes highlightPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(79, 195, 247, 0.2); }
            50% { box-shadow: 0 0 0 10px rgba(79, 195, 247, 0); }
        }

        /* Step by step */
        .step-container {
            counter-reset: step;
        }

        .step {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255,255,255,0.02);
            border-radius: 14px;
            border-left: 3px solid;
        }

        .step:nth-child(1) { border-color: var(--accent-blue); }
        .step:nth-child(2) { border-color: var(--accent-purple); }
        .step:nth-child(3) { border-color: var(--accent-green); }
        .step:nth-child(4) { border-color: var(--accent-orange); }
        .step:nth-child(5) { border-color: var(--accent-pink); }

        .step-number {
            counter-increment: step;
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .step:nth-child(1) .step-number { background: rgba(79, 195, 247, 0.2); color: var(--accent-blue); }
        .step:nth-child(2) .step-number { background: rgba(179, 136, 255, 0.2); color: var(--accent-purple); }
        .step:nth-child(3) .step-number { background: rgba(105, 240, 174, 0.2); color: var(--accent-green); }
        .step:nth-child(4) .step-number { background: rgba(255, 171, 64, 0.2); color: var(--accent-orange); }
        .step:nth-child(5) .step-number { background: rgba(255, 128, 171, 0.2); color: var(--accent-pink); }

        .step-content h4 {
            font-size: 0.95rem;
            margin-bottom: 5px;
        }

        .step-content p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Inline highlight */
        .hl-blue { color: var(--accent-blue); font-weight: 600; }
        .hl-purple { color: var(--accent-purple); font-weight: 600; }
        .hl-green { color: var(--accent-green); font-weight: 600; }
        .hl-orange { color: var(--accent-orange); font-weight: 600; }
        .hl-red { color: var(--accent-red); font-weight: 600; }
        .hl-pink { color: var(--accent-pink); font-weight: 600; }

        code.inline {
            font-family: 'Fira Code', monospace;
            background: rgba(255,255,255,0.06);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.85rem;
            color: var(--accent-purple);
        }

        /* Responsive */
        @media (max-width: 900px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .sidebar-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .main-content {
                margin-left: 0;
                padding: 20px;
            }

            .hero h1 { font-size: 2rem; }
            .flow-container { flex-direction: column; }
            .flow-arrow { transform: rotate(90deg); }

            .section-header h2 { font-size: 1.5rem; }
        }

        @media (max-width: 600px) {
            .navbar-inner { padding: 0 15px; }
            .progress-container { display: none; }
            .roadmap { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body>

<!-- Background Animation -->
<div class="bg-animation" id="bgAnimation"></div>

<!-- Achievement Popup -->
<div class="achievement-popup" id="achievementPopup">
    üèÜ <span id="achievementText"></span>
</div>

<!-- Navbar -->
<nav class="navbar">
    <div class="navbar-inner">
        <div class="logo">
            <span>‚ö°</span> JS Functions Academy
        </div>
        <div class="progress-container">
            <div class="progress-label">
                <span>Progress</span>
                <span id="progressPercent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>
        <div class="xp-badge">
            ‚≠ê <span id="xpCount">0</span> XP
        </div>
    </div>
</nav>

<!-- Sidebar Toggle -->
<button class="sidebar-toggle" id="sidebarToggle" onclick="toggleSidebar()">‚ò∞</button>

<!-- Sidebar -->
<aside class="sidebar" id="sidebar">
    <div class="nav-section-title">Getting Started</div>
    <div class="nav-item active" data-section="welcome" onclick="navigateTo('welcome')">
        <div class="nav-icon" style="background: rgba(79, 195, 247, 0.15); color: var(--accent-blue);">üè†</div>
        Welcome
    </div>

    <div class="nav-section-title">Core Lessons</div>
    <div class="nav-item" data-section="what-are-functions" onclick="navigateTo('what-are-functions')">
        <div class="nav-icon" style="background: rgba(179, 136, 255, 0.15); color: var(--accent-purple);">üì¶</div>
        What Are Functions?
    </div>
    <div class="nav-item" data-section="declarations" onclick="navigateTo('declarations')">
        <div class="nav-icon" style="background: rgba(105, 240, 174, 0.15); color: var(--accent-green);">üìù</div>
        Function Declarations
    </div>
    <div class="nav-item" data-section="expressions" onclick="navigateTo('expressions')">
        <div class="nav-icon" style="background: rgba(255, 171, 64, 0.15); color: var(--accent-orange);">üé≠</div>
        Function Expressions
    </div>
    <div class="nav-item" data-section="parameters" onclick="navigateTo('parameters')">
        <div class="nav-icon" style="background: rgba(255, 128, 171, 0.15); color: var(--accent-pink);">üì¨</div>
        Parameters & Arguments
    </div>
    <div class="nav-item" data-section="return-values" onclick="navigateTo('return-values')">
        <div class="nav-icon" style="background: rgba(255, 215, 64, 0.15); color: var(--accent-yellow);">üì§</div>
        Return Values
    </div>
    <div class="nav-item" data-section="scope" onclick="navigateTo('scope')">
        <div class="nav-icon" style="background: rgba(79, 195, 247, 0.15); color: var(--accent-blue);">üî≠</div>
        Function Scope
    </div>
    <div class="nav-item" data-section="invocation" onclick="navigateTo('invocation')">
        <div class="nav-icon" style="background: rgba(255, 82, 82, 0.15); color: var(--accent-red);">üöÄ</div>
        Invocation & Calling
    </div>

    <div class="nav-section-title">Practice & Test</div>
    <div class="nav-item" data-section="pitfalls" onclick="navigateTo('pitfalls')">
        <div class="nav-icon" style="background: rgba(255, 82, 82, 0.15); color: var(--accent-red);">‚ö†Ô∏è</div>
        Common Pitfalls
    </div>
    <div class="nav-item" data-section="quiz" onclick="navigateTo('quiz')">
        <div class="nav-icon" style="background: rgba(179, 136, 255, 0.15); color: var(--accent-purple);">üß†</div>
        Final Quiz
    </div>
    <div class="nav-item" data-section="playground" onclick="navigateTo('playground')">
        <div class="nav-icon" style="background: rgba(105, 240, 174, 0.15); color: var(--accent-green);">üéÆ</div>
        Playground
    </div>
</aside>

<!-- Main Content -->
<main class="main-content">

    <!-- ==================== WELCOME ==================== -->
    <div class="section active" id="section-welcome">
        <div class="hero">
            <div class="hero-emoji">üöÄ</div>
            <h1>Master JavaScript Functions</h1>
            <p>Your interactive journey to understanding functions ‚Äî the building blocks of JavaScript. Learn by doing, visualizing, and playing!</p>
            <button class="start-btn" onclick="navigateTo('what-are-functions')">
                Start Learning ‚Üí
            </button>
            <div class="roadmap">
                <div class="roadmap-item" onclick="navigateTo('what-are-functions')">
                    <div class="rm-icon">üì¶</div>
                    <h3>What Are Functions?</h3>
                    <p>The big picture</p>
                </div>
                <div class="roadmap-item" onclick="navigateTo('declarations')">
                    <div class="rm-icon">üìù</div>
                    <h3>Declarations</h3>
                    <p>Creating functions</p>
                </div>
                <div class="roadmap-item" onclick="navigateTo('expressions')">
                    <div class="rm-icon">üé≠</div>
                    <h3>Expressions</h3>
                    <p>Functions as values</p>
                </div>
                <div class="roadmap-item" onclick="navigateTo('parameters')">
                    <div class="rm-icon">üì¨</div>
                    <h3>Parameters</h3>
                    <p>Inputs to functions</p>
                </div>
                <div class="roadmap-item" onclick="navigateTo('return-values')">
                    <div class="rm-icon">üì§</div>
                    <h3>Return Values</h3>
                    <p>Getting results back</p>
                </div>
                <div class="roadmap-item" onclick="navigateTo('scope')">
                    <div class="rm-icon">üî≠</div>
                    <h3>Scope</h3>
                    <p>Variable visibility</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== WHAT ARE FUNCTIONS ==================== -->
    <div class="section" id="section-what-are-functions">
        <div class="section-header">
            <div class="breadcrumb">Core Lessons / <span>What Are Functions?</span></div>
            <h2>üì¶ What Are Functions?</h2>
            <p>Understanding the most important concept in JavaScript</p>
        </div>

        <div class="card">
            <h3>üéØ The Big Idea</h3>
            <div class="definition-box">
                <div class="def-label">üìñ Definition</div>
                <p>A <strong>function</strong> is a reusable block of code designed to perform a particular task. You define it once, then call (use) it whenever you need it ‚Äî as many times as you want.</p>
            </div>

            <div class="analogy-box">
                <div class="analogy-icon">üç≥</div>
                <div>
                    <h4>Think of it like a Recipe</h4>
                    <p>A recipe is written once but can be used over and over. You <strong>define</strong> the recipe (write the steps), then you <strong>call</strong> it (follow the steps) whenever you want to cook. You can also customize it with different <strong>ingredients</strong> (parameters) each time!</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>‚ùì Why Do We Need Functions?</h3>
            <div class="step-container">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>üîÑ Reusability</h4>
                        <p>Write code once, use it many times. No copy-pasting!</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>üìê Organization</h4>
                        <p>Break complex problems into smaller, manageable chunks.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>üêõ Easier Debugging</h4>
                        <p>Fix a bug in one place instead of everywhere you pasted the code.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>üìñ Readability</h4>
                        <p>Give meaningful names to blocks of code so others (and future you) understand it.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üîç Without vs. With Functions</h3>
            <div class="tabs">
                <button class="tab active" onclick="switchTab(this, 'without-fn')">‚ùå Without Functions</button>
                <button class="tab" onclick="switchTab(this, 'with-fn')">‚úÖ With Functions</button>
            </div>
            <div class="tab-content active" id="tab-without-fn">
                <div class="code-block">
                    <div class="code-header">
                        <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                        <span class="code-label">repetitive-code.js</span>
                        <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                    </div>
                    <div class="code-body">
<pre><span class="cm">// üò© Greeting different people ‚Äî repeating code!</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="str">"Hello, Alice! Welcome aboard!"</span>);
<span class="log">console</span>.<span class="fn">log</span>(<span class="str">"Hello, Bob! Welcome aboard!"</span>);
<span class="log">console</span>.<span class="fn">log</span>(<span class="str">"Hello, Charlie! Welcome aboard!"</span>);
<span class="cm">// What if we want to change the message? 
// We'd have to change EVERY single line! üò±</span></pre>
                    </div>
                </div>
            </div>
            <div class="tab-content" id="tab-with-fn">
                <div class="code-block">
                    <div class="code-header">
                        <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                        <span class="code-label">clean-code.js</span>
                        <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                    </div>
                    <div class="code-body">
<pre><span class="cm">// üòé Define it ONCE</span>
<span class="kw">function</span> <span class="fn">greet</span>(<span class="par">name</span>) {
    <span class="log">console</span>.<span class="fn">log</span>(<span class="str">"Hello, "</span> + <span class="par">name</span> + <span class="str">"! Welcome aboard!"</span>);
}

<span class="cm">// ‚úÖ Use it as many times as you want!</span>
<span class="fn">greet</span>(<span class="str">"Alice"</span>);    <span class="cm">// Hello, Alice! Welcome aboard!</span>
<span class="fn">greet</span>(<span class="str">"Bob"</span>);      <span class="cm">// Hello, Bob! Welcome aboard!</span>
<span class="fn">greet</span>(<span class="str">"Charlie"</span>);  <span class="cm">// Hello, Charlie! Welcome aboard!</span>
<span class="cm">// Want to change the message? Change ONE place! üéâ</span></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mini Quiz -->
        <div class="quiz-container">
            <div class="quiz-header">
                <h4>üß† Quick Check</h4>
            </div>
            <div class="quiz-body">
                <div class="quiz-question">Which of these is <strong>NOT</strong> a benefit of using functions?</div>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q1')">
                        <div class="option-letter">A</div>
                        <span>Code reusability</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q1')">
                        <div class="option-letter">B</div>
                        <span>Better organization</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, true, 'q1')">
                        <div class="option-letter">C</div>
                        <span>Making your code run faster automatically</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q1')">
                        <div class="option-letter">D</div>
                        <span>Easier debugging</span>
                    </div>
                </div>
                <div class="quiz-feedback" id="feedback-q1"></div>
            </div>
        </div>

        <div class="section-nav">
            <button class="nav-btn" onclick="navigateTo('welcome')">‚Üê Welcome</button>
            <button class="nav-btn primary" onclick="navigateTo('declarations')">Function Declarations ‚Üí</button>
        </div>
    </div>

    <!-- ==================== FUNCTION DECLARATIONS ==================== -->
    <div class="section" id="section-declarations">
        <div class="section-header">
            <div class="breadcrumb">Core Lessons / <span>Function Declarations</span></div>
            <h2>üìù Function Declarations</h2>
            <p>The classic way to create functions in JavaScript</p>
        </div>

        <div class="card">
            <h3>üîß Anatomy of a Function Declaration</h3>
            <div class="definition-box">
                <div class="def-label">üìñ Definition</div>
                <p>A <strong>function declaration</strong> (also called a function statement) defines a named function using the <code class="inline">function</code> keyword. It is <strong>hoisted</strong>, meaning you can call it before it appears in your code.</p>
            </div>

            <div class="visual-diagram">
                <h4>üî¨ Visual Breakdown</h4>
                <div class="flow-container">
                    <div class="flow-box keyword">
                        <div class="flow-label">KEYWORD</div>
                        function
                    </div>
                    <div class="flow-box name">
                        <div class="flow-label">NAME</div>
                        greet
                    </div>
                    <div class="flow-box params">
                        <div class="flow-label">PARAMETERS</div>
                        (name)
                    </div>
                    <div class="flow-box body">
                        <div class="flow-label">BODY { ... }</div>
                        { code here }
                    </div>
                </div>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">declaration.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="cm">// ‚úÖ Function Declaration Syntax</span>
<span class="kw">function</span> <span class="fn">sayHello</span>() {
    <span class="log">console</span>.<span class="fn">log</span>(<span class="str">"Hello, World!"</span>);
}

<span class="cm">// Call (invoke) the function</span>
<span class="fn">sayHello</span>();  <span class="cm">// Output: Hello, World!</span>

<span class="cm">// With a parameter</span>
<span class="kw">function</span> <span class="fn">add</span>(<span class="par">a</span>, <span class="par">b</span>) {
    <span class="kw">return</span> <span class="par">a</span> + <span class="par">b</span>;
}

<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">add</span>(<span class="num">3</span>, <span class="num">5</span>));  <span class="cm">// Output: 8</span></pre>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>ü™Ñ Hoisting ‚Äî The Magic Trick</h3>
            <div class="definition-box">
                <div class="def-label">üìñ What is Hoisting?</div>
                <p><strong>Hoisting</strong> means JavaScript moves function declarations to the top of their scope before running the code. So you can call a declared function <em>before</em> writing it!</p>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">hoisting-magic.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="cm">// ‚úÖ This WORKS! Thanks to hoisting</span>
<span class="fn">sayGoodbye</span>();  <span class="cm">// Output: Goodbye!</span>

<span class="kw">function</span> <span class="fn">sayGoodbye</span>() {
    <span class="log">console</span>.<span class="fn">log</span>(<span class="str">"Goodbye!"</span>);
}

<span class="cm">// JavaScript "hoists" the function declaration to the top,
// so it's as if you wrote the function first.</span></pre>
                </div>
            </div>

            <div class="analogy-box">
                <div class="analogy-icon">üìã</div>
                <div>
                    <h4>Analogy: The Class Register</h4>
                    <p>Imagine a teacher who reads the entire class register before starting class. Even if "Zara" is at the bottom of the list, the teacher already knows she exists. Hoisting is like JavaScript "reading" all function declarations before running any code.</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üìê Naming Rules</h3>
            <div class="tip-box">
                <div class="tip-header">üí° Best Practices for Function Names</div>
                <ul style="padding-left: 20px; color: var(--text-secondary);">
                    <li>Use <strong>camelCase</strong>: <code class="inline">calculateTotal</code>, <code class="inline">getUserName</code></li>
                    <li>Start with a <strong>verb</strong>: <code class="inline">get...</code>, <code class="inline">set...</code>, <code class="inline">is...</code>, <code class="inline">has...</code>, <code class="inline">calculate...</code></li>
                    <li>Be <strong>descriptive</strong>: <code class="inline">calculateTax</code> not <code class="inline">ct</code></li>
                    <li>Must start with a letter, <code class="inline">_</code>, or <code class="inline">$</code></li>
                    <li>Cannot use reserved words like <code class="inline">return</code>, <code class="inline">function</code>, <code class="inline">if</code></li>
                </ul>
            </div>
        </div>

        <!-- Mini Quiz -->
        <div class="quiz-container">
            <div class="quiz-header">
                <h4>üß† Quick Check</h4>
            </div>
            <div class="quiz-body">
                <div class="quiz-question">What makes function declarations special compared to other ways of creating functions?</div>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q2')">
                        <div class="option-letter">A</div>
                        <span>They run faster</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, true, 'q2')">
                        <div class="option-letter">B</div>
                        <span>They are hoisted ‚Äî you can call them before they appear in code</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q2')">
                        <div class="option-letter">C</div>
                        <span>They use less memory</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q2')">
                        <div class="option-letter">D</div>
                        <span>They can only be called once</span>
                    </div>
                </div>
                <div class="quiz-feedback" id="feedback-q2"></div>
            </div>
        </div>

        <div class="section-nav">
            <button class="nav-btn" onclick="navigateTo('what-are-functions')">‚Üê What Are Functions?</button>
            <button class="nav-btn primary" onclick="navigateTo('expressions')">Function Expressions ‚Üí</button>
        </div>
    </div>

    <!-- ==================== FUNCTION EXPRESSIONS ==================== -->
    <div class="section" id="section-expressions">
        <div class="section-header">
            <div class="breadcrumb">Core Lessons / <span>Function Expressions</span></div>
            <h2>üé≠ Function Expressions</h2>
            <p>Functions as values ‚Äî a different way to think</p>
        </div>

        <div class="card">
            <h3>üéØ What is a Function Expression?</h3>
            <div class="definition-box">
                <div class="def-label">üìñ Definition</div>
                <p>A <strong>function expression</strong> creates a function and assigns it to a variable. The function can be named or <strong>anonymous</strong> (no name). Unlike declarations, function expressions are <strong>NOT hoisted</strong>.</p>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">expressions.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="cm">// ‚úÖ Function Expression (anonymous)</span>
<span class="kw">const</span> <span class="fn">greet</span> = <span class="kw">function</span>(<span class="par">name</span>) {
    <span class="kw">return</span> <span class="str">"Hello, "</span> + <span class="par">name</span> + <span class="str">"!"</span>;
};

<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">greet</span>(<span class="str">"Alice"</span>));  <span class="cm">// Hello, Alice!</span>

<span class="cm">// ‚úÖ Arrow Function (modern shorthand)</span>
<span class="kw">const</span> <span class="fn">add</span> = (<span class="par">a</span>, <span class="par">b</span>) <span class="op">=></span> <span class="par">a</span> + <span class="par">b</span>;

<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">add</span>(<span class="num">3</span>, <span class="num">7</span>));  <span class="cm">// 10</span>

<span class="cm">// ‚úÖ Named Function Expression</span>
<span class="kw">const</span> <span class="fn">factorial</span> = <span class="kw">function</span> <span class="fn">fact</span>(<span class="par">n</span>) {
    <span class="kw">return</span> <span class="par">n</span> <= <span class="num">1</span> ? <span class="num">1</span> : <span class="par">n</span> * <span class="fn">fact</span>(<span class="par">n</span> - <span class="num">1</span>);
};</pre>
                </div>
            </div>

            <div class="analogy-box">
                <div class="analogy-icon">üì¶</div>
                <div>
                    <h4>Analogy: Storing a Recipe in a Box</h4>
                    <p>A function declaration is like pinning a recipe on the wall with a label. A function expression is like writing the recipe on a card and <em>putting it in a labeled box</em>. The box (variable) holds the recipe (function). You access the recipe through the box.</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üèπ Arrow Functions (ES6+)</h3>
            <div class="definition-box">
                <div class="def-label">üìñ Definition</div>
                <p><strong>Arrow functions</strong> are a shorter syntax for function expressions, introduced in ES6 (2015). They use <code class="inline">=></code> instead of the <code class="inline">function</code> keyword.</p>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">arrows.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="cm">// Regular function expression</span>
<span class="kw">const</span> <span class="fn">square1</span> = <span class="kw">function</span>(<span class="par">x</span>) {
    <span class="kw">return</span> <span class="par">x</span> * <span class="par">x</span>;
};

<span class="cm">// Arrow function (full body)</span>
<span class="kw">const</span> <span class="fn">square2</span> = (<span class="par">x</span>) <span class="op">=></span> {
    <span class="kw">return</span> <span class="par">x</span> * <span class="par">x</span>;
};

<span class="cm">// Arrow function (concise ‚Äî implicit return)</span>
<span class="kw">const</span> <span class="fn">square3</span> = (<span class="par">x</span>) <span class="op">=></span> <span class="par">x</span> * <span class="par">x</span>;

<span class="cm">// Single param ‚Äî parentheses optional</span>
<span class="kw">const</span> <span class="fn">double</span> = <span class="par">x</span> <span class="op">=></span> <span class="par">x</span> * <span class="num">2</span>;

<span class="cm">// No params ‚Äî empty parentheses required</span>
<span class="kw">const</span> <span class="fn">getRandom</span> = () <span class="op">=></span> <span class="prop">Math</span>.<span class="fn">random</span>();</pre>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>‚öñÔ∏è Declaration vs. Expression</h3>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>Declaration</th>
                        <th>Expression</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Syntax</td>
                        <td><code>function name() {}</code></td>
                        <td><code>const name = function() {}</code></td>
                    </tr>
                    <tr>
                        <td>Hoisted?</td>
                        <td>‚úÖ Yes</td>
                        <td>‚ùå No</td>
                    </tr>
                    <tr>
                        <td>Can call before definition?</td>
                        <td>‚úÖ Yes</td>
                        <td>‚ùå No (ReferenceError)</td>
                    </tr>
                    <tr>
                        <td>Has a name?</td>
                        <td>Always named</td>
                        <td>Can be anonymous</td>
                    </tr>
                    <tr>
                        <td>Arrow version?</td>
                        <td>‚ùå No</td>
                        <td>‚úÖ Yes: <code>() => {}</code></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="pitfall-box">
            <div class="pitfall-header">‚ö†Ô∏è Pitfall: No Hoisting for Expressions!</div>
            <div class="code-block" style="margin-top: 10px;">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">no-hoisting.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="cm">// ‚ùå This will CRASH!</span>
<span class="fn">sayHi</span>();  <span class="cm">// ‚ùå ReferenceError: Cannot access 'sayHi' before initialization</span>

<span class="kw">const</span> <span class="fn">sayHi</span> = <span class="kw">function</span>() {
    <span class="log">console</span>.<span class="fn">log</span>(<span class="str">"Hi!"</span>);
};

<span class="cm">// ‚úÖ This works ‚Äî declarations ARE hoisted</span>
<span class="fn">sayBye</span>();  <span class="cm">// Bye!</span>

<span class="kw">function</span> <span class="fn">sayBye</span>() {
    <span class="log">console</span>.<span class="fn">log</span>(<span class="str">"Bye!"</span>);
}</pre>
                </div>
            </div>
        </div>

        <!-- Mini Quiz -->
        <div class="quiz-container">
            <div class="quiz-header">
                <h4>üß† Quick Check</h4>
            </div>
            <div class="quiz-body">
                <div class="quiz-question">Which code will cause an error?</div>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q3')">
                        <div class="option-letter">A</div>
                        <span><code>function hello() {} hello();</code></span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, true, 'q3')">
                        <div class="option-letter">B</div>
                        <span><code>hello(); const hello = () => {};</code></span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q3')">
                        <div class="option-letter">C</div>
                        <span><code>hello(); function hello() {}</code></span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q3')">
                        <div class="option-letter">D</div>
                        <span><code>const hello = () => {}; hello();</code></span>
                    </div>
                </div>
                <div class="quiz-feedback" id="feedback-q3"></div>
            </div>
        </div>

        <div class="section-nav">
            <button class="nav-btn" onclick="navigateTo('declarations')">‚Üê Declarations</button>
            <button class="nav-btn primary" onclick="navigateTo('parameters')">Parameters ‚Üí</button>
        </div>
    </div>

    <!-- ==================== PARAMETERS & ARGUMENTS ==================== -->
    <div class="section" id="section-parameters">
        <div class="section-header">
            <div class="breadcrumb">Core Lessons / <span>Parameters & Arguments</span></div>
            <h2>üì¨ Parameters & Arguments</h2>
            <p>How to pass data INTO your functions</p>
        </div>

        <div class="card">
            <h3>üéØ Parameters vs Arguments</h3>
            <div class="definition-box">
                <div class="def-label">üìñ Key Difference</div>
                <p><strong>Parameters</strong> are the <em>placeholders</em> listed in the function definition. <strong>Arguments</strong> are the <em>actual values</em> passed when you call the function. Think: <strong>Parameters = Parking spots. Arguments = Cars.</strong></p>
            </div>

            <div class="visual-diagram">
                <h4>üî¨ Parameters vs Arguments</h4>
                <div class="flow-container">
                    <div class="flow-box params" style="min-width: 250px;">
                        <div class="flow-label">PARAMETERS (Placeholders)</div>
                        function add(<strong>a</strong>, <strong>b</strong>)
                    </div>
                    <div class="flow-arrow">‚¨áÔ∏è</div>
                    <div class="flow-box body" style="min-width: 250px;">
                        <div class="flow-label">ARGUMENTS (Actual Values)</div>
                        add(<strong>5</strong>, <strong>3</strong>)
                    </div>
                </div>
                <p style="margin-top: 20px; font-size: 0.85rem; color: var(--text-secondary);">
                    <span class="hl-orange">a</span> receives the value <span class="hl-green">5</span> &nbsp;|&nbsp;
                    <span class="hl-orange">b</span> receives the value <span class="hl-green">3</span>
                </p>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">params-vs-args.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="cm">//        ‚Üì parameters (placeholders)</span>
<span class="kw">function</span> <span class="fn">multiply</span>(<span class="par">x</span>, <span class="par">y</span>) {
    <span class="kw">return</span> <span class="par">x</span> * <span class="par">y</span>;
}

<span class="cm">//             ‚Üì arguments (actual values)</span>
<span class="kw">let</span> result = <span class="fn">multiply</span>(<span class="num">4</span>, <span class="num">7</span>);  <span class="cm">// result = 28</span>

<span class="cm">// x receives 4, y receives 7</span></pre>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üéÅ Default Parameters</h3>
            <div class="definition-box">
                <div class="def-label">üìñ Definition</div>
                <p><strong>Default parameters</strong> provide fallback values when an argument is not passed (or is <code class="inline">undefined</code>).</p>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">defaults.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="kw">function</span> <span class="fn">greet</span>(<span class="par">name</span> = <span class="str">"Stranger"</span>, <span class="par">greeting</span> = <span class="str">"Hello"</span>) {
    <span class="log">console</span>.<span class="fn">log</span>(<span class="par">greeting</span> + <span class="str">", "</span> + <span class="par">name</span> + <span class="str">"!"</span>);
}

<span class="fn">greet</span>(<span class="str">"Alice"</span>, <span class="str">"Hi"</span>);  <span class="cm">// Hi, Alice!</span>
<span class="fn">greet</span>(<span class="str">"Bob"</span>);           <span class="cm">// Hello, Bob!      (default greeting)</span>
<span class="fn">greet</span>();                 <span class="cm">// Hello, Stranger! (both defaults used)</span></pre>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üî¢ Multiple Parameters & Rest Parameters</h3>
            <div class="code-block">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">multiple-params.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="cm">// Multiple parameters</span>
<span class="kw">function</span> <span class="fn">createUser</span>(<span class="par">name</span>, <span class="par">age</span>, <span class="par">email</span>) {
    <span class="kw">return</span> { <span class="par">name</span>, <span class="par">age</span>, <span class="par">email</span> };
}

<span class="cm">// Rest parameters ‚Äî collect unlimited arguments</span>
<span class="kw">function</span> <span class="fn">sum</span>(<span class="op">...</span><span class="par">numbers</span>) {
    <span class="kw">let</span> total = <span class="num">0</span>;
    <span class="kw">for</span> (<span class="kw">let</span> <span class="par">num</span> <span class="kw">of</span> <span class="par">numbers</span>) {
        total += <span class="par">num</span>;
    }
    <span class="kw">return</span> total;
}

<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">sum</span>(<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>));        <span class="cm">// 6</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">sum</span>(<span class="num">10</span>, <span class="num">20</span>, <span class="num">30</span>, <span class="num">40</span>)); <span class="cm">// 100</span></pre>
                </div>
            </div>
        </div>

        <div class="pitfall-box">
            <div class="pitfall-header">‚ö†Ô∏è Common Mistakes with Parameters</div>
            <ul>
                <li><strong>Wrong order:</strong> Arguments are matched by <em>position</em>, not name. <code class="inline">greet("Hi", "Bob")</code> passes "Hi" as name!</li>
                <li><strong>Too few arguments:</strong> Missing arguments become <code class="inline">undefined</code>, not an error.</li>
                <li><strong>Too many arguments:</strong> Extra arguments are silently ignored (unless you use rest parameters).</li>
            </ul>
            <div class="code-block" style="margin-top: 10px;">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">param-pitfalls.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="kw">function</span> <span class="fn">introduce</span>(<span class="par">name</span>, <span class="par">age</span>) {
    <span class="log">console</span>.<span class="fn">log</span>(<span class="par">name</span> + <span class="str">" is "</span> + <span class="par">age</span> + <span class="str">" years old"</span>);
}

<span class="fn">introduce</span>(<span class="str">"Alice"</span>);           <span class="cm">// Alice is undefined years old üò¨</span>
<span class="fn">introduce</span>(<span class="str">"Bob"</span>, <span class="num">25</span>, <span class="str">"extra"</span>); <span class="cm">// Bob is 25 years old (extra ignored)</span>
<span class="fn">introduce</span>(<span class="num">30</span>, <span class="str">"Charlie"</span>);     <span class="cm">// 30 is Charlie years old ü§¶ (wrong order!)</span></pre>
                </div>
            </div>
        </div>

        <!-- Quiz -->
        <div class="quiz-container">
            <div class="quiz-header">
                <h4>üß† Quick Check</h4>
            </div>
            <div class="quiz-body">
                <div class="quiz-question">What does <code>greet("World")</code> output?<br>
                <code>function greet(name = "Friend") { console.log("Hey " + name); }</code></div>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q4')">
                        <div class="option-letter">A</div>
                        <span>Hey Friend</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, true, 'q4')">
                        <div class="option-letter">B</div>
                        <span>Hey World</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q4')">
                        <div class="option-letter">C</div>
                        <span>Hey undefined</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q4')">
                        <div class="option-letter">D</div>
                        <span>Error</span>
                    </div>
                </div>
                <div class="quiz-feedback" id="feedback-q4"></div>
            </div>
        </div>

        <div class="section-nav">
            <button class="nav-btn" onclick="navigateTo('expressions')">‚Üê Expressions</button>
            <button class="nav-btn primary" onclick="navigateTo('return-values')">Return Values ‚Üí</button>
        </div>
    </div>

    <!-- ==================== RETURN VALUES ==================== -->
    <div class="section" id="section-return-values">
        <div class="section-header">
            <div class="breadcrumb">Core Lessons / <span>Return Values</span></div>
            <h2>üì§ Return Values</h2>
            <p>Getting results back from your functions</p>
        </div>

        <div class="card">
            <h3>üéØ The Return Statement</h3>
            <div class="definition-box">
                <div class="def-label">üìñ Definition</div>
                <p>The <code class="inline">return</code> statement <strong>stops the function</strong> and <strong>sends a value back</strong> to wherever the function was called. Without <code class="inline">return</code>, a function returns <code class="inline">undefined</code>.</p>
            </div>

            <div class="visual-diagram">
                <h4>üî¨ How Return Works</h4>
                <div class="flow-container">
                    <div class="flow-box body" style="min-width: 160px;">
                        <div class="flow-label">CALL</div>
                        add(3, 5)
                    </div>
                    <div class="flow-arrow">‚û°Ô∏è</div>
                    <div class="flow-box keyword" style="min-width: 160px;">
                        <div class="flow-label">FUNCTION RUNS</div>
                        3 + 5 = 8
                    </div>
                    <div class="flow-arrow">‚û°Ô∏è</div>
                    <div class="flow-box return-box" style="min-width: 160px;">
                        <div class="flow-label">RETURN</div>
                        return 8
                    </div>
                    <div class="flow-arrow">‚û°Ô∏è</div>
                    <div class="flow-box name" style="min-width: 160px;">
                        <div class="flow-label">RESULT</div>
                        result = 8
                    </div>
                </div>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">return-basics.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="cm">// ‚úÖ Function WITH return ‚Äî gives a value back</span>
<span class="kw">function</span> <span class="fn">add</span>(<span class="par">a</span>, <span class="par">b</span>) {
    <span class="kw">return</span> <span class="par">a</span> + <span class="par">b</span>;  <span class="cm">// sends the result back</span>
}

<span class="kw">let</span> result = <span class="fn">add</span>(<span class="num">3</span>, <span class="num">5</span>);  <span class="cm">// result = 8</span>
<span class="log">console</span>.<span class="fn">log</span>(result);       <span class="cm">// 8</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">add</span>(<span class="num">10</span>, <span class="num">20</span>)); <span class="cm">// 30 ‚Äî use directly!</span>

<span class="cm">// ‚ùå Function WITHOUT return ‚Äî returns undefined</span>
<span class="kw">function</span> <span class="fn">addNoReturn</span>(<span class="par">a</span>, <span class="par">b</span>) {
    <span class="kw">let</span> sum = <span class="par">a</span> + <span class="par">b</span>;  <span class="cm">// calculates but doesn't return!</span>
}

<span class="kw">let</span> oops = <span class="fn">addNoReturn</span>(<span class="num">3</span>, <span class="num">5</span>);
<span class="log">console</span>.<span class="fn">log</span>(oops);  <span class="cm">// undefined üò¨</span></pre>
                </div>
            </div>

            <div class="analogy-box">
                <div class="analogy-icon">üèß</div>
                <div>
                    <h4>Analogy: The ATM Machine</h4>
                    <p>You insert your card and PIN (arguments), the ATM processes your request (function body), and it <strong>returns</strong> cash to you. If the ATM just counted your money internally but never dispensed it ‚Äî that's a function without <code class="inline">return</code>!</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üõë Return Stops Execution</h3>
            <p style="color: var(--text-secondary); margin-bottom: 15px;">Any code after <code class="inline">return</code> will <strong>never run</strong>. This is called "unreachable code".</p>
            <div class="code-block">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">return-stops.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="kw">function</span> <span class="fn">checkAge</span>(<span class="par">age</span>) {
    <span class="kw">if</span> (<span class="par">age</span> < <span class="num">18</span>) {
        <span class="kw">return</span> <span class="str">"Too young!"</span>;  <span class="cm">// ‚Üê function STOPS here if age < 18</span>
    }
    <span class="kw">return</span> <span class="str">"Welcome in!"</span>;   <span class="cm">// ‚Üê only runs if age >= 18</span>
    
    <span class="log">console</span>.<span class="fn">log</span>(<span class="str">"This never runs!"</span>);  <span class="cm">// ‚ö†Ô∏è Unreachable code!</span>
}

<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">checkAge</span>(<span class="num">15</span>));  <span class="cm">// "Too young!"</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">checkAge</span>(<span class="num">25</span>));  <span class="cm">// "Welcome in!"</span></pre>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üîó Returning Different Types</h3>
            <div class="code-block">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">return-types.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="cm">// Return a number</span>
<span class="kw">function</span> <span class="fn">getPrice</span>()  { <span class="kw">return</span> <span class="num">9.99</span>; }

<span class="cm">// Return a string</span>
<span class="kw">function</span> <span class="fn">getName</span>()   { <span class="kw">return</span> <span class="str">"Alice"</span>; }

<span class="cm">// Return a boolean</span>
<span class="kw">function</span> <span class="fn">isAdult</span>(<span class="par">age</span>) { <span class="kw">return</span> <span class="par">age</span> >= <span class="num">18</span>; }

<span class="cm">// Return an array</span>
<span class="kw">function</span> <span class="fn">getColors</span>() { <span class="kw">return</span> [<span class="str">"red"</span>, <span class="str">"blue"</span>, <span class="str">"green"</span>]; }

<span class="cm">// Return an object</span>
<span class="kw">function</span> <span class="fn">getUser</span>()   { <span class="kw">return</span> { <span class="par">name</span>: <span class="str">"Bob"</span>, <span class="par">age</span>: <span class="num">25</span> }; }

<span class="cm">// ‚úÖ Use returned values in expressions</span>
<span class="kw">let</span> total = <span class="fn">getPrice</span>() * <span class="num">3</span>;     <span class="cm">// 29.97</span>
<span class="kw">let</span> allowed = <span class="fn">isAdult</span>(<span class="num">20</span>);       <span class="cm">// true</span>
<span class="kw">let</span> firstColor = <span class="fn">getColors</span>()[<span class="num">0</span>]; <span class="cm">// "red"</span></pre>
                </div>
            </div>
        </div>

        <div class="pitfall-box">
            <div class="pitfall-header">‚ö†Ô∏è console.log() vs return</div>
            <p>Beginners often confuse <code class="inline">console.log()</code> and <code class="inline">return</code>. They are <strong>completely different</strong>!</p>
            <ul>
                <li><code class="inline">console.log()</code> ‚Äî <strong>displays</strong> a value in the console (for YOU to see)</li>
                <li><code class="inline">return</code> ‚Äî <strong>sends a value back</strong> to the calling code (for the PROGRAM to use)</li>
            </ul>
            <div class="code-block" style="margin-top: 10px;">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">log-vs-return.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="cm">// ‚ùå WRONG ‚Äî logs but doesn't return</span>
<span class="kw">function</span> <span class="fn">addWrong</span>(<span class="par">a</span>, <span class="par">b</span>) {
    <span class="log">console</span>.<span class="fn">log</span>(<span class="par">a</span> + <span class="par">b</span>);  <span class="cm">// just prints to console</span>
}
<span class="kw">let</span> r1 = <span class="fn">addWrong</span>(<span class="num">2</span>, <span class="num">3</span>);  <span class="cm">// prints 5, but r1 = undefined!</span>

<span class="cm">// ‚úÖ RIGHT ‚Äî returns the value</span>
<span class="kw">function</span> <span class="fn">addRight</span>(<span class="par">a</span>, <span class="par">b</span>) {
    <span class="kw">return</span> <span class="par">a</span> + <span class="par">b</span>;  <span class="cm">// sends value back</span>
}
<span class="kw">let</span> r2 = <span class="fn">addRight</span>(<span class="num">2</span>, <span class="num">3</span>);  <span class="cm">// r2 = 5 ‚úÖ</span></pre>
                </div>
            </div>
        </div>

        <!-- Quiz -->
        <div class="quiz-container">
            <div class="quiz-header"><h4>üß† Quick Check</h4></div>
            <div class="quiz-body">
                <div class="quiz-question">What does <code>x</code> equal?<br>
                <code>function test() { let x = 10; } let x = test();</code></div>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q5')">
                        <div class="option-letter">A</div><span>10</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, true, 'q5')">
                        <div class="option-letter">B</div><span>undefined</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q5')">
                        <div class="option-letter">C</div><span>null</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q5')">
                        <div class="option-letter">D</div><span>Error</span>
                    </div>
                </div>
                <div class="quiz-feedback" id="feedback-q5"></div>
            </div>
        </div>

        <div class="section-nav">
            <button class="nav-btn" onclick="navigateTo('parameters')">‚Üê Parameters</button>
            <button class="nav-btn primary" onclick="navigateTo('scope')">Function Scope ‚Üí</button>
        </div>
    </div>

    <!-- ==================== FUNCTION SCOPE ==================== -->
    <div class="section" id="section-scope">
        <div class="section-header">
            <div class="breadcrumb">Core Lessons / <span>Function Scope</span></div>
            <h2>üî≠ Function Scope</h2>
            <p>Understanding where variables live and who can see them</p>
        </div>

        <div class="card">
            <h3>üéØ What is Scope?</h3>
            <div class="definition-box">
                <div class="def-label">üìñ Definition</div>
                <p><strong>Scope</strong> determines where variables can be accessed in your code. Variables created inside a function are <strong>local</strong> to that function ‚Äî invisible to the outside world. Variables created outside functions are <strong>global</strong> ‚Äî accessible everywhere.</p>
            </div>

            <div class="analogy-box">
                <div class="analogy-icon">üè†</div>
                <div>
                    <h4>Analogy: Rooms in a House</h4>
                    <p><strong>Global scope</strong> = the common living room. Everyone can see and use things there. <strong>Function scope</strong> = a private bedroom. Only the person inside can see their stuff. You CAN look out of your room to the living room, but others CAN'T look into your room!</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üî¨ Visual Scope Map</h3>
            <div class="scope-visualizer">
                <div class="scope-box global">
                    <div class="scope-label">üåç Global Scope</div>
                    <div class="scope-var accessible">let globalVar = "I'm global!"</div>
                    <div class="scope-var accessible">const PI = 3.14159</div>

                    <div class="scope-box function-scope">
                        <div class="scope-label">üü£ Function: greet()</div>
                        <div class="scope-var accessible">let message = "Hello!"</div>
                        <div class="scope-var accessible">‚úÖ Can access globalVar</div>
                        <div class="scope-var accessible">‚úÖ Can access PI</div>

                        <div class="scope-box block-scope">
                            <div class="scope-label">üü† if block</div>
                            <div class="scope-var accessible">let blockVar = "I'm in a block"</div>
                            <div class="scope-var accessible">‚úÖ Can access message</div>
                            <div class="scope-var accessible">‚úÖ Can access globalVar</div>
                        </div>
                    </div>

                    <div class="scope-box function-scope">
                        <div class="scope-label">üü£ Function: calculate()</div>
                        <div class="scope-var accessible">let total = 100</div>
                        <div class="scope-var accessible">‚úÖ Can access globalVar</div>
                        <div class="scope-var blocked">‚ùå Cannot access message</div>
                        <div class="scope-var blocked">‚ùå Cannot access blockVar</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üìù Scope in Code</h3>
            <div class="code-block">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">scope-examples.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="kw">let</span> globalMessage = <span class="str">"I'm everywhere!"</span>;  <span class="cm">// Global scope</span>

<span class="kw">function</span> <span class="fn">outer</span>() {
    <span class="kw">let</span> outerVar = <span class="str">"I'm in outer"</span>;  <span class="cm">// outer's scope</span>

    <span class="kw">function</span> <span class="fn">inner</span>() {
        <span class="kw">let</span> innerVar = <span class="str">"I'm in inner"</span>;  <span class="cm">// inner's scope</span>
        
        <span class="log">console</span>.<span class="fn">log</span>(innerVar);      <span class="cm">// ‚úÖ "I'm in inner"</span>
        <span class="log">console</span>.<span class="fn">log</span>(outerVar);      <span class="cm">// ‚úÖ "I'm in outer"   (looks up!)</span>
        <span class="log">console</span>.<span class="fn">log</span>(globalMessage);  <span class="cm">// ‚úÖ "I'm everywhere!" (looks up more!)</span>
    }

    <span class="fn">inner</span>();
    <span class="log">console</span>.<span class="fn">log</span>(outerVar);  <span class="cm">// ‚úÖ works</span>
    <span class="cm">// console.log(innerVar);  // ‚ùå ReferenceError!</span>
}

<span class="fn">outer</span>();
<span class="log">console</span>.<span class="fn">log</span>(globalMessage);  <span class="cm">// ‚úÖ works</span>
<span class="cm">// console.log(outerVar);     // ‚ùå ReferenceError!</span></pre>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üîë The Scope Chain</h3>
            <div class="step-container">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Look Locally First</h4>
                        <p>JavaScript first looks for the variable in the current scope (the function).</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Look in the Parent Scope</h4>
                        <p>If not found, it looks in the outer (parent) function's scope.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Keep Going Up</h4>
                        <p>This continues all the way up to the global scope.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Not Found? Error!</h4>
                        <p>If the variable isn't found anywhere, you get a <code class="inline">ReferenceError</code>.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="pitfall-box">
            <div class="pitfall-header">‚ö†Ô∏è Scope Pitfalls</div>
            <div class="code-block" style="margin-top: 10px;">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">scope-pitfalls.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="cm">// ‚ùå Pitfall 1: Accidentally creating globals (forgetting let/const)</span>
<span class="kw">function</span> <span class="fn">oops</span>() {
    mistake = <span class="str">"I'm accidentally global!"</span>; <span class="cm">// No let/const = global! üò±</span>
}

<span class="cm">// ‚ùå Pitfall 2: Same name, different scope (shadowing)</span>
<span class="kw">let</span> color = <span class="str">"red"</span>;
<span class="kw">function</span> <span class="fn">paint</span>() {
    <span class="kw">let</span> color = <span class="str">"blue"</span>;  <span class="cm">// This "shadows" the global color</span>
    <span class="log">console</span>.<span class="fn">log</span>(color);  <span class="cm">// "blue" (local wins!)</span>
}
<span class="fn">paint</span>();
<span class="log">console</span>.<span class="fn">log</span>(color);      <span class="cm">// "red" (global unchanged)</span>

<span class="cm">// ‚úÖ Fix: Use different names, or be intentional</span></pre>
                </div>
            </div>
        </div>

        <!-- Quiz -->
        <div class="quiz-container">
            <div class="quiz-header"><h4>üß† Quick Check</h4></div>
            <div class="quiz-body">
                <div class="quiz-question">What does this code output?<br>
                <code>let x = 10; function test() { let x = 20; console.log(x); } test();</code></div>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q6')">
                        <div class="option-letter">A</div><span>10</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, true, 'q6')">
                        <div class="option-letter">B</div><span>20</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q6')">
                        <div class="option-letter">C</div><span>undefined</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q6')">
                        <div class="option-letter">D</div><span>Error</span>
                    </div>
                </div>
                <div class="quiz-feedback" id="feedback-q6"></div>
            </div>
        </div>

        <div class="section-nav">
            <button class="nav-btn" onclick="navigateTo('return-values')">‚Üê Return Values</button>
            <button class="nav-btn primary" onclick="navigateTo('invocation')">Invocation ‚Üí</button>
        </div>
    </div>

    <!-- ==================== INVOCATION ==================== -->
    <div class="section" id="section-invocation">
        <div class="section-header">
            <div class="breadcrumb">Core Lessons / <span>Invocation & Calling</span></div>
            <h2>üöÄ Invocation & Calling</h2>
            <p>How and when functions actually run</p>
        </div>

        <div class="card">
            <h3>üéØ Defining vs. Calling</h3>
            <div class="definition-box">
                <div class="def-label">üìñ Key Concept</div>
                <p><strong>Defining</strong> a function creates the recipe. <strong>Calling (invoking)</strong> a function executes the recipe. A function does <em>nothing</em> until you call it with <code class="inline">()</code>.</p>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">invocation.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="cm">// 1Ô∏è‚É£ DEFINE the function (nothing happens yet)</span>
<span class="kw">function</span> <span class="fn">celebrate</span>() {
    <span class="log">console</span>.<span class="fn">log</span>(<span class="str">"üéâ Party time!"</span>);
}

<span class="cm">// 2Ô∏è‚É£ CALL/INVOKE the function (NOW it runs!)</span>
<span class="fn">celebrate</span>();  <span class="cm">// üéâ Party time!</span>
<span class="fn">celebrate</span>();  <span class="cm">// üéâ Party time! (can call many times!)</span>

<span class="cm">// ‚ö†Ô∏è Without () ‚Äî you're just referencing the function, not calling it</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">celebrate</span>);   <span class="cm">// [Function: celebrate]  (not called!)</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">celebrate</span>()); <span class="cm">// üéâ Party time! then logs: undefined</span></pre>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üìû Ways to Call Functions</h3>
            <div class="code-block">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">calling-ways.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="cm">// 1. Direct call</span>
<span class="fn">greet</span>(<span class="str">"Alice"</span>);

<span class="cm">// 2. Store return value</span>
<span class="kw">let</span> result = <span class="fn">add</span>(<span class="num">5</span>, <span class="num">3</span>);

<span class="cm">// 3. Use inside expressions</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="str">"Sum: "</span> + <span class="fn">add</span>(<span class="num">2</span>, <span class="num">8</span>));

<span class="cm">// 4. Use as argument to another function</span>
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">add</span>(<span class="fn">add</span>(<span class="num">1</span>, <span class="num">2</span>), <span class="fn">add</span>(<span class="num">3</span>, <span class="num">4</span>)));  <span class="cm">// add(3, 7) = 10</span>

<span class="cm">// 5. Call a function stored in a variable</span>
<span class="kw">const</span> <span class="fn">myFunc</span> = <span class="kw">function</span>() { <span class="kw">return</span> <span class="num">42</span>; };
<span class="log">console</span>.<span class="fn">log</span>(<span class="fn">myFunc</span>());  <span class="cm">// 42</span>

<span class="cm">// 6. Immediately Invoked (IIFE)</span>
(<span class="kw">function</span>() {
    <span class="log">console</span>.<span class="fn">log</span>(<span class="str">"I run immediately!"</span>);
})();</pre>
                </div>
            </div>
        </div>

        <div class="pitfall-box">
            <div class="pitfall-header">‚ö†Ô∏è Forgetting the Parentheses!</div>
            <p>One of the most common beginner mistakes:</p>
            <div class="code-block" style="margin-top: 10px;">
                <div class="code-header">
                    <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="code-label">parens-pitfall.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                </div>
                <div class="code-body">
<pre><span class="kw">function</span> <span class="fn">getPrice</span>() { <span class="kw">return</span> <span class="num">9.99</span>; }

<span class="cm">// ‚ùå WRONG ‚Äî forgot parentheses!</span>
<span class="kw">let</span> price = <span class="fn">getPrice</span>;     <span class="cm">// price = the function itself, NOT 9.99</span>
<span class="log">console</span>.<span class="fn">log</span>(price);        <span class="cm">// [Function: getPrice]</span>

<span class="cm">// ‚úÖ CORRECT ‚Äî call with parentheses!</span>
<span class="kw">let</span> price2 = <span class="fn">getPrice</span>();  <span class="cm">// price2 = 9.99</span>
<span class="log">console</span>.<span class="fn">log</span>(price2);       <span class="cm">// 9.99</span></pre>
                </div>
            </div>
        </div>

        <!-- Quiz -->
        <div class="quiz-container">
            <div class="quiz-header"><h4>üß† Quick Check</h4></div>
            <div class="quiz-body">
                <div class="quiz-question">What is the value of <code>x</code>?<br>
                <code>function sayHi() { return "Hi!"; } let x = sayHi;</code></div>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q7')">
                        <div class="option-letter">A</div><span>"Hi!"</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, true, 'q7')">
                        <div class="option-letter">B</div><span>The function itself (a reference to it)</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q7')">
                        <div class="option-letter">C</div><span>undefined</span>
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(this, false, 'q7')">
                        <div class="option-letter">D</div><span>Error</span>
                    </div>
                </div>
                <div class="quiz-feedback" id="feedback-q7"></div>
            </div>
        </div>

        <div class="section-nav">
            <button class="nav-btn" onclick="navigateTo('scope')">‚Üê Scope</button>
            <button class="nav-btn primary" onclick="navigateTo('pitfalls')">Common Pitfalls ‚Üí</button>
        </div>
    </div>

    <!-- ==================== COMMON PITFALLS ==================== -->
    <div class="section" id="section-pitfalls">
        <div class="section-header">
            <div class="breadcrumb">Practice & Test / <span>Common Pitfalls</span></div>
            <h2>‚ö†Ô∏è Common Pitfalls & Mistakes</h2>
            <p>Learn from others' mistakes so you don't make them!</p>
        </div>

        <div class="card">
            <h3>üíÄ The 8 Deadly Function Mistakes</h3>

            <div class="pitfall-box">
                <div class="pitfall-header">‚ùå Pitfall #1: Forgetting to return</div>
                <div class="code-block" style="margin-top: 10px;">
                    <div class="code-body">
<pre><span class="cm">// ‚ùå BAD ‚Äî calculates but doesn't return!</span>
<span class="kw">function</span> <span class="fn">addBad</span>(<span class="par">a</span>, <span class="par">b</span>) {
    <span class="kw">let</span> sum = <span class="par">a</span> + <span class="par">b</span>;  <span class="cm">// computed, but lost forever</span>
}

<span class="cm">// ‚úÖ GOOD</span>
<span class="kw">function</span> <span class="fn">addGood</span>(<span class="par">a</span>, <span class="par">b</span>) {
    <span class="kw">return</span> <span class="par">a</span> + <span class="par">b</span>;  <span class="cm">// sends the value back</span>
}</pre>
                    </div>
                </div>
            </div>

            <div class="pitfall-box">
                <div class="pitfall-header">‚ùå Pitfall #2: Confusing console.log with return</div>
                <div class="code-block" style="margin-top: 10px;">
                    <div class="code-body">
<pre><span class="cm">// ‚ùå Prints the result but can't use it</span>
<span class="kw">function</span> <span class="fn">double</span>(<span class="par">n</span>) { <span class="log">console</span>.<span class="fn">log</span>(<span class="par">n</span> * <span class="num">2</span>); }
<span class="kw">let</span> result = <span class="fn">double</span>(<span class="num">5</span>);  <span class="cm">// prints 10, but result = undefined!</span>

<span class="cm">// ‚úÖ Returns the result so you can use it</span>
<span class="kw">function</span> <span class="fn">double</span>(<span class="par">n</span>) { <span class="kw">return</span> <span class="par">n</span> * <span class="num">2</span>; }
<span class="kw">let</span> result = <span class="fn">double</span>(<span class="num">5</span>);  <span class="cm">// result = 10 ‚úÖ</span></pre>
                    </div>
                </div>
            </div>

            <div class="pitfall-box">
                <div class="pitfall-header">‚ùå Pitfall #3: Forgetting parentheses when calling</div>
                <div class="code-block" style="margin-top: 10px;">
                    <div class="code-body">
<pre><span class="kw">function</span> <span class="fn">getTime</span>() { <span class="kw">return</span> <span class="str">"12:00"</span>; }

<span class="kw">let</span> time = <span class="fn">getTime</span>;   <span class="cm">// ‚ùå This is the function ITSELF, not "12:00"</span>
<span class="kw">let</span> time = <span class="fn">getTime</span>(); <span class="cm">// ‚úÖ This calls it and gets "12:00"</span></pre>
                    </div>
                </div>
            </div>

            <div class="pitfall-box">
                <div class="pitfall-header">‚ùå Pitfall #4: Writing code after return</div>
                <div class="code-block" style="margin-top: 10px;">
                    <div class="code-body">
<pre><span class="kw">function</span> <span class="fn">process</span>() {
    <span class="kw">return</span> <span class="num">42</span>;
    <span class="log">console</span>.<span class="fn">log</span>(<span class="str">"This NEVER runs!"</span>);  <span class="cm">// ‚ùå Dead code</span>
    <span class="kw">let</span> x = <span class="num">100</span>;  <span class="cm">// ‚ùå Also dead code</span>
}</pre>
                    </div>
                </div>
            </div>

            <div class="pitfall-box">
                <div class="pitfall-header">‚ùå Pitfall #5: Wrong argument order</div>
                <div class="code-block" style="margin-top: 10px;">
                    <div class="code-body">
<pre><span class="kw">function</span> <span class="fn">divide</span>(<span class="par">numerator</span>, <span class="par">denominator</span>) {
    <span class="kw">return</span> <span class="par">numerator</span> / <span class="par">denominator</span>;
}

<span class="fn">divide</span>(<span class="num">10</span>, <span class="num">2</span>);  <span class="cm">// ‚úÖ 5 (correct: 10 / 2)</span>
<span class="fn">divide</span>(<span class="num">2</span>, <span class="num">10</span>);  <span class="cm">// ‚ùå 0.2 (oops: 2 / 10 ‚Äî wrong order!)</span></pre>
                    </div>
                </div>
            </div>

            <div class="pitfall-box">
                <div class="pitfall-header">‚ùå Pitfall #6: Calling expression before definition</div>
                <div class="code-block" style="margin-top: 10px;">
                    <div class="code-body">
<pre><span class="fn">myFunc</span>();  <span class="cm">// ‚ùå ReferenceError!</span>
<span class="kw">const</span> <span class="fn">myFunc</span> = () <span class="op">=></span> { <span class="log">console</span>.<span class="fn">log</span>(<span class="str">"Hi"</span>); };

<span class="cm">// ‚úÖ Define first, then call</span>
<span class="kw">const</span> <span class="fn">myFunc</span> = () <span class="op">=></span> { <span class="log">console</span>.<span class="fn">log</span>(<span class="str">"Hi"</span>); };
<span class="fn">myFunc</span>();  <span class="cm">// ‚úÖ Works!</span></pre>
                    </div>
                </div>
            </div>

            <div class="pitfall-box">
                <div class="pitfall-header">‚ùå Pitfall #7: Modifying global variables accidentally</div>
                <div class="code-block" style="margin-top: 10px;">
                    <div class="code-body">
<pre><span class="kw">let</span> count = <span class="num">0</span>;

<span class="kw">function</span> <span class="fn">increment</span>() {
    count = count + <span class="num">1</span>;  <span class="cm">// ‚ö†Ô∏è Modifies the global! Can cause bugs</span>
}

<span class="cm">// ‚úÖ Better: use parameters and return values</span>
<span class="kw">function</span> <span class="fn">increment</span>(<span class="par">num</span>) {
    <span class="kw">return</span> <span class="par">num</span> + <span class="num">1</span>;  <span class="cm">// Pure function ‚Äî no side effects</span>
}</pre>
                    </div>
                </div>
            </div>

            <div class="pitfall-box">
                <div class="pitfall-header">‚ùå Pitfall #8: Semicolon after function declarations</div>
                <div class="code-block" style="margin-top: 10px;">
                    <div class="code-body">
<pre><span class="cm">// Function declarations ‚Äî NO semicolon needed after }</span>
<span class="kw">function</span> <span class="fn">greet</span>() { }  <span class="cm">// ‚úÖ No semicolon</span>

<span class="cm">// Function expressions ‚Äî semicolon IS needed (it's a statement)</span>
<span class="kw">const</span> <span class="fn">greet</span> = <span class="kw">function</span>() { };  <span class="cm">// ‚úÖ Semicolon</span>
<span class="kw">const</span> <span class="fn">greet</span> = () <span class="op">=></span> { };      <span class="cm">// ‚úÖ Semicolon</span></pre>
                    </div>
                </div>
            </div>
        </div>

        <div class="tip-box">
            <div class="tip-header">üí° Golden Rules to Remember</div>
            <ul style="padding-left: 20px; color: var(--text-secondary);">
                <li>Always use <code class="inline">return</code> if you need a value back</li>
                <li>Always call functions with <code class="inline">()</code></li>
                <li>Define function expressions <em>before</em> calling them</li>
                <li>Use <code class="inline">let</code>/<code class="inline">const</code> ‚Äî never create variables without them</li>
                <li>Keep functions small and focused ‚Äî one function, one job</li>
                <li>Use descriptive names that start with verbs</li>
            </ul>
        </div>

        <div class="section-nav">
            <button class="nav-btn" onclick="navigateTo('invocation')">‚Üê Invocation</button>
            <button class="nav-btn primary" onclick="navigateTo('quiz')">Final Quiz ‚Üí</button>
        </div>
    </div>

    <!-- ==================== FINAL QUIZ ==================== -->
    <div class="section" id="section-quiz">
        <div class="section-header">
            <div class="breadcrumb">Practice & Test / <span>Final Quiz</span></div>
            <h2>üß† Final Quiz</h2>
            <p>Test everything you've learned! <span id="finalScore" class="hl-green"></span></p>
        </div>

        <div id="quizArea"></div>

        <div id="quizComplete" style="display:none;">
            <div class="card" style="text-align: center; padding: 50px;">
                <div style="font-size: 4rem; margin-bottom: 20px;" id="quizEmoji">üéâ</div>
                <h3 id="quizResultTitle">Quiz Complete!</h3>
                <p id="quizResultText" style="font-size: 1.1rem; margin: 15px 0;"></p>
                <button class="start-btn" onclick="resetFinalQuiz()" style="margin-top: 15px;">Try Again üîÑ</button>
            </div>
        </div>

        <div class="section-nav">
            <button class="nav-btn" onclick="navigateTo('pitfalls')">‚Üê Pitfalls</button>
            <button class="nav-btn primary" onclick="navigateTo('playground')">Playground ‚Üí</button>
        </div>
    </div>

    <!-- ==================== PLAYGROUND ==================== -->
    <div class="section" id="section-playground">
        <div class="section-header">
            <div class="breadcrumb">Practice & Test / <span>Playground</span></div>
            <h2>üéÆ Code Playground</h2>
            <p>Write and test your own functions! Experiment freely.</p>
        </div>

        <div class="code-runner">
            <div class="runner-header">
                <h4>‚ö° Live Code Editor</h4>
                <button class="run-btn" onclick="runPlayground()">‚ñ∂ Run Code</button>
            </div>
            <div class="runner-editor">
                <textarea id="playgroundEditor" spellcheck="false">// üéÆ Try writing your own functions!

// Example 1: Create a greeting function
function greet(name) {
    return "Hello, " + name + "! üëã";
}
console.log(greet("World"));

// Example 2: Calculator
const multiply = (a, b) => a * b;
console.log("5 √ó 3 =", multiply(5, 3));

// Example 3: Check if a number is even
function isEven(num) {
    return num % 2 === 0;
}
console.log("Is 4 even?", isEven(4));
console.log("Is 7 even?", isEven(7));

// üöÄ Now try your own functions below!
</textarea>
            </div>
            <div class="runner-output">
                <div class="output-label">üì∫ Console Output</div>
                <div class="output-content" id="playgroundOutput">Click "Run Code" to see results...</div>
            </div>
        </div>

        <div class="card">
            <h3>üí™ Practice Challenges</h3>
            <div class="step-container">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Temperature Converter</h4>
                        <p>Write a function <code class="inline">celsiusToFahrenheit(celsius)</code> that converts Celsius to Fahrenheit. Formula: F = C √ó 9/5 + 32</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Max Finder</h4>
                        <p>Write a function <code class="inline">findMax(a, b, c)</code> that returns the largest of three numbers.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>String Reverser</h4>
                        <p>Write a function <code class="inline">reverseString(str)</code> that returns the string reversed.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Discount Calculator</h4>
                        <p>Write <code class="inline">applyDiscount(price, discount = 10)</code> that returns the discounted price. Default discount is 10%.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h4>Sum All Numbers</h4>
                        <p>Write <code class="inline">sumAll(...numbers)</code> using rest parameters that sums any number of arguments.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="section-nav">
            <button class="nav-btn" onclick="navigateTo('quiz')">‚Üê Final Quiz</button>
            <button class="nav-btn primary" onclick="navigateTo('welcome')">üè† Home</button>
        </div>
    </div>

</main>

<script>
// ============================================================
// APP STATE
// ============================================================
let state = {
    xp: 0,
    completedSections: new Set(),
    currentSection: 'welcome',
    quizAnswered: new Set(),
    finalQuizScore: 0,
    finalQuizCurrent: 0,
    totalSections: 10
};

// ============================================================
// BACKGROUND PARTICLES
// ============================================================
function createParticles() {
    const bg = document.getElementById('bgAnimation');
    const colors = ['#4fc3f7', '#b388ff', '#69f0ae', '#ffab40', '#ff80ab'];
    for (let i = 0; i < 30; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        const size = Math.random() * 6 + 2;
        particle.style.width = size + 'px';
        particle.style.height = size + 'px';
        particle.style.background = colors[Math.floor(Math.random() * colors.length)];
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDuration = (Math.random() * 15 + 10) + 's';
        particle.style.animationDelay = (Math.random() * 10) + 's';
        bg.appendChild(particle);
    }
}
createParticles();

// ============================================================
// NAVIGATION
// ============================================================
function navigateTo(sectionId) {
    // Hide all
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));

    // Show target
    const target = document.getElementById('section-' + sectionId);
    if (target) {
        target.classList.add('active');
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Update nav
    const navItem = document.querySelector(`.nav-item[data-section="${sectionId}"]`);
    if (navItem) navItem.classList.add('active');

    // Mark previous as completed
    if (state.currentSection !== 'welcome' && state.currentSection !== sectionId) {
        markCompleted(state.currentSection);
    }

    state.currentSection = sectionId;

    // Close sidebar on mobile
    if (window.innerWidth <= 900) {
        document.getElementById('sidebar').classList.remove('open');
    }
}

function markCompleted(sectionId) {
    if (!state.completedSections.has(sectionId)) {
        state.completedSections.add(sectionId);
        const navItem = document.querySelector(`.nav-item[data-section="${sectionId}"]`);
        if (navItem) navItem.classList.add('completed');
        updateProgress();
    }
}

function updateProgress() {
    const pct = Math.round((state.completedSections.size / state.totalSections) * 100);
    document.getElementById('progressFill').style.width = pct + '%';
    document.getElementById('progressPercent').textContent = pct + '%';
}

function toggleSidebar() {
    document.getElementById('sidebar').classList.toggle('open');
}

// ============================================================
// TAB SYSTEM
// ============================================================
function switchTab(tabEl, tabId) {
    const parent = tabEl.closest('.card');
    parent.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    parent.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    tabEl.classList.add('active');
    document.getElementById('tab-' + tabId).classList.add('active');
}

// ============================================================
// COPY CODE
// ============================================================
function copyCode(btn) {
    const codeBody = btn.closest('.code-block').querySelector('pre');
    navigator.clipboard.writeText(codeBody.textContent).then(() => {
        btn.textContent = '‚úÖ Copied!';
        setTimeout(() => btn.textContent = 'üìã Copy', 2000);
    });
}

// ============================================================
// XP SYSTEM
// ============================================================
function addXP(amount) {
    state.xp += amount;
    document.getElementById('xpCount').textContent = state.xp;

    // Milestone achievements
    const milestones = [50, 100, 200, 300, 500];
    milestones.forEach(m => {
        if (state.xp >= m && state.xp - amount < m) {
            showAchievement(`${m} XP reached! Keep going! üî•`);
        }
    });
}

function showAchievement(text) {
    const popup = document.getElementById('achievementPopup');
    document.getElementById('achievementText').textContent = text;
    popup.classList.add('show');
    setTimeout(() => popup.classList.remove('show'), 3000);
}

// ============================================================
// INLINE QUIZZES
// ============================================================
function checkQuiz(optionEl, isCorrect, quizId) {
    if (state.quizAnswered.has(quizId)) return;
    state.quizAnswered.add(quizId);

    const feedback = document.getElementById('feedback-' + quizId);
    const options = optionEl.parentElement.querySelectorAll('.quiz-option');

    options.forEach(opt => {
        opt.style.pointerEvents = 'none';
    });

    if (isCorrect) {
        optionEl.classList.add('correct');
        feedback.className = 'quiz-feedback show correct-feedback';
        feedback.textContent = 'üéâ Correct! Well done! +15 XP';
        addXP(15);
    } else {
        optionEl.classList.add('wrong');
        // Highlight correct answer
        options.forEach(opt => {
            const isRight = opt.getAttribute('onclick').includes('true');
            if (isRight) opt.classList.add('correct');
        });
        feedback.className = 'quiz-feedback show wrong-feedback';
        feedback.textContent = '‚ùå Not quite! Check the correct answer highlighted in green.';
        addXP(5); // participation points
    }
}

// ============================================================
// FINAL QUIZ
// ============================================================
const finalQuizQuestions = [
    {
        q: "What keyword is used to create a function declaration?",
        opts: ["func", "function", "def", "create"],
        correct: 1,
        explanation: "The `function` keyword is used to declare a function in JavaScript."
    },
    {
        q: "What is the difference between a parameter and an argument?",
        opts: [
            "They are the same thing",
            "Parameters are in the call, arguments are in the definition",
            "Parameters are in the definition, arguments are in the call",
            "Parameters are only for arrow functions"
        ],
        correct: 2,
        explanation: "Parameters are placeholders in the definition. Arguments are actual values passed when calling."
    },
    {
        q: "What does a function return if there is no return statement?",
        opts: ["0", "null", "undefined", "false"],
        correct: 2,
        explanation: "Functions without a return statement automatically return `undefined`."
    },
    {
        q: "Which of these is a function expression?",
        opts: [
            "function greet() {}",
            "const greet = function() {}",
            "greet()",
            "return greet"
        ],
        correct: 1,
        explanation: "A function expression assigns a function to a variable."
    },
    {
        q: "Can you call a function declaration before it appears in the code?",
        opts: ["No, never", "Yes, because of hoisting", "Only in strict mode", "Only with arrow functions"],
        correct: 1,
        explanation: "Function declarations are hoisted ‚Äî they're available before their position in code."
    },
    {
        q: "What does `const add = (a, b) => a + b;` demonstrate?",
        opts: [
            "Function declaration",
            "Arrow function with implicit return",
            "Immediately invoked function",
            "Generator function"
        ],
        correct: 1,
        explanation: "Arrow functions without braces have an implicit return ‚Äî the expression is automatically returned."
    },
    {
        q: "What happens to a variable declared with `let` inside a function?",
        opts: [
            "It becomes global",
            "It's accessible everywhere",
            "It's only accessible inside that function",
            "It causes an error"
        ],
        correct: 2,
        explanation: "Variables declared with `let` inside a function are scoped to that function ‚Äî they can't be accessed outside."
    },
    {
        q: "What is the output? `function test() { return 1; return 2; } console.log(test());`",
        opts: ["1", "2", "undefined", "Error"],
        correct: 0,
        explanation: "The first `return` stops the function, so it returns 1. The second return never executes."
    },
    {
        q: "What does `greet` (without parentheses) refer to?",
        opts: [
            "The return value of greet",
            "The function object itself",
            "undefined",
            "An error"
        ],
        correct: 1,
        explanation: "Without () you're referencing the function object itself, not calling it."
    },
    {
        q: "What's the output? `function greet(name = 'World') { return 'Hi ' + name; } console.log(greet());`",
        opts: ["Hi undefined", "Hi World", "Hi", "Error"],
        correct: 1,
        explanation: "When no argument is passed, the default parameter 'World' is used."
    }
];

function initFinalQuiz() {
    state.finalQuizScore = 0;
    state.finalQuizCurrent = 0;
    document.getElementById('quizComplete').style.display = 'none';
    renderFinalQuestion();
}

function renderFinalQuestion() {
    const area = document.getElementById('quizArea');
    if (state.finalQuizCurrent >= finalQuizQuestions.length) {
        finishFinalQuiz();
        return;
    }

    const q = finalQuizQuestions[state.finalQuizCurrent];
    const qNum = state.finalQuizCurrent + 1;

    area.innerHTML = `
        <div class="quiz-container">
            <div class="quiz-header">
                <h4>üìã Question ${qNum} of ${finalQuizQuestions.length}</h4>
                <div class="quiz-score">Score: ${state.finalQuizScore}/${finalQuizQuestions.length}</div>
            </div>
            <div class="quiz-body">
                <div class="quiz-question">${q.q}</div>
                <div class="quiz-options" id="finalOptions">
                    ${q.opts.map((opt, i) => `
                        <div class="quiz-option" onclick="answerFinalQuiz(${i})" data-index="${i}">
                            <div class="option-letter">${String.fromCharCode(65 + i)}</div>
                            <span>${opt}</span>
                        </div>
                    `).join('')}
                </div>
                <div class="quiz-feedback" id="finalFeedback"></div>
                <button class="quiz-next-btn" id="finalNextBtn" onclick="nextFinalQuestion()">Next Question ‚Üí</button>
            </div>
        </div>
    `;

    document.getElementById('finalScore').textContent = `Score: ${state.finalQuizScore}/${finalQuizQuestions.length}`;
}

function answerFinalQuiz(index) {
    const q = finalQuizQuestions[state.finalQuizCurrent];
    const options = document.querySelectorAll('#finalOptions .quiz-option');
    const feedback = document.getElementById('finalFeedback');
    const nextBtn = document.getElementById('finalNextBtn');

    // Prevent double click
    options.forEach(o => o.style.pointerEvents = 'none');

    if (index === q.correct) {
        options[index].classList.add('correct');
        feedback.className = 'quiz-feedback show correct-feedback';
        feedback.textContent = 'üéâ Correct! ' + q.explanation;
        state.finalQuizScore++;
        addXP(20);
    } else {
        options[index].classList.add('wrong');
        options[q.correct].classList.add('correct');
        feedback.className = 'quiz-feedback show wrong-feedback';
        feedback.textContent = '‚ùå Wrong. ' + q.explanation;
        addXP(5);
    }

    nextBtn.classList.add('show');
}

function nextFinalQuestion() {
    state.finalQuizCurrent++;
    renderFinalQuestion();
}

function finishFinalQuiz() {
    document.getElementById('quizArea').innerHTML = '';
    const complete = document.getElementById('quizComplete');
    complete.style.display = 'block';

    const pct = Math.round((state.finalQuizScore / finalQuizQuestions.length) * 100);
    const emoji = document.getElementById('quizEmoji');
    const title = document.getElementById('quizResultTitle');
    const text = document.getElementById('quizResultText');

    if (pct >= 90) {
        emoji.textContent = 'üèÜ';
        title.textContent = 'Outstanding! You\'re a Functions Master!';
        text.textContent = `You scored ${state.finalQuizScore}/${finalQuizQuestions.length} (${pct}%). Incredible work!`;
        showAchievement('üèÜ Functions Master Achievement Unlocked!');
        addXP(100);
    } else if (pct >= 70) {
        emoji.textContent = 'üåü';
        title.textContent = 'Great Job! You Really Know Your Stuff!';
        text.textContent = `You scored ${state.finalQuizScore}/${finalQuizQuestions.length} (${pct}%). Almost perfect!`;
        addXP(50);
    } else if (pct >= 50) {
        emoji.textContent = 'üí™';
        title.textContent = 'Good Effort! Keep Practicing!';
        text.textContent = `You scored ${state.finalQuizScore}/${finalQuizQuestions.length} (${pct}%). Review the lessons and try again!`;
        addXP(25);
    } else {
        emoji.textContent = 'üìö';
        title.textContent = 'Keep Learning! You\'ll Get There!';
        text.textContent = `You scored ${state.finalQuizScore}/${finalQuizQuestions.length} (${pct}%). Go through the lessons again ‚Äî you've got this!`;
        addXP(10);
    }

    document.getElementById('finalScore').textContent = `Final Score: ${state.finalQuizScore}/${finalQuizQuestions.length} (${pct}%)`;
    markCompleted('quiz');
}

function resetFinalQuiz() {
    initFinalQuiz();
}

// Initialize quiz on page load for when user navigates there
const originalNavigateTo = navigateTo;
navigateTo = function(sectionId) {
    originalNavigateTo(sectionId);
    if (sectionId === 'quiz') {
        initFinalQuiz();
    }
};

// ============================================================
// CODE PLAYGROUND
// ============================================================
function runPlayground() {
    const code = document.getElementById('playgroundEditor').value;
    const outputEl = document.getElementById('playgroundOutput');

    // Capture console.log
    const logs = [];
    const originalLog = console.log;
    console.log = function(...args) {
        logs.push(args.map(a => {
            if (typeof a === 'object') return JSON.stringify(a, null, 2);
            return String(a);
        }).join(' '));
        originalLog.apply(console, args);
    };

    try {
        // Also capture return value of last expression
        eval(code);
        if (logs.length === 0) {
            outputEl.textContent = '(No console.log output. Use console.log() to see results!)';
            outputEl.className = 'output-content';
        } else {
            outputEl.textContent = logs.join('\n');
            outputEl.className = 'output-content';
        }
        addXP(5);
    } catch (err) {
        outputEl.textContent = '‚ùå Error: ' + err.message;
        outputEl.className = 'output-content output-error';
    }

    console.log = originalLog;
}

// ============================================================
// KEYBOARD SHORTCUTS
// ============================================================
document.addEventListener('keydown', (e) => {
    // Ctrl/Cmd + Enter to run playground
    if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
        if (state.currentSection === 'playground') {
            e.preventDefault();
            runPlayground();
        }
    }
});

// ============================================================
// INIT
// ============================================================
document.addEventListener('DOMContentLoaded', () => {
    updateProgress();
});
</script>

</body>
</html>