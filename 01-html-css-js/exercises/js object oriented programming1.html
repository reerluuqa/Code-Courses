<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéØ JS OOP Mastery - Land That Job!</title>
<style>
/* ==================== RESET & BASE ==================== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg-dark: #0f0f1a;
  --bg-card: #1a1a2e;
  --bg-code: #0d1117;
  --accent-1: #e94560;
  --accent-2: #0f3460;
  --accent-3: #16213e;
  --accent-green: #00e676;
  --accent-yellow: #ffd600;
  --accent-orange: #ff9100;
  --accent-purple: #b388ff;
  --accent-cyan: #18ffff;
  --accent-pink: #ff4081;
  --text-primary: #e0e0e0;
  --text-secondary: #9e9e9e;
  --text-bright: #ffffff;
  --radius: 12px;
  --shadow: 0 8px 32px rgba(0,0,0,0.4);
  --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

html { scroll-behavior: smooth; }

body {
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  background: var(--bg-dark);
  color: var(--text-primary);
  line-height: 1.7;
  overflow-x: hidden;
}

/* ==================== SCROLLBAR ==================== */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: var(--bg-dark); }
::-webkit-scrollbar-thumb { background: var(--accent-2); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: var(--accent-1); }

/* ==================== HEADER ==================== */
.app-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  background: rgba(15, 15, 26, 0.95);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid rgba(233, 69, 96, 0.2);
  padding: 0 2rem;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.app-logo {
  font-size: 1.4rem;
  font-weight: 800;
  background: linear-gradient(135deg, var(--accent-1), var(--accent-purple));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.app-logo span { font-size: 1.6rem; }

.progress-bar-container {
  flex: 1;
  max-width: 400px;
  margin: 0 2rem;
}

.progress-bar-bg {
  width: 100%;
  height: 8px;
  background: var(--accent-3);
  border-radius: 4px;
  overflow: hidden;
}

.progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent-1), var(--accent-purple), var(--accent-cyan));
  border-radius: 4px;
  transition: width 0.6s ease;
  width: 0%;
}

.progress-text {
  font-size: 0.75rem;
  color: var(--text-secondary);
  margin-top: 2px;
  text-align: center;
}

.xp-badge {
  background: linear-gradient(135deg, var(--accent-yellow), var(--accent-orange));
  color: #000;
  padding: 0.3rem 1rem;
  border-radius: 20px;
  font-weight: 700;
  font-size: 0.85rem;
  display: flex;
  align-items: center;
  gap: 0.3rem;
  animation: pulse-glow 2s infinite;
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 10px rgba(255, 214, 0, 0.3); }
  50% { box-shadow: 0 0 20px rgba(255, 214, 0, 0.6); }
}

/* ==================== SIDEBAR NAV ==================== */
.sidebar {
  position: fixed;
  top: 64px;
  left: 0;
  bottom: 0;
  width: 280px;
  background: rgba(26, 26, 46, 0.98);
  border-right: 1px solid rgba(233, 69, 96, 0.1);
  overflow-y: auto;
  padding: 1rem 0;
  z-index: 900;
  transition: transform 0.3s ease;
}

.nav-section {
  padding: 0.5rem 1rem;
  margin-bottom: 0.5rem;
}

.nav-section-title {
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--accent-1);
  margin-bottom: 0.5rem;
  padding-left: 0.5rem;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 0.7rem;
  padding: 0.7rem 1rem;
  border-radius: 8px;
  cursor: pointer;
  transition: var(--transition);
  font-size: 0.9rem;
  color: var(--text-secondary);
  position: relative;
}

.nav-item:hover {
  background: rgba(233, 69, 96, 0.1);
  color: var(--text-primary);
}

.nav-item.active {
  background: linear-gradient(135deg, rgba(233, 69, 96, 0.2), rgba(179, 136, 255, 0.1));
  color: var(--text-bright);
  border-left: 3px solid var(--accent-1);
}

.nav-item .nav-icon { font-size: 1.2rem; }

.nav-item .check-mark {
  margin-left: auto;
  color: var(--accent-green);
  font-size: 1rem;
  display: none;
}

.nav-item.completed .check-mark { display: block; }

.nav-item .nav-number {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--accent-3);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7rem;
  font-weight: 700;
}

.nav-item.active .nav-number {
  background: var(--accent-1);
  color: white;
}

/* ==================== MAIN CONTENT ==================== */
.main-content {
  margin-left: 280px;
  margin-top: 64px;
  padding: 2rem;
  max-width: 1000px;
}

.section {
  display: none;
  animation: fadeInUp 0.5s ease;
}

.section.active { display: block; }

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ==================== TYPOGRAPHY ==================== */
.section-title {
  font-size: 2.2rem;
  font-weight: 800;
  margin-bottom: 0.5rem;
  background: linear-gradient(135deg, var(--text-bright), var(--accent-purple));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.section-subtitle {
  font-size: 1.1rem;
  color: var(--text-secondary);
  margin-bottom: 2rem;
  border-left: 3px solid var(--accent-1);
  padding-left: 1rem;
}

h3 {
  font-size: 1.4rem;
  color: var(--accent-cyan);
  margin: 2rem 0 1rem;
}

h4 {
  font-size: 1.1rem;
  color: var(--accent-purple);
  margin: 1.5rem 0 0.5rem;
}

p { margin-bottom: 1rem; }

/* ==================== CARDS ==================== */
.card {
  background: var(--bg-card);
  border-radius: var(--radius);
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  border: 1px solid rgba(255,255,255,0.05);
  transition: var(--transition);
}

.card:hover {
  border-color: rgba(233, 69, 96, 0.2);
  transform: translateY(-2px);
  box-shadow: var(--shadow);
}

.card-header {
  display: flex;
  align-items: center;
  gap: 0.7rem;
  margin-bottom: 1rem;
  font-weight: 700;
  font-size: 1.1rem;
}

.card-header .icon { font-size: 1.5rem; }

/* ==================== CODE BLOCKS ==================== */
.code-container {
  position: relative;
  margin: 1rem 0;
  border-radius: var(--radius);
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.08);
}

.code-header {
  background: rgba(255,255,255,0.05);
  padding: 0.5rem 1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.8rem;
  color: var(--text-secondary);
}

.code-header .dots {
  display: flex;
  gap: 6px;
}

.code-header .dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
}

.dot.red { background: #ff5f57; }
.dot.yellow { background: #ffbd2e; }
.dot.green { background: #28ca42; }

.code-block {
  background: var(--bg-code);
  padding: 1.2rem;
  font-family: 'Fira Code', 'Cascadia Code', 'JetBrains Mono', monospace;
  font-size: 0.85rem;
  line-height: 1.8;
  overflow-x: auto;
  white-space: pre;
  tab-size: 2;
  color: #c9d1d9;
}

.code-block .keyword { color: #ff7b72; }
.code-block .string { color: #a5d6ff; }
.code-block .function { color: #d2a8ff; }
.code-block .comment { color: #6e7681; font-style: italic; }
.code-block .number { color: #79c0ff; }
.code-block .class-name { color: #ffa657; }
.code-block .property { color: #7ee787; }
.code-block .operator { color: #ff7b72; }
.code-block .param { color: #ffa657; }

.btn-run {
  background: linear-gradient(135deg, var(--accent-green), #00c853);
  color: #000;
  border: none;
  padding: 0.3rem 1rem;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 700;
  font-size: 0.8rem;
  display: flex;
  align-items: center;
  gap: 0.3rem;
  transition: var(--transition);
}

.btn-run:hover { transform: scale(1.05); box-shadow: 0 0 15px rgba(0, 230, 118, 0.4); }

.btn-copy {
  background: transparent;
  border: 1px solid rgba(255,255,255,0.1);
  color: var(--text-secondary);
  padding: 0.3rem 0.8rem;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.75rem;
  transition: var(--transition);
}

.btn-copy:hover { border-color: var(--accent-cyan); color: var(--accent-cyan); }

.code-output {
  background: rgba(0,0,0,0.3);
  border-top: 1px solid rgba(255,255,255,0.05);
  padding: 1rem 1.2rem;
  font-family: 'Fira Code', monospace;
  font-size: 0.8rem;
  color: var(--accent-green);
  min-height: 40px;
  white-space: pre-wrap;
  display: none;
}

.code-output.visible { display: block; }

.code-output .output-label {
  color: var(--text-secondary);
  font-size: 0.7rem;
  margin-bottom: 0.3rem;
  text-transform: uppercase;
  letter-spacing: 1px;
}

/* ==================== INTERACTIVE PLAYGROUND ==================== */
.playground {
  background: var(--bg-card);
  border-radius: var(--radius);
  padding: 1.5rem;
  margin: 1.5rem 0;
  border: 2px dashed rgba(233, 69, 96, 0.3);
}

.playground-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 700;
  color: var(--accent-yellow);
  margin-bottom: 1rem;
  font-size: 1.1rem;
}

.playground textarea {
  width: 100%;
  min-height: 150px;
  background: var(--bg-code);
  color: #c9d1d9;
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 8px;
  padding: 1rem;
  font-family: 'Fira Code', monospace;
  font-size: 0.85rem;
  line-height: 1.6;
  resize: vertical;
  outline: none;
  transition: border-color 0.3s;
}

.playground textarea:focus {
  border-color: var(--accent-cyan);
}

.playground-output {
  margin-top: 0.5rem;
  background: rgba(0,0,0,0.3);
  border-radius: 8px;
  padding: 1rem;
  font-family: 'Fira Code', monospace;
  font-size: 0.8rem;
  color: var(--accent-green);
  min-height: 50px;
  white-space: pre-wrap;
}

/* ==================== QUIZ ==================== */
.quiz-container {
  background: var(--bg-card);
  border-radius: var(--radius);
  padding: 2rem;
  margin: 1.5rem 0;
  border: 1px solid rgba(179, 136, 255, 0.2);
}

.quiz-header {
  display: flex;
  align-items: center;
  gap: 0.7rem;
  margin-bottom: 1.5rem;
}

.quiz-badge {
  background: linear-gradient(135deg, var(--accent-purple), var(--accent-pink));
  color: white;
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.quiz-question {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-bright);
  margin-bottom: 1.2rem;
}

.quiz-options { display: flex; flex-direction: column; gap: 0.7rem; }

.quiz-option {
  padding: 1rem 1.2rem;
  background: rgba(255,255,255,0.03);
  border: 2px solid rgba(255,255,255,0.08);
  border-radius: 10px;
  cursor: pointer;
  transition: var(--transition);
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 0.8rem;
}

.quiz-option:hover {
  border-color: rgba(179, 136, 255, 0.3);
  background: rgba(179, 136, 255, 0.05);
}

.quiz-option.correct {
  border-color: var(--accent-green) !important;
  background: rgba(0, 230, 118, 0.1) !important;
}

.quiz-option.wrong {
  border-color: var(--accent-1) !important;
  background: rgba(233, 69, 96, 0.1) !important;
}

.quiz-option .option-letter {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  background: var(--accent-3);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.8rem;
  flex-shrink: 0;
}

.quiz-option.correct .option-letter {
  background: var(--accent-green);
  color: #000;
}

.quiz-option.wrong .option-letter {
  background: var(--accent-1);
  color: white;
}

.quiz-explanation {
  margin-top: 1rem;
  padding: 1rem;
  border-radius: 8px;
  font-size: 0.9rem;
  display: none;
}

.quiz-explanation.show { display: block; }

.quiz-explanation.correct-exp {
  background: rgba(0, 230, 118, 0.1);
  border-left: 3px solid var(--accent-green);
  color: var(--accent-green);
}

.quiz-explanation.wrong-exp {
  background: rgba(233, 69, 96, 0.1);
  border-left: 3px solid var(--accent-1);
  color: var(--accent-1);
}

/* ==================== PITFALL / TIP BOXES ==================== */
.pitfall-box, .tip-box, .info-box, .exercise-box {
  border-radius: var(--radius);
  padding: 1.2rem 1.5rem;
  margin: 1.5rem 0;
}

.pitfall-box {
  background: rgba(233, 69, 96, 0.08);
  border-left: 4px solid var(--accent-1);
}

.pitfall-box .box-title {
  color: var(--accent-1);
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.tip-box {
  background: rgba(0, 230, 118, 0.08);
  border-left: 4px solid var(--accent-green);
}

.tip-box .box-title {
  color: var(--accent-green);
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.info-box {
  background: rgba(24, 255, 255, 0.06);
  border-left: 4px solid var(--accent-cyan);
}

.info-box .box-title {
  color: var(--accent-cyan);
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.exercise-box {
  background: rgba(255, 214, 0, 0.06);
  border: 2px dashed rgba(255, 214, 0, 0.3);
}

.exercise-box .box-title {
  color: var(--accent-yellow);
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

/* ==================== VISUAL DIAGRAM ==================== */
.diagram {
  background: var(--bg-card);
  border-radius: var(--radius);
  padding: 2rem;
  margin: 1.5rem 0;
  text-align: center;
  border: 1px solid rgba(255,255,255,0.05);
  overflow-x: auto;
}

.diagram-title {
  font-weight: 700;
  color: var(--accent-cyan);
  margin-bottom: 1.5rem;
}

.diagram-box {
  display: inline-flex;
  flex-direction: column;
  background: rgba(255,255,255,0.05);
  border: 2px solid;
  border-radius: 10px;
  padding: 1rem 1.5rem;
  margin: 0.5rem;
  min-width: 160px;
  text-align: center;
  transition: var(--transition);
}

.diagram-box:hover { transform: translateY(-5px); }

.diagram-box.parent { border-color: var(--accent-cyan); }
.diagram-box.child { border-color: var(--accent-purple); }
.diagram-box.interface { border-color: var(--accent-green); }
.diagram-box.composition { border-color: var(--accent-orange); }

.diagram-box .box-label {
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 0.3rem;
}

.diagram-box .box-name {
  font-weight: 700;
  font-size: 1rem;
  margin-bottom: 0.5rem;
}

.diagram-box .box-props {
  font-size: 0.75rem;
  color: var(--text-secondary);
  text-align: left;
}

.diagram-arrow {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0.5rem 0;
  color: var(--text-secondary);
  font-size: 1.5rem;
}

.diagram-row {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  flex-wrap: wrap;
  gap: 1rem;
}

/* ==================== TABS ==================== */
.tabs-container { margin: 1.5rem 0; }

.tabs-header {
  display: flex;
  gap: 0;
  border-bottom: 2px solid rgba(255,255,255,0.1);
  overflow-x: auto;
}

.tab-btn {
  padding: 0.7rem 1.5rem;
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 600;
  transition: var(--transition);
  border-bottom: 2px solid transparent;
  margin-bottom: -2px;
  white-space: nowrap;
}

.tab-btn:hover { color: var(--text-primary); }

.tab-btn.active {
  color: var(--accent-cyan);
  border-bottom-color: var(--accent-cyan);
}

.tab-content {
  display: none;
  padding: 1.5rem 0;
  animation: fadeInUp 0.3s ease;
}

.tab-content.active { display: block; }

/* ==================== COMPARISON TABLE ==================== */
.comparison-table {
  width: 100%;
  border-collapse: collapse;
  margin: 1rem 0;
  font-size: 0.9rem;
}

.comparison-table th {
  padding: 1rem;
  text-align: left;
  background: rgba(255,255,255,0.05);
  color: var(--accent-cyan);
  font-weight: 700;
  border-bottom: 2px solid rgba(233, 69, 96, 0.3);
}

.comparison-table td {
  padding: 0.8rem 1rem;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}

.comparison-table tr:hover td {
  background: rgba(255,255,255,0.02);
}

/* ==================== BADGE / PILL ==================== */
.pill {
  display: inline-block;
  padding: 0.2rem 0.7rem;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 700;
}

.pill-red { background: rgba(233,69,96,0.2); color: var(--accent-1); }
.pill-green { background: rgba(0,230,118,0.2); color: var(--accent-green); }
.pill-yellow { background: rgba(255,214,0,0.2); color: var(--accent-yellow); }
.pill-purple { background: rgba(179,136,255,0.2); color: var(--accent-purple); }
.pill-cyan { background: rgba(24,255,255,0.2); color: var(--accent-cyan); }

/* ==================== BUTTONS ==================== */
.btn {
  padding: 0.6rem 1.5rem;
  border: none;
  border-radius: 8px;
  font-weight: 700;
  font-size: 0.9rem;
  cursor: pointer;
  transition: var(--transition);
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.btn:hover { transform: translateY(-2px); }

.btn-primary {
  background: linear-gradient(135deg, var(--accent-1), var(--accent-purple));
  color: white;
}

.btn-secondary {
  background: var(--accent-3);
  color: var(--text-primary);
  border: 1px solid rgba(255,255,255,0.1);
}

.btn-success {
  background: linear-gradient(135deg, var(--accent-green), #00c853);
  color: #000;
}

.btn-group {
  display: flex;
  gap: 0.8rem;
  margin-top: 1.5rem;
  flex-wrap: wrap;
}

/* ==================== ACCORDION ==================== */
.accordion-item {
  background: var(--bg-card);
  border-radius: 10px;
  margin-bottom: 0.5rem;
  border: 1px solid rgba(255,255,255,0.05);
  overflow: hidden;
}

.accordion-header {
  padding: 1rem 1.5rem;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: 600;
  transition: var(--transition);
}

.accordion-header:hover { background: rgba(255,255,255,0.03); }

.accordion-header .arrow {
  transition: transform 0.3s;
}

.accordion-item.open .accordion-header .arrow {
  transform: rotate(180deg);
}

.accordion-body {
  padding: 0 1.5rem;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease, padding 0.3s ease;
}

.accordion-item.open .accordion-body {
  max-height: 2000px;
  padding: 0 1.5rem 1.5rem;
}

/* ==================== SOLID LETTER CARDS ==================== */
.solid-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  margin: 1.5rem 0;
}

.solid-letter-card {
  background: var(--bg-card);
  border-radius: var(--radius);
  padding: 1.2rem;
  text-align: center;
  cursor: pointer;
  border: 2px solid rgba(255,255,255,0.05);
  transition: var(--transition);
}

.solid-letter-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow);
}

.solid-letter-card.active {
  border-color: var(--accent-1);
  box-shadow: 0 0 30px rgba(233, 69, 96, 0.2);
}

.solid-letter-card .letter {
  font-size: 2.5rem;
  font-weight: 900;
  line-height: 1;
  margin-bottom: 0.5rem;
}

.solid-letter-card:nth-child(1) .letter { color: var(--accent-1); }
.solid-letter-card:nth-child(2) .letter { color: var(--accent-orange); }
.solid-letter-card:nth-child(3) .letter { color: var(--accent-yellow); }
.solid-letter-card:nth-child(4) .letter { color: var(--accent-green); }
.solid-letter-card:nth-child(5) .letter { color: var(--accent-cyan); }

.solid-letter-card .label {
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--text-secondary);
}

.solid-detail {
  display: none;
  animation: fadeInUp 0.4s ease;
}

.solid-detail.active { display: block; }

/* ==================== ANIMATION ==================== */
.float-animation {
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.highlight-keyword {
  color: var(--accent-cyan);
  font-weight: 600;
}

.highlight-important {
  background: rgba(233, 69, 96, 0.15);
  padding: 0.1rem 0.5rem;
  border-radius: 4px;
  color: var(--accent-1);
  font-weight: 600;
}

/* ==================== CHAPTER COMPLETE ==================== */
.chapter-complete {
  text-align: center;
  padding: 2rem;
  margin-top: 2rem;
}

.chapter-complete .trophy { font-size: 4rem; margin-bottom: 1rem; }

.section-nav-buttons {
  display: flex;
  justify-content: space-between;
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 1px solid rgba(255,255,255,0.1);
}

/* ==================== INTERACTIVE ANIMATION AREA ==================== */
.visual-demo {
  background: var(--bg-card);
  border-radius: var(--radius);
  padding: 2rem;
  margin: 1.5rem 0;
  min-height: 200px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  border: 1px solid rgba(255,255,255,0.05);
}

.obj-visual {
  display: inline-flex;
  flex-direction: column;
  border: 2px solid;
  border-radius: 10px;
  padding: 0;
  min-width: 200px;
  overflow: hidden;
  transition: var(--transition);
}

.obj-visual .obj-header {
  padding: 0.6rem 1rem;
  font-weight: 700;
  font-size: 0.9rem;
  text-align: center;
}

.obj-visual .obj-body {
  padding: 0.8rem 1rem;
  background: rgba(0,0,0,0.2);
}

.obj-visual .obj-body .prop {
  font-size: 0.8rem;
  font-family: monospace;
  padding: 0.2rem 0;
  display: flex;
  justify-content: space-between;
  gap: 1rem;
}

.obj-visual .obj-body .method {
  font-size: 0.8rem;
  font-family: monospace;
  padding: 0.2rem 0;
  color: var(--accent-purple);
}

/* ==================== RESPONSIVE ==================== */
@media (max-width: 900px) {
  .sidebar { transform: translateX(-100%); }
  .sidebar.open { transform: translateX(0); }
  .main-content { margin-left: 0; }
  .solid-grid { grid-template-columns: repeat(5, 1fr); }
  .solid-letter-card .label { font-size: 0.5rem; }
}

@media (max-width: 600px) {
  .solid-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  .main-content { padding: 1rem; }
  .section-title { font-size: 1.6rem; }
  .diagram-row { flex-direction: column; align-items: center; }
}

/* ==================== HAMBURGER ==================== */
.hamburger {
  display: none;
  background: none;
  border: none;
  color: var(--text-primary);
  font-size: 1.5rem;
  cursor: pointer;
}

@media (max-width: 900px) {
  .hamburger { display: block; }
}

/* Highlight animation for XP gain */
@keyframes xpGain {
  0% { transform: scale(1); }
  50% { transform: scale(1.3); }
  100% { transform: scale(1); }
}

.xp-gain { animation: xpGain 0.5s ease; }

/* ==================== COLLAPSIBLE HINT ==================== */
.hint-toggle {
  background: rgba(179,136,255,0.1);
  border: 1px solid rgba(179,136,255,0.2);
  color: var(--accent-purple);
  padding: 0.5rem 1rem;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85rem;
  margin: 0.5rem 0;
  transition: var(--transition);
}

.hint-toggle:hover { background: rgba(179,136,255,0.2); }

.hint-content {
  display: none;
  padding: 1rem;
  margin-top: 0.5rem;
  background: rgba(179,136,255,0.05);
  border-radius: 8px;
  font-size: 0.9rem;
}

.hint-content.show { display: block; }

/* ==================== INLINE CODE ==================== */
code {
  background: rgba(255,255,255,0.08);
  padding: 0.15rem 0.5rem;
  border-radius: 4px;
  font-family: 'Fira Code', monospace;
  font-size: 0.85em;
  color: var(--accent-cyan);
}

/* Score confetti */
.confetti-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9999;
}

.confetti {
  position: absolute;
  width: 10px;
  height: 10px;
  border-radius: 2px;
  animation: confetti-fall 1.5s ease-in forwards;
}

@keyframes confetti-fall {
  0% { opacity: 1; transform: translateY(0) rotate(0deg); }
  100% { opacity: 0; transform: translateY(100vh) rotate(720deg); }
}

/* Tooltip */
.tooltip-trigger {
  border-bottom: 1px dashed var(--accent-cyan);
  cursor: help;
  position: relative;
}

/* Principle cards for SOLID */
.principle-visual {
  display: flex;
  gap: 1rem;
  margin: 1rem 0;
  flex-wrap: wrap;
}

.principle-card-mini {
  flex: 1;
  min-width: 200px;
  background: rgba(255,255,255,0.03);
  border-radius: 10px;
  padding: 1rem;
  text-align: center;
  border: 1px solid rgba(255,255,255,0.05);
}

.principle-card-mini .emoji {
  font-size: 2rem;
  margin-bottom: 0.5rem;
}

.principle-card-mini .name {
  font-weight: 700;
  font-size: 0.9rem;
  margin-bottom: 0.3rem;
}

.principle-card-mini .desc {
  font-size: 0.75rem;
  color: var(--text-secondary);
}

/* Animated inheritance chain */
.chain-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0;
  margin: 1rem 0;
}

.chain-node {
  border: 2px solid;
  border-radius: 10px;
  padding: 0.8rem 2rem;
  font-weight: 700;
  min-width: 180px;
  text-align: center;
  position: relative;
}

.chain-arrow {
  font-size: 1.5rem;
  color: var(--text-secondary);
  margin: 0.3rem 0;
}

/* Score display */
.score-display {
  position: fixed;
  top: 70px;
  right: 20px;
  z-index: 100;
  display: none;
}

.score-popup {
  background: linear-gradient(135deg, var(--accent-green), #00c853);
  color: #000;
  padding: 0.5rem 1rem;
  border-radius: 8px;
  font-weight: 700;
  font-size: 0.9rem;
  animation: scorePopup 2s forwards;
}

@keyframes scorePopup {
  0% { opacity: 0; transform: translateY(20px) scale(0.8); }
  20% { opacity: 1; transform: translateY(0) scale(1.1); }
  40% { transform: scale(1); }
  80% { opacity: 1; }
  100% { opacity: 0; transform: translateY(-20px); }
}

/* Mobile menu overlay */
.overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  z-index: 899;
}

.overlay.active { display: block; }

/* Section divider */
.divider {
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(233,69,96,0.3), transparent);
  margin: 2rem 0;
}
</style>
</head>
<body>

<!-- ==================== HEADER ==================== -->
<header class="app-header">
  <button class="hamburger" onclick="toggleSidebar()">‚ò∞</button>
  <div class="app-logo">
    <span>üéØ</span> JS OOP Mastery
  </div>
  <div class="progress-bar-container">
    <div class="progress-bar-bg">
      <div class="progress-bar-fill" id="progressFill"></div>
    </div>
    <div class="progress-text" id="progressText">0% Complete</div>
  </div>
  <div class="xp-badge" id="xpBadge">‚ö° <span id="xpCount">0</span> XP</div>
</header>

<!-- ==================== OVERLAY ==================== -->
<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

<!-- ==================== SIDEBAR ==================== -->
<nav class="sidebar" id="sidebar">
  <div class="nav-section">
    <div class="nav-section-title">üöÄ Foundations</div>
    <div class="nav-item active" data-section="welcome" onclick="goToSection('welcome')">
      <span class="nav-number">0</span>
      <span>Welcome & Overview</span>
      <span class="check-mark">‚úì</span>
    </div>
    <div class="nav-item" data-section="oop-basics" onclick="goToSection('oop-basics')">
      <span class="nav-number">1</span>
      <span>OOP Principles</span>
      <span class="check-mark">‚úì</span>
    </div>
  </div>
  <div class="nav-section">
    <div class="nav-section-title">üîí Encapsulation</div>
    <div class="nav-item" data-section="encapsulation" onclick="goToSection('encapsulation')">
      <span class="nav-number">2</span>
      <span>Encapsulation Deep Dive</span>
      <span class="check-mark">‚úì</span>
    </div>
    <div class="nav-item" data-section="encap-patterns" onclick="goToSection('encap-patterns')">
      <span class="nav-number">3</span>
      <span>Encapsulation Patterns</span>
      <span class="check-mark">‚úì</span>
    </div>
  </div>
  <div class="nav-section">
    <div class="nav-section-title">üîÄ Polymorphism</div>
    <div class="nav-item" data-section="polymorphism" onclick="goToSection('polymorphism')">
      <span class="nav-number">4</span>
      <span>Polymorphism</span>
      <span class="check-mark">‚úì</span>
    </div>
  </div>
  <div class="nav-section">
    <div class="nav-section-title">üèóÔ∏è SOLID Principles</div>
    <div class="nav-item" data-section="solid" onclick="goToSection('solid')">
      <span class="nav-number">5</span>
      <span>SOLID Overview</span>
      <span class="check-mark">‚úì</span>
    </div>
    <div class="nav-item" data-section="solid-deep" onclick="goToSection('solid-deep')">
      <span class="nav-number">6</span>
      <span>SOLID In Practice</span>
      <span class="check-mark">‚úì</span>
    </div>
  </div>
  <div class="nav-section">
    <div class="nav-section-title">‚öîÔ∏è Patterns</div>
    <div class="nav-item" data-section="comp-vs-inherit" onclick="goToSection('comp-vs-inherit')">
      <span class="nav-number">7</span>
      <span>Composition vs Inheritance</span>
      <span class="check-mark">‚úì</span>
    </div>
  </div>
  <div class="nav-section">
    <div class="nav-section-title">üèÜ Challenge</div>
    <div class="nav-item" data-section="final-challenge" onclick="goToSection('final-challenge')">
      <span class="nav-number">8</span>
      <span>Final Challenge</span>
      <span class="check-mark">‚úì</span>
    </div>
  </div>
</nav>

<!-- ==================== MAIN CONTENT ==================== -->
<main class="main-content">

<!-- ===== SECTION 0: WELCOME ===== -->
<div class="section active" id="section-welcome">
  <h1 class="section-title">Welcome to OOP Mastery üéØ</h1>
  <p class="section-subtitle">Master Object-Oriented Programming in JavaScript and ace that interview!</p>

  <div class="card">
    <div class="card-header"><span class="icon">üó∫Ô∏è</span> Your Learning Path</div>
    <p>This interactive course covers everything you need to <span class="highlight-important">demonstrate OOP competency</span> in a technical interview. Each section includes:</p>
    <ul style="padding-left:1.5rem; margin: 1rem 0;">
      <li>üìù Clear explanations with visual diagrams</li>
      <li>üíª Runnable code examples</li>
      <li>üéÆ Interactive playgrounds to experiment</li>
      <li>‚ùì Quizzes to test understanding</li>
      <li>‚ö†Ô∏è Common pitfalls interviewers watch for</li>
      <li>üèãÔ∏è Exercises to practice</li>
    </ul>
    <p>Earn <span class="highlight-keyword">XP points</span> as you complete quizzes and exercises!</p>
  </div>

  <div class="principle-visual">
    <div class="principle-card-mini">
      <div class="emoji">üß©</div>
      <div class="name">OOP Principles</div>
      <div class="desc">4 pillars of object-oriented design</div>
    </div>
    <div class="principle-card-mini">
      <div class="emoji">üîí</div>
      <div class="name">Encapsulation</div>
      <div class="desc">Data hiding & access control</div>
    </div>
    <div class="principle-card-mini">
      <div class="emoji">üîÄ</div>
      <div class="name">Polymorphism</div>
      <div class="desc">Many forms, one interface</div>
    </div>
    <div class="principle-card-mini">
      <div class="emoji">üèóÔ∏è</div>
      <div class="name">SOLID</div>
      <div class="desc">5 design principles</div>
    </div>
    <div class="principle-card-mini">
      <div class="emoji">‚öîÔ∏è</div>
      <div class="name">Composition</div>
      <div class="desc">Favor composition over inheritance</div>
    </div>
  </div>

  <div class="section-nav-buttons">
    <div></div>
    <button class="btn btn-primary" onclick="goToSection('oop-basics')">Start Learning ‚Üí</button>
  </div>
</div>

<!-- ===== SECTION 1: OOP BASICS ===== -->
<div class="section" id="section-oop-basics">
  <h1 class="section-title">OOP Principles üß©</h1>
  <p class="section-subtitle">The four pillars: Abstraction, Encapsulation, Inheritance, Polymorphism</p>

  <div class="info-box">
    <div class="box-title">üí° Why OOP in JavaScript?</div>
    <p>JavaScript is <strong>multi-paradigm</strong>. It supports OOP via prototypes AND classes (ES6+). Interviewers expect you to know <em>both</em> approaches and when to use them.</p>
  </div>

  <h3>The Four Pillars of OOP</h3>

  <div class="diagram">
    <div class="diagram-title">üèõÔ∏è The Four Pillars</div>
    <div class="diagram-row">
      <div class="diagram-box parent" style="border-color: var(--accent-1);">
        <div class="box-label" style="color: var(--accent-1);">Pillar 1</div>
        <div class="box-name">Abstraction</div>
        <div class="box-props">Hide complexity<br>Show only essentials<br>Think: car steering</div>
      </div>
      <div class="diagram-box parent" style="border-color: var(--accent-purple);">
        <div class="box-label" style="color: var(--accent-purple);">Pillar 2</div>
        <div class="box-name">Encapsulation</div>
        <div class="box-props">Bundle data + methods<br>Control access<br>Think: pill capsule</div>
      </div>
      <div class="diagram-box parent" style="border-color: var(--accent-green);">
        <div class="box-label" style="color: var(--accent-green);">Pillar 3</div>
        <div class="box-name">Inheritance</div>
        <div class="box-props">Reuse via parent-child<br>Prototype chain<br>Think: family traits</div>
      </div>
      <div class="diagram-box parent" style="border-color: var(--accent-cyan);">
        <div class="box-label" style="color: var(--accent-cyan);">Pillar 4</div>
        <div class="box-name">Polymorphism</div>
        <div class="box-props">Same interface<br>Different behavior<br>Think: USB port</div>
      </div>
    </div>
  </div>

  <h3>Classes in JavaScript (ES6+)</h3>
  <p>ES6 classes are <span class="highlight-keyword">syntactic sugar</span> over prototypal inheritance:</p>

  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>classes-basics.js</span>
      <div style="display:flex; gap:0.5rem;">
        <button class="btn-copy" onclick="copyCode(this)">üìã Copy</button>
        <button class="btn-run" onclick="runCode('oop-basics-1')">‚ñ∂ Run</button>
      </div>
    </div>
    <div class="code-block" id="code-oop-basics-1">class Animal {
  constructor(name, sound) {
    this.name = name;      // public property
    this.sound = sound;
  }

  // Method
  speak() {
    return `${this.name} says ${this.sound}!`;
  }

  // Getter
  get info() {
    return `${this.name} (${this.constructor.name})`;
  }
}

class Dog extends Animal {
  constructor(name, breed) {
    super(name, 'Woof');   // Call parent constructor
    this.breed = breed;
  }

  fetch(item) {
    return `${this.name} fetches the ${item}! üéæ`;
  }
}

const rex = new Dog('Rex', 'German Shepherd');
console.log(rex.speak());    // Inherited method
console.log(rex.fetch('ball'));
console.log(rex.info);       // Inherited getter
console.log(rex instanceof Dog);    // true
console.log(rex instanceof Animal); // true</div>
    <div class="code-output" id="output-oop-basics-1"></div>
  </div>

  <h3>Prototype Chain - How It Actually Works</h3>

  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>prototype-chain.js</span>
      <div style="display:flex; gap:0.5rem;">
        <button class="btn-copy" onclick="copyCode(this)">üìã Copy</button>
        <button class="btn-run" onclick="runCode('oop-basics-2')">‚ñ∂ Run</button>
      </div>
    </div>
    <div class="code-block" id="code-oop-basics-2">// Under the hood, classes use prototypes
class Vehicle {
  drive() { return 'Driving...'; }
}

class Car extends Vehicle {
  honk() { return 'Beep beep! üöó'; }
}

const myCar = new Car();

// Exploring the prototype chain
console.log('myCar owns "honk"?', myCar.hasOwnProperty('honk'));
// false - it's on Car.prototype!

console.log('Car.prototype has "honk"?',
  Car.prototype.hasOwnProperty('honk'));  // true

console.log('Car.prototype has "drive"?',
  Car.prototype.hasOwnProperty('drive')); // false

console.log('Vehicle.prototype has "drive"?',
  Vehicle.prototype.hasOwnProperty('drive')); // true

// The chain: myCar -> Car.prototype -> Vehicle.prototype -> Object.prototype -> null
console.log('\n--- Prototype Chain ---');
console.log(Object.getPrototypeOf(myCar) === Car.prototype);
console.log(Object.getPrototypeOf(Car.prototype) === Vehicle.prototype);
console.log(Object.getPrototypeOf(Vehicle.prototype) === Object.prototype);
console.log(Object.getPrototypeOf(Object.prototype) === null);</div>
    <div class="code-output" id="output-oop-basics-2"></div>
  </div>

  <div class="diagram">
    <div class="diagram-title">üîó Prototype Chain Visualization</div>
    <div class="chain-container">
      <div class="chain-node" style="border-color: var(--accent-cyan); color: var(--accent-cyan);">myCar instance<br><small style="color:var(--text-secondary)">{} (own properties)</small></div>
      <div class="chain-arrow">‚¨áÔ∏è __proto__</div>
      <div class="chain-node" style="border-color: var(--accent-purple); color: var(--accent-purple);">Car.prototype<br><small style="color:var(--text-secondary)">{ honk() }</small></div>
      <div class="chain-arrow">‚¨áÔ∏è __proto__</div>
      <div class="chain-node" style="border-color: var(--accent-green); color: var(--accent-green);">Vehicle.prototype<br><small style="color:var(--text-secondary)">{ drive() }</small></div>
      <div class="chain-arrow">‚¨áÔ∏è __proto__</div>
      <div class="chain-node" style="border-color: var(--accent-orange); color: var(--accent-orange);">Object.prototype<br><small style="color:var(--text-secondary)">{ toString(), ... }</small></div>
      <div class="chain-arrow">‚¨áÔ∏è __proto__</div>
      <div class="chain-node" style="border-color: var(--accent-1); color: var(--accent-1);">null</div>
    </div>
  </div>

  <div class="pitfall-box">
    <div class="box-title">‚ö†Ô∏è Common Pitfall: Forgetting `super()`</div>
    <p>If your subclass has a constructor, you <strong>must</strong> call <code>super()</code> before accessing <code>this</code>. Otherwise you get a <code>ReferenceError</code>.</p>
  </div>

  <!-- Quiz -->
  <div class="quiz-container" id="quiz-oop-1">
    <div class="quiz-header">
      <span class="quiz-badge">Quiz</span>
      <span>Test your understanding</span>
    </div>
    <div class="quiz-question">What does `instanceof` check?</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz('quiz-oop-1', this, false)">
        <span class="option-letter">A</span>
        <span>Whether two objects are equal</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-oop-1', this, true)">
        <span class="option-letter">B</span>
        <span>Whether an object's prototype chain contains a constructor's prototype</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-oop-1', this, false)">
        <span class="option-letter">C</span>
        <span>Whether an object was created using the `new` keyword</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-oop-1', this, false)">
        <span class="option-letter">D</span>
        <span>Whether a class directly inherits from another class</span>
      </div>
    </div>
    <div class="quiz-explanation" id="quiz-oop-1-exp"></div>
  </div>

  <div class="section-nav-buttons">
    <button class="btn btn-secondary" onclick="goToSection('welcome')">‚Üê Back</button>
    <button class="btn btn-primary" onclick="completeSection('oop-basics'); goToSection('encapsulation')">Next: Encapsulation ‚Üí</button>
  </div>
</div>

<!-- ===== SECTION 2: ENCAPSULATION DEEP DIVE ===== -->
<div class="section" id="section-encapsulation">
  <h1 class="section-title">Encapsulation Deep Dive üîí</h1>
  <p class="section-subtitle">Bundle data and methods. Control what the outside world can see and modify.</p>

  <div class="info-box">
    <div class="box-title">üí° What is Encapsulation?</div>
    <p>Encapsulation is about <strong>bundling data with the methods that operate on it</strong> and <strong>restricting direct access</strong> to some of the object's components. Think of it as a protective shield.</p>
  </div>

  <h3>The Problem Without Encapsulation</h3>
  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>no-encapsulation.js (BAD! ‚ùå)</span>
      <div><button class="btn-run" onclick="runCode('encap-bad')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-encap-bad">// ‚ùå No encapsulation - anyone can break our object!
class BankAccount {
  constructor(owner, balance) {
    this.owner = owner;
    this.balance = balance; // Public! Anyone can modify!
  }
}

const account = new BankAccount('Alice', 1000);

// Oops! Direct mutation with no validation!
account.balance = -500;  // Invalid! But nothing stops us
console.log(`Balance: $${account.balance}`); // -500 üò±

account.balance = 'one million dollars'; // Not even a number!
console.log(`Balance: $${account.balance}`); // Chaos!</div>
    <div class="code-output" id="output-encap-bad"></div>
  </div>

  <h3>1. Private Fields with # (ES2022+)</h3>
  <p>The <span class="highlight-keyword">modern and recommended</span> way to create truly private fields:</p>

  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>private-fields.js ‚úÖ</span>
      <div><button class="btn-run" onclick="runCode('encap-private')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-encap-private">class BankAccount {
  // Private fields (truly private - not accessible outside!)
  #balance;
  #transactionLog = [];

  constructor(owner, initialBalance) {
    this.owner = owner;  // public
    this.#balance = initialBalance;
    this.#log('Account created');
  }

  // Public interface (controlled access)
  deposit(amount) {
    if (amount <= 0) throw new Error('Deposit must be positive');
    this.#balance += amount;
    this.#log(`Deposited $${amount}`);
    return this;  // Enable chaining
  }

  withdraw(amount) {
    if (amount <= 0) throw new Error('Withdrawal must be positive');
    if (amount > this.#balance) throw new Error('Insufficient funds!');
    this.#balance -= amount;
    this.#log(`Withdrew $${amount}`);
    return this;
  }

  // Getter - read-only access
  get balance() {
    return this.#balance;
  }

  get history() {
    return [...this.#transactionLog]; // Return copy, not reference!
  }

  // Private method
  #log(message) {
    this.#transactionLog.push(
      `[${new Date().toLocaleTimeString()}] ${message}`
    );
  }
}

const acc = new BankAccount('Alice', 1000);
acc.deposit(500).withdraw(200);  // Method chaining!

console.log(`Owner: ${acc.owner}`);
console.log(`Balance: $${acc.balance}`);
console.log(`History:`, acc.history);

// These would throw errors:
try { console.log(acc.#balance); } catch(e) { console.log('‚ùå ' + e.message); }

// Can't set balance directly:
acc.balance = 999999;  // Silently fails (no setter defined)
console.log(`Balance still: $${acc.balance}`); // Unchanged!</div>
    <div class="code-output" id="output-encap-private"></div>
  </div>

  <h3>2. Closures for Encapsulation (Pre-ES2022)</h3>

  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>closure-encapsulation.js</span>
      <div><button class="btn-run" onclick="runCode('encap-closure')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-encap-closure">// Factory function with closures
function createCounter(initialValue = 0) {
  // These variables are "private" via closure
  let count = initialValue;
  let history = [];

  function log(action) {
    history.push({ action, value: count, time: Date.now() });
  }

  // Return public API only
  return {
    increment() {
      count++;
      log('increment');
      return this;
    },
    decrement() {
      if (count > 0) {
        count--;
        log('decrement');
      }
      return this;
    },
    get value() { return count; },
    get log() { return [...history]; },
    reset() {
      count = initialValue;
      log('reset');
      return this;
    }
  };
}

const counter = createCounter(10);
counter.increment().increment().increment().decrement();

console.log('Value:', counter.value);  // 12
console.log('History:', counter.log);

// Can't access internal state!
console.log('count:', counter.count);  // undefined
console.log('history:', counter.history); // undefined</div>
    <div class="code-output" id="output-encap-closure"></div>
  </div>

  <h3>3. WeakMap for Private Data</h3>

  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>weakmap-private.js</span>
      <div><button class="btn-run" onclick="runCode('encap-weakmap')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-encap-weakmap">// WeakMap pattern - works well with classes pre-ES2022
const _private = new WeakMap();

class User {
  constructor(name, email, password) {
    // Store private data in WeakMap
    _private.set(this, {
      email,
      password: this._hash(password),
      loginAttempts: 0
    });
    this.name = name; // public
  }

  _hash(pw) { return btoa(pw); } // simplified

  login(password) {
    const priv = _private.get(this);
    if (priv.loginAttempts >= 3) {
      return 'üîí Account locked! Too many attempts.';
    }
    if (this._hash(password) === priv.password) {
      priv.loginAttempts = 0;
      return `‚úÖ Welcome back, ${this.name}!`;
    }
    priv.loginAttempts++;
    return `‚ùå Wrong password. ${3 - priv.loginAttempts} attempts left.`;
  }

  get email() {
    const email = _private.get(this).email;
    // Mask the email for privacy
    const [user, domain] = email.split('@');
    return user[0] + '***@' + domain;
  }
}

const user = new User('Alice', 'alice@example.com', 'secret123');
console.log(user.name);     // Alice (public)
console.log(user.email);    // a***@example.com (masked)
console.log(user.password); // undefined (truly private)
console.log(user.login('wrong'));   // ‚ùå
console.log(user.login('secret123')); // ‚úÖ</div>
    <div class="code-output" id="output-encap-weakmap"></div>
  </div>

  <div class="pitfall-box">
    <div class="box-title">‚ö†Ô∏è Pitfall: The Underscore Convention Is NOT Private</div>
    <p>Using <code>_property</code> is just a <strong>naming convention</strong>. It doesn't actually prevent access! Interviewers know this ‚Äî never say "I made it private with an underscore."</p>
  </div>

  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>underscore-myth.js (‚ùå Not truly private)</span>
      <div><button class="btn-run" onclick="runCode('encap-myth')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-encap-myth">class Bad {
  constructor(secret) {
    this._secret = secret; // ‚ùå Convention only - still accessible!
  }
}

const obj = new Bad('my-password');
console.log(obj._secret); // 'my-password' - Not private at all!

// Compare with TRUE private:
class Good {
  #secret;
  constructor(secret) {
    this.#secret = secret; // ‚úÖ Actually private
  }
  reveal() { return 'Hint: starts with ' + this.#secret[0]; }
}

const obj2 = new Good('my-password');
console.log(obj2.reveal()); // Controlled access
try {
  console.log(obj2.#secret); // SyntaxError!
} catch(e) { console.log('‚ùå Cannot access #secret from outside!'); }</div>
    <div class="code-output" id="output-encap-myth"></div>
  </div>

  <!-- Quiz -->
  <div class="quiz-container" id="quiz-encap-1">
    <div class="quiz-header">
      <span class="quiz-badge">Quiz</span>
      <span>Encapsulation</span>
    </div>
    <div class="quiz-question">Which technique provides TRUE privacy in JavaScript?</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz('quiz-encap-1', this, false)">
        <span class="option-letter">A</span>
        <span>Prefixing with underscore: this._secret</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-encap-1', this, false)">
        <span class="option-letter">B</span>
        <span>Using Object.defineProperty with enumerable: false</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-encap-1', this, true)">
        <span class="option-letter">C</span>
        <span>Private class fields (#), closures, or WeakMap</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-encap-1', this, false)">
        <span class="option-letter">D</span>
        <span>Using Symbol as property keys</span>
      </div>
    </div>
    <div class="quiz-explanation" id="quiz-encap-1-exp"></div>
  </div>

  <div class="section-nav-buttons">
    <button class="btn btn-secondary" onclick="goToSection('oop-basics')">‚Üê Back</button>
    <button class="btn btn-primary" onclick="completeSection('encapsulation'); goToSection('encap-patterns')">Next: Patterns ‚Üí</button>
  </div>
</div>

<!-- ===== SECTION 3: ENCAPSULATION PATTERNS ===== -->
<div class="section" id="section-encap-patterns">
  <h1 class="section-title">Encapsulation Patterns üß∞</h1>
  <p class="section-subtitle">Getters, setters, validation, immutability, and the Revealing Module Pattern</p>

  <h3>Getters & Setters with Validation</h3>
  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>getters-setters.js</span>
      <div><button class="btn-run" onclick="runCode('encap-gs')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-encap-gs">class Temperature {
  #celsius;

  constructor(celsius) {
    this.celsius = celsius; // Use setter for validation!
  }

  // Getter
  get celsius() { return this.#celsius; }

  // Setter with validation
  set celsius(value) {
    if (typeof value !== 'number') throw new TypeError('Must be a number');
    if (value < -273.15) throw new RangeError('Below absolute zero!');
    this.#celsius = value;
  }

  // Computed property via getter
  get fahrenheit() {
    return (this.#celsius * 9/5) + 32;
  }

  set fahrenheit(f) {
    this.celsius = (f - 32) * 5/9; // Reuses celsius setter validation!
  }

  get kelvin() {
    return this.#celsius + 273.15;
  }

  toString() {
    return `${this.#celsius}¬∞C | ${this.fahrenheit}¬∞F | ${this.kelvin}K`;
  }
}

const temp = new Temperature(100);
console.log(temp.toString());

temp.fahrenheit = 32;
console.log(`After setting 32¬∞F: ${temp.toString()}`);

try {
  temp.celsius = -300; // Below absolute zero!
} catch (e) {
  console.log(`Validation works: ${e.message}`);
}

try {
  temp.celsius = 'hot'; // Not a number!
} catch (e) {
  console.log(`Type check works: ${e.message}`);
}</div>
    <div class="code-output" id="output-encap-gs"></div>
  </div>

  <h3>The Revealing Module Pattern</h3>
  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>revealing-module.js</span>
      <div><button class="btn-run" onclick="runCode('encap-reveal')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-encap-reveal">// Revealing Module Pattern - IIFE + Closures
const ShoppingCart = (() => {
  // Private state
  let items = [];
  let discount = 0;

  // Private functions
  function calculateTotal() {
    const subtotal = items.reduce((sum, item) =>
      sum + item.price * item.qty, 0);
    return subtotal * (1 - discount);
  }

  function findItem(name) {
    return items.find(i => i.name === name);
  }

  // Public API (revealed)
  return {
    addItem(name, price, qty = 1) {
      const existing = findItem(name);
      if (existing) {
        existing.qty += qty;
      } else {
        items.push({ name, price, qty });
      }
      console.log(`Added ${qty}x ${name} ($${price})`);
    },

    removeItem(name) {
      items = items.filter(i => i.name !== name);
      console.log(`Removed ${name}`);
    },

    setDiscount(pct) {
      if (pct < 0 || pct > 1) throw new Error('0-1 range!');
      discount = pct;
      console.log(`Discount set to ${pct * 100}%`);
    },

    get total() { return calculateTotal(); },
    get count() { return items.reduce((s, i) => s + i.qty, 0); },
    get summary() {
      return items.map(i => `${i.qty}x ${i.name}: $${i.price * i.qty}`)
        .join('\n');
    }
  };
})();

ShoppingCart.addItem('Laptop', 999);
ShoppingCart.addItem('Mouse', 29, 2);
ShoppingCart.addItem('Keyboard', 79);
ShoppingCart.setDiscount(0.1);

console.log(`\n--- Cart Summary ---`);
console.log(ShoppingCart.summary);
console.log(`Items: ${ShoppingCart.count}`);
console.log(`Total (10% off): $${ShoppingCart.total.toFixed(2)}`);

// Can't access private state:
console.log('\nDirect access attempt:', typeof items); // undefined</div>
    <div class="code-output" id="output-encap-reveal"></div>
  </div>

  <h3>Object.freeze & Immutability</h3>

  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>immutability.js</span>
      <div><button class="btn-run" onclick="runCode('encap-freeze')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-encap-freeze">// Object.freeze - shallow immutability
const config = Object.freeze({
  apiUrl: 'https://api.example.com',
  timeout: 5000,
  retries: 3,
  // ‚ö†Ô∏è Nested objects are NOT frozen!
  headers: { 'Content-Type': 'application/json' }
});

config.apiUrl = 'hacked!';  // Silently fails
console.log('apiUrl:', config.apiUrl); // Still original

// ‚ö†Ô∏è But nested objects CAN be mutated!
config.headers['X-Evil'] = 'gotcha';
console.log('headers:', config.headers); // Modified!

// Solution: Deep freeze utility
function deepFreeze(obj) {
  Object.freeze(obj);
  Object.getOwnPropertyNames(obj).forEach(prop => {
    if (typeof obj[prop] === 'object' && obj[prop] !== null
        && !Object.isFrozen(obj[prop])) {
      deepFreeze(obj[prop]);
    }
  });
  return obj;
}

const safeConfig = deepFreeze({
  apiUrl: 'https://api.example.com',
  headers: { 'Content-Type': 'application/json' }
});

safeConfig.headers['X-Evil'] = 'nope';
console.log('\nDeep frozen headers:', safeConfig.headers); // Safe!</div>
    <div class="code-output" id="output-encap-freeze"></div>
  </div>

  <div class="tip-box">
    <div class="box-title">‚úÖ Interview Tip</div>
    <p>When asked about encapsulation, mention multiple techniques: <code>#private</code> fields, closures, WeakMap, and getters/setters. Show you understand the trade-offs of each.</p>
  </div>

  <!-- Exercise -->
  <div class="exercise-box">
    <div class="box-title">üèãÔ∏è Exercise: Build an Encapsulated Stack</div>
    <p>Create a <code>Stack</code> class with private fields that supports: <code>push(item)</code>, <code>pop()</code>, <code>peek()</code>, <code>size</code> (getter), <code>isEmpty</code> (getter). Add proper error handling!</p>
  </div>

  <div class="playground">
    <div class="playground-title">üéÆ Try It Yourself</div>
    <textarea id="playground-encap" spellcheck="false">class Stack {
  #items = [];

  push(item) {
    // Your code here
  }

  pop() {
    // Your code here
  }

  peek() {
    // Your code here
  }

  get size() {
    // Your code here
  }

  get isEmpty() {
    // Your code here
  }
}

// Test it:
const stack = new Stack();
stack.push(1);
stack.push(2);
stack.push(3);
console.log('Peek:', stack.peek());    // 3
console.log('Size:', stack.size);      // 3
console.log('Pop:', stack.pop());      // 3
console.log('Size:', stack.size);      // 2
console.log('Empty?', stack.isEmpty);  // false</textarea>
    <button class="btn btn-success" onclick="runPlayground('playground-encap')" style="margin-top:0.5rem">‚ñ∂ Run Code</button>
    <button class="hint-toggle" onclick="toggleHint('hint-encap')">üí° Show Solution</button>
    <div class="hint-content" id="hint-encap">
      <div class="code-block">push(item) { this.#items.push(item); }
pop() {
  if (this.isEmpty) throw new Error('Stack underflow!');
  return this.#items.pop();
}
peek() {
  if (this.isEmpty) throw new Error('Stack is empty!');
  return this.#items[this.#items.length - 1];
}
get size() { return this.#items.length; }
get isEmpty() { return this.#items.length === 0; }</div>
    </div>
    <div class="playground-output" id="output-playground-encap"></div>
  </div>

  <div class="section-nav-buttons">
    <button class="btn btn-secondary" onclick="goToSection('encapsulation')">‚Üê Back</button>
    <button class="btn btn-primary" onclick="completeSection('encap-patterns'); goToSection('polymorphism')">Next: Polymorphism ‚Üí</button>
  </div>
</div>

<!-- ===== SECTION 4: POLYMORPHISM ===== -->
<div class="section" id="section-polymorphism">
  <h1 class="section-title">Polymorphism üîÄ</h1>
  <p class="section-subtitle">"Many forms" ‚Äî same interface, different implementations</p>

  <div class="info-box">
    <div class="box-title">üí° Polymorphism in JavaScript</div>
    <p>In JS, polymorphism is especially powerful because of <strong>duck typing</strong>: "If it walks like a duck and quacks like a duck, it <em>is</em> a duck." We care about <em>what an object can do</em>, not what class it belongs to.</p>
  </div>

  <h3>1. Method Overriding (Runtime Polymorphism)</h3>
  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>method-overriding.js</span>
      <div><button class="btn-run" onclick="runCode('poly-override')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-poly-override">class Shape {
  area() {
    throw new Error('area() must be implemented by subclass!');
  }

  describe() {
    return `I am a ${this.constructor.name} with area ${this.area().toFixed(2)}`;
  }
}

class Circle extends Shape {
  constructor(radius) {
    super();
    this.radius = radius;
  }

  area() {
    return Math.PI * this.radius ** 2;  // Override!
  }
}

class Rectangle extends Shape {
  constructor(width, height) {
    super();
    this.width = width;
    this.height = height;
  }

  area() {
    return this.width * this.height;  // Override!
  }
}

class Triangle extends Shape {
  constructor(base, height) {
    super();
    this.base = base;
    this.height = height;
  }

  area() {
    return 0.5 * this.base * this.height;  // Override!
  }
}

// üîë Polymorphism in action: same method, different results!
const shapes = [
  new Circle(5),
  new Rectangle(4, 6),
  new Triangle(3, 8)
];

// We can treat ALL shapes the same way:
shapes.forEach(shape => {
  console.log(shape.describe());  // Each calls its own area()!
});

// Calculate total area without knowing specific types
const totalArea = shapes.reduce((sum, s) => sum + s.area(), 0);
console.log(`\nTotal area: ${totalArea.toFixed(2)}`);

// This is the power: add new shapes without changing existing code!
console.log(`\nAll are Shapes:`, shapes.every(s => s instanceof Shape));</div>
    <div class="code-output" id="output-poly-override"></div>
  </div>

  <h3>2. Duck Typing (Structural Polymorphism)</h3>
  <p>JavaScript doesn't need class hierarchies for polymorphism. If it has the right methods, it works!</p>

  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>duck-typing.js</span>
      <div><button class="btn-run" onclick="runCode('poly-duck')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-poly-duck">// Duck typing: no shared parent class needed!

class Logger {
  write(msg) { console.log(`[LOG] ${msg}`); }
}

class FileWriter {
  write(msg) { console.log(`[FILE] Writing "${msg}" to disk`); }
}

class ApiSender {
  write(msg) { console.log(`[API] POST /logs: "${msg}"`); }
}

// Even a plain object works!
const consoleWriter = {
  write(msg) { console.log(`[CONSOLE] ${msg}`); }
};

// Polymorphic function - doesn't care about the type!
function logMessage(writers, message) {
  writers.forEach(writer => {
    if (typeof writer.write === 'function') {
      writer.write(message);  // Duck typing!
    }
  });
}

// Mix classes and plain objects - all work!
const writers = [
  new Logger(),
  new FileWriter(),
  new ApiSender(),
  consoleWriter
];

logMessage(writers, 'Server started on port 3000');
console.log('\n--- This is the power of duck typing! ---');
console.log('No shared interface/class needed.');</div>
    <div class="code-output" id="output-poly-duck"></div>
  </div>

  <h3>3. Method Overloading (Simulated)</h3>
  <p>JavaScript doesn't have true method overloading, but we can simulate it:</p>

  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>overloading.js</span>
      <div><button class="btn-run" onclick="runCode('poly-overload')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-poly-overload">class DateFormatter {
  // Simulated overloading with argument checking
  format(...args) {
    if (args.length === 0) {
      return this.#formatDate(new Date());
    }
    if (args[0] instanceof Date) {
      return this.#formatDate(args[0]);
    }
    if (typeof args[0] === 'string') {
      return this.#formatDate(new Date(args[0]));
    }
    if (typeof args[0] === 'number' && args.length === 3) {
      return this.#formatDate(new Date(args[0], args[1] - 1, args[2]));
    }
    if (typeof args[0] === 'object' && args[0].year) {
      return this.#formatDate(
        new Date(args[0].year, (args[0].month || 1) - 1, args[0].day || 1)
      );
    }
    throw new Error('Invalid arguments!');
  }

  #formatDate(date) {
    return date.toLocaleDateString('en-US', {
      weekday: 'long', year: 'numeric',
      month: 'long', day: 'numeric'
    });
  }
}

const fmt = new DateFormatter();

// Same method, many calling conventions:
console.log(fmt.format());                         // Current date
console.log(fmt.format(new Date(2024, 0, 1)));    // Date object
console.log(fmt.format('2024-06-15'));             // String
console.log(fmt.format(2024, 12, 25));            // Year, month, day
console.log(fmt.format({ year: 2025, month: 3, day: 14 })); // Object</div>
    <div class="code-output" id="output-poly-overload"></div>
  </div>

  <h3>4. Polymorphism with Symbol.iterator</h3>

  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>symbol-polymorphism.js</span>
      <div><button class="btn-run" onclick="runCode('poly-symbol')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-poly-symbol">// Built-in polymorphism via well-known Symbols

class Range {
  constructor(start, end) {
    this.start = start;
    this.end = end;
  }

  // Make it iterable (for...of works!)
  [Symbol.iterator]() {
    let current = this.start;
    const end = this.end;
    return {
      next() {
        if (current <= end) {
          return { value: current++, done: false };
        }
        return { done: true };
      }
    };
  }

  // Custom string representation
  [Symbol.toPrimitive](hint) {
    if (hint === 'string') return `Range(${this.start}..${this.end})`;
    if (hint === 'number') return this.end - this.start + 1;
    return true;
  }
}

const range = new Range(1, 5);

// Polymorphic behavior via symbols:
console.log('for...of:');
for (const n of range) process.stdout?.write ? 0 : console.log(n);
console.log([...range]); // Spread works too!

console.log(`String: ${range}`);    // Range(1..5)
console.log('Length:', +range);      // 5 (number hint)
console.log('Array.from:', Array.from(range)); // [1,2,3,4,5]</div>
    <div class="code-output" id="output-poly-symbol"></div>
  </div>

  <div class="pitfall-box">
    <div class="box-title">‚ö†Ô∏è Pitfall: Broken Polymorphism with Arrow Functions</div>
    <p>Arrow functions don't have their own <code>this</code> ‚Äî they can't be used as methods in classes if you rely on <code>this</code> for polymorphism via inheritance.</p>
  </div>

  <!-- Quiz -->
  <div class="quiz-container" id="quiz-poly-1">
    <div class="quiz-header">
      <span class="quiz-badge">Quiz</span>
      <span>Polymorphism</span>
    </div>
    <div class="quiz-question">What is "duck typing" in JavaScript?</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz('quiz-poly-1', this, false)">
        <span class="option-letter">A</span>
        <span>A design pattern using the Duck class as a base</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-poly-1', this, false)">
        <span class="option-letter">B</span>
        <span>Type checking using typeof and instanceof</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-poly-1', this, true)">
        <span class="option-letter">C</span>
        <span>Checking if an object has the required methods/properties regardless of its type</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-poly-1', this, false)">
        <span class="option-letter">D</span>
        <span>A TypeScript-only feature for structural typing</span>
      </div>
    </div>
    <div class="quiz-explanation" id="quiz-poly-1-exp"></div>
  </div>

  <div class="quiz-container" id="quiz-poly-2">
    <div class="quiz-header">
      <span class="quiz-badge">Quiz</span>
      <span>Advanced</span>
    </div>
    <div class="quiz-question">What happens when a subclass method calls `super.methodName()`?</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz('quiz-poly-2', this, false)">
        <span class="option-letter">A</span>
        <span>It creates a new instance of the parent class</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-poly-2', this, true)">
        <span class="option-letter">B</span>
        <span>It calls the parent class's version of that method</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-poly-2', this, false)">
        <span class="option-letter">C</span>
        <span>It skips the current method and goes to the next one</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-poly-2', this, false)">
        <span class="option-letter">D</span>
        <span>It throws an error because super can only be used in constructors</span>
      </div>
    </div>
    <div class="quiz-explanation" id="quiz-poly-2-exp"></div>
  </div>

  <div class="section-nav-buttons">
    <button class="btn btn-secondary" onclick="goToSection('encap-patterns')">‚Üê Back</button>
    <button class="btn btn-primary" onclick="completeSection('polymorphism'); goToSection('solid')">Next: SOLID ‚Üí</button>
  </div>
</div>

<!-- ===== SECTION 5: SOLID OVERVIEW ===== -->
<div class="section" id="section-solid">
  <h1 class="section-title">SOLID Principles üèóÔ∏è</h1>
  <p class="section-subtitle">Five principles for maintainable, scalable, testable code</p>

  <div class="info-box">
    <div class="box-title">üí° Why SOLID Matters in Interviews</div>
    <p>SOLID is one of the <strong>most frequently asked topics</strong> in senior JS interviews. You don't need to memorize definitions ‚Äî you need to show <em>practical examples</em> and explain <em>why</em> each principle matters.</p>
  </div>

  <p>Click each letter to explore:</p>
  <div class="solid-grid">
    <div class="solid-letter-card active" onclick="showSolid(0)">
      <div class="letter">S</div>
      <div class="label">Single Responsibility</div>
    </div>
    <div class="solid-letter-card" onclick="showSolid(1)">
      <div class="letter">O</div>
      <div class="label">Open/Closed</div>
    </div>
    <div class="solid-letter-card" onclick="showSolid(2)">
      <div class="letter">L</div>
      <div class="label">Liskov Substitution</div>
    </div>
    <div class="solid-letter-card" onclick="showSolid(3)">
      <div class="letter">I</div>
      <div class="label">Interface Segregation</div>
    </div>
    <div class="solid-letter-card" onclick="showSolid(4)">
      <div class="letter">D</div>
      <div class="label">Dependency Inversion</div>
    </div>
  </div>

  <!-- S -->
  <div class="solid-detail active" id="solid-0">
    <h3>S ‚Äî Single Responsibility Principle</h3>
    <p><strong>"A class should have only one reason to change."</strong></p>

    <div class="tabs-container">
      <div class="tabs-header">
        <button class="tab-btn active" onclick="switchTab(this, 'srp-bad')">‚ùå Bad</button>
        <button class="tab-btn" onclick="switchTab(this, 'srp-good')">‚úÖ Good</button>
      </div>
      <div class="tab-content active" id="tab-srp-bad">
        <div class="code-container">
          <div class="code-header">
            <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
            <span>srp-violation.js ‚ùå</span>
            <div><button class="btn-run" onclick="runCode('srp-bad')">‚ñ∂ Run</button></div>
          </div>
          <div class="code-block" id="code-srp-bad">// ‚ùå This class does TOO MANY things!
class UserManager {
  constructor(name, email) {
    this.name = name;
    this.email = email;
  }

  // Responsibility 1: User data
  updateName(name) { this.name = name; }

  // Responsibility 2: Validation (should be separate)
  validateEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  }

  // Responsibility 3: Persistence (should be separate)
  saveToDatabase() {
    console.log(`INSERT INTO users (${this.name}, ${this.email})`);
  }

  // Responsibility 4: Notification (should be separate)
  sendWelcomeEmail() {
    console.log(`Sending welcome email to ${this.email}`);
  }

  // Responsibility 5: Logging (should be separate)
  logActivity(action) {
    console.log(`[${new Date().toISOString()}] ${this.name}: ${action}`);
  }
}

console.log('‚ö†Ô∏è This class has 5 reasons to change!');
console.log('Change email provider? ‚Üí Modify UserManager');
console.log('Change database? ‚Üí Modify UserManager');
console.log('Change logging format? ‚Üí Modify UserManager');
console.log('\n This becomes a maintenance nightmare üò±');</div>
          <div class="code-output" id="output-srp-bad"></div>
        </div>
      </div>
      <div class="tab-content" id="tab-srp-good">
        <div class="code-container">
          <div class="code-header">
            <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
            <span>srp-correct.js ‚úÖ</span>
            <div><button class="btn-run" onclick="runCode('srp-good')">‚ñ∂ Run</button></div>
          </div>
          <div class="code-block" id="code-srp-good">// ‚úÖ Each class has ONE responsibility

class User {
  constructor(name, email) {
    this.name = name;
    this.email = email;
  }
  updateName(name) { this.name = name; }
}

class EmailValidator {
  static validate(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  }
}

class UserRepository {
  save(user) {
    console.log(`üíæ Saving ${user.name} to database`);
  }
  find(id) {
    console.log(`üîç Finding user ${id}`);
  }
}

class EmailService {
  sendWelcome(user) {
    console.log(`üìß Welcome email sent to ${user.email}`);
  }
}

class ActivityLogger {
  log(user, action) {
    console.log(`üìù [${new Date().toISOString()}] ${user.name}: ${action}`);
  }
}

// Usage: compose them together
const user = new User('Alice', 'alice@test.com');
const repo = new UserRepository();
const emailer = new EmailService();
const logger = new ActivityLogger();

if (EmailValidator.validate(user.email)) {
  repo.save(user);
  emailer.sendWelcome(user);
  logger.log(user, 'registered');
}

console.log('\n‚úÖ Each class can change independently!');
console.log('‚úÖ Easy to test each in isolation!');
console.log('‚úÖ Easy to swap implementations!');</div>
          <div class="code-output" id="output-srp-good"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- O -->
  <div class="solid-detail" id="solid-1">
    <h3>O ‚Äî Open/Closed Principle</h3>
    <p><strong>"Open for extension, closed for modification."</strong></p>
    <p>Add new behavior without changing existing code.</p>

    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
        <span>ocp-example.js</span>
        <div><button class="btn-run" onclick="runCode('ocp-demo')">‚ñ∂ Run</button></div>
      </div>
      <div class="code-block" id="code-ocp-demo">// ‚ùå BAD: Must modify this function for each new shape
function calcAreaBad(shapes) {
  return shapes.reduce((total, shape) => {
    if (shape.type === 'circle') return total + Math.PI * shape.radius ** 2;
    if (shape.type === 'rect') return total + shape.w * shape.h;
    // Adding triangle? Must modify this function!
    return total;
  }, 0);
}

// ‚úÖ GOOD: Open for extension, closed for modification
class Shape {
  area() { throw new Error('Implement me!'); }
}

class Circle extends Shape {
  constructor(r) { super(); this.radius = r; }
  area() { return Math.PI * this.radius ** 2; }
}

class Rect extends Shape {
  constructor(w, h) { super(); this.width = w; this.height = h; }
  area() { return this.width * this.height; }
}

// Adding new shapes NEVER requires changing existing code!
class Trapezoid extends Shape {
  constructor(a, b, h) { super(); this.a = a; this.b = b; this.h = h; }
  area() { return ((this.a + this.b) / 2) * this.h; }
}

// This function NEVER needs to change:
function totalArea(shapes) {
  return shapes.reduce((sum, s) => sum + s.area(), 0);
}

const shapes = [new Circle(5), new Rect(4, 6), new Trapezoid(3, 7, 4)];
console.log('Total area:', totalArea(shapes).toFixed(2));
console.log('\n‚úÖ Added Trapezoid without modifying totalArea!');
console.log('‚úÖ Can add Pentagon, Hexagon... same function works!');</div>
      <div class="code-output" id="output-ocp-demo"></div>
    </div>
  </div>

  <!-- L -->
  <div class="solid-detail" id="solid-2">
    <h3>L ‚Äî Liskov Substitution Principle</h3>
    <p><strong>"Subtypes must be substitutable for their base types."</strong></p>

    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
        <span>lsp-example.js</span>
        <div><button class="btn-run" onclick="runCode('lsp-demo')">‚ñ∂ Run</button></div>
      </div>
      <div class="code-block" id="code-lsp-demo">// ‚ùå Classic LSP violation: Square extends Rectangle
class Rectangle {
  constructor(w, h) { this.width = w; this.height = h; }
  setWidth(w) { this.width = w; }
  setHeight(h) { this.height = h; }
  area() { return this.width * this.height; }
}

class Square extends Rectangle {
  setWidth(w) { this.width = w; this.height = w; } // ‚ùå Surprise!
  setHeight(h) { this.width = h; this.height = h; } // ‚ùå Surprise!
}

// This function works for Rectangle but breaks for Square!
function doubleWidth(rect) {
  const originalHeight = rect.height;
  rect.setWidth(rect.width * 2);
  // We expect height didn't change...
  console.log(`Height unchanged? ${rect.height === originalHeight}`);
  return rect.area();
}

const rect = new Rectangle(3, 4);
console.log('Rectangle area after doubleWidth:', doubleWidth(rect)); // 24 ‚úÖ

const sq = new Square(3, 3);
console.log('Square area after doubleWidth:', doubleWidth(sq)); // 36 ‚ùå Expected 18!

console.log('\n--- ‚úÖ Better design ---');

// ‚úÖ Better: Separate classes, no inheritance relationship
class Shape2 {
  area() { throw new Error('Implement me'); }
}

class Rect2 extends Shape2 {
  constructor(w, h) { super(); this.w = w; this.h = h; }
  area() { return this.w * this.h; }
}

class Square2 extends Shape2 {
  constructor(side) { super(); this.side = side; }
  area() { return this.side ** 2; }
}

console.log('Rect2:', new Rect2(3, 4).area());  // 12
console.log('Square2:', new Square2(5).area());  // 25</div>
      <div class="code-output" id="output-lsp-demo"></div>
    </div>
  </div>

  <!-- I -->
  <div class="solid-detail" id="solid-3">
    <h3>I ‚Äî Interface Segregation Principle</h3>
    <p><strong>"No client should be forced to depend on methods it doesn't use."</strong></p>
    <p>JS doesn't have formal interfaces, but we can apply the concept with composition:</p>

    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
        <span>isp-example.js</span>
        <div><button class="btn-run" onclick="runCode('isp-demo')">‚ñ∂ Run</button></div>
      </div>
      <div class="code-block" id="code-isp-demo">// ‚ùå BAD: Fat interface - not all workers can do everything
class BadWorker {
  work() { return 'working'; }
  eat() { return 'eating'; }
  attendMeeting() { return 'meeting'; }
  writeReport() { return 'reporting'; }
}

// Robot can work but can't eat! Forced to inherit useless methods.
class Robot extends BadWorker {
  eat() { throw new Error("Robots don't eat! ü§ñ"); }
  attendMeeting() { throw new Error("Not invited! ü§ñ"); }
}

// ‚úÖ GOOD: Segregated interfaces via mixins
const Workable = (Base) => class extends Base {
  work() { return `${this.name} is working üí™`; }
};

const Eatable = (Base) => class extends Base {
  eat() { return `${this.name} is eating üçï`; }
};

const Meetable = (Base) => class extends Base {
  attendMeeting() { return `${this.name} is in a meeting üìã`; }
};

class Entity {
  constructor(name) { this.name = name; }
}

// Human gets all capabilities
class Human extends Meetable(Eatable(Workable(Entity))) {}

// Robot only gets work capability
class SmartRobot extends Workable(Entity) {}

const alice = new Human('Alice');
console.log(alice.work());
console.log(alice.eat());
console.log(alice.attendMeeting());

const bot = new SmartRobot('Bot-X');
console.log(bot.work());
console.log('Bot can eat?', typeof bot.eat); // undefined - not forced!

console.log('\n‚úÖ Each "interface" is separate and composable!');</div>
      <div class="code-output" id="output-isp-demo"></div>
    </div>
  </div>

  <!-- D -->
  <div class="solid-detail" id="solid-4">
    <h3>D ‚Äî Dependency Inversion Principle</h3>
    <p><strong>"Depend on abstractions, not concretions."</strong></p>

    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
        <span>dip-example.js</span>
        <div><button class="btn-run" onclick="runCode('dip-demo')">‚ñ∂ Run</button></div>
      </div>
      <div class="code-block" id="code-dip-demo">// ‚ùå BAD: High-level module depends on low-level details
class BadOrderService {
  constructor() {
    this.db = new MySQLDatabase();      // ‚ùå Hardcoded!
    this.mailer = new SendGridMailer(); // ‚ùå Hardcoded!
  }
}

// ‚úÖ GOOD: Depend on abstractions (inject dependencies)
class OrderService {
  #db;
  #mailer;
  #logger;

  // Dependencies are INJECTED, not created internally
  constructor({ database, mailer, logger }) {
    this.#db = database;
    this.#mailer = mailer;
    this.#logger = logger;
  }

  async placeOrder(order) {
    this.#logger.info(`Placing order: ${order.id}`);
    this.#db.save('orders', order);
    this.#mailer.send(order.email, 'Order Confirmed!');
    this.#logger.info(`Order ${order.id} placed ‚úÖ`);
  }
}

// Implementations (can be swapped easily!)
class PostgresDB {
  save(table, data) { console.log(`[Postgres] Saved to ${table}`); }
}

class MockDB {
  save(table, data) { console.log(`[MockDB] Fake save to ${table}`); }
}

class EmailService {
  send(to, subject) { console.log(`[Email] "${subject}" ‚Üí ${to}`); }
}

class ConsoleLogger {
  info(msg) { console.log(`[INFO] ${msg}`); }
}

// Production
const prodService = new OrderService({
  database: new PostgresDB(),
  mailer: new EmailService(),
  logger: new ConsoleLogger()
});

prodService.placeOrder({ id: 'ORD-1', email: 'user@test.com' });

console.log('\n--- Testing with mocks ---');

// Test (swap to mocks!)
const testService = new OrderService({
  database: new MockDB(),
  mailer: { send: (to, subj) => console.log(`[Mock Email] ${subj}`) },
  logger: { info: (msg) => console.log(`[Test] ${msg}`) }
});

testService.placeOrder({ id: 'TEST-1', email: 'test@test.com' });</div>
      <div class="code-output" id="output-dip-demo"></div>
    </div>
  </div>

  <div class="section-nav-buttons">
    <button class="btn btn-secondary" onclick="goToSection('polymorphism')">‚Üê Back</button>
    <button class="btn btn-primary" onclick="completeSection('solid'); goToSection('solid-deep')">Next: SOLID In Practice ‚Üí</button>
  </div>
</div>

<!-- ===== SECTION 6: SOLID IN PRACTICE ===== -->
<div class="section" id="section-solid-deep">
  <h1 class="section-title">SOLID In Practice üõ†Ô∏è</h1>
  <p class="section-subtitle">Real-world patterns, exercises, and interview scenarios</p>

  <h3>Real-World Example: Payment Processing System</h3>
  <p>This example demonstrates <strong>all 5 SOLID principles</strong> working together:</p>

  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>payment-system.js (All SOLID)</span>
      <div><button class="btn-run" onclick="runCode('solid-real')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-solid-real">// [S] Each class has ONE responsibility
// [O] New payment methods don't require modifying PaymentProcessor
// [L] All processors are substitutable
// [I] Each processor only implements what it needs
// [D] PaymentProcessor depends on abstractions

// Payment Strategy (abstraction)
class PaymentProcessor {
  #strategies = new Map();
  #logger;

  constructor(logger) {
    this.#logger = logger;  // [D] Injected dependency
  }

  // [O] Register new strategies without modifying this class
  register(name, strategy) {
    this.#strategies.set(name, strategy);
    return this; // chainable
  }

  process(method, amount, details) {
    const strategy = this.#strategies.get(method);
    if (!strategy) throw new Error(`Unknown method: ${method}`);

    // [L] All strategies are substitutable - same interface
    const result = strategy.pay(amount, details);
    this.#logger.log(result);
    return result;
  }
}

// [S] Each handles ONLY its payment logic
class CreditCardPayment {
  pay(amount, { cardNumber }) {
    const last4 = cardNumber.slice(-4);
    return { success: true, method: 'Credit Card',
             amount, ref: `CC-${last4}-${Date.now()}` };
  }
}

class PayPalPayment {
  pay(amount, { email }) {
    return { success: true, method: 'PayPal',
             amount, ref: `PP-${email}-${Date.now()}` };
  }
}

class CryptoPayment {
  pay(amount, { wallet }) {
    return { success: true, method: 'Crypto',
             amount, ref: `BTC-${wallet.slice(0,8)}-${Date.now()}` };
  }
}

// [S] Logger only logs
class TransactionLogger {
  log(result) {
    console.log(
      `${result.success ? '‚úÖ' : '‚ùå'} ${result.method}: ` +
      `$${result.amount} | Ref: ${result.ref}`
    );
  }
}

// Wire it up
const processor = new PaymentProcessor(new TransactionLogger());

processor
  .register('card', new CreditCardPayment())
  .register('paypal', new PayPalPayment())
  .register('crypto', new CryptoPayment());

// Process payments
processor.process('card', 99.99, { cardNumber: '4111222233334444' });
processor.process('paypal', 49.50, { email: 'user@email.com' });
processor.process('crypto', 150, { wallet: '0xABCDEF123456789' });

// [O] Adding Apple Pay? Just add a new class!
class ApplePayPayment {
  pay(amount, { deviceId }) {
    return { success: true, method: 'Apple Pay',
             amount, ref: `AP-${deviceId}-${Date.now()}` };
  }
}
processor.register('apple', new ApplePayPayment());
processor.process('apple', 29.99, { deviceId: 'iPhone-15' });

console.log('\n‚úÖ Added Apple Pay without changing ANY existing code!');</div>
    <div class="code-output" id="output-solid-real"></div>
  </div>

  <!-- SOLID Quiz -->
  <div class="quiz-container" id="quiz-solid-1">
    <div class="quiz-header">
      <span class="quiz-badge">Quiz</span>
      <span>SOLID Principles</span>
    </div>
    <div class="quiz-question">A class `UserService` that handles user CRUD, email notifications, AND logging violates which principle?</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz('quiz-solid-1', this, true)">
        <span class="option-letter">A</span>
        <span>Single Responsibility Principle</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-solid-1', this, false)">
        <span class="option-letter">B</span>
        <span>Open/Closed Principle</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-solid-1', this, false)">
        <span class="option-letter">C</span>
        <span>Liskov Substitution Principle</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-solid-1', this, false)">
        <span class="option-letter">D</span>
        <span>Dependency Inversion Principle</span>
      </div>
    </div>
    <div class="quiz-explanation" id="quiz-solid-1-exp"></div>
  </div>

  <div class="quiz-container" id="quiz-solid-2">
    <div class="quiz-header">
      <span class="quiz-badge">Quiz</span>
      <span>SOLID Principles</span>
    </div>
    <div class="quiz-question">Which pattern best demonstrates the Dependency Inversion Principle?</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz('quiz-solid-2', this, false)">
        <span class="option-letter">A</span>
        <span>Creating database instances inside the constructor with `new`</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-solid-2', this, true)">
        <span class="option-letter">B</span>
        <span>Injecting dependencies through the constructor parameter</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-solid-2', this, false)">
        <span class="option-letter">C</span>
        <span>Using global variables for shared services</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-solid-2', this, false)">
        <span class="option-letter">D</span>
        <span>Importing modules directly at the top of the file</span>
      </div>
    </div>
    <div class="quiz-explanation" id="quiz-solid-2-exp"></div>
  </div>

  <div class="section-nav-buttons">
    <button class="btn btn-secondary" onclick="goToSection('solid')">‚Üê Back</button>
    <button class="btn btn-primary" onclick="completeSection('solid-deep'); goToSection('comp-vs-inherit')">Next: Composition vs Inheritance ‚Üí</button>
  </div>
</div>

<!-- ===== SECTION 7: COMPOSITION VS INHERITANCE ===== -->
<div class="section" id="section-comp-vs-inherit">
  <h1 class="section-title">Composition vs Inheritance ‚öîÔ∏è</h1>
  <p class="section-subtitle">"Favor composition over inheritance" ‚Äî and know when each applies</p>

  <div class="info-box">
    <div class="box-title">üí° The Golden Rule</div>
    <p><strong>Inheritance</strong> = "is-a" relationship (Dog IS AN Animal)<br>
    <strong>Composition</strong> = "has-a" relationship (Car HAS AN Engine)<br><br>
    When in doubt, use composition. It's more flexible and avoids the "gorilla-banana problem" (you wanted a banana but got a gorilla holding the banana and the entire jungle).</p>
  </div>

  <h3>The Problem with Deep Inheritance</h3>

  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>inheritance-problem.js ‚ùå</span>
      <div><button class="btn-run" onclick="runCode('comp-bad')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-comp-bad">// ‚ùå Inheritance hierarchy nightmare
class Animal {
  eat() { return 'üçΩÔ∏è eating'; }
}

class FlyingAnimal extends Animal {
  fly() { return 'ü¶Ö flying'; }
}

class SwimmingAnimal extends Animal {
  swim() { return 'üêü swimming'; }
}

// Problem: A duck flies AND swims!
// Can't extend both FlyingAnimal AND SwimmingAnimal!
// JS doesn't support multiple inheritance

class Duck extends FlyingAnimal {
  // We have to manually add swim... üò´
  swim() { return 'ü¶Ü swimming'; }
}

// Gets worse: what about a flying fish?
class FlyingFish extends SwimmingAnimal {
  // Duplicate the fly method... üò´
  fly() { return 'üê† somehow flying'; }
}

const duck = new Duck();
console.log(duck.eat());
console.log(duck.fly());
console.log(duck.swim());

console.log('\n‚ö†Ô∏è Problems:');
console.log('1. Code duplication (swim in Duck, fly in FlyingFish)');
console.log('2. Rigid hierarchy - hard to add new combinations');
console.log('3. Fragile base class - changes ripple down');
console.log('4. Can\'t add abilities dynamically');</div>
    <div class="code-output" id="output-comp-bad"></div>
  </div>

  <h3>Solution: Composition with Mixins</h3>

  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>composition-mixins.js ‚úÖ</span>
      <div><button class="btn-run" onclick="runCode('comp-mixin')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-comp-mixin">// ‚úÖ Composition with mixin factories

// Define behaviors as composable functions
const canEat = (state) => ({
  eat: () => `${state.name} is eating üçΩÔ∏è`
});

const canFly = (state) => ({
  fly: () => `${state.name} is flying at ${state.speed || 'normal'} speed ü¶Ö`
});

const canSwim = (state) => ({
  swim: () => `${state.name} is swimming üêü`,
  dive: (depth) => `${state.name} dives to ${depth}m ü§ø`
});

const canWalk = (state) => ({
  walk: () => `${state.name} is walking üö∂`
});

// Factory functions - compose any combination!
function createDuck(name) {
  const state = { name, speed: 'moderate' };
  return {
    ...canEat(state),
    ...canFly(state),
    ...canSwim(state),
    ...canWalk(state),
    quack: () => `${name} says QUACK! ü¶Ü`
  };
}

function createFlyingFish(name) {
  const state = { name, speed: 'fast' };
  return {
    ...canSwim(state),
    ...canFly(state),
  };
}

function createPenguin(name) {
  const state = { name };
  return {
    ...canEat(state),
    ...canSwim(state),
    ...canWalk(state),
    // Penguins can't fly! And that's fine - no unwanted methods!
  };
}

const donald = createDuck('Donald');
console.log(donald.fly());
console.log(donald.swim());
console.log(donald.quack());
console.log(donald.eat());

const nemo = createFlyingFish('Nemo');
console.log('\n' + nemo.swim());
console.log(nemo.fly());
console.log(nemo.dive(50));

const tux = createPenguin('Tux');
console.log('\n' + tux.walk());
console.log(tux.swim());
console.log('Can Tux fly?', typeof tux.fly); // undefined - correct!

console.log('\n‚úÖ No inheritance hierarchy!');
console.log('‚úÖ Mix and match any abilities!');
console.log('‚úÖ No unwanted methods!');
console.log('‚úÖ Easy to add new behaviors!');</div>
    <div class="code-output" id="output-comp-mixin"></div>
  </div>

  <h3>Composition with Classes</h3>

  <div class="code-container">
    <div class="code-header">
      <div class="dots"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>
      <span>class-composition.js</span>
      <div><button class="btn-run" onclick="runCode('comp-class')">‚ñ∂ Run</button></div>
    </div>
    <div class="code-block" id="code-comp-class">// Composition with classes - "has-a" relationships

class Engine {
  #horsepower;
  #running = false;

  constructor(hp) { this.#horsepower = hp; }

  start() {
    this.#running = true;
    return `Engine started (${this.#horsepower}HP) üîß`;
  }
  stop() {
    this.#running = false;
    return 'Engine stopped';
  }
  get isRunning() { return this.#running; }
  get power() { return this.#horsepower; }
}

class GPS {
  navigate(destination) {
    return `Navigating to ${destination} üìç`;
  }
}

class Stereo {
  #volume = 50;
  play(song) { return `üéµ Playing "${song}" at volume ${this.#volume}`; }
  setVolume(v) { this.#volume = Math.max(0, Math.min(100, v)); }
}

class AirConditioning {
  #temp = 22;
  setTemp(t) {
    this.#temp = t;
    return `‚ùÑÔ∏è AC set to ${t}¬∞C`;
  }
}

// Car COMPOSES these components (has-a)
class Car {
  #engine;
  #gps;
  #stereo;
  #ac;

  constructor(engineHP) {
    this.#engine = new Engine(engineHP);
    this.#gps = new GPS();
    this.#stereo = new Stereo();
    this.#ac = new AirConditioning();
  }

  // Delegate to components
  start() { return this.#engine.start(); }
  stop() { return this.#engine.stop(); }
  navigateTo(dest) { return this.#gps.navigate(dest); }
  playMusic(song) { return this.#stereo.play(song); }
  setAC(temp) { return this.#ac.setTemp(temp); }

  get status() {
    return `Car: Engine ${this.#engine.isRunning ? 'ON' : 'OFF'} (${this.#engine.power}HP)`;
  }
}

const tesla = new Car(670);
console.log(tesla.start());
console.log(tesla.navigateTo('San Francisco'));
console.log(tesla.playMusic('Bohemian Rhapsody'));
console.log(tesla.setAC(20));
console.log(tesla.status);

console.log('\n‚úÖ Easy to swap Engine for ElectricEngine');
console.log('‚úÖ Components are testable in isolation');
console.log('‚úÖ Car doesn\'t know HOW engine works - just delegates');</div>
    <div class="code-output" id="output-comp-class"></div>
  </div>

  <h3>Comparison Table</h3>
  <div class="card">
    <table class="comparison-table">
      <thead>
        <tr>
          <th>Aspect</th>
          <th>Inheritance</th>
          <th>Composition</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Relationship</td>
          <td>"is-a" (Dog is an Animal)</td>
          <td>"has-a" (Car has an Engine)</td>
        </tr>
        <tr>
          <td>Coupling</td>
          <td><span class="pill pill-red">Tight</span></td>
          <td><span class="pill pill-green">Loose</span></td>
        </tr>
        <tr>
          <td>Flexibility</td>
          <td>Fixed at class definition</td>
          <td>Can change at runtime</td>
        </tr>
        <tr>
          <td>Code Reuse</td>
          <td>Inherits everything (even unwanted)</td>
          <td>Pick exactly what you need</td>
        </tr>
        <tr>
          <td>Testing</td>
          <td>Must test entire hierarchy</td>
          <td>Test components individually</td>
        </tr>
        <tr>
          <td>Multiple Behaviors</td>
          <td><span class="pill pill-red">No (single inheritance)</span></td>
          <td><span class="pill pill-green">Yes (compose freely)</span></td>
        </tr>
        <tr>
          <td>When to Use</td>
          <td>True "is-a" + shallow hierarchies</td>
          <td>Most other cases</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="tip-box">
    <div class="box-title">‚úÖ Interview Answer Template</div>
    <p><em>"I favor composition over inheritance because it provides looser coupling, better flexibility, and avoids the fragile base class problem. However, I use inheritance when there's a genuine 'is-a' relationship and the hierarchy is shallow ‚Äî usually no more than 2-3 levels deep."</em></p>
  </div>

  <div class="pitfall-box">
    <div class="box-title">‚ö†Ô∏è Common Pitfalls</div>
    <p><strong>1.</strong> Using inheritance just for code reuse (use composition instead)<br>
    <strong>2.</strong> Deep inheritance chains (3+ levels = code smell)<br>
    <strong>3.</strong> The "god class" anti-pattern (one class that does everything)<br>
    <strong>4.</strong> Inheriting from a class you don't control (may break with updates)</p>
  </div>

  <!-- Quiz -->
  <div class="quiz-container" id="quiz-comp-1">
    <div class="quiz-header">
      <span class="quiz-badge">Quiz</span>
      <span>Composition vs Inheritance</span>
    </div>
    <div class="quiz-question">A `Car` needs functionality from both `Vehicle` and `ElectricDevice`. What's the best approach in JavaScript?</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz('quiz-comp-1', this, false)">
        <span class="option-letter">A</span>
        <span>class Car extends Vehicle, ElectricDevice (multiple inheritance)</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-comp-1', this, true)">
        <span class="option-letter">B</span>
        <span>Compose: Car has-a Vehicle behavior and has-a ElectricDevice behavior</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-comp-1', this, false)">
        <span class="option-letter">C</span>
        <span>Make ElectricDevice extend Vehicle, then Car extends ElectricDevice</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-comp-1', this, false)">
        <span class="option-letter">D</span>
        <span>Copy-paste all methods from both classes into Car</span>
      </div>
    </div>
    <div class="quiz-explanation" id="quiz-comp-1-exp"></div>
  </div>

  <div class="section-nav-buttons">
    <button class="btn btn-secondary" onclick="goToSection('solid-deep')">‚Üê Back</button>
    <button class="btn btn-primary" onclick="completeSection('comp-vs-inherit'); goToSection('final-challenge')">Next: Final Challenge ‚Üí</button>
  </div>
</div>

<!-- ===== SECTION 8: FINAL CHALLENGE ===== -->
<div class="section" id="section-final-challenge">
  <h1 class="section-title">Final Challenge üèÜ</h1>
  <p class="section-subtitle">Put it all together ‚Äî build a system using everything you've learned</p>

  <div class="exercise-box">
    <div class="box-title">üèãÔ∏è Boss Challenge: Notification System</div>
    <p>Build a notification system that demonstrates:</p>
    <ul style="padding-left: 1.5rem; margin: 0.5rem 0;">
      <li>‚úÖ <strong>Encapsulation</strong>: Private fields for message history</li>
      <li>‚úÖ <strong>Polymorphism</strong>: Multiple notification channels (Email, SMS, Push)</li>
      <li>‚úÖ <strong>SRP</strong>: Each channel handles only its logic</li>
      <li>‚úÖ <strong>OCP</strong>: Easy to add new channels without modifying existing code</li>
      <li>‚úÖ <strong>DIP</strong>: NotificationService depends on abstractions</li>
      <li>‚úÖ <strong>Composition</strong>: NotificationService composes channels</li>
    </ul>
  </div>

  <div class="playground">
    <div class="playground-title">üéÆ Build Your Solution</div>
    <textarea id="playground-final" spellcheck="false" style="min-height: 300px;">// Your notification system here!
// 
// Requirements:
// 1. NotificationService class with #history (private)
// 2. Multiple channel classes: EmailChannel, SMSChannel, PushChannel
// 3. Each channel has a send(to, message) method
// 4. NotificationService.notify(channel, to, message)
// 5. NotificationService.notifyAll(to, message) - sends via all channels
// 6. NotificationService.history getter - returns copy of history

class EmailChannel {
  send(to, message) {
    console.log(`üìß Email to ${to}: ${message}`);
    return { channel: 'email', to, message, success: true };
  }
}

class SMSChannel {
  send(to, message) {
    console.log(`üì± SMS to ${to}: ${message}`);
    return { channel: 'sms', to, message, success: true };
  }
}

class PushChannel {
  send(to, message) {
    console.log(`üîî Push to ${to}: ${message}`);
    return { channel: 'push', to, message, success: true };
  }
}

class NotificationService {
  #channels = new Map();
  #history = [];
  
  registerChannel(name, channel) {
    this.#channels.set(name, channel);
    return this;
  }
  
  notify(channelName, to, message) {
    const channel = this.#channels.get(channelName);
    if (!channel) throw new Error(`Unknown channel: ${channelName}`);
    const result = channel.send(to, message);
    this.#history.push({ ...result, timestamp: Date.now() });
    return result;
  }
  
  notifyAll(to, message) {
    const results = [];
    for (const [name, channel] of this.#channels) {
      results.push(this.notify(name, to, message));
    }
    return results;
  }
  
  get history() { return [...this.#history]; }
}

// Test it!
const service = new NotificationService();
service
  .registerChannel('email', new EmailChannel())
  .registerChannel('sms', new SMSChannel())
  .registerChannel('push', new PushChannel());

console.log('--- Single notification ---');
service.notify('email', 'alice@test.com', 'Welcome!');

console.log('\n--- Notify all channels ---');
service.notifyAll('bob@test.com', 'Your order shipped!');

console.log('\n--- History ---');
console.log(`Total notifications sent: ${service.history.length}`);
service.history.forEach(h => console.log(`  ${h.channel} ‚Üí ${h.to}`));</textarea>
    <button class="btn btn-success" onclick="runPlayground('playground-final')" style="margin-top:0.5rem">‚ñ∂ Run Code</button>
    <div class="playground-output" id="output-playground-final"></div>
  </div>

  <!-- Final Quiz -->
  <div class="quiz-container" id="quiz-final-1">
    <div class="quiz-header">
      <span class="quiz-badge">Final Quiz</span>
      <span>All Concepts</span>
    </div>
    <div class="quiz-question">Which statement about JavaScript OOP is FALSE?</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz('quiz-final-1', this, false)">
        <span class="option-letter">A</span>
        <span>ES6 classes are syntactic sugar over prototypal inheritance</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-final-1', this, true)">
        <span class="option-letter">B</span>
        <span>JavaScript supports multiple class inheritance natively</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-final-1', this, false)">
        <span class="option-letter">C</span>
        <span>Private fields (#) are truly private and not accessible outside the class</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-final-1', this, false)">
        <span class="option-letter">D</span>
        <span>Composition is generally preferred over deep inheritance hierarchies</span>
      </div>
    </div>
    <div class="quiz-explanation" id="quiz-final-1-exp"></div>
  </div>

  <div class="quiz-container" id="quiz-final-2">
    <div class="quiz-header">
      <span class="quiz-badge">Final Quiz</span>
      <span>Design Patterns</span>
    </div>
    <div class="quiz-question">You need a function that works with ANY object that has a `.serialize()` method, regardless of its class. This best demonstrates:</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz('quiz-final-2', this, false)">
        <span class="option-letter">A</span>
        <span>Encapsulation</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-final-2', this, false)">
        <span class="option-letter">B</span>
        <span>Inheritance</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-final-2', this, true)">
        <span class="option-letter">C</span>
        <span>Polymorphism (duck typing)</span>
      </div>
      <div class="quiz-option" onclick="checkQuiz('quiz-final-2', this, false)">
        <span class="option-letter">D</span>
        <span>Abstraction</span>
      </div>
    </div>
    <div class="quiz-explanation" id="quiz-final-2-exp"></div>
  </div>

  <div class="divider"></div>

  <div class="chapter-complete" id="finalComplete" style="display:none;">
    <div class="trophy float-animation">üèÜ</div>
    <h2 style="color: var(--accent-yellow); margin-bottom: 0.5rem;">Congratulations!</h2>
    <p style="font-size: 1.1rem;">You've completed the OOP Mastery course!</p>
    <p style="color: var(--text-secondary);">You earned <strong id="finalXP">0</strong> XP</p>
    <div class="btn-group" style="justify-content:center; margin-top: 1.5rem;">
      <button class="btn btn-primary" onclick="goToSection('welcome')">üîÑ Review Again</button>
    </div>
  </div>

  <div class="section-nav-buttons">
    <button class="btn btn-secondary" onclick="goToSection('comp-vs-inherit')">‚Üê Back</button>
    <button class="btn btn-success" onclick="completeSection('final-challenge'); showFinalComplete()">‚úÖ Complete Course!</button>
  </div>
</div>

</main>

<!-- Confetti container -->
<div class="confetti-container" id="confettiContainer"></div>

<!-- Score popup -->
<div class="score-display" id="scoreDisplay">
  <div class="score-popup" id="scorePopup"></div>
</div>

<script>
// ==================== APP STATE ====================
const state = {
  currentSection: 'welcome',
  completedSections: new Set(),
  xp: 0,
  answeredQuizzes: new Set(),
  totalSections: 9
};

const sections = [
  'welcome', 'oop-basics', 'encapsulation', 'encap-patterns',
  'polymorphism', 'solid', 'solid-deep', 'comp-vs-inherit', 'final-challenge'
];

// ==================== NAVIGATION ====================
function goToSection(id) {
  state.currentSection = id;
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));

  const section = document.getElementById('section-' + id);
  const navItem = document.querySelector(`.nav-item[data-section="${id}"]`);

  if (section) section.classList.add('active');
  if (navItem) navItem.classList.add('active');

  window.scrollTo({ top: 0, behavior: 'smooth' });

  // Close sidebar on mobile
  if (window.innerWidth <= 900) {
    document.getElementById('sidebar').classList.remove('open');
    document.getElementById('overlay').classList.remove('active');
  }
}

function completeSection(id) {
  if (!state.completedSections.has(id)) {
    state.completedSections.add(id);
    const navItem = document.querySelector(`.nav-item[data-section="${id}"]`);
    if (navItem) navItem.classList.add('completed');
    addXP(20);
    updateProgress();
  }
}

function updateProgress() {
  const pct = Math.round((state.completedSections.size / state.totalSections) * 100);
  document.getElementById('progressFill').style.width = pct + '%';
  document.getElementById('progressText').textContent = pct + '% Complete';
}

function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('open');
  document.getElementById('overlay').classList.toggle('active');
}

// ==================== XP SYSTEM ====================
function addXP(amount) {
  state.xp += amount;
  const badge = document.getElementById('xpBadge');
  document.getElementById('xpCount').textContent = state.xp;
  badge.classList.add('xp-gain');
  setTimeout(() => badge.classList.remove('xp-gain'), 500);
  showScorePopup('+' + amount + ' XP');
}

function showScorePopup(text) {
  const display = document.getElementById('scoreDisplay');
  const popup = document.getElementById('scorePopup');
  popup.textContent = text;
  display.style.display = 'block';
  setTimeout(() => { display.style.display = 'none'; }, 2000);
}

// ==================== CODE RUNNER ====================
function runCode(id) {
  const codeEl = document.getElementById('code-' + id);
  const outputEl = document.getElementById('output-' + id);

  if (!codeEl || !outputEl) return;

  const code = codeEl.textContent || codeEl.innerText;
  outputEl.classList.add('visible');

  let output = '';
  const originalLog = console.log;

  console.log = (...args) => {
    output += args.map(a => {
      if (typeof a === 'object') return JSON.stringify(a, null, 2);
      return String(a);
    }).join(' ') + '\n';
  };

  try {
    const fn = new Function(code);
    fn();
  } catch (e) {
    output += '‚ùå Error: ' + e.message + '\n';
  }

  console.log = originalLog;
  outputEl.innerHTML = '<div class="output-label">Output:</div>' + escapeHtml(output);
}

function runPlayground(id) {
  const textarea = document.getElementById(id);
  const outputEl = document.getElementById('output-' + id);

  if (!textarea || !outputEl) return;

  const code = textarea.value;
  let output = '';
  const originalLog = console.log;

  console.log = (...args) => {
    output += args.map(a => {
      if (typeof a === 'object') return JSON.stringify(a, null, 2);
      return String(a);
    }).join(' ') + '\n';
  };

  try {
    const fn = new Function(code);
    fn();
    addXP(5);
  } catch (e) {
    output += '‚ùå Error: ' + e.message + '\n';
  }

  console.log = originalLog;
  outputEl.innerHTML = escapeHtml(output) || 'No output.';
}

function escapeHtml(str) {
  return str
    .replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;');
}

function copyCode(btn) {
  const container = btn.closest('.code-container');
  const codeBlock = container.querySelector('.code-block');
  const text = codeBlock.textContent || codeBlock.innerText;
  navigator.clipboard.writeText(text).then(() => {
    const original = btn.textContent;
    btn.textContent = '‚úÖ Copied!';
    setTimeout(() => { btn.textContent = original; }, 1500);
  });
}

// ==================== QUIZ SYSTEM ====================
const quizExplanations = {
  'quiz-oop-1': {
    correct: '‚úÖ Correct! `instanceof` walks the prototype chain to check if the constructor\'s prototype appears anywhere in the chain. That\'s why `dog instanceof Animal` is true even though Dog is the direct constructor.',
    wrong: '‚ùå `instanceof` checks whether Constructor.prototype exists in the object\'s prototype chain. It doesn\'t check equality or the `new` keyword directly.'
  },
  'quiz-encap-1': {
    correct: '‚úÖ Correct! Private class fields (#), closures, and WeakMap provide true runtime privacy. Underscore is just a convention, `enumerable: false` hides from iteration but not access, and Symbols can be found via `Object.getOwnPropertySymbols()`.',
    wrong: '‚ùå Underscores are conventions, non-enumerable properties are still accessible, and Symbols can be found. Only #fields, closures, and WeakMap provide true privacy.'
  },
  'quiz-poly-1': {
    correct: '‚úÖ Correct! Duck typing means we check for capabilities (methods/properties) rather than types. "If it has a .quack() method, treat it as a duck" ‚Äî regardless of its class.',
    wrong: '‚ùå Duck typing is about structural compatibility: checking what an object CAN DO rather than what it IS. If it has the right methods, it works.'
  },
  'quiz-poly-2': {
    correct: '‚úÖ Correct! `super.methodName()` calls the parent class version of the overridden method. This allows extending behavior while keeping the parent\'s logic.',
    wrong: '‚ùå `super.method()` calls the parent\'s version of that method. `super` can be used in any method, not just constructors.'
  },
  'quiz-solid-1': {
    correct: '‚úÖ Correct! SRP says a class should have only one reason to change. CRUD, notifications, and logging are three different responsibilities that should be in separate classes.',
    wrong: '‚ùå Having multiple responsibilities (CRUD + email + logging) violates the Single Responsibility Principle. Each should be its own class.'
  },
  'quiz-solid-2': {
    correct: '‚úÖ Correct! DIP says high-level modules should depend on abstractions. Constructor injection lets you pass in any implementation that matches the expected interface.',
    wrong: '‚ùå DIP is about depending on abstractions, not concrete implementations. Injecting dependencies through the constructor is the classic DIP pattern.'
  },
  'quiz-comp-1': {
    correct: '‚úÖ Correct! JavaScript doesn\'t support multiple inheritance. Composition lets you combine behaviors from multiple sources without the constraints of a single inheritance chain.',
    wrong: '‚ùå JS has single inheritance only. Composition (has-a) is the right approach when you need functionality from multiple sources.'
  },
  'quiz-final-1': {
    correct: '‚úÖ Correct! JavaScript does NOT support multiple class inheritance (you can\'t write `extends A, B`). You can simulate it with mixins or composition, but it\'s not native.',
    wrong: '‚ùå JavaScript does NOT support multiple class inheritance natively. The other statements are all true.'
  },
  'quiz-final-2': {
    correct: '‚úÖ Correct! This is duck typing polymorphism: "if it has .serialize(), I can use it." No need for shared base class or interface ‚Äî just the right method signature.',
    wrong: '‚ùå Working with any object that has a specific method, regardless of class, is polymorphism via duck typing.'
  }
};

function checkQuiz(quizId, optionEl, isCorrect) {
  if (state.answeredQuizzes.has(quizId)) return;
  state.answeredQuizzes.add(quizId);

  const quiz = document.getElementById(quizId);
  const expEl = document.getElementById(quizId + '-exp');
  const options = quiz.querySelectorAll('.quiz-option');

  options.forEach(opt => {
    opt.style.pointerEvents = 'none';
  });

  if (isCorrect) {
    optionEl.classList.add('correct');
    expEl.className = 'quiz-explanation show correct-exp';
    expEl.textContent = quizExplanations[quizId]?.correct || '‚úÖ Correct!';
    addXP(15);
    launchConfetti();
  } else {
    optionEl.classList.add('wrong');
    // Highlight the correct answer
    options.forEach(opt => {
      if (opt.onclick && opt.onclick.toString().includes('true')) {
        opt.classList.add('correct');
      }
    });
    expEl.className = 'quiz-explanation show wrong-exp';
    expEl.textContent = quizExplanations[quizId]?.wrong || '‚ùå Not quite right.';
    addXP(5); // Still get some XP for trying
  }
}

// ==================== SOLID TABS ====================
function showSolid(index) {
  document.querySelectorAll('.solid-letter-card').forEach((c, i) => {
    c.classList.toggle('active', i === index);
  });
  document.querySelectorAll('.solid-detail').forEach((d, i) => {
    d.classList.toggle('active', i === index);
  });
}

// ==================== TAB SYSTEM ====================
function switchTab(btn, tabId) {
  const container = btn.closest('.tabs-container');
  container.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  container.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById('tab-' + tabId).classList.add('active');
}

// ==================== ACCORDION ====================
function toggleAccordion(header) {
  const item = header.parentElement;
  item.classList.toggle('open');
}

// ==================== HINT TOGGLE ====================
function toggleHint(id) {
  document.getElementById(id).classList.toggle('show');
}

// ==================== CONFETTI ====================
function launchConfetti() {
  const container = document.getElementById('confettiContainer');
  const colors = ['#e94560', '#00e676', '#ffd600', '#b388ff', '#18ffff', '#ff4081'];

  for (let i = 0; i < 30; i++) {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.left = Math.random() * 100 + '%';
    confetti.style.top = '-10px';
    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
    confetti.style.animationDelay = Math.random() * 0.5 + 's';
    confetti.style.animationDuration = (1 + Math.random()) + 's';
    container.appendChild(confetti);
    setTimeout(() => confetti.remove(), 2500);
  }
}

// ==================== FINAL COMPLETE ====================
function showFinalComplete() {
  document.getElementById('finalComplete').style.display = 'block';
  document.getElementById('finalXP').textContent = state.xp;
  launchConfetti();
  setTimeout(launchConfetti, 500);
  setTimeout(launchConfetti, 1000);
}

// ==================== KEYBOARD SHORTCUTS ====================
document.addEventListener('keydown', (e) => {
  if (e.target.tagName === 'TEXTAREA') return;

  const idx = sections.indexOf(state.currentSection);
  if (e.key === 'ArrowRight' && idx < sections.length - 1) {
    goToSection(sections[idx + 1]);
  } else if (e.key === 'ArrowLeft' && idx > 0) {
    goToSection(sections[idx - 1]);
  }
});

// ==================== INIT ====================
updateProgress();
</script>
</body>
</html>