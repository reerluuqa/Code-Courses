<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ES6+ Classes Mastery ‚Äî Interactive JavaScript Learning</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  :root{
    --bg:#0f0e17;--surface:#1a1930;--surface2:#232046;--primary:#ff8906;
    --secondary:#e53170;--accent:#7f5af0;--text:#fffffe;--text-dim:#94a1b2;
    --success:#2cb67d;--danger:#e53170;--warning:#ff8906;--code-bg:#151326;
    --gradient:linear-gradient(135deg,#7f5af0,#e53170,#ff8906);
  }
  html{scroll-behavior:smooth}
  body{font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text);line-height:1.7;overflow-x:hidden}
  
  /* Scrollbar */
  ::-webkit-scrollbar{width:8px}
  ::-webkit-scrollbar-track{background:var(--bg)}
  ::-webkit-scrollbar-thumb{background:var(--accent);border-radius:4px}
  
  /* Navigation */
  .nav{position:fixed;top:0;left:0;right:0;z-index:100;background:rgba(15,14,23,.95);backdrop-filter:blur(20px);border-bottom:1px solid rgba(127,90,240,.2);padding:0 2rem}
  .nav-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;height:60px}
  .nav-logo{font-weight:800;font-size:1.2rem;background:var(--gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  .nav-links{display:flex;gap:.5rem;flex-wrap:wrap}
  .nav-links a{color:var(--text-dim);text-decoration:none;font-size:.78rem;padding:.35rem .7rem;border-radius:6px;transition:.3s}
  .nav-links a:hover,.nav-links a.active{color:var(--text);background:var(--surface2)}
  .progress-bar{position:fixed;top:60px;left:0;height:3px;background:var(--gradient);z-index:101;transition:width .3s}
  
  /* Hero */
  .hero{min-height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:6rem 2rem 4rem;position:relative;overflow:hidden}
  .hero::before{content:'';position:absolute;width:600px;height:600px;background:radial-gradient(circle,rgba(127,90,240,.15),transparent 70%);top:-100px;right:-100px;pointer-events:none}
  .hero::after{content:'';position:absolute;width:400px;height:400px;background:radial-gradient(circle,rgba(229,49,112,.1),transparent 70%);bottom:-50px;left:-50px;pointer-events:none}
  .hero h1{font-size:clamp(2.5rem,6vw,4.5rem);font-weight:900;line-height:1.1;margin-bottom:1.5rem}
  .hero h1 span{background:var(--gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  .hero p{font-size:1.2rem;color:var(--text-dim);max-width:600px;margin:0 auto 2rem}
  .hero-badges{display:flex;gap:.8rem;justify-content:center;flex-wrap:wrap;margin-bottom:2.5rem}
  .badge{padding:.4rem 1rem;border-radius:20px;font-size:.8rem;font-weight:600;border:1px solid}
  .badge.purple{border-color:var(--accent);color:var(--accent);background:rgba(127,90,240,.1)}
  .badge.pink{border-color:var(--secondary);color:var(--secondary);background:rgba(229,49,112,.1)}
  .badge.orange{border-color:var(--primary);color:var(--primary);background:rgba(255,137,6,.1)}
  .btn-start{display:inline-flex;align-items:center;gap:.5rem;padding:1rem 2.5rem;background:var(--gradient);color:#fff;border:none;border-radius:12px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:transform .3s,box-shadow .3s;text-decoration:none}
  .btn-start:hover{transform:translateY(-3px);box-shadow:0 10px 40px rgba(127,90,240,.3)}
  
  /* Floating Classes Animation */
  .floating-code{position:absolute;font-family:'Courier New',monospace;font-size:.85rem;color:rgba(127,90,240,.2);pointer-events:none;animation:float 6s ease-in-out infinite}
  @keyframes float{0%,100%{transform:translateY(0) rotate(0deg)}50%{transform:translateY(-20px) rotate(3deg)}}
  
  /* Sections */
  .section{padding:5rem 2rem;max-width:1000px;margin:0 auto}
  .section-header{text-align:center;margin-bottom:3rem}
  .section-num{display:inline-block;padding:.3rem 1rem;border-radius:20px;font-size:.8rem;font-weight:700;background:rgba(127,90,240,.15);color:var(--accent);margin-bottom:1rem}
  .section-title{font-size:clamp(1.8rem,4vw,2.5rem);font-weight:800;margin-bottom:1rem}
  .section-title span{background:var(--gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  .section-desc{color:var(--text-dim);font-size:1.05rem;max-width:650px;margin:0 auto}
  
  /* Cards */
  .card{background:var(--surface);border:1px solid rgba(127,90,240,.1);border-radius:16px;padding:2rem;margin-bottom:2rem;transition:border-color .3s}
  .card:hover{border-color:rgba(127,90,240,.3)}
  .card h3{font-size:1.3rem;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}
  .card p{color:var(--text-dim);margin-bottom:1rem}
  
  /* Code Blocks */
  .code-container{position:relative;margin:1.5rem 0;border-radius:12px;overflow:hidden;border:1px solid rgba(127,90,240,.15)}
  .code-header{display:flex;align-items:center;justify-content:space-between;padding:.6rem 1rem;background:rgba(127,90,240,.08);border-bottom:1px solid rgba(127,90,240,.1)}
  .code-header .dots{display:flex;gap:6px}
  .code-header .dot{width:10px;height:10px;border-radius:50%}
  .code-header .dot.r{background:#ff5f56}.code-header .dot.y{background:#ffbd2e}.code-header .dot.g{background:#27c93f}
  .code-header .label{font-size:.75rem;color:var(--text-dim);font-weight:600;text-transform:uppercase;letter-spacing:1px}
  .code-block{background:var(--code-bg);padding:1.5rem;overflow-x:auto;font-family:'Courier New',Consolas,monospace;font-size:.9rem;line-height:1.8;tab-size:2}
  .code-block .kw{color:#c792ea}.code-block .fn{color:#82aaff}.code-block .str{color:#c3e88d}
  .code-block .num{color:#f78c6c}.code-block .cm{color:#546e7a;font-style:italic}
  .code-block .op{color:#89ddff}.code-block .cl{color:#ffcb6b}.code-block .pr{color:#f07178}
  .code-block .this{color:#ff5370;font-style:italic}
  .btn-run{padding:.4rem 1rem;background:var(--success);color:#fff;border:none;border-radius:6px;font-size:.78rem;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:.3rem;transition:.3s}
  .btn-run:hover{background:#25a06b;transform:scale(1.05)}
  .btn-copy{padding:.4rem .8rem;background:transparent;color:var(--text-dim);border:1px solid rgba(255,255,255,.1);border-radius:6px;font-size:.75rem;cursor:pointer;transition:.3s}
  .btn-copy:hover{border-color:var(--accent);color:var(--accent)}
  .output{background:#0a0918;border:1px solid rgba(44,182,125,.2);border-radius:0 0 12px 12px;padding:1rem 1.5rem;font-family:monospace;font-size:.85rem;color:var(--success);white-space:pre-wrap;display:none;max-height:200px;overflow-y:auto}
  .output.show{display:block}
  .output.error{color:var(--danger);border-color:rgba(229,49,112,.2)}
  .code-actions{display:flex;gap:.5rem}
  
  /* Visual Diagrams */
  .diagram{background:var(--surface2);border-radius:16px;padding:2rem;margin:2rem 0;overflow-x:auto}
  .class-box{display:inline-flex;flex-direction:column;border:2px solid var(--accent);border-radius:12px;overflow:hidden;min-width:220px;margin:.5rem;vertical-align:top;transition:transform .3s}
  .class-box:hover{transform:translateY(-5px)}
  .class-box .name{background:var(--accent);color:#fff;padding:.6rem 1.2rem;font-weight:800;font-size:1rem;text-align:center}
  .class-box .name.parent{background:var(--secondary)}
  .class-box .name.child{background:var(--success)}
  .class-box .name.static-c{background:var(--primary)}
  .class-box .props{padding:.8rem 1.2rem;border-bottom:1px solid rgba(127,90,240,.2);font-size:.85rem}
  .class-box .methods{padding:.8rem 1.2rem;font-size:.85rem}
  .class-box .props div,.class-box .methods div{padding:.2rem 0;font-family:monospace}
  .class-box .section-label{font-size:.7rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:1px;margin-bottom:.3rem;font-weight:700}
  .arrow-down{text-align:center;font-size:2rem;color:var(--accent);margin:.5rem 0}
  .inherit-chain{display:flex;flex-direction:column;align-items:center}
  
  /* Comparison */
  .comparison{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin:2rem 0}
  .comparison .side{border-radius:12px;overflow:hidden;border:2px solid}
  .comparison .side.good{border-color:var(--success)}
  .comparison .side.bad{border-color:var(--danger)}
  .comparison .side-header{padding:.6rem 1rem;font-weight:700;font-size:.85rem;display:flex;align-items:center;gap:.5rem}
  .comparison .side.good .side-header{background:rgba(44,182,125,.1);color:var(--success)}
  .comparison .side.bad .side-header{background:rgba(229,49,112,.1);color:var(--danger)}
  
  /* Pitfall Cards */
  .pitfall{background:linear-gradient(135deg,rgba(229,49,112,.05),rgba(255,137,6,.05));border:1px solid rgba(229,49,112,.2);border-radius:16px;padding:2rem;margin:2rem 0;position:relative;overflow:hidden}
  .pitfall::before{content:'‚ö†Ô∏è';position:absolute;top:-10px;right:-5px;font-size:4rem;opacity:.1}
  .pitfall h4{color:var(--danger);font-size:1.1rem;margin-bottom:.8rem;display:flex;align-items:center;gap:.5rem}
  .pitfall p{color:var(--text-dim)}
  
  /* Tips */
  .tip{background:linear-gradient(135deg,rgba(44,182,125,.05),rgba(127,90,240,.05));border:1px solid rgba(44,182,125,.2);border-radius:16px;padding:2rem;margin:2rem 0;position:relative;overflow:hidden}
  .tip::before{content:'üí°';position:absolute;top:-10px;right:-5px;font-size:4rem;opacity:.1}
  .tip h4{color:var(--success);font-size:1.1rem;margin-bottom:.8rem}
  
  /* Quiz */
  .quiz-container{margin:2rem 0}
  .quiz-q{background:var(--surface);border:1px solid rgba(127,90,240,.15);border-radius:16px;padding:2rem;margin-bottom:1.5rem;transition:border-color .3s}
  .quiz-q .q-num{display:inline-block;background:var(--accent);color:#fff;width:30px;height:30px;border-radius:50%;text-align:center;line-height:30px;font-size:.85rem;font-weight:700;margin-right:.5rem}
  .quiz-q .q-text{font-size:1.05rem;font-weight:600;margin-bottom:1.2rem;display:flex;align-items:flex-start;gap:.5rem}
  .quiz-opts label{display:block;padding:.7rem 1rem;margin:.4rem 0;border-radius:8px;cursor:pointer;transition:.3s;border:1px solid rgba(255,255,255,.05);font-size:.95rem}
  .quiz-opts label:hover{background:rgba(127,90,240,.1);border-color:rgba(127,90,240,.2)}
  .quiz-opts input{margin-right:.6rem;accent-color:var(--accent)}
  .quiz-opts label.correct{background:rgba(44,182,125,.15)!important;border-color:var(--success)!important;color:var(--success)}
  .quiz-opts label.wrong{background:rgba(229,49,112,.15)!important;border-color:var(--danger)!important;color:var(--danger)}
  .quiz-explain{margin-top:1rem;padding:1rem;background:rgba(127,90,240,.05);border-radius:8px;font-size:.9rem;color:var(--text-dim);display:none;border-left:3px solid var(--accent)}
  .quiz-explain.show{display:block}
  .btn-check{padding:.6rem 1.5rem;background:var(--accent);color:#fff;border:none;border-radius:8px;font-weight:700;cursor:pointer;transition:.3s;margin-top:.5rem}
  .btn-check:hover{background:#6b46d9}
  .quiz-score{text-align:center;padding:2rem;background:var(--surface);border-radius:16px;border:2px solid var(--accent)}
  .quiz-score .score-num{font-size:3rem;font-weight:900;background:var(--gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  
  /* Exercise */
  .exercise{background:var(--surface);border:2px solid rgba(127,90,240,.2);border-radius:16px;padding:2rem;margin:2rem 0}
  .exercise h4{color:var(--primary);font-size:1.1rem;margin-bottom:.5rem;display:flex;align-items:center;gap:.5rem}
  .exercise .instructions{color:var(--text-dim);margin-bottom:1rem;font-size:.95rem}
  .exercise .instructions li{margin:.3rem 0;padding-left:.5rem}
  .code-editor{width:100%;min-height:180px;background:var(--code-bg);color:var(--text);border:1px solid rgba(127,90,240,.2);border-radius:8px;padding:1rem;font-family:'Courier New',monospace;font-size:.9rem;line-height:1.6;resize:vertical;tab-size:2;outline:none}
  .code-editor:focus{border-color:var(--accent)}
  .exercise-btns{display:flex;gap:.8rem;margin-top:1rem;flex-wrap:wrap}
  .btn-test{padding:.6rem 1.5rem;background:var(--success);color:#fff;border:none;border-radius:8px;font-weight:700;cursor:pointer;transition:.3s}
  .btn-test:hover{background:#25a06b}
  .btn-hint{padding:.6rem 1.5rem;background:transparent;color:var(--primary);border:1px solid var(--primary);border-radius:8px;font-weight:700;cursor:pointer;transition:.3s}
  .btn-hint:hover{background:rgba(255,137,6,.1)}
  .btn-solution{padding:.6rem 1.5rem;background:transparent;color:var(--accent);border:1px solid var(--accent);border-radius:8px;font-weight:700;cursor:pointer;transition:.3s}
  .btn-solution:hover{background:rgba(127,90,240,.1)}
  .exercise-output{margin-top:1rem;padding:1rem;background:var(--code-bg);border-radius:8px;font-family:monospace;font-size:.85rem;display:none}
  .exercise-output.show{display:block}
  .test-result{padding:.5rem 1rem;border-radius:6px;margin-top:.5rem;font-size:.9rem;font-weight:600}
  .test-result.pass{background:rgba(44,182,125,.1);color:var(--success)}
  .test-result.fail{background:rgba(229,49,112,.1);color:var(--danger)}
  .hint-box{margin-top:1rem;padding:1rem;background:rgba(255,137,6,.05);border:1px solid rgba(255,137,6,.2);border-radius:8px;font-size:.9rem;color:var(--primary);display:none}
  .hint-box.show{display:block}
  
  /* Tabs */
  .tabs{display:flex;gap:2px;margin-bottom:0;background:var(--surface);border-radius:12px 12px 0 0;overflow:hidden;border:1px solid rgba(127,90,240,.1);border-bottom:none}
  .tab-btn{flex:1;padding:.8rem 1rem;background:transparent;color:var(--text-dim);border:none;cursor:pointer;font-weight:600;font-size:.85rem;transition:.3s}
  .tab-btn.active{background:var(--surface2);color:var(--text);border-bottom:2px solid var(--accent)}
  .tab-content{display:none;background:var(--surface2);border:1px solid rgba(127,90,240,.1);border-top:none;border-radius:0 0 12px 12px;padding:1.5rem}
  .tab-content.active{display:block}
  
  /* Animated Class Visual */
  .class-visual{position:relative;background:var(--surface2);border-radius:16px;padding:3rem 2rem;margin:2rem 0;min-height:300px;display:flex;align-items:center;justify-content:center;gap:2rem;flex-wrap:wrap}
  .instance-bubble{background:var(--surface);border:2px solid var(--accent);border-radius:16px;padding:1.5rem;text-align:center;animation:popIn .5s ease;min-width:150px}
  .instance-bubble .inst-name{font-weight:800;color:var(--accent);margin-bottom:.5rem}
  .instance-bubble .inst-props{font-size:.8rem;color:var(--text-dim);font-family:monospace}
  @keyframes popIn{from{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}
  
  .btn-create-instance{padding:.8rem 1.5rem;background:var(--accent);color:#fff;border:none;border-radius:10px;font-weight:700;cursor:pointer;transition:.3s;font-size:.95rem}
  .btn-create-instance:hover{background:#6b46d9;transform:scale(1.05)}
  
  /* Table of Contents */
  .toc{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin:2rem 0}
  .toc-item{background:var(--surface);border:1px solid rgba(127,90,240,.1);border-radius:12px;padding:1.5rem;text-decoration:none;color:var(--text);transition:.3s;cursor:pointer}
  .toc-item:hover{border-color:var(--accent);transform:translateY(-3px);box-shadow:0 8px 30px rgba(127,90,240,.1)}
  .toc-item .toc-num{font-size:2rem;font-weight:900;background:var(--gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:.5rem}
  .toc-item .toc-title{font-weight:700;margin-bottom:.3rem}
  .toc-item .toc-desc{font-size:.8rem;color:var(--text-dim)}
  
  /* Analogy Box */
  .analogy{background:linear-gradient(135deg,rgba(127,90,240,.08),rgba(229,49,112,.05));border:1px solid rgba(127,90,240,.2);border-radius:16px;padding:2rem;margin:2rem 0;display:flex;align-items:flex-start;gap:1.5rem}
  .analogy-icon{font-size:2.5rem;flex-shrink:0}
  .analogy h4{color:var(--accent);margin-bottom:.5rem}
  .analogy p{color:var(--text-dim);font-size:.95rem}
  
  /* Responsive */
  @media(max-width:768px){
    .comparison{grid-template-columns:1fr}
    .nav-links{display:none}
    .section{padding:3rem 1rem}
    .analogy{flex-direction:column;text-align:center}
    .class-visual{flex-direction:column}
  }
  
  /* Separator */
  .separator{height:2px;background:var(--gradient);opacity:.2;margin:0 auto;max-width:200px;border-radius:2px}
  
  /* Interactive playground */
  .playground{background:var(--surface);border:2px solid rgba(127,90,240,.15);border-radius:16px;padding:2rem;margin:2rem 0}
  .playground h4{margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}
  .playground-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
  @media(max-width:768px){.playground-grid{grid-template-columns:1fr}}
  
  /* Checklist */
  .checklist{list-style:none;margin:1rem 0}
  .checklist li{padding:.5rem 0;display:flex;align-items:center;gap:.5rem;color:var(--text-dim)}
  .checklist li::before{content:'‚òê';font-size:1.2rem}
  .checklist li.checked::before{content:'‚òë';color:var(--success)}
  
  /* Keywords highlight */
  .kw-box{display:inline-block;padding:.2rem .6rem;background:rgba(127,90,240,.1);border:1px solid rgba(127,90,240,.2);border-radius:4px;font-family:monospace;font-size:.85rem;color:var(--accent)}
  
  /* Smooth reveals */
  .reveal{opacity:0;transform:translateY(30px);transition:opacity .6s,transform .6s}
  .reveal.visible{opacity:1;transform:translateY(0)}
</style>
</head>
<body>

<!-- Navigation -->
<nav class="nav">
  <div class="nav-inner">
    <div class="nav-logo">üéì JS Classes Mastery</div>
    <div class="nav-links">
      <a href="#basics">Basics</a>
      <a href="#constructors">Constructor</a>
      <a href="#methods">Methods</a>
      <a href="#inheritance">Inheritance</a>
      <a href="#static">Static</a>
      <a href="#pitfalls">Pitfalls</a>
      <a href="#quiz">Quiz</a>
      <a href="#exercises">Exercises</a>
    </div>
  </div>
</nav>
<div class="progress-bar" id="progressBar"></div>

<!-- Hero -->
<header class="hero" id="top">
  <div class="floating-code" style="top:15%;left:8%;animation-delay:0s">class Animal { }</div>
  <div class="floating-code" style="top:25%;right:5%;animation-delay:1s">extends</div>
  <div class="floating-code" style="bottom:20%;left:12%;animation-delay:2s">constructor()</div>
  <div class="floating-code" style="bottom:30%;right:10%;animation-delay:3s">super()</div>
  <div class="floating-code" style="top:50%;left:3%;animation-delay:1.5s">static</div>
  <div>
    <h1>Master ES6+ <span>Classes</span></h1>
    <p>An interactive, visual deep-dive into JavaScript classes ‚Äî from basics to advanced patterns. Learn by doing, not just reading.</p>
    <div class="hero-badges">
      <span class="badge purple">Class Syntax</span>
      <span class="badge pink">Inheritance</span>
      <span class="badge orange">Static Methods</span>
    </div>
    <a href="#basics" class="btn-start">üöÄ Start Learning</a>
  </div>
</header>

<!-- Table of Contents -->
<div class="section" style="padding-top:2rem">
  <div class="toc">
    <a class="toc-item" href="#basics"><div class="toc-num">01</div><div class="toc-title">Class Basics</div><div class="toc-desc">Declaration, expressions & what classes really are</div></a>
    <a class="toc-item" href="#constructors"><div class="toc-num">02</div><div class="toc-title">Constructors</div><div class="toc-desc">Initializing instances with the constructor method</div></a>
    <a class="toc-item" href="#methods"><div class="toc-num">03</div><div class="toc-title">Methods</div><div class="toc-desc">Instance methods, getters, setters & computed names</div></a>
    <a class="toc-item" href="#inheritance"><div class="toc-num">04</div><div class="toc-title">Inheritance</div><div class="toc-desc">extends, super, method overriding & prototype chain</div></a>
    <a class="toc-item" href="#static"><div class="toc-num">05</div><div class="toc-title">Static Members</div><div class="toc-desc">Static methods, properties & factory patterns</div></a>
    <a class="toc-item" href="#pitfalls"><div class="toc-num">06</div><div class="toc-title">Pitfalls</div><div class="toc-desc">Common mistakes & how to avoid them</div></a>
    <a class="toc-item" href="#quiz"><div class="toc-num">07</div><div class="toc-title">Quiz</div><div class="toc-desc">Test your knowledge with 10 questions</div></a>
    <a class="toc-item" href="#exercises"><div class="toc-num">08</div><div class="toc-title">Exercises</div><div class="toc-desc">Hands-on coding challenges</div></a>
  </div>
</div>

<div class="separator"></div>

<!-- ======================== SECTION 1: BASICS ======================== -->
<section class="section reveal" id="basics">
  <div class="section-header">
    <div class="section-num">Chapter 01</div>
    <h2 class="section-title">Class <span>Basics</span></h2>
    <p class="section-desc">Classes are syntactic sugar over JavaScript's prototype-based inheritance. They provide a cleaner, more familiar way to create objects and handle inheritance.</p>
  </div>

  <div class="analogy">
    <div class="analogy-icon">üè≠</div>
    <div>
      <h4>Think of a Class as a Blueprint</h4>
      <p>A <strong>class</strong> is like a blueprint for a house. The blueprint itself isn't a house ‚Äî it describes <em>how</em> to build one. Each house built from that blueprint is an <strong>instance</strong>. Every house shares the same structure but can have different paint colors, furniture, etc. (different property values).</p>
    </div>
  </div>

  <!-- Class Declaration -->
  <div class="card">
    <h3>üìù Class Declaration</h3>
    <p>The most common way to define a class. Similar to function declarations but <strong>NOT hoisted</strong> in the same way.</p>
    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Class Declaration</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="cm">// Class Declaration</span>
<span class="kw">class</span> <span class="cl">Car</span> {
  <span class="fn">constructor</span>(<span class="pr">brand</span>, <span class="pr">model</span>, <span class="pr">year</span>) {
    <span class="this">this</span>.<span class="pr">brand</span> = brand;
    <span class="this">this</span>.<span class="pr">model</span> = model;
    <span class="this">this</span>.<span class="pr">year</span> = year;
  }

  <span class="fn">describe</span>() {
    <span class="kw">return</span> <span class="str">`${<span class="this">this</span>.year} ${<span class="this">this</span>.brand} ${<span class="this">this</span>.model}`</span>;
  }
}

<span class="kw">const</span> myCar = <span class="kw">new</span> <span class="cl">Car</span>(<span class="str">'Tesla'</span>, <span class="str">'Model 3'</span>, <span class="num">2024</span>);
console.log(myCar.describe());
console.log(<span class="kw">typeof</span> <span class="cl">Car</span>); <span class="cm">// "function" ‚Äî classes ARE functions!</span>
console.log(myCar <span class="kw">instanceof</span> <span class="cl">Car</span>); <span class="cm">// true</span></div>
      <div class="output"></div>
    </div>
  </div>

  <!-- Class Expression -->
  <div class="card">
    <h3>üí° Class Expression</h3>
    <p>Classes can also be defined as expressions ‚Äî named or unnamed. Useful for assigning to variables or passing as arguments.</p>
    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Class Expression</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="cm">// Unnamed class expression</span>
<span class="kw">const</span> <span class="cl">Animal</span> = <span class="kw">class</span> {
  <span class="fn">constructor</span>(<span class="pr">name</span>) {
    <span class="this">this</span>.<span class="pr">name</span> = name;
  }
  <span class="fn">speak</span>() {
    <span class="kw">return</span> <span class="str">`${<span class="this">this</span>.name} makes a sound.`</span>;
  }
};

<span class="cm">// Named class expression</span>
<span class="kw">const</span> <span class="cl">Pet</span> = <span class="kw">class</span> <span class="cl">FurryFriend</span> {
  <span class="fn">constructor</span>(<span class="pr">name</span>) {
    <span class="this">this</span>.<span class="pr">name</span> = name;
  }
  <span class="fn">whoAmI</span>() {
    <span class="cm">// FurryFriend is only accessible inside the class body!</span>
    <span class="kw">return</span> <span class="str">`I'm ${<span class="this">this</span>.name}, class: ${<span class="cl">FurryFriend</span>.name}`</span>;
  }
};

<span class="kw">const</span> dog = <span class="kw">new</span> <span class="cl">Animal</span>(<span class="str">'Rex'</span>);
<span class="kw">const</span> cat = <span class="kw">new</span> <span class="cl">Pet</span>(<span class="str">'Whiskers'</span>);

console.log(dog.speak());
console.log(cat.whoAmI());
console.log(<span class="cl">Pet</span>.name); <span class="cm">// "FurryFriend"</span>
<span class="cm">// console.log(FurryFriend); // ReferenceError!</span></div>
      <div class="output"></div>
    </div>
  </div>

  <!-- Key Difference -->
  <div class="tip">
    <h4>üí° Classes vs Functions ‚Äî Key Differences</h4>
    <p>Although <span class="kw-box">typeof MyClass === 'function'</span>, classes have important differences:</p>
    <ul style="color:var(--text-dim);padding-left:1.5rem;margin-top:.5rem">
      <li>Classes are <strong>NOT hoisted</strong> like function declarations (Temporal Dead Zone)</li>
      <li>Class body always runs in <strong>strict mode</strong></li>
      <li>Classes <strong>must</strong> be called with <span class="kw-box">new</span> ‚Äî can't just invoke them</li>
      <li>Class methods are <strong>non-enumerable</strong> by default</li>
    </ul>
  </div>

  <!-- NOT Hoisted Example -->
  <div class="card">
    <h3>üö´ Classes Are NOT Hoisted</h3>
    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Hoisting Difference</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="cm">// ‚úÖ Function declarations ARE hoisted</span>
<span class="kw">try</span> {
  <span class="kw">const</span> obj = <span class="kw">new</span> <span class="fn">MyFunction</span>();
  console.log(<span class="str">"Function works before declaration!"</span>);
} <span class="kw">catch</span>(e) {
  console.log(<span class="str">"Function error:"</span>, e.message);
}

<span class="kw">function</span> <span class="fn">MyFunction</span>() {
  <span class="this">this</span>.<span class="pr">x</span> = <span class="num">1</span>;
}

<span class="cm">// ‚ùå Class declarations are NOT hoisted (TDZ)</span>
<span class="kw">try</span> {
  <span class="kw">const</span> obj2 = <span class="kw">new</span> <span class="cl">MyClass</span>();
} <span class="kw">catch</span>(e) {
  console.log(<span class="str">"Class error:"</span>, e.message);
}

<span class="kw">class</span> <span class="cl">MyClass</span> {
  <span class="fn">constructor</span>() {
    <span class="this">this</span>.<span class="pr">x</span> = <span class="num">1</span>;
  }
}</div>
      <div class="output"></div>
    </div>
  </div>

  <!-- Interactive: Create Instances -->
  <div class="playground">
    <h4>üéÆ Interactive: Watch Instances Being Created</h4>
    <p style="color:var(--text-dim);margin-bottom:1rem;font-size:.9rem">Click the button to create new Car instances from our blueprint. Watch how each instance gets its own property values!</p>
    <div style="text-align:center;margin-bottom:1rem">
      <button class="btn-create-instance" id="createInstanceBtn">üöó Create New Car Instance</button>
      <button class="btn-create-instance" style="background:var(--secondary)" id="clearInstanceBtn">üóëÔ∏è Clear All</button>
    </div>
    <div class="class-visual" id="instanceContainer">
      <div style="color:var(--text-dim);font-style:italic">Click the button to create instances...</div>
    </div>
  </div>
</section>

<div class="separator"></div>

<!-- ======================== SECTION 2: CONSTRUCTORS ======================== -->
<section class="section reveal" id="constructors">
  <div class="section-header">
    <div class="section-num">Chapter 02</div>
    <h2 class="section-title">The <span>Constructor</span></h2>
    <p class="section-desc">The constructor is a special method that initializes new instances. It runs automatically when you use <code>new</code>.</p>
  </div>

  <div class="analogy">
    <div class="analogy-icon">üèóÔ∏è</div>
    <div>
      <h4>Constructor = The Builder</h4>
      <p>If the class is the blueprint, the constructor is the <strong>builder</strong> who follows the blueprint. You hand the builder the materials (arguments), and they assemble the house (instance) with those specific materials.</p>
    </div>
  </div>

  <div class="card">
    <h3>üîß Constructor In Action</h3>
    <p>The constructor initializes properties on <span class="kw-box">this</span> (the new instance being created).</p>
    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Constructor</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="kw">class</span> <span class="cl">User</span> {
  <span class="fn">constructor</span>(<span class="pr">name</span>, <span class="pr">email</span>, <span class="pr">role</span> = <span class="str">'user'</span>) {
    <span class="cm">// 'this' refers to the NEW instance being created</span>
    <span class="this">this</span>.<span class="pr">name</span> = name;
    <span class="this">this</span>.<span class="pr">email</span> = email;
    <span class="this">this</span>.<span class="pr">role</span> = role;        <span class="cm">// default parameter</span>
    <span class="this">this</span>.<span class="pr">createdAt</span> = <span class="kw">new</span> Date();
    <span class="this">this</span>.<span class="pr">id</span> = Math.random().toString(<span class="num">36</span>).substr(<span class="num">2</span>, <span class="num">9</span>);

    console.log(<span class="str">`‚úÖ User "${name}" created with ID: ${<span class="this">this</span>.id}`</span>);
  }
}

<span class="cm">// Each 'new' call triggers the constructor</span>
<span class="kw">const</span> user1 = <span class="kw">new</span> <span class="cl">User</span>(<span class="str">'Alice'</span>, <span class="str">'alice@mail.com'</span>);
<span class="kw">const</span> user2 = <span class="kw">new</span> <span class="cl">User</span>(<span class="str">'Bob'</span>, <span class="str">'bob@mail.com'</span>, <span class="str">'admin'</span>);

console.log(user1.role);  <span class="cm">// "user" (default)</span>
console.log(user2.role);  <span class="cm">// "admin"</span>
console.log(user1 === user2);  <span class="cm">// false ‚Äî different instances!</span></div>
      <div class="output"></div>
    </div>
  </div>

  <!-- Constructor with Validation -->
  <div class="card">
    <h3>üõ°Ô∏è Constructor with Validation</h3>
    <p>Use the constructor to validate input and throw errors for invalid data.</p>
    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Validation Pattern</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="kw">class</span> <span class="cl">BankAccount</span> {
  <span class="fn">constructor</span>(<span class="pr">owner</span>, <span class="pr">balance</span>) {
    <span class="cm">// Validate inputs in constructor!</span>
    <span class="kw">if</span> (!owner || <span class="kw">typeof</span> owner !== <span class="str">'string'</span>) {
      <span class="kw">throw new</span> Error(<span class="str">'Owner name is required'</span>);
    }
    <span class="kw">if</span> (balance < <span class="num">0</span>) {
      <span class="kw">throw new</span> Error(<span class="str">'Initial balance cannot be negative'</span>);
    }

    <span class="this">this</span>.<span class="pr">owner</span> = owner;
    <span class="this">this</span>.<span class="pr">_balance</span> = balance || <span class="num">0</span>; <span class="cm">// _ convention for "private"</span>
    <span class="this">this</span>.<span class="pr">_transactions</span> = [];

    console.log(<span class="str">`Account created for ${owner}, balance: $${<span class="this">this</span>._balance}`</span>);
  }

  <span class="fn">deposit</span>(<span class="pr">amount</span>) {
    <span class="this">this</span>._balance += amount;
    <span class="this">this</span>._transactions.push({ type: <span class="str">'deposit'</span>, amount });
    <span class="kw">return</span> <span class="this">this</span>; <span class="cm">// enable chaining!</span>
  }

  <span class="fn">getBalance</span>() {
    <span class="kw">return</span> <span class="str">`$${<span class="this">this</span>._balance.toFixed(2)}`</span>;
  }
}

<span class="kw">const</span> account = <span class="kw">new</span> <span class="cl">BankAccount</span>(<span class="str">'Alice'</span>, <span class="num">1000</span>);
account.deposit(<span class="num">500</span>).deposit(<span class="num">250</span>); <span class="cm">// chaining!</span>
console.log(account.getBalance());

<span class="cm">// Try invalid input</span>
<span class="kw">try</span> {
  <span class="kw">const</span> bad = <span class="kw">new</span> <span class="cl">BankAccount</span>(<span class="str">''</span>, -<span class="num">100</span>);
} <span class="kw">catch</span>(e) {
  console.log(<span class="str">'‚ùå Error:'</span>, e.message);
}</div>
      <div class="output"></div>
    </div>
  </div>

  <div class="pitfall">
    <h4>‚ö†Ô∏è Pitfall: A class can only have ONE constructor</h4>
    <p>Unlike some other languages, JavaScript classes can have only a single <span class="kw-box">constructor</span> method. Having two will throw a <span class="kw-box">SyntaxError</span>. Use default parameters or static factory methods for different initialization patterns.</p>
  </div>
</section>

<div class="separator"></div>

<!-- ======================== SECTION 3: METHODS ======================== -->
<section class="section reveal" id="methods">
  <div class="section-header">
    <div class="section-num">Chapter 03</div>
    <h2 class="section-title">Instance <span>Methods</span></h2>
    <p class="section-desc">Methods define the behavior of instances. They're added to the class's prototype, meaning all instances share the same method references.</p>
  </div>

  <!-- Tabs for different method types -->
  <div class="tabs">
    <button class="tab-btn active" onclick="switchTab(event,'tab-regular')">Regular Methods</button>
    <button class="tab-btn" onclick="switchTab(event,'tab-getset')">Getters & Setters</button>
    <button class="tab-btn" onclick="switchTab(event,'tab-computed')">Computed & Private</button>
  </div>

  <!-- Tab: Regular Methods -->
  <div class="tab-content active" id="tab-regular">
    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Instance Methods</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="kw">class</span> <span class="cl">TodoList</span> {
  <span class="fn">constructor</span>(<span class="pr">name</span>) {
    <span class="this">this</span>.<span class="pr">name</span> = name;
    <span class="this">this</span>.<span class="pr">todos</span> = [];
  }

  <span class="cm">// Instance method ‚Äî lives on the prototype</span>
  <span class="fn">add</span>(<span class="pr">task</span>) {
    <span class="this">this</span>.todos.push({ task, done: <span class="kw">false</span>, id: Date.now() });
    <span class="kw">return</span> <span class="this">this</span>; <span class="cm">// chaining</span>
  }

  <span class="fn">complete</span>(<span class="pr">task</span>) {
    <span class="kw">const</span> todo = <span class="this">this</span>.todos.find(t => t.task === task);
    <span class="kw">if</span> (todo) todo.done = <span class="kw">true</span>;
    <span class="kw">return</span> <span class="this">this</span>;
  }

  <span class="fn">summary</span>() {
    <span class="kw">const</span> done = <span class="this">this</span>.todos.filter(t => t.done).length;
    <span class="kw">return</span> <span class="str">`üìã ${<span class="this">this</span>.name}: ${done}/${<span class="this">this</span>.todos.length} complete`</span>;
  }

  <span class="cm">// toString override</span>
  <span class="fn">toString</span>() {
    <span class="kw">return</span> <span class="this">this</span>.todos
      .map(t => <span class="str">`${t.done ? '‚úÖ' : '‚¨ú'} ${t.task}`</span>)
      .join(<span class="str">'\n'</span>);
  }
}

<span class="kw">const</span> myList = <span class="kw">new</span> <span class="cl">TodoList</span>(<span class="str">'Today'</span>);
myList
  .add(<span class="str">'Learn Classes'</span>)
  .add(<span class="str">'Build Project'</span>)
  .add(<span class="str">'Take Quiz'</span>)
  .complete(<span class="str">'Learn Classes'</span>);

console.log(myList.summary());
console.log(myList.toString());

<span class="cm">// Methods live on the PROTOTYPE ‚Äî shared by all instances!</span>
<span class="kw">const</span> list2 = <span class="kw">new</span> <span class="cl">TodoList</span>(<span class="str">'Work'</span>);
console.log(myList.add === list2.add); <span class="cm">// true ‚Äî same reference!</span></div>
      <div class="output"></div>
    </div>
  </div>

  <!-- Tab: Getters & Setters -->
  <div class="tab-content" id="tab-getset">
    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Getters & Setters</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="kw">class</span> <span class="cl">Temperature</span> {
  <span class="fn">constructor</span>(<span class="pr">celsius</span>) {
    <span class="this">this</span>.<span class="pr">_celsius</span> = celsius; <span class="cm">// "private" backing field</span>
  }

  <span class="cm">// GETTER ‚Äî access like a property, not a method call</span>
  <span class="kw">get</span> <span class="fn">fahrenheit</span>() {
    <span class="kw">return</span> <span class="this">this</span>._celsius * <span class="num">9</span>/<span class="num">5</span> + <span class="num">32</span>;
  }

  <span class="cm">// SETTER ‚Äî assign like a property, runs validation</span>
  <span class="kw">set</span> <span class="fn">fahrenheit</span>(<span class="pr">f</span>) {
    <span class="this">this</span>._celsius = (f - <span class="num">32</span>) * <span class="num">5</span>/<span class="num">9</span>;
  }

  <span class="kw">get</span> <span class="fn">celsius</span>() {
    <span class="kw">return</span> <span class="this">this</span>._celsius;
  }

  <span class="kw">set</span> <span class="fn">celsius</span>(<span class="pr">c</span>) {
    <span class="kw">if</span> (c < -<span class="num">273.15</span>) {
      <span class="kw">throw new</span> Error(<span class="str">'Below absolute zero!'</span>);
    }
    <span class="this">this</span>._celsius = c;
  }
}

<span class="kw">const</span> temp = <span class="kw">new</span> <span class="cl">Temperature</span>(<span class="num">100</span>);
console.log(<span class="str">`${temp.celsius}¬∞C = ${temp.fahrenheit}¬∞F`</span>);

<span class="cm">// Use setter ‚Äî looks like property assignment!</span>
temp.fahrenheit = <span class="num">32</span>;
console.log(<span class="str">`32¬∞F = ${temp.celsius}¬∞C`</span>);

temp.celsius = <span class="num">37</span>;
console.log(<span class="str">`Body temp: ${temp.celsius}¬∞C = ${temp.fahrenheit}¬∞F`</span>);

<span class="cm">// Setter validation in action</span>
<span class="kw">try</span> {
  temp.celsius = -<span class="num">300</span>;
} <span class="kw">catch</span>(e) {
  console.log(<span class="str">'‚ùå'</span>, e.message);
}</div>
      <div class="output"></div>
    </div>
  </div>

  <!-- Tab: Computed & Private -->
  <div class="tab-content" id="tab-computed">
    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Private Fields & Computed Names</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="cm">// PRIVATE FIELDS (# syntax) ‚Äî truly private!</span>
<span class="kw">class</span> <span class="cl">Wallet</span> {
  <span class="cm">// Declare private fields at the top</span>
  #balance = <span class="num">0</span>;
  #pin;

  <span class="fn">constructor</span>(<span class="pr">owner</span>, <span class="pr">pin</span>, <span class="pr">initialBalance</span> = <span class="num">0</span>) {
    <span class="this">this</span>.<span class="pr">owner</span> = owner;
    <span class="this">this</span>.#pin = pin;
    <span class="this">this</span>.#balance = initialBalance;
  }

  <span class="fn">deposit</span>(<span class="pr">amount</span>) {
    <span class="this">this</span>.#balance += amount;
    console.log(<span class="str">`üí∞ Deposited $${amount}. New balance: $${<span class="this">this</span>.#balance}`</span>);
  }

  <span class="fn">withdraw</span>(<span class="pr">amount</span>, <span class="pr">pin</span>) {
    <span class="kw">if</span> (pin !== <span class="this">this</span>.#pin) {
      console.log(<span class="str">'‚ùå Wrong PIN!'</span>);
      <span class="kw">return</span>;
    }
    <span class="kw">if</span> (amount > <span class="this">this</span>.#balance) {
      console.log(<span class="str">'‚ùå Insufficient funds'</span>);
      <span class="kw">return</span>;
    }
    <span class="this">this</span>.#balance -= amount;
    console.log(<span class="str">`üí∏ Withdrew $${amount}. Remaining: $${<span class="this">this</span>.#balance}`</span>);
  }

  <span class="kw">get</span> <span class="fn">balance</span>() { <span class="kw">return</span> <span class="this">this</span>.#balance; }
}

<span class="kw">const</span> wallet = <span class="kw">new</span> <span class="cl">Wallet</span>(<span class="str">'Alice'</span>, <span class="num">1234</span>, <span class="num">100</span>);
wallet.deposit(<span class="num">50</span>);
wallet.withdraw(<span class="num">30</span>, <span class="num">1234</span>);
wallet.withdraw(<span class="num">30</span>, <span class="num">9999</span>); <span class="cm">// Wrong PIN!</span>

<span class="cm">// Private fields are TRULY private</span>
console.log(wallet.balance);   <span class="cm">// Works (getter)</span>
console.log(wallet.owner);     <span class="cm">// Works (public)</span>
<span class="kw">try</span> {
  console.log(wallet.#balance); <span class="cm">// SyntaxError!</span>
} <span class="kw">catch</span>(e) {
  console.log(<span class="str">'Cannot access #balance from outside!'</span>);
}</div>
      <div class="output"></div>
    </div>
  </div>

  <!-- Visual: Where methods live -->
  <div class="diagram">
    <h4 style="text-align:center;margin-bottom:1.5rem;color:var(--accent)">üìä Where Things Live in Memory</h4>
    <div style="display:flex;justify-content:center;gap:2rem;flex-wrap:wrap;align-items:flex-start">
      <div class="class-box">
        <div class="name">Instance (myList)</div>
        <div class="props">
          <div class="section-label">Own Properties</div>
          <div>name: <span style="color:var(--success)">"Today"</span></div>
          <div>todos: <span style="color:var(--success)">[...]</span></div>
        </div>
        <div class="methods">
          <div class="section-label">__proto__ ‚Üí</div>
          <div style="color:var(--text-dim);font-style:italic">Points to prototype ‚Üó</div>
        </div>
      </div>
      <div class="class-box" style="border-color:var(--primary)">
        <div class="name" style="background:var(--primary)">TodoList.prototype</div>
        <div class="methods">
          <div class="section-label">Shared Methods</div>
          <div>add: <span style="color:var(--accent)">∆í()</span></div>
          <div>complete: <span style="color:var(--accent)">∆í()</span></div>
          <div>summary: <span style="color:var(--accent)">∆í()</span></div>
          <div>toString: <span style="color:var(--accent)">∆í()</span></div>
        </div>
      </div>
    </div>
    <p style="text-align:center;color:var(--text-dim);margin-top:1rem;font-size:.85rem">Properties are per-instance ‚Ä¢ Methods are shared on the prototype</p>
  </div>
</section>

<div class="separator"></div>

<!-- ======================== SECTION 4: INHERITANCE ======================== -->
<section class="section reveal" id="inheritance">
  <div class="section-header">
    <div class="section-num">Chapter 04</div>
    <h2 class="section-title"><span>Inheritance</span> ‚Äî extends & super</h2>
    <p class="section-desc">Inheritance lets you create new classes based on existing ones. The child class gets all parent methods and can add or override them.</p>
  </div>

  <div class="analogy">
    <div class="analogy-icon">üß¨</div>
    <div>
      <h4>Like Genetic Inheritance</h4>
      <p>A <strong>child class</strong> inherits traits from its <strong>parent class</strong> ‚Äî just like you inherit traits from your parents. But you also have your own unique traits! In code, the child gets all parent methods but can <strong>override</strong> them or add new ones.</p>
    </div>
  </div>

  <!-- Inheritance Visual Chain -->
  <div class="diagram">
    <h4 style="text-align:center;margin-bottom:1.5rem;color:var(--accent)">üîó Inheritance Chain</h4>
    <div class="inherit-chain">
      <div class="class-box">
        <div class="name parent">Animal (Parent)</div>
        <div class="props">
          <div class="section-label">Properties</div>
          <div>name</div>
          <div>energy</div>
        </div>
        <div class="methods">
          <div class="section-label">Methods</div>
          <div>eat()</div>
          <div>sleep()</div>
          <div>describe()</div>
        </div>
      </div>
      <div class="arrow-down">‚¨áÔ∏è extends</div>
      <div style="display:flex;gap:1rem;flex-wrap:wrap;justify-content:center">
        <div class="class-box">
          <div class="name child">Dog (Child)</div>
          <div class="props">
            <div class="section-label">+ Own Properties</div>
            <div>breed</div>
          </div>
          <div class="methods">
            <div class="section-label">+ Own Methods</div>
            <div>bark()</div>
            <div style="color:var(--primary)">describe() ‚Üê override</div>
          </div>
        </div>
        <div class="class-box">
          <div class="name child">Cat (Child)</div>
          <div class="props">
            <div class="section-label">+ Own Properties</div>
            <div>indoor</div>
          </div>
          <div class="methods">
            <div class="section-label">+ Own Methods</div>
            <div>purr()</div>
            <div>meow()</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Basic Inheritance -->
  <div class="card">
    <h3>üß¨ Basic Inheritance with extends & super</h3>
    <p><span class="kw-box">extends</span> sets up the prototype chain. <span class="kw-box">super()</span> calls the parent's constructor. <span class="kw-box">super.method()</span> calls parent methods.</p>
    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Inheritance</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="cm">// Parent (Base) class</span>
<span class="kw">class</span> <span class="cl">Animal</span> {
  <span class="fn">constructor</span>(<span class="pr">name</span>, <span class="pr">energy</span> = <span class="num">100</span>) {
    <span class="this">this</span>.<span class="pr">name</span> = name;
    <span class="this">this</span>.<span class="pr">energy</span> = energy;
  }

  <span class="fn">eat</span>(<span class="pr">food</span>) {
    <span class="this">this</span>.energy += <span class="num">10</span>;
    <span class="kw">return</span> <span class="str">`üçñ ${<span class="this">this</span>.name} eats ${food}. Energy: ${<span class="this">this</span>.energy}`</span>;
  }

  <span class="fn">sleep</span>() {
    <span class="this">this</span>.energy += <span class="num">20</span>;
    <span class="kw">return</span> <span class="str">`üò¥ ${<span class="this">this</span>.name} sleeps. Energy: ${<span class="this">this</span>.energy}`</span>;
  }

  <span class="fn">describe</span>() {
    <span class="kw">return</span> <span class="str">`${<span class="this">this</span>.name} (Energy: ${<span class="this">this</span>.energy})`</span>;
  }
}

<span class="cm">// Child class ‚Äî extends parent</span>
<span class="kw">class</span> <span class="cl">Dog</span> <span class="kw">extends</span> <span class="cl">Animal</span> {
  <span class="fn">constructor</span>(<span class="pr">name</span>, <span class="pr">breed</span>) {
    <span class="cm">// MUST call super() before using 'this'!</span>
    <span class="kw">super</span>(name, <span class="num">120</span>); <span class="cm">// calls Animal's constructor</span>
    <span class="this">this</span>.<span class="pr">breed</span> = breed;   <span class="cm">// add own property</span>
  }

  <span class="fn">bark</span>() {
    <span class="this">this</span>.energy -= <span class="num">5</span>;
    <span class="kw">return</span> <span class="str">`üêï ${<span class="this">this</span>.name} barks! Woof! Energy: ${<span class="this">this</span>.energy}`</span>;
  }

  <span class="cm">// OVERRIDE parent method</span>
  <span class="fn">describe</span>() {
    <span class="cm">// Call parent version with super.method()</span>
    <span class="kw">return</span> <span class="str">`üê∂ ${<span class="kw">super</span>.describe()} ‚Äî Breed: ${<span class="this">this</span>.breed}`</span>;
  }
}

<span class="kw">class</span> <span class="cl">Cat</span> <span class="kw">extends</span> <span class="cl">Animal</span> {
  <span class="fn">constructor</span>(<span class="pr">name</span>, <span class="pr">indoor</span> = <span class="kw">true</span>) {
    <span class="kw">super</span>(name, <span class="num">90</span>);
    <span class="this">this</span>.<span class="pr">indoor</span> = indoor;
  }

  <span class="fn">purr</span>() {
    <span class="kw">return</span> <span class="str">`üê± ${<span class="this">this</span>.name} purrs... rrrrr`</span>;
  }
}

<span class="kw">const</span> rex = <span class="kw">new</span> <span class="cl">Dog</span>(<span class="str">'Rex'</span>, <span class="str">'German Shepherd'</span>);
<span class="kw">const</span> luna = <span class="kw">new</span> <span class="cl">Cat</span>(<span class="str">'Luna'</span>);

console.log(rex.describe());     <span class="cm">// overridden</span>
console.log(rex.eat(<span class="str">'bone'</span>));   <span class="cm">// inherited from Animal</span>
console.log(rex.bark());         <span class="cm">// own method</span>
console.log(luna.purr());
console.log(luna.sleep());       <span class="cm">// inherited</span>

<span class="cm">// instanceof checks the ENTIRE chain</span>
console.log(<span class="str">`Rex is Dog: ${rex <span class="kw">instanceof</span> Dog}`</span>);
console.log(<span class="str">`Rex is Animal: ${rex <span class="kw">instanceof</span> Animal}`</span>);
console.log(<span class="str">`Luna is Dog: ${luna <span class="kw">instanceof</span> Dog}`</span>);</div>
      <div class="output"></div>
    </div>
  </div>

  <!-- Multi-level Inheritance -->
  <div class="card">
    <h3>üèóÔ∏è Multi-Level Inheritance</h3>
    <p>You can chain inheritance multiple levels deep, though keep it shallow in practice.</p>
    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Multi-Level Chain</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="kw">class</span> <span class="cl">Vehicle</span> {
  <span class="fn">constructor</span>(<span class="pr">type</span>) {
    <span class="this">this</span>.<span class="pr">type</span> = type;
    console.log(<span class="str">`  1Ô∏è‚É£ Vehicle constructor: ${type}`</span>);
  }
  <span class="fn">move</span>() { <span class="kw">return</span> <span class="str">`${<span class="this">this</span>.type} is moving`</span>; }
}

<span class="kw">class</span> <span class="cl">Car</span> <span class="kw">extends</span> <span class="cl">Vehicle</span> {
  <span class="fn">constructor</span>(<span class="pr">brand</span>) {
    <span class="kw">super</span>(<span class="str">'car'</span>);  <span class="cm">// calls Vehicle constructor</span>
    <span class="this">this</span>.<span class="pr">brand</span> = brand;
    console.log(<span class="str">`  2Ô∏è‚É£ Car constructor: ${brand}`</span>);
  }
  <span class="fn">honk</span>() { <span class="kw">return</span> <span class="str">'üöó Beep!'</span>; }
}

<span class="kw">class</span> <span class="cl">ElectricCar</span> <span class="kw">extends</span> <span class="cl">Car</span> {
  <span class="fn">constructor</span>(<span class="pr">brand</span>, <span class="pr">range</span>) {
    <span class="kw">super</span>(brand);  <span class="cm">// calls Car constructor ‚Üí which calls Vehicle</span>
    <span class="this">this</span>.<span class="pr">range</span> = range;
    console.log(<span class="str">`  3Ô∏è‚É£ ElectricCar constructor: range ${range}mi`</span>);
  }
  <span class="fn">charge</span>() { <span class="kw">return</span> <span class="str">`‚ö° ${<span class="this">this</span>.brand} charging...`</span>; }
}

console.log(<span class="str">'Creating ElectricCar ‚Äî watch constructor order:'</span>);
<span class="kw">const</span> tesla = <span class="kw">new</span> <span class="cl">ElectricCar</span>(<span class="str">'Tesla'</span>, <span class="num">350</span>);

console.log(<span class="str">'\nAll methods work:'</span>);
console.log(tesla.move());    <span class="cm">// from Vehicle</span>
console.log(tesla.honk());    <span class="cm">// from Car</span>
console.log(tesla.charge());  <span class="cm">// own method</span>

console.log(<span class="str">'\ninstanceof chain:'</span>);
console.log(tesla <span class="kw">instanceof</span> <span class="cl">ElectricCar</span>); <span class="cm">// true</span>
console.log(tesla <span class="kw">instanceof</span> <span class="cl">Car</span>);         <span class="cm">// true</span>
console.log(tesla <span class="kw">instanceof</span> <span class="cl">Vehicle</span>);     <span class="cm">// true</span></div>
      <div class="output"></div>
    </div>
  </div>

  <div class="pitfall">
    <h4>‚ö†Ô∏è Pitfall: Must call super() before using 'this'</h4>
    <p>In a child class constructor, you <strong>must</strong> call <span class="kw-box">super()</span> before accessing <span class="kw-box">this</span>. Forgetting this throws a <span class="kw-box">ReferenceError</span>. Think of it as: the parent must build the foundation before the child can add walls.</p>
    <div class="code-container" style="margin-top:1rem">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">super() pitfall</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="kw">class</span> <span class="cl">Parent</span> {
  <span class="fn">constructor</span>(<span class="pr">x</span>) { <span class="this">this</span>.<span class="pr">x</span> = x; }
}

<span class="cm">// ‚ùå WRONG ‚Äî using 'this' before super()</span>
<span class="kw">class</span> <span class="cl">BadChild</span> <span class="kw">extends</span> <span class="cl">Parent</span> {
  <span class="fn">constructor</span>(<span class="pr">x</span>, <span class="pr">y</span>) {
    <span class="kw">try</span> {
      <span class="this">this</span>.<span class="pr">y</span> = y; <span class="cm">// ‚ùå ReferenceError!</span>
      <span class="kw">super</span>(x);
    } <span class="kw">catch</span>(e) {
      console.log(<span class="str">'‚ùå Error:'</span>, e.message);
    }
  }
}

<span class="cm">// ‚úÖ CORRECT ‚Äî super() first</span>
<span class="kw">class</span> <span class="cl">GoodChild</span> <span class="kw">extends</span> <span class="cl">Parent</span> {
  <span class="fn">constructor</span>(<span class="pr">x</span>, <span class="pr">y</span>) {
    <span class="kw">super</span>(x);       <span class="cm">// ‚úÖ First!</span>
    <span class="this">this</span>.<span class="pr">y</span> = y; <span class="cm">// ‚úÖ Now 'this' is available</span>
  }
}

<span class="kw">try</span> { <span class="kw">new</span> <span class="cl">BadChild</span>(<span class="num">1</span>, <span class="num">2</span>); } <span class="kw">catch</span>(e) {}
<span class="kw">const</span> good = <span class="kw">new</span> <span class="cl">GoodChild</span>(<span class="num">1</span>, <span class="num">2</span>);
console.log(<span class="str">'‚úÖ GoodChild:'</span>, good);</div>
      <div class="output"></div>
    </div>
  </div>

  <div class="tip">
    <h4>üí° If you don't define a constructor in a child class</h4>
    <p>JavaScript automatically creates one that passes all arguments to the parent:<br>
    <span class="kw-box">constructor(...args) { super(...args); }</span></p>
  </div>
</section>

<div class="separator"></div>

<!-- ======================== SECTION 5: STATIC ======================== -->
<section class="section reveal" id="static">
  <div class="section-header">
    <div class="section-num">Chapter 05</div>
    <h2 class="section-title"><span>Static</span> Methods & Properties</h2>
    <p class="section-desc">Static members belong to the class itself, not to instances. They're like utility functions attached to the class namespace.</p>
  </div>

  <div class="analogy">
    <div class="analogy-icon">üè´</div>
    <div>
      <h4>Static = School vs Students</h4>
      <p><strong>Instance methods</strong> are like each student's individual homework ‚Äî different for each student. <strong>Static methods</strong> are like school-wide announcements ‚Äî they belong to the school itself, not any particular student. You call them on the class, not on instances.</p>
    </div>
  </div>

  <!-- Visual -->
  <div class="diagram">
    <h4 style="text-align:center;margin-bottom:1.5rem;color:var(--accent)">Instance vs Static ‚Äî Where They Live</h4>
    <div style="display:flex;justify-content:center;gap:2rem;flex-wrap:wrap">
      <div class="class-box" style="border-color:var(--primary)">
        <div class="name static-c">MathHelper (Class itself)</div>
        <div class="methods">
          <div class="section-label">Static Members</div>
          <div style="color:var(--primary)">static PI = 3.14159</div>
          <div style="color:var(--primary)">static add(a, b)</div>
          <div style="color:var(--primary)">static random(min, max)</div>
        </div>
      </div>
      <div class="class-box">
        <div class="name" style="background:var(--text-dim)">Instance</div>
        <div class="methods">
          <div class="section-label">Cannot access</div>
          <div style="color:var(--danger)">‚ùå instance.PI</div>
          <div style="color:var(--danger)">‚ùå instance.add()</div>
        </div>
      </div>
    </div>
    <p style="text-align:center;color:var(--text-dim);margin-top:1rem;font-size:.85rem">Call static with: <span class="kw-box">MathHelper.add(1,2)</span> ‚Äî Not on instances!</p>
  </div>

  <div class="card">
    <h3>‚ö° Static Methods & Properties</h3>
    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Static Members</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="kw">class</span> <span class="cl">MathUtils</span> {
  <span class="cm">// Static property</span>
  <span class="kw">static</span> <span class="pr">PI</span> = <span class="num">3.14159265</span>;
  <span class="kw">static</span> <span class="pr">E</span> = <span class="num">2.71828</span>;

  <span class="cm">// Static methods ‚Äî called on the class itself</span>
  <span class="kw">static</span> <span class="fn">circleArea</span>(<span class="pr">radius</span>) {
    <span class="kw">return</span> <span class="cl">MathUtils</span>.PI * radius ** <span class="num">2</span>;
  }

  <span class="kw">static</span> <span class="fn">clamp</span>(<span class="pr">value</span>, <span class="pr">min</span>, <span class="pr">max</span>) {
    <span class="kw">return</span> Math.min(Math.max(value, min), max);
  }

  <span class="kw">static</span> <span class="fn">randomBetween</span>(<span class="pr">min</span>, <span class="pr">max</span>) {
    <span class="kw">return</span> Math.floor(Math.random() * (max - min + <span class="num">1</span>)) + min;
  }

  <span class="kw">static</span> <span class="fn">degToRad</span>(<span class="pr">degrees</span>) {
    <span class="kw">return</span> degrees * (<span class="cl">MathUtils</span>.PI / <span class="num">180</span>);
  }
}

<span class="cm">// Call on the CLASS ‚Äî not on instances!</span>
console.log(<span class="str">`PI: ${<span class="cl">MathUtils</span>.PI}`</span>);
console.log(<span class="str">`Circle area (r=5): ${<span class="cl">MathUtils</span>.circleArea(5).toFixed(2)}`</span>);
console.log(<span class="str">`Clamp 150 to 0-100: ${<span class="cl">MathUtils</span>.clamp(150, 0, 100)}`</span>);
console.log(<span class="str">`Random 1-10: ${<span class="cl">MathUtils</span>.randomBetween(1, 10)}`</span>);
console.log(<span class="str">`90¬∞ in radians: ${<span class="cl">MathUtils</span>.degToRad(90).toFixed(4)}`</span>);

<span class="cm">// ‚ùå Cannot use on instances</span>
<span class="kw">try</span> {
  <span class="kw">const</span> m = <span class="kw">new</span> <span class="cl">MathUtils</span>();
  m.circleArea(<span class="num">5</span>);
} <span class="kw">catch</span>(e) {
  console.log(<span class="str">'‚ùå Instance error:'</span>, e.message);
}</div>
      <div class="output"></div>
    </div>
  </div>

  <!-- Factory Pattern -->
  <div class="card">
    <h3>üè≠ Factory Pattern with Static Methods</h3>
    <p>Static methods are perfect for factory patterns ‚Äî alternative ways to create instances.</p>
    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Factory Pattern</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="kw">class</span> <span class="cl">Color</span> {
  <span class="fn">constructor</span>(<span class="pr">r</span>, <span class="pr">g</span>, <span class="pr">b</span>) {
    <span class="this">this</span>.<span class="pr">r</span> = r;
    <span class="this">this</span>.<span class="pr">g</span> = g;
    <span class="this">this</span>.<span class="pr">b</span> = b;
  }

  <span class="cm">// Factory: Create from hex string</span>
  <span class="kw">static</span> <span class="fn">fromHex</span>(<span class="pr">hex</span>) {
    <span class="kw">const</span> r = parseInt(hex.slice(<span class="num">1</span>, <span class="num">3</span>), <span class="num">16</span>);
    <span class="kw">const</span> g = parseInt(hex.slice(<span class="num">3</span>, <span class="num">5</span>), <span class="num">16</span>);
    <span class="kw">const</span> b = parseInt(hex.slice(<span class="num">5</span>, <span class="num">7</span>), <span class="num">16</span>);
    <span class="kw">return new</span> <span class="cl">Color</span>(r, g, b);
  }

  <span class="cm">// Factory: Create from HSL</span>
  <span class="kw">static</span> <span class="fn">fromName</span>(<span class="pr">name</span>) {
    <span class="kw">const</span> colors = {
      red: [<span class="num">255</span>, <span class="num">0</span>, <span class="num">0</span>],
      green: [<span class="num">0</span>, <span class="num">128</span>, <span class="num">0</span>],
      blue: [<span class="num">0</span>, <span class="num">0</span>, <span class="num">255</span>],
      white: [<span class="num">255</span>, <span class="num">255</span>, <span class="num">255</span>]
    };
    <span class="kw">const</span> [r, g, b] = colors[name] || [<span class="num">0</span>, <span class="num">0</span>, <span class="num">0</span>];
    <span class="kw">return new</span> <span class="cl">Color</span>(r, g, b);
  }

  <span class="cm">// Static: Track all created colors</span>
  <span class="kw">static</span> <span class="pr">count</span> = <span class="num">0</span>;

  <span class="fn">toHex</span>() {
    <span class="kw">const</span> hex = (n) => n.toString(<span class="num">16</span>).padStart(<span class="num">2</span>, <span class="str">'0'</span>);
    <span class="kw">return</span> <span class="str">`#${hex(<span class="this">this</span>.r)}${hex(<span class="this">this</span>.g)}${hex(<span class="this">this</span>.b)}`</span>;
  }

  <span class="fn">toString</span>() {
    <span class="kw">return</span> <span class="str">`rgb(${<span class="this">this</span>.r}, ${<span class="this">this</span>.g}, ${<span class="this">this</span>.b})`</span>;
  }
}

<span class="cm">// Multiple ways to create Color instances!</span>
<span class="kw">const</span> c1 = <span class="kw">new</span> <span class="cl">Color</span>(<span class="num">255</span>, <span class="num">128</span>, <span class="num">0</span>);
<span class="kw">const</span> c2 = <span class="cl">Color</span>.fromHex(<span class="str">'#7f5af0'</span>);
<span class="kw">const</span> c3 = <span class="cl">Color</span>.fromName(<span class="str">'red'</span>);

console.log(<span class="str">`Direct: ${c1} ‚Üí ${c1.toHex()}`</span>);
console.log(<span class="str">`From hex: ${c2} ‚Üí ${c2.toHex()}`</span>);
console.log(<span class="str">`From name: ${c3} ‚Üí ${c3.toHex()}`</span>);</div>
      <div class="output"></div>
    </div>
  </div>

  <!-- Static Inheritance -->
  <div class="card">
    <h3>üîó Static Members Are Inherited Too!</h3>
    <div class="code-container">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Static Inheritance</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="kw">class</span> <span class="cl">Shape</span> {
  <span class="kw">static</span> <span class="pr">description</span> = <span class="str">'I am a shape'</span>;

  <span class="kw">static</span> <span class="fn">create</span>(...<span class="pr">args</span>) {
    <span class="kw">return new</span> <span class="this">this</span>(...args); <span class="cm">// 'this' = class being called on!</span>
  }

  <span class="fn">area</span>() {
    <span class="kw">throw new</span> Error(<span class="str">'Subclass must implement area()'</span>);
  }
}

<span class="kw">class</span> <span class="cl">Circle</span> <span class="kw">extends</span> <span class="cl">Shape</span> {
  <span class="kw">static</span> <span class="pr">description</span> = <span class="str">'I am a circle'</span>;

  <span class="fn">constructor</span>(<span class="pr">radius</span>) {
    <span class="kw">super</span>();
    <span class="this">this</span>.<span class="pr">radius</span> = radius;
  }

  <span class="fn">area</span>() {
    <span class="kw">return</span> Math.PI * <span class="this">this</span>.radius ** <span class="num">2</span>;
  }
}

<span class="cm">// Static method inherited ‚Äî but 'this' changes!</span>
<span class="kw">const</span> c = <span class="cl">Circle</span>.create(<span class="num">5</span>); <span class="cm">// calls new Circle(5)</span>
console.log(c <span class="kw">instanceof</span> <span class="cl">Circle</span>); <span class="cm">// true!</span>
console.log(<span class="str">`Area: ${c.area().toFixed(2)}`</span>);

<span class="cm">// Static properties</span>
console.log(<span class="cl">Shape</span>.description);  <span class="cm">// "I am a shape"</span>
console.log(<span class="cl">Circle</span>.description); <span class="cm">// "I am a circle" (overridden)</span></div>
      <div class="output"></div>
    </div>
  </div>
</section>

<div class="separator"></div>

<!-- ======================== SECTION 6: PITFALLS ======================== -->
<section class="section reveal" id="pitfalls">
  <div class="section-header">
    <div class="section-num">Chapter 06</div>
    <h2 class="section-title">Common <span>Pitfalls</span></h2>
    <p class="section-desc">These mistakes trip up even experienced developers. Know them, avoid them.</p>
  </div>

  <!-- Pitfall 1: Forgetting new -->
  <div class="pitfall">
    <h4>‚ö†Ô∏è Pitfall #1: Forgetting 'new'</h4>
    <p>Classes MUST be called with <span class="kw-box">new</span>. Unlike regular functions, calling a class without <code>new</code> throws a TypeError.</p>
    <div class="code-container" style="margin-top:1rem">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Must use new</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="kw">class</span> <span class="cl">Person</span> {
  <span class="fn">constructor</span>(<span class="pr">name</span>) {
    <span class="this">this</span>.<span class="pr">name</span> = name;
  }
}

<span class="cm">// ‚úÖ Correct</span>
<span class="kw">const</span> p1 = <span class="kw">new</span> <span class="cl">Person</span>(<span class="str">'Alice'</span>);
console.log(<span class="str">'‚úÖ'</span>, p1.name);

<span class="cm">// ‚ùå Without 'new' ‚Äî TypeError!</span>
<span class="kw">try</span> {
  <span class="kw">const</span> p2 = <span class="cl">Person</span>(<span class="str">'Bob'</span>);
} <span class="kw">catch</span>(e) {
  console.log(<span class="str">'‚ùå'</span>, e.message);
}</div>
      <div class="output"></div>
    </div>
  </div>

  <!-- Pitfall 2: this context loss -->
  <div class="pitfall">
    <h4>‚ö†Ô∏è Pitfall #2: Losing 'this' in Callbacks</h4>
    <p>When you pass a method as a callback, <span class="kw-box">this</span> gets lost! This is the #1 source of class-related bugs.</p>
    <div class="code-container" style="margin-top:1rem">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">this Context Loss</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="kw">class</span> <span class="cl">Timer</span> {
  <span class="fn">constructor</span>(<span class="pr">name</span>) {
    <span class="this">this</span>.<span class="pr">name</span> = name;
    <span class="this">this</span>.<span class="pr">seconds</span> = <span class="num">0</span>;
  }

  <span class="cm">// Regular method ‚Äî 'this' depends on HOW it's called</span>
  <span class="fn">tick</span>() {
    <span class="this">this</span>.seconds++;
    <span class="kw">return</span> <span class="str">`${<span class="this">this</span>.name}: ${<span class="this">this</span>.seconds}s`</span>;
  }

  <span class="cm">// Arrow function class field ‚Äî 'this' is ALWAYS the instance</span>
  <span class="fn">tickSafe</span> = () => {
    <span class="this">this</span>.seconds++;
    <span class="kw">return</span> <span class="str">`${<span class="this">this</span>.name}: ${<span class="this">this</span>.seconds}s`</span>;
  }
}

<span class="kw">const</span> timer = <span class="kw">new</span> <span class="cl">Timer</span>(<span class="str">'MyTimer'</span>);

<span class="cm">// ‚úÖ Direct call works fine</span>
console.log(<span class="str">'Direct:'</span>, timer.tick());

<span class="cm">// ‚ùå Passing method as callback ‚Äî 'this' is lost!</span>
<span class="kw">const</span> tickRef = timer.tick;
<span class="kw">try</span> {
  tickRef();
} <span class="kw">catch</span>(e) {
  console.log(<span class="str">'‚ùå Lost this:'</span>, e.message);
}

<span class="cm">// ‚úÖ FIX 1: Arrow function class field</span>
<span class="kw">const</span> safeRef = timer.tickSafe;
console.log(<span class="str">'‚úÖ Arrow fix:'</span>, safeRef());

<span class="cm">// ‚úÖ FIX 2: Bind</span>
<span class="kw">const</span> boundTick = timer.tick.bind(timer);
console.log(<span class="str">'‚úÖ Bind fix:'</span>, boundTick());

<span class="cm">// ‚úÖ FIX 3: Wrapper arrow</span>
<span class="kw">const</span> wrappedTick = () => timer.tick();
console.log(<span class="str">'‚úÖ Wrapper fix:'</span>, wrappedTick());</div>
      <div class="output"></div>
    </div>
  </div>

  <!-- Pitfall 3 -->
  <div class="pitfall">
    <h4>‚ö†Ô∏è Pitfall #3: Overriding Without super</h4>
    <p>When overriding a method, if you need the parent's behavior too, don't forget <span class="kw-box">super.method()</span>!</p>
    <div class="comparison">
      <div class="side bad">
        <div class="side-header">‚ùå Forgets parent logic</div>
        <div class="code-block" style="font-size:.8rem"><span class="kw">class</span> <span class="cl">Child</span> <span class="kw">extends</span> <span class="cl">Parent</span> {
  <span class="fn">save</span>() {
    <span class="cm">// Parent's save() validation</span>
    <span class="cm">// is completely skipped!</span>
    db.insert(<span class="this">this</span>);
  }
}</div>
      </div>
      <div class="side good">
        <div class="side-header">‚úÖ Includes parent logic</div>
        <div class="code-block" style="font-size:.8rem"><span class="kw">class</span> <span class="cl">Child</span> <span class="kw">extends</span> <span class="cl">Parent</span> {
  <span class="fn">save</span>() {
    <span class="kw">super</span>.save(); <span class="cm">// ‚úÖ Parent's</span>
    <span class="cm">// validation runs first!</span>
    db.insert(<span class="this">this</span>);
  }
}</div>
      </div>
    </div>
  </div>

  <!-- Pitfall 4 -->
  <div class="pitfall">
    <h4>‚ö†Ô∏è Pitfall #4: Modifying Prototype Properties (Shared Reference)</h4>
    <p>If you put a mutable object (array/object) on the prototype instead of in the constructor, ALL instances share the same reference!</p>
    <div class="code-container" style="margin-top:1rem">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Shared Reference Bug</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="cm">// ‚ùå BAD: Shared mutable property</span>
<span class="kw">class</span> <span class="cl">BadList</span> {
  items = []; <span class="cm">// This is OK ‚Äî class fields create per-instance</span>
}

<span class="cm">// Actually, class fields ARE per-instance. But beware with prototypes:</span>
<span class="kw">function</span> <span class="fn">BadConstructor</span>() {}
BadConstructor.prototype.items = []; <span class="cm">// ‚ùå SHARED!</span>

<span class="kw">const</span> a = <span class="kw">new</span> <span class="fn">BadConstructor</span>();
<span class="kw">const</span> b = <span class="kw">new</span> <span class="fn">BadConstructor</span>();
a.items.push(<span class="str">'hello'</span>);
console.log(<span class="str">'‚ùå b.items:'</span>, b.items); <span class="cm">// ["hello"] ‚Äî leaked!</span>
console.log(<span class="str">'‚ùå Same ref?'</span>, a.items === b.items); <span class="cm">// true!</span>

<span class="cm">// ‚úÖ GOOD: Class fields or constructor assignment</span>
<span class="kw">class</span> <span class="cl">GoodList</span> {
  <span class="fn">constructor</span>() {
    <span class="this">this</span>.<span class="pr">items</span> = []; <span class="cm">// Each instance gets its own array</span>
  }
}
<span class="kw">const</span> c = <span class="kw">new</span> <span class="cl">GoodList</span>();
<span class="kw">const</span> d = <span class="kw">new</span> <span class="cl">GoodList</span>();
c.items.push(<span class="str">'hello'</span>);
console.log(<span class="str">'‚úÖ d.items:'</span>, d.items); <span class="cm">// [] ‚Äî isolated!</span>
console.log(<span class="str">'‚úÖ Same ref?'</span>, c.items === d.items); <span class="cm">// false!</span></div>
      <div class="output"></div>
    </div>
  </div>

  <!-- Pitfall 5 -->
  <div class="pitfall">
    <h4>‚ö†Ô∏è Pitfall #5: Classes Are Not "True" Classes</h4>
    <p>Remember: ES6 classes are <strong>syntactic sugar</strong> over prototypes. They don't change JavaScript's fundamental object model. <span class="kw-box">typeof MyClass === 'function'</span>. Under the hood, the prototype chain is exactly the same as with constructor functions.</p>
    <div class="code-container" style="margin-top:1rem">
      <div class="code-header">
        <div class="dots"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
        <span class="label">Under the Hood</span>
        <div class="code-actions">
          <button class="btn-run" onclick="runCode(this)">‚ñ∂ Run</button>
        </div>
      </div>
      <div class="code-block"><span class="kw">class</span> <span class="cl">Wizard</span> {
  <span class="fn">constructor</span>(<span class="pr">name</span>) { <span class="this">this</span>.<span class="pr">name</span> = name; }
  <span class="fn">cast</span>() { <span class="kw">return</span> <span class="str">`${<span class="this">this</span>.name} casts a spell! ‚ú®`</span>; }
}

<span class="cm">// Peek behind the curtain:</span>
console.log(<span class="kw">typeof</span> <span class="cl">Wizard</span>); <span class="cm">// "function"</span>
console.log(<span class="cl">Wizard</span>.prototype.cast); <span class="cm">// ∆í cast()</span>
console.log(<span class="cl">Wizard</span>.prototype.constructor === <span class="cl">Wizard</span>); <span class="cm">// true</span>

<span class="kw">const</span> gandalf = <span class="kw">new</span> <span class="cl">Wizard</span>(<span class="str">'Gandalf'</span>);
console.log(Object.getPrototypeOf(gandalf) === <span class="cl">Wizard</span>.prototype); <span class="cm">// true</span>
console.log(gandalf.cast());</div>
      <div class="output"></div>
    </div>
  </div>
</section>

<div class="separator"></div>

<!-- ======================== SECTION 7: QUIZ ======================== -->
<section class="section reveal" id="quiz">
  <div class="section-header">
    <div class="section-num">Chapter 07</div>
    <h2 class="section-title">Knowledge <span>Quiz</span></h2>
    <p class="section-desc">Test your understanding with these 10 questions. Try to answer before clicking "Check"!</p>
  </div>

  <div class="quiz-container" id="quizContainer"></div>

  <div style="text-align:center;margin-top:2rem">
    <button class="btn-start" onclick="calculateScore()" id="scoreBtn" style="display:none">üìä Calculate My Score</button>
    <div class="quiz-score" id="quizScore" style="display:none">
      <div class="score-num" id="scoreNum"></div>
      <p style="color:var(--text-dim);margin-top:.5rem" id="scoreMsg"></p>
    </div>
  </div>
</section>

<div class="separator"></div>

<!-- ======================== SECTION 8: EXERCISES ======================== -->
<section class="section reveal" id="exercises">
  <div class="section-header">
    <div class="section-num">Chapter 08</div>
    <h2 class="section-title">Coding <span>Exercises</span></h2>
    <p class="section-desc">Practice makes perfect. Write real code and test it instantly.</p>
  </div>

  <!-- Exercise 1 -->
  <div class="exercise" id="ex1">
    <h4>üèãÔ∏è Exercise 1: Create a Rectangle Class</h4>
    <div class="instructions">
      <p>Create a class <code>Rectangle</code> that:</p>
      <ul>
        <li>Takes <code>width</code> and <code>height</code> in the constructor</li>
        <li>Has a getter <code>area</code> that returns width √ó height</li>
        <li>Has a getter <code>perimeter</code> that returns 2 √ó (width + height)</li>
        <li>Has a method <code>isSquare()</code> that returns true if width === height</li>
        <li>Has a method <code>toString()</code> that returns e.g. <code>"Rectangle(5√ó3)"</code></li>
      </ul>
    </div>
    <textarea class="code-editor" id="editor1" spellcheck="false">class Rectangle {
  // Your code here!

}

// Tests will run automatically
</textarea>
    <div class="exercise-btns">
      <button class="btn-test" onclick="testExercise(1)">üß™ Run Tests</button>
      <button class="btn-hint" onclick="toggleHint(1)">üí° Hint</button>
      <button class="btn-solution" onclick="showSolution(1)">üëÅÔ∏è Solution</button>
    </div>
    <div class="hint-box" id="hint1">Use <code>get</code> keyword for area and perimeter. In the constructor, assign <code>this.width</code> and <code>this.height</code>.</div>
    <div class="exercise-output" id="output1"></div>
  </div>

  <!-- Exercise 2 -->
  <div class="exercise" id="ex2">
    <h4>üèãÔ∏è Exercise 2: Inheritance ‚Äî Shape Hierarchy</h4>
    <div class="instructions">
      <p>Create an inheritance chain:</p>
      <ul>
        <li><code>Shape</code> (base) ‚Äî constructor takes <code>color</code>, has method <code>describe()</code> returning <code>"A {color} shape"</code></li>
        <li><code>Circle</code> extends Shape ‚Äî constructor takes <code>color</code> and <code>radius</code>, has method <code>area()</code> returning œÄ√ór¬≤, overrides <code>describe()</code> to return <code>"A {color} circle with radius {radius}"</code></li>
        <li><code>Square</code> extends Shape ‚Äî constructor takes <code>color</code> and <code>side</code>, has method <code>area()</code>, overrides <code>describe()</code></li>
      </ul>
    </div>
    <textarea class="code-editor" id="editor2" spellcheck="false">class Shape {
  // Your code here!
}

class Circle extends Shape {
  // Your code here!
}

class Square extends Shape {
  // Your code here!
}
</textarea>
    <div class="exercise-btns">
      <button class="btn-test" onclick="testExercise(2)">üß™ Run Tests</button>
      <button class="btn-hint" onclick="toggleHint(2)">üí° Hint</button>
      <button class="btn-solution" onclick="showSolution(2)">üëÅÔ∏è Solution</button>
    </div>
    <div class="hint-box" id="hint2">Remember: call <code>super(color)</code> in child constructors before using <code>this</code>. Use <code>Math.PI</code> for circle area.</div>
    <div class="exercise-output" id="output2"></div>
  </div>

  <!-- Exercise 3 -->
  <div class="exercise" id="ex3">
    <h4>üèãÔ∏è Exercise 3: Static Methods ‚Äî UserDatabase</h4>
    <div class="instructions">
      <p>Create a <code>UserDatabase</code> class with:</p>
      <ul>
        <li>A static property <code>users</code> (empty array)</li>
        <li>A static method <code>add(name, age)</code> that creates a user object <code>{name, age, id}</code> (id = users.length + 1) and pushes to users array</li>
        <li>A static method <code>find(name)</code> that returns the user with that name (or undefined)</li>
        <li>A static method <code>count()</code> that returns the number of users</li>
        <li>A static method <code>removeAll()</code> that clears the users array</li>
      </ul>
    </div>
    <textarea class="code-editor" id="editor3" spellcheck="false">class UserDatabase {
  // Your code here!

}
</textarea>
    <div class="exercise-btns">
      <button class="btn-test" onclick="testExercise(3)">üß™ Run Tests</button>
      <button class="btn-hint" onclick="toggleHint(3)">üí° Hint</button>
      <button class="btn-solution" onclick="showSolution(3)">üëÅÔ∏è Solution</button>
    </div>
    <div class="hint-box" id="hint3">All methods and the <code>users</code> property should be <code>static</code>. Use <code>this.users</code> or <code>UserDatabase.users</code> inside static methods.</div>
    <div class="exercise-output" id="output3"></div>
  </div>

  <!-- Exercise 4: Advanced -->
  <div class="exercise" id="ex4">
    <h4>üèãÔ∏è Exercise 4: Advanced ‚Äî EventEmitter</h4>
    <div class="instructions">
      <p>Build a simplified <code>EventEmitter</code> class:</p>
      <ul>
        <li><code>on(event, callback)</code> ‚Äî registers a callback for an event</li>
        <li><code>emit(event, ...args)</code> ‚Äî calls all callbacks registered for that event with provided args</li>
        <li><code>off(event, callback)</code> ‚Äî removes a specific callback from an event</li>
        <li>Should support multiple callbacks per event</li>
      </ul>
    </div>
    <textarea class="code-editor" id="editor4" spellcheck="false">class EventEmitter {
  // Your code here!

}
</textarea>
    <div class="exercise-btns">
      <button class="btn-test" onclick="testExercise(4)">üß™ Run Tests</button>
      <button class="btn-hint" onclick="toggleHint(4)">üí° Hint</button>
      <button class="btn-solution" onclick="showSolution(4)">üëÅÔ∏è Solution</button>
    </div>
    <div class="hint-box" id="hint4">Use an object (Map or plain object) where keys are event names and values are arrays of callbacks. In <code>on()</code>, push the callback. In <code>emit()</code>, loop through and call each. In <code>off()</code>, filter it out.</div>
    <div class="exercise-output" id="output4"></div>
  </div>
</section>

<!-- Footer -->
<footer style="text-align:center;padding:4rem 2rem;color:var(--text-dim);border-top:1px solid rgba(127,90,240,.1)">
  <p style="font-size:1.5rem;margin-bottom:.5rem">üéâ You've completed the course!</p>
  <p>Keep practicing. Build real projects using classes.</p>
  <p style="margin-top:1rem;font-size:.85rem">ES6+ Classes Mastery ‚Äî Interactive JavaScript Learning</p>
</footer>

<script>
// ==================== CODE RUNNER ====================
function extractCode(codeBlock) {
  // Get text content from the code block, stripping HTML
  const temp = document.createElement('div');
  temp.innerHTML = codeBlock.innerHTML;
  let code = temp.textContent || temp.innerText;
  // Remove lines that try to access private fields from outside (syntax error in eval)
  code = code.replace(/console\.log\(wallet\.#balance\);?/g, 
    'throw new Error("Cannot access private field #balance from outside")');
  return code;
}

function runCode(btn) {
  const container = btn.closest('.code-container');
  const codeBlock = container.querySelector('.code-block');
  const output = container.querySelector('.output');
  const code = extractCode(codeBlock);
  
  output.classList.add('show');
  output.classList.remove('error');
  output.textContent = '';
  
  const logs = [];
  const origLog = console.log;
  console.log = (...args) => {
    logs.push(args.map(a => {
      if (typeof a === 'object' && a !== null) {
        try { return JSON.stringify(a); } catch(e) { return String(a); }
      }
      return String(a);
    }).join(' '));
  };
  
  try {
    eval(code);
    output.textContent = logs.join('\n') || '(no output)';
  } catch(e) {
    output.textContent = `‚ùå Error: ${e.message}`;
    output.classList.add('error');
  }
  
  console.log = origLog;
}

// ==================== TABS ====================
function switchTab(e, tabId) {
  const container = e.target.closest('.section') || e.target.parentElement.parentElement;
  container.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  container.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
  e.target.classList.add('active');
  document.getElementById(tabId).classList.add('active');
}

// ==================== INSTANCE CREATOR ====================
const carBrands = ['Tesla', 'BMW', 'Toyota', 'Honda', 'Ford', 'Audi', 'Mercedes', 'Porsche', 'Ferrari', 'Lamborghini'];
const carModels = ['Model S', 'X5', 'Camry', 'Civic', 'Mustang', 'A4', 'C-Class', '911', 'F40', 'Aventador'];
const carColors = ['#7f5af0', '#e53170', '#ff8906', '#2cb67d', '#82aaff', '#f78c6c', '#c792ea', '#c3e88d'];
let instanceCount = 0;

document.getElementById('createInstanceBtn').addEventListener('click', () => {
  const container = document.getElementById('instanceContainer');
  if (instanceCount === 0) container.innerHTML = '';
  
  const i = instanceCount % carBrands.length;
  const year = 2020 + Math.floor(Math.random() * 5);
  const color = carColors[instanceCount % carColors.length];
  
  const bubble = document.createElement('div');
  bubble.className = 'instance-bubble';
  bubble.style.borderColor = color;
  bubble.innerHTML = `
    <div class="inst-name" style="color:${color}">car${instanceCount + 1}</div>
    <div class="inst-props">
      brand: "${carBrands[i]}"<br>
      model: "${carModels[i]}"<br>
      year: ${year}
    </div>
  `;
  container.appendChild(bubble);
  instanceCount++;
});

document.getElementById('clearInstanceBtn').addEventListener('click', () => {
  const container = document.getElementById('instanceContainer');
  container.innerHTML = '<div style="color:var(--text-dim);font-style:italic">Click the button to create instances...</div>';
  instanceCount = 0;
});

// ==================== QUIZ ====================
const quizData = [
  {
    q: 'What does <code>typeof MyClass</code> return?',
    opts: ['"class"', '"object"', '"function"', '"undefined"'],
    correct: 2,
    explain: 'Classes in JavaScript are syntactic sugar over functions. Under the hood, a class IS a function, so typeof returns "function".'
  },
  {
    q: 'What happens if you use a class before its declaration?',
    opts: ['It works due to hoisting', 'ReferenceError (Temporal Dead Zone)', 'Returns undefined', 'SyntaxError'],
    correct: 1,
    explain: 'Unlike function declarations, class declarations are NOT hoisted. They exist in the Temporal Dead Zone from the start of the block until the declaration is reached.'
  },
  {
    q: 'In a child class constructor, when must you call <code>super()</code>?',
    opts: ['After using this', 'It\'s optional', 'Before using this', 'At the end of the constructor'],
    correct: 2,
    explain: 'You MUST call super() before accessing "this" in a child class constructor. The parent constructor initializes the instance first.'
  },
  {
    q: 'Where do class methods live?',
    opts: ['On each instance (copied)', 'On the class prototype (shared)', 'In global scope', 'In a closure'],
    correct: 1,
    explain: 'Methods defined in a class body are added to ClassName.prototype and shared by all instances. This is memory-efficient.'
  },
  {
    q: 'How do you call a parent\'s overridden method from a child class?',
    opts: ['parent.method()', 'this.parent.method()', 'super.method()', 'base.method()'],
    correct: 2,
    explain: 'Use super.methodName() to call the parent class version of an overridden method.'
  },
  {
    q: 'Static methods can be called on:',
    opts: ['Instances only', 'The class itself only', 'Both instances and the class', 'Neither ‚Äî they\'re just for decoration'],
    correct: 1,
    explain: 'Static methods belong to the class itself, not instances. Call them with ClassName.method(), not instance.method().'
  },
  {
    q: 'What does the # prefix do in a class field?',
    opts: ['Makes it a comment', 'Makes it truly private', 'Makes it static', 'Makes it immutable'],
    correct: 1,
    explain: 'The # prefix creates a truly private field that can only be accessed within the class body. Trying to access it from outside causes a SyntaxError.'
  },
  {
    q: 'How many constructors can a class have?',
    opts: ['Unlimited', 'Two (one default, one custom)', 'Exactly one', 'Zero ‚Äî constructors are optional'],
    correct: 2,
    explain: 'A class can have at most ONE constructor method. Having more than one throws a SyntaxError. Use static factory methods for alternate construction patterns.'
  },
  {
    q: 'What problem does this code have?<br><code>class Dog extends Animal { constructor(name, breed) { this.breed = breed; super(name); } }</code>',
    opts: ['Nothing, it\'s correct', 'super() must be called before using this', 'extends is wrong syntax', 'breed should be in Animal'],
    correct: 1,
    explain: 'In a child constructor, this.breed = breed comes before super(name). You MUST call super() before using "this", otherwise you get a ReferenceError.'
  },
  {
    q: 'Which is NOT true about ES6 classes?',
    opts: ['Class body runs in strict mode', 'Classes can be used as expressions', 'Class methods are enumerable by default', 'Classes must be invoked with new'],
    correct: 2,
    explain: 'Class methods are NON-enumerable by default (they won\'t show up in for...in loops). This is different from manually assigning methods to a prototype.'
  }
];

function buildQuiz() {
  const container = document.getElementById('quizContainer');
  container.innerHTML = quizData.map((q, i) => `
    <div class="quiz-q" id="quiz-${i}">
      <div class="q-text"><span class="q-num">${i + 1}</span><span>${q.q}</span></div>
      <div class="quiz-opts">
        ${q.opts.map((opt, j) => `
          <label>
            <input type="radio" name="q${i}" value="${j}">
            ${opt}
          </label>
        `).join('')}
      </div>
      <button class="btn-check" onclick="checkAnswer(${i})">Check Answer</button>
      <div class="quiz-explain" id="explain-${i}">${q.explain}</div>
    </div>
  `).join('');
}

function checkAnswer(qIdx) {
  const q = quizData[qIdx];
  const container = document.getElementById(`quiz-${qIdx}`);
  const selected = container.querySelector(`input[name="q${qIdx}"]:checked`);
  
  if (!selected) return;
  
  const labels = container.querySelectorAll('label');
  const inputs = container.querySelectorAll('input');
  inputs.forEach(inp => inp.disabled = true);
  
  labels.forEach((label, i) => {
    if (i === q.correct) label.classList.add('correct');
    else if (parseInt(selected.value) === i) label.classList.add('wrong');
  });
  
  document.getElementById(`explain-${qIdx}`).classList.add('show');
  container.querySelector('.btn-check').style.display = 'none';
  
  // Show score button if all answered
  const allAnswered = quizData.every((_, i) => {
    const cont = document.getElementById(`quiz-${i}`);
    return cont.querySelector('input:disabled');
  });
  if (allAnswered) document.getElementById('scoreBtn').style.display = 'inline-flex';
}

function calculateScore() {
  let correct = 0;
  quizData.forEach((q, i) => {
    const container = document.getElementById(`quiz-${i}`);
    const selected = container.querySelector(`input[name="q${i}"]:checked`);
    if (selected && parseInt(selected.value) === q.correct) correct++;
  });
  
  const pct = Math.round((correct / quizData.length) * 100);
  const scoreEl = document.getElementById('quizScore');
  scoreEl.style.display = 'block';
  document.getElementById('scoreNum').textContent = `${correct}/${quizData.length} (${pct}%)`;
  
  let msg = '';
  if (pct === 100) msg = 'üèÜ Perfect! You\'ve mastered ES6 Classes!';
  else if (pct >= 80) msg = 'üåü Excellent! You have a strong grasp of classes!';
  else if (pct >= 60) msg = 'üëç Good job! Review the sections you missed.';
  else msg = 'üìñ Keep studying! Re-read the sections and try again.';
  document.getElementById('scoreMsg').textContent = msg;
}

// ==================== EXERCISES ====================
const solutions = {
  1: `class Rectangle {
  constructor(width, height) {
    this.width = width;
    this.height = height;
  }

  get area() {
    return this.width * this.height;
  }

  get perimeter() {
    return 2 * (this.width + this.height);
  }

  isSquare() {
    return this.width === this.height;
  }

  toString() {
    return \`Rectangle(\${this.width}√ó\${this.height})\`;
  }
}`,
  2: `class Shape {
  constructor(color) {
    this.color = color;
  }

  describe() {
    return \`A \${this.color} shape\`;
  }
}

class Circle extends Shape {
  constructor(color, radius) {
    super(color);
    this.radius = radius;
  }

  area() {
    return Math.PI * this.radius ** 2;
  }

  describe() {
    return \`A \${this.color} circle with radius \${this.radius}\`;
  }
}

class Square extends Shape {
  constructor(color, side) {
    super(color);
    this.side = side;
  }

  area() {
    return this.side ** 2;
  }

  describe() {
    return \`A \${this.color} square with side \${this.side}\`;
  }
}`,
  3: `class UserDatabase {
  static users = [];

  static add(name, age) {
    const user = { name, age, id: UserDatabase.users.length + 1 };
    UserDatabase.users.push(user);
    return user;
  }

  static find(name) {
    return UserDatabase.users.find(u => u.name === name);
  }

  static count() {
    return UserDatabase.users.length;
  }

  static removeAll() {
    UserDatabase.users = [];
  }
}`,
  4: `class EventEmitter {
  constructor() {
    this.events = {};
  }

  on(event, callback) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(callback);
    return this;
  }

  emit(event, ...args) {
    if (this.events[event]) {
      this.events[event].forEach(cb => cb(...args));
    }
    return this;
  }

  off(event, callback) {
    if (this.events[event]) {
      this.events[event] = this.events[event].filter(cb => cb !== callback);
    }
    return this;
  }
}`
};

const tests = {
  1: (code) => {
    const results = [];
    try {
      eval(code);
      
      const r1 = new Rectangle(5, 3);
      results.push({ pass: r1.area === 15, msg: `area: expected 15, got ${r1.area}` });
      results.push({ pass: r1.perimeter === 16, msg: `perimeter: expected 16, got ${r1.perimeter}` });
      results.push({ pass: r1.isSquare() === false, msg: `isSquare(5,3): expected false, got ${r1.isSquare()}` });
      
      const r2 = new Rectangle(4, 4);
      results.push({ pass: r2.isSquare() === true, msg: `isSquare(4,4): expected true, got ${r2.isSquare()}` });
      results.push({ pass: r2.toString() === 'Rectangle(4√ó4)', msg: `toString: expected "Rectangle(4√ó4)", got "${r2.toString()}"` });
    } catch(e) {
      results.push({ pass: false, msg: `Error: ${e.message}` });
    }
    return results;
  },
  2: (code) => {
    const results = [];
    try {
      eval(code);
      
      const s = new Shape('red');
      results.push({ pass: s.describe() === 'A red shape', msg: `Shape.describe(): expected "A red shape", got "${s.describe()}"` });
      
      const c = new Circle('blue', 5);
      results.push({ pass: c instanceof Shape, msg: `Circle instanceof Shape: expected true` });
      results.push({ pass: c.color === 'blue', msg: `Circle.color: expected "blue", got "${c.color}"` });
      results.push({ pass: Math.abs(c.area() - 78.539) < 0.01, msg: `Circle.area(r=5): expected ~78.54, got ${c.area().toFixed(2)}` });
      results.push({ pass: c.describe() === 'A blue circle with radius 5', msg: `Circle.describe(): got "${c.describe()}"` });
      
      const sq = new Square('green', 4);
      results.push({ pass: sq instanceof Shape, msg: `Square instanceof Shape: expected true` });
      results.push({ pass: sq.area() === 16, msg: `Square.area(side=4): expected 16, got ${sq.area()}` });
      results.push({ pass: sq.describe().includes('green') && sq.describe().includes('4'), msg: `Square.describe() includes color and side` });
    } catch(e) {
      results.push({ pass: false, msg: `Error: ${e.message}` });
    }
    return results;
  },
  3: (code) => {
    const results = [];
    try {
      eval(code);
      UserDatabase.removeAll();
      
      results.push({ pass: UserDatabase.count() === 0, msg: `count() after removeAll: expected 0, got ${UserDatabase.count()}` });
      
      UserDatabase.add('Alice', 25);
      UserDatabase.add('Bob', 30);
      results.push({ pass: UserDatabase.count() === 2, msg: `count() after 2 adds: expected 2, got ${UserDatabase.count()}` });
      
      const alice = UserDatabase.find('Alice');
      results.push({ pass: alice && alice.name === 'Alice' && alice.age === 25, msg: `find("Alice"): expected {name:"Alice", age:25}` });
      results.push({ pass: alice && alice.id === 1, msg: `First user id: expected 1, got ${alice?.id}` });
      
      const nobody = UserDatabase.find('Nobody');
      results.push({ pass: nobody === undefined, msg: `find("Nobody"): expected undefined` });
      
      UserDatabase.removeAll();
      results.push({ pass: UserDatabase.count() === 0, msg: `count() after removeAll: expected 0` });
    } catch(e) {
      results.push({ pass: false, msg: `Error: ${e.message}` });
    }
    return results;
  },
  4: (code) => {
    const results = [];
    try {
      eval(code);
      const emitter = new EventEmitter();
      
      let received = [];
      const handler1 = (msg) => received.push('h1:' + msg);
      const handler2 = (msg) => received.push('h2:' + msg);
      
      emitter.on('test', handler1);
      emitter.on('test', handler2);
      emitter.emit('test', 'hello');
      
      results.push({ pass: received.length === 2, msg: `Two handlers called: expected 2 calls, got ${received.length}` });
      results.push({ pass: received[0] === 'h1:hello', msg: `First handler received "hello"` });
      results.push({ pass: received[1] === 'h2:hello', msg: `Second handler received "hello"` });
      
      received = [];
      emitter.off('test', handler1);
      emitter.emit('test', 'world');
      results.push({ pass: received.length === 1, msg: `After off(), only 1 handler called, got ${received.length}` });
      results.push({ pass: received[0] === 'h2:world', msg: `Remaining handler received "world"` });
      
      // Test emit with no handlers
      received = [];
      emitter.emit('nonexistent', 'data');
      results.push({ pass: received.length === 0, msg: `Emit nonexistent event: no errors` });
    } catch(e) {
      results.push({ pass: false, msg: `Error: ${e.message}` });
    }
    return results;
  }
};

function testExercise(num) {
  const code = document.getElementById(`editor${num}`).value;
  const outputEl = document.getElementById(`output${num}`);
  outputEl.classList.add('show');
  
  const results = tests[num](code);
  const passed = results.filter(r => r.pass).length;
  const total = results.length;
  
  outputEl.innerHTML = results.map(r => 
    `<div class="test-result ${r.pass ? 'pass' : 'fail'}">${r.pass ? '‚úÖ' : '‚ùå'} ${r.msg}</div>`
  ).join('') + `<div style="margin-top:1rem;font-weight:700;color:${passed===total?'var(--success)':'var(--primary)'}">${passed}/${total} tests passed</div>`;
}

function toggleHint(num) {
  document.getElementById(`hint${num}`).classList.toggle('show');
}

function showSolution(num) {
  document.getElementById(`editor${num}`).value = solutions[num];
}

// ==================== SCROLL EFFECTS ====================
// Progress bar
window.addEventListener('scroll', () => {
  const scrollTop = window.scrollY;
  const docHeight = document.documentElement.scrollHeight - window.innerHeight;
  const progress = (scrollTop / docHeight) * 100;
  document.getElementById('progressBar').style.width = progress + '%';
});

// Reveal on scroll
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
    }
  });
}, { threshold: 0.1 });

document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

// Tab support in textareas
document.querySelectorAll('.code-editor').forEach(editor => {
  editor.addEventListener('keydown', (e) => {
    if (e.key === 'Tab') {
      e.preventDefault();
      const start = editor.selectionStart;
      const end = editor.selectionEnd;
      editor.value = editor.value.substring(0, start) + '  ' + editor.value.substring(end);
      editor.selectionStart = editor.selectionEnd = start + 2;
    }
  });
});

// Init
buildQuiz();
</script>
</body>
</html>