<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced TypeScript Mastery</title>
<style>
  :root {
    --bg: #0f0f1a;
    --surface: #1a1a2e;
    --surface2: #16213e;
    --accent: #0f3460;
    --primary: #e94560;
    --secondary: #0fbcf9;
    --tertiary: #f5a623;
    --success: #00d2d3;
    --warning: #ff9f43;
    --error: #ee5a24;
    --text: #e0e0e0;
    --text-dim: #888;
    --border: #2a2a4a;
    --code-bg: #0d1117;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Segoe UI', system-ui, sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
  }

  /* HEADER */
  header {
    background: linear-gradient(135deg, var(--surface) 0%, var(--accent) 100%);
    padding: 20px 30px;
    border-bottom: 2px solid var(--primary);
    display: flex;
    align-items: center;
    gap: 15px;
    position: sticky;
    top: 0;
    z-index: 100;
  }

  header h1 {
    font-size: 1.5rem;
    background: linear-gradient(90deg, var(--primary), var(--secondary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  header .badge {
    background: var(--primary);
    color: white;
    padding: 3px 10px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700;
  }

  /* PROGRESS BAR */
  .progress-bar {
    height: 4px;
    background: var(--border);
    position: sticky;
    top: 70px;
    z-index: 99;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary), var(--secondary));
    transition: width 0.5s ease;
    width: 0%;
  }

  /* LAYOUT */
  .container {
    display: flex;
    min-height: calc(100vh - 74px);
  }

  /* SIDEBAR */
  .sidebar {
    width: 260px;
    background: var(--surface);
    border-right: 1px solid var(--border);
    padding: 20px 0;
    position: sticky;
    top: 78px;
    height: calc(100vh - 78px);
    overflow-y: auto;
    flex-shrink: 0;
  }

  .sidebar::-webkit-scrollbar { width: 4px; }
  .sidebar::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

  .sidebar-section {
    padding: 8px 20px 4px;
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--text-dim);
    font-weight: 700;
  }

  .nav-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 20px;
    cursor: pointer;
    transition: all 0.2s;
    border-left: 3px solid transparent;
    font-size: 0.88rem;
  }

  .nav-item:hover { background: var(--surface2); color: var(--secondary); }
  .nav-item.active {
    background: var(--surface2);
    border-left-color: var(--primary);
    color: var(--secondary);
  }

  .nav-item .icon { font-size: 1rem; }
  .nav-item .check {
    margin-left: auto;
    color: var(--success);
    font-size: 0.75rem;
    display: none;
  }
  .nav-item.done .check { display: block; }

  /* MAIN CONTENT */
  .main {
    flex: 1;
    padding: 30px;
    max-width: 900px;
    overflow-x: hidden;
  }

  /* SECTION */
  .section { display: none; animation: fadeIn 0.3s ease; }
  .section.active { display: block; }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* TYPOGRAPHY */
  h2 {
    font-size: 1.8rem;
    margin-bottom: 8px;
    background: linear-gradient(90deg, var(--secondary), var(--primary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  h3 {
    font-size: 1.1rem;
    color: var(--tertiary);
    margin: 20px 0 10px;
  }

  h4 { color: var(--secondary); margin: 15px 0 8px; font-size: 0.95rem; }

  p { line-height: 1.7; color: #ccc; margin-bottom: 12px; }

  .subtitle {
    color: var(--text-dim);
    margin-bottom: 25px;
    font-size: 0.9rem;
    border-bottom: 1px solid var(--border);
    padding-bottom: 15px;
  }

  /* CONCEPT CARD */
  .concept-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
    border-left: 4px solid var(--secondary);
    transition: transform 0.2s;
  }

  .concept-card:hover { transform: translateX(4px); }
  .concept-card.warning { border-left-color: var(--warning); }
  .concept-card.success { border-left-color: var(--success); }
  .concept-card.danger { border-left-color: var(--primary); }

  /* CODE BLOCKS */
  .code-block {
    background: var(--code-bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 16px;
    margin: 12px 0;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 0.85rem;
    line-height: 1.6;
    overflow-x: auto;
    position: relative;
  }

  .code-block .copy-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    background: var(--accent);
    border: none;
    color: var(--text-dim);
    padding: 4px 10px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.75rem;
    transition: all 0.2s;
  }
  .code-block .copy-btn:hover { color: var(--secondary); }

  /* Syntax highlighting */
  .kw { color: #ff79c6; }
  .type { color: #8be9fd; }
  .str { color: #f1fa8c; }
  .num { color: #bd93f9; }
  .com { color: #6272a4; font-style: italic; }
  .fn { color: #50fa7b; }
  .op { color: #ff79c6; }
  .dec { color: #ffb86c; }

  /* TABS */
  .tab-container { margin-bottom: 20px; }

  .tabs {
    display: flex;
    gap: 4px;
    background: var(--surface);
    padding: 6px;
    border-radius: 8px;
    margin-bottom: 0;
    flex-wrap: wrap;
  }

  .tab {
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.82rem;
    font-weight: 600;
    transition: all 0.2s;
    color: var(--text-dim);
    border: none;
    background: transparent;
  }

  .tab.active {
    background: var(--primary);
    color: white;
  }

  .tab:hover:not(.active) { color: var(--text); background: var(--border); }

  .tab-content { display: none; }
  .tab-content.active { display: block; }

  /* QUIZ */
  .quiz-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 20px;
  }

  .quiz-question {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 16px;
    color: var(--text);
  }

  .quiz-options {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .quiz-option {
    padding: 12px 16px;
    border: 2px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.9rem;
    background: var(--surface2);
    text-align: left;
    color: var(--text);
  }

  .quiz-option:hover:not([disabled]) {
    border-color: var(--secondary);
    background: var(--accent);
  }

  .quiz-option.correct { border-color: var(--success); background: rgba(0,210,211,0.1); }
  .quiz-option.wrong { border-color: var(--error); background: rgba(238,90,36,0.1); }

  .quiz-feedback {
    margin-top: 12px;
    padding: 10px 16px;
    border-radius: 8px;
    font-size: 0.9rem;
    display: none;
  }

  .quiz-feedback.show { display: block; }
  .quiz-feedback.correct { background: rgba(0,210,211,0.15); border: 1px solid var(--success); color: var(--success); }
  .quiz-feedback.wrong { background: rgba(238,90,36,0.15); border: 1px solid var(--error); color: #ff8a8a; }

  /* EXERCISE */
  .exercise-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 20px;
  }

  .exercise-card .exercise-title {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 12px;
  }

  .exercise-badge {
    background: var(--warning);
    color: #000;
    padding: 2px 10px;
    border-radius: 20px;
    font-size: 0.72rem;
    font-weight: 700;
  }

  .exercise-badge.hard { background: var(--primary); color: white; }
  .exercise-badge.easy { background: var(--success); color: #000; }

  textarea.code-input {
    width: 100%;
    background: var(--code-bg);
    border: 2px solid var(--border);
    color: var(--text);
    padding: 14px;
    border-radius: 8px;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 0.85rem;
    line-height: 1.6;
    resize: vertical;
    min-height: 160px;
    margin: 10px 0;
    transition: border-color 0.2s;
  }

  textarea.code-input:focus {
    outline: none;
    border-color: var(--secondary);
  }

  /* BUTTONS */
  .btn {
    padding: 10px 20px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: 600;
    transition: all 0.2s;
  }

  .btn-primary { background: var(--primary); color: white; }
  .btn-primary:hover { background: #c73652; transform: translateY(-1px); }

  .btn-secondary { background: var(--secondary); color: #000; }
  .btn-secondary:hover { opacity: 0.85; transform: translateY(-1px); }

  .btn-ghost {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text-dim);
  }
  .btn-ghost:hover { border-color: var(--secondary); color: var(--secondary); }

  .btn-row { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }

  /* PITFALLS */
  .pitfall {
    background: rgba(233, 69, 96, 0.08);
    border: 1px solid var(--primary);
    border-radius: 12px;
    padding: 16px 20px;
    margin-bottom: 16px;
  }

  .pitfall-title {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--primary);
    font-weight: 700;
    margin-bottom: 8px;
    font-size: 0.95rem;
  }

  .fix {
    background: rgba(0, 210, 211, 0.08);
    border: 1px solid var(--success);
    border-radius: 12px;
    padding: 16px 20px;
    margin-bottom: 16px;
  }

  .fix-title {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--success);
    font-weight: 700;
    margin-bottom: 8px;
    font-size: 0.95rem;
  }

  /* CHEAT SHEET */
  .cheat-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 16px;
    margin-bottom: 20px;
  }

  .cheat-item {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 16px;
    border-top: 3px solid var(--secondary);
  }

  .cheat-item h4 {
    font-size: 0.82rem;
    color: var(--tertiary);
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .cheat-item .cheat-code {
    font-family: 'Consolas', monospace;
    font-size: 0.8rem;
    color: var(--success);
    line-height: 1.5;
  }

  /* PROGRESS */
  .score-board {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    display: flex;
    gap: 20px;
    margin-bottom: 25px;
    flex-wrap: wrap;
  }

  .score-item {
    text-align: center;
    flex: 1;
    min-width: 80px;
  }

  .score-num {
    font-size: 2rem;
    font-weight: 700;
    background: linear-gradient(90deg, var(--secondary), var(--primary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .score-label { font-size: 0.75rem; color: var(--text-dim); }

  /* COMPARISON TABLE */
  table {
    width: 100%;
    border-collapse: collapse;
    margin: 15px 0;
    font-size: 0.88rem;
  }

  th {
    background: var(--surface2);
    color: var(--secondary);
    padding: 10px 14px;
    text-align: left;
    font-weight: 600;
  }

  td {
    padding: 10px 14px;
    border-bottom: 1px solid var(--border);
    color: #ccc;
  }

  tr:hover td { background: rgba(255,255,255,0.03); }

  /* ACCORDION */
  .accordion {
    border: 1px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 12px;
  }

  .accordion-header {
    padding: 14px 18px;
    background: var(--surface);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-weight: 600;
    transition: background 0.2s;
  }

  .accordion-header:hover { background: var(--surface2); }
  .accordion-header .arrow { transition: transform 0.3s; }
  .accordion-header.open .arrow { transform: rotate(180deg); }

  .accordion-body {
    background: var(--surface2);
    padding: 0 18px;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease, padding 0.3s;
  }

  .accordion-body.open {
    max-height: 1000px;
    padding: 16px 18px;
  }

  /* RESULT BOX */
  .result-box {
    padding: 14px;
    border-radius: 8px;
    margin-top: 12px;
    font-size: 0.9rem;
    display: none;
  }
  .result-box.show { display: block; }
  .result-box.pass { background: rgba(0,210,211,0.1); border: 1px solid var(--success); color: var(--success); }
  .result-box.fail { background: rgba(233,69,96,0.1); border: 1px solid var(--primary); color: #ff8a8a; }
  .result-box.info { background: rgba(15,188,249,0.1); border: 1px solid var(--secondary); color: var(--secondary); }

  /* TOOLTIP */
  .tooltip {
    position: relative;
    display: inline-block;
    border-bottom: 1px dashed var(--secondary);
    cursor: help;
  }

  .tooltip .tip {
    visibility: hidden;
    background: var(--surface2);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 0.8rem;
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    white-space: nowrap;
    z-index: 10;
    opacity: 0;
    transition: opacity 0.2s;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
  }

  .tooltip:hover .tip { visibility: visible; opacity: 1; }

  /* FLOW DIAGRAM */
  .flow {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
    margin: 15px 0;
    padding: 16px;
    background: var(--surface);
    border-radius: 10px;
  }

  .flow-box {
    background: var(--accent);
    border: 1px solid var(--secondary);
    color: var(--secondary);
    padding: 8px 14px;
    border-radius: 6px;
    font-family: monospace;
    font-size: 0.82rem;
    font-weight: 600;
  }

  .flow-arrow { color: var(--text-dim); font-size: 1.2rem; }

  /* HIGHLIGHT BOX */
  .highlight-box {
    background: rgba(245, 166, 35, 0.1);
    border: 1px solid var(--tertiary);
    border-radius: 8px;
    padding: 14px 18px;
    margin: 12px 0;
    font-size: 0.9rem;
  }

  .highlight-box strong { color: var(--tertiary); }

  /* NAV BUTTONS */
  .nav-buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid var(--border);
  }

  /* CHECKLIST */
  .checklist { list-style: none; }
  .checklist li {
    padding: 8px 0;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.9rem;
    cursor: pointer;
  }
  .checklist li:hover { color: var(--secondary); }
  .checklist li .check-box {
    width: 18px;
    height: 18px;
    border: 2px solid var(--border);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    flex-shrink: 0;
    transition: all 0.2s;
  }
  .checklist li.checked .check-box {
    background: var(--success);
    border-color: var(--success);
    color: #000;
  }

  /* FILL BLANK */
  .blank-input {
    background: var(--code-bg);
    border: 2px solid var(--secondary);
    color: var(--secondary);
    font-family: monospace;
    font-size: 0.9rem;
    padding: 2px 8px;
    border-radius: 4px;
    width: auto;
    min-width: 80px;
  }

  .blank-input:focus { outline: none; border-color: var(--tertiary); }

  /* MOBILE */
  @media (max-width: 768px) {
    .sidebar { display: none; }
    .main { padding: 20px; }
    h2 { font-size: 1.4rem; }
    .cheat-grid { grid-template-columns: 1fr; }
    .score-board { gap: 10px; }
  }

  /* SCROLLBAR */
  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: var(--bg); }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

  /* SECTION INTRO BANNER */
  .section-banner {
    background: linear-gradient(135deg, var(--surface) 0%, var(--accent) 100%);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 24px;
    margin-bottom: 28px;
    display: flex;
    align-items: center;
    gap: 20px;
  }

  .section-icon { font-size: 3rem; }
  .section-banner h2 { margin-bottom: 4px; }

  /* INTERVIEW TIP */
  .interview-tip {
    background: rgba(15, 188, 249, 0.07);
    border: 1px solid rgba(15, 188, 249, 0.3);
    border-radius: 10px;
    padding: 14px 18px;
    margin: 14px 0;
    font-size: 0.88rem;
  }
  .interview-tip strong { color: var(--secondary); display: block; margin-bottom: 4px; }
</style>
</head>
<body>

<header>
  <div>üî∑</div>
  <h1>Advanced TypeScript Mastery</h1>
  <span class="badge">INTERVIEW READY</span>
  <div style="margin-left:auto; display:flex; align-items:center; gap:10px;">
    <span style="font-size:0.82rem; color:var(--text-dim)">Score:</span>
    <span id="totalScore" style="font-size:1.1rem; font-weight:700; color:var(--tertiary)">0</span>
  </div>
</header>

<div class="progress-bar">
  <div class="progress-fill" id="progressFill"></div>
</div>

<div class="container">
  <!-- SIDEBAR -->
  <nav class="sidebar">
    <div class="sidebar-section">üìö Learn</div>
    <div class="nav-item active" onclick="showSection('intro')">
      <span class="icon">üöÄ</span> Introduction
      <span class="check">‚úì</span>
    </div>
    <div class="nav-item" onclick="showSection('generics')">
      <span class="icon">üß¨</span> Advanced Generics
      <span class="check">‚úì</span>
    </div>
    <div class="nav-item" onclick="showSection('utility')">
      <span class="icon">üõ†Ô∏è</span> Utility Types
      <span class="check">‚úì</span>
    </div>
    <div class="nav-item" onclick="showSection('conditional')">
      <span class="icon">üîÄ</span> Conditional Types
      <span class="check">‚úì</span>
    </div>
    <div class="nav-item" onclick="showSection('guards')">
      <span class="icon">üõ°Ô∏è</span> Type Guards
      <span class="check">‚úì</span>
    </div>
    <div class="nav-item" onclick="showSection('decorators')">
      <span class="icon">üé®</span> Decorators
      <span class="check">‚úì</span>
    </div>
    <div class="nav-item" onclick="showSection('gymnastics')">
      <span class="icon">ü§∏</span> Type Gymnastics
      <span class="check">‚úì</span>
    </div>

    <div class="sidebar-section">üí™ Practice</div>
    <div class="nav-item" onclick="showSection('exercises')">
      <span class="icon">‚úèÔ∏è</span> Exercises
      <span class="check">‚úì</span>
    </div>
    <div class="nav-item" onclick="showSection('quiz')">
      <span class="icon">üß†</span> Quiz
      <span class="check">‚úì</span>
    </div>

    <div class="sidebar-section">‚ö†Ô∏è Pitfalls</div>
    <div class="nav-item" onclick="showSection('pitfalls')">
      <span class="icon">üö®</span> Common Mistakes
      <span class="check">‚úì</span>
    </div>

    <div class="sidebar-section">üìã Reference</div>
    <div class="nav-item" onclick="showSection('cheatsheet')">
      <span class="icon">üìú</span> Cheat Sheet
      <span class="check">‚úì</span>
    </div>
    <div class="nav-item" onclick="showSection('interview')">
      <span class="icon">üíº</span> Interview Prep
      <span class="check">‚úì</span>
    </div>
  </nav>

  <!-- MAIN -->
  <main class="main">

    <!-- =================== INTRO =================== -->
    <section class="section active" id="section-intro">
      <div class="section-banner">
        <div class="section-icon">üöÄ</div>
        <div>
          <h2>Advanced TypeScript</h2>
          <p class="subtitle" style="margin:0; border:none; padding:0">Master the type system to become unstoppable</p>
        </div>
      </div>

      <div class="score-board">
        <div class="score-item">
          <div class="score-num" id="quizScore">0</div>
          <div class="score-label">Quiz Points</div>
        </div>
        <div class="score-item">
          <div class="score-num" id="exerciseScore">0</div>
          <div class="score-label">Exercises</div>
        </div>
        <div class="score-item">
          <div class="score-num" id="sectionsRead">0</div>
          <div class="score-label">Sections Read</div>
        </div>
        <div class="score-item">
          <div class="score-num" id="streakCount">0</div>
          <div class="score-label">üî• Streak</div>
        </div>
      </div>

      <h3>What Is This About?</h3>
      <p>TypeScript's type system is one of the most powerful in any mainstream language. Advanced TypeScript lets you write code that's both <strong style="color:var(--secondary)">completely type-safe</strong> and incredibly expressive ‚Äî catching bugs at compile time that other languages would only catch at runtime.</p>

      <div class="concept-card">
        <h4>üéØ What You'll Master</h4>
        <ul style="padding-left: 20px; line-height: 2;">
          <li><strong style="color:var(--secondary)">Advanced Generics</strong> ‚Äî Constraints, inference, variadic tuples</li>
          <li><strong style="color:var(--secondary)">Utility Types</strong> ‚Äî Partial, Required, Pick, Omit, Record, and more</li>
          <li><strong style="color:var(--secondary)">Conditional Types</strong> ‚Äî Type-level if/else logic</li>
          <li><strong style="color:var(--secondary)">Type Guards</strong> ‚Äî Narrow types at runtime safely</li>
          <li><strong style="color:var(--secondary)">Decorators</strong> ‚Äî Meta-programming in TypeScript</li>
          <li><strong style="color:var(--secondary)">Type Gymnastics</strong> ‚Äî Advanced mapped, template literal types</li>
        </ul>
      </div>

      <h3>The Big Picture ‚Äî Why This Matters</h3>
      <div class="flow">
        <div class="flow-box">Your Code</div>
        <div class="flow-arrow">‚Üí</div>
        <div class="flow-box">TypeScript Compiler</div>
        <div class="flow-arrow">‚Üí</div>
        <div class="flow-box">Type Checking</div>
        <div class="flow-arrow">‚Üí</div>
        <div class="flow-box">JavaScript Output</div>
      </div>

      <p>The type system runs <em>entirely at compile time</em>. Advanced types let you encode complex constraints, transform types, and catch entire classes of bugs without writing any runtime code.</p>

      <div class="highlight-box">
        <strong>üí° Key Insight:</strong> TypeScript's type system is <em>Turing complete</em> ‚Äî you can theoretically compute anything at the type level. This is what "type gymnastics" means!
      </div>

      <h3>Quick Level Check ‚Äî What Level Are You?</h3>
      <div class="concept-card success">
        <h4>‚úÖ You should know before starting:</h4>
        <ul style="padding-left:20px; line-height: 1.9;">
          <li>Basic TypeScript ‚Äî interfaces, types, enums</li>
          <li>Basic Generics ‚Äî <code style="color:var(--success)">&lt;T&gt;</code> syntax</li>
          <li>Union and Intersection types</li>
          <li>ES6+ JavaScript</li>
        </ul>
      </div>

      <div class="nav-buttons">
        <div></div>
        <button class="btn btn-primary" onclick="showSection('generics')">Start Learning ‚Üí</button>
      </div>
    </section>

    <!-- =================== GENERICS =================== -->
    <section class="section" id="section-generics">
      <div class="section-banner">
        <div class="section-icon">üß¨</div>
        <div>
          <h2>Advanced Generics</h2>
          <p class="subtitle" style="margin:0; border:none; padding:0">Write code that works for any type, with rules</p>
        </div>
      </div>

      <div class="tab-container">
        <div class="tabs">
          <button class="tab active" onclick="switchTab(this, 'gen-basics')">Basics Recap</button>
          <button class="tab" onclick="switchTab(this, 'gen-constraints')">Constraints</button>
          <button class="tab" onclick="switchTab(this, 'gen-inference')">Inference</button>
          <button class="tab" onclick="switchTab(this, 'gen-advanced')">Advanced</button>
        </div>

        <div id="gen-basics" class="tab-content active">
          <h3>Generic Refresher</h3>
          <p>Generics let you write a function or class that works with <em>any type</em>, preserving type information:</p>
          <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// Without generics ‚Äî loses type info</span>
<span class="kw">function</span> <span class="fn">identity</span>(arg: <span class="type">any</span>): <span class="type">any</span> {
  <span class="kw">return</span> arg;  <span class="com">// Return type is 'any' ‚Äî no help!</span>
}

<span class="com">// With generics ‚Äî preserves type</span>
<span class="kw">function</span> <span class="fn">identity</span>&lt;<span class="type">T</span>&gt;(arg: <span class="type">T</span>): <span class="type">T</span> {
  <span class="kw">return</span> arg;  <span class="com">// Return type matches input exactly</span>
}

<span class="kw">const</span> str = <span class="fn">identity</span>(<span class="str">"hello"</span>);  <span class="com">// TypeScript knows: string</span>
<span class="kw">const</span> num = <span class="fn">identity</span>(<span class="num">42</span>);       <span class="com">// TypeScript knows: number</span></div>
        </div>

        <div id="gen-constraints" class="tab-content">
          <h3>Generic Constraints ‚Äî <code>extends</code></h3>
          <p>Use <code>extends</code> to say "T must have at least these properties":</p>
          <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// Constrain T to objects with a 'length' property</span>
<span class="kw">function</span> <span class="fn">getLength</span>&lt;<span class="type">T</span> <span class="kw">extends</span> { length: <span class="type">number</span> }&gt;(arg: <span class="type">T</span>): <span class="type">number</span> {
  <span class="kw">return</span> arg.length;
}

<span class="fn">getLength</span>(<span class="str">"hello"</span>);     <span class="com">// ‚úÖ string has .length</span>
<span class="fn">getLength</span>([<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>]);   <span class="com">// ‚úÖ array has .length</span>
<span class="fn">getLength</span>(<span class="num">42</span>);          <span class="com">// ‚ùå Error! number has no .length</span>

<span class="com">// ----------------------------------------</span>
<span class="com">// Key constraint: extends keyof</span>
<span class="kw">function</span> <span class="fn">getProperty</span>&lt;<span class="type">T</span>, <span class="type">K</span> <span class="kw">extends</span> <span class="kw">keyof</span> <span class="type">T</span>&gt;(obj: <span class="type">T</span>, key: <span class="type">K</span>): <span class="type">T</span>[<span class="type">K</span>] {
  <span class="kw">return</span> obj[key];
}

<span class="kw">const</span> user = { name: <span class="str">"Alice"</span>, age: <span class="num">30</span> };
<span class="fn">getProperty</span>(user, <span class="str">"name"</span>);  <span class="com">// ‚úÖ Returns string</span>
<span class="fn">getProperty</span>(user, <span class="str">"age"</span>);   <span class="com">// ‚úÖ Returns number</span>
<span class="fn">getProperty</span>(user, <span class="str">"foo"</span>);   <span class="com">// ‚ùå Error! 'foo' not in user</span></div>

          <h3>Multiple Constraints</h3>
          <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// T extends multiple interfaces using intersection (&)</span>
<span class="kw">interface</span> <span class="type">Printable</span> { <span class="fn">print</span>(): <span class="type">void</span>; }
<span class="kw">interface</span> <span class="type">Loggable</span>  { <span class="fn">log</span>(): <span class="type">void</span>; }

<span class="kw">function</span> <span class="fn">process</span>&lt;<span class="type">T</span> <span class="kw">extends</span> <span class="type">Printable</span> &amp; <span class="type">Loggable</span>&gt;(item: <span class="type">T</span>): <span class="type">void</span> {
  item.<span class="fn">print</span>();
  item.<span class="fn">log</span>();
}</div>
        </div>

        <div id="gen-inference" class="tab-content">
          <h3>Type Inference with <code>infer</code></h3>
          <p><code>infer</code> lets TypeScript extract a type from a more complex type ‚Äî used inside conditional types:</p>
          <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// Extract return type of a function</span>
<span class="kw">type</span> <span class="type">ReturnType</span>&lt;<span class="type">T</span>&gt; = <span class="type">T</span> <span class="kw">extends</span> (...args: <span class="type">any</span>[]) =&gt; <span class="kw">infer</span> <span class="type">R</span> ? <span class="type">R</span> : <span class="type">never</span>;

<span class="kw">type</span> <span class="type">A</span> = <span class="type">ReturnType</span>&lt;() =&gt; <span class="type">string</span>&gt;;        <span class="com">// string</span>
<span class="kw">type</span> <span class="type">B</span> = <span class="type">ReturnType</span>&lt;() =&gt; <span class="type">number</span>&gt;;        <span class="com">// number</span>
<span class="kw">type</span> <span class="type">C</span> = <span class="type">ReturnType</span>&lt;(<span class="num">x</span>: <span class="type">number</span>) =&gt; <span class="type">boolean</span>&gt;; <span class="com">// boolean</span>

<span class="com">// Extract Promise value type</span>
<span class="kw">type</span> <span class="type">Awaited</span>&lt;<span class="type">T</span>&gt; = <span class="type">T</span> <span class="kw">extends</span> <span class="type">Promise</span>&lt;<span class="kw">infer</span> <span class="type">U</span>&gt; ? <span class="type">U</span> : <span class="type">T</span>;

<span class="kw">type</span> <span class="type">D</span> = <span class="type">Awaited</span>&lt;<span class="type">Promise</span>&lt;<span class="type">string</span>&gt;&gt;; <span class="com">// string</span>
<span class="kw">type</span> <span class="type">E</span> = <span class="type">Awaited</span>&lt;<span class="type">number</span>&gt;;          <span class="com">// number (not a Promise)</span>

<span class="com">// Extract first argument type</span>
<span class="kw">type</span> <span class="type">FirstArg</span>&lt;<span class="type">T</span>&gt; = <span class="type">T</span> <span class="kw">extends</span> (first: <span class="kw">infer</span> <span class="type">F</span>, ...rest: <span class="type">any</span>[]) =&gt; <span class="type">any</span> ? <span class="type">F</span> : <span class="type">never</span>;

<span class="kw">type</span> <span class="type">F</span> = <span class="type">FirstArg</span>&lt;(<span class="num">x</span>: <span class="type">string</span>, <span class="num">y</span>: <span class="type">number</span>) =&gt; <span class="type">void</span>&gt;; <span class="com">// string</span></div>
        </div>

        <div id="gen-advanced" class="tab-content">
          <h3>Variadic Tuple Types</h3>
          <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// Spread generics in tuples (TS 4.0+)</span>
<span class="kw">type</span> <span class="type">Concat</span>&lt;<span class="type">T</span> <span class="kw">extends</span> <span class="type">unknown</span>[], <span class="type">U</span> <span class="kw">extends</span> <span class="type">unknown</span>[]&gt; = [...<span class="type">T</span>, ...<span class="type">U</span>];

<span class="kw">type</span> <span class="type">AB</span> = <span class="type">Concat</span>&lt;[<span class="type">string</span>, <span class="type">number</span>], [<span class="type">boolean</span>]&gt;;
<span class="com">// Result: [string, number, boolean]</span>

<span class="com">// Generic rest parameters</span>
<span class="kw">function</span> <span class="fn">tail</span>&lt;<span class="type">T</span>, <span class="type">Rest</span> <span class="kw">extends</span> <span class="type">unknown</span>[]&gt;([_first, ...rest]: [<span class="type">T</span>, ...<span class="type">Rest</span>]): <span class="type">Rest</span> {
  <span class="kw">return</span> rest;
}

<span class="kw">const</span> result = <span class="fn">tail</span>([<span class="num">1</span>, <span class="str">"two"</span>, <span class="num">true</span>]);
<span class="com">// Type: [string, boolean]</span>

<span class="com">// ----------------------------------------</span>
<span class="com">// Default Generic Parameters (TS 2.3+)</span>
<span class="kw">interface</span> <span class="type">Container</span>&lt;<span class="type">T</span> = <span class="type">string</span>&gt; {
  value: <span class="type">T</span>;
}

<span class="kw">const</span> a: <span class="type">Container</span> = { value: <span class="str">"hello"</span> };      <span class="com">// T defaults to string</span>
<span class="kw">const</span> b: <span class="type">Container</span>&lt;<span class="type">number</span>&gt; = { value: <span class="num">42</span> };    <span class="com">// T = number</span></div>

          <div class="interview-tip">
            <strong>üíº Interview Question: "What is the difference between T extends any and T = any?"</strong>
            <code>T extends any</code> is a constraint (T must be assignable to any ‚Äî which is everything). <code>T = any</code> is a <em>default</em> value for T if not specified. They look similar but serve completely different purposes!
          </div>
        </div>
      </div>

      <div class="nav-buttons">
        <button class="btn btn-ghost" onclick="showSection('intro')">‚Üê Back</button>
        <button class="btn btn-primary" onclick="showSection('utility')">Utility Types ‚Üí</button>
      </div>
    </section>

    <!-- =================== UTILITY TYPES =================== -->
    <section class="section" id="section-utility">
      <div class="section-banner">
        <div class="section-icon">üõ†Ô∏è</div>
        <div>
          <h2>Utility Types</h2>
          <p class="subtitle" style="margin:0; border:none; padding:0">Built-in type transformers ‚Äî know all of them!</p>
        </div>
      </div>

      <p>TypeScript ships with a set of <strong>global utility types</strong> that transform types in common ways. They're implemented using advanced TypeScript features internally.</p>

      <table>
        <tr>
          <th>Utility Type</th>
          <th>What It Does</th>
          <th>Example</th>
        </tr>
        <tr>
          <td><code style="color:var(--success)">Partial&lt;T&gt;</code></td>
          <td>All properties become optional</td>
          <td><code style="color:var(--text-dim)">Partial&lt;User&gt;</code></td>
        </tr>
        <tr>
          <td><code style="color:var(--success)">Required&lt;T&gt;</code></td>
          <td>All properties become required</td>
          <td><code style="color:var(--text-dim)">Required&lt;Config&gt;</code></td>
        </tr>
        <tr>
          <td><code style="color:var(--success)">Readonly&lt;T&gt;</code></td>
          <td>All properties become readonly</td>
          <td><code style="color:var(--text-dim)">Readonly&lt;User&gt;</code></td>
        </tr>
        <tr>
          <td><code style="color:var(--success)">Pick&lt;T, K&gt;</code></td>
          <td>Keep only specified keys</td>
          <td><code style="color:var(--text-dim)">Pick&lt;User, 'name'|'email'&gt;</code></td>
        </tr>
        <tr>
          <td><code style="color:var(--success)">Omit&lt;T, K&gt;</code></td>
          <td>Remove specified keys</td>
          <td><code style="color:var(--text-dim)">Omit&lt;User, 'password'&gt;</code></td>
        </tr>
        <tr>
          <td><code style="color:var(--success)">Record&lt;K, V&gt;</code></td>
          <td>Object type with keys K and values V</td>
          <td><code style="color:var(--text-dim)">Record&lt;string, number&gt;</code></td>
        </tr>
        <tr>
          <td><code style="color:var(--success)">Exclude&lt;T, U&gt;</code></td>
          <td>Remove U from union T</td>
          <td><code style="color:var(--text-dim)">Exclude&lt;'a'|'b'|'c', 'a'&gt;</code></td>
        </tr>
        <tr>
          <td><code style="color:var(--success)">Extract&lt;T, U&gt;</code></td>
          <td>Keep only U from union T</td>
          <td><code style="color:var(--text-dim)">Extract&lt;'a'|'b', 'a'|'c'&gt;</code></td>
        </tr>
        <tr>
          <td><code style="color:var(--success)">NonNullable&lt;T&gt;</code></td>
          <td>Remove null and undefined</td>
          <td><code style="color:var(--text-dim)">NonNullable&lt;string|null&gt;</code></td>
        </tr>
        <tr>
          <td><code style="color:var(--success)">ReturnType&lt;T&gt;</code></td>
          <td>Return type of function T</td>
          <td><code style="color:var(--text-dim)">ReturnType&lt;typeof fn&gt;</code></td>
        </tr>
        <tr>
          <td><code style="color:var(--success)">Parameters&lt;T&gt;</code></td>
          <td>Parameter types as tuple</td>
          <td><code style="color:var(--text-dim)">Parameters&lt;typeof fn&gt;</code></td>
        </tr>
        <tr>
          <td><code style="color:var(--success)">Awaited&lt;T&gt;</code></td>
          <td>Unwrap Promise type</td>
          <td><code style="color:var(--text-dim)">Awaited&lt;Promise&lt;string&gt;&gt;</code></td>
        </tr>
      </table>

      <h3>Deep Dive ‚Äî Each Utility With Examples</h3>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          üì¶ Partial & Required <span class="arrow">‚ñº</span>
        </div>
        <div class="accordion-body">
          <div class="code-block">
<span class="kw">interface</span> <span class="type">User</span> {
  id: <span class="type">number</span>;
  name: <span class="type">string</span>;
  email: <span class="type">string</span>;
}

<span class="com">// Partial ‚Äî great for update functions</span>
<span class="kw">function</span> <span class="fn">updateUser</span>(id: <span class="type">number</span>, updates: <span class="type">Partial</span>&lt;<span class="type">User</span>&gt;) {
  <span class="com">// updates can have any or none of User's properties</span>
}
<span class="fn">updateUser</span>(<span class="num">1</span>, { name: <span class="str">"Bob"</span> });         <span class="com">// ‚úÖ</span>
<span class="fn">updateUser</span>(<span class="num">1</span>, { name: <span class="str">"Bob"</span>, email: <span class="str">"b@b.com"</span> }); <span class="com">// ‚úÖ</span>

<span class="com">// How Partial is implemented internally:</span>
<span class="kw">type</span> <span class="type">MyPartial</span>&lt;<span class="type">T</span>&gt; = {
  [<span class="type">P</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span>]?: <span class="type">T</span>[<span class="type">P</span>];
};

<span class="com">// Required ‚Äî the opposite</span>
<span class="kw">interface</span> <span class="type">Config</span> {
  debug?: <span class="type">boolean</span>;
  verbose?: <span class="type">boolean</span>;
}
<span class="kw">type</span> <span class="type">StrictConfig</span> = <span class="type">Required</span>&lt;<span class="type">Config</span>&gt;;
<span class="com">// { debug: boolean; verbose: boolean } ‚Äî no optionals!</span></div>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          üéØ Pick & Omit <span class="arrow">‚ñº</span>
        </div>
        <div class="accordion-body">
          <div class="code-block">
<span class="kw">interface</span> <span class="type">User</span> {
  id: <span class="type">number</span>;
  name: <span class="type">string</span>;
  email: <span class="type">string</span>;
  password: <span class="type">string</span>;
  createdAt: <span class="type">Date</span>;
}

<span class="com">// Pick ‚Äî I want ONLY these fields</span>
<span class="kw">type</span> <span class="type">PublicUser</span> = <span class="type">Pick</span>&lt;<span class="type">User</span>, <span class="str">"id"</span> | <span class="str">"name"</span> | <span class="str">"email"</span>&gt;;
<span class="com">// { id: number; name: string; email: string }</span>

<span class="com">// Omit ‚Äî I want EVERYTHING EXCEPT these fields</span>
<span class="kw">type</span> <span class="type">SafeUser</span> = <span class="type">Omit</span>&lt;<span class="type">User</span>, <span class="str">"password"</span>&gt;;
<span class="com">// { id, name, email, createdAt } ‚Äî no password!</span>

<span class="com">// üí° Rule of thumb:</span>
<span class="com">// Few fields to keep ‚Üí Pick</span>
<span class="com">// Few fields to remove ‚Üí Omit</span>

<span class="com">// How Pick is implemented:</span>
<span class="kw">type</span> <span class="type">MyPick</span>&lt;<span class="type">T</span>, <span class="type">K</span> <span class="kw">extends</span> <span class="kw">keyof</span> <span class="type">T</span>&gt; = {
  [<span class="type">P</span> <span class="kw">in</span> <span class="type">K</span>]: <span class="type">T</span>[<span class="type">P</span>];
};</div>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          üóÇÔ∏è Record <span class="arrow">‚ñº</span>
        </div>
        <div class="accordion-body">
          <div class="code-block">
<span class="com">// Record&lt;Keys, Value&gt; ‚Äî creates a mapped object type</span>
<span class="kw">type</span> <span class="type">PageMap</span> = <span class="type">Record</span>&lt;<span class="str">"home"</span> | <span class="str">"about"</span> | <span class="str">"contact"</span>, <span class="type">string</span>&gt;;
<span class="com">// { home: string; about: string; contact: string }</span>

<span class="com">// Dynamic key mapping</span>
<span class="kw">type</span> <span class="type">CacheMap</span>&lt;<span class="type">T</span>&gt; = <span class="type">Record</span>&lt;<span class="type">string</span>, <span class="type">T</span>&gt;;
<span class="kw">const</span> cache: <span class="type">CacheMap</span>&lt;<span class="type">number</span>&gt; = {};
cache[<span class="str">"key"</span>] = <span class="num">42</span>;

<span class="com">// Very common pattern ‚Äî mapping enum values to data</span>
<span class="kw">type</span> <span class="type">Status</span> = <span class="str">"pending"</span> | <span class="str">"active"</span> | <span class="str">"inactive"</span>;
<span class="kw">type</span> <span class="type">StatusConfig</span> = <span class="type">Record</span>&lt;<span class="type">Status</span>, { label: <span class="type">string</span>; color: <span class="type">string</span> }&gt;;

<span class="kw">const</span> statuses: <span class="type">StatusConfig</span> = {
  pending:  { label: <span class="str">"Pending"</span>,  color: <span class="str">"yellow"</span> },
  active:   { label: <span class="str">"Active"</span>,   color: <span class="str">"green"</span>  },
  inactive: { label: <span class="str">"Inactive"</span>, color: <span class="str">"gray"</span>   },
  <span class="com">// TS will ERROR if you miss one! Great exhaustiveness check</span>
};</div>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          üîç Exclude, Extract & NonNullable <span class="arrow">‚ñº</span>
        </div>
        <div class="accordion-body">
          <div class="code-block">
<span class="kw">type</span> <span class="type">Colors</span> = <span class="str">"red"</span> | <span class="str">"green"</span> | <span class="str">"blue"</span> | <span class="str">"yellow"</span>;

<span class="com">// Exclude ‚Äî remove from union</span>
<span class="kw">type</span> <span class="type">CoolColors</span> = <span class="type">Exclude</span>&lt;<span class="type">Colors</span>, <span class="str">"yellow"</span>&gt;;
<span class="com">// "red" | "green" | "blue"</span>

<span class="com">// Extract ‚Äî keep only matching</span>
<span class="kw">type</span> <span class="type">Primary</span> = <span class="type">Extract</span>&lt;<span class="type">Colors</span>, <span class="str">"red"</span> | <span class="str">"blue"</span>&gt;;
<span class="com">// "red" | "blue"</span>

<span class="com">// NonNullable ‚Äî removes null and undefined</span>
<span class="kw">type</span> <span class="type">MaybeString</span> = <span class="type">string</span> | <span class="type">null</span> | <span class="type">undefined</span>;
<span class="kw">type</span> <span class="type">DefinitelyString</span> = <span class="type">NonNullable</span>&lt;<span class="type">MaybeString</span>&gt;;
<span class="com">// string</span>

<span class="com">// Implementation of Exclude:</span>
<span class="kw">type</span> <span class="type">MyExclude</span>&lt;<span class="type">T</span>, <span class="type">U</span>&gt; = <span class="type">T</span> <span class="kw">extends</span> <span class="type">U</span> ? <span class="kw">never</span> : <span class="type">T</span>;
<span class="com">// "never" is removed from unions automatically!</span></div>
        </div>
      </div>

      <div class="nav-buttons">
        <button class="btn btn-ghost" onclick="showSection('generics')">‚Üê Generics</button>
        <button class="btn btn-primary" onclick="showSection('conditional')">Conditional Types ‚Üí</button>
      </div>
    </section>

    <!-- =================== CONDITIONAL TYPES =================== -->
    <section class="section" id="section-conditional">
      <div class="section-banner">
        <div class="section-icon">üîÄ</div>
        <div>
          <h2>Conditional Types</h2>
          <p class="subtitle" style="margin:0; border:none; padding:0">If/else logic at the type level</p>
        </div>
      </div>

      <h3>The Syntax</h3>
      <div class="concept-card">
        <p style="font-family: monospace; font-size: 1.1rem; color: var(--secondary)">
          T extends U ? TrueType : FalseType
        </p>
        <p style="margin-top: 10px">Read as: <em>"If T is assignable to U, the result is TrueType, otherwise FalseType"</em></p>
      </div>

      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// Simple example</span>
<span class="kw">type</span> <span class="type">IsString</span>&lt;<span class="type">T</span>&gt; = <span class="type">T</span> <span class="kw">extends</span> <span class="type">string</span> ? <span class="str">"yes"</span> : <span class="str">"no"</span>;

<span class="kw">type</span> <span class="type">A</span> = <span class="type">IsString</span>&lt;<span class="type">string</span>&gt;;  <span class="com">// "yes"</span>
<span class="kw">type</span> <span class="type">B</span> = <span class="type">IsString</span>&lt;<span class="type">number</span>&gt;;  <span class="com">// "no"</span>
<span class="kw">type</span> <span class="type">C</span> = <span class="type">IsString</span>&lt;<span class="str">"hello"</span>&gt;; <span class="com">// "yes" (string literal extends string)</span></div>

      <h3>Distributive Conditional Types</h3>
      <p>When T is a union, conditional types <em>distribute</em> over each member automatically:</p>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="kw">type</span> <span class="type">ToArray</span>&lt;<span class="type">T</span>&gt; = <span class="type">T</span> <span class="kw">extends</span> <span class="type">any</span> ? <span class="type">T</span>[] : <span class="kw">never</span>;

<span class="kw">type</span> <span class="type">X</span> = <span class="type">ToArray</span>&lt;<span class="type">string</span> | <span class="type">number</span>&gt;;
<span class="com">// Distributes to: ToArray&lt;string&gt; | ToArray&lt;number&gt;</span>
<span class="com">// Result: string[] | number[]</span>

<span class="com">// Compare to non-distributive (wrap in tuple to prevent):</span>
<span class="kw">type</span> <span class="type">ToArrayND</span>&lt;<span class="type">T</span>&gt; = [<span class="type">T</span>] <span class="kw">extends</span> [<span class="type">any</span>] ? <span class="type">T</span>[] : <span class="kw">never</span>;
<span class="kw">type</span> <span class="type">Y</span> = <span class="type">ToArrayND</span>&lt;<span class="type">string</span> | <span class="type">number</span>&gt;;
<span class="com">// Result: (string | number)[]  ‚Üê different!</span></div>

      <h3>Real-World Conditional Types</h3>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// 1. Deep Readonly</span>
<span class="kw">type</span> <span class="type">DeepReadonly</span>&lt;<span class="type">T</span>&gt; = {
  <span class="kw">readonly</span> [<span class="type">P</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span>]: <span class="type">T</span>[<span class="type">P</span>] <span class="kw">extends</span> <span class="type">object</span>
    ? <span class="type">DeepReadonly</span>&lt;<span class="type">T</span>[<span class="type">P</span>]&gt;
    : <span class="type">T</span>[<span class="type">P</span>];
};

<span class="com">// 2. Flatten an array type</span>
<span class="kw">type</span> <span class="type">Flatten</span>&lt;<span class="type">T</span>&gt; = <span class="type">T</span> <span class="kw">extends</span> <span class="type">Array</span>&lt;<span class="kw">infer</span> <span class="type">Item</span>&gt; ? <span class="type">Item</span> : <span class="type">T</span>;

<span class="kw">type</span> <span class="type">F1</span> = <span class="type">Flatten</span>&lt;<span class="type">string</span>[]&gt;;    <span class="com">// string</span>
<span class="kw">type</span> <span class="type">F2</span> = <span class="type">Flatten</span>&lt;<span class="type">number</span>[][]&gt;;  <span class="com">// number[]  (one level)</span>
<span class="kw">type</span> <span class="type">F3</span> = <span class="type">Flatten</span>&lt;<span class="type">boolean</span>&gt;;     <span class="com">// boolean  (not array)</span>

<span class="com">// 3. IsNever ‚Äî check if type is never</span>
<span class="kw">type</span> <span class="type">IsNever</span>&lt;<span class="type">T</span>&gt; = [<span class="type">T</span>] <span class="kw">extends</span> [<span class="kw">never</span>] ? <span class="kw">true</span> : <span class="kw">false</span>;
<span class="kw">type</span> <span class="type">G</span> = <span class="type">IsNever</span>&lt;<span class="kw">never</span>&gt;;   <span class="com">// true</span>
<span class="kw">type</span> <span class="type">H</span> = <span class="type">IsNever</span>&lt;<span class="type">string</span>&gt;; <span class="com">// false</span>

<span class="com">// 4. Unwrap nested types recursively</span>
<span class="kw">type</span> <span class="type">UnwrapPromise</span>&lt;<span class="type">T</span>&gt; =
  <span class="type">T</span> <span class="kw">extends</span> <span class="type">Promise</span>&lt;<span class="kw">infer</span> <span class="type">U</span>&gt;
    ? <span class="type">UnwrapPromise</span>&lt;<span class="type">U</span>&gt;  <span class="com">// recursive!</span>
    : <span class="type">T</span>;

<span class="kw">type</span> <span class="type">I</span> = <span class="type">UnwrapPromise</span>&lt;<span class="type">Promise</span>&lt;<span class="type">Promise</span>&lt;<span class="type">string</span>&gt;&gt;&gt;; <span class="com">// string</span></div>

      <div class="interview-tip">
        <strong>üíº Interview Gotcha:</strong>
        <code>never extends string</code> is <strong>true</strong>! Because <code>never</code> is the bottom type ‚Äî it extends everything. This is why <code>IsNever</code> must wrap in a tuple to work correctly.
      </div>

      <div class="nav-buttons">
        <button class="btn btn-ghost" onclick="showSection('utility')">‚Üê Utility Types</button>
        <button class="btn btn-primary" onclick="showSection('guards')">Type Guards ‚Üí</button>
      </div>
    </section>

    <!-- =================== TYPE GUARDS =================== -->
    <section class="section" id="section-guards">
      <div class="section-banner">
        <div class="section-icon">üõ°Ô∏è</div>
        <div>
          <h2>Type Guards</h2>
          <p class="subtitle" style="margin:0; border:none; padding:0">Narrow types safely at runtime</p>
        </div>
      </div>

      <p>Type guards <em>narrow</em> the type of a variable within a conditional block. TypeScript is smart enough to understand what type a value must be after certain checks.</p>

      <h3>1. typeof Guard</h3>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="kw">function</span> <span class="fn">process</span>(value: <span class="type">string</span> | <span class="type">number</span>) {
  <span class="kw">if</span> (<span class="kw">typeof</span> value === <span class="str">"string"</span>) {
    <span class="com">// TypeScript knows: value is string here</span>
    console.<span class="fn">log</span>(value.<span class="fn">toUpperCase</span>());  <span class="com">// ‚úÖ</span>
  } <span class="kw">else</span> {
    <span class="com">// TypeScript knows: value is number here</span>
    console.<span class="fn">log</span>(value.<span class="fn">toFixed</span>(<span class="num">2</span>));     <span class="com">// ‚úÖ</span>
  }
}</div>

      <h3>2. instanceof Guard</h3>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="kw">class</span> <span class="type">Dog</span> { <span class="fn">bark</span>() { console.<span class="fn">log</span>(<span class="str">"Woof"</span>); } }
<span class="kw">class</span> <span class="type">Cat</span> { <span class="fn">meow</span>() { console.<span class="fn">log</span>(<span class="str">"Meow"</span>); } }

<span class="kw">function</span> <span class="fn">makeSound</span>(animal: <span class="type">Dog</span> | <span class="type">Cat</span>) {
  <span class="kw">if</span> (animal <span class="kw">instanceof</span> <span class="type">Dog</span>) {
    animal.<span class="fn">bark</span>();  <span class="com">// TypeScript knows it's Dog</span>
  } <span class="kw">else</span> {
    animal.<span class="fn">meow</span>();  <span class="com">// TypeScript knows it's Cat</span>
  }
}</div>

      <h3>3. in Guard ‚Äî Property Check</h3>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="kw">interface</span> <span class="type">Fish</span> { <span class="fn">swim</span>(): <span class="type">void</span>; }
<span class="kw">interface</span> <span class="type">Bird</span> { <span class="fn">fly</span>(): <span class="type">void</span>; }

<span class="kw">function</span> <span class="fn">move</span>(animal: <span class="type">Fish</span> | <span class="type">Bird</span>) {
  <span class="kw">if</span> (<span class="str">"swim"</span> <span class="kw">in</span> animal) {
    animal.<span class="fn">swim</span>();  <span class="com">// Narrowed to Fish</span>
  } <span class="kw">else</span> {
    animal.<span class="fn">fly</span>();   <span class="com">// Narrowed to Bird</span>
  }
}</div>

      <h3>4. Custom Type Predicates ‚Äî <code>is</code></h3>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// Return type "param is Type" is the type predicate</span>
<span class="kw">function</span> <span class="fn">isString</span>(value: <span class="type">unknown</span>): value <span class="kw">is</span> <span class="type">string</span> {
  <span class="kw">return</span> <span class="kw">typeof</span> value === <span class="str">"string"</span>;
}

<span class="kw">function</span> <span class="fn">process</span>(value: <span class="type">unknown</span>) {
  <span class="kw">if</span> (<span class="fn">isString</span>(value)) {
    value.<span class="fn">toUpperCase</span>(); <span class="com">// ‚úÖ TypeScript knows it's string</span>
  }
}

<span class="com">// Complex type predicate</span>
<span class="kw">interface</span> <span class="type">Admin</span>  { role: <span class="str">"admin"</span>;  permissions: <span class="type">string</span>[]; }
<span class="kw">interface</span> <span class="type">User</span>   { role: <span class="str">"user"</span>;   name: <span class="type">string</span>; }

<span class="kw">function</span> <span class="fn">isAdmin</span>(person: <span class="type">Admin</span> | <span class="type">User</span>): person <span class="kw">is</span> <span class="type">Admin</span> {
  <span class="kw">return</span> person.role === <span class="str">"admin"</span>;
}

<span class="kw">function</span> <span class="fn">doSomething</span>(person: <span class="type">Admin</span> | <span class="type">User</span>) {
  <span class="kw">if</span> (<span class="fn">isAdmin</span>(person)) {
    console.<span class="fn">log</span>(person.permissions); <span class="com">// ‚úÖ Admin narrowed</span>
  }
}</div>

      <h3>5. Discriminated Unions ‚Äî The Most Powerful Pattern</h3>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// Use a shared literal property as the "discriminant"</span>
<span class="kw">type</span> <span class="type">Shape</span> =
  | { kind: <span class="str">"circle"</span>;    radius: <span class="type">number</span> }
  | { kind: <span class="str">"rectangle"</span>; width: <span class="type">number</span>; height: <span class="type">number</span> }
  | { kind: <span class="str">"triangle"</span>;  base: <span class="type">number</span>;   height: <span class="type">number</span> };

<span class="kw">function</span> <span class="fn">getArea</span>(shape: <span class="type">Shape</span>): <span class="type">number</span> {
  <span class="kw">switch</span> (shape.kind) {
    <span class="kw">case</span> <span class="str">"circle"</span>:
      <span class="kw">return</span> Math.PI * shape.radius ** <span class="num">2</span>;
    <span class="kw">case</span> <span class="str">"rectangle"</span>:
      <span class="kw">return</span> shape.width * shape.height;
    <span class="kw">case</span> <span class="str">"triangle"</span>:
      <span class="kw">return</span> <span class="num">0.5</span> * shape.base * shape.height;
    <span class="kw">default</span>:
      <span class="com">// Exhaustiveness check ‚Äî TS errors if we miss a case!</span>
      <span class="kw">const</span> _exhaustive: <span class="kw">never</span> = shape;
      <span class="kw">return</span> _exhaustive;
  }
}</div>

      <div class="interview-tip">
        <strong>üíº Why Discriminated Unions + never = Safe Code:</strong>
        Assigning to <code>never</code> in the default case ensures TypeScript will error if you add a new shape to the union but forget to handle it in the switch. This is called <em>exhaustiveness checking</em>.
      </div>

      <div class="nav-buttons">
        <button class="btn btn-ghost" onclick="showSection('conditional')">‚Üê Conditional</button>
        <button class="btn btn-primary" onclick="showSection('decorators')">Decorators ‚Üí</button>
      </div>
    </section>

    <!-- =================== DECORATORS =================== -->
    <section class="section" id="section-decorators">
      <div class="section-banner">
        <div class="section-icon">üé®</div>
        <div>
          <h2>Decorators</h2>
          <p class="subtitle" style="margin:0; border:none; padding:0">Meta-programming ‚Äî add behavior declaratively</p>
        </div>
      </div>

      <div class="concept-card warning">
        <h4>‚ö†Ô∏è Setup Required</h4>
        <p>Enable decorators in tsconfig.json: <code>"experimentalDecorators": true, "emitDecoratorMetadata": true</code></p>
        <p>TypeScript 5.0 introduced new native decorators. The examples below show both patterns.</p>
      </div>

      <h3>Types of Decorators</h3>
      <table>
        <tr><th>Type</th><th>Applied To</th><th>Syntax</th></tr>
        <tr><td>Class Decorator</td><td>Classes</td><td><code>@MyDecorator</code></td></tr>
        <tr><td>Method Decorator</td><td>Methods</td><td><code>@log</code></td></tr>
        <tr><td>Property Decorator</td><td>Properties</td><td><code>@readonly</code></td></tr>
        <tr><td>Parameter Decorator</td><td>Parameters</td><td><code>@inject</code></td></tr>
        <tr><td>Accessor Decorator</td><td>Getters/Setters</td><td><code>@lazy</code></td></tr>
      </table>

      <h3>Class Decorators</h3>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// A decorator is a function that receives the constructor</span>
<span class="kw">function</span> <span class="fn">Sealed</span>(constructor: <span class="type">Function</span>) {
  Object.<span class="fn">seal</span>(constructor);
  Object.<span class="fn">seal</span>(constructor.prototype);
}

<span class="dec">@Sealed</span>
<span class="kw">class</span> <span class="type">BugReport</span> {
  type = <span class="str">"report"</span>;
  title: <span class="type">string</span>;

  <span class="kw">constructor</span>(t: <span class="type">string</span>) {
    <span class="kw">this</span>.title = t;
  }
}

<span class="com">// Decorator factory ‚Äî returns a decorator</span>
<span class="kw">function</span> <span class="fn">Singleton</span>&lt;<span class="type">T</span> <span class="kw">extends</span> { <span class="kw">new</span>(...args: <span class="type">any</span>[]): {} }&gt;(Base: <span class="type">T</span>) {
  <span class="kw">let</span> instance: <span class="type">InstanceType</span>&lt;<span class="type">T</span>&gt;;
  <span class="kw">return</span> <span class="kw">class</span> <span class="kw">extends</span> Base {
    <span class="kw">constructor</span>(...args: <span class="type">any</span>[]) {
      <span class="kw">super</span>(...args);
      <span class="kw">if</span> (!instance) instance = <span class="kw">this</span> <span class="kw">as any</span>;
      <span class="kw">return</span> instance;
    }
  };
}

<span class="dec">@Singleton</span>
<span class="kw">class</span> <span class="type">Database</span> {
  <span class="kw">constructor</span>(<span class="kw">public</span> url: <span class="type">string</span>) {}
}</div>

      <h3>Method Decorators</h3>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// Log method calls ‚Äî very common in production!</span>
<span class="kw">function</span> <span class="fn">Log</span>(
  target: <span class="type">any</span>,
  propertyKey: <span class="type">string</span>,
  descriptor: <span class="type">PropertyDescriptor</span>
) {
  <span class="kw">const</span> original = descriptor.value;

  descriptor.value = <span class="kw">function</span>(...args: <span class="type">any</span>[]) {
    console.<span class="fn">log</span>(<span class="str">`Calling </span>${propertyKey}<span class="str"> with`</span>, args);
    <span class="kw">const</span> result = original.<span class="fn">apply</span>(<span class="kw">this</span>, args);
    console.<span class="fn">log</span>(<span class="str">`Result:`</span>, result);
    <span class="kw">return</span> result;
  };
}

<span class="com">// Memoize decorator ‚Äî caches function results</span>
<span class="kw">function</span> <span class="fn">Memoize</span>(target: <span class="type">any</span>, key: <span class="type">string</span>, descriptor: <span class="type">PropertyDescriptor</span>) {
  <span class="kw">const</span> cache = <span class="kw">new</span> <span class="type">Map</span>();
  <span class="kw">const</span> fn = descriptor.value;

  descriptor.value = <span class="kw">function</span>(...args: <span class="type">any</span>[]) {
    <span class="kw">const</span> cacheKey = <span class="type">JSON</span>.<span class="fn">stringify</span>(args);
    <span class="kw">if</span> (cache.<span class="fn">has</span>(cacheKey)) <span class="kw">return</span> cache.<span class="fn">get</span>(cacheKey);
    <span class="kw">const</span> result = fn.<span class="fn">apply</span>(<span class="kw">this</span>, args);
    cache.<span class="fn">set</span>(cacheKey, result);
    <span class="kw">return</span> result;
  };
}

<span class="kw">class</span> <span class="type">Calculator</span> {
  <span class="dec">@Log</span>
  <span class="dec">@Memoize</span>
  <span class="fn">fibonacci</span>(n: <span class="type">number</span>): <span class="type">number</span> {
    <span class="kw">if</span> (n &lt;= <span class="num">1</span>) <span class="kw">return</span> n;
    <span class="kw">return</span> <span class="kw">this</span>.<span class="fn">fibonacci</span>(n - <span class="num">1</span>) + <span class="kw">this</span>.<span class="fn">fibonacci</span>(n - <span class="num">2</span>);
  }
}</div>

      <h3>TypeScript 5.0 Native Decorators (New Style)</h3>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// New TS5 decorator API</span>
<span class="kw">function</span> <span class="fn">logged</span>(fn: <span class="type">Function</span>, context: <span class="type">ClassMethodDecoratorContext</span>) {
  <span class="kw">const</span> name = context.name;
  <span class="kw">return</span> <span class="kw">function</span>(...args: <span class="type">any</span>[]) {
    console.<span class="fn">log</span>(<span class="str">`Calling </span>${<span class="type">String</span>(name)}<span class="str">`</span>);
    <span class="kw">return</span> (<span class="fn">fn</span> <span class="kw">as any</span>).<span class="fn">call</span>(<span class="kw">this</span>, ...args);
  };
}

<span class="kw">class</span> <span class="type">Service</span> {
  <span class="dec">@logged</span>
  <span class="fn">fetchData</span>(id: <span class="type">number</span>) {
    <span class="kw">return</span> <span class="str">`Data for </span>${id}<span class="str">`</span>;
  }
}</div>

      <div class="nav-buttons">
        <button class="btn btn-ghost" onclick="showSection('guards')">‚Üê Type Guards</button>
        <button class="btn btn-primary" onclick="showSection('gymnastics')">Type Gymnastics ‚Üí</button>
      </div>
    </section>

    <!-- =================== TYPE GYMNASTICS =================== -->
    <section class="section" id="section-gymnastics">
      <div class="section-banner">
        <div class="section-icon">ü§∏</div>
        <div>
          <h2>Type Gymnastics</h2>
          <p class="subtitle" style="margin:0; border:none; padding:0">The advanced type transformations that separate seniors from juniors</p>
        </div>
      </div>

      <h3>Mapped Types</h3>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// Transform every property in a type</span>
<span class="kw">type</span> <span class="type">Stringify</span>&lt;<span class="type">T</span>&gt; = {
  [<span class="type">K</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span>]: <span class="type">string</span>;
};

<span class="kw">type</span> <span class="type">User</span> = { id: <span class="type">number</span>; age: <span class="type">number</span>; active: <span class="type">boolean</span> };
<span class="kw">type</span> <span class="type">StringUser</span> = <span class="type">Stringify</span>&lt;<span class="type">User</span>&gt;;
<span class="com">// { id: string; age: string; active: string }</span>

<span class="com">// Remapping keys with 'as'</span>
<span class="kw">type</span> <span class="type">Getters</span>&lt;<span class="type">T</span>&gt; = {
  [<span class="type">K</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span> <span class="kw">as</span> <span class="str">`get</span>${<span class="type">Capitalize</span>&lt;<span class="type">string</span> &amp; <span class="type">K</span>&gt;}<span class="str">`</span>]: () =&gt; <span class="type">T</span>[<span class="type">K</span>];
};

<span class="kw">type</span> <span class="type">PersonGetters</span> = <span class="type">Getters</span>&lt;{ name: <span class="type">string</span>; age: <span class="type">number</span> }&gt;;
<span class="com">// { getName: () =&gt; string; getAge: () =&gt; number }</span>

<span class="com">// Filter properties by value type</span>
<span class="kw">type</span> <span class="type">FilterByValue</span>&lt;<span class="type">T</span>, <span class="type">V</span>&gt; = {
  [<span class="type">K</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span> <span class="kw">as</span> <span class="type">T</span>[<span class="type">K</span>] <span class="kw">extends</span> <span class="type">V</span> ? <span class="type">K</span> : <span class="kw">never</span>]: <span class="type">T</span>[<span class="type">K</span>];
};

<span class="kw">type</span> <span class="type">Mixed</span> = { a: <span class="type">string</span>; b: <span class="type">number</span>; c: <span class="type">string</span>; d: <span class="type">boolean</span> };
<span class="kw">type</span> <span class="type">OnlyStrings</span> = <span class="type">FilterByValue</span>&lt;<span class="type">Mixed</span>, <span class="type">string</span>&gt;;
<span class="com">// { a: string; c: string }</span></div>

      <h3>Template Literal Types</h3>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// String manipulation at the type level!</span>
<span class="kw">type</span> <span class="type">Greeting</span> = <span class="str">`Hello, </span>${<span class="type">string</span>}<span class="str">!`</span>;
<span class="kw">const</span> g: <span class="type">Greeting</span> = <span class="str">"Hello, World!"</span>;  <span class="com">// ‚úÖ</span>
<span class="kw">const</span> h: <span class="type">Greeting</span> = <span class="str">"Goodbye"</span>;        <span class="com">// ‚ùå</span>

<span class="com">// Create event name types</span>
<span class="kw">type</span> <span class="type">EventName</span>&lt;<span class="type">T</span> <span class="kw">extends</span> <span class="type">string</span>&gt; = <span class="str">`on</span>${<span class="type">Capitalize</span>&lt;<span class="type">T</span>&gt;}<span class="str">`</span>;
<span class="kw">type</span> <span class="type">ClickEvent</span> = <span class="type">EventName</span>&lt;<span class="str">"click"</span>&gt;;  <span class="com">// "onClick"</span>

<span class="com">// Create CSS variable types</span>
<span class="kw">type</span> <span class="type">CSSVar</span>&lt;<span class="type">T</span> <span class="kw">extends</span> <span class="type">string</span>&gt; = <span class="str">`--</span>${<span class="type">T</span>}<span class="str">`</span>;
<span class="kw">type</span> <span class="type">ColorVar</span> = <span class="type">CSSVar</span>&lt;<span class="str">"primary"</span> | <span class="str">"secondary"</span>&gt;;
<span class="com">// "--primary" | "--secondary"</span>

<span class="com">// Cross product of unions</span>
<span class="kw">type</span> <span class="type">Side</span> = <span class="str">"top"</span> | <span class="str">"bottom"</span>;
<span class="kw">type</span> <span class="type">Axis</span> = <span class="str">"left"</span> | <span class="str">"right"</span>;
<span class="kw">type</span> <span class="type">Corner</span> = <span class="str">`</span>${<span class="type">Side</span>}<span class="str">-</span>${<span class="type">Axis</span>}<span class="str">`</span>;
<span class="com">// "top-left" | "top-right" | "bottom-left" | "bottom-right"</span></div>

      <h3>Recursive Types</h3>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// Deeply nested JSON type</span>
<span class="kw">type</span> <span class="type">JSONValue</span> =
  | <span class="type">string</span>
  | <span class="type">number</span>
  | <span class="type">boolean</span>
  | <span class="kw">null</span>
  | <span class="type">JSONValue</span>[]
  | { [key: <span class="type">string</span>]: <span class="type">JSONValue</span> };

<span class="com">// Deep partial (recursive)</span>
<span class="kw">type</span> <span class="type">DeepPartial</span>&lt;<span class="type">T</span>&gt; = {
  [<span class="type">P</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span>]?: <span class="type">T</span>[<span class="type">P</span>] <span class="kw">extends</span> <span class="type">object</span> ? <span class="type">DeepPartial</span>&lt;<span class="type">T</span>[<span class="type">P</span>]&gt; : <span class="type">T</span>[<span class="type">P</span>];
};

<span class="com">// Path type ‚Äî get all key paths of an object</span>
<span class="kw">type</span> <span class="type">Paths</span>&lt;<span class="type">T</span>&gt; = <span class="type">T</span> <span class="kw">extends</span> <span class="type">object</span>
  ? { [<span class="type">K</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span>]: <span class="type">K</span> <span class="kw">extends</span> <span class="type">string</span>
    ? <span class="type">K</span> | <span class="str">`</span>${<span class="type">K</span>}<span class="str">.</span>${<span class="type">Paths</span>&lt;<span class="type">T</span>[<span class="type">K</span>]&gt;}<span class="str">`</span>
    : <span class="kw">never</span>
  }[<span class="kw">keyof</span> <span class="type">T</span>]
  : <span class="kw">never</span>;

<span class="kw">type</span> <span class="type">Config</span> = { db: { host: <span class="type">string</span>; port: <span class="type">number</span> }; debug: <span class="type">boolean</span> };
<span class="kw">type</span> <span class="type">ConfigPaths</span> = <span class="type">Paths</span>&lt;<span class="type">Config</span>&gt;;
<span class="com">// "db" | "debug" | "db.host" | "db.port"</span></div>

      <div class="nav-buttons">
        <button class="btn btn-ghost" onclick="showSection('decorators')">‚Üê Decorators</button>
        <button class="btn btn-primary" onclick="showSection('exercises')">Practice Exercises ‚Üí</button>
      </div>
    </section>

    <!-- =================== EXERCISES =================== -->
    <section class="section" id="section-exercises">
      <div class="section-banner">
        <div class="section-icon">‚úèÔ∏è</div>
        <div>
          <h2>Exercises</h2>
          <p class="subtitle" style="margin:0; border:none; padding:0">Write the code ‚Äî click "Reveal" to check</p>
        </div>
      </div>

      <!-- Exercise 1 -->
      <div class="exercise-card">
        <div class="exercise-title">
          <h3 style="margin:0">Exercise 1: Generic Constraint</h3>
          <span class="exercise-badge easy">EASY</span>
        </div>
        <p>Write a generic function <code>pluck</code> that takes an array of objects and a key name, returning an array of values for that key. It should be type-safe.</p>
        <div class="code-block" style="background:#111">
<span class="com">// Usage should be:</span>
<span class="kw">const</span> users = [
  { name: <span class="str">"Alice"</span>, age: <span class="num">30</span> },
  { name: <span class="str">"Bob"</span>, age: <span class="num">25</span> }
];
<span class="fn">pluck</span>(users, <span class="str">"name"</span>);  <span class="com">// ["Alice", "Bob"] ‚Äî type string[]</span>
<span class="fn">pluck</span>(users, <span class="str">"age"</span>);   <span class="com">// [30, 25] ‚Äî type number[]</span>
<span class="fn">pluck</span>(users, <span class="str">"foo"</span>);   <span class="com">// ‚ùå TypeScript error!</span></div>

        <textarea class="code-input" id="ex1-input" placeholder="// Write your solution here...
function pluck(arr, key) {
  
}"></textarea>
        <div class="btn-row">
          <button class="btn btn-primary" onclick="checkExercise(1)">Check Logic ‚úì</button>
          <button class="btn btn-ghost" onclick="revealAnswer(1)">Reveal Answer</button>
        </div>
        <div class="result-box" id="ex1-result"></div>
        <div class="code-block" id="ex1-answer" style="display:none">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="kw">function</span> <span class="fn">pluck</span>&lt;<span class="type">T</span>, <span class="type">K</span> <span class="kw">extends</span> <span class="kw">keyof</span> <span class="type">T</span>&gt;(arr: <span class="type">T</span>[], key: <span class="type">K</span>): <span class="type">T</span>[<span class="type">K</span>][] {
  <span class="kw">return</span> arr.<span class="fn">map</span>(item =&gt; item[key]);
}

<span class="com">// The magic:
// T = the object type
// K extends keyof T = K must be a valid key of T
// T[K] = the value type for that key</span></div>
      </div>

      <!-- Exercise 2 -->
      <div class="exercise-card">
        <div class="exercise-title">
          <h3 style="margin:0">Exercise 2: Utility Type Combination</h3>
          <span class="exercise-badge">MEDIUM</span>
        </div>
        <p>Given the <code>User</code> interface below, create types using utility types:</p>
        <div class="code-block" style="background:#111">
<span class="kw">interface</span> <span class="type">User</span> {
  id: <span class="type">number</span>;
  name: <span class="type">string</span>;
  email: <span class="type">string</span>;
  password: <span class="type">string</span>;
  role: <span class="str">"admin"</span> | <span class="str">"user"</span>;
  createdAt: <span class="type">Date</span>;
}

<span class="com">// 1. CreateUserInput ‚Äî only name, email, password (required)</span>
<span class="kw">type</span> <span class="type">CreateUserInput</span> = <span class="com">/* your code */</span>;

<span class="com">// 2. UpdateUserInput ‚Äî all fields optional except id</span>
<span class="kw">type</span> <span class="type">UpdateUserInput</span> = <span class="com">/* your code */</span>;

<span class="com">// 3. PublicUser ‚Äî everything except password</span>
<span class="kw">type</span> <span class="type">PublicUser</span> = <span class="com">/* your code */</span>;</div>

        <textarea class="code-input" id="ex2-input" placeholder="// Write your type definitions here...
type CreateUserInput = 

type UpdateUserInput = 

type PublicUser = "></textarea>
        <div class="btn-row">
          <button class="btn btn-primary" onclick="checkExercise(2)">Check</button>
          <button class="btn btn-ghost" onclick="revealAnswer(2)">Reveal Answer</button>
        </div>
        <div class="result-box" id="ex2-result"></div>
        <div class="code-block" id="ex2-answer" style="display:none">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// 1. Pick specific required fields</span>
<span class="kw">type</span> <span class="type">CreateUserInput</span> = <span class="type">Pick</span>&lt;<span class="type">User</span>, <span class="str">"name"</span> | <span class="str">"email"</span> | <span class="str">"password"</span>&gt;;

<span class="com">// 2. Combine: id required + rest optional</span>
<span class="kw">type</span> <span class="type">UpdateUserInput</span> = <span class="type">Pick</span>&lt;<span class="type">User</span>, <span class="str">"id"</span>&gt; &amp; <span class="type">Partial</span>&lt;<span class="type">Omit</span>&lt;<span class="type">User</span>, <span class="str">"id"</span>&gt;&gt;;

<span class="com">// 3. Remove password</span>
<span class="kw">type</span> <span class="type">PublicUser</span> = <span class="type">Omit</span>&lt;<span class="type">User</span>, <span class="str">"password"</span>&gt;;</div>
      </div>

      <!-- Exercise 3 -->
      <div class="exercise-card">
        <div class="exercise-title">
          <h3 style="margin:0">Exercise 3: Type Guard Function</h3>
          <span class="exercise-badge">MEDIUM</span>
        </div>
        <p>Write a type guard function that checks if an unknown value is a valid <code>ApiResponse</code>:</p>
        <div class="code-block" style="background:#111">
<span class="kw">interface</span> <span class="type">ApiResponse</span> {
  status: <span class="type">number</span>;
  data: <span class="type">unknown</span>;
  message: <span class="type">string</span>;
}

<span class="com">// Write a type guard: isApiResponse(value: unknown): value is ApiResponse</span>
<span class="com">// It should check that:
// - value is an object (not null)
// - has a numeric 'status' property
// - has a string 'message' property
// - has a 'data' property</span></div>

        <textarea class="code-input" id="ex3-input" placeholder="function isApiResponse(value: unknown): value is ApiResponse {
  
}"></textarea>
        <div class="btn-row">
          <button class="btn btn-primary" onclick="checkExercise(3)">Check</button>
          <button class="btn btn-ghost" onclick="revealAnswer(3)">Reveal Answer</button>
        </div>
        <div class="result-box" id="ex3-result"></div>
        <div class="code-block" id="ex3-answer" style="display:none">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="kw">function</span> <span class="fn">isApiResponse</span>(value: <span class="type">unknown</span>): value <span class="kw">is</span> <span class="type">ApiResponse</span> {
  <span class="kw">return</span> (
    <span class="kw">typeof</span> value === <span class="str">"object"</span> &&
    value !== <span class="kw">null</span> &&
    <span class="str">"status"</span> <span class="kw">in</span> value &&
    <span class="str">"data"</span> <span class="kw">in</span> value &&
    <span class="str">"message"</span> <span class="kw">in</span> value &&
    <span class="kw">typeof</span> (value <span class="kw">as any</span>).status === <span class="str">"number"</span> &&
    <span class="kw">typeof</span> (value <span class="kw">as any</span>).message === <span class="str">"string"</span>
  );
}

<span class="com">// Usage:</span>
<span class="kw">async function</span> <span class="fn">fetchData</span>(url: <span class="type">string</span>) {
  <span class="kw">const</span> response = <span class="kw">await</span> fetch(url);
  <span class="kw">const</span> data: <span class="type">unknown</span> = <span class="kw">await</span> response.<span class="fn">json</span>();

  <span class="kw">if</span> (<span class="fn">isApiResponse</span>(data)) {
    console.<span class="fn">log</span>(data.status);  <span class="com">// TypeScript knows the type!</span>
  }
}</div>
      </div>

      <!-- Exercise 4 -->
      <div class="exercise-card">
        <div class="exercise-title">
          <h3 style="margin:0">Exercise 4: Conditional Type</h3>
          <span class="exercise-badge hard">HARD</span>
        </div>
        <p>Create a type <code>Promisify&lt;T&gt;</code> that wraps all function values in a type with Promise, leaving non-functions as-is:</p>
        <div class="code-block" style="background:#111">
<span class="kw">type</span> <span class="type">Service</span> = {
  <span class="fn">getName</span>(): <span class="type">string</span>;
  <span class="fn">getAge</span>(): <span class="type">number</span>;
  version: <span class="type">string</span>;  <span class="com">// not a function!</span>
};

<span class="com">// After Promisify&lt;Service&gt;:</span>
<span class="com">// {
//   getName: () =&gt; Promise&lt;string&gt;;
//   getAge: () =&gt; Promise&lt;number&gt;;
//   version: string;  ‚Üê unchanged
// }</span>

<span class="kw">type</span> <span class="type">Promisify</span>&lt;<span class="type">T</span>&gt; = <span class="com">/* your code */</span>;</div>

        <textarea class="code-input" id="ex4-input" placeholder="type Promisify<T> = {
  
}"></textarea>
        <div class="btn-row">
          <button class="btn btn-primary" onclick="checkExercise(4)">Check</button>
          <button class="btn btn-ghost" onclick="revealAnswer(4)">Reveal Answer</button>
        </div>
        <div class="result-box" id="ex4-result"></div>
        <div class="code-block" id="ex4-answer" style="display:none">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="kw">type</span> <span class="type">Promisify</span>&lt;<span class="type">T</span>&gt; = {
  [<span class="type">K</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span>]: <span class="type">T</span>[<span class="type">K</span>] <span class="kw">extends</span> (...args: <span class="kw">infer</span> <span class="type">Args</span>) =&gt; <span class="kw">infer</span> <span class="type">R</span>
    ? (...args: <span class="type">Args</span>) =&gt; <span class="type">Promise</span>&lt;<span class="type">R</span>&gt;
    : <span class="type">T</span>[<span class="type">K</span>];
};

<span class="com">// Breaking it down:
// [K in keyof T] ‚Äî iterate over all keys
// T[K] extends (...args: infer Args) => infer R
//   ‚Äî check if the value is a function, infer its args and return type
// ? (...args: Args) => Promise&lt;R&gt;  ‚Äî if yes, wrap return in Promise
// : T[K]  ‚Äî if not a function, leave unchanged</span></div>
      </div>

      <div class="nav-buttons">
        <button class="btn btn-ghost" onclick="showSection('gymnastics')">‚Üê Type Gymnastics</button>
        <button class="btn btn-primary" onclick="showSection('quiz')">Take the Quiz ‚Üí</button>
      </div>
    </section>

    <!-- =================== QUIZ =================== -->
    <section class="section" id="section-quiz">
      <div class="section-banner">
        <div class="section-icon">üß†</div>
        <div>
          <h2>Quiz</h2>
          <p class="subtitle" style="margin:0; border:none; padding:0">Test your TypeScript knowledge ‚Äî real interview questions!</p>
        </div>
      </div>

      <div id="quiz-container">
        <!-- Q1 -->
        <div class="quiz-card" id="q1">
          <div class="quiz-question">1. What is the result of: <code>type R = Exclude&lt;"a" | "b" | "c", "a" | "b"&gt;</code>?</div>
          <div class="quiz-options">
            <button class="quiz-option" onclick="answerQuiz(1, 'a', this)"><code>"a" | "b"</code></button>
            <button class="quiz-option" onclick="answerQuiz(1, 'b', this)"><code>"c"</code></button>
            <button class="quiz-option" onclick="answerQuiz(1, 'c', this)"><code>"a" | "b" | "c"</code></button>
            <button class="quiz-option" onclick="answerQuiz(1, 'd', this)"><code>never</code></button>
          </div>
          <div class="quiz-feedback" id="qf1"></div>
        </div>

        <!-- Q2 -->
        <div class="quiz-card" id="q2">
          <div class="quiz-question">2. What does <code>keyof</code> return for <code>{ a: string; b: number; c: boolean }</code>?</div>
          <div class="quiz-options">
            <button class="quiz-option" onclick="answerQuiz(2, 'a', this)"><code>string</code></button>
            <button class="quiz-option" onclick="answerQuiz(2, 'b', this)"><code>"a" | "b" | "c"</code></button>
            <button class="quiz-option" onclick="answerQuiz(2, 'c', this)"><code>string | number | boolean</code></button>
            <button class="quiz-option" onclick="answerQuiz(2, 'd', this)"><code>string[]</code></button>
          </div>
          <div class="quiz-feedback" id="qf2"></div>
        </div>

        <!-- Q3 -->
        <div class="quiz-card" id="q3">
          <div class="quiz-question">3. What is <code>Partial&lt;{ a: string; b: number }&gt;</code>?</div>
          <div class="quiz-options">
            <button class="quiz-option" onclick="answerQuiz(3, 'a', this)"><code>{ a?: string; b?: number }</code></button>
            <button class="quiz-option" onclick="answerQuiz(3, 'b', this)"><code>{ a: string | undefined; b: number | undefined }</code></button>
            <button class="quiz-option" onclick="answerQuiz(3, 'c', this)"><code>{ a?: string | undefined; b?: number | undefined }</code></button>
            <button class="quiz-option" onclick="answerQuiz(3, 'd', this)">Both A and C are equivalent</button>
          </div>
          <div class="quiz-feedback" id="qf3"></div>
        </div>

        <!-- Q4 -->
        <div class="quiz-card" id="q4">
          <div class="quiz-question">4. What is the type of <code>value</code> inside the if block?<br><code>if (typeof value === "string" || typeof value === "number") { value }</code><br>where <code>value: string | number | boolean</code></div>
          <div class="quiz-options">
            <button class="quiz-option" onclick="answerQuiz(4, 'a', this)"><code>string | number | boolean</code></button>
            <button class="quiz-option" onclick="answerQuiz(4, 'b', this)"><code>string | number</code></button>
            <button class="quiz-option" onclick="answerQuiz(4, 'c', this)"><code>string</code></button>
            <button class="quiz-option" onclick="answerQuiz(4, 'd', this)"><code>unknown</code></button>
          </div>
          <div class="quiz-feedback" id="qf4"></div>
        </div>

        <!-- Q5 -->
        <div class="quiz-card" id="q5">
          <div class="quiz-question">5. What does <code>infer</code> do in conditional types?</div>
          <div class="quiz-options">
            <button class="quiz-option" onclick="answerQuiz(5, 'a', this)">Infers the type at runtime</button>
            <button class="quiz-option" onclick="answerQuiz(5, 'b', this)">Creates a type variable to capture a matched type from within a conditional type</button>
            <button class="quiz-option" onclick="answerQuiz(5, 'c', this)">Forces TypeScript to automatically assign types</button>
            <button class="quiz-option" onclick="answerQuiz(5, 'd', this)">Is equivalent to <code>typeof</code></button>
          </div>
          <div class="quiz-feedback" id="qf5"></div>
        </div>

        <!-- Q6 -->
        <div class="quiz-card" id="q6">
          <div class="quiz-question">6. What is the result of <code>type T = never extends string ? "yes" : "no"</code>?</div>
          <div class="quiz-options">
            <button class="quiz-option" onclick="answerQuiz(6, 'a', this)"><code>"no"</code></button>
            <button class="quiz-option" onclick="answerQuiz(6, 'b', this)"><code>"yes"</code></button>
            <button class="quiz-option" onclick="answerQuiz(6, 'c', this)"><code>never</code></button>
            <button class="quiz-option" onclick="answerQuiz(6, 'd', this)">Error</button>
          </div>
          <div class="quiz-feedback" id="qf6"></div>
        </div>

        <!-- Q7 -->
        <div class="quiz-card" id="q7">
          <div class="quiz-question">7. Which type guard pattern is most useful for discriminated unions?</div>
          <div class="quiz-options">
            <button class="quiz-option" onclick="answerQuiz(7, 'a', this)"><code>typeof</code> checks</button>
            <button class="quiz-option" onclick="answerQuiz(7, 'b', this)"><code>instanceof</code> checks</button>
            <button class="quiz-option" onclick="answerQuiz(7, 'c', this)">Checking a shared literal "discriminant" property in a switch statement</button>
            <button class="quiz-option" onclick="answerQuiz(7, 'd', this)">Custom type predicates with <code>is</code></button>
          </div>
          <div class="quiz-feedback" id="qf7"></div>
        </div>

        <!-- Q8 -->
        <div class="quiz-card" id="q8">
          <div class="quiz-question">8. What does <code>Record&lt;"a" | "b", number&gt;</code> produce?</div>
          <div class="quiz-options">
            <button class="quiz-option" onclick="answerQuiz(8, 'a', this)"><code>{ [key: string]: number }</code></button>
            <button class="quiz-option" onclick="answerQuiz(8, 'b', this)"><code>{ a: number; b: number }</code></button>
            <button class="quiz-option" onclick="answerQuiz(8, 'c', this)"><code>Map&lt;"a" | "b", number&gt;</code></button>
            <button class="quiz-option" onclick="answerQuiz(8, 'd', this)"><code>Array&lt;number&gt;</code></button>
          </div>
          <div class="quiz-feedback" id="qf8"></div>
        </div>

        <!-- Q9 -->
        <div class="quiz-card" id="q9">
          <div class="quiz-question">9. Fill in the blank: <code>type GetArray&lt;T&gt; = T extends Array&lt;___&gt; ? R : T;</code> ‚Äî what goes in <code>___</code> to extract the array element type?</div>
          <div class="quiz-options">
            <button class="quiz-option" onclick="answerQuiz(9, 'a', this)"><code>unknown</code></button>
            <button class="quiz-option" onclick="answerQuiz(9, 'b', this)"><code>infer R</code></button>
            <button class="quiz-option" onclick="answerQuiz(9, 'c', this)"><code>any</code></button>
            <button class="quiz-option" onclick="answerQuiz(9, 'd', this)"><code>T</code></button>
          </div>
          <div class="quiz-feedback" id="qf9"></div>
        </div>

        <!-- Q10 -->
        <div class="quiz-card" id="q10">
          <div class="quiz-question">10. What does assigning to <code>never</code> in a switch default case accomplish?</div>
          <div class="quiz-options">
            <button class="quiz-option" onclick="answerQuiz(10, 'a', this)">Nothing ‚Äî it's just a convention</button>
            <button class="quiz-option" onclick="answerQuiz(10, 'b', this)">Exhaustiveness checking ‚Äî TypeScript errors if not all union members are handled</button>
            <button class="quiz-option" onclick="answerQuiz(10, 'c', this)">It throws a runtime error</button>
            <button class="quiz-option" onclick="answerQuiz(10, 'd', this)">It optimizes the compiled JavaScript</button>
          </div>
          <div class="quiz-feedback" id="qf10"></div>
        </div>
      </div>

      <div class="concept-card success" id="quiz-score-display" style="display:none">
        <h4>üéØ Quiz Complete!</h4>
        <p id="quiz-final-score"></p>
      </div>

      <div class="nav-buttons">
        <button class="btn btn-ghost" onclick="showSection('exercises')">‚Üê Exercises</button>
        <button class="btn btn-primary" onclick="showSection('pitfalls')">Common Mistakes ‚Üí</button>
      </div>
    </section>

    <!-- =================== PITFALLS =================== -->
    <section class="section" id="section-pitfalls">
      <div class="section-banner">
        <div class="section-icon">üö®</div>
        <div>
          <h2>Common Mistakes & Pitfalls</h2>
          <p class="subtitle" style="margin:0; border:none; padding:0">Learn from others' mistakes ‚Äî don't repeat them</p>
        </div>
      </div>

      <div class="pitfall">
        <div class="pitfall-title">‚ùå Pitfall 1: Using <code>any</code> Instead of <code>unknown</code></div>
        <div class="code-block">
<span class="com">// ‚ùå BAD ‚Äî loses all type safety</span>
<span class="kw">function</span> <span class="fn">parse</span>(data: <span class="type">any</span>) {
  data.<span class="fn">foo</span>();  <span class="com">// No error! But crashes at runtime</span>
}</div>
      </div>
      <div class="fix">
        <div class="fix-title">‚úÖ Fix: Use <code>unknown</code> and narrow</div>
        <div class="code-block">
<span class="com">// ‚úÖ GOOD ‚Äî forces you to check the type first</span>
<span class="kw">function</span> <span class="fn">parse</span>(data: <span class="type">unknown</span>) {
  <span class="kw">if</span> (<span class="kw">typeof</span> data === <span class="str">"object"</span> && data !== <span class="kw">null</span> && <span class="str">"foo"</span> <span class="kw">in</span> data) {
    (data <span class="kw">as</span> { foo: () => <span class="type">void</span> }).<span class="fn">foo</span>();  <span class="com">// Safe!</span>
  }
}</div>
      </div>

      <div class="pitfall">
        <div class="pitfall-title">‚ùå Pitfall 2: Type Assertions Hide Bugs</div>
        <div class="code-block">
<span class="com">// ‚ùå Lying to TypeScript with 'as'</span>
<span class="kw">const</span> user = <span class="fn">getUser</span>() <span class="kw">as</span> <span class="type">Admin</span>;
user.permissions;  <span class="com">// Might crash if getUser() returns a regular User</span></div>
      </div>
      <div class="fix">
        <div class="fix-title">‚úÖ Fix: Use type guards instead</div>
        <div class="code-block">
<span class="kw">const</span> user = <span class="fn">getUser</span>();
<span class="kw">if</span> (<span class="fn">isAdmin</span>(user)) {
  user.permissions;  <span class="com">// TypeScript AND runtime both know it's Admin</span>
}</div>
      </div>

      <div class="pitfall">
        <div class="pitfall-title">‚ùå Pitfall 3: Forgetting Distributive Conditional Types</div>
        <div class="code-block">
<span class="com">// ‚ùå Confusing behavior</span>
<span class="kw">type</span> <span class="type">IsString</span>&lt;<span class="type">T</span>&gt; = <span class="type">T</span> <span class="kw">extends</span> <span class="type">string</span> ? <span class="kw">true</span> : <span class="kw">false</span>;
<span class="kw">type</span> <span class="type">R</span> = <span class="type">IsString</span>&lt;<span class="type">string</span> | <span class="type">number</span>&gt;;
<span class="com">// Expected: false (not ALL are strings)
// Actual: boolean  (true | false ‚Äî distributed!)</span></div>
      </div>
      <div class="fix">
        <div class="fix-title">‚úÖ Fix: Wrap in tuple to prevent distribution</div>
        <div class="code-block">
<span class="kw">type</span> <span class="type">IsString</span>&lt;<span class="type">T</span>&gt; = [<span class="type">T</span>] <span class="kw">extends</span> [<span class="type">string</span>] ? <span class="kw">true</span> : <span class="kw">false</span>;
<span class="kw">type</span> <span class="type">R</span> = <span class="type">IsString</span>&lt;<span class="type">string</span> | <span class="type">number</span>&gt;;
<span class="com">// Now correctly: false</span></div>
      </div>

      <div class="pitfall">
        <div class="pitfall-title">‚ùå Pitfall 4: Object.keys() Loses Type Info</div>
        <div class="code-block">
<span class="kw">const</span> user = { name: <span class="str">"Alice"</span>, age: <span class="num">30</span> };
Object.<span class="fn">keys</span>(user).<span class="fn">forEach</span>(key =&gt; {
  user[key]; <span class="com">// ‚ùå Error! key is 'string', not 'keyof User'</span>
});</div>
      </div>
      <div class="fix">
        <div class="fix-title">‚úÖ Fix: Type the keys properly</div>
        <div class="code-block">
<span class="com">// Option 1: Cast</span>
(Object.<span class="fn">keys</span>(user) <span class="kw">as</span> (<span class="kw">keyof typeof</span> user)[]).<span class="fn">forEach</span>(key =&gt; {
  user[key];  <span class="com">// ‚úÖ</span>
});

<span class="com">// Option 2: Helper function</span>
<span class="kw">function</span> <span class="fn">typedKeys</span>&lt;<span class="type">T</span> <span class="kw">extends</span> <span class="type">object</span>&gt;(obj: <span class="type">T</span>): (<span class="kw">keyof</span> <span class="type">T</span>)[] {
  <span class="kw">return</span> Object.<span class="fn">keys</span>(obj) <span class="kw">as</span> (<span class="kw">keyof</span> <span class="type">T</span>)[];
}</div>
      </div>

      <div class="pitfall">
        <div class="pitfall-title">‚ùå Pitfall 5: Mutating Readonly Objects</div>
        <div class="code-block">
<span class="com">// ‚ùå Readonly only protects the surface level!</span>
<span class="kw">const</span> config: <span class="type">Readonly</span>&lt;{ db: { host: <span class="type">string</span> } }&gt; = {
  db: { host: <span class="str">"localhost"</span> }
};
config.db = { host: <span class="str">"other"</span> };   <span class="com">// ‚ùå Error ‚Äî good!</span>
config.db.host = <span class="str">"other"</span>;        <span class="com">// ‚úÖ No error ‚Äî DANGEROUS!</span></div>
      </div>
      <div class="fix">
        <div class="fix-title">‚úÖ Fix: Use DeepReadonly for nested objects</div>
        <div class="code-block">
<span class="kw">type</span> <span class="type">DeepReadonly</span>&lt;<span class="type">T</span>&gt; = {
  <span class="kw">readonly</span> [<span class="type">P</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span>]: <span class="type">T</span>[<span class="type">P</span>] <span class="kw">extends</span> <span class="type">object</span>
    ? <span class="type">DeepReadonly</span>&lt;<span class="type">T</span>[<span class="type">P</span>]&gt;
    : <span class="type">T</span>[<span class="type">P</span>];
};</div>
      </div>

      <div class="pitfall">
        <div class="pitfall-title">‚ùå Pitfall 6: Excess Property Checks Only on Fresh Objects</div>
        <div class="code-block">
<span class="kw">interface</span> <span class="type">Point</span> { x: <span class="type">number</span>; y: <span class="type">number</span>; }

<span class="com">// ‚ùå Error ‚Äî excess property check on fresh object</span>
<span class="kw">const</span> p: <span class="type">Point</span> = { x: <span class="num">1</span>, y: <span class="num">2</span>, z: <span class="num">3</span> };

<span class="com">// ‚úÖ No error ‚Äî assigned to variable first (structural typing!)</span>
<span class="kw">const</span> obj = { x: <span class="num">1</span>, y: <span class="num">2</span>, z: <span class="num">3</span> };
<span class="kw">const</span> p2: <span class="type">Point</span> = obj;  <span class="com">// Works! Extra properties are fine</span></div>
      </div>

      <div class="nav-buttons">
        <button class="btn btn-ghost" onclick="showSection('quiz')">‚Üê Quiz</button>
        <button class="btn btn-primary" onclick="showSection('cheatsheet')">Cheat Sheet ‚Üí</button>
      </div>
    </section>

    <!-- =================== CHEAT SHEET =================== -->
    <section class="section" id="section-cheatsheet">
      <div class="section-banner">
        <div class="section-icon">üìú</div>
        <div>
          <h2>Cheat Sheet</h2>
          <p class="subtitle" style="margin:0; border:none; padding:0">Quick reference for interviews and daily use</p>
        </div>
      </div>

      <h3>Utility Types Quick Reference</h3>
      <div class="cheat-grid">
        <div class="cheat-item">
          <h4>Partial / Required / Readonly</h4>
          <div class="cheat-code">Partial&lt;T&gt;
Required&lt;T&gt;
Readonly&lt;T&gt;</div>
        </div>
        <div class="cheat-item">
          <h4>Pick / Omit</h4>
          <div class="cheat-code">Pick&lt;T, 'a'|'b'&gt;
Omit&lt;T, 'password'&gt;</div>
        </div>
        <div class="cheat-item">
          <h4>Record</h4>
          <div class="cheat-code">Record&lt;'a'|'b', number&gt;
Record&lt;string, unknown&gt;</div>
        </div>
        <div class="cheat-item">
          <h4>Exclude / Extract</h4>
          <div class="cheat-code">Exclude&lt;'a'|'b', 'a'&gt; // 'b'
Extract&lt;'a'|'b', 'a'&gt; // 'a'</div>
        </div>
        <div class="cheat-item">
          <h4>NonNullable</h4>
          <div class="cheat-code">NonNullable&lt;string|null&gt;
// string</div>
        </div>
        <div class="cheat-item">
          <h4>ReturnType / Parameters</h4>
          <div class="cheat-code">ReturnType&lt;typeof fn&gt;
Parameters&lt;typeof fn&gt;</div>
        </div>
        <div class="cheat-item">
          <h4>InstanceType</h4>
          <div class="cheat-code">InstanceType&lt;typeof MyClass&gt;</div>
        </div>
        <div class="cheat-item">
          <h4>Awaited</h4>
          <div class="cheat-code">Awaited&lt;Promise&lt;string&gt;&gt;
// string</div>
        </div>
      </div>

      <h3>Generic Patterns</h3>
      <div class="cheat-grid">
        <div class="cheat-item" style="border-top-color: var(--tertiary)">
          <h4>Basic Generic</h4>
          <div class="cheat-code">function id&lt;T&gt;(x: T): T</div>
        </div>
        <div class="cheat-item" style="border-top-color: var(--tertiary)">
          <h4>Constrained Generic</h4>
          <div class="cheat-code">function fn&lt;T extends object&gt;(x: T)</div>
        </div>
        <div class="cheat-item" style="border-top-color: var(--tertiary)">
          <h4>keyof Constraint</h4>
          <div class="cheat-code">fn&lt;T, K extends keyof T&gt;(obj: T, k: K): T[K]</div>
        </div>
        <div class="cheat-item" style="border-top-color: var(--tertiary)">
          <h4>Default Type</h4>
          <div class="cheat-code">interface Box&lt;T = string&gt; { val: T }</div>
        </div>
      </div>

      <h3>Conditional Type Patterns</h3>
      <div class="cheat-grid">
        <div class="cheat-item" style="border-top-color: var(--primary)">
          <h4>Basic Conditional</h4>
          <div class="cheat-code">T extends U ? A : B</div>
        </div>
        <div class="cheat-item" style="border-top-color: var(--primary)">
          <h4>With Infer</h4>
          <div class="cheat-code">T extends Promise&lt;infer U&gt; ? U : T</div>
        </div>
        <div class="cheat-item" style="border-top-color: var(--primary)">
          <h4>Non-Distributive</h4>
          <div class="cheat-code">[T] extends [U] ? A : B</div>
        </div>
        <div class="cheat-item" style="border-top-color: var(--primary)">
          <h4>IsNever</h4>
          <div class="cheat-code">[T] extends [never] ? true : false</div>
        </div>
      </div>

      <h3>Mapped Type Patterns</h3>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// Basic mapped type</span>
<span class="kw">type</span> <span class="type">Mapped</span>&lt;<span class="type">T</span>&gt; = { [<span class="type">K</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span>]: <span class="type">T</span>[<span class="type">K</span>] };

<span class="com">// Optional modifier</span>
<span class="kw">type</span> <span class="type">AllOptional</span>&lt;<span class="type">T</span>&gt; = { [<span class="type">K</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span>]?: <span class="type">T</span>[<span class="type">K</span>] };

<span class="com">// Remove optional modifier</span>
<span class="kw">type</span> <span class="type">AllRequired</span>&lt;<span class="type">T</span>&gt; = { [<span class="type">K</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span>]-?: <span class="type">T</span>[<span class="type">K</span>] };

<span class="com">// Readonly modifier</span>
<span class="kw">type</span> <span class="type">AllReadonly</span>&lt;<span class="type">T</span>&gt; = { <span class="kw">readonly</span> [<span class="type">K</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span>]: <span class="type">T</span>[<span class="type">K</span>] };

<span class="com">// Remove readonly</span>
<span class="kw">type</span> <span class="type">Mutable</span>&lt;<span class="type">T</span>&gt; = { -<span class="kw">readonly</span> [<span class="type">K</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span>]: <span class="type">T</span>[<span class="type">K</span>] };

<span class="com">// Remap keys with 'as'</span>
<span class="kw">type</span> <span class="type">Prefixed</span>&lt;<span class="type">T</span>&gt; = { [<span class="type">K</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span> <span class="kw">as</span> <span class="str">`prefix_</span>${<span class="type">string</span> &amp; <span class="type">K</span>}<span class="str">`</span>]: <span class="type">T</span>[<span class="type">K</span>] };

<span class="com">// Filter keys</span>
<span class="kw">type</span> <span class="type">OnlyStrings</span>&lt;<span class="type">T</span>&gt; = { [<span class="type">K</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span> <span class="kw">as</span> <span class="type">T</span>[<span class="type">K</span>] <span class="kw">extends</span> <span class="type">string</span> ? <span class="type">K</span> : <span class="kw">never</span>]: <span class="type">T</span>[<span class="type">K</span>] };</div>

      <h3>Type Guard Patterns</h3>
      <div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<span class="com">// typeof guard</span>
<span class="kw">if</span> (<span class="kw">typeof</span> x === <span class="str">"string"</span>) { <span class="com">/* x is string */</span> }

<span class="com">// instanceof guard</span>
<span class="kw">if</span> (x <span class="kw">instanceof</span> <span class="type">Date</span>) { <span class="com">/* x is Date */</span> }

<span class="com">// in guard</span>
<span class="kw">if</span> (<span class="str">"name"</span> <span class="kw">in</span> x) { <span class="com">/* x has 'name' property */</span> }

<span class="com">// Type predicate</span>
<span class="kw">function</span> <span class="fn">isX</span>(val: <span class="type">unknown</span>): val <span class="kw">is</span> <span class="type">X</span> { <span class="kw">return</span> <span class="com">/* ... */</span>; }

<span class="com">// Discriminated union</span>
<span class="kw">switch</span> (shape.kind) {
  <span class="kw">case</span> <span class="str">"circle"</span>: <span class="com">/* ... */</span> <span class="kw">break</span>;
  <span class="kw">default</span>: <span class="kw">const</span> _: <span class="kw">never</span> = shape; <span class="com">// exhaustiveness!</span>
}</div>

      <div class="nav-buttons">
        <button class="btn btn-ghost" onclick="showSection('pitfalls')">‚Üê Pitfalls</button>
        <button class="btn btn-primary" onclick="showSection('interview')">Interview Prep ‚Üí</button>
      </div>
    </section>

    <!-- =================== INTERVIEW =================== -->
    <section class="section" id="section-interview">
      <div class="section-banner">
        <div class="section-icon">üíº</div>
        <div>
          <h2>Interview Prep</h2>
          <p class="subtitle" style="margin:0; border:none; padding:0">Questions asked at top companies ‚Äî with model answers</p>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          "Explain the difference between interface and type in TypeScript" <span class="arrow">‚ñº</span>
        </div>
        <div class="accordion-body">
          <table>
            <tr><th>Feature</th><th>interface</th><th>type</th></tr>
            <tr><td>Declaration merging</td><td>‚úÖ Yes</td><td>‚ùå No</td></tr>
            <tr><td>Extends keyword</td><td>‚úÖ Yes</td><td>‚ùå Use &amp; instead</td></tr>
            <tr><td>Union types</td><td>‚ùå No</td><td>‚úÖ Yes</td></tr>
            <tr><td>Computed properties</td><td>‚ùå No</td><td>‚úÖ Yes</td></tr>
            <tr><td>Conditional types</td><td>‚ùå No</td><td>‚úÖ Yes</td></tr>
            <tr><td>Primitives, tuples, unions</td><td>‚ùå No</td><td>‚úÖ Yes</td></tr>
          </table>
          <div class="highlight-box" style="margin-top:12px">
            <strong>üí° Best Answer:</strong> Use <code>interface</code> for object shapes that may be extended (especially in libraries). Use <code>type</code> for unions, intersections, computed/conditional types, and complex transformations.
          </div>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          "What is the difference between unknown and any?" <span class="arrow">‚ñº</span>
        </div>
        <div class="accordion-body">
          <div class="code-block">
<span class="com">// 'any' ‚Äî opt out of type checking entirely</span>
<span class="kw">let</span> x: <span class="type">any</span> = <span class="str">"hello"</span>;
x.<span class="fn">foo</span>();        <span class="com">// No error ‚Äî dangerous!</span>
x.<span class="fn">nonExistent</span>; <span class="com">// No error!</span>

<span class="com">// 'unknown' ‚Äî you MUST narrow before using</span>
<span class="kw">let</span> y: <span class="type">unknown</span> = <span class="str">"hello"</span>;
y.<span class="fn">foo</span>();         <span class="com">// ‚ùå Error ‚Äî good!</span>
<span class="kw">if</span> (<span class="kw">typeof</span> y === <span class="str">"string"</span>) {
  y.<span class="fn">toUpperCase</span>(); <span class="com">// ‚úÖ Safe after narrowing</span>
}</div>
          <p><strong>Rule:</strong> Use <code>unknown</code> for values you don't know the type of (API responses, JSON parsing). Use <code>any</code> only as a last resort.</p>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          "Implement a DeepReadonly type" <span class="arrow">‚ñº</span>
        </div>
        <div class="accordion-body">
          <div class="code-block">
<span class="kw">type</span> <span class="type">DeepReadonly</span>&lt;<span class="type">T</span>&gt; = <span class="type">T</span> <span class="kw">extends</span> (<span class="type">Function</span> | <span class="type">Primitive</span>)
  ? <span class="type">T</span>
  : <span class="type">T</span> <span class="kw">extends</span> <span class="type">Array</span>&lt;<span class="kw">infer</span> <span class="type">U</span>&gt;
    ? <span class="type">ReadonlyArray</span>&lt;<span class="type">DeepReadonly</span>&lt;<span class="type">U</span>&gt;&gt;
    : { <span class="kw">readonly</span> [<span class="type">P</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">T</span>]: <span class="type">DeepReadonly</span>&lt;<span class="type">T</span>[<span class="type">P</span>]&gt; };

<span class="kw">type</span> <span class="type">Primitive</span> = <span class="type">string</span> | <span class="type">number</span> | <span class="type">boolean</span> | <span class="type">bigint</span> | <span class="type">symbol</span> | <span class="kw">null</span> | <span class="kw">undefined</span>;</div>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          "What is structural typing vs nominal typing?" <span class="arrow">‚ñº</span>
        </div>
        <div class="accordion-body">
          <div class="code-block">
<span class="com">// TypeScript uses STRUCTURAL typing (duck typing)</span>
<span class="com">// "If it looks like a duck and quacks like a duck, it's a duck"</span>

<span class="kw">interface</span> <span class="type">Point2D</span> { x: <span class="type">number</span>; y: <span class="type">number</span>; }
<span class="kw">interface</span> <span class="type">Vector2D</span> { x: <span class="type">number</span>; y: <span class="type">number</span>; }

<span class="com">// These are COMPATIBLE even though they have different names!</span>
<span class="kw">const</span> p: <span class="type">Point2D</span> = { x: <span class="num">1</span>, y: <span class="num">2</span> };
<span class="kw">const</span> v: <span class="type">Vector2D</span> = p;  <span class="com">// ‚úÖ Works!</span>

<span class="com">// Nominal typing (Java/C#) would require explicit declarations
// Brand types simulate nominal typing in TS:</span>
<span class="kw">type</span> <span class="type">UserId</span> = <span class="type">string</span> &amp; { __brand: <span class="str">"UserId"</span> };
<span class="kw">type</span> <span class="type">PostId</span> = <span class="type">string</span> &amp; { __brand: <span class="str">"PostId"</span> };
<span class="com">// Now UserId and PostId are incompatible!</span></div>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          "What is covariance and contravariance in TypeScript?" <span class="arrow">‚ñº</span>
        </div>
        <div class="accordion-body">
          <div class="code-block">
<span class="com">// Covariance ‚Äî can use a narrower (more specific) type</span>
<span class="com">// Function return types are COVARIANT</span>
<span class="kw">type</span> <span class="type">GetAnimal</span> = () =&gt; <span class="type">Animal</span>;
<span class="kw">type</span> <span class="type">GetDog</span>    = () =&gt; <span class="type">Dog</span>;    <span class="com">// Dog extends Animal</span>
<span class="com">// GetDog is assignable to GetAnimal ‚úÖ (Dog is more specific)</span>

<span class="com">// Contravariance ‚Äî can use a wider (more general) type</span>
<span class="com">// Function parameter types are CONTRAVARIANT</span>
<span class="kw">type</span> <span class="type">HandleAnimal</span> = (a: <span class="type">Animal</span>) =&gt; <span class="type">void</span>;
<span class="kw">type</span> <span class="type">HandleDog</span>    = (d: <span class="type">Dog</span>) =&gt; <span class="type">void</span>;
<span class="com">// HandleAnimal is assignable to HandleDog ‚úÖ (Animal is more general)</span>

<span class="com">// TypeScript simplification: --strictFunctionTypes enables proper contravariance</span></div>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          "Write a type-safe EventEmitter" <span class="arrow">‚ñº</span>
        </div>
        <div class="accordion-body">
          <div class="code-block">
<span class="kw">type</span> <span class="type">EventMap</span> = { [<span class="type">event</span>: <span class="type">string</span>]: <span class="type">unknown</span> };

<span class="kw">class</span> <span class="type">TypedEventEmitter</span>&lt;<span class="type">Events</span> <span class="kw">extends</span> <span class="type">EventMap</span>&gt; {
  <span class="kw">private</span> listeners: {
    [<span class="type">K</span> <span class="kw">in</span> <span class="kw">keyof</span> <span class="type">Events</span>]?: ((data: <span class="type">Events</span>[<span class="type">K</span>]) =&gt; <span class="type">void</span>)[];
  } = {};

  <span class="fn">on</span>&lt;<span class="type">K</span> <span class="kw">extends</span> <span class="kw">keyof</span> <span class="type">Events</span>&gt;(event: <span class="type">K</span>, listener: (data: <span class="type">Events</span>[<span class="type">K</span>]) =&gt; <span class="type">void</span>) {
    (<span class="kw">this</span>.listeners[event] ??= []).<span class="fn">push</span>(listener);
  }

  <span class="fn">emit</span>&lt;<span class="type">K</span> <span class="kw">extends</span> <span class="kw">keyof</span> <span class="type">Events</span>&gt;(event: <span class="type">K</span>, data: <span class="type">Events</span>[<span class="type">K</span>]) {
    <span class="kw">this</span>.listeners[event]?.forEach(l =&gt; l(data));
  }
}

<span class="com">// Usage:</span>
<span class="kw">type</span> <span class="type">AppEvents</span> = {
  login:  { userId: <span class="type">string</span> };
  logout: { userId: <span class="type">string</span> };
  error:  { message: <span class="type">string</span>; code: <span class="type">number</span> };
};

<span class="kw">const</span> emitter = <span class="kw">new</span> <span class="type">TypedEventEmitter</span>&lt;<span class="type">AppEvents</span>&gt;();
emitter.<span class="fn">on</span>(<span class="str">"login"</span>, ({ userId }) =&gt; {
  console.<span class="fn">log</span>(<span class="str">`Logged in: </span>${userId}<span class="str">`</span>);  <span class="com">// userId is string ‚Äî type safe!</span>
});
emitter.<span class="fn">emit</span>(<span class="str">"login"</span>, { userId: <span class="str">"123"</span> });  <span class="com">// ‚úÖ</span>
emitter.<span class="fn">emit</span>(<span class="str">"login"</span>, { userId: <span class="num">123</span> });    <span class="com">// ‚ùå Type error!</span></div>
        </div>
      </div>

      <h3>üìã Pre-Interview Checklist</h3>
      <ul class="checklist" id="interview-checklist">
        <li onclick="toggleCheck(this)"><div class="check-box"></div>Explain all utility types and their implementations</li>
        <li onclick="toggleCheck(this)"><div class="check-box"></div>Can implement Partial, Pick, Omit from scratch</li>
        <li onclick="toggleCheck(this)"><div class="check-box"></div>Understand distributive conditional types</li>
        <li onclick="toggleCheck(this)"><div class="check-box"></div>Can explain and use infer keyword</li>
        <li onclick="toggleCheck(this)"><div class="check-box"></div>Know all 5 types of type guards</li>
        <li onclick="toggleCheck(this)"><div class="check-box"></div>Understand discriminated unions + exhaustiveness</li>
        <li onclick="toggleCheck(this)"><div class="check-box"></div>Can write mapped types with key remapping</li>
        <li onclick="toggleCheck(this)"><div class="check-box"></div>Know template literal types</li>
        <li onclick="toggleCheck(this)"><div class="check-box"></div>Understand structural typing and its implications</li>
        <li onclick="toggleCheck(this)"><div class="check-box"></div>Can explain covariance vs contravariance</li>
        <li onclick="toggleCheck(this)"><div class="check-box"></div>Know difference between interface and type</li>
        <li onclick="toggleCheck(this)"><div class="check-box"></div>Understand any vs unknown vs never</li>
      </ul>

      <div class="nav-buttons">
        <button class="btn btn-ghost" onclick="showSection('cheatsheet')">‚Üê Cheat Sheet</button>
        <button class="btn btn-secondary" onclick="showSection('intro')">üîÑ Start Over</button>
      </div>
    </section>

  </main>
</div>

<script>
  // ============ STATE ============
  const state = {
    quizScore: 0,
    exerciseScore: 0,
    sectionsRead: new Set(),
    streak: 0,
    quizAnswers: {},
    totalQuestions: 10,
    quizAnswered: 0
  };

  // Quiz answers
  const correctAnswers = {
    1: 'b',  // "c"
    2: 'b',  // "a"|"b"|"c"
    3: 'd',  // Both A and C
    4: 'b',  // string | number
    5: 'b',  // creates type variable
    6: 'b',  // "yes" ‚Äî never extends everything
    7: 'c',  // discriminant + switch
    8: 'b',  // { a: number; b: number }
    9: 'b',  // infer R
    10: 'b'  // exhaustiveness checking
  };

  const quizExplanations = {
    1: '‚úÖ Correct! Exclude removes "a" and "b" from the union, leaving only "c".',
    2: '‚úÖ Correct! keyof returns a union of all key names as string literal types.',
    3: '‚úÖ Correct! In TypeScript, optional (?) and | undefined are both true. A and C are functionally equivalent for Partial.',
    4: '‚úÖ Correct! TypeScript narrows the union to string | number inside the OR condition.',
    5: '‚úÖ Correct! infer creates a type variable that captures the matched type at compile time.',
    6: '‚úÖ Correct! never is the bottom type ‚Äî it extends every type, including string. So the result is "yes"!',
    7: '‚úÖ Correct! Checking a literal discriminant property in a switch is the canonical discriminated union pattern.',
    8: '‚úÖ Correct! Record<"a"|"b", number> creates { a: number; b: number }.',
    9: '‚úÖ Correct! infer R captures the element type from Array<R>.',
    10: '‚úÖ Correct! Assigning to never in default causes a compile error if a union member is not handled.'
  };

  // ============ NAVIGATION ============
  function showSection(id) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));

    const section = document.getElementById('section-' + id);
    if (section) section.classList.add('active');

    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(item => {
      if (item.getAttribute('onclick')?.includes(`'${id}'`)) {
        item.classList.add('active');
      }
    });

    // Track sections read
    if (!state.sectionsRead.has(id)) {
      state.sectionsRead.add(id);
      state.streak++;
      updateScores();

      // Mark nav item as done
      navItems.forEach(item => {
        if (item.getAttribute('onclick')?.includes(`'${id}'`)) {
          item.classList.add('done');
        }
      });
    }

    updateProgress();
    window.scrollTo(0, 0);
  }

  function updateProgress() {
    const total = 11; // total sections
    const pct = (state.sectionsRead.size / total) * 100;
    document.getElementById('progressFill').style.width = pct + '%';
  }

  function updateScores() {
    const total = state.quizScore + state.exerciseScore;
    document.getElementById('quizScore').textContent = state.quizScore;
    document.getElementById('exerciseScore').textContent = state.exerciseScore;
    document.getElementById('sectionsRead').textContent = state.sectionsRead.size;
    document.getElementById('streakCount').textContent = state.streak;
    document.getElementById('totalScore').textContent = total;
  }

  // ============ TABS ============
  function switchTab(btn, contentId) {
    const container = btn.closest('.tab-container');
    container.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    container.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById(contentId)?.classList.add('active');
  }

  // ============ ACCORDION ============
  function toggleAccordion(header) {
    header.classList.toggle('open');
    const body = header.nextElementSibling;
    body.classList.toggle('open');
  }

  // ============ QUIZ ============
  function answerQuiz(qNum, answer, btn) {
    if (state.quizAnswers[qNum] !== undefined) return; // already answered

    const isCorrect = answer === correctAnswers[qNum];
    state.quizAnswers[qNum] = answer;

    // Disable all options in this question
    const card = document.getElementById('q' + qNum);
    card.querySelectorAll('.quiz-option').forEach(opt => {
      opt.disabled = true;
      opt.style.cursor = 'default';
    });

    // Mark correct/wrong
    btn.classList.add(isCorrect ? 'correct' : 'wrong');

    // Mark correct answer if wrong
    if (!isCorrect) {
      const answerIndex = {'a':0,'b':1,'c':2,'d':3}[correctAnswers[qNum]];
      card.querySelectorAll('.quiz-option')[answerIndex].classList.add('correct');
    }

    // Show feedback
    const feedback = document.getElementById('qf' + qNum);
    feedback.textContent = isCorrect
      ? quizExplanations[qNum]
      : '‚ùå Not quite. ' + quizExplanations[qNum];
    feedback.className = 'quiz-feedback show ' + (isCorrect ? 'correct' : 'wrong');

    if (isCorrect) {
      state.quizScore += 10;
      state.streak++;
    }
    state.quizAnswered++;
    updateScores();

    if (state.quizAnswered === state.totalQuestions) {
      const display = document.getElementById('quiz-score-display');
      const scoreEl = document.getElementById('quiz-final-score');
      const pct = (state.quizScore / 100) * 100;
      display.style.display = 'block';
      scoreEl.textContent = `You scored ${state.quizScore}/100 (${pct}%). ${
        pct >= 80 ? 'üéâ Excellent! You\'re interview-ready!' :
        pct >= 60 ? 'üëç Good! Review the topics you missed.' :
        'üìñ Keep studying ‚Äî you\'ll get there!'
      }`;
    }
  }

  // ============ EXERCISES ============
  function checkExercise(num) {
    const input = document.getElementById(`ex${num}-input`).value.trim();
    const result = document.getElementById(`ex${num}-result`);

    const checks = {
      1: () => input.includes('keyof') && input.includes('extends') && input.includes('T[K]'),
      2: () => input.includes('Pick') && input.includes('Omit') && input.includes('Partial'),
      3: () => input.includes('typeof') && input.includes('null') && input.includes('in'),
      4: () => input.includes('infer') && input.includes('Promise') && input.includes('keyof')
    };

    const hints = {
      1: 'Hint: Use <T, K extends keyof T> and return T[K][]',
      2: 'Hint: Combine Pick, Omit, and Partial with & (intersection)',
      3: 'Hint: Check typeof === "object", !== null, and use "in" operator',
      4: 'Hint: Use mapped type [K in keyof T] with conditional T[K] extends (...args: infer Args) => infer R'
    };

    if (!input) {
      result.textContent = '‚ö†Ô∏è Please write some code first!';
      result.className = 'result-box show info';
      return;
    }

    if (checks[num]()) {
      result.textContent = '‚úÖ Great approach! Key TypeScript concepts used correctly. Reveal to see the ideal solution.';
      result.className = 'result-box show pass';
      state.exerciseScore += 25;
      state.streak++;
      updateScores();
    } else {
      result.textContent = '‚ùå Not quite. ' + hints[num];
      result.className = 'result-box show fail';
    }
  }

  function revealAnswer(num) {
    const answer = document.getElementById(`ex${num}-answer`);
    if (answer) {
      answer.style.display = answer.style.display === 'none' ? 'block' : 'none';
    }
  }

  // ============ COPY CODE ============
  function copyCode(btn) {
    const block = btn.parentElement;
    const text = block.innerText.replace('Copy', '').trim();
    navigator.clipboard.writeText(text).then(() => {
      btn.textContent = '‚úì Copied!';
      setTimeout(() => btn.textContent = 'Copy', 2000);
    });
  }

  // ============ CHECKLIST ============
  function toggleCheck(li) {
    li.classList.toggle('checked');
    const box = li.querySelector('.check-box');
    box.textContent = li.classList.contains('checked') ? '‚úì' : '';
  }

  // ============ FILL IN BLANK ============
  function checkFill(input, correct) {
    const val = input.value.trim().toLowerCase();
    if (val === correct.toLowerCase()) {
      input.style.borderColor = 'var(--success)';
      input.style.color = 'var(--success)';
    } else if (val.length > 0) {
      input.style.borderColor = 'var(--error)';
      input.style.color = 'var(--error)';
    }
  }

  // Init
  showSection('intro');
</script>
</body>
</html>