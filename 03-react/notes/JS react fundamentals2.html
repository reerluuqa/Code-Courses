<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Mastery Quest üöÄ</title>
    <style>
        :root {
            --react-blue: #61dafb;
            --react-dark: #20232a;
            --react-gray: #282c34;
            --success: #4caf50;
            --danger: #f44336;
            --warning: #ff9800;
            --purple: #bb86fc;
            --gradient: linear-gradient(135deg, var(--react-dark) 0%, var(--react-gray) 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--gradient);
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header & Progress */
        .header {
            background: rgba(32, 35, 42, 0.95);
            padding: 1rem 2rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 2px solid var(--react-blue);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--react-blue);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .progress-bar {
            width: 200px;
            height: 10px;
            background: #444;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--react-blue), var(--purple));
            width: 0%;
            transition: width 0.5s ease;
        }

        .xp-badge {
            background: var(--purple);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        /* Layout */
        .container {
            margin-top: 80px;
            display: grid;
            grid-template-columns: 250px 1fr;
            min-height: calc(100vh - 80px);
        }

        /* Navigation */
        .sidebar {
            background: rgba(40, 44, 52, 0.8);
            padding: 2rem 1rem;
            border-right: 1px solid #444;
            overflow-y: auto;
        }

        .nav-item {
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 3px solid transparent;
            position: relative;
        }

        .nav-item:hover {
            background: rgba(97, 218, 251, 0.1);
            transform: translateX(5px);
        }

        .nav-item.active {
            background: rgba(97, 218, 251, 0.2);
            border-left-color: var(--react-blue);
            color: var(--react-blue);
        }

        .nav-item.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-item.locked::after {
            content: 'üîí';
            position: absolute;
            right: 10px;
        }

        .nav-item.completed::before {
            content: '‚úì';
            color: var(--success);
            margin-right: 8px;
        }

        /* Main Content */
        .main-content {
            padding: 2rem;
            overflow-y: auto;
            max-width: 1200px;
        }

        .lesson-header {
            margin-bottom: 2rem;
        }

        .lesson-title {
            font-size: 2.5rem;
            color: var(--react-blue);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .lesson-subtitle {
            color: #888;
            font-size: 1.1rem;
        }

        /* Interactive Cards */
        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #444;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--react-blue);
        }

        .card.warning::before {
            background: var(--warning);
        }

        .card.danger::before {
            background: var(--danger);
        }

        .card.success::before {
            background: var(--success);
        }

        .card-title {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #fff;
        }

        /* Code Blocks */
        .code-block {
            background: #1e1e1e;
            border-radius: 8px;
            padding: 1.5rem;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 1rem 0;
            border: 1px solid #333;
            position: relative;
        }

        .code-block .comment {
            color: #6a9955;
        }

        .code-block .keyword {
            color: #569cd6;
        }

        .code-block .string {
            color: #ce9178;
        }

        .code-block .tag {
            color: #569cd6;
        }

        .code-block .attr {
            color: #9cdcfe;
        }

        .code-block .error {
            text-decoration: underline wavy var(--danger);
            background: rgba(244, 67, 54, 0.2);
        }

        /* Interactive Playground */
        .playground {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .editor {
            background: #1e1e1e;
            border-radius: 8px;
            padding: 1rem;
            border: 2px solid #444;
        }

        .editor:focus-within {
            border-color: var(--react-blue);
        }

        textarea {
            width: 100%;
            min-height: 200px;
            background: transparent;
            border: none;
            color: #d4d4d4;
            font-family: 'Courier New', monospace;
            resize: vertical;
            outline: none;
            font-size: 14px;
        }

        .preview {
            background: #fff;
            color: #333;
            border-radius: 8px;
            padding: 1.5rem;
            min-height: 200px;
            border: 2px solid var(--react-blue);
            position: relative;
        }

        .preview-label {
            position: absolute;
            top: -10px;
            left: 10px;
            background: var(--react-blue);
            color: #000;
            padding: 2px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* Visual Components */
        .visual-component {
            border: 2px dashed var(--react-blue);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
            background: rgba(97, 218, 251, 0.05);
            position: relative;
            transition: all 0.3s;
        }

        .visual-component:hover {
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(97, 218, 251, 0.3);
        }

        .component-label {
            position: absolute;
            top: -12px;
            left: 10px;
            background: var(--react-blue);
            color: #000;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .prop-pipe {
            height: 3px;
            background: var(--purple);
            margin: 0.5rem 0;
            position: relative;
            animation: flow 2s infinite;
        }

        @keyframes flow {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }

        .state-cell {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: var(--warning);
            color: #000;
            border-radius: 4px;
            margin: 0.25rem;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Quiz Styles */
        .quiz-container {
            background: linear-gradient(135deg, rgba(97, 218, 251, 0.1), rgba(187, 134, 252, 0.1));
            border: 2px solid var(--react-blue);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .quiz-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid #444;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quiz-option:hover {
            background: rgba(97, 218, 251, 0.1);
            border-color: var(--react-blue);
            transform: translateX(10px);
        }

        .quiz-option.correct {
            background: rgba(76, 175, 80, 0.2);
            border-color: var(--success);
        }

        .quiz-option.wrong {
            background: rgba(244, 67, 54, 0.2);
            border-color: var(--danger);
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Buttons */
        .btn {
            background: var(--react-blue);
            color: #000;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.3s;
            margin: 0.5rem 0.5rem 0.5rem 0;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(97, 218, 251, 0.4);
        }

        .btn.secondary {
            background: transparent;
            border: 2px solid var(--react-blue);
            color: var(--react-blue);
        }

        .btn.danger {
            background: var(--danger);
            color: white;
        }

        /* Mistake Highlight */
        .mistake-box {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--danger);
            padding: 1.5rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }

        .mistake-title {
            color: var(--danger);
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 0.5rem;
        }

        .fix-box {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--success);
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0 8px 8px 0;
        }

        /* Interactive Diagrams */
        .diagram {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .box {
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            position: relative;
            min-width: 120px;
        }

        .box.parent {
            background: var(--react-blue);
            color: #000;
            font-weight: bold;
        }

        .box.child {
            background: var(--purple);
            color: #000;
        }

        .arrow {
            font-size: 2rem;
            color: var(--react-blue);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Hook Visualizer */
        .hook-array {
            background: #2d2d2d;
            padding: 1rem;
            border-radius: 8px;
            font-family: monospace;
            margin: 1rem 0;
        }

        .hook-item {
            padding: 0.5rem;
            margin: 0.25rem 0;
            background: #3d3d3d;
            border-radius: 4px;
            border-left: 3px solid var(--warning);
        }

        .hook-item.active {
            border-left-color: var(--react-blue);
            background: rgba(97, 218, 251, 0.2);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            .sidebar {
                display: none;
            }
            .playground {
                grid-template-columns: 1fr;
            }
        }

        /* Success Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--react-gray);
            padding: 3rem;
            border-radius: 16px;
            border: 2px solid var(--react-blue);
            text-align: center;
            max-width: 500px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .trophy {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            border-bottom: 1px dotted var(--react-blue);
            cursor: help;
        }

        .tooltip:hover::after {
            content: attr(data-tip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: #000;
            color: #fff;
            padding: 0.5rem;
            border-radius: 4px;
            white-space: nowrap;
            font-size: 0.9rem;
            z-index: 100;
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="logo">
            <span>‚öõÔ∏è</span>
            <span>React Mastery Quest</span>
        </div>
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="xp-badge" id="xpDisplay">XP: 0</div>
        </div>
    </div>

    <div class="container">
        <aside class="sidebar">
            <div class="nav-item active" data-topic="intro" onclick="loadTopic('intro')">
                üéØ Mission Briefing
            </div>
            <div class="nav-item locked" data-topic="components" onclick="loadTopic('components')">
                üß© Components & JSX
            </div>
            <div class="nav-item locked" data-topic="props" onclick="loadTopic('props')">
                üì¶ Props & Data Flow
            </div>
            <div class="nav-item locked" data-topic="state" onclick="loadTopic('state')">
                üß† State & useState
            </div>
            <div class="nav-item locked" data-topic="events" onclick="loadTopic('events')">
                üéÆ Event Handling
            </div>
            <div class="nav-item locked" data-topic="effects" onclick="loadTopic('effects')">
                ‚ö° useEffect & Lifecycle
            </div>
            <div class="nav-item locked" data-topic="architecture" onclick="loadTopic('architecture')">
                üèóÔ∏è Component Architecture
            </div>
            <div class="nav-item locked" data-topic="final" onclick="loadTopic('final')">
                üèÜ Final Challenge
            </div>
        </aside>

        <main class="main-content" id="contentArea">
            <!-- Content injected via JS -->
        </main>
    </div>

    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="trophy">üèÜ</div>
            <h2>Level Complete!</h2>
            <p id="modalMessage">You've mastered this concept!</p>
            <button class="btn" onclick="closeModal()">Continue</button>
        </div>
    </div>

    <script>
        // Game State
        const gameState = {
            xp: 0,
            currentTopic: 'intro',
            completedTopics: [],
            unlockedTopics: ['intro']
        };

        // Lesson Data
        const lessons = {
            intro: {
                title: "Mission Briefing",
                subtitle: "Welcome to React Mastery",
                content: `
                    <div class="card">
                        <h3>Why React?</h3>
                        <p>React is a <span class="tooltip" data-tip="A library for building user interfaces">declarative</span> JavaScript library for building user interfaces. Instead of manipulating the DOM directly, you describe what you want, and React handles the updates efficiently.</p>
                        
                        <div class="diagram">
                            <div class="box parent">
                                Imperative<br>
                                <small>How to do it</small>
                            </div>
                            <div class="arrow">‚Üí</div>
                            <div class="box child">
                                Declarative<br>
                                <small>What to do</small>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>The React Mindset üß†</h3>
                        <p>Before we dive in, understand these core principles:</p>
                        <ul style="margin: 1rem 0; line-height: 2;">
                            <li>üîπ <strong>Components:</strong> Reusable, independent pieces of UI</li>
                            <li>üîπ <strong>One-way Data Flow:</strong> Data moves down, actions move up</li>
                            <li>üîπ <strong>Virtual DOM:</strong> React's secret for speed</li>
                            <li>üîπ <strong>Composition:</strong> Building complex UIs from simple pieces</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <h3>üéÆ Warm-up Quiz</h3>
                        <p>What is React's primary job?</p>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            A) To manage your database
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, true, 'intro')">
                            B) To build user interfaces efficiently
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            C) To replace JavaScript entirely
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            D) To style your CSS
                        </div>
                    </div>
                `
            },

            components: {
                title: "Components & JSX",
                subtitle: "The building blocks of React",
                content: `
                    <div class="card">
                        <h3>What is JSX? üé≠</h3>
                        <p>JSX is a syntax extension for JavaScript that looks like HTML but has superpowers. It's not mandatory, but it makes React much more readable.</p>
                        
                        <div class="code-block">
<div class="comment">// This looks like HTML, but it's JSX!</div>
<span class="keyword">const</span> element = (
  <span class="tag">&lt;div</span> <span class="attr">className</span>=<span class="string">"card"</span><span class="tag">&gt;</span>
    <span class="tag">&lt;h1&gt;</span>Hello, React!<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
);
                        </div>

                        <div class="mistake-box">
                            <div class="mistake-title">‚ö†Ô∏è Common Pitfall: class vs className</div>
                            <p>In JSX, use <code>className</code> instead of <code>class</code> (reserved JS keyword).</p>
                            <div class="code-block">
<span class="error">&lt;div class="btn"&gt;</span>  <span class="comment">// ‚ùå Wrong</span>
&lt;div <span class="attr">className</span>="btn"&gt;  <span class="comment">// ‚úÖ Correct</span>
                            </div>
                        </div>
                    </div>

                    <div class="card warning">
                        <h3>Interactive: JSX Transformer</h3>
                        <p>Type JSX on the left, see what React actually receives on the right:</p>
                        <div class="playground">
                            <div class="editor">
                                <textarea id="jsxInput" oninput="transformJSX(this.value)">&lt;div className="app"&gt;
  &lt;h1&gt;Hello&lt;/h1&gt;
&lt;/div&gt;</textarea>
                            </div>
                            <div class="preview" style="background: #1e1e1e; color: #d4d4d4; font-family: monospace;">
                                <div class="preview-label">JavaScript Output</div>
                                <pre id="jsxOutput">React.createElement("div", {className: "app"}, 
  React.createElement("h1", null, "Hello")
)</pre>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Functional Components üß©</h3>
                        <p>Components are just functions that return JSX. They must start with a capital letter!</p>
                        
                        <div class="code-block">
<span class="comment">// ‚úÖ Good: Starts with capital letter</span>
<span class="keyword">function</span> <span class="tag">Welcome</span>(props) {
  <span class="keyword">return</span> <span class="tag">&lt;h1&gt;</span>Hello, {props.name}<span class="tag">&lt;/h1&gt;</span>;
}

<span class="comment">// ‚ùå Bad: lowercase (React thinks it's an HTML tag)</span>
<span class="keyword">function</span> <span class="tag error">welcome</span>(props) { ... }
                        </div>

                        <div class="visual-component">
                            <div class="component-label">Welcome Component</div>
                            <p>Input: props = {name: "Alice"}</p>
                            <div class="prop-pipe"></div>
                            <p>Output: &lt;h1&gt;Hello, Alice&lt;/h1&gt;</p>
                        </div>
                    </div>

                    <div class="mistake-box">
                        <div class="mistake-title">üî• The Fragment Pitfall</div>
                        <p>Components must return a single parent element. Use Fragments (&lt;&gt;&lt;/&gt;) to avoid extra divs.</p>
                        <div class="code-block">
<span class="comment">// ‚ùå Error: Adjacent JSX elements</span>
<span class="keyword">return</span> (
  <span class="tag">&lt;h1&gt;</span>Title<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;p&gt;</span>Text<span class="tag">&lt;/p&gt;</span>
);

<span class="comment">// ‚úÖ Fixed with Fragment</span>
<span class="keyword">return</span> (
  <span class="tag">&lt;&gt;</span>
    <span class="tag">&lt;h1&gt;</span>Title<span class="tag">&lt;/h1&gt;</span>
    <span class="tag">&lt;p&gt;</span>Text<span class="tag">&lt;/p&gt;</span>
  <span class="tag">&lt;/&gt;</span>
);
                        </div>
                    </div>

                    <div class="quiz-container">
                        <h3>üéÆ Debug This!</h3>
                        <p>What's wrong with this component?</p>
                        <div class="code-block">
<span class="keyword">function</span> <span class="tag">greeting</span>() {
  <span class="keyword">return</span> <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"box"</span><span class="tag">&gt;</span>Hello<span class="tag">&lt;/div&gt;</span>;
}
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            A) Missing semicolon
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            B) Should use const instead of function
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, true, 'components')">
                            C) Component name lowercase and using 'class' instead of 'className'
                        </div>
                    </div>

                    <button class="btn" onclick="completeTopic('components')">Mark Complete ‚úì</button>
                `
            },

            props: {
                title: "Props & Data Flow",
                subtitle: "Passing data between components",
                content: `
                    <div class="card">
                        <h3>Understanding Props üì¶</h3>
                        <p>Props (properties) are how data flows from parent to child. They are <strong>read-only</strong>!</p>
                        
                        <div class="diagram">
                            <div class="box parent">
                                Parent<br>
                                <small>Has data</small>
                            </div>
                            <div class="arrow">props ‚Üí</div>
                            <div class="box child">
                                Child<br>
                                <small>Receives data</small>
                            </div>
                        </div>

                        <div class="code-block">
<span class="comment">// Parent Component</span>
<span class="keyword">function</span> <span class="tag">App</span>() {
  <span class="keyword">return</span> (
    <span class="tag">&lt;Welcome</span> <span class="attr">name</span>=<span class="string">"Alice"</span> <span class="attr">age</span>={<span class="number">25</span>} <span class="attr">isAdmin</span>={<span class="keyword">true</span>} <span class="tag">/&gt;</span>
  );
}

<span class="comment">// Child Component</span>
<span class="keyword">function</span> <span class="tag">Welcome</span>(props) {
  <span class="keyword">return</span> <span class="tag">&lt;h1&gt;</span>Hello {props.name}<span class="tag">&lt;/h1&gt;</span>;
}
                        </div>
                    </div>

                    <div class="card warning">
                        <h3>üéØ Interactive: Props Debugger</h3>
                        <p>Drag the props from parent to see how they flow:</p>
                        <div style="background: #2d2d2d; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                            <div style="margin-bottom: 1rem; padding: 1rem; background: var(--react-blue); color: #000; border-radius: 4px;">
                                <strong>Parent:</strong> &lt;UserCard name="John" role="Admin" /&gt;
                            </div>
                            <div style="display: flex; gap: 1rem; margin: 1rem 0;">
                                <div class="state-cell" style="cursor: pointer;" onclick="showPropDetail('name', 'John')">name: "John"</div>
                                <div class="state-cell" style="cursor: pointer;" onclick="showPropDetail('role', 'Admin')">role: "Admin"</div>
                            </div>
                            <div id="propDetail" style="padding: 1rem; background: #3d3d3d; border-radius: 4px; min-height: 60px;">
                                Click a prop above to see how the child receives it...
                            </div>
                        </div>
                    </div>

                    <div class="mistake-box">
                        <div class="mistake-title">üö´ Never Mutate Props!</div>
                        <p>Props are immutable. Trying to change them causes bugs and breaks React's optimization.</p>
                        <div class="code-block">
<span class="comment">// ‚ùå WRONG: Modifying props</span>
<span class="keyword">function</span> <span class="tag">Counter</span>(props) {
  props.count = props.count + <span class="number">1</span>;  <span class="comment">// Don't do this!</span>
  <span class="keyword">return</span> <span class="tag">&lt;div&gt;</span>{props.count}<span class="tag">&lt;/div&gt;</span>;
}

<span class="comment">// ‚úÖ CORRECT: Use state (we'll learn this next)</span>
<span class="keyword">function</span> <span class="tag">Counter</span>({ initialCount }) {
  <span class="keyword">const</span> [count, setCount] = useState(initialCount);
  <span class="keyword">return</span> <span class="tag">&lt;div&gt;</span>{count}<span class="tag">&lt;/div&gt;</span>;
}
                        </div>
                    </div>

                    <div class="card">
                        <h3>Destructuring Props ‚ú®</h3>
                        <p>Clean up your code by destructuring in the parameter:</p>
                        <div class="code-block">
<span class="comment">// Instead of props.name, props.age everywhere...</span>
<span class="keyword">function</span> <span class="tag">User</span>({ name, age, email }) {
  <span class="keyword">return</span> (
    <span class="tag">&lt;div&gt;</span>
      <span class="tag">&lt;h2&gt;</span>{name}<span class="tag">&lt;/h2&gt;</span>
      <span class="tag">&lt;p&gt;</span>{age} years old<span class="tag">&lt;/p&gt;</span>
      <span class="tag">&lt;p&gt;</span>{email}<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  );
}
                        </div>
                    </div>

                    <div class="quiz-container">
                        <h3>üéÆ Props Challenge</h3>
                        <p>Given: <code>&lt;Button text="Click" disabled={false} /&gt;</code></p>
                        <p>How do you access the text in the Button component?</p>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            A) <code>text</code> (direct variable)
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, true, 'props')">
                            B) <code>props.text</code> or destructured <code>{text}</code>
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            C) <code>this.props.text</code> (only in classes)
                        </div>
                    </div>

                    <button class="btn" onclick="completeTopic('props')">Mark Complete ‚úì</button>
                `
            },

            state: {
                title: "State & useState",
                subtitle: "Managing component memory",
                content: `
                    <div class="card">
                        <h3>What is State? üß†</h3>
                        <p>State is a component's private memory. When state changes, React re-renders the component automatically.</p>
                        
                        <div class="visual-component">
                            <div class="component-label">Component Memory</div>
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <div class="state-cell">count: 0</div>
                                <div class="state-cell">user: null</div>
                                <div class="state-cell">isOpen: false</div>
                            </div>
                            <p style="margin-top: 1rem; font-size: 0.9rem; color: #888;">
                                When any cell changes ‚Üí React updates the UI
                            </p>
                        </div>
                    </div>

                    <div class="card warning">
                        <h3>The useState Hook üé£</h3>
                        <p>useState gives you a value and a function to update it:</p>
                        <div class="code-block">
<span class="keyword">import</span> { useState } <span class="keyword">from</span> <span class="string">'react'</span>;

<span class="keyword">function</span> <span class="tag">Counter</span>() {
  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);
  <span class="comment">//    ^value  ^setter     ^initial value</span>

  <span class="keyword">return</span> (
    <span class="tag">&lt;div&gt;</span>
      <span class="tag">&lt;p&gt;</span>Count: {count}<span class="tag">&lt;/p&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">onClick</span>={() => setCount(count + <span class="number">1</span>)}<span class="tag">&gt;</span>
        Increment
      <span class="tag">&lt;/button&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  );
}
                        </div>

                        <div class="hook-array">
                            <div class="hook-item active">Index 0: useState(0) ‚Üí count = 0</div>
                            <div class="hook-item">Index 1: (available)</div>
                        </div>
                    </div>

                    <div class="card success">
                        <h3>üéÆ Interactive State Lab</h3>
                        <p>Click the buttons to see how React processes state updates:</p>
                        <div style="background: #1e1e1e; padding: 2rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;" id="demoCount">0</div>
                            <div style="display: flex; gap: 1rem; justify-content: center;">
                                <button class="btn" onclick="updateDemoCount(-1)">-</button>
                                <button class="btn" onclick="updateDemoCount(1)">+</button>
                                <button class="btn secondary" onclick="resetDemoCount()">Reset</button>
                            </div>
                            <div style="margin-top: 1rem; padding: 1rem; background: #2d2d2d; border-radius: 4px; font-family: monospace; font-size: 0.9rem;">
                                <div id="stateLog">State initialized: 0</div>
                            </div>
                        </div>
                    </div>

                    <div class="mistake-box">
                        <div class="mistake-title">‚ö†Ô∏è Async State Updates</div>
                        <p>State updates are batched and asynchronous. If you need the previous value, use a function!</p>
                        <div class="code-block">
<span class="comment">// ‚ùå Might be stale if called rapidly</span>
setCount(count + <span class="number">1</span>);
setCount(count + <span class="number">1</span>);  <span class="comment">// Same value, not +2!</span>

<span class="comment">// ‚úÖ Guaranteed to use latest state</span>
setCount(<span class="attr">prev</span> => prev + <span class="number">1</span>);
setCount(<span class="attr">prev</span> => prev + <span class="number">1</span>);  <span class="comment">// Now +2!</span>
                        </div>
                    </div>

                    <div class="mistake-box">
                        <div class="mistake-title">üö´ Direct Mutation</div>
                        <p>Never mutate state directly. Always create new references.</p>
                        <div class="code-block">
<span class="comment">// ‚ùå Wrong: Mutating array</span>
<span class="keyword">const</span> [items, setItems] = useState([<span class="string">'a'</span>, <span class="string">'b'</span>]);
items.push(<span class="string">'c'</span>);  <span class="comment">// Mutation!</span>
setItems(items);  <span class="comment">// React won't detect change</span>

<span class="comment">// ‚úÖ Correct: New array reference</span>
setItems([...items, <span class="string">'c'</span>]);  <span class="comment">// Spread creates copy</span>

<span class="comment">// ‚ùå Wrong: Mutating object</span>
<span class="keyword">const</span> [user, setUser] = useState({name: <span class="string">'John'</span>});
user.name = <span class="string">'Jane'</span>;  <span class="comment">// Mutation!</span>

<span class="comment">// ‚úÖ Correct: New object</span>
setUser({...user, name: <span class="string">'Jane'</span>});
                        </div>
                    </div>

                    <div class="card">
                        <h3>Complex State: Objects & Arrays</h3>
                        <p>When updating objects/arrays, remember to spread the existing data:</p>
                        <div class="code-block">
<span class="keyword">const</span> [form, setForm] = useState({
  username: <span class="string">''</span>,
  email: <span class="string">''</span>,
  age: <span class="number">0</span>
});

<span class="comment">// Update one field without losing others</span>
<span class="keyword">const</span> updateField = (field, value) => {
  setForm(<span class="attr">prev</span> => ({
    ...prev,           <span class="comment">// Copy existing</span>
    [field]: value    <span class="comment">// Override specific field</span>
  }));
};
                        </div>
                    </div>

                    <div class="quiz-container">
                        <h3>üéÆ State Inspector</h3>
                        <p>What will this log?</p>
                        <div class="code-block">
<span class="keyword">const</span> [x, setX] = useState(<span class="number">10</span>);
console.log(x);  <span class="comment">// Line 1</span>
setX(<span class="number">20</span>);
console.log(x);  <span class="comment">// Line 2</span>
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            A) 10, 20
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, true, 'state')">
                            B) 10, 10 (state is stale until next render)
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            C) 20, 20
                        </div>
                    </div>

                    <button class="btn" onclick="completeTopic('state')">Mark Complete ‚úì</button>
                `
            },

            events: {
                title: "Event Handling",
                subtitle: "Responding to user interactions",
                content: `
                    <div class="card">
                        <h3>Synthetic Events üéÆ</h3>
                        <p>React wraps native events in a <span class="tooltip" data-tip="Cross-browser compatible event system">SyntheticEvent</span> for consistency.</p>
                        
                        <div class="code-block">
<span class="comment">// JSX uses camelCase, not lowercase</span>
<span class="tag">&lt;button</span> <span class="attr">onClick</span>={handleClick}<span class="tag">&gt;</span>  <span class="comment">// ‚úÖ</span>
<span class="tag">&lt;button</span> <span class="attr error">onclick</span>={handleClick}<span class="tag">&gt;</span>  <span class="comment">// ‚ùå HTML attribute</span>

<span class="comment">// With arguments (arrow function)</span>
<span class="tag">&lt;button</span> <span class="attr">onClick</span>={() => handleDelete(id)}<span class="tag">&gt;</span>
  Delete
<span class="tag">&lt;/button&gt;</span>
                        </div>
                    </div>

                    <div class="card warning">
                        <h3>The Binding Trap üï∏Ô∏è</h3>
                        <p>In functional components, you don't need to worry about <code>this</code> binding. But in class components (legacy code):</p>
                        <div class="code-block">
<span class="comment">// Class component pitfalls</span>
<span class="keyword">class</span> <span class="tag">Button</span> <span class="keyword">extends</span> React.Component {
  handleClick() {
    <span class="comment">// 'this' is undefined here!</span>
    console.log(<span class="keyword">this</span>.props);
  }

  render() {
    <span class="comment">// ‚ùå Wrong: this is undefined when called</span>
    <span class="keyword">return</span> <span class="tag">&lt;button</span> <span class="attr">onClick</span>={<span class="keyword">this</span>.handleClick}<span class="tag">&gt;</span>Click<span class="tag">&lt;/button&gt;</span>;
    
    <span class="comment">// ‚úÖ Fixed: Arrow function in render</span>
    <span class="keyword">return</span> <span class="tag">&lt;button</span> <span class="attr">onClick</span>={() => <span class="keyword">this</span>.handleClick()}<span class="tag">&gt;</span>Click<span class="tag">&lt;/button&gt;</span>;
    
    <span class="comment">// ‚úÖ Better: Arrow function method</span>
    handleClick = () => { ... }
  }
}
                        </div>
                        <p><strong>Modern solution:</strong> Just use functional components! üéâ</p>
                    </div>

                    <div class="card">
                        <h3>Form Handling üìù</h3>
                        <p>Controlled vs Uncontrolled components:</p>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1rem 0;">
                            <div style="padding: 1rem; background: rgba(76, 175, 80, 0.1); border-radius: 8px; border: 1px solid var(--success);">
                                <h4>‚úÖ Controlled</h4>
                                <p style="font-size: 0.9rem;">React controls the value via state</p>
                                <div class="code-block" style="font-size: 0.8rem;">
&lt;input 
  value={text}
  onChange={e => setText(e.target.value)}
/&gt;
                                </div>
                            </div>
                            <div style="padding: 1rem; background: rgba(255, 152, 0, 0.1); border-radius: 8px; border: 1px solid var(--warning);">
                                <h4>‚ö†Ô∏è Uncontrolled</h4>
                                <p style="font-size: 0.9rem;">DOM maintains its own state</p>
                                <div class="code-block" style="font-size: 0.8rem;">
&lt;input ref={inputRef} /&gt;
<span class="comment">// Access via ref.current.value</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mistake-box">
                        <div class="mistake-title">üö´ Prevent Default</div>
                        <p>Don't forget to prevent default behavior for forms and links:</p>
                        <div class="code-block">
<span class="keyword">const</span> handleSubmit = (e) => {
  e.preventDefault();  <span class="comment">// ‚ùå Never forget this!</span>
  <span class="comment">// Now process form...</span>
};

<span class="tag">&lt;form</span> <span class="attr">onSubmit</span>={handleSubmit}<span class="tag">&gt;</span>...<span class="tag">&lt;/form&gt;</span>
                        </div>
                    </div>

                    <div class="quiz-container">
                        <h3>üéÆ Event Challenge</h3>
                        <p>How do you pass the ID to the handler?</p>
                        <div class="code-block">
<span class="tag">&lt;button</span> <span class="attr">onClick</span>={???}<span class="tag">&gt;</span>Delete Item {id}<span class="tag">&lt;/button&gt;</span>
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            A) <code>onClick={handleDelete(id)}</code>
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, true, 'events')">
                            B) <code>onClick={() => handleDelete(id)}</code>
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            C) <code>onClick={handleDelete.bind(id)}</code>
                        </div>
                        <p style="margin-top: 1rem; font-size: 0.9rem; color: #888;">
                            Hint: Option A calls the function immediately during render!
                        </p>
                    </div>

                    <button class="btn" onclick="completeTopic('events')">Mark Complete ‚úì</button>
                `
            },

            effects: {
                title: "useEffect & Lifecycle",
                subtitle: "Side effects and synchronization",
                content: `
                    <div class="card">
                        <h3>The Effect Hook ‚ö°</h3>
                        <p>useEffect lets you perform side effects: data fetching, subscriptions, or manual DOM manipulation.</p>
                        
                        <div class="code-block">
useEffect(() => {
  <span class="comment">// Side effect code runs here</span>
  console.log(<span class="string">'Component mounted or updated'</span>);
  
  <span class="comment">// Optional cleanup function</span>
  <span class="keyword">return</span> () => {
    console.log(<span class="string">'Cleanup before next effect or unmount'</span>);
  };
}, [dependencies]);  <span class="comment">// When to re-run</span>
                        </div>

                        <div class="visual-component">
                            <div class="component-label">Effect Lifecycle</div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem;">
                                <div style="text-align: center;">
                                    <div style="font-size: 2rem;">üèîÔ∏è</div>
                                    <small>Mount</small>
                                </div>
                                <div style="flex: 1; height: 2px; background: var(--react-blue); margin: 0 1rem;"></div>
                                <div style="text-align: center;">
                                    <div style="font-size: 2rem;">üîÑ</div>
                                    <small>Update</small>
                                </div>
                                <div style="flex: 1; height: 2px; background: var(--react-blue); margin: 0 1rem;"></div>
                                <div style="text-align: center;">
                                    <div style="font-size: 2rem;">üßπ</div>
                                    <small>Unmount</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card warning">
                        <h3>Dependency Array Patterns üìä</h3>
                        <div class="code-block">
<span class="comment">// [] - Run once on mount (like componentDidMount)</span>
useEffect(() => {
  fetchData();
}, []);

<span class="comment">// [prop] - Run when prop changes</span>
useEffect(() => {
  console.log(<span class="string">'User changed:'</span>, userId);
}, [userId]);

<span class="comment">// No array - Run on every render (rarely needed)</span>
useEffect(() => {
  console.log(<span class="string">'Every render'</span>);
});

<span class="comment">// Cleanup - Run before effect re-runs or unmount</span>
useEffect(() => {
  <span class="keyword">const</span> timer = setInterval(() => {}, <span class="number">1000</span>);
  <span class="keyword">return</span> () => clearInterval(timer);  <span class="comment">// Cleanup!</span>
}, []);
                        </div>
                    </div>

                    <div class="mistake-box">
                        <div class="mistake-title">üî• Infinite Loop Warning</div>
                        <p>Calling setState inside useEffect without proper dependencies causes infinite re-renders:</p>
                        <div class="code-block">
<span class="comment">// ‚ùå Infinite loop!</span>
useEffect(() => {
  setCount(count + <span class="number">1</span>);
}, [count]);  <span class="comment">// count changes ‚Üí effect runs ‚Üí setCount ‚Üí count changes...</span>

<span class="comment">// ‚úÖ Fixed with functional update</span>
useEffect(() => {
  <span class="keyword">const</span> timer = setTimeout(() => {
    setCount(<span class="attr">c</span> => c + <span class="number">1</span>);
  }, <span class="number">1000</span>);
  <span class="keyword">return</span> () => clearTimeout(timer);
}, []);  <span class="comment">// Empty deps - only runs on mount</span>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Fetch Data Pattern üåê</h3>
                        <p>The correct way to fetch data in React:</p>
                        <div class="code-block">
useEffect(() => {
  <span class="keyword">let</span> cancelled = <span class="keyword">false</span>;
  
  <span class="keyword">async function</span> fetchData() {
    <span class="keyword">const</span> res = <span class="keyword">await</span> fetch(<span class="string">'/api/user'</span>);
    <span class="keyword">const</span> data = <span class="keyword">await</span> res.json();
    
    <span class="comment">// Prevent setting state on unmounted component</span>
    <span class="keyword">if</span> (!cancelled) {
      setUser(data);
    }
  }
  
  fetchData();
  
  <span class="comment">// Cleanup prevents memory leaks</span>
  <span class="keyword">return</span> () => { cancelled = <span class="keyword">true</span>; };
}, []);
                        </div>
                    </div>

                    <div class="mistake-box">
                        <div class="mistake-title">‚ö†Ô∏è Missing Dependencies</div>
                        <p>ESLint's exhaustive-deps rule is your friend. Don't ignore it!</p>
                        <div class="code-block">
<span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);

<span class="comment">// ‚ùå ESLint warning: React Hook useEffect has missing dependency 'count'</span>
useEffect(() => {
  console.log(count);
}, []);  <span class="comment">// Forgot to include count!</span>

<span class="comment">// ‚úÖ Include all dependencies</span>
useEffect(() => {
  console.log(count);
}, [count]);
                        </div>
                    </div>

                    <div class="quiz-container">
                        <h3>üéÆ Effect Challenge</h3>
                        <p>When does this effect run?</p>
                        <div class="code-block">
useEffect(() => {
  console.log(<span class="string">'Hello'</span>);
}, [user]);
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            A) Only once when component mounts
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, true, 'effects')">
                            B) On mount AND whenever 'user' changes
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            C) Every time component re-renders
                        </div>
                    </div>

                    <button class="btn" onclick="completeTopic('effects')">Mark Complete ‚úì</button>
                `
            },

            architecture: {
                title: "Component Architecture",
                subtitle: "Thinking in React",
                content: `
                    <div class="card">
                        <h3>Thinking in React üß©</h3>
                        <p>Break UI into a component hierarchy following the Single Responsibility Principle:</p>
                        
                        <div style="background: #2d2d2d; padding: 2rem; border-radius: 8px; margin: 1rem 0;">
                            <div class="visual-component">
                                <div class="component-label">FilterableProductTable (Orange)</div>
                                <div style="margin-left: 2rem;">
                                    <div class="visual-component">
                                        <div class="component-label">SearchBar (Blue)</div>
                                    </div>
                                    <div class="visual-component">
                                        <div class="component-label">ProductTable (Blue)</div>
                                        <div style="margin-left: 2rem;">
                                            <div class="visual-component">
                                                <div class="component-label">ProductCategoryRow (Green)</div>
                                            </div>
                                            <div class="visual-component">
                                                <div class="component-label">ProductRow (Green)</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p style="text-align: center; margin-top: 1rem; color: #888;">
                                Orange: Container | Blue: Components | Green: Leaves
                            </p>
                        </div>
                    </div>

                    <div class="card warning">
                        <h3>Container vs Presentational üé≠</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1rem 0;">
                            <div>
                                <h4>Container (Smart)</h4>
                                <ul style="line-height: 1.8; margin-left: 1rem;">
                                    <li>Knows about data</li>
                                    <li>Contains business logic</li>
                                    <li>Passes data down</li>
                                    <li>Usually no styling</li>
                                </ul>
                            </div>
                            <div>
                                <h4>Presentational (Dumb)</h4>
                                <ul style="line-height: 1.8; margin-left: 1rem;">
                                    <li>Receives props</li>
                                    <li>Renders UI</li>
                                    <li>Reusable</li>
                                    <li>No side effects</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="mistake-box">
                        <div class="mistake-title">üö´ Prop Drilling</div>
                        <p>Avoid passing props through many layers. Use Context or composition:</p>
                        <div class="code-block">
<span class="comment">// ‚ùå Drilling: App ‚Üí Page ‚Üí Section ‚Üí Card ‚Üí Button</span>
<span class="tag">&lt;App&gt;</span>
  <span class="tag">&lt;Page</span> <span class="attr">user</span>={user}<span class="tag">&gt;</span>
    <span class="tag">&lt;Section</span> <span class="attr">user</span>={user}<span class="tag">&gt;</span>
      <span class="tag">&lt;Card</span> <span class="attr">user</span>={user}<span class="tag">&gt;</span>
        <span class="tag">&lt;Button</span> <span class="attr">user</span>={user} <span class="tag">/&gt;</span>
      <span class="tag">&lt;/Card&gt;</span>
    <span class="tag">&lt;/Section&gt;</span>
  <span class="tag">&lt;/Page&gt;</span>
<span class="tag">&lt;/App&gt;</span>

<span class="comment">// ‚úÖ Better: Context or render props</span>
<span class="tag">&lt;UserContext.Provider</span> <span class="attr">value</span>={user}<span class="tag">&gt;</span>
  <span class="tag">&lt;App /&gt;</span>
<span class="tag">&lt;/UserContext.Provider&gt;</span>
<span class="comment">// Button can now use useContext(UserContext)</span>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Lifting State Up ‚¨ÜÔ∏è</h3>
                        <p>When two components need to share state, move it to their closest common ancestor.</p>
                        
                        <div class="diagram">
                            <div class="box child">Input A<br><small>needs temp</small></div>
                            <div class="box parent" style="grid-column: span 2;">Parent<br><small>owns state</small></div>
                            <div class="box child">Input B<br><small>needs temp</small></div>
                        </div>
                    </div>

                    <div class="mistake-box">
                        <div class="mistake-title">‚ö†Ô∏è Premature Abstraction</div>
                        <p>Don't split into components too early. Wait for patterns to emerge:</p>
                        <blockquote style="border-left: 3px solid var(--warning); padding-left: 1rem; margin: 1rem 0; font-style: italic;">
                            "Prefer duplication over the wrong abstraction." ‚Äî Sandi Metz
                        </blockquote>
                    </div>

                    <div class="card success">
                        <h3>üéØ Architecture Checklist</h3>
                        <ul style="list-style: none; line-height: 2;">
                            <li>‚òê Does each component have one job?</li>
                            <li>‚òê Is state placed as low as possible (but shared high enough)?</li>
                            <li>‚òê Are you avoiding prop drilling (>3 levels)?</li>
                            <li>‚òê Are presentational components pure?</li>
                            <li>‚òê Is side-effect logic isolated?</li>
                        </ul>
                    </div>

                    <button class="btn" onclick="completeTopic('architecture')">Mark Complete ‚úì</button>
                `
            },

            final: {
                title: "Final Challenge: Build a Task Manager",
                subtitle: "Apply everything you've learned",
                content: `
                    <div class="card">
                        <h3>üèÜ The Challenge</h3>
                        <p>Build a Task Manager with the following features:</p>
                        <ol style="line-height: 2; margin: 1rem 0 1rem 2rem;">
                            <li>Add new tasks (controlled form)</li>
                            <li>Mark tasks as complete (state update)</li>
                            <li>Delete tasks (event handling)</li>
                            <li>Filter by status (all/active/completed)</li>
                            <li>Persist to localStorage (useEffect)</li>
                        </ol>
                    </div>

                    <div class="card warning">
                        <h3>üéÆ Interactive Validator</h3>
                        <p>Paste your solution code below to check for common mistakes:</p>
                        <div class="editor">
                            <textarea id="finalCode" placeholder="// Paste your React component here...
function TaskManager() {
  const [tasks, setTasks] = useState([]);
  
  // Your code here...
  
  return <div>...</div>;
}"></textarea>
                        </div>
                        <button class="btn" onclick="validateFinalCode()">Analyze Code üîç</button>
                        <div id="validationResults" style="margin-top: 1rem;"></div>
                    </div>

                    <div class="card success">
                        <h3>‚ú® Solution Architecture</h3>
                        <div class="code-block">
<span class="comment">// Component Structure:</span>
<span class="tag">App</span>
‚îú‚îÄ <span class="tag">TaskForm</span> (onSubmit prop)
‚îú‚îÄ <span class="tag">FilterButtons</span> (currentFilter, onChange)
‚îî‚îÄ <span class="tag">TaskList</span>
   ‚îî‚îÄ <span class="tag">TaskItem</span> (task, onToggle, onDelete)

<span class="comment">// State location:</span>
<span class="comment">// - tasks[] in App (lifted up)</span>
<span class="comment">// - filter in App (shared by Filter and List)</span>
<span class="comment">// - form inputs in TaskForm (local state)</span>
                        </div>
                    </div>

                    <div class="quiz-container">
                        <h3>üéì Graduation Quiz</h3>
                        <p>Which hook is best for fetching data when a component mounts?</p>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            A) useState
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, true, 'final')">
                            B) useEffect with empty dependency array
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            C) useContext
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false)">
                            D) useReducer only
                        </div>
                    </div>

                    <button class="btn" onclick="graduate()" style="font-size: 1.2rem; padding: 1rem 2rem;">
                        üéì Claim React Mastery Certificate
                    </button>
                `
            }
        };

        // Utility Functions
        function loadTopic(topicId) {
            if (!gameState.unlockedTopics.includes(topicId)) return;
            
            gameState.currentTopic = topicId;
            const lesson = lessons[topicId];
            
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active');
                if (el.dataset.topic === topicId) el.classList.add('active');
            });

            // Render content
            document.getElementById('contentArea').innerHTML = `
                <div class="lesson-header">
                    <h1 class="lesson-title">${lesson.title}</h1>
                    <p class="lesson-subtitle">${lesson.subtitle}</p>
                </div>
                ${lesson.content}
            `;

            // Initialize any interactive elements
            if (topicId === 'components') {
                transformJSX(document.getElementById('jsxInput')?.value || '');
            }
        }

        function checkAnswer(element, isCorrect, topicId) {
            // Remove previous classes
            document.querySelectorAll('.quiz-option').forEach(el => {
                el.classList.remove('correct', 'wrong');
                el.onclick = null; // Disable further clicks
            });

            if (isCorrect) {
                element.classList.add('correct');
                addXP(50);
                showModal('Correct! +50 XP', 'Great job! You\'ve mastered this concept.');
                
                if (topicId && !gameState.completedTopics.includes(topicId)) {
                    setTimeout(() => completeTopic(topicId), 1500);
                }
            } else {
                element.classList.add('wrong');
                showModal('Not quite!', 'Review the material and try again. Mistakes are part of learning!');
                // Re-enable clicks after delay
                setTimeout(() => {
                    document.querySelectorAll('.quiz-option').forEach(el => {
                        el.classList.remove('correct', 'wrong');
                        el.onclick = function() { checkAnswer(this, this.dataset.correct === 'true', topicId); };
                    });
                }, 2000);
            }
        }

        function completeTopic(topicId) {
            if (!gameState.completedTopics.includes(topicId)) {
                gameState.completedTopics.push(topicId);
                addXP(100);
                
                // Unlock next topic
                const topics = ['intro', 'components', 'props', 'state', 'events', 'effects', 'architecture', 'final'];
                const currentIndex = topics.indexOf(topicId);
                if (currentIndex < topics.length - 1) {
                    const nextTopic = topics[currentIndex + 1];
                    if (!gameState.unlockedTopics.includes(nextTopic)) {
                        gameState.unlockedTopics.push(nextTopic);
                        document.querySelector(`[data-topic="${nextTopic}"]`)?.classList.remove('locked');
                    }
                }
                
                updateProgress();
                showModal('Topic Complete! üéâ', `You've mastered ${topicId}! +100 XP`);
            }
        }

        function addXP(amount) {
            gameState.xp += amount;
            document.getElementById('xpDisplay').textContent = `XP: ${gameState.xp}`;
        }

        function updateProgress() {
            const total = 8;
            const completed = gameState.completedTopics.length;
            const percent = (completed / total) * 100;
            document.getElementById('progressBar').style.width = percent + '%';
        }

        function showModal(title, message) {
            document.getElementById('modalMessage').textContent = message;
            document.querySelector('.modal-content h2').textContent = title;
            document.getElementById('successModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('successModal').style.display = 'none';
        }

        // Interactive Features
        function transformJSX(code) {
            // Simple JSX to JS simulation
            const output = code
                .replace(/className=/g, 'class=')
                .replace(/<(\w+)([^>]*)>/g, 'React.createElement("$1"$2, ')
                .replace(/<\/(\w+)>/g, ')')
                .replace(/{([^}]+)}/g, ', $1');
            
            document.getElementById('jsxOutput').textContent = output || '// Type JSX to see output';
        }

        function showPropDetail(key, value) {
            const detail = document.getElementById('propDetail');
            detail.innerHTML = `
                <strong>Child receives:</strong><br>
                props.${key} = "${value}"<br>
                <span style="color: #888; font-size: 0.9rem;">
                Access via: destructuring { ${key} } or props.${key}
                </span>
            `;
        }

        let demoCounter = 0;
        function updateDemoCount(change) {
            demoCounter += change;
            document.getElementById('demoCount').textContent = demoCounter;
            document.getElementById('stateLog').innerHTML += `
                <div style="color: var(--react-blue);">‚Üí setCount(${demoCounter})</div>
                <div style="color: #888;">React re-renders: ${demoCounter}</div>
            `;
        }

        function resetDemoCount() {
            demoCounter = 0;
            document.getElementById('demoCount').textContent = 0;
            document.getElementById('stateLog').innerHTML = 'State initialized: 0';
        }

        function validateFinalCode() {
            const code = document.getElementById('finalCode').value;
            const results = document.getElementById('validationResults');
            let feedback = [];
            
            if (code.includes('props') && !code.includes('useState')) {
                feedback.push('‚ö†Ô∏è Did you forget to use useState for task management?');
            }
            if (code.includes('useEffect') && code.includes('[]')) {
                feedback.push('‚úÖ Good! Using useEffect for side effects');
            }
            if (code.includes('tasks.push')) {
                feedback.push('‚ùå Critical: Never mutate state directly with .push()');
            }
            if (code.includes('setTasks([...tasks,')) {
                feedback.push('‚úÖ Excellent! Using spread operator for immutable updates');
            }
            if (code.includes('e.preventDefault()')) {
                feedback.push('‚úÖ Good! Preventing default form submission');
            }
            if (code.includes('key={')) {
                feedback.push('‚úÖ Nice! Using keys for list items');
            } else {
                feedback.push('‚ö†Ô∏è Remember to add unique keys to list items');
            }
            
            results.innerHTML = feedback.map(f => `<div style="margin: 0.5rem 0; padding: 0.5rem; background: ${f.includes('‚ùå') ? 'rgba(244,67,54,0.2)' : f.includes('‚úÖ') ? 'rgba(76,175,80,0.2)' : 'rgba(255,152,0,0.2)'}; border-radius: 4px;">${f}</div>`).join('');
        }

        function graduate() {
            const percent = Math.round((gameState.completedTopics.length / 7) * 100);
            showModal('üéì Congratulations!', `You are ${percent}% ready for a React job interview! Review any incomplete topics and build projects to solidify your knowledge.`);
        }

        // Initialize
        window.onload = () => {
            loadTopic('intro');
            updateProgress();
        };

        // Close modal on outside click
        window.onclick = (e) => {
            if (e.target.id === 'successModal') closeModal();
        };
    </script>
</body>
</html>