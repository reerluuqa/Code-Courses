<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>React Routing Mastery üöÄ</title>
<style>
/* ===== CSS RESET & VARIABLES ===== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg-dark: #0f0f23;
  --bg-card: #1a1a2e;
  --bg-code: #0d1117;
  --accent-blue: #61dafb;
  --accent-green: #50fa7b;
  --accent-orange: #ffb86c;
  --accent-pink: #ff79c6;
  --accent-purple: #bd93f9;
  --accent-red: #ff5555;
  --accent-yellow: #f1fa8c;
  --text-primary: #f8f8f2;
  --text-secondary: #8892b0;
  --text-dim: #6272a4;
  --border: #2a2a4a;
  --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  --shadow: 0 8px 32px rgba(0,0,0,0.3);
  --radius: 12px;
}

body {
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  background: var(--bg-dark);
  color: var(--text-primary);
  line-height: 1.7;
  overflow-x: hidden;
}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: var(--bg-dark); }
::-webkit-scrollbar-thumb { background: var(--accent-purple); border-radius: 4px; }

/* ===== HEADER ===== */
.app-header {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
  padding: 20px 30px;
  position: sticky;
  top: 0;
  z-index: 100;
  border-bottom: 2px solid var(--accent-blue);
  box-shadow: 0 4px 20px rgba(97, 218, 251, 0.15);
}

.header-content {
  max-width: 1400px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 15px;
}

.logo {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 1.4em;
  font-weight: 800;
}

.logo-icon {
  width: 45px;
  height: 45px;
  background: var(--gradient-3);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3em;
  animation: spin 8s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.progress-bar-container {
  flex: 1;
  max-width: 400px;
  min-width: 200px;
}

.progress-label {
  font-size: 0.8em;
  color: var(--accent-green);
  margin-bottom: 4px;
  text-align: right;
}

.progress-bar {
  height: 10px;
  background: var(--bg-dark);
  border-radius: 5px;
  overflow: hidden;
  border: 1px solid var(--border);
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));
  border-radius: 5px;
  transition: width 0.5s ease;
  width: 0%;
}

.xp-display {
  background: var(--bg-card);
  padding: 8px 18px;
  border-radius: 20px;
  font-weight: 700;
  color: var(--accent-yellow);
  border: 1px solid var(--accent-yellow);
  font-size: 0.9em;
}

/* ===== NAVIGATION TABS ===== */
.nav-tabs {
  background: var(--bg-card);
  padding: 0;
  border-bottom: 1px solid var(--border);
  overflow-x: auto;
  white-space: nowrap;
}

.nav-tabs-inner {
  max-width: 1400px;
  margin: 0 auto;
  display: flex;
  padding: 0 20px;
}

.nav-tab {
  padding: 14px 22px;
  cursor: pointer;
  color: var(--text-secondary);
  font-weight: 600;
  font-size: 0.88em;
  border-bottom: 3px solid transparent;
  transition: all 0.3s;
  position: relative;
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.nav-tab:hover {
  color: var(--accent-blue);
  background: rgba(97, 218, 251, 0.05);
}

.nav-tab.active {
  color: var(--accent-blue);
  border-bottom-color: var(--accent-blue);
}

.nav-tab .tab-num {
  background: var(--bg-dark);
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75em;
}

.nav-tab.completed .tab-num {
  background: var(--accent-green);
  color: var(--bg-dark);
}

/* ===== MAIN CONTENT ===== */
.main-container {
  max-width: 1100px;
  margin: 0 auto;
  padding: 30px 20px 60px;
}

.section {
  display: none;
}

.section.active {
  display: block;
  animation: fadeIn 0.4s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(15px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ===== CARDS ===== */
.card {
  background: var(--bg-card);
  border-radius: var(--radius);
  padding: 28px;
  margin-bottom: 24px;
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
}

.card-title {
  font-size: 1.4em;
  font-weight: 700;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .emoji { font-size: 1.3em; }

/* ===== SECTION HEADERS ===== */
.section-hero {
  text-align: center;
  padding: 40px 20px;
  margin-bottom: 30px;
  background: linear-gradient(135deg, rgba(97,218,251,0.1), rgba(189,147,249,0.1));
  border-radius: var(--radius);
  border: 1px solid var(--border);
}

.section-hero h1 {
  font-size: 2.2em;
  margin-bottom: 10px;
  background: var(--gradient-3);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.section-hero p {
  color: var(--text-secondary);
  font-size: 1.1em;
  max-width: 600px;
  margin: 0 auto;
}

/* ===== CODE BLOCKS ===== */
.code-block {
  background: var(--bg-code);
  border-radius: 8px;
  padding: 20px;
  margin: 16px 0;
  overflow-x: auto;
  font-family: 'Fira Code', 'Cascadia Code', 'Consolas', monospace;
  font-size: 0.88em;
  line-height: 1.8;
  border: 1px solid #21262d;
  position: relative;
}

.code-block .code-label {
  position: absolute;
  top: 8px;
  right: 12px;
  font-size: 0.7em;
  color: var(--text-dim);
  font-family: 'Segoe UI', sans-serif;
  background: var(--bg-code);
  padding: 2px 8px;
  border-radius: 4px;
}

.code-block .line-num {
  color: var(--text-dim);
  user-select: none;
  display: inline-block;
  width: 30px;
  text-align: right;
  margin-right: 16px;
}

.kw { color: var(--accent-pink); }
.fn { color: var(--accent-green); }
.str { color: var(--accent-yellow); }
.cmt { color: var(--text-dim); font-style: italic; }
.comp { color: var(--accent-blue); }
.prop { color: var(--accent-orange); }
.tag { color: var(--accent-pink); }
.attr { color: var(--accent-green); }
.val { color: var(--accent-yellow); }
.op { color: var(--accent-pink); }
.num { color: var(--accent-purple); }
.hook { color: var(--accent-blue); }
.type { color: var(--accent-purple); }

.highlight-line {
  background: rgba(97, 218, 251, 0.08);
  display: block;
  margin: 0 -20px;
  padding: 0 20px;
  border-left: 3px solid var(--accent-blue);
}

/* ===== VISUAL DIAGRAMS ===== */
.diagram-container {
  background: linear-gradient(135deg, #0d1117, #161b22);
  border-radius: var(--radius);
  padding: 30px;
  margin: 20px 0;
  border: 1px solid var(--border);
  overflow-x: auto;
}

.url-anatomy {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: center;
  gap: 4px;
  font-family: monospace;
  font-size: 1.1em;
  margin: 20px 0;
}

.url-part {
  padding: 8px 12px;
  border-radius: 6px;
  position: relative;
  cursor: pointer;
  transition: transform 0.2s;
}

.url-part:hover {
  transform: translateY(-3px);
}

.url-part .tooltip {
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: var(--bg-card);
  color: var(--text-primary);
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 0.7em;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s;
  border: 1px solid var(--border);
  font-family: 'Segoe UI', sans-serif;
  margin-bottom: 5px;
}

.url-part:hover .tooltip { opacity: 1; }

.url-protocol { background: rgba(80, 250, 123, 0.2); color: var(--accent-green); }
.url-domain { background: rgba(97, 218, 251, 0.2); color: var(--accent-blue); }
.url-path { background: rgba(255, 121, 198, 0.2); color: var(--accent-pink); }
.url-param { background: rgba(255, 184, 108, 0.2); color: var(--accent-orange); }
.url-query { background: rgba(189, 147, 249, 0.2); color: var(--accent-purple); }

/* Route tree */
.route-tree {
  display: flex;
  flex-direction: column;
  gap: 0;
  padding: 10px 0;
}

.route-node {
  display: flex;
  align-items: stretch;
  min-height: 48px;
}

.route-indent {
  display: flex;
  flex-shrink: 0;
}

.route-indent-unit {
  width: 32px;
  position: relative;
  flex-shrink: 0;
}

.route-indent-unit.line::before {
  content: '';
  position: absolute;
  left: 15px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--border);
}

.route-indent-unit.branch::before {
  content: '';
  position: absolute;
  left: 15px;
  top: 0;
  height: 24px;
  width: 2px;
  background: var(--border);
}

.route-indent-unit.branch::after {
  content: '';
  position: absolute;
  left: 15px;
  top: 24px;
  width: 15px;
  height: 2px;
  background: var(--border);
}

.route-content {
  display: flex;
  align-items: center;
  gap: 10px;
  background: rgba(97,218,251,0.05);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 8px 14px;
  flex: 1;
  font-family: monospace;
  font-size: 0.9em;
  transition: all 0.3s;
}

.route-content:hover {
  border-color: var(--accent-blue);
  background: rgba(97,218,251,0.1);
}

.route-icon {
  font-size: 1.2em;
}

.route-path {
  color: var(--accent-pink);
  font-weight: 600;
}

.route-component {
  color: var(--accent-blue);
  margin-left: auto;
}

/* ===== INTERACTIVE ROUTER SIMULATOR ===== */
.simulator {
  background: linear-gradient(135deg, #0d1117, #161b22);
  border-radius: var(--radius);
  border: 1px solid var(--border);
  overflow: hidden;
  margin: 20px 0;
}

.sim-browser-bar {
  background: #1c2128;
  padding: 10px 16px;
  display: flex;
  align-items: center;
  gap: 10px;
  border-bottom: 1px solid var(--border);
}

.sim-dots {
  display: flex;
  gap: 6px;
}

.sim-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
}

.sim-dot.red { background: #ff5f56; }
.sim-dot.yellow { background: #ffbd2e; }
.sim-dot.green { background: #27c93f; }

.sim-url-bar {
  flex: 1;
  background: var(--bg-dark);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 6px 12px;
  color: var(--text-primary);
  font-family: monospace;
  font-size: 0.85em;
  display: flex;
  align-items: center;
  gap: 6px;
}

.sim-url-bar .lock { color: var(--accent-green); }

.sim-layout {
  display: flex;
  min-height: 350px;
}

.sim-sidebar {
  width: 180px;
  background: #1c2128;
  border-right: 1px solid var(--border);
  padding: 12px;
  flex-shrink: 0;
}

.sim-nav-item {
  padding: 10px 14px;
  border-radius: 6px;
  cursor: pointer;
  color: var(--text-secondary);
  font-size: 0.88em;
  margin-bottom: 4px;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 8px;
}

.sim-nav-item:hover {
  background: rgba(97,218,251,0.08);
  color: var(--text-primary);
}

.sim-nav-item.active {
  background: rgba(97,218,251,0.15);
  color: var(--accent-blue);
  font-weight: 600;
}

.sim-content {
  flex: 1;
  padding: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sim-page {
  text-align: center;
  animation: fadeIn 0.3s ease;
}

.sim-page h2 {
  font-size: 1.5em;
  margin-bottom: 10px;
}

.sim-page p {
  color: var(--text-secondary);
}

/* ===== QUIZ STYLES ===== */
.quiz-container {
  margin: 20px 0;
}

.quiz-question {
  background: var(--bg-card);
  border-radius: var(--radius);
  padding: 24px;
  margin-bottom: 16px;
  border: 1px solid var(--border);
  transition: border-color 0.3s;
}

.quiz-question.correct { border-color: var(--accent-green); }
.quiz-question.incorrect { border-color: var(--accent-red); }

.quiz-q-text {
  font-size: 1.05em;
  font-weight: 600;
  margin-bottom: 16px;
  display: flex;
  gap: 10px;
}

.quiz-q-num {
  background: var(--gradient-1);
  color: white;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8em;
  flex-shrink: 0;
}

.quiz-options {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.quiz-option {
  padding: 12px 16px;
  border: 2px solid var(--border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 0.92em;
  display: flex;
  align-items: center;
  gap: 10px;
}

.quiz-option:hover:not(.disabled) {
  border-color: var(--accent-blue);
  background: rgba(97,218,251,0.05);
}

.quiz-option .opt-letter {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: var(--bg-dark);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.8em;
  flex-shrink: 0;
}

.quiz-option.selected {
  border-color: var(--accent-blue);
  background: rgba(97,218,251,0.1);
}

.quiz-option.correct-answer {
  border-color: var(--accent-green);
  background: rgba(80,250,123,0.1);
}

.quiz-option.correct-answer .opt-letter {
  background: var(--accent-green);
  color: var(--bg-dark);
}

.quiz-option.wrong-answer {
  border-color: var(--accent-red);
  background: rgba(255,85,85,0.1);
}

.quiz-option.wrong-answer .opt-letter {
  background: var(--accent-red);
  color: white;
}

.quiz-explanation {
  margin-top: 12px;
  padding: 12px 16px;
  border-radius: 8px;
  font-size: 0.9em;
  display: none;
}

.quiz-explanation.show {
  display: block;
  animation: fadeIn 0.3s ease;
}

.quiz-explanation.correct {
  background: rgba(80,250,123,0.1);
  border-left: 3px solid var(--accent-green);
  color: var(--accent-green);
}

.quiz-explanation.incorrect {
  background: rgba(255,85,85,0.1);
  border-left: 3px solid var(--accent-red);
  color: var(--accent-red);
}

/* ===== EXERCISE STYLES ===== */
.exercise-box {
  background: linear-gradient(135deg, rgba(80,250,123,0.05), rgba(97,218,251,0.05));
  border: 2px dashed var(--accent-green);
  border-radius: var(--radius);
  padding: 24px;
  margin: 20px 0;
}

.exercise-title {
  color: var(--accent-green);
  font-weight: 700;
  font-size: 1.1em;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.exercise-textarea {
  width: 100%;
  min-height: 150px;
  background: var(--bg-code);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 16px;
  color: var(--text-primary);
  font-family: 'Fira Code', 'Consolas', monospace;
  font-size: 0.88em;
  line-height: 1.7;
  resize: vertical;
  margin: 12px 0;
}

.exercise-textarea:focus {
  outline: none;
  border-color: var(--accent-blue);
}

/* ===== PITFALL / TIP BOXES ===== */
.pitfall-box {
  background: rgba(255, 85, 85, 0.08);
  border-left: 4px solid var(--accent-red);
  border-radius: 0 var(--radius) var(--radius) 0;
  padding: 20px;
  margin: 20px 0;
}

.pitfall-title {
  color: var(--accent-red);
  font-weight: 700;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.tip-box {
  background: rgba(80, 250, 123, 0.08);
  border-left: 4px solid var(--accent-green);
  border-radius: 0 var(--radius) var(--radius) 0;
  padding: 20px;
  margin: 20px 0;
}

.tip-title {
  color: var(--accent-green);
  font-weight: 700;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.info-box {
  background: rgba(97, 218, 251, 0.08);
  border-left: 4px solid var(--accent-blue);
  border-radius: 0 var(--radius) var(--radius) 0;
  padding: 20px;
  margin: 20px 0;
}

.info-title {
  color: var(--accent-blue);
  font-weight: 700;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* ===== BUTTONS ===== */
.btn {
  padding: 10px 24px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  font-size: 0.9em;
  transition: all 0.2s;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.btn:hover { transform: translateY(-2px); }
.btn:active { transform: translateY(0); }

.btn-primary {
  background: var(--gradient-3);
  color: var(--bg-dark);
}

.btn-success {
  background: var(--accent-green);
  color: var(--bg-dark);
}

.btn-outline {
  background: transparent;
  border: 2px solid var(--accent-blue);
  color: var(--accent-blue);
}

.btn-outline:hover {
  background: rgba(97,218,251,0.1);
}

.btn-danger {
  background: var(--accent-red);
  color: white;
}

.btn-group {
  display: flex;
  gap: 10px;
  margin-top: 16px;
  flex-wrap: wrap;
}

/* ===== COMPARISON TABLE ===== */
.comparison-table {
  width: 100%;
  border-collapse: collapse;
  margin: 16px 0;
  font-size: 0.9em;
}

.comparison-table th {
  background: var(--bg-dark);
  padding: 12px 16px;
  text-align: left;
  color: var(--accent-blue);
  border-bottom: 2px solid var(--accent-blue);
}

.comparison-table td {
  padding: 12px 16px;
  border-bottom: 1px solid var(--border);
}

.comparison-table tr:hover td {
  background: rgba(97,218,251,0.03);
}

.comparison-table code {
  background: var(--bg-code);
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 0.9em;
  color: var(--accent-pink);
}

/* ===== INTERACTIVE FLOW DIAGRAM ===== */
.flow-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 20px;
}

.flow-box {
  background: var(--bg-card);
  border: 2px solid var(--border);
  border-radius: 10px;
  padding: 14px 24px;
  text-align: center;
  min-width: 200px;
  transition: all 0.3s;
  cursor: pointer;
}

.flow-box:hover {
  border-color: var(--accent-blue);
  transform: scale(1.02);
}

.flow-box.active-flow {
  border-color: var(--accent-green);
  background: rgba(80,250,123,0.1);
  box-shadow: 0 0 20px rgba(80,250,123,0.15);
}

.flow-box.blocked {
  border-color: var(--accent-red);
  background: rgba(255,85,85,0.1);
}

.flow-arrow {
  font-size: 1.4em;
  color: var(--text-dim);
}

.flow-row {
  display: flex;
  gap: 20px;
  align-items: center;
  flex-wrap: wrap;
  justify-content: center;
}

/* ===== TABS WITHIN SECTIONS ===== */
.inner-tabs {
  display: flex;
  border-bottom: 2px solid var(--border);
  margin-bottom: 20px;
  gap: 0;
  overflow-x: auto;
}

.inner-tab {
  padding: 10px 20px;
  cursor: pointer;
  color: var(--text-secondary);
  font-weight: 600;
  font-size: 0.88em;
  border-bottom: 2px solid transparent;
  margin-bottom: -2px;
  transition: all 0.2s;
  white-space: nowrap;
}

.inner-tab:hover { color: var(--accent-blue); }

.inner-tab.active {
  color: var(--accent-blue);
  border-bottom-color: var(--accent-blue);
}

.inner-content {
  display: none;
}

.inner-content.active {
  display: block;
  animation: fadeIn 0.3s ease;
}

/* ===== SECTION NAVIGATION ===== */
.section-nav {
  display: flex;
  justify-content: space-between;
  margin-top: 40px;
  padding-top: 20px;
  border-top: 1px solid var(--border);
}

/* ===== BADGE ===== */
.badge {
  display: inline-block;
  padding: 3px 10px;
  border-radius: 12px;
  font-size: 0.75em;
  font-weight: 700;
}

.badge-v6 { background: rgba(97,218,251,0.2); color: var(--accent-blue); }
.badge-v5 { background: rgba(255,184,108,0.2); color: var(--accent-orange); }
.badge-new { background: rgba(80,250,123,0.2); color: var(--accent-green); }

/* ===== DRAG AND DROP EXERCISE ===== */
.drag-container {
  display: flex;
  gap: 20px;
  margin: 16px 0;
  flex-wrap: wrap;
}

.drag-source {
  flex: 1;
  min-width: 250px;
}

.drag-target {
  flex: 1;
  min-width: 250px;
}

.drag-title {
  font-weight: 600;
  margin-bottom: 10px;
  color: var(--text-secondary);
  font-size: 0.9em;
}

.drag-item {
  background: var(--bg-dark);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 10px 14px;
  margin-bottom: 6px;
  cursor: grab;
  font-family: monospace;
  font-size: 0.88em;
  transition: all 0.2s;
}

.drag-item:hover {
  border-color: var(--accent-blue);
}

.drag-item.dragging {
  opacity: 0.5;
}

.drop-zone {
  background: rgba(97,218,251,0.03);
  border: 2px dashed var(--border);
  border-radius: 8px;
  min-height: 200px;
  padding: 10px;
  transition: all 0.2s;
}

.drop-zone.drag-over {
  border-color: var(--accent-blue);
  background: rgba(97,218,251,0.08);
}

.drop-zone .drag-item {
  cursor: default;
}

/* ===== GUARD SIMULATOR ===== */
.guard-sim {
  display: flex;
  gap: 20px;
  align-items: flex-start;
  flex-wrap: wrap;
}

.guard-controls {
  flex: 1;
  min-width: 200px;
}

.guard-display {
  flex: 2;
  min-width: 300px;
}

.toggle-switch {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
  cursor: pointer;
}

.toggle-track {
  width: 44px;
  height: 24px;
  background: var(--bg-dark);
  border-radius: 12px;
  position: relative;
  transition: background 0.3s;
  border: 1px solid var(--border);
}

.toggle-track.on {
  background: var(--accent-green);
  border-color: var(--accent-green);
}

.toggle-thumb {
  width: 20px;
  height: 20px;
  background: white;
  border-radius: 50%;
  position: absolute;
  top: 1px;
  left: 2px;
  transition: left 0.3s;
}

.toggle-track.on .toggle-thumb {
  left: 22px;
}

/* ===== CONFETTI ===== */
.confetti-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9999;
}

.confetti {
  position: absolute;
  width: 10px;
  height: 10px;
  animation: confettiFall 3s ease-in forwards;
}

@keyframes confettiFall {
  0% { transform: translateY(-10px) rotate(0deg); opacity: 1; }
  100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
  .header-content { justify-content: center; text-align: center; }
  .sim-layout { flex-direction: column; }
  .sim-sidebar { width: 100%; border-right: none; border-bottom: 1px solid var(--border); display: flex; flex-wrap: wrap; }
  .sim-nav-item { flex: 1; min-width: 80px; text-align: center; justify-content: center; }
  .section-hero h1 { font-size: 1.6em; }
  .drag-container { flex-direction: column; }
  .guard-sim { flex-direction: column; }
}

/* ===== TOAST NOTIFICATIONS ===== */
.toast {
  position: fixed;
  bottom: 30px;
  right: 30px;
  padding: 14px 24px;
  border-radius: 10px;
  font-weight: 600;
  z-index: 9999;
  animation: slideInRight 0.4s ease, slideOutRight 0.4s ease 2.5s forwards;
  box-shadow: 0 8px 30px rgba(0,0,0,0.4);
}

.toast-success {
  background: var(--accent-green);
  color: var(--bg-dark);
}

.toast-error {
  background: var(--accent-red);
  color: white;
}

.toast-info {
  background: var(--accent-blue);
  color: var(--bg-dark);
}

@keyframes slideInRight {
  from { transform: translateX(120%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOutRight {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(120%); opacity: 0; }
}

/* ===== STEP-BY-STEP ANIMATION ===== */
.step-container {
  position: relative;
}

.step {
  display: none;
  animation: fadeIn 0.3s ease;
}

.step.active {
  display: block;
}

.step-indicators {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-top: 16px;
}

.step-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--border);
  cursor: pointer;
  transition: all 0.2s;
}

.step-dot.active {
  background: var(--accent-blue);
  transform: scale(1.3);
}

/* ===== MATCHING EXERCISE ===== */
.match-container {
  display: flex;
  gap: 40px;
  justify-content: center;
  flex-wrap: wrap;
  margin: 20px 0;
}

.match-column {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.match-item {
  padding: 10px 18px;
  border: 2px solid var(--border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
  text-align: center;
  font-size: 0.9em;
  min-width: 180px;
}

.match-item:hover:not(.matched) {
  border-color: var(--accent-blue);
}

.match-item.selected {
  border-color: var(--accent-orange);
  background: rgba(255,184,108,0.1);
}

.match-item.matched {
  border-color: var(--accent-green);
  background: rgba(80,250,123,0.1);
  cursor: default;
}

.match-item.wrong {
  border-color: var(--accent-red);
  background: rgba(255,85,85,0.1);
  animation: shake 0.4s ease;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

/* Accordion */
.accordion-item {
  border: 1px solid var(--border);
  border-radius: 8px;
  margin-bottom: 8px;
  overflow: hidden;
}

.accordion-header {
  padding: 14px 18px;
  background: var(--bg-dark);
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: 600;
  transition: background 0.2s;
}

.accordion-header:hover {
  background: rgba(97,218,251,0.05);
}

.accordion-arrow {
  transition: transform 0.3s;
}

.accordion-item.open .accordion-arrow {
  transform: rotate(180deg);
}

.accordion-body {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease;
  background: var(--bg-card);
}

.accordion-item.open .accordion-body {
  max-height: 2000px;
}

.accordion-content {
  padding: 18px;
}

/* Checklist */
.checklist-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 0;
  cursor: pointer;
}

.checklist-check {
  width: 22px;
  height: 22px;
  border: 2px solid var(--border);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  flex-shrink: 0;
}

.checklist-item.checked .checklist-check {
  background: var(--accent-green);
  border-color: var(--accent-green);
  color: var(--bg-dark);
}

.score-display {
  text-align: center;
  padding: 30px;
  background: linear-gradient(135deg, rgba(80,250,123,0.1), rgba(97,218,251,0.1));
  border-radius: var(--radius);
  margin: 20px 0;
}

.score-number {
  font-size: 3em;
  font-weight: 800;
  background: var(--gradient-3);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Route matching visualization */
.route-match-viz {
  font-family: monospace;
  margin: 10px 0;
}

.route-match-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 12px;
  border-radius: 6px;
  margin-bottom: 4px;
  transition: background 0.2s;
}

.route-match-row:hover {
  background: rgba(97,218,251,0.05);
}

.match-indicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.match-indicator.yes { background: var(--accent-green); }
.match-indicator.no { background: var(--accent-red); }
.match-indicator.partial { background: var(--accent-orange); }
</style>
</head>
<body>

<!-- ===== HEADER ===== -->
<header class="app-header">
  <div class="header-content">
    <div class="logo">
      <div class="logo-icon">‚öõÔ∏è</div>
      <span>React Router<br><small style="font-size:0.5em;color:var(--text-secondary)">Mastery Course</small></span>
    </div>
    <div class="progress-bar-container">
      <div class="progress-label">Progress: <span id="progressPercent">0</span>%</div>
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
    </div>
    <div class="xp-display">‚≠ê <span id="xpCount">0</span> XP</div>
  </div>
</header>

<!-- ===== NAV TABS ===== -->
<nav class="nav-tabs">
  <div class="nav-tabs-inner">
    <div class="nav-tab active" data-section="intro" onclick="switchSection('intro')">
      <span class="tab-num">1</span> Introduction
    </div>
    <div class="nav-tab" data-section="basics" onclick="switchSection('basics')">
      <span class="tab-num">2</span> Route Config
    </div>
    <div class="nav-tab" data-section="dynamic" onclick="switchSection('dynamic')">
      <span class="tab-num">3</span> Dynamic Routes
    </div>
    <div class="nav-tab" data-section="params" onclick="switchSection('params')">
      <span class="tab-num">4</span> URL Parameters
    </div>
    <div class="nav-tab" data-section="guards" onclick="switchSection('guards')">
      <span class="tab-num">5</span> Nav Guards
    </div>
    <div class="nav-tab" data-section="advanced" onclick="switchSection('advanced')">
      <span class="tab-num">6</span> Advanced
    </div>
    <div class="nav-tab" data-section="quiz" onclick="switchSection('quiz')">
      <span class="tab-num">7</span> Final Quiz
    </div>
  </div>
</nav>

<!-- ===== MAIN CONTENT ===== -->
<main class="main-container">

<!-- ==================== SECTION 1: INTRODUCTION ==================== -->
<div class="section active" id="section-intro">
  <div class="section-hero">
    <h1>üó∫Ô∏è React Router Mastery</h1>
    <p>Learn how to build seamless single-page applications with client-side routing. Navigate like a pro!</p>
  </div>

  <!-- What is Routing -->
  <div class="card">
    <div class="card-title"><span class="emoji">ü§î</span> What is Client-Side Routing?</div>
    <p>In traditional websites, every page navigation sends a request to the server. With <strong>client-side routing</strong> (SPA routing), JavaScript intercepts URL changes and renders the appropriate component ‚Äî <em>without a full page reload</em>.</p>

    <div class="diagram-container">
      <h4 style="text-align:center;color:var(--accent-blue);margin-bottom:20px;">Traditional vs SPA Navigation</h4>
      <div class="flow-row" style="margin-bottom: 30px;">
        <div>
          <div style="color:var(--accent-red);font-weight:700;text-align:center;margin-bottom:10px;">‚ùå Traditional (MPA)</div>
          <div class="flow-container" style="gap:4px;">
            <div class="flow-box" style="font-size:0.85em;">Click Link</div>
            <div class="flow-arrow">‚Üì</div>
            <div class="flow-box" style="font-size:0.85em;border-color:var(--accent-red);">Full Server Request</div>
            <div class="flow-arrow">‚Üì</div>
            <div class="flow-box" style="font-size:0.85em;border-color:var(--accent-red);">Server Returns HTML</div>
            <div class="flow-arrow">‚Üì</div>
            <div class="flow-box" style="font-size:0.85em;border-color:var(--accent-red);">Full Page Reload ‚ö°</div>
          </div>
        </div>
        <div>
          <div style="color:var(--accent-green);font-weight:700;text-align:center;margin-bottom:10px;">‚úÖ SPA (React Router)</div>
          <div class="flow-container" style="gap:4px;">
            <div class="flow-box" style="font-size:0.85em;">Click Link</div>
            <div class="flow-arrow">‚Üì</div>
            <div class="flow-box" style="font-size:0.85em;border-color:var(--accent-green);">URL Changes (History API)</div>
            <div class="flow-arrow">‚Üì</div>
            <div class="flow-box" style="font-size:0.85em;border-color:var(--accent-green);">React Re-renders Component</div>
            <div class="flow-arrow">‚Üì</div>
            <div class="flow-box" style="font-size:0.85em;border-color:var(--accent-green);">Instant! No Reload ‚ö°</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- URL Anatomy -->
  <div class="card">
    <div class="card-title"><span class="emoji">üîç</span> URL Anatomy ‚Äî Hover Each Part</div>
    <div class="url-anatomy">
      <div class="url-part url-protocol">
        <span class="tooltip">Protocol ‚Äî how to connect</span>
        https://
      </div>
      <div class="url-part url-domain">
        <span class="tooltip">Domain ‚Äî which server</span>
        myapp.com
      </div>
      <div class="url-part url-path">
        <span class="tooltip">Path ‚Äî React Router matches this!</span>
        /users
      </div>
      <div class="url-part url-param">
        <span class="tooltip">Dynamic param ‚Äî variable part</span>
        /42
      </div>
      <div class="url-part url-query">
        <span class="tooltip">Query string ‚Äî extra data</span>
        ?tab=posts
      </div>
    </div>
    <p style="text-align:center;color:var(--text-secondary);margin-top:10px;font-size:0.9em;">React Router primarily works with the <strong style="color:var(--accent-pink);">path</strong> and <strong style="color:var(--accent-orange);">params</strong>.</p>
  </div>

  <!-- Setup -->
  <div class="card">
    <div class="card-title"><span class="emoji">üì¶</span> Installing React Router</div>
    <div class="code-block">
      <span class="code-label">Terminal</span>
<span class="cmt"># Install React Router v6 (latest)</span>
<span class="fn">npm install</span> react-router-dom

<span class="cmt"># or with yarn</span>
<span class="fn">yarn add</span> react-router-dom
    </div>

    <div class="info-box">
      <div class="info-title">‚ÑπÔ∏è Version Note</div>
      <p>This course covers <strong>React Router v6</strong>, which has significant API changes from v5. If you're working on an older codebase, you may encounter v5 syntax. We'll highlight key differences with badges like <span class="badge badge-v6">v6</span> and <span class="badge badge-v5">v5</span>.</p>
    </div>
  </div>

  <!-- Interactive Try-It -->
  <div class="card">
    <div class="card-title"><span class="emoji">üéÆ</span> Try It: SPA Router Simulator</div>
    <p style="margin-bottom:14px;">Click the sidebar links to see how an SPA router works. Watch the URL change without page reload!</p>

    <div class="simulator" id="sim1">
      <div class="sim-browser-bar">
        <div class="sim-dots">
          <div class="sim-dot red"></div>
          <div class="sim-dot yellow"></div>
          <div class="sim-dot green"></div>
        </div>
        <div class="sim-url-bar">
          <span class="lock">üîí</span>
          <span id="sim1-url">myapp.com/</span>
        </div>
      </div>
      <div class="sim-layout">
        <div class="sim-sidebar">
          <div class="sim-nav-item active" onclick="simNavigate('sim1','/', 'Home', 'üè† Welcome to MyApp!', 'Your dashboard awaits', this)">
            üè† Home
          </div>
          <div class="sim-nav-item" onclick="simNavigate('sim1','/about', 'About', 'üëã About Us', 'We build amazing apps', this)">
            üëã About
          </div>
          <div class="sim-nav-item" onclick="simNavigate('sim1','/products', 'Products', 'üì¶ Products', 'Browse our catalog', this)">
            üì¶ Products
          </div>
          <div class="sim-nav-item" onclick="simNavigate('sim1','/contact', 'Contact', 'üìß Contact', 'Get in touch with us', this)">
            üìß Contact
          </div>
        </div>
        <div class="sim-content">
          <div class="sim-page" id="sim1-page">
            <h2>üè† Welcome to MyApp!</h2>
            <p>Your dashboard awaits</p>
            <p style="margin-top:15px;color:var(--accent-green);font-size:0.85em;">‚ú® No page reload occurred!</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="section-nav">
    <div></div>
    <button class="btn btn-primary" onclick="switchSection('basics')">Next: Route Configuration ‚Üí</button>
  </div>
</div>

<!-- ==================== SECTION 2: ROUTE CONFIGURATION ==================== -->
<div class="section" id="section-basics">
  <div class="section-hero">
    <h1>‚öôÔ∏è Route Configuration</h1>
    <p>Learn how to define routes, nest them, and structure your application's navigation.</p>
  </div>

  <!-- Basic Setup -->
  <div class="card">
    <div class="card-title"><span class="emoji">üèóÔ∏è</span> Basic Router Setup <span class="badge badge-v6">v6</span></div>
    <div class="code-block">
      <span class="code-label">App.jsx</span>
<span class="line-num"> 1</span><span class="kw">import</span> { <span class="comp">BrowserRouter</span>, <span class="comp">Routes</span>, <span class="comp">Route</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;
<span class="line-num"> 2</span>
<span class="line-num"> 3</span><span class="kw">function</span> <span class="fn">App</span>() {
<span class="line-num"> 4</span>  <span class="kw">return</span> (
<span class="line-num"> 5</span>    <span class="tag">&lt;<span class="comp">BrowserRouter</span>&gt;</span>           <span class="cmt">{/* Wraps entire app */}</span>
<span class="highlight-line"><span class="line-num"> 6</span>      <span class="tag">&lt;<span class="comp">Routes</span>&gt;</span>                  <span class="cmt">{/* Container for Route definitions */}</span></span>
<span class="highlight-line"><span class="line-num"> 7</span>        <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Home</span> /&gt;</span>} /&gt;</span></span>
<span class="highlight-line"><span class="line-num"> 8</span>        <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/about"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">About</span> /&gt;</span>} /&gt;</span></span>
<span class="highlight-line"><span class="line-num"> 9</span>        <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/contact"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Contact</span> /&gt;</span>} /&gt;</span></span>
<span class="line-num">10</span>      <span class="tag">&lt;/<span class="comp">Routes</span>&gt;</span>
<span class="line-num">11</span>    <span class="tag">&lt;/<span class="comp">BrowserRouter</span>&gt;</span>
<span class="line-num">12</span>  );
<span class="line-num">13</span>}
    </div>
  </div>

  <!-- v5 vs v6 Comparison -->
  <div class="card">
    <div class="card-title"><span class="emoji">üîÑ</span> v5 vs v6 Key Differences</div>
    <table class="comparison-table">
      <thead>
        <tr>
          <th>Feature</th>
          <th><span class="badge badge-v5">v5</span></th>
          <th><span class="badge badge-v6">v6</span></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Route container</td>
          <td><code>Switch</code></td>
          <td><code>Routes</code></td>
        </tr>
        <tr>
          <td>Render component</td>
          <td><code>component={Home}</code></td>
          <td><code>element={&lt;Home /&gt;}</code></td>
        </tr>
        <tr>
          <td>Exact matching</td>
          <td><code>exact</code> prop needed</td>
          <td>Exact by default</td>
        </tr>
        <tr>
          <td>Nested routes</td>
          <td>Defined in child</td>
          <td>Can define in parent with <code>Outlet</code></td>
        </tr>
        <tr>
          <td>Redirect</td>
          <td><code>Redirect</code></td>
          <td><code>Navigate</code></td>
        </tr>
        <tr>
          <td>History</td>
          <td><code>useHistory()</code></td>
          <td><code>useNavigate()</code></td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Navigation Components -->
  <div class="card">
    <div class="card-title"><span class="emoji">üîó</span> Navigation Components</div>

    <div class="inner-tabs">
      <div class="inner-tab active" onclick="switchInnerTab(this, 'nav-link')">Link</div>
      <div class="inner-tab" onclick="switchInnerTab(this, 'nav-navlink')">NavLink</div>
      <div class="inner-tab" onclick="switchInnerTab(this, 'nav-navigate')">Navigate</div>
      <div class="inner-tab" onclick="switchInnerTab(this, 'nav-usenavigate')">useNavigate</div>
    </div>

    <div class="inner-content active" id="nav-link">
      <h4 style="color:var(--accent-blue);margin-bottom:10px;">Link ‚Äî Basic Navigation</h4>
      <p>Replaces <code style="color:var(--accent-pink);background:var(--bg-code);padding:2px 6px;border-radius:4px;">&lt;a&gt;</code> tags to prevent page reloads.</p>
      <div class="code-block">
<span class="kw">import</span> { <span class="comp">Link</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;

<span class="cmt">// ‚úÖ Use Link for SPA navigation</span>
<span class="tag">&lt;<span class="comp">Link</span> <span class="attr">to</span>=<span class="str">"/about"</span>&gt;</span>About Us<span class="tag">&lt;/<span class="comp">Link</span>&gt;</span>

<span class="cmt">// ‚úÖ Pass state with navigation</span>
<span class="tag">&lt;<span class="comp">Link</span> <span class="attr">to</span>=<span class="str">"/dashboard"</span> <span class="attr">state</span>={{ <span class="prop">from</span>: <span class="str">'homepage'</span> }}&gt;</span>
  Dashboard
<span class="tag">&lt;/<span class="comp">Link</span>&gt;</span>
      </div>

      <div class="pitfall-box">
        <div class="pitfall-title">‚ö†Ô∏è Common Mistake</div>
        <p>Never use <code style="color:var(--accent-pink);">&lt;a href="/about"&gt;</code> in React apps! It causes a full page reload, losing all React state.</p>
        <div class="code-block" style="border-color: var(--accent-red);">
<span class="cmt">// ‚ùå WRONG ‚Äî causes full reload</span>
<span class="tag">&lt;a <span class="attr">href</span>=<span class="str">"/about"</span>&gt;</span>About<span class="tag">&lt;/a&gt;</span>

<span class="cmt">// ‚úÖ RIGHT ‚Äî SPA navigation</span>
<span class="tag">&lt;<span class="comp">Link</span> <span class="attr">to</span>=<span class="str">"/about"</span>&gt;</span>About<span class="tag">&lt;/<span class="comp">Link</span>&gt;</span>
        </div>
      </div>
    </div>

    <div class="inner-content" id="nav-navlink">
      <h4 style="color:var(--accent-blue);margin-bottom:10px;">NavLink ‚Äî Active Link Styling</h4>
      <p>Like Link, but knows when it's "active" (matches current URL).</p>
      <div class="code-block">
<span class="kw">import</span> { <span class="comp">NavLink</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;

<span class="cmt">// Automatically gets 'active' class when route matches</span>
<span class="tag">&lt;<span class="comp">NavLink</span>
  <span class="attr">to</span>=<span class="str">"/dashboard"</span>
  <span class="attr">className</span>={({ <span class="prop">isActive</span> }) <span class="op">=></span>
    <span class="prop">isActive</span> ? <span class="str">'nav-link active'</span> : <span class="str">'nav-link'</span>
  }
&gt;</span>
  Dashboard
<span class="tag">&lt;/<span class="comp">NavLink</span>&gt;</span>

<span class="cmt">// Style prop version</span>
<span class="tag">&lt;<span class="comp">NavLink</span>
  <span class="attr">to</span>=<span class="str">"/settings"</span>
  <span class="attr">style</span>={({ <span class="prop">isActive</span> }) <span class="op">=></span> ({
    <span class="prop">fontWeight</span>: <span class="prop">isActive</span> ? <span class="str">'bold'</span> : <span class="str">'normal'</span>,
    <span class="prop">color</span>: <span class="prop">isActive</span> ? <span class="str">'#61dafb'</span> : <span class="str">'gray'</span>
  })}
&gt;</span>
  Settings
<span class="tag">&lt;/<span class="comp">NavLink</span>&gt;</span>

<span class="cmt">// 'end' prop for exact matching (important for "/")</span>
<span class="tag">&lt;<span class="comp">NavLink</span> <span class="attr">to</span>=<span class="str">"/"</span> <span class="attr">end</span>&gt;</span>Home<span class="tag">&lt;/<span class="comp">NavLink</span>&gt;</span>
      </div>
    </div>

    <div class="inner-content" id="nav-navigate">
      <h4 style="color:var(--accent-blue);margin-bottom:10px;">Navigate ‚Äî Declarative Redirect</h4>
      <p>Renders a redirect. Used for route-level redirects.</p>
      <div class="code-block">
<span class="kw">import</span> { <span class="comp">Navigate</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;

<span class="cmt">// Redirect old URLs</span>
<span class="tag">&lt;<span class="comp">Route</span>
  <span class="attr">path</span>=<span class="str">"/old-page"</span>
  <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Navigate</span> <span class="attr">to</span>=<span class="str">"/new-page"</span> <span class="attr">replace</span> /&gt;</span>}
/&gt;</span>

<span class="cmt">// Conditional redirect in a component</span>
<span class="kw">function</span> <span class="fn">Dashboard</span>() {
  <span class="kw">if</span> (!isLoggedIn) {
    <span class="kw">return</span> <span class="tag">&lt;<span class="comp">Navigate</span> <span class="attr">to</span>=<span class="str">"/login"</span> <span class="attr">replace</span> /&gt;</span>;
  }
  <span class="kw">return</span> <span class="tag">&lt;div&gt;</span>Dashboard Content<span class="tag">&lt;/div&gt;</span>;
}
      </div>
    </div>

    <div class="inner-content" id="nav-usenavigate">
      <h4 style="color:var(--accent-blue);margin-bottom:10px;">useNavigate ‚Äî Programmatic Navigation</h4>
      <p>Navigate from event handlers, form submissions, effects, etc.</p>
      <div class="code-block">
<span class="kw">import</span> { <span class="hook">useNavigate</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;

<span class="kw">function</span> <span class="fn">LoginForm</span>() {
  <span class="kw">const</span> <span class="fn">navigate</span> = <span class="hook">useNavigate</span>();

  <span class="kw">const</span> <span class="fn">handleSubmit</span> = <span class="kw">async</span> (e) <span class="op">=></span> {
    e.<span class="fn">preventDefault</span>();
    <span class="kw">const</span> success = <span class="kw">await</span> <span class="fn">login</span>(credentials);

    <span class="kw">if</span> (success) {
<span class="highlight-line">      <span class="fn">navigate</span>(<span class="str">'/dashboard'</span>);        <span class="cmt">// push new entry</span></span>
      <span class="cmt">// navigate('/dashboard', { replace: true }); // replace history</span>
      <span class="cmt">// navigate(-1);                 // go back</span>
      <span class="cmt">// navigate(-2);                 // go back 2 pages</span>
    }
  };

  <span class="kw">return</span> <span class="tag">&lt;form <span class="attr">onSubmit</span>={handleSubmit}&gt;</span>...<span class="tag">&lt;/form&gt;</span>;
}
      </div>
    </div>
  </div>

  <!-- Nested Routes -->
  <div class="card">
    <div class="card-title"><span class="emoji">ü™Ü</span> Nested Routes & Outlet</div>
    <p>Nested routes let you build layouts that persist across pages. The parent renders an <code style="color:var(--accent-blue);background:var(--bg-code);padding:2px 6px;border-radius:4px;">Outlet</code> where child routes appear.</p>

    <div class="code-block">
      <span class="code-label">App.jsx</span>
<span class="line-num"> 1</span><span class="tag">&lt;<span class="comp">Routes</span>&gt;</span>
<span class="line-num"> 2</span>  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Layout</span> /&gt;</span>}&gt;</span>       <span class="cmt">{/* Parent layout */}</span>
<span class="line-num"> 3</span>    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">index</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Home</span> /&gt;</span>} /&gt;</span>        <span class="cmt">{/* Matches "/" */}</span>
<span class="line-num"> 4</span>    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"about"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">About</span> /&gt;</span>} /&gt;</span> <span class="cmt">{/* Matches "/about" */}</span>
<span class="line-num"> 5</span>
<span class="line-num"> 6</span>    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"dashboard"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">DashLayout</span> /&gt;</span>}&gt;</span>
<span class="line-num"> 7</span>      <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">index</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">DashHome</span> /&gt;</span>} /&gt;</span>    <span class="cmt">{/* "/dashboard" */}</span>
<span class="line-num"> 8</span>      <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"stats"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Stats</span> /&gt;</span>} /&gt;</span> <span class="cmt">{/* "/dashboard/stats" */}</span>
<span class="line-num"> 9</span>      <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"settings"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Settings</span> /&gt;</span>} /&gt;</span>
<span class="line-num">10</span>    <span class="tag">&lt;/<span class="comp">Route</span>&gt;</span>
<span class="line-num">11</span>
<span class="line-num">12</span>    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"*"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">NotFound</span> /&gt;</span>} /&gt;</span>  <span class="cmt">{/* 404 catch-all */}</span>
<span class="line-num">13</span>  <span class="tag">&lt;/<span class="comp">Route</span>&gt;</span>
<span class="line-num">14</span><span class="tag">&lt;/<span class="comp">Routes</span>&gt;</span>
    </div>

    <div class="code-block">
      <span class="code-label">Layout.jsx</span>
<span class="kw">import</span> { <span class="comp">Outlet</span>, <span class="comp">NavLink</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;

<span class="kw">function</span> <span class="fn">Layout</span>() {
  <span class="kw">return</span> (
    <span class="tag">&lt;div&gt;</span>
      <span class="tag">&lt;nav&gt;</span>
        <span class="tag">&lt;<span class="comp">NavLink</span> <span class="attr">to</span>=<span class="str">"/"</span> <span class="attr">end</span>&gt;</span>Home<span class="tag">&lt;/<span class="comp">NavLink</span>&gt;</span>
        <span class="tag">&lt;<span class="comp">NavLink</span> <span class="attr">to</span>=<span class="str">"/about"</span>&gt;</span>About<span class="tag">&lt;/<span class="comp">NavLink</span>&gt;</span>
        <span class="tag">&lt;<span class="comp">NavLink</span> <span class="attr">to</span>=<span class="str">"/dashboard"</span>&gt;</span>Dashboard<span class="tag">&lt;/<span class="comp">NavLink</span>&gt;</span>
      <span class="tag">&lt;/nav&gt;</span>

      <span class="tag">&lt;main&gt;</span>
<span class="highlight-line">        <span class="tag">&lt;<span class="comp">Outlet</span> /&gt;</span>  <span class="cmt">{/* Child routes render here! */}</span></span>
      <span class="tag">&lt;/main&gt;</span>

      <span class="tag">&lt;footer&gt;</span>¬© 2024 MyApp<span class="tag">&lt;/footer&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  );
}
    </div>

    <!-- Visual Route Tree -->
    <h4 style="color:var(--accent-purple);margin:20px 0 10px;">üìä Visual Route Tree</h4>
    <div class="diagram-container">
      <div class="route-tree" id="routeTree1">
        <!-- Built by JS -->
      </div>
    </div>
  </div>

  <!-- Index Route -->
  <div class="card">
    <div class="card-title"><span class="emoji">üìå</span> Index Routes</div>
    <p>An <code style="color:var(--accent-pink);background:var(--bg-code);padding:2px 6px;border-radius:4px;">index</code> route renders when the parent route matches exactly. Think of it as the "default child."</p>

    <div class="code-block">
<span class="cmt">// When URL is "/dashboard", DashboardHome renders in the Outlet</span>
<span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"dashboard"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">DashboardLayout</span> /&gt;</span>}&gt;</span>
<span class="highlight-line">  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">index</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">DashboardHome</span> /&gt;</span>} /&gt;</span>  <span class="cmt">{/* default */}</span></span>
  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"analytics"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Analytics</span> /&gt;</span>} /&gt;</span>
<span class="tag">&lt;/<span class="comp">Route</span>&gt;</span>
    </div>

    <div class="pitfall-box">
      <div class="pitfall-title">‚ö†Ô∏è Pitfall: Forgetting Index Route</div>
      <p>Without an <code>index</code> route, visiting the parent path shows an empty <code>Outlet</code>. Always add a default!</p>
    </div>
  </div>

  <!-- 404 Not Found -->
  <div class="card">
    <div class="card-title"><span class="emoji">üö´</span> 404 ‚Äî Catch-All Route</div>
    <div class="code-block">
<span class="tag">&lt;<span class="comp">Routes</span>&gt;</span>
  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Home</span> /&gt;</span>} /&gt;</span>
  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/about"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">About</span> /&gt;</span>} /&gt;</span>
<span class="highlight-line">  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"*"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">NotFound</span> /&gt;</span>} /&gt;</span>  <span class="cmt">{/* Catches everything else */}</span></span>
<span class="tag">&lt;/<span class="comp">Routes</span>&gt;</span>
    </div>

    <div class="tip-box">
      <div class="tip-title">üí° Pro Tip</div>
      <p>Always include a <code>path="*"</code> catch-all route. It improves UX and helps with SEO by properly handling missing pages.</p>
    </div>
  </div>

  <!-- Mini Quiz -->
  <div class="card">
    <div class="card-title"><span class="emoji">üß†</span> Quick Check</div>
    <div class="quiz-container">
      <div class="quiz-question" id="q-basics-1">
        <div class="quiz-q-text">
          <span class="quiz-q-num">1</span>
          <span>In React Router v6, what replaced <code>&lt;Switch&gt;</code>?</span>
        </div>
        <div class="quiz-options">
          <div class="quiz-option" onclick="checkAnswer(this, 'q-basics-1', false)">
            <span class="opt-letter">A</span> <span>&lt;Router&gt;</span>
          </div>
          <div class="quiz-option" onclick="checkAnswer(this, 'q-basics-1', true)">
            <span class="opt-letter">B</span> <span>&lt;Routes&gt;</span>
          </div>
          <div class="quiz-option" onclick="checkAnswer(this, 'q-basics-1', false)">
            <span class="opt-letter">C</span> <span>&lt;RouteSwitch&gt;</span>
          </div>
          <div class="quiz-option" onclick="checkAnswer(this, 'q-basics-1', false)">
            <span class="opt-letter">D</span> <span>&lt;PathMatcher&gt;</span>
          </div>
        </div>
        <div class="quiz-explanation" id="q-basics-1-exp">
          <strong>&lt;Routes&gt;</strong> replaces &lt;Switch&gt; in v6. It also does smart route ranking, so order doesn't matter as much!
        </div>
      </div>

      <div class="quiz-question" id="q-basics-2">
        <div class="quiz-q-text">
          <span class="quiz-q-num">2</span>
          <span>Where does a child route's component render inside a parent layout?</span>
        </div>
        <div class="quiz-options">
          <div class="quiz-option" onclick="checkAnswer(this, 'q-basics-2', false)">
            <span class="opt-letter">A</span> <span>&lt;Slot /&gt;</span>
          </div>
          <div class="quiz-option" onclick="checkAnswer(this, 'q-basics-2', false)">
            <span class="opt-letter">B</span> <span>&lt;Children /&gt;</span>
          </div>
          <div class="quiz-option" onclick="checkAnswer(this, 'q-basics-2', true)">
            <span class="opt-letter">C</span> <span>&lt;Outlet /&gt;</span>
          </div>
          <div class="quiz-option" onclick="checkAnswer(this, 'q-basics-2', false)">
            <span class="opt-letter">D</span> <span>{props.children}</span>
          </div>
        </div>
        <div class="quiz-explanation" id="q-basics-2-exp">
          <strong>&lt;Outlet /&gt;</strong> is where child route components render within a parent route's layout. It's like a placeholder!
        </div>
      </div>
    </div>
  </div>

  <div class="section-nav">
    <button class="btn btn-outline" onclick="switchSection('intro')">‚Üê Introduction</button>
    <button class="btn btn-primary" onclick="switchSection('dynamic')">Next: Dynamic Routes ‚Üí</button>
  </div>
</div>

<!-- ==================== SECTION 3: DYNAMIC ROUTING ==================== -->
<div class="section" id="section-dynamic">
  <div class="section-hero">
    <h1>üîÄ Dynamic Routing</h1>
    <p>Build routes that adapt based on data, user state, and URL patterns.</p>
  </div>

  <div class="card">
    <div class="card-title"><span class="emoji">üéØ</span> What is Dynamic Routing?</div>
    <p>Dynamic routing means your routes can match <strong>variable URL segments</strong> and render components based on those variables. Instead of creating a route for every item, you create <em>one pattern</em>.</p>

    <div class="diagram-container">
      <h4 style="text-align:center;color:var(--accent-blue);margin-bottom:15px;">Static vs Dynamic Routes</h4>
      <div class="flow-row">
        <div style="flex:1;min-width:250px;">
          <div style="color:var(--accent-red);font-weight:700;margin-bottom:10px;text-align:center;">‚ùå Static (Don't do this!)</div>
          <div class="route-match-viz">
            <div class="route-match-row"><span class="match-indicator no"></span><code>/products/shoes</code></div>
            <div class="route-match-row"><span class="match-indicator no"></span><code>/products/hats</code></div>
            <div class="route-match-row"><span class="match-indicator no"></span><code>/products/shirts</code></div>
            <div class="route-match-row"><span class="match-indicator no"></span><code>/products/...</code> üò∞</div>
          </div>
        </div>
        <div style="flex:1;min-width:250px;">
          <div style="color:var(--accent-green);font-weight:700;margin-bottom:10px;text-align:center;">‚úÖ Dynamic (One route!)</div>
          <div class="route-match-viz">
            <div class="route-match-row"><span class="match-indicator yes"></span><code>/products/<span style="color:var(--accent-orange);">:slug</span></code></div>
            <div class="route-match-row" style="padding-left:30px;color:var(--text-dim);">‚Ü≥ matches shoes ‚úì</div>
            <div class="route-match-row" style="padding-left:30px;color:var(--text-dim);">‚Ü≥ matches hats ‚úì</div>
            <div class="route-match-row" style="padding-left:30px;color:var(--text-dim);">‚Ü≥ matches anything ‚úì</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-title"><span class="emoji">‚ö°</span> Dynamic Route Parameters</div>
    <div class="code-block">
      <span class="code-label">App.jsx</span>
<span class="tag">&lt;<span class="comp">Routes</span>&gt;</span>
  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Home</span> /&gt;</span>} /&gt;</span>

  <span class="cmt">{/* Single dynamic segment */}</span>
<span class="highlight-line">  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/users/<span style="color:var(--accent-orange);">:userId</span>"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">UserProfile</span> /&gt;</span>} /&gt;</span></span>

  <span class="cmt">{/* Multiple dynamic segments */}</span>
<span class="highlight-line">  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/blog/<span style="color:var(--accent-orange);">:year</span>/<span style="color:var(--accent-orange);">:month</span>/<span style="color:var(--accent-orange);">:slug</span>"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">BlogPost</span> /&gt;</span>} /&gt;</span></span>

  <span class="cmt">{/* Optional segments (using nested routes) */}</span>
  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/shop"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Shop</span> /&gt;</span>}&gt;</span>
    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"<span style="color:var(--accent-orange);">:category</span>"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Category</span> /&gt;</span>} /&gt;</span>
  <span class="tag">&lt;/<span class="comp">Route</span>&gt;</span>
<span class="tag">&lt;/<span class="comp">Routes</span>&gt;</span>
    </div>
  </div>

  <!-- Dynamic Route Generator -->
  <div class="card">
    <div class="card-title"><span class="emoji">üéÆ</span> Interactive: Route Matching Tester</div>
    <p>Type a URL path and see which route pattern matches!</p>

    <div style="margin:16px 0;">
      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
        <label style="font-weight:600;color:var(--accent-blue);">URL Path:</label>
        <input type="text" id="routeTestInput" value="/users/42" style="flex:1;min-width:200px;background:var(--bg-code);border:1px solid var(--border);padding:10px 14px;border-radius:8px;color:var(--text-primary);font-family:monospace;font-size:0.95em;" oninput="testRouteMatch()">
      </div>
    </div>

    <div class="route-match-viz" id="routeMatchResults">
      <!-- Generated by JS -->
    </div>
  </div>

  <!-- Dynamic Route Patterns -->
  <div class="card">
    <div class="card-title"><span class="emoji">üìã</span> Common Dynamic Route Patterns</div>

    <div class="accordion-item" onclick="toggleAccordion(this)">
      <div class="accordion-header">
        <span>üìù CRUD Resource Routes</span>
        <span class="accordion-arrow">‚ñº</span>
      </div>
      <div class="accordion-body">
        <div class="accordion-content">
          <div class="code-block">
<span class="tag">&lt;<span class="comp">Routes</span>&gt;</span>
  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/posts"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">PostsList</span> /&gt;</span>} /&gt;</span>        <span class="cmt">{/* List */}</span>
  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/posts/new"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">NewPost</span> /&gt;</span>} /&gt;</span>      <span class="cmt">{/* Create */}</span>
  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/posts/:id"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">PostDetail</span> /&gt;</span>} /&gt;</span>  <span class="cmt">{/* Read */}</span>
  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/posts/:id/edit"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">EditPost</span> /&gt;</span>} /&gt;</span><span class="cmt">{/* Update */}</span>
<span class="tag">&lt;/<span class="comp">Routes</span>&gt;</span>
          </div>
          <div class="tip-box">
            <div class="tip-title">üí° Route Ranking</div>
            <p>React Router v6 automatically ranks routes by specificity. <code>/posts/new</code> will match before <code>/posts/:id</code> even if <code>:id</code> is defined first!</p>
          </div>
        </div>
      </div>
    </div>

    <div class="accordion-item" onclick="toggleAccordion(this)">
      <div class="accordion-header">
        <span>üè¢ Multi-level Nested</span>
        <span class="accordion-arrow">‚ñº</span>
      </div>
      <div class="accordion-body">
        <div class="accordion-content">
          <div class="code-block">
<span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/org/:orgId"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">OrgLayout</span> /&gt;</span>}&gt;</span>
  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">index</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">OrgDashboard</span> /&gt;</span>} /&gt;</span>

  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"teams"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">TeamsLayout</span> /&gt;</span>}&gt;</span>
    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">index</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">TeamsList</span> /&gt;</span>} /&gt;</span>
    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">":teamId"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">TeamDetail</span> /&gt;</span>} /&gt;</span>
  <span class="tag">&lt;/<span class="comp">Route</span>&gt;</span>

  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"settings"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">OrgSettings</span> /&gt;</span>} /&gt;</span>
<span class="tag">&lt;/<span class="comp">Route</span>&gt;</span>
<span class="cmt">
{/* Matches:
  /org/acme              ‚Üí OrgLayout > OrgDashboard
  /org/acme/teams        ‚Üí OrgLayout > TeamsLayout > TeamsList
  /org/acme/teams/dev    ‚Üí OrgLayout > TeamsLayout > TeamDetail
  /org/acme/settings     ‚Üí OrgLayout > OrgSettings
*/}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="accordion-item" onclick="toggleAccordion(this)">
      <div class="accordion-header">
        <span>üîÄ Conditional Routes from Data</span>
        <span class="accordion-arrow">‚ñº</span>
      </div>
      <div class="accordion-body">
        <div class="accordion-content">
          <div class="code-block">
<span class="cmt">// Generate routes dynamically from data</span>
<span class="kw">const</span> routes = [
  { <span class="prop">path</span>: <span class="str">'/'</span>, <span class="prop">element</span>: <span class="tag">&lt;<span class="comp">Home</span> /&gt;</span> },
  { <span class="prop">path</span>: <span class="str">'/about'</span>, <span class="prop">element</span>: <span class="tag">&lt;<span class="comp">About</span> /&gt;</span> },
  ...(isAdmin ? [
    { <span class="prop">path</span>: <span class="str">'/admin'</span>, <span class="prop">element</span>: <span class="tag">&lt;<span class="comp">AdminPanel</span> /&gt;</span> }
  ] : [])
];

<span class="cmt">// Using useRoutes hook</span>
<span class="kw">import</span> { <span class="hook">useRoutes</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;

<span class="kw">function</span> <span class="fn">App</span>() {
  <span class="kw">const</span> element = <span class="hook">useRoutes</span>(routes);
  <span class="kw">return</span> element;
}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Exercise -->
  <div class="exercise-box">
    <div class="exercise-title">üí™ Exercise: Design Route Structure</div>
    <p>You're building an e-commerce app. Design the route configuration for these pages:</p>
    <ul style="margin:10px 0;padding-left:20px;color:var(--text-secondary);">
      <li>Home page (<code>/</code>)</li>
      <li>Product listing (<code>/products</code>)</li>
      <li>Product detail (<code>/products/123</code>)</li>
      <li>Shopping cart (<code>/cart</code>)</li>
      <li>User profile (<code>/user/settings</code>, <code>/user/orders</code>)</li>
      <li>404 page</li>
    </ul>
    <textarea class="exercise-textarea" id="exercise-routes" placeholder="Write your route configuration here...
Example:
<Routes>
  <Route path='/' element={<Home />} />
  ...your routes here
</Routes>"></textarea>
    <div class="btn-group">
      <button class="btn btn-success" onclick="showRouteSolution()">Show Solution</button>
      <button class="btn btn-outline" onclick="clearExercise('exercise-routes')">Clear</button>
    </div>
    <div id="route-solution" style="display:none;margin-top:16px;">
      <div class="code-block">
<span class="tag">&lt;<span class="comp">Routes</span>&gt;</span>
  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">MainLayout</span> /&gt;</span>}&gt;</span>
    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">index</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Home</span> /&gt;</span>} /&gt;</span>

    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"products"</span>&gt;</span>
      <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">index</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">ProductList</span> /&gt;</span>} /&gt;</span>
      <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">":productId"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">ProductDetail</span> /&gt;</span>} /&gt;</span>
    <span class="tag">&lt;/<span class="comp">Route</span>&gt;</span>

    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"cart"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Cart</span> /&gt;</span>} /&gt;</span>

    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"user"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">UserLayout</span> /&gt;</span>}&gt;</span>
      <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"settings"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Settings</span> /&gt;</span>} /&gt;</span>
      <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"orders"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Orders</span> /&gt;</span>} /&gt;</span>
    <span class="tag">&lt;/<span class="comp">Route</span>&gt;</span>

    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"*"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">NotFound</span> /&gt;</span>} /&gt;</span>
  <span class="tag">&lt;/<span class="comp">Route</span>&gt;</span>
<span class="tag">&lt;/<span class="comp">Routes</span>&gt;</span>
      </div>
    </div>
  </div>

  <div class="section-nav">
    <button class="btn btn-outline" onclick="switchSection('basics')">‚Üê Route Config</button>
    <button class="btn btn-primary" onclick="switchSection('params')">Next: URL Parameters ‚Üí</button>
  </div>
</div>

<!-- ==================== SECTION 4: URL PARAMETERS ==================== -->
<div class="section" id="section-params">
  <div class="section-hero">
    <h1>üîó URL Parameters</h1>
    <p>Extract data from URLs using params, query strings, and search params.</p>
  </div>

  <!-- useParams -->
  <div class="card">
    <div class="card-title"><span class="emoji">üé£</span> useParams ‚Äî Route Parameters</div>
    <div class="code-block">
      <span class="code-label">UserProfile.jsx</span>
<span class="kw">import</span> { <span class="hook">useParams</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;

<span class="kw">function</span> <span class="fn">UserProfile</span>() {
  <span class="cmt">// Route: /users/:userId</span>
  <span class="cmt">// URL:   /users/42</span>
<span class="highlight-line">  <span class="kw">const</span> { <span class="prop">userId</span> } = <span class="hook">useParams</span>();  <span class="cmt">// userId = "42"</span></span>

  <span class="kw">return</span> <span class="tag">&lt;h1&gt;</span>User #{userId}<span class="tag">&lt;/h1&gt;</span>;
}

<span class="cmt">// Multiple params</span>
<span class="kw">function</span> <span class="fn">BlogPost</span>() {
  <span class="cmt">// Route: /blog/:year/:month/:slug</span>
  <span class="cmt">// URL:   /blog/2024/03/react-routing</span>
  <span class="kw">const</span> { <span class="prop">year</span>, <span class="prop">month</span>, <span class="prop">slug</span> } = <span class="hook">useParams</span>();
  <span class="cmt">// year = "2024", month = "03", slug = "react-routing"</span>

  <span class="kw">return</span> (
    <span class="tag">&lt;article&gt;</span>
      <span class="tag">&lt;h1&gt;</span>{slug}<span class="tag">&lt;/h1&gt;</span>
      <span class="tag">&lt;p&gt;</span>Published: {month}/{year}<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/article&gt;</span>
  );
}
    </div>

    <div class="pitfall-box">
      <div class="pitfall-title">‚ö†Ô∏è Pitfall: Params are ALWAYS strings!</div>
      <div class="code-block" style="border-color:var(--accent-red);">
<span class="kw">const</span> { <span class="prop">userId</span> } = <span class="hook">useParams</span>();

<span class="cmt">// ‚ùå WRONG ‚Äî userId is a string "42", not number 42</span>
<span class="kw">if</span> (userId === <span class="num">42</span>) { ... }  <span class="cmt">// Always false!</span>

<span class="cmt">// ‚úÖ RIGHT ‚Äî convert to number</span>
<span class="kw">if</span> (<span class="fn">Number</span>(userId) === <span class="num">42</span>) { ... }
<span class="cmt">// or</span>
<span class="kw">if</span> (userId === <span class="str">"42"</span>) { ... }
      </div>
    </div>
  </div>

  <!-- useSearchParams -->
  <div class="card">
    <div class="card-title"><span class="emoji">üîç</span> useSearchParams ‚Äî Query Strings</div>
    <div class="code-block">
      <span class="code-label">ProductList.jsx</span>
<span class="kw">import</span> { <span class="hook">useSearchParams</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;

<span class="kw">function</span> <span class="fn">ProductList</span>() {
  <span class="cmt">// URL: /products?category=shoes&sort=price&page=2</span>
<span class="highlight-line">  <span class="kw">const</span> [<span class="prop">searchParams</span>, <span class="fn">setSearchParams</span>] = <span class="hook">useSearchParams</span>();</span>

  <span class="cmt">// READ params</span>
  <span class="kw">const</span> category = searchParams.<span class="fn">get</span>(<span class="str">'category'</span>);   <span class="cmt">// "shoes"</span>
  <span class="kw">const</span> sort = searchParams.<span class="fn">get</span>(<span class="str">'sort'</span>);           <span class="cmt">// "price"</span>
  <span class="kw">const</span> page = searchParams.<span class="fn">get</span>(<span class="str">'page'</span>) || <span class="str">'1'</span>;   <span class="cmt">// "2" or default "1"</span>

  <span class="cmt">// UPDATE params</span>
  <span class="kw">const</span> <span class="fn">handleSort</span> = (newSort) <span class="op">=></span> {
    <span class="fn">setSearchParams</span>({
      <span class="prop">category</span>,
      <span class="prop">sort</span>: newSort,
      <span class="prop">page</span>: <span class="str">'1'</span>  <span class="cmt">// reset page on sort change</span>
    });
  };

  <span class="cmt">// Or update just one param, keeping others</span>
  <span class="kw">const</span> <span class="fn">nextPage</span> = () <span class="op">=></span> {
    searchParams.<span class="fn">set</span>(<span class="str">'page'</span>, <span class="fn">String</span>(<span class="fn">Number</span>(page) + <span class="num">1</span>));
    <span class="fn">setSearchParams</span>(searchParams);
  };

  <span class="kw">return</span> (...);
}
    </div>
  </div>

  <!-- useLocation -->
  <div class="card">
    <div class="card-title"><span class="emoji">üìç</span> useLocation ‚Äî Full Location Object</div>
    <div class="code-block">
<span class="kw">import</span> { <span class="hook">useLocation</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;

<span class="kw">function</span> <span class="fn">CurrentPage</span>() {
  <span class="kw">const</span> location = <span class="hook">useLocation</span>();

  <span class="cmt">// URL: /products/42?color=red#reviews</span>
  console.<span class="fn">log</span>(location);
  <span class="cmt">// {
  //   pathname: "/products/42",
  //   search: "?color=red",
  //   hash: "#reviews",
  //   state: { from: "homepage" },  ‚Üê passed via Link/navigate
  //   key: "abc123"
  // }</span>
}
    </div>

    <div class="tip-box">
      <div class="tip-title">üí° Real-World Use: Scroll to Top</div>
      <div class="code-block">
<span class="kw">import</span> { <span class="hook">useEffect</span> } <span class="kw">from</span> <span class="str">'react'</span>;
<span class="kw">import</span> { <span class="hook">useLocation</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;

<span class="kw">function</span> <span class="fn">ScrollToTop</span>() {
  <span class="kw">const</span> { <span class="prop">pathname</span> } = <span class="hook">useLocation</span>();

  <span class="hook">useEffect</span>(() <span class="op">=></span> {
    window.<span class="fn">scrollTo</span>(<span class="num">0</span>, <span class="num">0</span>);
  }, [pathname]);

  <span class="kw">return</span> <span class="val">null</span>;
}
      </div>
    </div>
  </div>

  <!-- Interactive Param Explorer -->
  <div class="card">
    <div class="card-title"><span class="emoji">üéÆ</span> Interactive: URL Parameter Explorer</div>
    <p>Modify the URL below and see how React Router would parse it:</p>

    <div style="margin:16px 0;">
      <input type="text" id="paramExplorerInput" value="/products/42?color=red&size=large#reviews"
        style="width:100%;background:var(--bg-code);border:1px solid var(--border);padding:12px 16px;border-radius:8px;color:var(--text-primary);font-family:monospace;font-size:0.95em;"
        oninput="parseURLParams()">
    </div>

    <div id="paramExplorerResults" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;">
      <!-- Filled by JS -->
    </div>
  </div>

  <!-- Complete Real-World Example -->
  <div class="card">
    <div class="card-title"><span class="emoji">üåü</span> Complete Example: Product Page</div>
    <div class="code-block">
      <span class="code-label">ProductPage.jsx ‚Äî All hooks together</span>
<span class="kw">import</span> { <span class="hook">useParams</span>, <span class="hook">useSearchParams</span>, <span class="hook">useLocation</span>, <span class="hook">useNavigate</span> }
  <span class="kw">from</span> <span class="str">'react-router-dom'</span>;
<span class="kw">import</span> { <span class="hook">useState</span>, <span class="hook">useEffect</span> } <span class="kw">from</span> <span class="str">'react'</span>;

<span class="kw">function</span> <span class="fn">ProductPage</span>() {
  <span class="cmt">// Route: /products/:productId</span>
  <span class="cmt">// URL: /products/42?variant=blue&tab=reviews</span>

  <span class="kw">const</span> { <span class="prop">productId</span> } = <span class="hook">useParams</span>();
  <span class="kw">const</span> [<span class="prop">searchParams</span>, <span class="fn">setSearchParams</span>] = <span class="hook">useSearchParams</span>();
  <span class="kw">const</span> <span class="prop">location</span> = <span class="hook">useLocation</span>();
  <span class="kw">const</span> <span class="fn">navigate</span> = <span class="hook">useNavigate</span>();

  <span class="kw">const</span> variant = searchParams.<span class="fn">get</span>(<span class="str">'variant'</span>) || <span class="str">'default'</span>;
  <span class="kw">const</span> activeTab = searchParams.<span class="fn">get</span>(<span class="str">'tab'</span>) || <span class="str">'details'</span>;
  <span class="kw">const</span> [<span class="prop">product</span>, <span class="fn">setProduct</span>] = <span class="hook">useState</span>(<span class="val">null</span>);

  <span class="hook">useEffect</span>(() <span class="op">=></span> {
    <span class="fn">fetch</span>(<span class="str">`/api/products/${productId}`</span>)
      .<span class="fn">then</span>(res <span class="op">=></span> res.<span class="fn">json</span>())
      .<span class="fn">then</span>(<span class="fn">setProduct</span>);
  }, [productId]);

  <span class="kw">const</span> <span class="fn">switchTab</span> = (tab) <span class="op">=></span> {
    searchParams.<span class="fn">set</span>(<span class="str">'tab'</span>, tab);
    <span class="fn">setSearchParams</span>(searchParams);
  };

  <span class="kw">return</span> (
    <span class="tag">&lt;div&gt;</span>
      <span class="tag">&lt;h1&gt;</span>{product?.name}<span class="tag">&lt;/h1&gt;</span>
      <span class="tag">&lt;p&gt;</span>Variant: {variant}<span class="tag">&lt;/p&gt;</span>
      <span class="tag">&lt;div&gt;</span>
        <span class="tag">&lt;button <span class="attr">onClick</span>={() <span class="op">=></span> <span class="fn">switchTab</span>(<span class="str">'details'</span>)}&gt;</span>Details<span class="tag">&lt;/button&gt;</span>
        <span class="tag">&lt;button <span class="attr">onClick</span>={() <span class="op">=></span> <span class="fn">switchTab</span>(<span class="str">'reviews'</span>)}&gt;</span>Reviews<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;/div&gt;</span>
      <span class="tag">&lt;button <span class="attr">onClick</span>={() <span class="op">=></span> <span class="fn">navigate</span>(<span class="num">-1</span>)}&gt;</span>‚Üê Back<span class="tag">&lt;/button&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  );
}
    </div>
  </div>

  <!-- Pitfalls Collection -->
  <div class="card">
    <div class="card-title"><span class="emoji">üí£</span> URL Parameter Pitfalls</div>

    <div class="pitfall-box">
      <div class="pitfall-title">‚ö†Ô∏è 1. Not handling undefined params</div>
      <div class="code-block" style="border-color:var(--accent-red);">
<span class="cmt">// ‚ùå Will crash if param is missing</span>
<span class="kw">const</span> { <span class="prop">userId</span> } = <span class="hook">useParams</span>();
<span class="fn">fetch</span>(<span class="str">`/api/users/${userId}`</span>);  <span class="cmt">// userId could be undefined!</span>

<span class="cmt">// ‚úÖ Always validate</span>
<span class="kw">if</span> (!userId) <span class="kw">return</span> <span class="tag">&lt;<span class="comp">Navigate</span> <span class="attr">to</span>=<span class="str">"/"</span> /&gt;</span>;
      </div>
    </div>

    <div class="pitfall-box">
      <div class="pitfall-title">‚ö†Ô∏è 2. Losing search params on navigation</div>
      <div class="code-block" style="border-color:var(--accent-red);">
<span class="cmt">// ‚ùå This replaces ALL search params</span>
<span class="fn">setSearchParams</span>({ <span class="prop">page</span>: <span class="str">'2'</span> }); <span class="cmt">// Loses category, sort, etc!</span>

<span class="cmt">// ‚úÖ Preserve existing params</span>
<span class="kw">const</span> newParams = <span class="kw">new</span> <span class="fn">URLSearchParams</span>(searchParams);
newParams.<span class="fn">set</span>(<span class="str">'page'</span>, <span class="str">'2'</span>);
<span class="fn">setSearchParams</span>(newParams);
      </div>
    </div>

    <div class="pitfall-box">
      <div class="pitfall-title">‚ö†Ô∏è 3. Not URL-encoding special characters</div>
      <div class="code-block" style="border-color:var(--accent-red);">
<span class="cmt">// ‚ùå Spaces and special chars break URLs</span>
<span class="fn">navigate</span>(<span class="str">`/search?q=hello world&price=>50`</span>);

<span class="cmt">// ‚úÖ Use URLSearchParams (auto-encodes)</span>
<span class="kw">const</span> params = <span class="kw">new</span> <span class="fn">URLSearchParams</span>({
  <span class="prop">q</span>: <span class="str">'hello world'</span>,
  <span class="prop">price</span>: <span class="str">'>50'</span>
});
<span class="fn">navigate</span>(<span class="str">`/search?${params}`</span>);
<span class="cmt">// ‚Üí /search?q=hello+world&price=%3E50</span>
      </div>
    </div>
  </div>

  <div class="section-nav">
    <button class="btn btn-outline" onclick="switchSection('dynamic')">‚Üê Dynamic Routes</button>
    <button class="btn btn-primary" onclick="switchSection('guards')">Next: Navigation Guards ‚Üí</button>
  </div>
</div>

<!-- ==================== SECTION 5: NAVIGATION GUARDS ==================== -->
<div class="section" id="section-guards">
  <div class="section-hero">
    <h1>üõ°Ô∏è Navigation Guards</h1>
    <p>Protect routes, handle authentication, and control navigation flow.</p>
  </div>

  <!-- What are Guards -->
  <div class="card">
    <div class="card-title"><span class="emoji">üîê</span> Route Protection Patterns</div>
    <p>React Router doesn't have built-in "guards" like Vue/Angular, but we implement them using <strong>wrapper components</strong>. This pattern is actually more flexible!</p>

    <div class="diagram-container">
      <h4 style="text-align:center;color:var(--accent-blue);margin-bottom:15px;">Guard Flow</h4>
      <div class="flow-container" id="guardFlowDiagram">
        <div class="flow-box" id="gf-1">üìç User navigates to <code>/dashboard</code></div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-box" id="gf-2">üõ°Ô∏è ProtectedRoute checks auth</div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-row">
          <div>
            <div class="flow-box" id="gf-3" style="border-color:var(--accent-green);">‚úÖ Authenticated ‚Üí Show Dashboard</div>
          </div>
          <div>
            <div class="flow-box" id="gf-4" style="border-color:var(--accent-red);">‚ùå Not Auth ‚Üí Redirect to Login</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Protected Route Component -->
  <div class="card">
    <div class="card-title"><span class="emoji">üèóÔ∏è</span> Building a Protected Route</div>

    <div class="inner-tabs">
      <div class="inner-tab active" onclick="switchInnerTab(this, 'guard-basic')">Basic Guard</div>
      <div class="inner-tab" onclick="switchInnerTab(this, 'guard-role')">Role-Based</div>
      <div class="inner-tab" onclick="switchInnerTab(this, 'guard-redirect')">Redirect Back</div>
      <div class="inner-tab" onclick="switchInnerTab(this, 'guard-loading')">With Loading</div>
    </div>

    <div class="inner-content active" id="guard-basic">
      <div class="code-block">
        <span class="code-label">ProtectedRoute.jsx</span>
<span class="kw">import</span> { <span class="comp">Navigate</span>, <span class="comp">Outlet</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;
<span class="kw">import</span> { <span class="hook">useAuth</span> } <span class="kw">from</span> <span class="str">'./hooks/useAuth'</span>;

<span class="kw">function</span> <span class="fn">ProtectedRoute</span>() {
  <span class="kw">const</span> { <span class="prop">user</span> } = <span class="hook">useAuth</span>();

<span class="highlight-line">  <span class="kw">if</span> (!user) {</span>
<span class="highlight-line">    <span class="kw">return</span> <span class="tag">&lt;<span class="comp">Navigate</span> <span class="attr">to</span>=<span class="str">"/login"</span> <span class="attr">replace</span> /&gt;</span>;</span>
<span class="highlight-line">  }</span>

  <span class="kw">return</span> <span class="tag">&lt;<span class="comp">Outlet</span> /&gt;</span>;  <span class="cmt">{/* Render child routes */}</span>
}

<span class="cmt">// Usage in routes:</span>
<span class="tag">&lt;<span class="comp">Routes</span>&gt;</span>
  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/login"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Login</span> /&gt;</span>} /&gt;</span>

  <span class="cmt">{/* All children are protected */}</span>
<span class="highlight-line">  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">ProtectedRoute</span> /&gt;</span>}&gt;</span></span>
    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/dashboard"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Dashboard</span> /&gt;</span>} /&gt;</span>
    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/profile"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Profile</span> /&gt;</span>} /&gt;</span>
    <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/settings"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Settings</span> /&gt;</span>} /&gt;</span>
  <span class="tag">&lt;/<span class="comp">Route</span>&gt;</span>
<span class="tag">&lt;/<span class="comp">Routes</span>&gt;</span>
      </div>
    </div>

    <div class="inner-content" id="guard-role">
      <div class="code-block">
        <span class="code-label">RoleGuard.jsx</span>
<span class="kw">function</span> <span class="fn">RoleGuard</span>({ <span class="prop">allowedRoles</span> }) {
  <span class="kw">const</span> { <span class="prop">user</span> } = <span class="hook">useAuth</span>();

  <span class="kw">if</span> (!user) {
    <span class="kw">return</span> <span class="tag">&lt;<span class="comp">Navigate</span> <span class="attr">to</span>=<span class="str">"/login"</span> <span class="attr">replace</span> /&gt;</span>;
  }

<span class="highlight-line">  <span class="kw">if</span> (!allowedRoles.<span class="fn">includes</span>(user.role)) {</span>
<span class="highlight-line">    <span class="kw">return</span> <span class="tag">&lt;<span class="comp">Navigate</span> <span class="attr">to</span>=<span class="str">"/unauthorized"</span> <span class="attr">replace</span> /&gt;</span>;</span>
<span class="highlight-line">  }</span>

  <span class="kw">return</span> <span class="tag">&lt;<span class="comp">Outlet</span> /&gt;</span>;
}

<span class="cmt">// Usage:</span>
<span class="tag">&lt;<span class="comp">Route</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">RoleGuard</span> <span class="attr">allowedRoles</span>={[<span class="str">'admin'</span>, <span class="str">'manager'</span>]} /&gt;</span>}&gt;</span>
  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/admin"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">AdminPanel</span> /&gt;</span>} /&gt;</span>
  <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/admin/users"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">ManageUsers</span> /&gt;</span>} /&gt;</span>
<span class="tag">&lt;/<span class="comp">Route</span>&gt;</span>
      </div>
    </div>

    <div class="inner-content" id="guard-redirect">
      <div class="code-block">
        <span class="code-label">ProtectedRoute.jsx ‚Äî Remember where user came from</span>
<span class="kw">import</span> { <span class="comp">Navigate</span>, <span class="comp">Outlet</span>, <span class="hook">useLocation</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;

<span class="kw">function</span> <span class="fn">ProtectedRoute</span>() {
  <span class="kw">const</span> { <span class="prop">user</span> } = <span class="hook">useAuth</span>();
<span class="highlight-line">  <span class="kw">const</span> <span class="prop">location</span> = <span class="hook">useLocation</span>();</span>

  <span class="kw">if</span> (!user) {
    <span class="cmt">// Save the attempted URL so we can redirect back after login</span>
<span class="highlight-line">    <span class="kw">return</span> <span class="tag">&lt;<span class="comp">Navigate</span> <span class="attr">to</span>=<span class="str">"/login"</span> <span class="attr">state</span>={{ <span class="prop">from</span>: location }} <span class="attr">replace</span> /&gt;</span>;</span>
  }

  <span class="kw">return</span> <span class="tag">&lt;<span class="comp">Outlet</span> /&gt;</span>;
}

<span class="cmt">// In LoginPage, after successful login:</span>
<span class="kw">function</span> <span class="fn">LoginPage</span>() {
  <span class="kw">const</span> <span class="fn">navigate</span> = <span class="hook">useNavigate</span>();
  <span class="kw">const</span> <span class="prop">location</span> = <span class="hook">useLocation</span>();

  <span class="kw">const</span> <span class="fn">handleLogin</span> = <span class="kw">async</span> () <span class="op">=></span> {
    <span class="kw">await</span> <span class="fn">login</span>(credentials);
<span class="highlight-line">    <span class="kw">const</span> from = location.state?.from?.pathname || <span class="str">'/'</span>;</span>
<span class="highlight-line">    <span class="fn">navigate</span>(from, { <span class="prop">replace</span>: <span class="val">true</span> });</span>
  };
}
      </div>
    </div>

    <div class="inner-content" id="guard-loading">
      <div class="code-block">
        <span class="code-label">ProtectedRoute.jsx ‚Äî With loading state</span>
<span class="kw">function</span> <span class="fn">ProtectedRoute</span>() {
  <span class="kw">const</span> { <span class="prop">user</span>, <span class="prop">isLoading</span> } = <span class="hook">useAuth</span>();

<span class="highlight-line">  <span class="kw">if</span> (isLoading) {</span>
<span class="highlight-line">    <span class="kw">return</span> (</span>
<span class="highlight-line">      <span class="tag">&lt;div <span class="attr">className</span>=<span class="str">"loading-screen"</span>&gt;</span></span>
<span class="highlight-line">        <span class="tag">&lt;<span class="comp">Spinner</span> /&gt;</span></span>
<span class="highlight-line">        <span class="tag">&lt;p&gt;</span>Checking authentication...<span class="tag">&lt;/p&gt;</span></span>
<span class="highlight-line">      <span class="tag">&lt;/div&gt;</span></span>
<span class="highlight-line">    );</span>
<span class="highlight-line">  }</span>

  <span class="kw">if</span> (!user) {
    <span class="kw">return</span> <span class="tag">&lt;<span class="comp">Navigate</span> <span class="attr">to</span>=<span class="str">"/login"</span> <span class="attr">replace</span> /&gt;</span>;
  }

  <span class="kw">return</span> <span class="tag">&lt;<span class="comp">Outlet</span> /&gt;</span>;
}
      </div>

      <div class="pitfall-box">
        <div class="pitfall-title">‚ö†Ô∏è Always handle loading state!</div>
        <p>If you check <code>user</code> before the auth check completes, you'll redirect to login even for authenticated users. This causes a flash of the login page.</p>
      </div>
    </div>
  </div>

  <!-- Interactive Guard Simulator -->
  <div class="card">
    <div class="card-title"><span class="emoji">üéÆ</span> Interactive: Guard Simulator</div>
    <p>Toggle the auth states and try navigating to protected routes!</p>

    <div class="guard-sim">
      <div class="guard-controls">
        <h4 style="color:var(--accent-purple);margin-bottom:12px;">üéõÔ∏è Controls</h4>
        <div class="toggle-switch" onclick="toggleGuard('auth')">
          <div class="toggle-track" id="guard-auth-track">
            <div class="toggle-thumb"></div>
          </div>
          <span>Authenticated</span>
        </div>
        <div class="toggle-switch" onclick="toggleGuard('admin')">
          <div class="toggle-track" id="guard-admin-track">
            <div class="toggle-thumb"></div>
          </div>
          <span>Admin Role</span>
        </div>
        <div class="toggle-switch" onclick="toggleGuard('premium')">
          <div class="toggle-track" id="guard-premium-track">
            <div class="toggle-thumb"></div>
          </div>
          <span>Premium User</span>
        </div>
      </div>

      <div class="guard-display">
        <div class="simulator">
          <div class="sim-browser-bar">
            <div class="sim-dots">
              <div class="sim-dot red"></div>
              <div class="sim-dot yellow"></div>
              <div class="sim-dot green"></div>
            </div>
            <div class="sim-url-bar">
              <span class="lock">üîí</span>
              <span id="guard-sim-url">myapp.com/</span>
            </div>
          </div>
          <div style="padding:12px;display:flex;gap:6px;flex-wrap:wrap;border-bottom:1px solid var(--border);">
            <button class="btn btn-outline" style="padding:6px 12px;font-size:0.8em;" onclick="guardNavigate('/')">üè† Home</button>
            <button class="btn btn-outline" style="padding:6px 12px;font-size:0.8em;" onclick="guardNavigate('/dashboard')">üìä Dashboard</button>
            <button class="btn btn-outline" style="padding:6px 12px;font-size:0.8em;" onclick="guardNavigate('/admin')">üîß Admin</button>
            <button class="btn btn-outline" style="padding:6px 12px;font-size:0.8em;" onclick="guardNavigate('/premium')">‚≠ê Premium</button>
          </div>
          <div style="padding:30px;min-height:150px;display:flex;align-items:center;justify-content:center;">
            <div id="guard-sim-content" style="text-align:center;">
              <h3>üè† Welcome Home</h3>
              <p style="color:var(--text-secondary);">Public page - no auth needed</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Unsaved Changes Guard -->
  <div class="card">
    <div class="card-title"><span class="emoji">üíæ</span> Preventing Unsaved Changes <span class="badge badge-new">Useful!</span></div>
    <div class="code-block">
      <span class="code-label">usePrompt ‚Äî Custom hook for unsaved changes</span>
<span class="kw">import</span> { <span class="hook">useEffect</span>, <span class="hook">useCallback</span> } <span class="kw">from</span> <span class="str">'react'</span>;
<span class="kw">import</span> { <span class="hook">useBlocker</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;  <span class="badge badge-v6">v6.4+</span>

<span class="kw">function</span> <span class="fn">EditForm</span>() {
  <span class="kw">const</span> [<span class="prop">isDirty</span>, <span class="fn">setIsDirty</span>] = <span class="hook">useState</span>(<span class="val">false</span>);

  <span class="cmt">// Block navigation when form is dirty</span>
<span class="highlight-line">  <span class="kw">const</span> blocker = <span class="hook">useBlocker</span>(isDirty);</span>

  <span class="kw">return</span> (
    <span class="tag">&lt;div&gt;</span>
      <span class="tag">&lt;form <span class="attr">onChange</span>={() <span class="op">=></span> <span class="fn">setIsDirty</span>(<span class="val">true</span>)}&gt;</span>
        ...
      <span class="tag">&lt;/form&gt;</span>

      {blocker.state === <span class="str">"blocked"</span> && (
        <span class="tag">&lt;div <span class="attr">className</span>=<span class="str">"modal"</span>&gt;</span>
          <span class="tag">&lt;p&gt;</span>You have unsaved changes!<span class="tag">&lt;/p&gt;</span>
          <span class="tag">&lt;button <span class="attr">onClick</span>={() <span class="op">=></span> blocker.<span class="fn">proceed</span>()}&gt;</span>
            Leave anyway
          <span class="tag">&lt;/button&gt;</span>
          <span class="tag">&lt;button <span class="attr">onClick</span>={() <span class="op">=></span> blocker.<span class="fn">reset</span>()}&gt;</span>
            Stay on page
          <span class="tag">&lt;/button&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
      )}
    <span class="tag">&lt;/div&gt;</span>
  );
}
    </div>
  </div>

  <div class="section-nav">
    <button class="btn btn-outline" onclick="switchSection('params')">‚Üê URL Parameters</button>
    <button class="btn btn-primary" onclick="switchSection('advanced')">Next: Advanced Patterns ‚Üí</button>
  </div>
</div>

<!-- ==================== SECTION 6: ADVANCED ==================== -->
<div class="section" id="section-advanced">
  <div class="section-hero">
    <h1>üöÄ Advanced Patterns</h1>
    <p>Lazy loading, data loading, error boundaries, and interview-ready patterns.</p>
  </div>

  <!-- Lazy Loading -->
  <div class="card">
    <div class="card-title"><span class="emoji">‚ö°</span> Lazy Loading Routes</div>
    <p>Split your bundle by lazy-loading route components. Users only download code for pages they visit!</p>
    <div class="code-block">
<span class="kw">import</span> { <span class="hook">lazy</span>, <span class="comp">Suspense</span> } <span class="kw">from</span> <span class="str">'react'</span>;

<span class="cmt">// Lazy load components</span>
<span class="kw">const</span> <span class="comp">Dashboard</span> = <span class="hook">lazy</span>(() <span class="op">=></span> <span class="kw">import</span>(<span class="str">'./pages/Dashboard'</span>));
<span class="kw">const</span> <span class="comp">Settings</span> = <span class="hook">lazy</span>(() <span class="op">=></span> <span class="kw">import</span>(<span class="str">'./pages/Settings'</span>));
<span class="kw">const</span> <span class="comp">Analytics</span> = <span class="hook">lazy</span>(() <span class="op">=></span> <span class="kw">import</span>(<span class="str">'./pages/Analytics'</span>));

<span class="kw">function</span> <span class="fn">App</span>() {
  <span class="kw">return</span> (
    <span class="tag">&lt;<span class="comp">BrowserRouter</span>&gt;</span>
<span class="highlight-line">      <span class="tag">&lt;<span class="comp">Suspense</span> <span class="attr">fallback</span>={<span class="tag">&lt;div&gt;</span>Loading...<span class="tag">&lt;/div&gt;</span>}&gt;</span></span>
        <span class="tag">&lt;<span class="comp">Routes</span>&gt;</span>
          <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Home</span> /&gt;</span>} /&gt;</span>
          <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/dashboard"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Dashboard</span> /&gt;</span>} /&gt;</span>
          <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/settings"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Settings</span> /&gt;</span>} /&gt;</span>
          <span class="tag">&lt;<span class="comp">Route</span> <span class="attr">path</span>=<span class="str">"/analytics"</span> <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Analytics</span> /&gt;</span>} /&gt;</span>
        <span class="tag">&lt;/<span class="comp">Routes</span>&gt;</span>
      <span class="tag">&lt;/<span class="comp">Suspense</span>&gt;</span>
    <span class="tag">&lt;/<span class="comp">BrowserRouter</span>&gt;</span>
  );
}
    </div>
  </div>

  <!-- Error Boundaries -->
  <div class="card">
    <div class="card-title"><span class="emoji">üõ°Ô∏è</span> Error Boundaries for Routes <span class="badge badge-v6">v6.4+</span></div>
    <div class="code-block">
<span class="tag">&lt;<span class="comp">Route</span>
  <span class="attr">path</span>=<span class="str">"/dashboard"</span>
  <span class="attr">element</span>={<span class="tag">&lt;<span class="comp">Dashboard</span> /&gt;</span>}
<span class="highlight-line">  <span class="attr">errorElement</span>={<span class="tag">&lt;<span class="comp">ErrorPage</span> /&gt;</span>}</span>
/&gt;</span>

<span class="cmt">// ErrorPage component:</span>
<span class="kw">import</span> { <span class="hook">useRouteError</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;

<span class="kw">function</span> <span class="fn">ErrorPage</span>() {
  <span class="kw">const</span> error = <span class="hook">useRouteError</span>();

  <span class="kw">return</span> (
    <span class="tag">&lt;div&gt;</span>
      <span class="tag">&lt;h1&gt;</span>Oops! Something went wrong<span class="tag">&lt;/h1&gt;</span>
      <span class="tag">&lt;p&gt;</span>{error.message}<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  );
}
    </div>
  </div>

  <!-- Data Loading with Loaders -->
  <div class="card">
    <div class="card-title"><span class="emoji">üì°</span> Data Loading (createBrowserRouter) <span class="badge badge-v6">v6.4+</span></div>
    <div class="code-block">
<span class="kw">import</span> { <span class="fn">createBrowserRouter</span>, <span class="comp">RouterProvider</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;

<span class="kw">const</span> router = <span class="fn">createBrowserRouter</span>([
  {
    <span class="prop">path</span>: <span class="str">"/"</span>,
    <span class="prop">element</span>: <span class="tag">&lt;<span class="comp">Layout</span> /&gt;</span>,
    <span class="prop">children</span>: [
      {
        <span class="prop">path</span>: <span class="str">"users/:userId"</span>,
        <span class="prop">element</span>: <span class="tag">&lt;<span class="comp">UserProfile</span> /&gt;</span>,
<span class="highlight-line">        <span class="prop">loader</span>: <span class="kw">async</span> ({ <span class="prop">params</span> }) <span class="op">=></span> {</span>
<span class="highlight-line">          <span class="kw">const</span> res = <span class="kw">await</span> <span class="fn">fetch</span>(<span class="str">`/api/users/${params.userId}`</span>);</span>
<span class="highlight-line">          <span class="kw">if</span> (!res.ok) <span class="kw">throw</span> <span class="kw">new</span> <span class="fn">Response</span>(<span class="str">"Not Found"</span>, { <span class="prop">status</span>: <span class="num">404</span> });</span>
<span class="highlight-line">          <span class="kw">return</span> res.<span class="fn">json</span>();</span>
<span class="highlight-line">        },</span>
        <span class="prop">errorElement</span>: <span class="tag">&lt;<span class="comp">ErrorPage</span> /&gt;</span>,
      }
    ]
  }
]);

<span class="cmt">// In the component, use the loaded data:</span>
<span class="kw">import</span> { <span class="hook">useLoaderData</span> } <span class="kw">from</span> <span class="str">'react-router-dom'</span>;

<span class="kw">function</span> <span class="fn">UserProfile</span>() {
<span class="highlight-line">  <span class="kw">const</span> user = <span class="hook">useLoaderData</span>();  <span class="cmt">// Data is already loaded!</span></span>
  <span class="kw">return</span> <span class="tag">&lt;h1&gt;</span>{user.name}<span class="tag">&lt;/h1&gt;</span>;
}

<span class="cmt">// Render the router:</span>
<span class="kw">function</span> <span class="fn">App</span>() {
  <span class="kw">return</span> <span class="tag">&lt;<span class="comp">RouterProvider</span> <span class="attr">router</span>={router} /&gt;</span>;
}
    </div>
  </div>

  <!-- Interview Cheat Sheet -->
  <div class="card">
    <div class="card-title"><span class="emoji">üéØ</span> Interview Cheat Sheet</div>

    <div class="checklist-item" onclick="toggleChecklist(this)">
      <div class="checklist-check">‚úì</div>
      <span>Explain the difference between <code>BrowserRouter</code> and <code>HashRouter</code></span>
    </div>
    <div class="checklist-item" onclick="toggleChecklist(this)">
      <div class="checklist-check">‚úì</div>
      <span>Know all hooks: <code>useParams</code>, <code>useSearchParams</code>, <code>useNavigate</code>, <code>useLocation</code></span>
    </div>
    <div class="checklist-item" onclick="toggleChecklist(this)">
      <div class="checklist-check">‚úì</div>
      <span>Implement a Protected Route wrapper</span>
    </div>
    <div class="checklist-item" onclick="toggleChecklist(this)">
      <div class="checklist-check">‚úì</div>
      <span>Explain nested routes and Outlet</span>
    </div>
    <div class="checklist-item" onclick="toggleChecklist(this)">
      <div class="checklist-check">‚úì</div>
      <span>Lazy loading with React.lazy and Suspense</span>
    </div>
    <div class="checklist-item" onclick="toggleChecklist(this)">
      <div class="checklist-check">‚úì</div>
      <span>Handle 404 pages with catch-all route</span>
    </div>
    <div class="checklist-item" onclick="toggleChecklist(this)">
      <div class="checklist-check">‚úì</div>
      <span>Redirect after login to the originally requested page</span>
    </div>
    <div class="checklist-item" onclick="toggleChecklist(this)">
      <div class="checklist-check">‚úì</div>
      <span>Know <code>Link</code> vs <code>NavLink</code> vs <code>&lt;a&gt;</code></span>
    </div>
  </div>

  <div class="section-nav">
    <button class="btn btn-outline" onclick="switchSection('guards')">‚Üê Nav Guards</button>
    <button class="btn btn-primary" onclick="switchSection('quiz')">Next: Final Quiz ‚Üí</button>
  </div>
</div>

<!-- ==================== SECTION 7: FINAL QUIZ ==================== -->
<div class="section" id="section-quiz">
  <div class="section-hero">
    <h1>üèÜ Final Quiz</h1>
    <p>Test your React Router mastery! 10 questions covering everything you've learned.</p>
  </div>

  <div class="quiz-container" id="finalQuiz">
    <!-- Q1 -->
    <div class="quiz-question" id="fq-1">
      <div class="quiz-q-text">
        <span class="quiz-q-num">1</span>
        <span>What hook would you use to programmatically navigate after a form submission?</span>
      </div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-1',false)"><span class="opt-letter">A</span><span>useHistory()</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-1',true)"><span class="opt-letter">B</span><span>useNavigate()</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-1',false)"><span class="opt-letter">C</span><span>useRedirect()</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-1',false)"><span class="opt-letter">D</span><span>useRouter()</span></div>
      </div>
      <div class="quiz-explanation" id="fq-1-exp"><strong>useNavigate()</strong> replaced useHistory() in v6. It returns a navigate function you can call imperatively.</div>
    </div>

    <!-- Q2 -->
    <div class="quiz-question" id="fq-2">
      <div class="quiz-q-text">
        <span class="quiz-q-num">2</span>
        <span>What does the <code>path="*"</code> route match?</span>
      </div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-2',false)"><span class="opt-letter">A</span><span>Only the root path /</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-2',false)"><span class="opt-letter">B</span><span>All paths starting with /</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-2',true)"><span class="opt-letter">C</span><span>Any URL that hasn't matched another route</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-2',false)"><span class="opt-letter">D</span><span>It's a syntax error</span></div>
      </div>
      <div class="quiz-explanation" id="fq-2-exp"><code>path="*"</code> is a catch-all that matches any URL not matched by other routes. Perfect for 404 pages!</div>
    </div>

    <!-- Q3 -->
    <div class="quiz-question" id="fq-3">
      <div class="quiz-q-text">
        <span class="quiz-q-num">3</span>
        <span>What type does <code>useParams()</code> return for parameter values?</span>
      </div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-3',false)"><span class="opt-letter">A</span><span>Number</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-3',true)"><span class="opt-letter">B</span><span>String (always)</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-3',false)"><span class="opt-letter">C</span><span>It auto-detects the type</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-3',false)"><span class="opt-letter">D</span><span>Object</span></div>
      </div>
      <div class="quiz-explanation" id="fq-3-exp">URL params are <strong>always strings</strong>! Even <code>/users/42</code> gives you <code>"42"</code> not <code>42</code>. Always convert when needed.</div>
    </div>

    <!-- Q4 -->
    <div class="quiz-question" id="fq-4">
      <div class="quiz-q-text">
        <span class="quiz-q-num">4</span>
        <span>Why should you use <code>&lt;Link&gt;</code> instead of <code>&lt;a href="..."&gt;</code>?</span>
      </div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-4',false)"><span class="opt-letter">A</span><span>Link is faster to type</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-4',true)"><span class="opt-letter">B</span><span>&lt;a&gt; causes a full page reload, losing React state</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-4',false)"><span class="opt-letter">C</span><span>&lt;a&gt; doesn't work in React</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-4',false)"><span class="opt-letter">D</span><span>Link automatically adds CSS</span></div>
      </div>
      <div class="quiz-explanation" id="fq-4-exp"><code>&lt;a href&gt;</code> triggers a full browser reload, destroying the SPA experience and all React state. <code>&lt;Link&gt;</code> uses the History API for client-side navigation.</div>
    </div>

    <!-- Q5 -->
    <div class="quiz-question" id="fq-5">
      <div class="quiz-q-text">
        <span class="quiz-q-num">5</span>
        <span>Where do child route components render in a parent layout?</span>
      </div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-5',false)"><span class="opt-letter">A</span><span>At the bottom of the parent component</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-5',true)"><span class="opt-letter">B</span><span>Where &lt;Outlet /&gt; is placed</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-5',false)"><span class="opt-letter">C</span><span>They replace the parent entirely</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-5',false)"><span class="opt-letter">D</span><span>Inside {children} prop</span></div>
      </div>
      <div class="quiz-explanation" id="fq-5-exp"><code>&lt;Outlet /&gt;</code> is the designated spot in a parent route's component where matched child routes render. Think of it as a "route slot."</div>
    </div>

    <!-- Q6 -->
    <div class="quiz-question" id="fq-6">
      <div class="quiz-q-text">
        <span class="quiz-q-num">6</span>
        <span>What's the correct way to implement a protected route in React Router v6?</span>
      </div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-6',false)"><span class="opt-letter">A</span><span>Use the onEnter prop on Route</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-6',false)"><span class="opt-letter">B</span><span>Use beforeRouteEnter guard</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-6',true)"><span class="opt-letter">C</span><span>Create a wrapper component that checks auth and renders Outlet or Navigate</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-6',false)"><span class="opt-letter">D</span><span>Add an auth prop to the Route component</span></div>
      </div>
      <div class="quiz-explanation" id="fq-6-exp">React Router v6 uses a wrapper/layout pattern: create a component that checks auth, returns <code>&lt;Outlet /&gt;</code> if authorized, or <code>&lt;Navigate /&gt;</code> if not.</div>
    </div>

    <!-- Q7 -->
    <div class="quiz-question" id="fq-7">
      <div class="quiz-q-text">
        <span class="quiz-q-num">7</span>
        <span>How do you read query parameters like <code>?page=2&sort=name</code>?</span>
      </div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-7',false)"><span class="opt-letter">A</span><span>useParams().page</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-7',true)"><span class="opt-letter">B</span><span>useSearchParams() ‚Üí searchParams.get('page')</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-7',false)"><span class="opt-letter">C</span><span>useQuery().page</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-7',false)"><span class="opt-letter">D</span><span>useLocation().query.page</span></div>
      </div>
      <div class="quiz-explanation" id="fq-7-exp"><code>useSearchParams()</code> returns a tuple of [searchParams, setSearchParams]. Use <code>searchParams.get('key')</code> to read values.</div>
    </div>

    <!-- Q8 -->
    <div class="quiz-question" id="fq-8">
      <div class="quiz-q-text">
        <span class="quiz-q-num">8</span>
        <span>What does <code>navigate(-1)</code> do?</span>
      </div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-8',false)"><span class="opt-letter">A</span><span>Navigates to route at index -1</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-8',true)"><span class="opt-letter">B</span><span>Goes back one page in browser history</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-8',false)"><span class="opt-letter">C</span><span>Throws an error</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-8',false)"><span class="opt-letter">D</span><span>Goes to the home page</span></div>
      </div>
      <div class="quiz-explanation" id="fq-8-exp"><code>navigate(-1)</code> is equivalent to clicking the browser's back button. <code>navigate(-2)</code> goes back 2 pages, <code>navigate(1)</code> goes forward.</div>
    </div>

    <!-- Q9 -->
    <div class="quiz-question" id="fq-9">
      <div class="quiz-q-text">
        <span class="quiz-q-num">9</span>
        <span>What's the difference between <code>NavLink</code> and <code>Link</code>?</span>
      </div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-9',false)"><span class="opt-letter">A</span><span>NavLink works in the navbar, Link works everywhere else</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-9',true)"><span class="opt-letter">B</span><span>NavLink provides isActive/isPending state for styling active links</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-9',false)"><span class="opt-letter">C</span><span>They're identical</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-9',false)"><span class="opt-letter">D</span><span>NavLink is deprecated in v6</span></div>
      </div>
      <div class="quiz-explanation" id="fq-9-exp"><code>NavLink</code> extends <code>Link</code> with active-state awareness. Its className and style props receive <code>{ isActive, isPending }</code> arguments.</div>
    </div>

    <!-- Q10 -->
    <div class="quiz-question" id="fq-10">
      <div class="quiz-q-text">
        <span class="quiz-q-num">10</span>
        <span>Which component should wrap lazy-loaded route components?</span>
      </div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-10',false)"><span class="opt-letter">A</span><span>ErrorBoundary</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-10',true)"><span class="opt-letter">B</span><span>Suspense</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-10',false)"><span class="opt-letter">C</span><span>LazyBoundary</span></div>
        <div class="quiz-option" onclick="checkFinalAnswer(this,'fq-10',false)"><span class="opt-letter">D</span><span>AsyncRoute</span></div>
      </div>
      <div class="quiz-explanation" id="fq-10-exp"><code>&lt;Suspense fallback={...}&gt;</code> is required when using <code>React.lazy()</code>. It shows the fallback UI while the component code is being downloaded.</div>
    </div>
  </div>

  <!-- Score Display -->
  <div id="quizScore" style="display:none;">
    <div class="score-display">
      <p style="color:var(--text-secondary);margin-bottom:10px;">Your Score</p>
      <div class="score-number"><span id="finalScoreNum">0</span>/10</div>
      <p id="scoreMessage" style="margin-top:10px;font-size:1.1em;"></p>
    </div>
    <div style="text-align:center;">
      <button class="btn btn-primary" onclick="resetQuiz()" style="margin-top:16px;">üîÑ Retry Quiz</button>
    </div>
  </div>

  <div class="section-nav">
    <button class="btn btn-outline" onclick="switchSection('advanced')">‚Üê Advanced</button>
    <div></div>
  </div>
</div>

</main>

<!-- ===== CONFETTI CONTAINER ===== -->
<div class="confetti-container" id="confettiContainer"></div>

<!-- ===== JAVASCRIPT ===== -->
<script>
// ==========================================
// STATE MANAGEMENT
// ==========================================
let xp = 0;
let completedSections = new Set();
let answeredQuestions = new Set();
let finalQuizScore = 0;
let finalQuizAnswered = 0;
const totalSections = 7;

const guardState = {
  auth: false,
  admin: false,
  premium: false
};

// ==========================================
// NAVIGATION
// ==========================================
function switchSection(sectionId) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));

  document.getElementById('section-' + sectionId).classList.add('active');
  document.querySelector(`.nav-tab[data-section="${sectionId}"]`).classList.add('active');

  completedSections.add(sectionId);
  updateProgress();

  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function updateProgress() {
  const percent = Math.round((completedSections.size / totalSections) * 100);
  document.getElementById('progressPercent').textContent = percent;
  document.getElementById('progressFill').style.width = percent + '%';

  document.querySelectorAll('.nav-tab').forEach(tab => {
    if (completedSections.has(tab.dataset.section)) {
      tab.classList.add('completed');
    }
  });
}

function addXP(amount) {
  xp += amount;
  document.getElementById('xpCount').textContent = xp;
  const el = document.getElementById('xpCount');
  el.style.transform = 'scale(1.3)';
  setTimeout(() => el.style.transform = 'scale(1)', 200);
}

// ==========================================
// INNER TABS
// ==========================================
function switchInnerTab(clickedTab, contentId) {
  const parent = clickedTab.parentElement;
  parent.querySelectorAll('.inner-tab').forEach(t => t.classList.remove('active'));
  clickedTab.classList.add('active');

  const card = parent.parentElement;
  card.querySelectorAll('.inner-content').forEach(c => c.classList.remove('active'));
  document.getElementById(contentId).classList.add('active');
}

// ==========================================
// SIMULATOR
// ==========================================
function simNavigate(simId, path, name, heading, subtitle, clickedEl) {
  const sim = document.getElementById(simId);
  sim.querySelectorAll('.sim-nav-item').forEach(i => i.classList.remove('active'));
  clickedEl.classList.add('active');

  document.getElementById(simId + '-url').textContent = 'myapp.com' + path;

  const page = document.getElementById(simId + '-page');
  page.innerHTML = `
    <h2>${heading}</h2>
    <p>${subtitle}</p>
    <p style="margin-top:15px;color:var(--accent-green);font-size:0.85em;">‚ú® No page reload occurred!</p>
  `;
  page.style.animation = 'none';
  page.offsetHeight;
  page.style.animation = 'fadeIn 0.3s ease';
}

// ==========================================
// QUIZ SYSTEM
// ==========================================
function checkAnswer(option, questionId, isCorrect) {
  if (answeredQuestions.has(questionId)) return;
  answeredQuestions.add(questionId);

  const question = document.getElementById(questionId);
  const options = question.querySelectorAll('.quiz-option');
  const explanation = document.getElementById(questionId + '-exp');

  options.forEach(o => {
    o.classList.add('disabled');
    o.style.pointerEvents = 'none';
  });

  if (isCorrect) {
    option.classList.add('correct-answer');
    question.classList.add('correct');
    explanation.classList.add('show', 'correct');
    addXP(20);
    showToast('‚úÖ Correct! +20 XP', 'success');
  } else {
    option.classList.add('wrong-answer');
    question.classList.add('incorrect');
    explanation.classList.add('show', 'incorrect');
    options.forEach(o => {
      if (o.onclick && o.onclick.toString().includes('true')) {
        o.classList.add('correct-answer');
      }
    });
    showToast('‚ùå Not quite. Check the explanation!', 'error');
  }
}

// Final Quiz
function checkFinalAnswer(option, questionId, isCorrect) {
  if (answeredQuestions.has(questionId)) return;
  answeredQuestions.add(questionId);
  finalQuizAnswered++;

  const question = document.getElementById(questionId);
  const options = question.querySelectorAll('.quiz-option');
  const explanation = document.getElementById(questionId + '-exp');

  options.forEach(o => {
    o.classList.add('disabled');
    o.style.pointerEvents = 'none';
  });

  if (isCorrect) {
    option.classList.add('correct-answer');
    question.classList.add('correct');
    explanation.classList.add('show', 'correct');
    finalQuizScore++;
    addXP(25);
  } else {
    option.classList.add('wrong-answer');
    question.classList.add('incorrect');
    explanation.classList.add('show', 'incorrect');
    options.forEach(o => {
      if (o.onclick && o.onclick.toString().includes('true')) {
        o.classList.add('correct-answer');
      }
    });
  }

  if (finalQuizAnswered === 10) {
    setTimeout(showFinalScore, 600);
  }
}

function showFinalScore() {
  document.getElementById('quizScore').style.display = 'block';
  document.getElementById('finalScoreNum').textContent = finalQuizScore;

  const msg = document.getElementById('scoreMessage');
  if (finalQuizScore === 10) {
    msg.textContent = 'üéâ Perfect! You\'re a React Router master!';
    msg.style.color = 'var(--accent-green)';
    launchConfetti();
  } else if (finalQuizScore >= 8) {
    msg.textContent = 'üî• Great job! Almost perfect!';
    msg.style.color = 'var(--accent-green)';
    launchConfetti();
  } else if (finalQuizScore >= 6) {
    msg.textContent = 'üëç Good effort! Review the topics you missed.';
    msg.style.color = 'var(--accent-orange)';
  } else {
    msg.textContent = 'üìö Keep studying! Review the sections and try again.';
    msg.style.color = 'var(--accent-red)';
  }

  document.getElementById('quizScore').scrollIntoView({ behavior: 'smooth' });
}

function resetQuiz() {
  finalQuizScore = 0;
  finalQuizAnswered = 0;
  document.getElementById('quizScore').style.display = 'none';

  for (let i = 1; i <= 10; i++) {
    const qId = 'fq-' + i;
    answeredQuestions.delete(qId);
    const q = document.getElementById(qId);
    q.classList.remove('correct', 'incorrect');
    q.querySelectorAll('.quiz-option').forEach(o => {
      o.classList.remove('correct-answer', 'wrong-answer', 'disabled');
      o.style.pointerEvents = 'auto';
    });
    const exp = document.getElementById(qId + '-exp');
    exp.classList.remove('show', 'correct', 'incorrect');
  }

  window.scrollTo({ top: document.getElementById('finalQuiz').offsetTop - 100, behavior: 'smooth' });
}

// ==========================================
// TOAST NOTIFICATIONS
// ==========================================
function showToast(message, type) {
  const toast = document.createElement('div');
  toast.className = 'toast toast-' + type;
  toast.textContent = message;
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 3000);
}

// ==========================================
// CONFETTI
// ==========================================
function launchConfetti() {
  const container = document.getElementById('confettiContainer');
  const colors = ['#ff79c6','#50fa7b','#61dafb','#ffb86c','#bd93f9','#f1fa8c','#ff5555'];

  for (let i = 0; i < 80; i++) {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.left = Math.random() * 100 + '%';
    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
    confetti.style.animationDelay = Math.random() * 2 + 's';
    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
    confetti.style.width = (Math.random() * 8 + 5) + 'px';
    confetti.style.height = (Math.random() * 8 + 5) + 'px';
    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
    container.appendChild(confetti);
  }

  setTimeout(() => container.innerHTML = '', 5000);
}

// ==========================================
// ROUTE MATCHING TESTER
// ==========================================
const routePatterns = [
  { pattern: '/', label: '<Route path="/" />' },
  { pattern: '/users', label: '<Route path="/users" />' },
  { pattern: '/users/:userId', label: '<Route path="/users/:userId" />' },
  { pattern: '/users/:userId/posts', label: '<Route path="/users/:userId/posts" />' },
  { pattern: '/products', label: '<Route path="/products" />' },
  { pattern: '/products/new', label: '<Route path="/products/new" />' },
  { pattern: '/products/:productId', label: '<Route path="/products/:productId" />' },
  { pattern: '/blog/:year/:month/:slug', label: '<Route path="/blog/:year/:month/:slug" />' },
  { pattern: '*', label: '<Route path="*" /> (404)' },
];

function testRouteMatch() {
  const input = document.getElementById('routeTestInput').value.trim();
  const results = document.getElementById('routeMatchResults');

  let html = '';
  let bestMatch = null;
  let bestScore = -1;

  routePatterns.forEach(route => {
    const { matches, params, score } = matchRoute(route.pattern, input);
    if (matches && score > bestScore) {
      bestScore = score;
      bestMatch = route.pattern;
    }
  });

  routePatterns.forEach(route => {
    const { matches, params, score } = matchRoute(route.pattern, input);
    const isBest = route.pattern === bestMatch;

    let indicator = 'no';
    let bgColor = 'transparent';
    let borderColor = 'var(--border)';
    let label = 'No match';

    if (isBest) {
      indicator = 'yes';
      bgColor = 'rgba(80,250,123,0.08)';
      borderColor = 'var(--accent-green)';
      label = '‚úÖ BEST MATCH';
    } else if (matches) {
      indicator = 'partial';
      bgColor = 'rgba(255,184,108,0.05)';
      borderColor = 'var(--accent-orange)';
      label = 'Matches (lower priority)';
    }

    let paramStr = '';
    if (matches && Object.keys(params).length > 0) {
      paramStr = '<div style="font-size:0.8em;color:var(--accent-orange);margin-top:4px;">Params: ' +
        Object.entries(params).map(([k,v]) => `${k}="${v}"`).join(', ') + '</div>';
    }

    html += `
      <div class="route-match-row" style="background:${bgColor};border:1px solid ${borderColor};border-radius:8px;padding:10px 14px;flex-direction:column;align-items:flex-start;">
        <div style="display:flex;align-items:center;gap:8px;width:100%;">
          <span class="match-indicator ${indicator}"></span>
          <code style="font-size:0.85em;flex:1;">${route.label}</code>
          <span style="font-size:0.7em;color:${isBest ? 'var(--accent-green)' : matches ? 'var(--accent-orange)' : 'var(--text-dim)'};">${label}</span>
        </div>
        ${paramStr}
      </div>`;
  });

  results.innerHTML = html;
  results.style.display = 'flex';
  results.style.flexDirection = 'column';
  results.style.gap = '6px';
}

function matchRoute(pattern, path) {
  if (pattern === '*') return { matches: true, params: {}, score: 0 };
  if (pattern === '/' && path === '/') return { matches: true, params: {}, score: 10 };
  if (pattern === '/' && path !== '/') return { matches: false, params: {}, score: 0 };

  const patternParts = pattern.split('/').filter(Boolean);
  const pathParts = path.split('/').filter(Boolean);

  if (patternParts.length !== pathParts.length) return { matches: false, params: {}, score: 0 };

  const params = {};
  let score = patternParts.length * 3;

  for (let i = 0; i < patternParts.length; i++) {
    if (patternParts[i].startsWith(':')) {
      params[patternParts[i].slice(1)] = pathParts[i];
      score -= 1;
    } else if (patternParts[i] !== pathParts[i]) {
      return { matches: false, params: {}, score: 0 };
    }
  }

  return { matches: true, params, score };
}

// ==========================================
// URL PARAM EXPLORER
// ==========================================
function parseURLParams() {
  const input = document.getElementById('paramExplorerInput').value;
  const results = document.getElementById('paramExplorerResults');

  let pathname = input;
  let search = '';
  let hash = '';

  const hashIdx = pathname.indexOf('#');
  if (hashIdx !== -1) {
    hash = pathname.slice(hashIdx);
    pathname = pathname.slice(0, hashIdx);
  }

  const searchIdx = pathname.indexOf('?');
  if (searchIdx !== -1) {
    search = pathname.slice(searchIdx);
    pathname = pathname.slice(0, searchIdx);
  }

  const searchParams = new URLSearchParams(search);
  const paramsObj = {};
  searchParams.forEach((v, k) => paramsObj[k] = v);

  const pathSegments = pathname.split('/').filter(Boolean);

  results.innerHTML = `
    <div style="background:rgba(255,121,198,0.1);border:1px solid var(--accent-pink);border-radius:8px;padding:14px;">
      <div style="font-size:0.75em;color:var(--accent-pink);font-weight:700;margin-bottom:6px;">üìç PATHNAME</div>
      <code style="font-size:0.95em;">${pathname}</code>
      <div style="margin-top:8px;font-size:0.8em;color:var(--text-secondary);">
        Segments: ${pathSegments.map(s => `<span style="background:var(--bg-dark);padding:2px 6px;border-radius:4px;margin:2px;">${s}</span>`).join(' ')}
      </div>
    </div>
    <div style="background:rgba(189,147,249,0.1);border:1px solid var(--accent-purple);border-radius:8px;padding:14px;">
      <div style="font-size:0.75em;color:var(--accent-purple);font-weight:700;margin-bottom:6px;">üîç SEARCH PARAMS</div>
      ${search ? `<code style="font-size:0.9em;">${search}</code>
        <div style="margin-top:8px;font-size:0.85em;">
          ${Object.entries(paramsObj).map(([k,v]) =>
            `<div><span style="color:var(--accent-orange);">${k}</span> = <span style="color:var(--accent-green);">"${v}"</span></div>`
          ).join('')}
        </div>` : '<span style="color:var(--text-dim);">None</span>'}
    </div>
    <div style="background:rgba(97,218,251,0.1);border:1px solid var(--accent-blue);border-radius:8px;padding:14px;">
      <div style="font-size:0.75em;color:var(--accent-blue);font-weight:700;margin-bottom:6px;">#Ô∏è‚É£ HASH</div>
      ${hash ? `<code style="font-size:0.95em;">${hash}</code>` : '<span style="color:var(--text-dim);">None</span>'}
    </div>
  `;
}

// ==========================================
// GUARD SIMULATOR
// ==========================================
function toggleGuard(type) {
  guardState[type] = !guardState[type];
  const track = document.getElementById('guard-' + type + '-track');
  track.classList.toggle('on', guardState[type]);
}

function guardNavigate(path) {
  const urlEl = document.getElementById('guard-sim-url');
  const contentEl = document.getElementById('guard-sim-content');

  let result;

  if (path === '/') {
    result = { allowed: true, title: 'üè† Welcome Home', subtitle: 'Public page - no auth needed', color: 'var(--accent-green)' };
  } else if (path === '/dashboard') {
    if (!guardState.auth) {
      result = { allowed: false, title: 'üîí Access Denied', subtitle: 'You must be logged in! ‚Üí Redirected to /login', color: 'var(--accent-red)', redirectTo: '/login' };
    } else {
      result = { allowed: true, title: 'üìä Dashboard', subtitle: `Welcome back, ${guardState.admin ? 'Admin' : 'User'}!`, color: 'var(--accent-green)' };
    }
  } else if (path === '/admin') {
    if (!guardState.auth) {
      result = { allowed: false, title: 'üîí Access Denied', subtitle: 'You must be logged in! ‚Üí Redirected to /login', color: 'var(--accent-red)', redirectTo: '/login' };
    } else if (!guardState.admin) {
      result = { allowed: false, title: '‚õî Unauthorized', subtitle: 'Admin role required! ‚Üí Redirected to /unauthorized', color: 'var(--accent-orange)', redirectTo: '/unauthorized' };
    } else {
      result = { allowed: true, title: 'üîß Admin Panel', subtitle: 'Full admin access granted!', color: 'var(--accent-green)' };
    }
  } else if (path === '/premium') {
    if (!guardState.auth) {
      result = { allowed: false, title: 'üîí Access Denied', subtitle: 'You must be logged in! ‚Üí Redirected to /login', color: 'var(--accent-red)', redirectTo: '/login' };
    } else if (!guardState.premium) {
      result = { allowed: false, title: 'üíé Premium Required', subtitle: 'Upgrade to premium! ‚Üí Redirected to /upgrade', color: 'var(--accent-orange)', redirectTo: '/upgrade' };
    } else {
      result = { allowed: true, title: '‚≠ê Premium Content', subtitle: 'Exclusive premium features!', color: 'var(--accent-green)' };
    }
  }

  const displayPath = result.redirectTo || path;
  urlEl.textContent = 'myapp.com' + displayPath;

  contentEl.innerHTML = `
    <div style="animation:fadeIn 0.3s ease;">
      <h3 style="color:${result.color};">${result.title}</h3>
      <p style="color:var(--text-secondary);margin-top:8px;">${result.subtitle}</p>
      ${!result.allowed ? `<p style="margin-top:12px;font-size:0.8em;color:var(--text-dim);">
        Guard checked: ${path} ‚Üí redirected to ${result.redirectTo}
      </p>` : ''}
    </div>
  `;

  if (result.allowed) {
    addXP(5);
  }
}

// ==========================================
// ACCORDION
// ==========================================
function toggleAccordion(item) {
  item.classList.toggle('open');
}

// ==========================================
// CHECKLIST
// ==========================================
function toggleChecklist(item) {
  item.classList.toggle('checked');
  if (item.classList.contains('checked')) {
    addXP(5);
  }
}

// ==========================================
// EXERCISES
// ==========================================
function showRouteSolution() {
  const sol = document.getElementById('route-solution');
  sol.style.display = sol.style.display === 'none' ? 'block' : 'none';
  if (sol.style.display === 'block') addXP(10);
}

function clearExercise(id) {
  document.getElementById(id).value = '';
}

// ==========================================
// ROUTE TREE VISUALIZATION
// ==========================================
function buildRouteTree() {
  const tree = document.getElementById('routeTree1');
  if (!tree) return;

  const routes = [
    { path: '/', component: '<Layout />', icon: 'üìê', indent: 0, isParent: true },
    { path: 'index', component: '<Home />', icon: 'üè†', indent: 1 },
    { path: '/about', component: '<About />', icon: 'üëã', indent: 1 },
    { path: '/dashboard', component: '<DashLayout />', icon: 'üìä', indent: 1, isParent: true },
    { path: 'index', component: '<DashHome />', icon: 'üè°', indent: 2 },
    { path: '/dashboard/stats', component: '<Stats />', icon: 'üìà', indent: 2 },
    { path: '/dashboard/settings', component: '<Settings />', icon: '‚öôÔ∏è', indent: 2 },
    { path: '*', component: '<NotFound />', icon: 'üö´', indent: 1 },
  ];

  tree.innerHTML = routes.map((r, i) => `
    <div class="route-node" style="margin-bottom:6px;">
      <div class="route-indent">
        ${'<div class="route-indent-unit branch"></div>'.repeat(r.indent)}
      </div>
      <div class="route-content">
        <span class="route-icon">${r.icon}</span>
        <span class="route-path">${r.path}</span>
        <span class="route-component">${r.component}</span>
      </div>
    </div>
  `).join('');
}

// ==========================================
// INITIALIZATION
// ==========================================
document.addEventListener('DOMContentLoaded', () => {
  completedSections.add('intro');
  updateProgress();
  buildRouteTree();
  testRouteMatch();
  parseURLParams();
});
</script>
</body>
</html>